(function(){const R=document.createElement("link").relList;if(R&&R.supports&&R.supports("modulepreload"))return;for(const z of document.querySelectorAll('link[rel="modulepreload"]'))M(z);new MutationObserver(z=>{for(const L of z)if(L.type==="childList")for(const B of L.addedNodes)B.tagName==="LINK"&&B.rel==="modulepreload"&&M(B)}).observe(document,{childList:!0,subtree:!0});function g(z){const L={};return z.integrity&&(L.integrity=z.integrity),z.referrerPolicy&&(L.referrerPolicy=z.referrerPolicy),z.crossOrigin==="use-credentials"?L.credentials="include":z.crossOrigin==="anonymous"?L.credentials="omit":L.credentials="same-origin",L}function M(z){if(z.ep)return;z.ep=!0;const L=g(z);fetch(z.href,L)}})();var jsxRuntime={exports:{}},reactJsxRuntime_production={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production;function requireReactJsxRuntime_production(){if(hasRequiredReactJsxRuntime_production)return reactJsxRuntime_production;hasRequiredReactJsxRuntime_production=1;var k=Symbol.for("react.transitional.element"),R=Symbol.for("react.fragment");function g(M,z,L){var B=null;if(L!==void 0&&(B=""+L),z.key!==void 0&&(B=""+z.key),"key"in z){L={};for(var x in z)x!=="key"&&(L[x]=z[x])}else L=z;return z=L.ref,{$$typeof:k,type:M,key:B,ref:z!==void 0?z:null,props:L}}return reactJsxRuntime_production.Fragment=R,reactJsxRuntime_production.jsx=g,reactJsxRuntime_production.jsxs=g,reactJsxRuntime_production}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),react={exports:{}},react_production={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production;function requireReact_production(){if(hasRequiredReact_production)return react_production;hasRequiredReact_production=1;var k=Symbol.for("react.transitional.element"),R=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),L=Symbol.for("react.consumer"),B=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),S=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),T=Symbol.iterator;function D(U){return U===null||typeof U!="object"?null:(U=T&&U[T]||U["@@iterator"],typeof U=="function"?U:null)}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,l={};function n(U,N,Y){this.props=U,this.context=N,this.refs=l,this.updater=Y||p}n.prototype.isReactComponent={},n.prototype.setState=function(U,N){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,N,"setState")},n.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function a(){}a.prototype=n.prototype;function u(U,N,Y){this.props=U,this.context=N,this.refs=l,this.updater=Y||p}var f=u.prototype=new a;f.constructor=u,A(f,n.prototype),f.isPureReactComponent=!0;var d=Array.isArray,r={H:null,A:null,T:null,S:null,V:null},o=Object.prototype.hasOwnProperty;function v(U,N,Y,ne,ae,he){return Y=he.ref,{$$typeof:k,type:U,key:N,ref:Y!==void 0?Y:null,props:he}}function h(U,N){return v(U.type,N,void 0,void 0,void 0,U.props)}function y(U){return typeof U=="object"&&U!==null&&U.$$typeof===k}function E(U){var N={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(Y){return N[Y]})}var w=/\/+/g;function W(U,N){return typeof U=="object"&&U!==null&&U.key!=null?E(""+U.key):N.toString(36)}function P(){}function j(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(P,P):(U.status="pending",U.then(function(N){U.status==="pending"&&(U.status="fulfilled",U.value=N)},function(N){U.status==="pending"&&(U.status="rejected",U.reason=N)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function V(U,N,Y,ne,ae){var he=typeof U;(he==="undefined"||he==="boolean")&&(U=null);var oe=!1;if(U===null)oe=!0;else switch(he){case"bigint":case"string":case"number":oe=!0;break;case"object":switch(U.$$typeof){case k:case R:oe=!0;break;case m:return oe=U._init,V(oe(U._payload),N,Y,ne,ae)}}if(oe)return ae=ae(U),oe=ne===""?"."+W(U,0):ne,d(ae)?(Y="",oe!=null&&(Y=oe.replace(w,"$&/")+"/"),V(ae,N,Y,"",function(ge){return ge})):ae!=null&&(y(ae)&&(ae=h(ae,Y+(ae.key==null||U&&U.key===ae.key?"":(""+ae.key).replace(w,"$&/")+"/")+oe)),N.push(ae)),1;oe=0;var pe=ne===""?".":ne+":";if(d(U))for(var ue=0;ue<U.length;ue++)ne=U[ue],he=pe+W(ne,ue),oe+=V(ne,N,Y,he,ae);else if(ue=D(U),typeof ue=="function")for(U=ue.call(U),ue=0;!(ne=U.next()).done;)ne=ne.value,he=pe+W(ne,ue++),oe+=V(ne,N,Y,he,ae);else if(he==="object"){if(typeof U.then=="function")return V(j(U),N,Y,ne,ae);throw N=String(U),Error("Objects are not valid as a React child (found: "+(N==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":N)+"). If you meant to render a collection of children, use an array instead.")}return oe}function G(U,N,Y){if(U==null)return U;var ne=[],ae=0;return V(U,ne,"","",function(he){return N.call(Y,he,ae++)}),ne}function F(U){if(U._status===-1){var N=U._result;N=N(),N.then(function(Y){(U._status===0||U._status===-1)&&(U._status=1,U._result=Y)},function(Y){(U._status===0||U._status===-1)&&(U._status=2,U._result=Y)}),U._status===-1&&(U._status=0,U._result=N)}if(U._status===1)return U._result.default;throw U._result}var H=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var N=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(N))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)};function K(){}return react_production.Children={map:G,forEach:function(U,N,Y){G(U,function(){N.apply(this,arguments)},Y)},count:function(U){var N=0;return G(U,function(){N++}),N},toArray:function(U){return G(U,function(N){return N})||[]},only:function(U){if(!y(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},react_production.Component=n,react_production.Fragment=g,react_production.Profiler=z,react_production.PureComponent=u,react_production.StrictMode=M,react_production.Suspense=b,react_production.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,react_production.__COMPILER_RUNTIME={__proto__:null,c:function(U){return r.H.useMemoCache(U)}},react_production.cache=function(U){return function(){return U.apply(null,arguments)}},react_production.cloneElement=function(U,N,Y){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var ne=A({},U.props),ae=U.key,he=void 0;if(N!=null)for(oe in N.ref!==void 0&&(he=void 0),N.key!==void 0&&(ae=""+N.key),N)!o.call(N,oe)||oe==="key"||oe==="__self"||oe==="__source"||oe==="ref"&&N.ref===void 0||(ne[oe]=N[oe]);var oe=arguments.length-2;if(oe===1)ne.children=Y;else if(1<oe){for(var pe=Array(oe),ue=0;ue<oe;ue++)pe[ue]=arguments[ue+2];ne.children=pe}return v(U.type,ae,void 0,void 0,he,ne)},react_production.createContext=function(U){return U={$$typeof:B,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:L,_context:U},U},react_production.createElement=function(U,N,Y){var ne,ae={},he=null;if(N!=null)for(ne in N.key!==void 0&&(he=""+N.key),N)o.call(N,ne)&&ne!=="key"&&ne!=="__self"&&ne!=="__source"&&(ae[ne]=N[ne]);var oe=arguments.length-2;if(oe===1)ae.children=Y;else if(1<oe){for(var pe=Array(oe),ue=0;ue<oe;ue++)pe[ue]=arguments[ue+2];ae.children=pe}if(U&&U.defaultProps)for(ne in oe=U.defaultProps,oe)ae[ne]===void 0&&(ae[ne]=oe[ne]);return v(U,he,void 0,void 0,null,ae)},react_production.createRef=function(){return{current:null}},react_production.forwardRef=function(U){return{$$typeof:x,render:U}},react_production.isValidElement=y,react_production.lazy=function(U){return{$$typeof:m,_payload:{_status:-1,_result:U},_init:F}},react_production.memo=function(U,N){return{$$typeof:S,type:U,compare:N===void 0?null:N}},react_production.startTransition=function(U){var N=r.T,Y={};r.T=Y;try{var ne=U(),ae=r.S;ae!==null&&ae(Y,ne),typeof ne=="object"&&ne!==null&&typeof ne.then=="function"&&ne.then(K,H)}catch(he){H(he)}finally{r.T=N}},react_production.unstable_useCacheRefresh=function(){return r.H.useCacheRefresh()},react_production.use=function(U){return r.H.use(U)},react_production.useActionState=function(U,N,Y){return r.H.useActionState(U,N,Y)},react_production.useCallback=function(U,N){return r.H.useCallback(U,N)},react_production.useContext=function(U){return r.H.useContext(U)},react_production.useDebugValue=function(){},react_production.useDeferredValue=function(U,N){return r.H.useDeferredValue(U,N)},react_production.useEffect=function(U,N,Y){var ne=r.H;if(typeof Y=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ne.useEffect(U,N)},react_production.useId=function(){return r.H.useId()},react_production.useImperativeHandle=function(U,N,Y){return r.H.useImperativeHandle(U,N,Y)},react_production.useInsertionEffect=function(U,N){return r.H.useInsertionEffect(U,N)},react_production.useLayoutEffect=function(U,N){return r.H.useLayoutEffect(U,N)},react_production.useMemo=function(U,N){return r.H.useMemo(U,N)},react_production.useOptimistic=function(U,N){return r.H.useOptimistic(U,N)},react_production.useReducer=function(U,N,Y){return r.H.useReducer(U,N,Y)},react_production.useRef=function(U){return r.H.useRef(U)},react_production.useState=function(U){return r.H.useState(U)},react_production.useSyncExternalStore=function(U,N,Y){return r.H.useSyncExternalStore(U,N,Y)},react_production.useTransition=function(){return r.H.useTransition()},react_production.version="19.1.0",react_production}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production()),react.exports}var reactExports=requireReact(),client={exports:{}},reactDomClient_production={},scheduler={exports:{}},scheduler_production={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production;function requireScheduler_production(){return hasRequiredScheduler_production||(hasRequiredScheduler_production=1,function(k){function R(G,F){var H=G.length;G.push(F);e:for(;0<H;){var K=H-1>>>1,U=G[K];if(0<z(U,F))G[K]=F,G[H]=U,H=K;else break e}}function g(G){return G.length===0?null:G[0]}function M(G){if(G.length===0)return null;var F=G[0],H=G.pop();if(H!==F){G[0]=H;e:for(var K=0,U=G.length,N=U>>>1;K<N;){var Y=2*(K+1)-1,ne=G[Y],ae=Y+1,he=G[ae];if(0>z(ne,H))ae<U&&0>z(he,ne)?(G[K]=he,G[ae]=H,K=ae):(G[K]=ne,G[Y]=H,K=Y);else if(ae<U&&0>z(he,H))G[K]=he,G[ae]=H,K=ae;else break e}}return F}function z(G,F){var H=G.sortIndex-F.sortIndex;return H!==0?H:G.id-F.id}if(k.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var L=performance;k.unstable_now=function(){return L.now()}}else{var B=Date,x=B.now();k.unstable_now=function(){return B.now()-x}}var b=[],S=[],m=1,T=null,D=3,p=!1,A=!1,l=!1,n=!1,a=typeof setTimeout=="function"?setTimeout:null,u=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;function d(G){for(var F=g(S);F!==null;){if(F.callback===null)M(S);else if(F.startTime<=G)M(S),F.sortIndex=F.expirationTime,R(b,F);else break;F=g(S)}}function r(G){if(l=!1,d(G),!A)if(g(b)!==null)A=!0,o||(o=!0,W());else{var F=g(S);F!==null&&V(r,F.startTime-G)}}var o=!1,v=-1,h=5,y=-1;function E(){return n?!0:!(k.unstable_now()-y<h)}function w(){if(n=!1,o){var G=k.unstable_now();y=G;var F=!0;try{e:{A=!1,l&&(l=!1,u(v),v=-1),p=!0;var H=D;try{t:{for(d(G),T=g(b);T!==null&&!(T.expirationTime>G&&E());){var K=T.callback;if(typeof K=="function"){T.callback=null,D=T.priorityLevel;var U=K(T.expirationTime<=G);if(G=k.unstable_now(),typeof U=="function"){T.callback=U,d(G),F=!0;break t}T===g(b)&&M(b),d(G)}else M(b);T=g(b)}if(T!==null)F=!0;else{var N=g(S);N!==null&&V(r,N.startTime-G),F=!1}}break e}finally{T=null,D=H,p=!1}F=void 0}}finally{F?W():o=!1}}}var W;if(typeof f=="function")W=function(){f(w)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,j=P.port2;P.port1.onmessage=w,W=function(){j.postMessage(null)}}else W=function(){a(w,0)};function V(G,F){v=a(function(){G(k.unstable_now())},F)}k.unstable_IdlePriority=5,k.unstable_ImmediatePriority=1,k.unstable_LowPriority=4,k.unstable_NormalPriority=3,k.unstable_Profiling=null,k.unstable_UserBlockingPriority=2,k.unstable_cancelCallback=function(G){G.callback=null},k.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):h=0<G?Math.floor(1e3/G):5},k.unstable_getCurrentPriorityLevel=function(){return D},k.unstable_next=function(G){switch(D){case 1:case 2:case 3:var F=3;break;default:F=D}var H=D;D=F;try{return G()}finally{D=H}},k.unstable_requestPaint=function(){n=!0},k.unstable_runWithPriority=function(G,F){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var H=D;D=G;try{return F()}finally{D=H}},k.unstable_scheduleCallback=function(G,F,H){var K=k.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?K+H:K):H=K,G){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=H+U,G={id:m++,callback:F,priorityLevel:G,startTime:H,expirationTime:U,sortIndex:-1},H>K?(G.sortIndex=H,R(S,G),g(b)===null&&G===g(S)&&(l?(u(v),v=-1):l=!0,V(r,H-K))):(G.sortIndex=U,R(b,G),A||p||(A=!0,o||(o=!0,W()))),G},k.unstable_shouldYield=E,k.unstable_wrapCallback=function(G){var F=D;return function(){var H=D;D=F;try{return G.apply(this,arguments)}finally{D=H}}}}(scheduler_production)),scheduler_production}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production()),scheduler.exports}var reactDom={exports:{}},reactDom_production={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production;function requireReactDom_production(){if(hasRequiredReactDom_production)return reactDom_production;hasRequiredReactDom_production=1;var k=requireReact();function R(b){var S="https://react.dev/errors/"+b;if(1<arguments.length){S+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)S+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+b+"; visit "+S+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function g(){}var M={d:{f:g,r:function(){throw Error(R(522))},D:g,C:g,L:g,m:g,X:g,S:g,M:g},p:0,findDOMNode:null},z=Symbol.for("react.portal");function L(b,S,m){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:z,key:T==null?null:""+T,children:b,containerInfo:S,implementation:m}}var B=k.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function x(b,S){if(b==="font")return"";if(typeof S=="string")return S==="use-credentials"?S:""}return reactDom_production.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,reactDom_production.createPortal=function(b,S){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!S||S.nodeType!==1&&S.nodeType!==9&&S.nodeType!==11)throw Error(R(299));return L(b,S,null,m)},reactDom_production.flushSync=function(b){var S=B.T,m=M.p;try{if(B.T=null,M.p=2,b)return b()}finally{B.T=S,M.p=m,M.d.f()}},reactDom_production.preconnect=function(b,S){typeof b=="string"&&(S?(S=S.crossOrigin,S=typeof S=="string"?S==="use-credentials"?S:"":void 0):S=null,M.d.C(b,S))},reactDom_production.prefetchDNS=function(b){typeof b=="string"&&M.d.D(b)},reactDom_production.preinit=function(b,S){if(typeof b=="string"&&S&&typeof S.as=="string"){var m=S.as,T=x(m,S.crossOrigin),D=typeof S.integrity=="string"?S.integrity:void 0,p=typeof S.fetchPriority=="string"?S.fetchPriority:void 0;m==="style"?M.d.S(b,typeof S.precedence=="string"?S.precedence:void 0,{crossOrigin:T,integrity:D,fetchPriority:p}):m==="script"&&M.d.X(b,{crossOrigin:T,integrity:D,fetchPriority:p,nonce:typeof S.nonce=="string"?S.nonce:void 0})}},reactDom_production.preinitModule=function(b,S){if(typeof b=="string")if(typeof S=="object"&&S!==null){if(S.as==null||S.as==="script"){var m=x(S.as,S.crossOrigin);M.d.M(b,{crossOrigin:m,integrity:typeof S.integrity=="string"?S.integrity:void 0,nonce:typeof S.nonce=="string"?S.nonce:void 0})}}else S==null&&M.d.M(b)},reactDom_production.preload=function(b,S){if(typeof b=="string"&&typeof S=="object"&&S!==null&&typeof S.as=="string"){var m=S.as,T=x(m,S.crossOrigin);M.d.L(b,m,{crossOrigin:T,integrity:typeof S.integrity=="string"?S.integrity:void 0,nonce:typeof S.nonce=="string"?S.nonce:void 0,type:typeof S.type=="string"?S.type:void 0,fetchPriority:typeof S.fetchPriority=="string"?S.fetchPriority:void 0,referrerPolicy:typeof S.referrerPolicy=="string"?S.referrerPolicy:void 0,imageSrcSet:typeof S.imageSrcSet=="string"?S.imageSrcSet:void 0,imageSizes:typeof S.imageSizes=="string"?S.imageSizes:void 0,media:typeof S.media=="string"?S.media:void 0})}},reactDom_production.preloadModule=function(b,S){if(typeof b=="string")if(S){var m=x(S.as,S.crossOrigin);M.d.m(b,{as:typeof S.as=="string"&&S.as!=="script"?S.as:void 0,crossOrigin:m,integrity:typeof S.integrity=="string"?S.integrity:void 0})}else M.d.m(b)},reactDom_production.requestFormReset=function(b){M.d.r(b)},reactDom_production.unstable_batchedUpdates=function(b,S){return b(S)},reactDom_production.useFormState=function(b,S,m){return B.H.useFormState(b,S,m)},reactDom_production.useFormStatus=function(){return B.H.useHostTransitionStatus()},reactDom_production.version="19.1.0",reactDom_production}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function k(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(k)}catch(R){console.error(R)}}return k(),reactDom.exports=requireReactDom_production(),reactDom.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDomClient_production;function requireReactDomClient_production(){if(hasRequiredReactDomClient_production)return reactDomClient_production;hasRequiredReactDomClient_production=1;var k=requireScheduler(),R=requireReact(),g=requireReactDom();function M(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function z(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function L(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function B(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function x(e){if(L(e)!==e)throw Error(M(188))}function b(e){var t=e.alternate;if(!t){if(t=L(e),t===null)throw Error(M(188));return t!==e?null:e}for(var i=e,s=t;;){var _=i.return;if(_===null)break;var C=_.alternate;if(C===null){if(s=_.return,s!==null){i=s;continue}break}if(_.child===C.child){for(C=_.child;C;){if(C===i)return x(_),e;if(C===s)return x(_),t;C=C.sibling}throw Error(M(188))}if(i.return!==s.return)i=_,s=C;else{for(var Z=!1,te=_.child;te;){if(te===i){Z=!0,i=_,s=C;break}if(te===s){Z=!0,s=_,i=C;break}te=te.sibling}if(!Z){for(te=C.child;te;){if(te===i){Z=!0,i=C,s=_;break}if(te===s){Z=!0,s=C,i=_;break}te=te.sibling}if(!Z)throw Error(M(189))}}if(i.alternate!==s)throw Error(M(190))}if(i.tag!==3)throw Error(M(188));return i.stateNode.current===i?e:t}function S(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=S(e),t!==null)return t;e=e.sibling}return null}var m=Object.assign,T=Symbol.for("react.element"),D=Symbol.for("react.transitional.element"),p=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),n=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),r=Symbol.for("react.suspense"),o=Symbol.for("react.suspense_list"),v=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),E=Symbol.for("react.memo_cache_sentinel"),w=Symbol.iterator;function W(e){return e===null||typeof e!="object"?null:(e=w&&e[w]||e["@@iterator"],typeof e=="function"?e:null)}var P=Symbol.for("react.client.reference");function j(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===P?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case A:return"Fragment";case n:return"Profiler";case l:return"StrictMode";case r:return"Suspense";case o:return"SuspenseList";case y:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case p:return"Portal";case f:return(e.displayName||"Context")+".Provider";case u:return(e._context.displayName||"Context")+".Consumer";case d:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case v:return t=e.displayName||null,t!==null?t:j(e.type)||"Memo";case h:t=e._payload,e=e._init;try{return j(e(t))}catch{}}return null}var V=Array.isArray,G=R.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F=g.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,H={pending:!1,data:null,method:null,action:null},K=[],U=-1;function N(e){return{current:e}}function Y(e){0>U||(e.current=K[U],K[U]=null,U--)}function ne(e,t){U++,K[U]=e.current,e.current=t}var ae=N(null),he=N(null),oe=N(null),pe=N(null);function ue(e,t){switch(ne(oe,t),ne(he,e),ne(ae,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Mc(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Mc(t),e=Sc(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Y(ae),ne(ae,e)}function ge(){Y(ae),Y(he),Y(oe)}function Fe(e){e.memoizedState!==null&&ne(pe,e);var t=ae.current,i=Sc(t,e.type);t!==i&&(ne(he,e),ne(ae,i))}function Be(e){he.current===e&&(Y(ae),Y(he)),pe.current===e&&(Y(pe),ll._currentValue=H)}var ke=Object.prototype.hasOwnProperty,be=k.unstable_scheduleCallback,fe=k.unstable_cancelCallback,De=k.unstable_shouldYield,Ve=k.unstable_requestPaint,Xe=k.unstable_now,it=k.unstable_getCurrentPriorityLevel,nt=k.unstable_ImmediatePriority,et=k.unstable_UserBlockingPriority,$e=k.unstable_NormalPriority,Qe=k.unstable_LowPriority,Ye=k.unstable_IdlePriority,Ge=k.log,ot=k.unstable_setDisableYieldValue,st=null,Q=null;function ee(e){if(typeof Ge=="function"&&ot(e),Q&&typeof Q.setStrictMode=="function")try{Q.setStrictMode(st,e)}catch{}}var re=Math.clz32?Math.clz32:je,Se=Math.log,ve=Math.LN2;function je(e){return e>>>=0,e===0?32:31-(Se(e)/ve|0)|0}var Ie=256,J=4194304;function me(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Te(e,t,i){var s=e.pendingLanes;if(s===0)return 0;var _=0,C=e.suspendedLanes,Z=e.pingedLanes;e=e.warmLanes;var te=s&134217727;return te!==0?(s=te&~C,s!==0?_=me(s):(Z&=te,Z!==0?_=me(Z):i||(i=te&~e,i!==0&&(_=me(i))))):(te=s&~C,te!==0?_=me(te):Z!==0?_=me(Z):i||(i=s&~e,i!==0&&(_=me(i)))),_===0?0:t!==0&&t!==_&&(t&C)===0&&(C=_&-_,i=t&-t,C>=i||C===32&&(i&4194048)!==0)?t:_}function He(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function _e(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ue(){var e=Ie;return Ie<<=1,(Ie&4194048)===0&&(Ie=256),e}function $(){var e=J;return J<<=1,(J&62914560)===0&&(J=4194304),e}function We(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function rt(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function I(e,t,i,s,_,C){var Z=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var te=e.entanglements,ce=e.expirationTimes,Le=e.hiddenUpdates;for(i=Z&~i;0<i;){var Ke=31-re(i),Je=1<<Ke;te[Ke]=0,ce[Ke]=-1;var Pe=Le[Ke];if(Pe!==null)for(Le[Ke]=null,Ke=0;Ke<Pe.length;Ke++){var Ne=Pe[Ke];Ne!==null&&(Ne.lane&=-536870913)}i&=~Je}s!==0&&Ae(e,s,0),C!==0&&_===0&&e.tag!==0&&(e.suspendedLanes|=C&~(Z&~t))}function Ae(e,t,i){e.pendingLanes|=t,e.suspendedLanes&=~t;var s=31-re(t);e.entangledLanes|=t,e.entanglements[s]=e.entanglements[s]|1073741824|i&4194090}function Ee(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var s=31-re(i),_=1<<s;_&t|e[s]&t&&(e[s]|=t),i&=~_}}function q(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function de(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function we(){var e=F.p;return e!==0?e:(e=window.event,e===void 0?32:jc(e.type))}function ut(e,t){var i=F.p;try{return F.p=e,t()}finally{F.p=i}}var at=Math.random().toString(36).slice(2),tt="__reactFiber$"+at,vt="__reactProps$"+at,ti="__reactContainer$"+at,St="__reactEvents$"+at,Tt="__reactListeners$"+at,At="__reactHandles$"+at,ii="__reactResources$"+at,Pt="__reactMarker$"+at;function Hi(e){delete e[tt],delete e[vt],delete e[St],delete e[Tt],delete e[At]}function bi(e){var t=e[tt];if(t)return t;for(var i=e.parentNode;i;){if(t=i[ti]||i[tt]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=Cc(e);e!==null;){if(i=e[tt])return i;e=Cc(e)}return t}e=i,i=e.parentNode}return null}function Ht(e){if(e=e[tt]||e[ti]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function jt(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(M(33))}function It(e){var t=e[ii];return t||(t=e[ii]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Nt(e){e[Pt]=!0}var vi=new Set,Tn={};function $i(e,t){Ui(e,t),Ui(e+"Capture",t)}function Ui(e,t){for(Tn[e]=t,e=0;e<t.length;e++)vi.add(t[e])}var xa=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Xr={},Zr={};function ya(e){return ke.call(Zr,e)?!0:ke.call(Xr,e)?!1:xa.test(e)?Zr[e]=!0:(Xr[e]=!0,!1)}function Nn(e,t,i){if(ya(t))if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var s=t.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+i)}}function dr(e,t,i){if(i===null)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+i)}}function gn(e,t,i,s){if(s===null)e.removeAttribute(i);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(t,i,""+s)}}var ss,cl;function gr(e){if(ss===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);ss=t&&t[1]||"",cl=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ss+e+cl}var Ct=!1;function qi(e,t){if(!e||Ct)return"";Ct=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(t){var Je=function(){throw Error()};if(Object.defineProperty(Je.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Je,[])}catch(Ne){var Pe=Ne}Reflect.construct(e,[],Je)}else{try{Je.call()}catch(Ne){Pe=Ne}e.call(Je.prototype)}}else{try{throw Error()}catch(Ne){Pe=Ne}(Je=e())&&typeof Je.catch=="function"&&Je.catch(function(){})}}catch(Ne){if(Ne&&Pe&&typeof Ne.stack=="string")return[Ne.stack,Pe.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var _=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");_&&_.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var C=s.DetermineComponentFrameRoot(),Z=C[0],te=C[1];if(Z&&te){var ce=Z.split(`
`),Le=te.split(`
`);for(_=s=0;s<ce.length&&!ce[s].includes("DetermineComponentFrameRoot");)s++;for(;_<Le.length&&!Le[_].includes("DetermineComponentFrameRoot");)_++;if(s===ce.length||_===Le.length)for(s=ce.length-1,_=Le.length-1;1<=s&&0<=_&&ce[s]!==Le[_];)_--;for(;1<=s&&0<=_;s--,_--)if(ce[s]!==Le[_]){if(s!==1||_!==1)do if(s--,_--,0>_||ce[s]!==Le[_]){var Ke=`
`+ce[s].replace(" at new "," at ");return e.displayName&&Ke.includes("<anonymous>")&&(Ke=Ke.replace("<anonymous>",e.displayName)),Ke}while(1<=s&&0<=_);break}}}finally{Ct=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?gr(i):""}function en(e){switch(e.tag){case 26:case 27:case 5:return gr(e.type);case 16:return gr("Lazy");case 13:return gr("Suspense");case 19:return gr("SuspenseList");case 0:case 15:return qi(e.type,!1);case 11:return qi(e.type.render,!1);case 1:return qi(e.type,!0);case 31:return gr("Activity");default:return""}}function dl(e){try{var t="";do t+=en(e),e=e.return;while(e);return t}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}function ci(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ba(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function ls(e){var t=ba(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var _=i.get,C=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return _.call(this)},set:function(Z){s=""+Z,C.call(this,Z)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return s},setValue:function(Z){s=""+Z},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function vr(e){e._valueTracker||(e._valueTracker=ls(e))}function Ea(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),s="";return e&&(s=ba(e)?e.checked?"true":"false":e.value),e=s,e!==i?(t.setValue(e),!0):!1}function mr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Fn=/[\n"\\]/g;function mi(e){return e.replace(Fn,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function di(e,t,i,s,_,C,Z,te){e.name="",Z!=null&&typeof Z!="function"&&typeof Z!="symbol"&&typeof Z!="boolean"?e.type=Z:e.removeAttribute("type"),t!=null?Z==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+ci(t)):e.value!==""+ci(t)&&(e.value=""+ci(t)):Z!=="submit"&&Z!=="reset"||e.removeAttribute("value"),t!=null?vn(e,Z,ci(t)):i!=null?vn(e,Z,ci(i)):s!=null&&e.removeAttribute("value"),_==null&&C!=null&&(e.defaultChecked=!!C),_!=null&&(e.checked=_&&typeof _!="function"&&typeof _!="symbol"),te!=null&&typeof te!="function"&&typeof te!="symbol"&&typeof te!="boolean"?e.name=""+ci(te):e.removeAttribute("name")}function Wn(e,t,i,s,_,C,Z,te){if(C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(e.type=C),t!=null||i!=null){if(!(C!=="submit"&&C!=="reset"||t!=null))return;i=i!=null?""+ci(i):"",t=t!=null?""+ci(t):i,te||t===e.value||(e.value=t),e.defaultValue=t}s=s??_,s=typeof s!="function"&&typeof s!="symbol"&&!!s,e.checked=te?e.checked:!!s,e.defaultChecked=!!s,Z!=null&&typeof Z!="function"&&typeof Z!="symbol"&&typeof Z!="boolean"&&(e.name=Z)}function vn(e,t,i){t==="number"&&mr(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function Vi(e,t,i,s){if(e=e.options,t){t={};for(var _=0;_<i.length;_++)t["$"+i[_]]=!0;for(i=0;i<e.length;i++)_=t.hasOwnProperty("$"+e[i].value),e[i].selected!==_&&(e[i].selected=_),_&&s&&(e[i].defaultSelected=!0)}else{for(i=""+ci(i),t=null,_=0;_<e.length;_++){if(e[_].value===i){e[_].selected=!0,s&&(e[_].defaultSelected=!0);return}t!==null||e[_].disabled||(t=e[_])}t!==null&&(t.selected=!0)}}function gl(e,t,i){if(t!=null&&(t=""+ci(t),t!==e.value&&(e.value=t),i==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=i!=null?""+ci(i):""}function Dn(e,t,i,s){if(t==null){if(s!=null){if(i!=null)throw Error(M(92));if(V(s)){if(1<s.length)throw Error(M(93));s=s[0]}i=s}i==null&&(i=""),t=i}i=ci(t),e.defaultValue=i,s=e.textContent,s===i&&s!==""&&s!==null&&(e.value=s)}function Hn(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var On=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function vl(e,t,i){var s=t.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?s?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":s?e.setProperty(t,i):typeof i!="number"||i===0||On.has(t)?t==="float"?e.cssFloat=i:e[t]=(""+i).trim():e[t]=i+"px"}function wo(e,t,i){if(t!=null&&typeof t!="object")throw Error(M(62));if(e=e.style,i!=null){for(var s in i)!i.hasOwnProperty(s)||t!=null&&t.hasOwnProperty(s)||(s.indexOf("--")===0?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="");for(var _ in t)s=t[_],t.hasOwnProperty(_)&&i[_]!==s&&vl(e,_,s)}else for(var C in t)t.hasOwnProperty(C)&&vl(e,C,t[C])}function tn(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ci=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),wi=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Bt(e){return wi.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Vn=null;function kr(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var jn=null,ji=null;function os(e){var t=Ht(e);if(t&&(e=t.stateNode)){var i=e[vt]||null;e:switch(e=t.stateNode,t.type){case"input":if(di(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+mi(""+t)+'"][type="radio"]'),t=0;t<i.length;t++){var s=i[t];if(s!==e&&s.form===e.form){var _=s[vt]||null;if(!_)throw Error(M(90));di(s,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name)}}for(t=0;t<i.length;t++)s=i[t],s.form===e.form&&Ea(s)}break e;case"textarea":gl(e,i.value,i.defaultValue);break e;case"select":t=i.value,t!=null&&Vi(e,!!i.multiple,t,!1)}}}var Qr=!1;function Kn(e,t,i){if(Qr)return e(t,i);Qr=!0;try{var s=e(t);return s}finally{if(Qr=!1,(jn!==null||ji!==null)&&(oo(),jn&&(t=jn,e=ji,ji=jn=null,os(t),e)))for(t=0;t<e.length;t++)os(e[t])}}function Jr(e,t){var i=e.stateNode;if(i===null)return null;var s=i[vt]||null;if(s===null)return null;i=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(M(231,t,typeof i));return i}var mn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pi=!1;if(mn)try{var _n={};Object.defineProperty(_n,"passive",{get:function(){Pi=!0}}),window.addEventListener("test",_n,_n),window.removeEventListener("test",_n,_n)}catch{Pi=!1}var Cn=null,us=null,wn=null;function fs(){if(wn)return wn;var e,t=us,i=t.length,s,_="value"in Cn?Cn.value:Cn.textContent,C=_.length;for(e=0;e<i&&t[e]===_[e];e++);var Z=i-e;for(s=1;s<=Z&&t[i-s]===_[C-s];s++);return wn=_.slice(e,1<s?1-s:void 0)}function $r(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Aa(){return!0}function hs(){return!1}function Ti(e){function t(i,s,_,C,Z){this._reactName=i,this._targetInst=_,this.type=s,this.nativeEvent=C,this.target=Z,this.currentTarget=null;for(var te in e)e.hasOwnProperty(te)&&(i=e[te],this[te]=i?i(C):C[te]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?Aa:hs,this.isPropagationStopped=hs,this}return m(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Aa)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Aa)},persist:function(){},isPersistent:Aa}),t}var Yn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ma=Ti(Yn),qr=m({},Yn,{view:0,detail:0}),Lo=Ti(qr),cs,ds,ea,Sa=m({},qr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zn,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ea&&(ea&&e.type==="mousemove"?(cs=e.screenX-ea.screenX,ds=e.screenY-ea.screenY):ds=cs=0,ea=e),cs)},movementY:function(e){return"movementY"in e?e.movementY:ds}}),ml=Ti(Sa),Ro=m({},Sa,{dataTransfer:0}),zo=Ti(Ro),Bo=m({},qr,{relatedTarget:0}),Xn=Ti(Bo),Uo=m({},Yn,{animationName:0,elapsedTime:0,pseudoElement:0}),Po=Ti(Uo),Io=m({},Yn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ta=Ti(Io),_l=m({},Yn,{data:0}),_r=Ti(_l),Go={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},No={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fo={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Wo(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Fo[e])?!!t[e]:!1}function Zn(){return Wo}var Ho=m({},qr,{key:function(e){if(e.key){var t=Go[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=$r(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?No[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zn,charCode:function(e){return e.type==="keypress"?$r(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?$r(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),pl=Ti(Ho),xl=m({},Sa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yl=Ti(xl),Vo=m({},qr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zn}),jo=Ti(Vo),Ko=m({},Yn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Da=Ti(Ko),Yo=m({},Sa,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Xo=Ti(Yo),Zo=m({},Yn,{newState:0,oldState:0}),ko=Ti(Zo),ta=[9,13,27,32],ia=mn&&"CompositionEvent"in window,na=null;mn&&"documentMode"in document&&(na=document.documentMode);var Qo=mn&&"TextEvent"in window&&!na,bl=mn&&(!ia||na&&8<na&&11>=na),El=" ",Al=!1;function Ml(e,t){switch(e){case"keyup":return ta.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Sl(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var pn=!1;function Jo(e,t){switch(e){case"compositionend":return Sl(t);case"keypress":return t.which!==32?null:(Al=!0,El);case"textInput":return e=t.data,e===El&&Al?null:e;default:return null}}function $o(e,t){if(pn)return e==="compositionend"||!ia&&Ml(e,t)?(e=fs(),wn=us=Cn=null,pn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return bl&&t.locale!=="ko"?null:t.data;default:return null}}var pr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gs(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!pr[e.type]:t==="textarea"}function vs(e,t,i,s){jn?ji?ji.push(s):ji=[s]:jn=s,t=vo(t,"onChange"),0<t.length&&(i=new Ma("onChange","change",null,i,s),e.push({event:i,listeners:t}))}var xr=null,kn=null;function Tl(e){xc(e,0)}function Oa(e){var t=jt(e);if(Ea(t))return e}function Dl(e,t){if(e==="change")return t}var Ol=!1;if(mn){var ms;if(mn){var Cl="oninput"in document;if(!Cl){var yr=document.createElement("div");yr.setAttribute("oninput","return;"),Cl=typeof yr.oninput=="function"}ms=Cl}else ms=!1;Ol=ms&&(!document.documentMode||9<document.documentMode)}function wl(){xr&&(xr.detachEvent("onpropertychange",_s),kn=xr=null)}function _s(e){if(e.propertyName==="value"&&Oa(kn)){var t=[];vs(t,kn,e,kr(e)),Kn(Tl,t)}}function Ll(e,t,i){e==="focusin"?(wl(),xr=t,kn=i,xr.attachEvent("onpropertychange",_s)):e==="focusout"&&wl()}function Rl(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Oa(kn)}function qo(e,t){if(e==="click")return Oa(t)}function Ca(e,t){if(e==="input"||e==="change")return Oa(t)}function Qn(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Li=typeof Object.is=="function"?Object.is:Qn;function ra(e,t){if(Li(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),s=Object.keys(t);if(i.length!==s.length)return!1;for(s=0;s<i.length;s++){var _=i[s];if(!ke.call(t,_)||!Li(e[_],t[_]))return!1}return!0}function Ri(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ps(e,t){var i=Ri(e);e=0;for(var s;i;){if(i.nodeType===3){if(s=e+i.textContent.length,e<=t&&s>=t)return{node:i,offset:t-e};e=s}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Ri(i)}}function xs(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?xs(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function zl(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=mr(e.document);t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=mr(e.document)}return t}function wa(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var La=mn&&"documentMode"in document&&11>=document.documentMode,Jn=null,Ra=null,br=null,za=!1;function ys(e,t,i){var s=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;za||Jn==null||Jn!==mr(s)||(s=Jn,"selectionStart"in s&&wa(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),br&&ra(br,s)||(br=s,s=vo(Ra,"onSelect"),0<s.length&&(t=new Ma("onSelect","select",null,t,i),e.push({event:t,listeners:s}),t.target=Jn)))}function Ln(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var $n={animationend:Ln("Animation","AnimationEnd"),animationiteration:Ln("Animation","AnimationIteration"),animationstart:Ln("Animation","AnimationStart"),transitionrun:Ln("Transition","TransitionRun"),transitionstart:Ln("Transition","TransitionStart"),transitioncancel:Ln("Transition","TransitionCancel"),transitionend:Ln("Transition","TransitionEnd")},Ba={},bs={};mn&&(bs=document.createElement("div").style,"AnimationEvent"in window||(delete $n.animationend.animation,delete $n.animationiteration.animation,delete $n.animationstart.animation),"TransitionEvent"in window||delete $n.transitionend.transition);function nn(e){if(Ba[e])return Ba[e];if(!$n[e])return e;var t=$n[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in bs)return Ba[e]=t[i];return e}var rn=nn("animationend"),Ua=nn("animationiteration"),Es=nn("animationstart"),As=nn("transitionrun"),Bl=nn("transitionstart"),Ul=nn("transitioncancel"),Ms=nn("transitionend"),Ss=new Map,Er="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Er.push("scrollEnd");function Di(e,t){Ss.set(e,t),$i(t,[e])}var Ts=new WeakMap;function zi(e,t){if(typeof e=="object"&&e!==null){var i=Ts.get(e);return i!==void 0?i:(t={value:e,source:t,stack:dl(t)},Ts.set(e,t),t)}return{value:e,source:t,stack:dl(t)}}var Bi=[],qn=0,Pa=0;function Ar(){for(var e=qn,t=Pa=qn=0;t<e;){var i=Bi[t];Bi[t++]=null;var s=Bi[t];Bi[t++]=null;var _=Bi[t];Bi[t++]=null;var C=Bi[t];if(Bi[t++]=null,s!==null&&_!==null){var Z=s.pending;Z===null?_.next=_:(_.next=Z.next,Z.next=_),s.pending=_}C!==0&&Ds(i,_,C)}}function aa(e,t,i,s){Bi[qn++]=e,Bi[qn++]=t,Bi[qn++]=i,Bi[qn++]=s,Pa|=s,e.lanes|=s,e=e.alternate,e!==null&&(e.lanes|=s)}function Ia(e,t,i,s){return aa(e,t,i,s),sa(e)}function Kt(e,t){return aa(e,null,null,t),sa(e)}function Ds(e,t,i){e.lanes|=i;var s=e.alternate;s!==null&&(s.lanes|=i);for(var _=!1,C=e.return;C!==null;)C.childLanes|=i,s=C.alternate,s!==null&&(s.childLanes|=i),C.tag===22&&(e=C.stateNode,e===null||e._visibility&1||(_=!0)),e=C,C=C.return;return e.tag===3?(C=e.stateNode,_&&t!==null&&(_=31-re(i),e=C.hiddenUpdates,s=e[_],s===null?e[_]=[t]:s.push(t),t.lane=i|536870912),C):null}function sa(e){if(50<qs)throw qs=0,ju=null,Error(M(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Mr={};function eu(e,t,i,s){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ii(e,t,i,s){return new eu(e,t,i,s)}function Os(e){return e=e.prototype,!(!e||!e.isReactComponent)}function an(e,t){var i=e.alternate;return i===null?(i=Ii(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function Pl(e,t){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,t=i.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function sn(e,t,i,s,_,C){var Z=0;if(s=e,typeof e=="function")Os(e)&&(Z=1);else if(typeof e=="string")Z=Yd(e,i,ae.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case y:return e=Ii(31,i,t,_),e.elementType=y,e.lanes=C,e;case A:return Rn(i.children,_,C,t);case l:Z=8,_|=24;break;case n:return e=Ii(12,i,t,_|2),e.elementType=n,e.lanes=C,e;case r:return e=Ii(13,i,t,_),e.elementType=r,e.lanes=C,e;case o:return e=Ii(19,i,t,_),e.elementType=o,e.lanes=C,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case a:case f:Z=10;break e;case u:Z=9;break e;case d:Z=11;break e;case v:Z=14;break e;case h:Z=16,s=null;break e}Z=29,i=Error(M(130,e===null?"null":typeof e,"")),s=null}return t=Ii(Z,i,t,_),t.elementType=e,t.type=s,t.lanes=C,t}function Rn(e,t,i,s){return e=Ii(7,e,s,t),e.lanes=i,e}function Ga(e,t,i){return e=Ii(6,e,null,t),e.lanes=i,e}function Na(e,t,i){return t=Ii(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var er=[],Sr=0,la=null,Tr=0,Oi=[],Gi=0,zn=null,xn=1,yn="";function tr(e,t){er[Sr++]=Tr,er[Sr++]=la,la=e,Tr=t}function Il(e,t,i){Oi[Gi++]=xn,Oi[Gi++]=yn,Oi[Gi++]=zn,zn=e;var s=xn;e=yn;var _=32-re(s)-1;s&=~(1<<_),i+=1;var C=32-re(t)+_;if(30<C){var Z=_-_%5;C=(s&(1<<Z)-1).toString(32),s>>=Z,_-=Z,xn=1<<32-re(t)+_|i<<_|s,yn=C+e}else xn=1<<C|i<<_|s,yn=e}function Cs(e){e.return!==null&&(tr(e,1),Il(e,1,0))}function ws(e){for(;e===la;)la=er[--Sr],er[Sr]=null,Tr=er[--Sr],er[Sr]=null;for(;e===zn;)zn=Oi[--Gi],Oi[Gi]=null,yn=Oi[--Gi],Oi[Gi]=null,xn=Oi[--Gi],Oi[Gi]=null}var Ei=null,ni=null,Ft=!1,ir=null,ln=!1,Ls=Error(M(519));function nr(e){var t=Error(M(418,""));throw fa(zi(t,e)),Ls}function Gl(e){var t=e.stateNode,i=e.type,s=e.memoizedProps;switch(t[tt]=e,t[vt]=s,i){case"dialog":zt("cancel",t),zt("close",t);break;case"iframe":case"object":case"embed":zt("load",t);break;case"video":case"audio":for(i=0;i<tl.length;i++)zt(tl[i],t);break;case"source":zt("error",t);break;case"img":case"image":case"link":zt("error",t),zt("load",t);break;case"details":zt("toggle",t);break;case"input":zt("invalid",t),Wn(t,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0),vr(t);break;case"select":zt("invalid",t);break;case"textarea":zt("invalid",t),Dn(t,s.value,s.defaultValue,s.children),vr(t)}i=s.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||t.textContent===""+i||s.suppressHydrationWarning===!0||Ac(t.textContent,i)?(s.popover!=null&&(zt("beforetoggle",t),zt("toggle",t)),s.onScroll!=null&&zt("scroll",t),s.onScrollEnd!=null&&zt("scrollend",t),s.onClick!=null&&(t.onclick=mo),t=!0):t=!1,t||nr(e)}function on(e){for(Ei=e.return;Ei;)switch(Ei.tag){case 5:case 13:ln=!1;return;case 27:case 3:ln=!0;return;default:Ei=Ei.return}}function oa(e){if(e!==Ei)return!1;if(!Ft)return on(e),Ft=!0,!1;var t=e.tag,i;if((i=t!==3&&t!==27)&&((i=t===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||lf(e.type,e.memoizedProps)),i=!i),i&&ni&&nr(e),on(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(M(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(i=e.data,i==="/$"){if(t===0){ni=Sn(e.nextSibling);break e}t--}else i!=="$"&&i!=="$!"&&i!=="$?"||t++;e=e.nextSibling}ni=null}}else t===27?(t=ni,Wr(e.type)?(e=hf,hf=null,ni=e):ni=t):ni=Ei?Sn(e.stateNode.nextSibling):null;return!0}function ua(){ni=Ei=null,Ft=!1}function Rs(){var e=ir;return e!==null&&(Wi===null?Wi=e:Wi.push.apply(Wi,e),ir=null),e}function fa(e){ir===null?ir=[e]:ir.push(e)}var zs=N(null),Ki=null,Yi=null;function un(e,t,i){ne(zs,t._currentValue),t._currentValue=i}function bn(e){e._currentValue=zs.current,Y(zs)}function Fa(e,t,i){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===i)break;e=e.return}}function Bs(e,t,i,s){var _=e.child;for(_!==null&&(_.return=e);_!==null;){var C=_.dependencies;if(C!==null){var Z=_.child;C=C.firstContext;e:for(;C!==null;){var te=C;C=_;for(var ce=0;ce<t.length;ce++)if(te.context===t[ce]){C.lanes|=i,te=C.alternate,te!==null&&(te.lanes|=i),Fa(C.return,i,e),s||(Z=null);break e}C=te.next}}else if(_.tag===18){if(Z=_.return,Z===null)throw Error(M(341));Z.lanes|=i,C=Z.alternate,C!==null&&(C.lanes|=i),Fa(Z,i,e),Z=null}else Z=_.child;if(Z!==null)Z.return=_;else for(Z=_;Z!==null;){if(Z===e){Z=null;break}if(_=Z.sibling,_!==null){_.return=Z.return,Z=_;break}Z=Z.return}_=Z}}function En(e,t,i,s){e=null;for(var _=t,C=!1;_!==null;){if(!C){if((_.flags&524288)!==0)C=!0;else if((_.flags&262144)!==0)break}if(_.tag===10){var Z=_.alternate;if(Z===null)throw Error(M(387));if(Z=Z.memoizedProps,Z!==null){var te=_.type;Li(_.pendingProps.value,Z.value)||(e!==null?e.push(te):e=[te])}}else if(_===pe.current){if(Z=_.alternate,Z===null)throw Error(M(387));Z.memoizedState.memoizedState!==_.memoizedState.memoizedState&&(e!==null?e.push(ll):e=[ll])}_=_.return}e!==null&&Bs(t,e,i,s),t.flags|=262144}function Dr(e){for(e=e.firstContext;e!==null;){if(!Li(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function rr(e){Ki=e,Yi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function _i(e){return Nl(Ki,e)}function Wa(e,t){return Ki===null&&rr(e),Nl(e,t)}function Nl(e,t){var i=t._currentValue;if(t={context:t,memoizedValue:i,next:null},Yi===null){if(e===null)throw Error(M(308));Yi=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Yi=Yi.next=t;return i}var tu=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(i,s){e.push(s)}};this.abort=function(){t.aborted=!0,e.forEach(function(i){return i()})}},iu=k.unstable_scheduleCallback,nu=k.unstable_NormalPriority,li={$$typeof:f,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Us(){return{controller:new tu,data:new Map,refCount:0}}function ha(e){e.refCount--,e.refCount===0&&iu(nu,function(){e.controller.abort()})}var ca=null,Ps=0,Or=0,Cr=null;function Fl(e,t){if(ca===null){var i=ca=[];Ps=0,Or=Ju(),Cr={status:"pending",value:void 0,then:function(s){i.push(s)}}}return Ps++,t.then(Is,Is),t}function Is(){if(--Ps===0&&ca!==null){Cr!==null&&(Cr.status="fulfilled");var e=ca;ca=null,Or=0,Cr=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Wl(e,t){var i=[],s={status:"pending",value:null,reason:null,then:function(_){i.push(_)}};return e.then(function(){s.status="fulfilled",s.value=t;for(var _=0;_<i.length;_++)(0,i[_])(t)},function(_){for(s.status="rejected",s.reason=_,_=0;_<i.length;_++)(0,i[_])(void 0)}),s}var Gs=G.S;G.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&Fl(e,t),Gs!==null&&Gs(e,t)};var Bn=N(null);function Ha(){var e=Bn.current;return e!==null?e:ei.pooledCache}function da(e,t){t===null?ne(Bn,Bn.current):ne(Bn,t.pool)}function Ns(){var e=Ha();return e===null?null:{parent:li._currentValue,pool:e}}var wr=Error(M(460)),Hl=Error(M(474)),c=Error(M(542)),X={then:function(){}};function O(e){return e=e.status,e==="fulfilled"||e==="rejected"}function ie(){}function le(e,t,i){switch(i=e[i],i===void 0?e.push(t):i!==t&&(t.then(ie,ie),t=i),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Me(e),e;default:if(typeof t.status=="string")t.then(ie,ie);else{if(e=ei,e!==null&&100<e.shellSuspendCounter)throw Error(M(482));e=t,e.status="pending",e.then(function(s){if(t.status==="pending"){var _=t;_.status="fulfilled",_.value=s}},function(s){if(t.status==="pending"){var _=t;_.status="rejected",_.reason=s}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Me(e),e}throw se=t,wr}}var se=null;function ze(){if(se===null)throw Error(M(459));var e=se;return se=null,e}function Me(e){if(e===wr||e===c)throw Error(M(483))}var ct=!1;function xe(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Re(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Dt(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ft(e,t,i){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,(Xt&2)!==0){var _=s.pending;return _===null?t.next=t:(t.next=_.next,_.next=t),s.pending=t,t=sa(e),Ds(e,null,i),t}return aa(e,s,t,i),sa(e)}function qe(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194048)!==0)){var s=t.lanes;s&=e.pendingLanes,i|=s,t.lanes=i,Ee(e,i)}}function _t(e,t){var i=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,i===s)){var _=null,C=null;if(i=i.firstBaseUpdate,i!==null){do{var Z={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};C===null?_=C=Z:C=C.next=Z,i=i.next}while(i!==null);C===null?_=C=t:C=C.next=t}else _=C=t;i={baseState:s.baseState,firstBaseUpdate:_,lastBaseUpdate:C,shared:s.shared,callbacks:s.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}var $t=!1;function Ot(){if($t){var e=Cr;if(e!==null)throw e}}function Et(e,t,i,s){$t=!1;var _=e.updateQueue;ct=!1;var C=_.firstBaseUpdate,Z=_.lastBaseUpdate,te=_.shared.pending;if(te!==null){_.shared.pending=null;var ce=te,Le=ce.next;ce.next=null,Z===null?C=Le:Z.next=Le,Z=ce;var Ke=e.alternate;Ke!==null&&(Ke=Ke.updateQueue,te=Ke.lastBaseUpdate,te!==Z&&(te===null?Ke.firstBaseUpdate=Le:te.next=Le,Ke.lastBaseUpdate=ce))}if(C!==null){var Je=_.baseState;Z=0,Ke=Le=ce=null,te=C;do{var Pe=te.lane&-536870913,Ne=Pe!==te.lane;if(Ne?(Gt&Pe)===Pe:(s&Pe)===Pe){Pe!==0&&Pe===Or&&($t=!0),Ke!==null&&(Ke=Ke.next={lane:0,tag:te.tag,payload:te.payload,callback:null,next:null});e:{var bt=e,xt=te;Pe=t;var Jt=i;switch(xt.tag){case 1:if(bt=xt.payload,typeof bt=="function"){Je=bt.call(Jt,Je,Pe);break e}Je=bt;break e;case 3:bt.flags=bt.flags&-65537|128;case 0:if(bt=xt.payload,Pe=typeof bt=="function"?bt.call(Jt,Je,Pe):bt,Pe==null)break e;Je=m({},Je,Pe);break e;case 2:ct=!0}}Pe=te.callback,Pe!==null&&(e.flags|=64,Ne&&(e.flags|=8192),Ne=_.callbacks,Ne===null?_.callbacks=[Pe]:Ne.push(Pe))}else Ne={lane:Pe,tag:te.tag,payload:te.payload,callback:te.callback,next:null},Ke===null?(Le=Ke=Ne,ce=Je):Ke=Ke.next=Ne,Z|=Pe;if(te=te.next,te===null){if(te=_.shared.pending,te===null)break;Ne=te,te=Ne.next,Ne.next=null,_.lastBaseUpdate=Ne,_.shared.pending=null}}while(!0);Ke===null&&(ce=Je),_.baseState=ce,_.firstBaseUpdate=Le,_.lastBaseUpdate=Ke,C===null&&(_.shared.lanes=0),Ir|=Z,e.lanes=Z,e.memoizedState=Je}}function Wt(e,t){if(typeof e!="function")throw Error(M(191,e));e.call(t)}function wt(e,t){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)Wt(i[e],t)}var ht=N(null),Ut=N(0);function oi(e,t){e=hr,ne(Ut,e),ne(ht,t),hr=e|t.baseLanes}function pt(){ne(Ut,hr),ne(ht,ht.current)}function Yt(){hr=Ut.current,Y(ht),Y(Ut)}var Mt=0,lt=null,dt=null,kt=null,ga=!1,An=!1,fn=!1,Vl=0,Fs=0,Va=null,Qc=0;function ui(){throw Error(M(321))}function ru(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Li(e[i],t[i]))return!1;return!0}function au(e,t,i,s,_,C){return Mt=C,lt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,G.H=e===null||e.memoizedState===null?nh:rh,fn=!1,C=i(s,_),fn=!1,An&&(C=Ef(t,i,s,_)),bf(e),C}function bf(e){G.H=kl;var t=dt!==null&&dt.next!==null;if(Mt=0,kt=dt=lt=null,ga=!1,Fs=0,Va=null,t)throw Error(M(300));e===null||pi||(e=e.dependencies,e!==null&&Dr(e)&&(pi=!0))}function Ef(e,t,i,s){lt=e;var _=0;do{if(An&&(Va=null),Fs=0,An=!1,25<=_)throw Error(M(301));if(_+=1,kt=dt=null,e.updateQueue!=null){var C=e.updateQueue;C.lastEffect=null,C.events=null,C.stores=null,C.memoCache!=null&&(C.memoCache.index=0)}G.H=nd,C=t(i,s)}while(An);return C}function Jc(){var e=G.H,t=e.useState()[0];return t=typeof t.then=="function"?Ws(t):t,e=e.useState()[0],(dt!==null?dt.memoizedState:null)!==e&&(lt.flags|=1024),t}function su(){var e=Vl!==0;return Vl=0,e}function lu(e,t,i){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i}function ou(e){if(ga){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}ga=!1}Mt=0,kt=dt=lt=null,An=!1,Fs=Vl=0,Va=null}function Ni(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kt===null?lt.memoizedState=kt=e:kt=kt.next=e,kt}function hi(){if(dt===null){var e=lt.alternate;e=e!==null?e.memoizedState:null}else e=dt.next;var t=kt===null?lt.memoizedState:kt.next;if(t!==null)kt=t,dt=e;else{if(e===null)throw lt.alternate===null?Error(M(467)):Error(M(310));dt=e,e={memoizedState:dt.memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},kt===null?lt.memoizedState=kt=e:kt=kt.next=e}return kt}function uu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ws(e){var t=Fs;return Fs+=1,Va===null&&(Va=[]),e=le(Va,e,t),t=lt,(kt===null?t.memoizedState:kt.next)===null&&(t=t.alternate,G.H=t===null||t.memoizedState===null?nh:rh),e}function jl(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Ws(e);if(e.$$typeof===f)return _i(e)}throw Error(M(438,String(e)))}function fu(e){var t=null,i=lt.updateQueue;if(i!==null&&(t=i.memoCache),t==null){var s=lt.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(t={data:s.data.map(function(_){return _.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),i===null&&(i=uu(),lt.updateQueue=i),i.memoCache=t,i=t.data[t.index],i===void 0)for(i=t.data[t.index]=Array(e),s=0;s<e;s++)i[s]=E;return t.index++,i}function ar(e,t){return typeof t=="function"?t(e):t}function Kl(e){var t=hi();return hu(t,dt,e)}function hu(e,t,i){var s=e.queue;if(s===null)throw Error(M(311));s.lastRenderedReducer=i;var _=e.baseQueue,C=s.pending;if(C!==null){if(_!==null){var Z=_.next;_.next=C.next,C.next=Z}t.baseQueue=_=C,s.pending=null}if(C=e.baseState,_===null)e.memoizedState=C;else{t=_.next;var te=Z=null,ce=null,Le=t,Ke=!1;do{var Je=Le.lane&-536870913;if(Je!==Le.lane?(Gt&Je)===Je:(Mt&Je)===Je){var Pe=Le.revertLane;if(Pe===0)ce!==null&&(ce=ce.next={lane:0,revertLane:0,action:Le.action,hasEagerState:Le.hasEagerState,eagerState:Le.eagerState,next:null}),Je===Or&&(Ke=!0);else if((Mt&Pe)===Pe){Le=Le.next,Pe===Or&&(Ke=!0);continue}else Je={lane:0,revertLane:Le.revertLane,action:Le.action,hasEagerState:Le.hasEagerState,eagerState:Le.eagerState,next:null},ce===null?(te=ce=Je,Z=C):ce=ce.next=Je,lt.lanes|=Pe,Ir|=Pe;Je=Le.action,fn&&i(C,Je),C=Le.hasEagerState?Le.eagerState:i(C,Je)}else Pe={lane:Je,revertLane:Le.revertLane,action:Le.action,hasEagerState:Le.hasEagerState,eagerState:Le.eagerState,next:null},ce===null?(te=ce=Pe,Z=C):ce=ce.next=Pe,lt.lanes|=Je,Ir|=Je;Le=Le.next}while(Le!==null&&Le!==t);if(ce===null?Z=C:ce.next=te,!Li(C,e.memoizedState)&&(pi=!0,Ke&&(i=Cr,i!==null)))throw i;e.memoizedState=C,e.baseState=Z,e.baseQueue=ce,s.lastRenderedState=C}return _===null&&(s.lanes=0),[e.memoizedState,s.dispatch]}function cu(e){var t=hi(),i=t.queue;if(i===null)throw Error(M(311));i.lastRenderedReducer=e;var s=i.dispatch,_=i.pending,C=t.memoizedState;if(_!==null){i.pending=null;var Z=_=_.next;do C=e(C,Z.action),Z=Z.next;while(Z!==_);Li(C,t.memoizedState)||(pi=!0),t.memoizedState=C,t.baseQueue===null&&(t.baseState=C),i.lastRenderedState=C}return[C,s]}function Af(e,t,i){var s=lt,_=hi(),C=Ft;if(C){if(i===void 0)throw Error(M(407));i=i()}else i=t();var Z=!Li((dt||_).memoizedState,i);Z&&(_.memoizedState=i,pi=!0),_=_.queue;var te=Tf.bind(null,s,_,e);if(Hs(2048,8,te,[e]),_.getSnapshot!==t||Z||kt!==null&&kt.memoizedState.tag&1){if(s.flags|=2048,ja(9,Yl(),Sf.bind(null,s,_,i,t),null),ei===null)throw Error(M(349));C||(Mt&124)!==0||Mf(s,t,i)}return i}function Mf(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=lt.updateQueue,t===null?(t=uu(),lt.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function Sf(e,t,i,s){t.value=i,t.getSnapshot=s,Df(t)&&Of(e)}function Tf(e,t,i){return i(function(){Df(t)&&Of(e)})}function Df(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Li(e,i)}catch{return!0}}function Of(e){var t=Kt(e,2);t!==null&&Ji(t,e,2)}function du(e){var t=Ni();if(typeof e=="function"){var i=e;if(e=i(),fn){ee(!0);try{i()}finally{ee(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ar,lastRenderedState:e},t}function Cf(e,t,i,s){return e.baseState=i,hu(e,dt,typeof s=="function"?s:ar)}function $c(e,t,i,s,_){if(Zl(e))throw Error(M(485));if(e=t.action,e!==null){var C={payload:_,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Z){C.listeners.push(Z)}};G.T!==null?i(!0):C.isTransition=!1,s(C),i=t.pending,i===null?(C.next=t.pending=C,wf(t,C)):(C.next=i.next,t.pending=i.next=C)}}function wf(e,t){var i=t.action,s=t.payload,_=e.state;if(t.isTransition){var C=G.T,Z={};G.T=Z;try{var te=i(_,s),ce=G.S;ce!==null&&ce(Z,te),Lf(e,t,te)}catch(Le){gu(e,t,Le)}finally{G.T=C}}else try{C=i(_,s),Lf(e,t,C)}catch(Le){gu(e,t,Le)}}function Lf(e,t,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(s){Rf(e,t,s)},function(s){return gu(e,t,s)}):Rf(e,t,i)}function Rf(e,t,i){t.status="fulfilled",t.value=i,zf(t),e.state=i,t=e.pending,t!==null&&(i=t.next,i===t?e.pending=null:(i=i.next,t.next=i,wf(e,i)))}function gu(e,t,i){var s=e.pending;if(e.pending=null,s!==null){s=s.next;do t.status="rejected",t.reason=i,zf(t),t=t.next;while(t!==s)}e.action=null}function zf(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Bf(e,t){return t}function Uf(e,t){if(Ft){var i=ei.formState;if(i!==null){e:{var s=lt;if(Ft){if(ni){t:{for(var _=ni,C=ln;_.nodeType!==8;){if(!C){_=null;break t}if(_=Sn(_.nextSibling),_===null){_=null;break t}}C=_.data,_=C==="F!"||C==="F"?_:null}if(_){ni=Sn(_.nextSibling),s=_.data==="F!";break e}}nr(s)}s=!1}s&&(t=i[0])}}return i=Ni(),i.memoizedState=i.baseState=t,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bf,lastRenderedState:t},i.queue=s,i=eh.bind(null,lt,s),s.dispatch=i,s=du(!1),C=xu.bind(null,lt,!1,s.queue),s=Ni(),_={state:t,dispatch:null,action:e,pending:null},s.queue=_,i=$c.bind(null,lt,_,C,i),_.dispatch=i,s.memoizedState=e,[t,i,!1]}function Pf(e){var t=hi();return If(t,dt,e)}function If(e,t,i){if(t=hu(e,t,Bf)[0],e=Kl(ar)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var s=Ws(t)}catch(Z){throw Z===wr?c:Z}else s=t;t=hi();var _=t.queue,C=_.dispatch;return i!==t.memoizedState&&(lt.flags|=2048,ja(9,Yl(),qc.bind(null,_,i),null)),[s,C,e]}function qc(e,t){e.action=t}function Gf(e){var t=hi(),i=dt;if(i!==null)return If(t,i,e);hi(),t=t.memoizedState,i=hi();var s=i.queue.dispatch;return i.memoizedState=e,[t,s,!1]}function ja(e,t,i,s){return e={tag:e,create:i,deps:s,inst:t,next:null},t=lt.updateQueue,t===null&&(t=uu(),lt.updateQueue=t),i=t.lastEffect,i===null?t.lastEffect=e.next=e:(s=i.next,i.next=e,e.next=s,t.lastEffect=e),e}function Yl(){return{destroy:void 0,resource:void 0}}function Nf(){return hi().memoizedState}function Xl(e,t,i,s){var _=Ni();s=s===void 0?null:s,lt.flags|=e,_.memoizedState=ja(1|t,Yl(),i,s)}function Hs(e,t,i,s){var _=hi();s=s===void 0?null:s;var C=_.memoizedState.inst;dt!==null&&s!==null&&ru(s,dt.memoizedState.deps)?_.memoizedState=ja(t,C,i,s):(lt.flags|=e,_.memoizedState=ja(1|t,C,i,s))}function Ff(e,t){Xl(8390656,8,e,t)}function Wf(e,t){Hs(2048,8,e,t)}function Hf(e,t){return Hs(4,2,e,t)}function Vf(e,t){return Hs(4,4,e,t)}function jf(e,t){if(typeof t=="function"){e=e();var i=t(e);return function(){typeof i=="function"?i():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Kf(e,t,i){i=i!=null?i.concat([e]):null,Hs(4,4,jf.bind(null,t,e),i)}function vu(){}function Yf(e,t){var i=hi();t=t===void 0?null:t;var s=i.memoizedState;return t!==null&&ru(t,s[1])?s[0]:(i.memoizedState=[e,t],e)}function Xf(e,t){var i=hi();t=t===void 0?null:t;var s=i.memoizedState;if(t!==null&&ru(t,s[1]))return s[0];if(s=e(),fn){ee(!0);try{e()}finally{ee(!1)}}return i.memoizedState=[s,t],s}function mu(e,t,i){return i===void 0||(Mt&1073741824)!==0?e.memoizedState=t:(e.memoizedState=i,e=Qh(),lt.lanes|=e,Ir|=e,i)}function Zf(e,t,i,s){return Li(i,t)?i:ht.current!==null?(e=mu(e,i,s),Li(e,t)||(pi=!0),e):(Mt&42)===0?(pi=!0,e.memoizedState=i):(e=Qh(),lt.lanes|=e,Ir|=e,t)}function kf(e,t,i,s,_){var C=F.p;F.p=C!==0&&8>C?C:8;var Z=G.T,te={};G.T=te,xu(e,!1,t,i);try{var ce=_(),Le=G.S;if(Le!==null&&Le(te,ce),ce!==null&&typeof ce=="object"&&typeof ce.then=="function"){var Ke=Wl(ce,s);Vs(e,t,Ke,Qi(e))}else Vs(e,t,s,Qi(e))}catch(Je){Vs(e,t,{then:function(){},status:"rejected",reason:Je},Qi())}finally{F.p=C,G.T=Z}}function ed(){}function _u(e,t,i,s){if(e.tag!==5)throw Error(M(476));var _=Qf(e).queue;kf(e,_,t,H,i===null?ed:function(){return Jf(e),i(s)})}function Qf(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:H,baseState:H,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ar,lastRenderedState:H},next:null};var i={};return t.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ar,lastRenderedState:i},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Jf(e){var t=Qf(e).next.queue;Vs(e,t,{},Qi())}function pu(){return _i(ll)}function $f(){return hi().memoizedState}function qf(){return hi().memoizedState}function td(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var i=Qi();e=Dt(i);var s=ft(t,e,i);s!==null&&(Ji(s,t,i),qe(s,t,i)),t={cache:Us()},e.payload=t;return}t=t.return}}function id(e,t,i){var s=Qi();i={lane:s,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null},Zl(e)?th(t,i):(i=Ia(e,t,i,s),i!==null&&(Ji(i,e,s),ih(i,t,s)))}function eh(e,t,i){var s=Qi();Vs(e,t,i,s)}function Vs(e,t,i,s){var _={lane:s,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null};if(Zl(e))th(t,_);else{var C=e.alternate;if(e.lanes===0&&(C===null||C.lanes===0)&&(C=t.lastRenderedReducer,C!==null))try{var Z=t.lastRenderedState,te=C(Z,i);if(_.hasEagerState=!0,_.eagerState=te,Li(te,Z))return aa(e,t,_,0),ei===null&&Ar(),!1}catch{}finally{}if(i=Ia(e,t,_,s),i!==null)return Ji(i,e,s),ih(i,t,s),!0}return!1}function xu(e,t,i,s){if(s={lane:2,revertLane:Ju(),action:s,hasEagerState:!1,eagerState:null,next:null},Zl(e)){if(t)throw Error(M(479))}else t=Ia(e,i,s,2),t!==null&&Ji(t,e,2)}function Zl(e){var t=e.alternate;return e===lt||t!==null&&t===lt}function th(e,t){An=ga=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function ih(e,t,i){if((i&4194048)!==0){var s=t.lanes;s&=e.pendingLanes,i|=s,t.lanes=i,Ee(e,i)}}var kl={readContext:_i,use:jl,useCallback:ui,useContext:ui,useEffect:ui,useImperativeHandle:ui,useLayoutEffect:ui,useInsertionEffect:ui,useMemo:ui,useReducer:ui,useRef:ui,useState:ui,useDebugValue:ui,useDeferredValue:ui,useTransition:ui,useSyncExternalStore:ui,useId:ui,useHostTransitionStatus:ui,useFormState:ui,useActionState:ui,useOptimistic:ui,useMemoCache:ui,useCacheRefresh:ui},nh={readContext:_i,use:jl,useCallback:function(e,t){return Ni().memoizedState=[e,t===void 0?null:t],e},useContext:_i,useEffect:Ff,useImperativeHandle:function(e,t,i){i=i!=null?i.concat([e]):null,Xl(4194308,4,jf.bind(null,t,e),i)},useLayoutEffect:function(e,t){return Xl(4194308,4,e,t)},useInsertionEffect:function(e,t){Xl(4,2,e,t)},useMemo:function(e,t){var i=Ni();t=t===void 0?null:t;var s=e();if(fn){ee(!0);try{e()}finally{ee(!1)}}return i.memoizedState=[s,t],s},useReducer:function(e,t,i){var s=Ni();if(i!==void 0){var _=i(t);if(fn){ee(!0);try{i(t)}finally{ee(!1)}}}else _=t;return s.memoizedState=s.baseState=_,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:_},s.queue=e,e=e.dispatch=id.bind(null,lt,e),[s.memoizedState,e]},useRef:function(e){var t=Ni();return e={current:e},t.memoizedState=e},useState:function(e){e=du(e);var t=e.queue,i=eh.bind(null,lt,t);return t.dispatch=i,[e.memoizedState,i]},useDebugValue:vu,useDeferredValue:function(e,t){var i=Ni();return mu(i,e,t)},useTransition:function(){var e=du(!1);return e=kf.bind(null,lt,e.queue,!0,!1),Ni().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,i){var s=lt,_=Ni();if(Ft){if(i===void 0)throw Error(M(407));i=i()}else{if(i=t(),ei===null)throw Error(M(349));(Gt&124)!==0||Mf(s,t,i)}_.memoizedState=i;var C={value:i,getSnapshot:t};return _.queue=C,Ff(Tf.bind(null,s,C,e),[e]),s.flags|=2048,ja(9,Yl(),Sf.bind(null,s,C,i,t),null),i},useId:function(){var e=Ni(),t=ei.identifierPrefix;if(Ft){var i=yn,s=xn;i=(s&~(1<<32-re(s)-1)).toString(32)+i,t=""+t+"R"+i,i=Vl++,0<i&&(t+="H"+i.toString(32)),t+=""}else i=Qc++,t=""+t+"r"+i.toString(32)+"";return e.memoizedState=t},useHostTransitionStatus:pu,useFormState:Uf,useActionState:Uf,useOptimistic:function(e){var t=Ni();t.memoizedState=t.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=i,t=xu.bind(null,lt,!0,i),i.dispatch=t,[e,t]},useMemoCache:fu,useCacheRefresh:function(){return Ni().memoizedState=td.bind(null,lt)}},rh={readContext:_i,use:jl,useCallback:Yf,useContext:_i,useEffect:Wf,useImperativeHandle:Kf,useInsertionEffect:Hf,useLayoutEffect:Vf,useMemo:Xf,useReducer:Kl,useRef:Nf,useState:function(){return Kl(ar)},useDebugValue:vu,useDeferredValue:function(e,t){var i=hi();return Zf(i,dt.memoizedState,e,t)},useTransition:function(){var e=Kl(ar)[0],t=hi().memoizedState;return[typeof e=="boolean"?e:Ws(e),t]},useSyncExternalStore:Af,useId:$f,useHostTransitionStatus:pu,useFormState:Pf,useActionState:Pf,useOptimistic:function(e,t){var i=hi();return Cf(i,dt,e,t)},useMemoCache:fu,useCacheRefresh:qf},nd={readContext:_i,use:jl,useCallback:Yf,useContext:_i,useEffect:Wf,useImperativeHandle:Kf,useInsertionEffect:Hf,useLayoutEffect:Vf,useMemo:Xf,useReducer:cu,useRef:Nf,useState:function(){return cu(ar)},useDebugValue:vu,useDeferredValue:function(e,t){var i=hi();return dt===null?mu(i,e,t):Zf(i,dt.memoizedState,e,t)},useTransition:function(){var e=cu(ar)[0],t=hi().memoizedState;return[typeof e=="boolean"?e:Ws(e),t]},useSyncExternalStore:Af,useId:$f,useHostTransitionStatus:pu,useFormState:Gf,useActionState:Gf,useOptimistic:function(e,t){var i=hi();return dt!==null?Cf(i,dt,e,t):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:fu,useCacheRefresh:qf},Ka=null,js=0;function Ql(e){var t=js;return js+=1,Ka===null&&(Ka=[]),le(Ka,e,t)}function Ks(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Jl(e,t){throw t.$$typeof===T?Error(M(525)):(e=Object.prototype.toString.call(t),Error(M(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function ah(e){var t=e._init;return t(e._payload)}function sh(e){function t(Oe,ye){if(e){var Ce=Oe.deletions;Ce===null?(Oe.deletions=[ye],Oe.flags|=16):Ce.push(ye)}}function i(Oe,ye){if(!e)return null;for(;ye!==null;)t(Oe,ye),ye=ye.sibling;return null}function s(Oe){for(var ye=new Map;Oe!==null;)Oe.key!==null?ye.set(Oe.key,Oe):ye.set(Oe.index,Oe),Oe=Oe.sibling;return ye}function _(Oe,ye){return Oe=an(Oe,ye),Oe.index=0,Oe.sibling=null,Oe}function C(Oe,ye,Ce){return Oe.index=Ce,e?(Ce=Oe.alternate,Ce!==null?(Ce=Ce.index,Ce<ye?(Oe.flags|=67108866,ye):Ce):(Oe.flags|=67108866,ye)):(Oe.flags|=1048576,ye)}function Z(Oe){return e&&Oe.alternate===null&&(Oe.flags|=67108866),Oe}function te(Oe,ye,Ce,Ze){return ye===null||ye.tag!==6?(ye=Ga(Ce,Oe.mode,Ze),ye.return=Oe,ye):(ye=_(ye,Ce),ye.return=Oe,ye)}function ce(Oe,ye,Ce,Ze){var gt=Ce.type;return gt===A?Ke(Oe,ye,Ce.props.children,Ze,Ce.key):ye!==null&&(ye.elementType===gt||typeof gt=="object"&&gt!==null&&gt.$$typeof===h&&ah(gt)===ye.type)?(ye=_(ye,Ce.props),Ks(ye,Ce),ye.return=Oe,ye):(ye=sn(Ce.type,Ce.key,Ce.props,null,Oe.mode,Ze),Ks(ye,Ce),ye.return=Oe,ye)}function Le(Oe,ye,Ce,Ze){return ye===null||ye.tag!==4||ye.stateNode.containerInfo!==Ce.containerInfo||ye.stateNode.implementation!==Ce.implementation?(ye=Na(Ce,Oe.mode,Ze),ye.return=Oe,ye):(ye=_(ye,Ce.children||[]),ye.return=Oe,ye)}function Ke(Oe,ye,Ce,Ze,gt){return ye===null||ye.tag!==7?(ye=Rn(Ce,Oe.mode,Ze,gt),ye.return=Oe,ye):(ye=_(ye,Ce),ye.return=Oe,ye)}function Je(Oe,ye,Ce){if(typeof ye=="string"&&ye!==""||typeof ye=="number"||typeof ye=="bigint")return ye=Ga(""+ye,Oe.mode,Ce),ye.return=Oe,ye;if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case D:return Ce=sn(ye.type,ye.key,ye.props,null,Oe.mode,Ce),Ks(Ce,ye),Ce.return=Oe,Ce;case p:return ye=Na(ye,Oe.mode,Ce),ye.return=Oe,ye;case h:var Ze=ye._init;return ye=Ze(ye._payload),Je(Oe,ye,Ce)}if(V(ye)||W(ye))return ye=Rn(ye,Oe.mode,Ce,null),ye.return=Oe,ye;if(typeof ye.then=="function")return Je(Oe,Ql(ye),Ce);if(ye.$$typeof===f)return Je(Oe,Wa(Oe,ye),Ce);Jl(Oe,ye)}return null}function Pe(Oe,ye,Ce,Ze){var gt=ye!==null?ye.key:null;if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number"||typeof Ce=="bigint")return gt!==null?null:te(Oe,ye,""+Ce,Ze);if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case D:return Ce.key===gt?ce(Oe,ye,Ce,Ze):null;case p:return Ce.key===gt?Le(Oe,ye,Ce,Ze):null;case h:return gt=Ce._init,Ce=gt(Ce._payload),Pe(Oe,ye,Ce,Ze)}if(V(Ce)||W(Ce))return gt!==null?null:Ke(Oe,ye,Ce,Ze,null);if(typeof Ce.then=="function")return Pe(Oe,ye,Ql(Ce),Ze);if(Ce.$$typeof===f)return Pe(Oe,ye,Wa(Oe,Ce),Ze);Jl(Oe,Ce)}return null}function Ne(Oe,ye,Ce,Ze,gt){if(typeof Ze=="string"&&Ze!==""||typeof Ze=="number"||typeof Ze=="bigint")return Oe=Oe.get(Ce)||null,te(ye,Oe,""+Ze,gt);if(typeof Ze=="object"&&Ze!==null){switch(Ze.$$typeof){case D:return Oe=Oe.get(Ze.key===null?Ce:Ze.key)||null,ce(ye,Oe,Ze,gt);case p:return Oe=Oe.get(Ze.key===null?Ce:Ze.key)||null,Le(ye,Oe,Ze,gt);case h:var Lt=Ze._init;return Ze=Lt(Ze._payload),Ne(Oe,ye,Ce,Ze,gt)}if(V(Ze)||W(Ze))return Oe=Oe.get(Ce)||null,Ke(ye,Oe,Ze,gt,null);if(typeof Ze.then=="function")return Ne(Oe,ye,Ce,Ql(Ze),gt);if(Ze.$$typeof===f)return Ne(Oe,ye,Ce,Wa(ye,Ze),gt);Jl(ye,Ze)}return null}function bt(Oe,ye,Ce,Ze){for(var gt=null,Lt=null,mt=ye,yt=ye=0,yi=null;mt!==null&&yt<Ce.length;yt++){mt.index>yt?(yi=mt,mt=null):yi=mt.sibling;var Vt=Pe(Oe,mt,Ce[yt],Ze);if(Vt===null){mt===null&&(mt=yi);break}e&&mt&&Vt.alternate===null&&t(Oe,mt),ye=C(Vt,ye,yt),Lt===null?gt=Vt:Lt.sibling=Vt,Lt=Vt,mt=yi}if(yt===Ce.length)return i(Oe,mt),Ft&&tr(Oe,yt),gt;if(mt===null){for(;yt<Ce.length;yt++)mt=Je(Oe,Ce[yt],Ze),mt!==null&&(ye=C(mt,ye,yt),Lt===null?gt=mt:Lt.sibling=mt,Lt=mt);return Ft&&tr(Oe,yt),gt}for(mt=s(mt);yt<Ce.length;yt++)yi=Ne(mt,Oe,yt,Ce[yt],Ze),yi!==null&&(e&&yi.alternate!==null&&mt.delete(yi.key===null?yt:yi.key),ye=C(yi,ye,yt),Lt===null?gt=yi:Lt.sibling=yi,Lt=yi);return e&&mt.forEach(function(Yr){return t(Oe,Yr)}),Ft&&tr(Oe,yt),gt}function xt(Oe,ye,Ce,Ze){if(Ce==null)throw Error(M(151));for(var gt=null,Lt=null,mt=ye,yt=ye=0,yi=null,Vt=Ce.next();mt!==null&&!Vt.done;yt++,Vt=Ce.next()){mt.index>yt?(yi=mt,mt=null):yi=mt.sibling;var Yr=Pe(Oe,mt,Vt.value,Ze);if(Yr===null){mt===null&&(mt=yi);break}e&&mt&&Yr.alternate===null&&t(Oe,mt),ye=C(Yr,ye,yt),Lt===null?gt=Yr:Lt.sibling=Yr,Lt=Yr,mt=yi}if(Vt.done)return i(Oe,mt),Ft&&tr(Oe,yt),gt;if(mt===null){for(;!Vt.done;yt++,Vt=Ce.next())Vt=Je(Oe,Vt.value,Ze),Vt!==null&&(ye=C(Vt,ye,yt),Lt===null?gt=Vt:Lt.sibling=Vt,Lt=Vt);return Ft&&tr(Oe,yt),gt}for(mt=s(mt);!Vt.done;yt++,Vt=Ce.next())Vt=Ne(mt,Oe,yt,Vt.value,Ze),Vt!==null&&(e&&Vt.alternate!==null&&mt.delete(Vt.key===null?yt:Vt.key),ye=C(Vt,ye,yt),Lt===null?gt=Vt:Lt.sibling=Vt,Lt=Vt);return e&&mt.forEach(function(r0){return t(Oe,r0)}),Ft&&tr(Oe,yt),gt}function Jt(Oe,ye,Ce,Ze){if(typeof Ce=="object"&&Ce!==null&&Ce.type===A&&Ce.key===null&&(Ce=Ce.props.children),typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case D:e:{for(var gt=Ce.key;ye!==null;){if(ye.key===gt){if(gt=Ce.type,gt===A){if(ye.tag===7){i(Oe,ye.sibling),Ze=_(ye,Ce.props.children),Ze.return=Oe,Oe=Ze;break e}}else if(ye.elementType===gt||typeof gt=="object"&&gt!==null&&gt.$$typeof===h&&ah(gt)===ye.type){i(Oe,ye.sibling),Ze=_(ye,Ce.props),Ks(Ze,Ce),Ze.return=Oe,Oe=Ze;break e}i(Oe,ye);break}else t(Oe,ye);ye=ye.sibling}Ce.type===A?(Ze=Rn(Ce.props.children,Oe.mode,Ze,Ce.key),Ze.return=Oe,Oe=Ze):(Ze=sn(Ce.type,Ce.key,Ce.props,null,Oe.mode,Ze),Ks(Ze,Ce),Ze.return=Oe,Oe=Ze)}return Z(Oe);case p:e:{for(gt=Ce.key;ye!==null;){if(ye.key===gt)if(ye.tag===4&&ye.stateNode.containerInfo===Ce.containerInfo&&ye.stateNode.implementation===Ce.implementation){i(Oe,ye.sibling),Ze=_(ye,Ce.children||[]),Ze.return=Oe,Oe=Ze;break e}else{i(Oe,ye);break}else t(Oe,ye);ye=ye.sibling}Ze=Na(Ce,Oe.mode,Ze),Ze.return=Oe,Oe=Ze}return Z(Oe);case h:return gt=Ce._init,Ce=gt(Ce._payload),Jt(Oe,ye,Ce,Ze)}if(V(Ce))return bt(Oe,ye,Ce,Ze);if(W(Ce)){if(gt=W(Ce),typeof gt!="function")throw Error(M(150));return Ce=gt.call(Ce),xt(Oe,ye,Ce,Ze)}if(typeof Ce.then=="function")return Jt(Oe,ye,Ql(Ce),Ze);if(Ce.$$typeof===f)return Jt(Oe,ye,Wa(Oe,Ce),Ze);Jl(Oe,Ce)}return typeof Ce=="string"&&Ce!==""||typeof Ce=="number"||typeof Ce=="bigint"?(Ce=""+Ce,ye!==null&&ye.tag===6?(i(Oe,ye.sibling),Ze=_(ye,Ce),Ze.return=Oe,Oe=Ze):(i(Oe,ye),Ze=Ga(Ce,Oe.mode,Ze),Ze.return=Oe,Oe=Ze),Z(Oe)):i(Oe,ye)}return function(Oe,ye,Ce,Ze){try{js=0;var gt=Jt(Oe,ye,Ce,Ze);return Ka=null,gt}catch(mt){if(mt===wr||mt===c)throw mt;var Lt=Ii(29,mt,null,Oe.mode);return Lt.lanes=Ze,Lt.return=Oe,Lt}finally{}}}var Ya=sh(!0),lh=sh(!1),hn=N(null),Un=null;function Lr(e){var t=e.alternate;ne(gi,gi.current&1),ne(hn,e),Un===null&&(t===null||ht.current!==null||t.memoizedState!==null)&&(Un=e)}function oh(e){if(e.tag===22){if(ne(gi,gi.current),ne(hn,e),Un===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(Un=e)}}else Rr()}function Rr(){ne(gi,gi.current),ne(hn,hn.current)}function sr(e){Y(hn),Un===e&&(Un=null),Y(gi)}var gi=N(0);function $l(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||ff(i)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function yu(e,t,i,s){t=e.memoizedState,i=i(s,t),i=i==null?t:m({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var bu={enqueueSetState:function(e,t,i){e=e._reactInternals;var s=Qi(),_=Dt(s);_.payload=t,i!=null&&(_.callback=i),t=ft(e,_,s),t!==null&&(Ji(t,e,s),qe(t,e,s))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var s=Qi(),_=Dt(s);_.tag=1,_.payload=t,i!=null&&(_.callback=i),t=ft(e,_,s),t!==null&&(Ji(t,e,s),qe(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=Qi(),s=Dt(i);s.tag=2,t!=null&&(s.callback=t),t=ft(e,s,i),t!==null&&(Ji(t,e,i),qe(t,e,i))}};function uh(e,t,i,s,_,C,Z){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,C,Z):t.prototype&&t.prototype.isPureReactComponent?!ra(i,s)||!ra(_,C):!0}function fh(e,t,i,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,s),t.state!==e&&bu.enqueueReplaceState(t,t.state,null)}function va(e,t){var i=t;if("ref"in t){i={};for(var s in t)s!=="ref"&&(i[s]=t[s])}if(e=e.defaultProps){i===t&&(i=m({},i));for(var _ in e)i[_]===void 0&&(i[_]=e[_])}return i}var ql=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function hh(e){ql(e)}function ch(e){console.error(e)}function dh(e){ql(e)}function eo(e,t){try{var i=e.onUncaughtError;i(t.value,{componentStack:t.stack})}catch(s){setTimeout(function(){throw s})}}function gh(e,t,i){try{var s=e.onCaughtError;s(i.value,{componentStack:i.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(_){setTimeout(function(){throw _})}}function Eu(e,t,i){return i=Dt(i),i.tag=3,i.payload={element:null},i.callback=function(){eo(e,t)},i}function vh(e){return e=Dt(e),e.tag=3,e}function mh(e,t,i,s){var _=i.type.getDerivedStateFromError;if(typeof _=="function"){var C=s.value;e.payload=function(){return _(C)},e.callback=function(){gh(t,i,s)}}var Z=i.stateNode;Z!==null&&typeof Z.componentDidCatch=="function"&&(e.callback=function(){gh(t,i,s),typeof _!="function"&&(Gr===null?Gr=new Set([this]):Gr.add(this));var te=s.stack;this.componentDidCatch(s.value,{componentStack:te!==null?te:""})})}function rd(e,t,i,s,_){if(i.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(t=i.alternate,t!==null&&En(t,i,_,!0),i=hn.current,i!==null){switch(i.tag){case 13:return Un===null?Yu():i.alternate===null&&si===0&&(si=3),i.flags&=-257,i.flags|=65536,i.lanes=_,s===X?i.flags|=16384:(t=i.updateQueue,t===null?i.updateQueue=new Set([s]):t.add(s),Zu(e,s,_)),!1;case 22:return i.flags|=65536,s===X?i.flags|=16384:(t=i.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([s])},i.updateQueue=t):(i=t.retryQueue,i===null?t.retryQueue=new Set([s]):i.add(s)),Zu(e,s,_)),!1}throw Error(M(435,i.tag))}return Zu(e,s,_),Yu(),!1}if(Ft)return t=hn.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=_,s!==Ls&&(e=Error(M(422),{cause:s}),fa(zi(e,i)))):(s!==Ls&&(t=Error(M(423),{cause:s}),fa(zi(t,i))),e=e.current.alternate,e.flags|=65536,_&=-_,e.lanes|=_,s=zi(s,i),_=Eu(e.stateNode,s,_),_t(e,_),si!==4&&(si=2)),!1;var C=Error(M(520),{cause:s});if(C=zi(C,i),$s===null?$s=[C]:$s.push(C),si!==4&&(si=2),t===null)return!0;s=zi(s,i),i=t;do{switch(i.tag){case 3:return i.flags|=65536,e=_&-_,i.lanes|=e,e=Eu(i.stateNode,s,e),_t(i,e),!1;case 1:if(t=i.type,C=i.stateNode,(i.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Gr===null||!Gr.has(C))))return i.flags|=65536,_&=-_,i.lanes|=_,_=vh(_),mh(_,e,i,s),_t(i,_),!1}i=i.return}while(i!==null);return!1}var _h=Error(M(461)),pi=!1;function Ai(e,t,i,s){t.child=e===null?lh(t,null,i,s):Ya(t,e.child,i,s)}function ph(e,t,i,s,_){i=i.render;var C=t.ref;if("ref"in s){var Z={};for(var te in s)te!=="ref"&&(Z[te]=s[te])}else Z=s;return rr(t),s=au(e,t,i,Z,C,_),te=su(),e!==null&&!pi?(lu(e,t,_),lr(e,t,_)):(Ft&&te&&Cs(t),t.flags|=1,Ai(e,t,s,_),t.child)}function xh(e,t,i,s,_){if(e===null){var C=i.type;return typeof C=="function"&&!Os(C)&&C.defaultProps===void 0&&i.compare===null?(t.tag=15,t.type=C,yh(e,t,C,s,_)):(e=sn(i.type,null,s,t,t.mode,_),e.ref=t.ref,e.return=t,t.child=e)}if(C=e.child,!wu(e,_)){var Z=C.memoizedProps;if(i=i.compare,i=i!==null?i:ra,i(Z,s)&&e.ref===t.ref)return lr(e,t,_)}return t.flags|=1,e=an(C,s),e.ref=t.ref,e.return=t,t.child=e}function yh(e,t,i,s,_){if(e!==null){var C=e.memoizedProps;if(ra(C,s)&&e.ref===t.ref)if(pi=!1,t.pendingProps=s=C,wu(e,_))(e.flags&131072)!==0&&(pi=!0);else return t.lanes=e.lanes,lr(e,t,_)}return Au(e,t,i,s,_)}function bh(e,t,i){var s=t.pendingProps,_=s.children,C=e!==null?e.memoizedState:null;if(s.mode==="hidden"){if((t.flags&128)!==0){if(s=C!==null?C.baseLanes|i:i,e!==null){for(_=t.child=e.child,C=0;_!==null;)C=C|_.lanes|_.childLanes,_=_.sibling;t.childLanes=C&~s}else t.childLanes=0,t.child=null;return Eh(e,t,s,i)}if((i&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&da(t,C!==null?C.cachePool:null),C!==null?oi(t,C):pt(),oh(t);else return t.lanes=t.childLanes=536870912,Eh(e,t,C!==null?C.baseLanes|i:i,i)}else C!==null?(da(t,C.cachePool),oi(t,C),Rr(),t.memoizedState=null):(e!==null&&da(t,null),pt(),Rr());return Ai(e,t,_,i),t.child}function Eh(e,t,i,s){var _=Ha();return _=_===null?null:{parent:li._currentValue,pool:_},t.memoizedState={baseLanes:i,cachePool:_},e!==null&&da(t,null),pt(),oh(t),e!==null&&En(e,t,s,!0),null}function to(e,t){var i=t.ref;if(i===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(M(284));(e===null||e.ref!==i)&&(t.flags|=4194816)}}function Au(e,t,i,s,_){return rr(t),i=au(e,t,i,s,void 0,_),s=su(),e!==null&&!pi?(lu(e,t,_),lr(e,t,_)):(Ft&&s&&Cs(t),t.flags|=1,Ai(e,t,i,_),t.child)}function Ah(e,t,i,s,_,C){return rr(t),t.updateQueue=null,i=Ef(t,s,i,_),bf(e),s=su(),e!==null&&!pi?(lu(e,t,C),lr(e,t,C)):(Ft&&s&&Cs(t),t.flags|=1,Ai(e,t,i,C),t.child)}function Mh(e,t,i,s,_){if(rr(t),t.stateNode===null){var C=Mr,Z=i.contextType;typeof Z=="object"&&Z!==null&&(C=_i(Z)),C=new i(s,C),t.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,C.updater=bu,t.stateNode=C,C._reactInternals=t,C=t.stateNode,C.props=s,C.state=t.memoizedState,C.refs={},xe(t),Z=i.contextType,C.context=typeof Z=="object"&&Z!==null?_i(Z):Mr,C.state=t.memoizedState,Z=i.getDerivedStateFromProps,typeof Z=="function"&&(yu(t,i,Z,s),C.state=t.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(Z=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),Z!==C.state&&bu.enqueueReplaceState(C,C.state,null),Et(t,s,C,_),Ot(),C.state=t.memoizedState),typeof C.componentDidMount=="function"&&(t.flags|=4194308),s=!0}else if(e===null){C=t.stateNode;var te=t.memoizedProps,ce=va(i,te);C.props=ce;var Le=C.context,Ke=i.contextType;Z=Mr,typeof Ke=="object"&&Ke!==null&&(Z=_i(Ke));var Je=i.getDerivedStateFromProps;Ke=typeof Je=="function"||typeof C.getSnapshotBeforeUpdate=="function",te=t.pendingProps!==te,Ke||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(te||Le!==Z)&&fh(t,C,s,Z),ct=!1;var Pe=t.memoizedState;C.state=Pe,Et(t,s,C,_),Ot(),Le=t.memoizedState,te||Pe!==Le||ct?(typeof Je=="function"&&(yu(t,i,Je,s),Le=t.memoizedState),(ce=ct||uh(t,i,ce,s,Pe,Le,Z))?(Ke||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(t.flags|=4194308)):(typeof C.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=Le),C.props=s,C.state=Le,C.context=Z,s=ce):(typeof C.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{C=t.stateNode,Re(e,t),Z=t.memoizedProps,Ke=va(i,Z),C.props=Ke,Je=t.pendingProps,Pe=C.context,Le=i.contextType,ce=Mr,typeof Le=="object"&&Le!==null&&(ce=_i(Le)),te=i.getDerivedStateFromProps,(Le=typeof te=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(Z!==Je||Pe!==ce)&&fh(t,C,s,ce),ct=!1,Pe=t.memoizedState,C.state=Pe,Et(t,s,C,_),Ot();var Ne=t.memoizedState;Z!==Je||Pe!==Ne||ct||e!==null&&e.dependencies!==null&&Dr(e.dependencies)?(typeof te=="function"&&(yu(t,i,te,s),Ne=t.memoizedState),(Ke=ct||uh(t,i,Ke,s,Pe,Ne,ce)||e!==null&&e.dependencies!==null&&Dr(e.dependencies))?(Le||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(s,Ne,ce),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(s,Ne,ce)),typeof C.componentDidUpdate=="function"&&(t.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof C.componentDidUpdate!="function"||Z===e.memoizedProps&&Pe===e.memoizedState||(t.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||Z===e.memoizedProps&&Pe===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=Ne),C.props=s,C.state=Ne,C.context=ce,s=Ke):(typeof C.componentDidUpdate!="function"||Z===e.memoizedProps&&Pe===e.memoizedState||(t.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||Z===e.memoizedProps&&Pe===e.memoizedState||(t.flags|=1024),s=!1)}return C=s,to(e,t),s=(t.flags&128)!==0,C||s?(C=t.stateNode,i=s&&typeof i.getDerivedStateFromError!="function"?null:C.render(),t.flags|=1,e!==null&&s?(t.child=Ya(t,e.child,null,_),t.child=Ya(t,null,i,_)):Ai(e,t,i,_),t.memoizedState=C.state,e=t.child):e=lr(e,t,_),e}function Sh(e,t,i,s){return ua(),t.flags|=256,Ai(e,t,i,s),t.child}var Mu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Su(e){return{baseLanes:e,cachePool:Ns()}}function Tu(e,t,i){return e=e!==null?e.childLanes&~i:0,t&&(e|=cn),e}function Th(e,t,i){var s=t.pendingProps,_=!1,C=(t.flags&128)!==0,Z;if((Z=C)||(Z=e!==null&&e.memoizedState===null?!1:(gi.current&2)!==0),Z&&(_=!0,t.flags&=-129),Z=(t.flags&32)!==0,t.flags&=-33,e===null){if(Ft){if(_?Lr(t):Rr(),Ft){var te=ni,ce;if(ce=te){e:{for(ce=te,te=ln;ce.nodeType!==8;){if(!te){te=null;break e}if(ce=Sn(ce.nextSibling),ce===null){te=null;break e}}te=ce}te!==null?(t.memoizedState={dehydrated:te,treeContext:zn!==null?{id:xn,overflow:yn}:null,retryLane:536870912,hydrationErrors:null},ce=Ii(18,null,null,0),ce.stateNode=te,ce.return=t,t.child=ce,Ei=t,ni=null,ce=!0):ce=!1}ce||nr(t)}if(te=t.memoizedState,te!==null&&(te=te.dehydrated,te!==null))return ff(te)?t.lanes=32:t.lanes=536870912,null;sr(t)}return te=s.children,s=s.fallback,_?(Rr(),_=t.mode,te=io({mode:"hidden",children:te},_),s=Rn(s,_,i,null),te.return=t,s.return=t,te.sibling=s,t.child=te,_=t.child,_.memoizedState=Su(i),_.childLanes=Tu(e,Z,i),t.memoizedState=Mu,s):(Lr(t),Du(t,te))}if(ce=e.memoizedState,ce!==null&&(te=ce.dehydrated,te!==null)){if(C)t.flags&256?(Lr(t),t.flags&=-257,t=Ou(e,t,i)):t.memoizedState!==null?(Rr(),t.child=e.child,t.flags|=128,t=null):(Rr(),_=s.fallback,te=t.mode,s=io({mode:"visible",children:s.children},te),_=Rn(_,te,i,null),_.flags|=2,s.return=t,_.return=t,s.sibling=_,t.child=s,Ya(t,e.child,null,i),s=t.child,s.memoizedState=Su(i),s.childLanes=Tu(e,Z,i),t.memoizedState=Mu,t=_);else if(Lr(t),ff(te)){if(Z=te.nextSibling&&te.nextSibling.dataset,Z)var Le=Z.dgst;Z=Le,s=Error(M(419)),s.stack="",s.digest=Z,fa({value:s,source:null,stack:null}),t=Ou(e,t,i)}else if(pi||En(e,t,i,!1),Z=(i&e.childLanes)!==0,pi||Z){if(Z=ei,Z!==null&&(s=i&-i,s=(s&42)!==0?1:q(s),s=(s&(Z.suspendedLanes|i))!==0?0:s,s!==0&&s!==ce.retryLane))throw ce.retryLane=s,Kt(e,s),Ji(Z,e,s),_h;te.data==="$?"||Yu(),t=Ou(e,t,i)}else te.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=ce.treeContext,ni=Sn(te.nextSibling),Ei=t,Ft=!0,ir=null,ln=!1,e!==null&&(Oi[Gi++]=xn,Oi[Gi++]=yn,Oi[Gi++]=zn,xn=e.id,yn=e.overflow,zn=t),t=Du(t,s.children),t.flags|=4096);return t}return _?(Rr(),_=s.fallback,te=t.mode,ce=e.child,Le=ce.sibling,s=an(ce,{mode:"hidden",children:s.children}),s.subtreeFlags=ce.subtreeFlags&65011712,Le!==null?_=an(Le,_):(_=Rn(_,te,i,null),_.flags|=2),_.return=t,s.return=t,s.sibling=_,t.child=s,s=_,_=t.child,te=e.child.memoizedState,te===null?te=Su(i):(ce=te.cachePool,ce!==null?(Le=li._currentValue,ce=ce.parent!==Le?{parent:Le,pool:Le}:ce):ce=Ns(),te={baseLanes:te.baseLanes|i,cachePool:ce}),_.memoizedState=te,_.childLanes=Tu(e,Z,i),t.memoizedState=Mu,s):(Lr(t),i=e.child,e=i.sibling,i=an(i,{mode:"visible",children:s.children}),i.return=t,i.sibling=null,e!==null&&(Z=t.deletions,Z===null?(t.deletions=[e],t.flags|=16):Z.push(e)),t.child=i,t.memoizedState=null,i)}function Du(e,t){return t=io({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function io(e,t){return e=Ii(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Ou(e,t,i){return Ya(t,e.child,null,i),e=Du(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Dh(e,t,i){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),Fa(e.return,t,i)}function Cu(e,t,i,s,_){var C=e.memoizedState;C===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:i,tailMode:_}:(C.isBackwards=t,C.rendering=null,C.renderingStartTime=0,C.last=s,C.tail=i,C.tailMode=_)}function Oh(e,t,i){var s=t.pendingProps,_=s.revealOrder,C=s.tail;if(Ai(e,t,s.children,i),s=gi.current,(s&2)!==0)s=s&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Dh(e,i,t);else if(e.tag===19)Dh(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}switch(ne(gi,s),_){case"forwards":for(i=t.child,_=null;i!==null;)e=i.alternate,e!==null&&$l(e)===null&&(_=i),i=i.sibling;i=_,i===null?(_=t.child,t.child=null):(_=i.sibling,i.sibling=null),Cu(t,!1,_,i,C);break;case"backwards":for(i=null,_=t.child,t.child=null;_!==null;){if(e=_.alternate,e!==null&&$l(e)===null){t.child=_;break}e=_.sibling,_.sibling=i,i=_,_=e}Cu(t,!0,i,null,C);break;case"together":Cu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function lr(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),Ir|=t.lanes,(i&t.childLanes)===0)if(e!==null){if(En(e,t,i,!1),(i&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(M(153));if(t.child!==null){for(e=t.child,i=an(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=an(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function wu(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Dr(e)))}function ad(e,t,i){switch(t.tag){case 3:ue(t,t.stateNode.containerInfo),un(t,li,e.memoizedState.cache),ua();break;case 27:case 5:Fe(t);break;case 4:ue(t,t.stateNode.containerInfo);break;case 10:un(t,t.type,t.memoizedProps.value);break;case 13:var s=t.memoizedState;if(s!==null)return s.dehydrated!==null?(Lr(t),t.flags|=128,null):(i&t.child.childLanes)!==0?Th(e,t,i):(Lr(t),e=lr(e,t,i),e!==null?e.sibling:null);Lr(t);break;case 19:var _=(e.flags&128)!==0;if(s=(i&t.childLanes)!==0,s||(En(e,t,i,!1),s=(i&t.childLanes)!==0),_){if(s)return Oh(e,t,i);t.flags|=128}if(_=t.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),ne(gi,gi.current),s)break;return null;case 22:case 23:return t.lanes=0,bh(e,t,i);case 24:un(t,li,e.memoizedState.cache)}return lr(e,t,i)}function Ch(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps)pi=!0;else{if(!wu(e,i)&&(t.flags&128)===0)return pi=!1,ad(e,t,i);pi=(e.flags&131072)!==0}else pi=!1,Ft&&(t.flags&1048576)!==0&&Il(t,Tr,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var s=t.elementType,_=s._init;if(s=_(s._payload),t.type=s,typeof s=="function")Os(s)?(e=va(s,e),t.tag=1,t=Mh(null,t,s,e,i)):(t.tag=0,t=Au(null,t,s,e,i));else{if(s!=null){if(_=s.$$typeof,_===d){t.tag=11,t=ph(null,t,s,e,i);break e}else if(_===v){t.tag=14,t=xh(null,t,s,e,i);break e}}throw t=j(s)||s,Error(M(306,t,""))}}return t;case 0:return Au(e,t,t.type,t.pendingProps,i);case 1:return s=t.type,_=va(s,t.pendingProps),Mh(e,t,s,_,i);case 3:e:{if(ue(t,t.stateNode.containerInfo),e===null)throw Error(M(387));s=t.pendingProps;var C=t.memoizedState;_=C.element,Re(e,t),Et(t,s,null,i);var Z=t.memoizedState;if(s=Z.cache,un(t,li,s),s!==C.cache&&Bs(t,[li],i,!0),Ot(),s=Z.element,C.isDehydrated)if(C={element:s,isDehydrated:!1,cache:Z.cache},t.updateQueue.baseState=C,t.memoizedState=C,t.flags&256){t=Sh(e,t,s,i);break e}else if(s!==_){_=zi(Error(M(424)),t),fa(_),t=Sh(e,t,s,i);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(ni=Sn(e.firstChild),Ei=t,Ft=!0,ir=null,ln=!0,i=lh(t,null,s,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(ua(),s===_){t=lr(e,t,i);break e}Ai(e,t,s,i)}t=t.child}return t;case 26:return to(e,t),e===null?(i=zc(t.type,null,t.pendingProps,null))?t.memoizedState=i:Ft||(i=t.type,e=t.pendingProps,s=_o(oe.current).createElement(i),s[tt]=t,s[vt]=e,Si(s,i,e),Nt(s),t.stateNode=s):t.memoizedState=zc(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Fe(t),e===null&&Ft&&(s=t.stateNode=wc(t.type,t.pendingProps,oe.current),Ei=t,ln=!0,_=ni,Wr(t.type)?(hf=_,ni=Sn(s.firstChild)):ni=_),Ai(e,t,t.pendingProps.children,i),to(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Ft&&((_=s=ni)&&(s=zd(s,t.type,t.pendingProps,ln),s!==null?(t.stateNode=s,Ei=t,ni=Sn(s.firstChild),ln=!1,_=!0):_=!1),_||nr(t)),Fe(t),_=t.type,C=t.pendingProps,Z=e!==null?e.memoizedProps:null,s=C.children,lf(_,C)?s=null:Z!==null&&lf(_,Z)&&(t.flags|=32),t.memoizedState!==null&&(_=au(e,t,Jc,null,null,i),ll._currentValue=_),to(e,t),Ai(e,t,s,i),t.child;case 6:return e===null&&Ft&&((e=i=ni)&&(i=Bd(i,t.pendingProps,ln),i!==null?(t.stateNode=i,Ei=t,ni=null,e=!0):e=!1),e||nr(t)),null;case 13:return Th(e,t,i);case 4:return ue(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=Ya(t,null,s,i):Ai(e,t,s,i),t.child;case 11:return ph(e,t,t.type,t.pendingProps,i);case 7:return Ai(e,t,t.pendingProps,i),t.child;case 8:return Ai(e,t,t.pendingProps.children,i),t.child;case 12:return Ai(e,t,t.pendingProps.children,i),t.child;case 10:return s=t.pendingProps,un(t,t.type,s.value),Ai(e,t,s.children,i),t.child;case 9:return _=t.type._context,s=t.pendingProps.children,rr(t),_=_i(_),s=s(_),t.flags|=1,Ai(e,t,s,i),t.child;case 14:return xh(e,t,t.type,t.pendingProps,i);case 15:return yh(e,t,t.type,t.pendingProps,i);case 19:return Oh(e,t,i);case 31:return s=t.pendingProps,i=t.mode,s={mode:s.mode,children:s.children},e===null?(i=io(s,i),i.ref=t.ref,t.child=i,i.return=t,t=i):(i=an(e.child,s),i.ref=t.ref,t.child=i,i.return=t,t=i),t;case 22:return bh(e,t,i);case 24:return rr(t),s=_i(li),e===null?(_=Ha(),_===null&&(_=ei,C=Us(),_.pooledCache=C,C.refCount++,C!==null&&(_.pooledCacheLanes|=i),_=C),t.memoizedState={parent:s,cache:_},xe(t),un(t,li,_)):((e.lanes&i)!==0&&(Re(e,t),Et(t,null,null,i),Ot()),_=e.memoizedState,C=t.memoizedState,_.parent!==s?(_={parent:s,cache:s},t.memoizedState=_,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=_),un(t,li,s)):(s=C.cache,un(t,li,s),s!==_.cache&&Bs(t,[li],i,!0))),Ai(e,t,t.pendingProps.children,i),t.child;case 29:throw t.pendingProps}throw Error(M(156,t.tag))}function or(e){e.flags|=4}function wh(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Gc(t)){if(t=hn.current,t!==null&&((Gt&4194048)===Gt?Un!==null:(Gt&62914560)!==Gt&&(Gt&536870912)===0||t!==Un))throw se=X,Hl;e.flags|=8192}}function no(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?$():536870912,e.lanes|=t,Qa|=t)}function Ys(e,t){if(!Ft)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var s=null;i!==null;)i.alternate!==null&&(s=i),i=i.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function ai(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,s=0;if(t)for(var _=e.child;_!==null;)i|=_.lanes|_.childLanes,s|=_.subtreeFlags&65011712,s|=_.flags&65011712,_.return=e,_=_.sibling;else for(_=e.child;_!==null;)i|=_.lanes|_.childLanes,s|=_.subtreeFlags,s|=_.flags,_.return=e,_=_.sibling;return e.subtreeFlags|=s,e.childLanes=i,t}function sd(e,t,i){var s=t.pendingProps;switch(ws(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ai(t),null;case 1:return ai(t),null;case 3:return i=t.stateNode,s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),bn(li),ge(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(oa(t)?or(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Rs())),ai(t),null;case 26:return i=t.memoizedState,e===null?(or(t),i!==null?(ai(t),wh(t,i)):(ai(t),t.flags&=-16777217)):i?i!==e.memoizedState?(or(t),ai(t),wh(t,i)):(ai(t),t.flags&=-16777217):(e.memoizedProps!==s&&or(t),ai(t),t.flags&=-16777217),null;case 27:Be(t),i=oe.current;var _=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==s&&or(t);else{if(!s){if(t.stateNode===null)throw Error(M(166));return ai(t),null}e=ae.current,oa(t)?Gl(t):(e=wc(_,s,i),t.stateNode=e,or(t))}return ai(t),null;case 5:if(Be(t),i=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&or(t);else{if(!s){if(t.stateNode===null)throw Error(M(166));return ai(t),null}if(e=ae.current,oa(t))Gl(t);else{switch(_=_o(oe.current),e){case 1:e=_.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:e=_.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":e=_.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":e=_.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":e=_.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof s.is=="string"?_.createElement("select",{is:s.is}):_.createElement("select"),s.multiple?e.multiple=!0:s.size&&(e.size=s.size);break;default:e=typeof s.is=="string"?_.createElement(i,{is:s.is}):_.createElement(i)}}e[tt]=t,e[vt]=s;e:for(_=t.child;_!==null;){if(_.tag===5||_.tag===6)e.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===t)break e;for(;_.sibling===null;){if(_.return===null||_.return===t)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}t.stateNode=e;e:switch(Si(e,i,s),i){case"button":case"input":case"select":case"textarea":e=!!s.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&or(t)}}return ai(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==s&&or(t);else{if(typeof s!="string"&&t.stateNode===null)throw Error(M(166));if(e=oe.current,oa(t)){if(e=t.stateNode,i=t.memoizedProps,s=null,_=Ei,_!==null)switch(_.tag){case 27:case 5:s=_.memoizedProps}e[tt]=t,e=!!(e.nodeValue===i||s!==null&&s.suppressHydrationWarning===!0||Ac(e.nodeValue,i)),e||nr(t)}else e=_o(e).createTextNode(s),e[tt]=t,t.stateNode=e}return ai(t),null;case 13:if(s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(_=oa(t),s!==null&&s.dehydrated!==null){if(e===null){if(!_)throw Error(M(318));if(_=t.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(M(317));_[tt]=t}else ua(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;ai(t),_=!1}else _=Rs(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=_),_=!0;if(!_)return t.flags&256?(sr(t),t):(sr(t),null)}if(sr(t),(t.flags&128)!==0)return t.lanes=i,t;if(i=s!==null,e=e!==null&&e.memoizedState!==null,i){s=t.child,_=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(_=s.alternate.memoizedState.cachePool.pool);var C=null;s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(C=s.memoizedState.cachePool.pool),C!==_&&(s.flags|=2048)}return i!==e&&i&&(t.child.flags|=8192),no(t,t.updateQueue),ai(t),null;case 4:return ge(),e===null&&tf(t.stateNode.containerInfo),ai(t),null;case 10:return bn(t.type),ai(t),null;case 19:if(Y(gi),_=t.memoizedState,_===null)return ai(t),null;if(s=(t.flags&128)!==0,C=_.rendering,C===null)if(s)Ys(_,!1);else{if(si!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(C=$l(e),C!==null){for(t.flags|=128,Ys(_,!1),e=C.updateQueue,t.updateQueue=e,no(t,e),t.subtreeFlags=0,e=i,i=t.child;i!==null;)Pl(i,e),i=i.sibling;return ne(gi,gi.current&1|2),t.child}e=e.sibling}_.tail!==null&&Xe()>so&&(t.flags|=128,s=!0,Ys(_,!1),t.lanes=4194304)}else{if(!s)if(e=$l(C),e!==null){if(t.flags|=128,s=!0,e=e.updateQueue,t.updateQueue=e,no(t,e),Ys(_,!0),_.tail===null&&_.tailMode==="hidden"&&!C.alternate&&!Ft)return ai(t),null}else 2*Xe()-_.renderingStartTime>so&&i!==536870912&&(t.flags|=128,s=!0,Ys(_,!1),t.lanes=4194304);_.isBackwards?(C.sibling=t.child,t.child=C):(e=_.last,e!==null?e.sibling=C:t.child=C,_.last=C)}return _.tail!==null?(t=_.tail,_.rendering=t,_.tail=t.sibling,_.renderingStartTime=Xe(),t.sibling=null,e=gi.current,ne(gi,s?e&1|2:e&1),t):(ai(t),null);case 22:case 23:return sr(t),Yt(),s=t.memoizedState!==null,e!==null?e.memoizedState!==null!==s&&(t.flags|=8192):s&&(t.flags|=8192),s?(i&536870912)!==0&&(t.flags&128)===0&&(ai(t),t.subtreeFlags&6&&(t.flags|=8192)):ai(t),i=t.updateQueue,i!==null&&no(t,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),s=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),s!==i&&(t.flags|=2048),e!==null&&Y(Bn),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),bn(li),ai(t),null;case 25:return null;case 30:return null}throw Error(M(156,t.tag))}function ld(e,t){switch(ws(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return bn(li),ge(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Be(t),null;case 13:if(sr(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(M(340));ua()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Y(gi),null;case 4:return ge(),null;case 10:return bn(t.type),null;case 22:case 23:return sr(t),Yt(),e!==null&&Y(Bn),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return bn(li),null;case 25:return null;default:return null}}function Lh(e,t){switch(ws(t),t.tag){case 3:bn(li),ge();break;case 26:case 27:case 5:Be(t);break;case 4:ge();break;case 13:sr(t);break;case 19:Y(gi);break;case 10:bn(t.type);break;case 22:case 23:sr(t),Yt(),e!==null&&Y(Bn);break;case 24:bn(li)}}function Xs(e,t){try{var i=t.updateQueue,s=i!==null?i.lastEffect:null;if(s!==null){var _=s.next;i=_;do{if((i.tag&e)===e){s=void 0;var C=i.create,Z=i.inst;s=C(),Z.destroy=s}i=i.next}while(i!==_)}}catch(te){qt(t,t.return,te)}}function zr(e,t,i){try{var s=t.updateQueue,_=s!==null?s.lastEffect:null;if(_!==null){var C=_.next;s=C;do{if((s.tag&e)===e){var Z=s.inst,te=Z.destroy;if(te!==void 0){Z.destroy=void 0,_=t;var ce=i,Le=te;try{Le()}catch(Ke){qt(_,ce,Ke)}}}s=s.next}while(s!==C)}}catch(Ke){qt(t,t.return,Ke)}}function Rh(e){var t=e.updateQueue;if(t!==null){var i=e.stateNode;try{wt(t,i)}catch(s){qt(e,e.return,s)}}}function zh(e,t,i){i.props=va(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(s){qt(e,t,s)}}function Zs(e,t){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var s=e.stateNode;break;case 30:s=e.stateNode;break;default:s=e.stateNode}typeof i=="function"?e.refCleanup=i(s):i.current=s}}catch(_){qt(e,t,_)}}function Pn(e,t){var i=e.ref,s=e.refCleanup;if(i!==null)if(typeof s=="function")try{s()}catch(_){qt(e,t,_)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(_){qt(e,t,_)}else i.current=null}function Bh(e){var t=e.type,i=e.memoizedProps,s=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":i.autoFocus&&s.focus();break e;case"img":i.src?s.src=i.src:i.srcSet&&(s.srcset=i.srcSet)}}catch(_){qt(e,e.return,_)}}function Lu(e,t,i){try{var s=e.stateNode;Od(s,e.type,i,t),s[vt]=t}catch(_){qt(e,e.return,_)}}function Uh(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Wr(e.type)||e.tag===4}function Ru(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Uh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Wr(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function zu(e,t,i){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,t):(t=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,t.appendChild(e),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=mo));else if(s!==4&&(s===27&&Wr(e.type)&&(i=e.stateNode,t=null),e=e.child,e!==null))for(zu(e,t,i),e=e.sibling;e!==null;)zu(e,t,i),e=e.sibling}function ro(e,t,i){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(s!==4&&(s===27&&Wr(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(ro(e,t,i),e=e.sibling;e!==null;)ro(e,t,i),e=e.sibling}function Ph(e){var t=e.stateNode,i=e.memoizedProps;try{for(var s=e.type,_=t.attributes;_.length;)t.removeAttributeNode(_[0]);Si(t,s,i),t[tt]=e,t[vt]=i}catch(C){qt(e,e.return,C)}}var ur=!1,fi=!1,Bu=!1,Ih=typeof WeakSet=="function"?WeakSet:Set,xi=null;function od(e,t){if(e=e.containerInfo,af=Ao,e=zl(e),wa(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var s=i.getSelection&&i.getSelection();if(s&&s.rangeCount!==0){i=s.anchorNode;var _=s.anchorOffset,C=s.focusNode;s=s.focusOffset;try{i.nodeType,C.nodeType}catch{i=null;break e}var Z=0,te=-1,ce=-1,Le=0,Ke=0,Je=e,Pe=null;t:for(;;){for(var Ne;Je!==i||_!==0&&Je.nodeType!==3||(te=Z+_),Je!==C||s!==0&&Je.nodeType!==3||(ce=Z+s),Je.nodeType===3&&(Z+=Je.nodeValue.length),(Ne=Je.firstChild)!==null;)Pe=Je,Je=Ne;for(;;){if(Je===e)break t;if(Pe===i&&++Le===_&&(te=Z),Pe===C&&++Ke===s&&(ce=Z),(Ne=Je.nextSibling)!==null)break;Je=Pe,Pe=Je.parentNode}Je=Ne}i=te===-1||ce===-1?null:{start:te,end:ce}}else i=null}i=i||{start:0,end:0}}else i=null;for(sf={focusedElem:e,selectionRange:i},Ao=!1,xi=t;xi!==null;)if(t=xi,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,xi=e;else for(;xi!==null;){switch(t=xi,C=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&C!==null){e=void 0,i=t,_=C.memoizedProps,C=C.memoizedState,s=i.stateNode;try{var bt=va(i.type,_,i.elementType===i.type);e=s.getSnapshotBeforeUpdate(bt,C),s.__reactInternalSnapshotBeforeUpdate=e}catch(xt){qt(i,i.return,xt)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,i=e.nodeType,i===9)uf(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":uf(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(M(163))}if(e=t.sibling,e!==null){e.return=t.return,xi=e;break}xi=t.return}}function Gh(e,t,i){var s=i.flags;switch(i.tag){case 0:case 11:case 15:Br(e,i),s&4&&Xs(5,i);break;case 1:if(Br(e,i),s&4)if(e=i.stateNode,t===null)try{e.componentDidMount()}catch(Z){qt(i,i.return,Z)}else{var _=va(i.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(_,t,e.__reactInternalSnapshotBeforeUpdate)}catch(Z){qt(i,i.return,Z)}}s&64&&Rh(i),s&512&&Zs(i,i.return);break;case 3:if(Br(e,i),s&64&&(e=i.updateQueue,e!==null)){if(t=null,i.child!==null)switch(i.child.tag){case 27:case 5:t=i.child.stateNode;break;case 1:t=i.child.stateNode}try{wt(e,t)}catch(Z){qt(i,i.return,Z)}}break;case 27:t===null&&s&4&&Ph(i);case 26:case 5:Br(e,i),t===null&&s&4&&Bh(i),s&512&&Zs(i,i.return);break;case 12:Br(e,i);break;case 13:Br(e,i),s&4&&Wh(e,i),s&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=_d.bind(null,i),Ud(e,i))));break;case 22:if(s=i.memoizedState!==null||ur,!s){t=t!==null&&t.memoizedState!==null||fi,_=ur;var C=fi;ur=s,(fi=t)&&!C?Ur(e,i,(i.subtreeFlags&8772)!==0):Br(e,i),ur=_,fi=C}break;case 30:break;default:Br(e,i)}}function Nh(e){var t=e.alternate;t!==null&&(e.alternate=null,Nh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Hi(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var ri=null,Fi=!1;function fr(e,t,i){for(i=i.child;i!==null;)Fh(e,t,i),i=i.sibling}function Fh(e,t,i){if(Q&&typeof Q.onCommitFiberUnmount=="function")try{Q.onCommitFiberUnmount(st,i)}catch{}switch(i.tag){case 26:fi||Pn(i,t),fr(e,t,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:fi||Pn(i,t);var s=ri,_=Fi;Wr(i.type)&&(ri=i.stateNode,Fi=!1),fr(e,t,i),nl(i.stateNode),ri=s,Fi=_;break;case 5:fi||Pn(i,t);case 6:if(s=ri,_=Fi,ri=null,fr(e,t,i),ri=s,Fi=_,ri!==null)if(Fi)try{(ri.nodeType===9?ri.body:ri.nodeName==="HTML"?ri.ownerDocument.body:ri).removeChild(i.stateNode)}catch(C){qt(i,t,C)}else try{ri.removeChild(i.stateNode)}catch(C){qt(i,t,C)}break;case 18:ri!==null&&(Fi?(e=ri,Oc(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),hl(e)):Oc(ri,i.stateNode));break;case 4:s=ri,_=Fi,ri=i.stateNode.containerInfo,Fi=!0,fr(e,t,i),ri=s,Fi=_;break;case 0:case 11:case 14:case 15:fi||zr(2,i,t),fi||zr(4,i,t),fr(e,t,i);break;case 1:fi||(Pn(i,t),s=i.stateNode,typeof s.componentWillUnmount=="function"&&zh(i,t,s)),fr(e,t,i);break;case 21:fr(e,t,i);break;case 22:fi=(s=fi)||i.memoizedState!==null,fr(e,t,i),fi=s;break;default:fr(e,t,i)}}function Wh(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{hl(e)}catch(i){qt(t,t.return,i)}}function ud(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Ih),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Ih),t;default:throw Error(M(435,e.tag))}}function Uu(e,t){var i=ud(e);t.forEach(function(s){var _=pd.bind(null,e,s);i.has(s)||(i.add(s),s.then(_,_))})}function Xi(e,t){var i=t.deletions;if(i!==null)for(var s=0;s<i.length;s++){var _=i[s],C=e,Z=t,te=Z;e:for(;te!==null;){switch(te.tag){case 27:if(Wr(te.type)){ri=te.stateNode,Fi=!1;break e}break;case 5:ri=te.stateNode,Fi=!1;break e;case 3:case 4:ri=te.stateNode.containerInfo,Fi=!0;break e}te=te.return}if(ri===null)throw Error(M(160));Fh(C,Z,_),ri=null,Fi=!1,C=_.alternate,C!==null&&(C.return=null),_.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)Hh(t,e),t=t.sibling}var Mn=null;function Hh(e,t){var i=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Xi(t,e),Zi(e),s&4&&(zr(3,e,e.return),Xs(3,e),zr(5,e,e.return));break;case 1:Xi(t,e),Zi(e),s&512&&(fi||i===null||Pn(i,i.return)),s&64&&ur&&(e=e.updateQueue,e!==null&&(s=e.callbacks,s!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?s:i.concat(s))));break;case 26:var _=Mn;if(Xi(t,e),Zi(e),s&512&&(fi||i===null||Pn(i,i.return)),s&4){var C=i!==null?i.memoizedState:null;if(s=e.memoizedState,i===null)if(s===null)if(e.stateNode===null){e:{s=e.type,i=e.memoizedProps,_=_.ownerDocument||_;t:switch(s){case"title":C=_.getElementsByTagName("title")[0],(!C||C[Pt]||C[tt]||C.namespaceURI==="http://www.w3.org/2000/svg"||C.hasAttribute("itemprop"))&&(C=_.createElement(s),_.head.insertBefore(C,_.querySelector("head > title"))),Si(C,s,i),C[tt]=e,Nt(C),s=C;break e;case"link":var Z=Pc("link","href",_).get(s+(i.href||""));if(Z){for(var te=0;te<Z.length;te++)if(C=Z[te],C.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&C.getAttribute("rel")===(i.rel==null?null:i.rel)&&C.getAttribute("title")===(i.title==null?null:i.title)&&C.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){Z.splice(te,1);break t}}C=_.createElement(s),Si(C,s,i),_.head.appendChild(C);break;case"meta":if(Z=Pc("meta","content",_).get(s+(i.content||""))){for(te=0;te<Z.length;te++)if(C=Z[te],C.getAttribute("content")===(i.content==null?null:""+i.content)&&C.getAttribute("name")===(i.name==null?null:i.name)&&C.getAttribute("property")===(i.property==null?null:i.property)&&C.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&C.getAttribute("charset")===(i.charSet==null?null:i.charSet)){Z.splice(te,1);break t}}C=_.createElement(s),Si(C,s,i),_.head.appendChild(C);break;default:throw Error(M(468,s))}C[tt]=e,Nt(C),s=C}e.stateNode=s}else Ic(_,e.type,e.stateNode);else e.stateNode=Uc(_,s,e.memoizedProps);else C!==s?(C===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):C.count--,s===null?Ic(_,e.type,e.stateNode):Uc(_,s,e.memoizedProps)):s===null&&e.stateNode!==null&&Lu(e,e.memoizedProps,i.memoizedProps)}break;case 27:Xi(t,e),Zi(e),s&512&&(fi||i===null||Pn(i,i.return)),i!==null&&s&4&&Lu(e,e.memoizedProps,i.memoizedProps);break;case 5:if(Xi(t,e),Zi(e),s&512&&(fi||i===null||Pn(i,i.return)),e.flags&32){_=e.stateNode;try{Hn(_,"")}catch(Ne){qt(e,e.return,Ne)}}s&4&&e.stateNode!=null&&(_=e.memoizedProps,Lu(e,_,i!==null?i.memoizedProps:_)),s&1024&&(Bu=!0);break;case 6:if(Xi(t,e),Zi(e),s&4){if(e.stateNode===null)throw Error(M(162));s=e.memoizedProps,i=e.stateNode;try{i.nodeValue=s}catch(Ne){qt(e,e.return,Ne)}}break;case 3:if(yo=null,_=Mn,Mn=po(t.containerInfo),Xi(t,e),Mn=_,Zi(e),s&4&&i!==null&&i.memoizedState.isDehydrated)try{hl(t.containerInfo)}catch(Ne){qt(e,e.return,Ne)}Bu&&(Bu=!1,Vh(e));break;case 4:s=Mn,Mn=po(e.stateNode.containerInfo),Xi(t,e),Zi(e),Mn=s;break;case 12:Xi(t,e),Zi(e);break;case 13:Xi(t,e),Zi(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(Wu=Xe()),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,Uu(e,s)));break;case 22:_=e.memoizedState!==null;var ce=i!==null&&i.memoizedState!==null,Le=ur,Ke=fi;if(ur=Le||_,fi=Ke||ce,Xi(t,e),fi=Ke,ur=Le,Zi(e),s&8192)e:for(t=e.stateNode,t._visibility=_?t._visibility&-2:t._visibility|1,_&&(i===null||ce||ur||fi||ma(e)),i=null,t=e;;){if(t.tag===5||t.tag===26){if(i===null){ce=i=t;try{if(C=ce.stateNode,_)Z=C.style,typeof Z.setProperty=="function"?Z.setProperty("display","none","important"):Z.display="none";else{te=ce.stateNode;var Je=ce.memoizedProps.style,Pe=Je!=null&&Je.hasOwnProperty("display")?Je.display:null;te.style.display=Pe==null||typeof Pe=="boolean"?"":(""+Pe).trim()}}catch(Ne){qt(ce,ce.return,Ne)}}}else if(t.tag===6){if(i===null){ce=t;try{ce.stateNode.nodeValue=_?"":ce.memoizedProps}catch(Ne){qt(ce,ce.return,Ne)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;i===t&&(i=null),t=t.return}i===t&&(i=null),t.sibling.return=t.return,t=t.sibling}s&4&&(s=e.updateQueue,s!==null&&(i=s.retryQueue,i!==null&&(s.retryQueue=null,Uu(e,i))));break;case 19:Xi(t,e),Zi(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,Uu(e,s)));break;case 30:break;case 21:break;default:Xi(t,e),Zi(e)}}function Zi(e){var t=e.flags;if(t&2){try{for(var i,s=e.return;s!==null;){if(Uh(s)){i=s;break}s=s.return}if(i==null)throw Error(M(160));switch(i.tag){case 27:var _=i.stateNode,C=Ru(e);ro(e,C,_);break;case 5:var Z=i.stateNode;i.flags&32&&(Hn(Z,""),i.flags&=-33);var te=Ru(e);ro(e,te,Z);break;case 3:case 4:var ce=i.stateNode.containerInfo,Le=Ru(e);zu(e,Le,ce);break;default:throw Error(M(161))}}catch(Ke){qt(e,e.return,Ke)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Vh(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Vh(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Br(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Gh(e,t.alternate,t),t=t.sibling}function ma(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:zr(4,t,t.return),ma(t);break;case 1:Pn(t,t.return);var i=t.stateNode;typeof i.componentWillUnmount=="function"&&zh(t,t.return,i),ma(t);break;case 27:nl(t.stateNode);case 26:case 5:Pn(t,t.return),ma(t);break;case 22:t.memoizedState===null&&ma(t);break;case 30:ma(t);break;default:ma(t)}e=e.sibling}}function Ur(e,t,i){for(i=i&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var s=t.alternate,_=e,C=t,Z=C.flags;switch(C.tag){case 0:case 11:case 15:Ur(_,C,i),Xs(4,C);break;case 1:if(Ur(_,C,i),s=C,_=s.stateNode,typeof _.componentDidMount=="function")try{_.componentDidMount()}catch(Le){qt(s,s.return,Le)}if(s=C,_=s.updateQueue,_!==null){var te=s.stateNode;try{var ce=_.shared.hiddenCallbacks;if(ce!==null)for(_.shared.hiddenCallbacks=null,_=0;_<ce.length;_++)Wt(ce[_],te)}catch(Le){qt(s,s.return,Le)}}i&&Z&64&&Rh(C),Zs(C,C.return);break;case 27:Ph(C);case 26:case 5:Ur(_,C,i),i&&s===null&&Z&4&&Bh(C),Zs(C,C.return);break;case 12:Ur(_,C,i);break;case 13:Ur(_,C,i),i&&Z&4&&Wh(_,C);break;case 22:C.memoizedState===null&&Ur(_,C,i),Zs(C,C.return);break;case 30:break;default:Ur(_,C,i)}t=t.sibling}}function Pu(e,t){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&ha(i))}function Iu(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ha(e))}function In(e,t,i,s){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)jh(e,t,i,s),t=t.sibling}function jh(e,t,i,s){var _=t.flags;switch(t.tag){case 0:case 11:case 15:In(e,t,i,s),_&2048&&Xs(9,t);break;case 1:In(e,t,i,s);break;case 3:In(e,t,i,s),_&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ha(e)));break;case 12:if(_&2048){In(e,t,i,s),e=t.stateNode;try{var C=t.memoizedProps,Z=C.id,te=C.onPostCommit;typeof te=="function"&&te(Z,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(ce){qt(t,t.return,ce)}}else In(e,t,i,s);break;case 13:In(e,t,i,s);break;case 23:break;case 22:C=t.stateNode,Z=t.alternate,t.memoizedState!==null?C._visibility&2?In(e,t,i,s):ks(e,t):C._visibility&2?In(e,t,i,s):(C._visibility|=2,Xa(e,t,i,s,(t.subtreeFlags&10256)!==0)),_&2048&&Pu(Z,t);break;case 24:In(e,t,i,s),_&2048&&Iu(t.alternate,t);break;default:In(e,t,i,s)}}function Xa(e,t,i,s,_){for(_=_&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var C=e,Z=t,te=i,ce=s,Le=Z.flags;switch(Z.tag){case 0:case 11:case 15:Xa(C,Z,te,ce,_),Xs(8,Z);break;case 23:break;case 22:var Ke=Z.stateNode;Z.memoizedState!==null?Ke._visibility&2?Xa(C,Z,te,ce,_):ks(C,Z):(Ke._visibility|=2,Xa(C,Z,te,ce,_)),_&&Le&2048&&Pu(Z.alternate,Z);break;case 24:Xa(C,Z,te,ce,_),_&&Le&2048&&Iu(Z.alternate,Z);break;default:Xa(C,Z,te,ce,_)}t=t.sibling}}function ks(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var i=e,s=t,_=s.flags;switch(s.tag){case 22:ks(i,s),_&2048&&Pu(s.alternate,s);break;case 24:ks(i,s),_&2048&&Iu(s.alternate,s);break;default:ks(i,s)}t=t.sibling}}var Qs=8192;function Za(e){if(e.subtreeFlags&Qs)for(e=e.child;e!==null;)Kh(e),e=e.sibling}function Kh(e){switch(e.tag){case 26:Za(e),e.flags&Qs&&e.memoizedState!==null&&Zd(Mn,e.memoizedState,e.memoizedProps);break;case 5:Za(e);break;case 3:case 4:var t=Mn;Mn=po(e.stateNode.containerInfo),Za(e),Mn=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=Qs,Qs=16777216,Za(e),Qs=t):Za(e));break;default:Za(e)}}function Yh(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Js(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var i=0;i<t.length;i++){var s=t[i];xi=s,Zh(s,e)}Yh(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Xh(e),e=e.sibling}function Xh(e){switch(e.tag){case 0:case 11:case 15:Js(e),e.flags&2048&&zr(9,e,e.return);break;case 3:Js(e);break;case 12:Js(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,ao(e)):Js(e);break;default:Js(e)}}function ao(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var i=0;i<t.length;i++){var s=t[i];xi=s,Zh(s,e)}Yh(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:zr(8,t,t.return),ao(t);break;case 22:i=t.stateNode,i._visibility&2&&(i._visibility&=-3,ao(t));break;default:ao(t)}e=e.sibling}}function Zh(e,t){for(;xi!==null;){var i=xi;switch(i.tag){case 0:case 11:case 15:zr(8,i,t);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var s=i.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:ha(i.memoizedState.cache)}if(s=i.child,s!==null)s.return=i,xi=s;else e:for(i=e;xi!==null;){s=xi;var _=s.sibling,C=s.return;if(Nh(s),s===i){xi=null;break e}if(_!==null){_.return=C,xi=_;break e}xi=C}}}var fd={getCacheForType:function(e){var t=_i(li),i=t.data.get(e);return i===void 0&&(i=e(),t.data.set(e,i)),i}},hd=typeof WeakMap=="function"?WeakMap:Map,Xt=0,ei=null,Rt=null,Gt=0,Zt=0,ki=null,Pr=!1,ka=!1,Gu=!1,hr=0,si=0,Ir=0,_a=0,Nu=0,cn=0,Qa=0,$s=null,Wi=null,Fu=!1,Wu=0,so=1/0,lo=null,Gr=null,Mi=0,Nr=null,Ja=null,$a=0,Hu=0,Vu=null,kh=null,qs=0,ju=null;function Qi(){if((Xt&2)!==0&&Gt!==0)return Gt&-Gt;if(G.T!==null){var e=Or;return e!==0?e:Ju()}return we()}function Qh(){cn===0&&(cn=(Gt&536870912)===0||Ft?Ue():536870912);var e=hn.current;return e!==null&&(e.flags|=32),cn}function Ji(e,t,i){(e===ei&&(Zt===2||Zt===9)||e.cancelPendingCommit!==null)&&(qa(e,0),Fr(e,Gt,cn,!1)),rt(e,i),((Xt&2)===0||e!==ei)&&(e===ei&&((Xt&2)===0&&(_a|=i),si===4&&Fr(e,Gt,cn,!1)),Gn(e))}function Jh(e,t,i){if((Xt&6)!==0)throw Error(M(327));var s=!i&&(t&124)===0&&(t&e.expiredLanes)===0||He(e,t),_=s?gd(e,t):Xu(e,t,!0),C=s;do{if(_===0){ka&&!s&&Fr(e,t,0,!1);break}else{if(i=e.current.alternate,C&&!cd(i)){_=Xu(e,t,!1),C=!1;continue}if(_===2){if(C=t,e.errorRecoveryDisabledLanes&C)var Z=0;else Z=e.pendingLanes&-536870913,Z=Z!==0?Z:Z&536870912?536870912:0;if(Z!==0){t=Z;e:{var te=e;_=$s;var ce=te.current.memoizedState.isDehydrated;if(ce&&(qa(te,Z).flags|=256),Z=Xu(te,Z,!1),Z!==2){if(Gu&&!ce){te.errorRecoveryDisabledLanes|=C,_a|=C,_=4;break e}C=Wi,Wi=_,C!==null&&(Wi===null?Wi=C:Wi.push.apply(Wi,C))}_=Z}if(C=!1,_!==2)continue}}if(_===1){qa(e,0),Fr(e,t,0,!0);break}e:{switch(s=e,C=_,C){case 0:case 1:throw Error(M(345));case 4:if((t&4194048)!==t)break;case 6:Fr(s,t,cn,!Pr);break e;case 2:Wi=null;break;case 3:case 5:break;default:throw Error(M(329))}if((t&62914560)===t&&(_=Wu+300-Xe(),10<_)){if(Fr(s,t,cn,!Pr),Te(s,0,!0)!==0)break e;s.timeoutHandle=Tc($h.bind(null,s,i,Wi,lo,Fu,t,cn,_a,Qa,Pr,C,2,-0,0),_);break e}$h(s,i,Wi,lo,Fu,t,cn,_a,Qa,Pr,C,0,-0,0)}}break}while(!0);Gn(e)}function $h(e,t,i,s,_,C,Z,te,ce,Le,Ke,Je,Pe,Ne){if(e.timeoutHandle=-1,Je=t.subtreeFlags,(Je&8192||(Je&16785408)===16785408)&&(sl={stylesheets:null,count:0,unsuspend:Xd},Kh(t),Je=kd(),Je!==null)){e.cancelPendingCommit=Je(ac.bind(null,e,t,C,i,s,_,Z,te,ce,Ke,1,Pe,Ne)),Fr(e,C,Z,!Le);return}ac(e,t,C,i,s,_,Z,te,ce)}function cd(e){for(var t=e;;){var i=t.tag;if((i===0||i===11||i===15)&&t.flags&16384&&(i=t.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var s=0;s<i.length;s++){var _=i[s],C=_.getSnapshot;_=_.value;try{if(!Li(C(),_))return!1}catch{return!1}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Fr(e,t,i,s){t&=~Nu,t&=~_a,e.suspendedLanes|=t,e.pingedLanes&=~t,s&&(e.warmLanes|=t),s=e.expirationTimes;for(var _=t;0<_;){var C=31-re(_),Z=1<<C;s[C]=-1,_&=~Z}i!==0&&Ae(e,i,t)}function oo(){return(Xt&6)===0?(el(0),!1):!0}function Ku(){if(Rt!==null){if(Zt===0)var e=Rt.return;else e=Rt,Yi=Ki=null,ou(e),Ka=null,js=0,e=Rt;for(;e!==null;)Lh(e.alternate,e),e=e.return;Rt=null}}function qa(e,t){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,wd(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),Ku(),ei=e,Rt=i=an(e.current,null),Gt=t,Zt=0,ki=null,Pr=!1,ka=He(e,t),Gu=!1,Qa=cn=Nu=_a=Ir=si=0,Wi=$s=null,Fu=!1,(t&8)!==0&&(t|=t&32);var s=e.entangledLanes;if(s!==0)for(e=e.entanglements,s&=t;0<s;){var _=31-re(s),C=1<<_;t|=e[_],s&=~C}return hr=t,Ar(),i}function qh(e,t){lt=null,G.H=kl,t===wr||t===c?(t=ze(),Zt=3):t===Hl?(t=ze(),Zt=4):Zt=t===_h?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,ki=t,Rt===null&&(si=1,eo(e,zi(t,e.current)))}function ec(){var e=G.H;return G.H=kl,e===null?kl:e}function tc(){var e=G.A;return G.A=fd,e}function Yu(){si=4,Pr||(Gt&4194048)!==Gt&&hn.current!==null||(ka=!0),(Ir&134217727)===0&&(_a&134217727)===0||ei===null||Fr(ei,Gt,cn,!1)}function Xu(e,t,i){var s=Xt;Xt|=2;var _=ec(),C=tc();(ei!==e||Gt!==t)&&(lo=null,qa(e,t)),t=!1;var Z=si;e:do try{if(Zt!==0&&Rt!==null){var te=Rt,ce=ki;switch(Zt){case 8:Ku(),Z=6;break e;case 3:case 2:case 9:case 6:hn.current===null&&(t=!0);var Le=Zt;if(Zt=0,ki=null,es(e,te,ce,Le),i&&ka){Z=0;break e}break;default:Le=Zt,Zt=0,ki=null,es(e,te,ce,Le)}}dd(),Z=si;break}catch(Ke){qh(e,Ke)}while(!0);return t&&e.shellSuspendCounter++,Yi=Ki=null,Xt=s,G.H=_,G.A=C,Rt===null&&(ei=null,Gt=0,Ar()),Z}function dd(){for(;Rt!==null;)ic(Rt)}function gd(e,t){var i=Xt;Xt|=2;var s=ec(),_=tc();ei!==e||Gt!==t?(lo=null,so=Xe()+500,qa(e,t)):ka=He(e,t);e:do try{if(Zt!==0&&Rt!==null){t=Rt;var C=ki;t:switch(Zt){case 1:Zt=0,ki=null,es(e,t,C,1);break;case 2:case 9:if(O(C)){Zt=0,ki=null,nc(t);break}t=function(){Zt!==2&&Zt!==9||ei!==e||(Zt=7),Gn(e)},C.then(t,t);break e;case 3:Zt=7;break e;case 4:Zt=5;break e;case 7:O(C)?(Zt=0,ki=null,nc(t)):(Zt=0,ki=null,es(e,t,C,7));break;case 5:var Z=null;switch(Rt.tag){case 26:Z=Rt.memoizedState;case 5:case 27:var te=Rt;if(!Z||Gc(Z)){Zt=0,ki=null;var ce=te.sibling;if(ce!==null)Rt=ce;else{var Le=te.return;Le!==null?(Rt=Le,uo(Le)):Rt=null}break t}}Zt=0,ki=null,es(e,t,C,5);break;case 6:Zt=0,ki=null,es(e,t,C,6);break;case 8:Ku(),si=6;break e;default:throw Error(M(462))}}vd();break}catch(Ke){qh(e,Ke)}while(!0);return Yi=Ki=null,G.H=s,G.A=_,Xt=i,Rt!==null?0:(ei=null,Gt=0,Ar(),si)}function vd(){for(;Rt!==null&&!De();)ic(Rt)}function ic(e){var t=Ch(e.alternate,e,hr);e.memoizedProps=e.pendingProps,t===null?uo(e):Rt=t}function nc(e){var t=e,i=t.alternate;switch(t.tag){case 15:case 0:t=Ah(i,t,t.pendingProps,t.type,void 0,Gt);break;case 11:t=Ah(i,t,t.pendingProps,t.type.render,t.ref,Gt);break;case 5:ou(t);default:Lh(i,t),t=Rt=Pl(t,hr),t=Ch(i,t,hr)}e.memoizedProps=e.pendingProps,t===null?uo(e):Rt=t}function es(e,t,i,s){Yi=Ki=null,ou(t),Ka=null,js=0;var _=t.return;try{if(rd(e,_,t,i,Gt)){si=1,eo(e,zi(i,e.current)),Rt=null;return}}catch(C){if(_!==null)throw Rt=_,C;si=1,eo(e,zi(i,e.current)),Rt=null;return}t.flags&32768?(Ft||s===1?e=!0:ka||(Gt&536870912)!==0?e=!1:(Pr=e=!0,(s===2||s===9||s===3||s===6)&&(s=hn.current,s!==null&&s.tag===13&&(s.flags|=16384))),rc(t,e)):uo(t)}function uo(e){var t=e;do{if((t.flags&32768)!==0){rc(t,Pr);return}e=t.return;var i=sd(t.alternate,t,hr);if(i!==null){Rt=i;return}if(t=t.sibling,t!==null){Rt=t;return}Rt=t=e}while(t!==null);si===0&&(si=5)}function rc(e,t){do{var i=ld(e.alternate,e);if(i!==null){i.flags&=32767,Rt=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!t&&(e=e.sibling,e!==null)){Rt=e;return}Rt=e=i}while(e!==null);si=6,Rt=null}function ac(e,t,i,s,_,C,Z,te,ce){e.cancelPendingCommit=null;do fo();while(Mi!==0);if((Xt&6)!==0)throw Error(M(327));if(t!==null){if(t===e.current)throw Error(M(177));if(C=t.lanes|t.childLanes,C|=Pa,I(e,i,C,Z,te,ce),e===ei&&(Rt=ei=null,Gt=0),Ja=t,Nr=e,$a=i,Hu=C,Vu=_,kh=s,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,xd($e,function(){return fc(),null})):(e.callbackNode=null,e.callbackPriority=0),s=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||s){s=G.T,G.T=null,_=F.p,F.p=2,Z=Xt,Xt|=4;try{od(e,t,i)}finally{Xt=Z,F.p=_,G.T=s}}Mi=1,sc(),lc(),oc()}}function sc(){if(Mi===1){Mi=0;var e=Nr,t=Ja,i=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||i){i=G.T,G.T=null;var s=F.p;F.p=2;var _=Xt;Xt|=4;try{Hh(t,e);var C=sf,Z=zl(e.containerInfo),te=C.focusedElem,ce=C.selectionRange;if(Z!==te&&te&&te.ownerDocument&&xs(te.ownerDocument.documentElement,te)){if(ce!==null&&wa(te)){var Le=ce.start,Ke=ce.end;if(Ke===void 0&&(Ke=Le),"selectionStart"in te)te.selectionStart=Le,te.selectionEnd=Math.min(Ke,te.value.length);else{var Je=te.ownerDocument||document,Pe=Je&&Je.defaultView||window;if(Pe.getSelection){var Ne=Pe.getSelection(),bt=te.textContent.length,xt=Math.min(ce.start,bt),Jt=ce.end===void 0?xt:Math.min(ce.end,bt);!Ne.extend&&xt>Jt&&(Z=Jt,Jt=xt,xt=Z);var Oe=ps(te,xt),ye=ps(te,Jt);if(Oe&&ye&&(Ne.rangeCount!==1||Ne.anchorNode!==Oe.node||Ne.anchorOffset!==Oe.offset||Ne.focusNode!==ye.node||Ne.focusOffset!==ye.offset)){var Ce=Je.createRange();Ce.setStart(Oe.node,Oe.offset),Ne.removeAllRanges(),xt>Jt?(Ne.addRange(Ce),Ne.extend(ye.node,ye.offset)):(Ce.setEnd(ye.node,ye.offset),Ne.addRange(Ce))}}}}for(Je=[],Ne=te;Ne=Ne.parentNode;)Ne.nodeType===1&&Je.push({element:Ne,left:Ne.scrollLeft,top:Ne.scrollTop});for(typeof te.focus=="function"&&te.focus(),te=0;te<Je.length;te++){var Ze=Je[te];Ze.element.scrollLeft=Ze.left,Ze.element.scrollTop=Ze.top}}Ao=!!af,sf=af=null}finally{Xt=_,F.p=s,G.T=i}}e.current=t,Mi=2}}function lc(){if(Mi===2){Mi=0;var e=Nr,t=Ja,i=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||i){i=G.T,G.T=null;var s=F.p;F.p=2;var _=Xt;Xt|=4;try{Gh(e,t.alternate,t)}finally{Xt=_,F.p=s,G.T=i}}Mi=3}}function oc(){if(Mi===4||Mi===3){Mi=0,Ve();var e=Nr,t=Ja,i=$a,s=kh;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Mi=5:(Mi=0,Ja=Nr=null,uc(e,e.pendingLanes));var _=e.pendingLanes;if(_===0&&(Gr=null),de(i),t=t.stateNode,Q&&typeof Q.onCommitFiberRoot=="function")try{Q.onCommitFiberRoot(st,t,void 0,(t.current.flags&128)===128)}catch{}if(s!==null){t=G.T,_=F.p,F.p=2,G.T=null;try{for(var C=e.onRecoverableError,Z=0;Z<s.length;Z++){var te=s[Z];C(te.value,{componentStack:te.stack})}}finally{G.T=t,F.p=_}}($a&3)!==0&&fo(),Gn(e),_=e.pendingLanes,(i&4194090)!==0&&(_&42)!==0?e===ju?qs++:(qs=0,ju=e):qs=0,el(0)}}function uc(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,ha(t)))}function fo(e){return sc(),lc(),oc(),fc()}function fc(){if(Mi!==5)return!1;var e=Nr,t=Hu;Hu=0;var i=de($a),s=G.T,_=F.p;try{F.p=32>i?32:i,G.T=null,i=Vu,Vu=null;var C=Nr,Z=$a;if(Mi=0,Ja=Nr=null,$a=0,(Xt&6)!==0)throw Error(M(331));var te=Xt;if(Xt|=4,Xh(C.current),jh(C,C.current,Z,i),Xt=te,el(0,!1),Q&&typeof Q.onPostCommitFiberRoot=="function")try{Q.onPostCommitFiberRoot(st,C)}catch{}return!0}finally{F.p=_,G.T=s,uc(e,t)}}function hc(e,t,i){t=zi(i,t),t=Eu(e.stateNode,t,2),e=ft(e,t,2),e!==null&&(rt(e,2),Gn(e))}function qt(e,t,i){if(e.tag===3)hc(e,e,i);else for(;t!==null;){if(t.tag===3){hc(t,e,i);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Gr===null||!Gr.has(s))){e=zi(i,e),i=vh(2),s=ft(t,i,2),s!==null&&(mh(i,s,t,e),rt(s,2),Gn(s));break}}t=t.return}}function Zu(e,t,i){var s=e.pingCache;if(s===null){s=e.pingCache=new hd;var _=new Set;s.set(t,_)}else _=s.get(t),_===void 0&&(_=new Set,s.set(t,_));_.has(i)||(Gu=!0,_.add(i),e=md.bind(null,e,t,i),t.then(e,e))}function md(e,t,i){var s=e.pingCache;s!==null&&s.delete(t),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,ei===e&&(Gt&i)===i&&(si===4||si===3&&(Gt&62914560)===Gt&&300>Xe()-Wu?(Xt&2)===0&&qa(e,0):Nu|=i,Qa===Gt&&(Qa=0)),Gn(e)}function cc(e,t){t===0&&(t=$()),e=Kt(e,t),e!==null&&(rt(e,t),Gn(e))}function _d(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),cc(e,i)}function pd(e,t){var i=0;switch(e.tag){case 13:var s=e.stateNode,_=e.memoizedState;_!==null&&(i=_.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(M(314))}s!==null&&s.delete(t),cc(e,i)}function xd(e,t){return be(e,t)}var ho=null,ts=null,ku=!1,co=!1,Qu=!1,pa=0;function Gn(e){e!==ts&&e.next===null&&(ts===null?ho=ts=e:ts=ts.next=e),co=!0,ku||(ku=!0,bd())}function el(e,t){if(!Qu&&co){Qu=!0;do for(var i=!1,s=ho;s!==null;){if(e!==0){var _=s.pendingLanes;if(_===0)var C=0;else{var Z=s.suspendedLanes,te=s.pingedLanes;C=(1<<31-re(42|e)+1)-1,C&=_&~(Z&~te),C=C&201326741?C&201326741|1:C?C|2:0}C!==0&&(i=!0,mc(s,C))}else C=Gt,C=Te(s,s===ei?C:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),(C&3)===0||He(s,C)||(i=!0,mc(s,C));s=s.next}while(i);Qu=!1}}function yd(){dc()}function dc(){co=ku=!1;var e=0;pa!==0&&(Cd()&&(e=pa),pa=0);for(var t=Xe(),i=null,s=ho;s!==null;){var _=s.next,C=gc(s,t);C===0?(s.next=null,i===null?ho=_:i.next=_,_===null&&(ts=i)):(i=s,(e!==0||(C&3)!==0)&&(co=!0)),s=_}el(e)}function gc(e,t){for(var i=e.suspendedLanes,s=e.pingedLanes,_=e.expirationTimes,C=e.pendingLanes&-62914561;0<C;){var Z=31-re(C),te=1<<Z,ce=_[Z];ce===-1?((te&i)===0||(te&s)!==0)&&(_[Z]=_e(te,t)):ce<=t&&(e.expiredLanes|=te),C&=~te}if(t=ei,i=Gt,i=Te(e,e===t?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s=e.callbackNode,i===0||e===t&&(Zt===2||Zt===9)||e.cancelPendingCommit!==null)return s!==null&&s!==null&&fe(s),e.callbackNode=null,e.callbackPriority=0;if((i&3)===0||He(e,i)){if(t=i&-i,t===e.callbackPriority)return t;switch(s!==null&&fe(s),de(i)){case 2:case 8:i=et;break;case 32:i=$e;break;case 268435456:i=Ye;break;default:i=$e}return s=vc.bind(null,e),i=be(i,s),e.callbackPriority=t,e.callbackNode=i,t}return s!==null&&s!==null&&fe(s),e.callbackPriority=2,e.callbackNode=null,2}function vc(e,t){if(Mi!==0&&Mi!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(fo()&&e.callbackNode!==i)return null;var s=Gt;return s=Te(e,e===ei?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s===0?null:(Jh(e,s,t),gc(e,Xe()),e.callbackNode!=null&&e.callbackNode===i?vc.bind(null,e):null)}function mc(e,t){if(fo())return null;Jh(e,t,!0)}function bd(){Ld(function(){(Xt&6)!==0?be(nt,yd):dc()})}function Ju(){return pa===0&&(pa=Ue()),pa}function _c(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Bt(""+e)}function pc(e,t){var i=t.ownerDocument.createElement("input");return i.name=t.name,i.value=t.value,e.id&&i.setAttribute("form",e.id),t.parentNode.insertBefore(i,t),e=new FormData(e),i.parentNode.removeChild(i),e}function Ed(e,t,i,s,_){if(t==="submit"&&i&&i.stateNode===_){var C=_c((_[vt]||null).action),Z=s.submitter;Z&&(t=(t=Z[vt]||null)?_c(t.formAction):Z.getAttribute("formAction"),t!==null&&(C=t,Z=null));var te=new Ma("action","action",null,s,_);e.push({event:te,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(pa!==0){var ce=Z?pc(_,Z):new FormData(_);_u(i,{pending:!0,data:ce,method:_.method,action:C},null,ce)}}else typeof C=="function"&&(te.preventDefault(),ce=Z?pc(_,Z):new FormData(_),_u(i,{pending:!0,data:ce,method:_.method,action:C},C,ce))},currentTarget:_}]})}}for(var $u=0;$u<Er.length;$u++){var qu=Er[$u],Ad=qu.toLowerCase(),Md=qu[0].toUpperCase()+qu.slice(1);Di(Ad,"on"+Md)}Di(rn,"onAnimationEnd"),Di(Ua,"onAnimationIteration"),Di(Es,"onAnimationStart"),Di("dblclick","onDoubleClick"),Di("focusin","onFocus"),Di("focusout","onBlur"),Di(As,"onTransitionRun"),Di(Bl,"onTransitionStart"),Di(Ul,"onTransitionCancel"),Di(Ms,"onTransitionEnd"),Ui("onMouseEnter",["mouseout","mouseover"]),Ui("onMouseLeave",["mouseout","mouseover"]),Ui("onPointerEnter",["pointerout","pointerover"]),Ui("onPointerLeave",["pointerout","pointerover"]),$i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),$i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),$i("onBeforeInput",["compositionend","keypress","textInput","paste"]),$i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),$i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),$i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var tl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sd=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(tl));function xc(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var s=e[i],_=s.event;s=s.listeners;e:{var C=void 0;if(t)for(var Z=s.length-1;0<=Z;Z--){var te=s[Z],ce=te.instance,Le=te.currentTarget;if(te=te.listener,ce!==C&&_.isPropagationStopped())break e;C=te,_.currentTarget=Le;try{C(_)}catch(Ke){ql(Ke)}_.currentTarget=null,C=ce}else for(Z=0;Z<s.length;Z++){if(te=s[Z],ce=te.instance,Le=te.currentTarget,te=te.listener,ce!==C&&_.isPropagationStopped())break e;C=te,_.currentTarget=Le;try{C(_)}catch(Ke){ql(Ke)}_.currentTarget=null,C=ce}}}}function zt(e,t){var i=t[St];i===void 0&&(i=t[St]=new Set);var s=e+"__bubble";i.has(s)||(yc(t,e,2,!1),i.add(s))}function ef(e,t,i){var s=0;t&&(s|=4),yc(i,e,s,t)}var go="_reactListening"+Math.random().toString(36).slice(2);function tf(e){if(!e[go]){e[go]=!0,vi.forEach(function(i){i!=="selectionchange"&&(Sd.has(i)||ef(i,!1,e),ef(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[go]||(t[go]=!0,ef("selectionchange",!1,t))}}function yc(e,t,i,s){switch(jc(t)){case 2:var _=$d;break;case 8:_=qd;break;default:_=mf}i=_.bind(null,t,i,e),_=void 0,!Pi||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(_=!0),s?_!==void 0?e.addEventListener(t,i,{capture:!0,passive:_}):e.addEventListener(t,i,!0):_!==void 0?e.addEventListener(t,i,{passive:_}):e.addEventListener(t,i,!1)}function nf(e,t,i,s,_){var C=s;if((t&1)===0&&(t&2)===0&&s!==null)e:for(;;){if(s===null)return;var Z=s.tag;if(Z===3||Z===4){var te=s.stateNode.containerInfo;if(te===_)break;if(Z===4)for(Z=s.return;Z!==null;){var ce=Z.tag;if((ce===3||ce===4)&&Z.stateNode.containerInfo===_)return;Z=Z.return}for(;te!==null;){if(Z=bi(te),Z===null)return;if(ce=Z.tag,ce===5||ce===6||ce===26||ce===27){s=C=Z;continue e}te=te.parentNode}}s=s.return}Kn(function(){var Le=C,Ke=kr(i),Je=[];e:{var Pe=Ss.get(e);if(Pe!==void 0){var Ne=Ma,bt=e;switch(e){case"keypress":if($r(i)===0)break e;case"keydown":case"keyup":Ne=pl;break;case"focusin":bt="focus",Ne=Xn;break;case"focusout":bt="blur",Ne=Xn;break;case"beforeblur":case"afterblur":Ne=Xn;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ne=ml;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ne=zo;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ne=jo;break;case rn:case Ua:case Es:Ne=Po;break;case Ms:Ne=Da;break;case"scroll":case"scrollend":Ne=Lo;break;case"wheel":Ne=Xo;break;case"copy":case"cut":case"paste":Ne=Ta;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ne=yl;break;case"toggle":case"beforetoggle":Ne=ko}var xt=(t&4)!==0,Jt=!xt&&(e==="scroll"||e==="scrollend"),Oe=xt?Pe!==null?Pe+"Capture":null:Pe;xt=[];for(var ye=Le,Ce;ye!==null;){var Ze=ye;if(Ce=Ze.stateNode,Ze=Ze.tag,Ze!==5&&Ze!==26&&Ze!==27||Ce===null||Oe===null||(Ze=Jr(ye,Oe),Ze!=null&&xt.push(il(ye,Ze,Ce))),Jt)break;ye=ye.return}0<xt.length&&(Pe=new Ne(Pe,bt,null,i,Ke),Je.push({event:Pe,listeners:xt}))}}if((t&7)===0){e:{if(Pe=e==="mouseover"||e==="pointerover",Ne=e==="mouseout"||e==="pointerout",Pe&&i!==Vn&&(bt=i.relatedTarget||i.fromElement)&&(bi(bt)||bt[ti]))break e;if((Ne||Pe)&&(Pe=Ke.window===Ke?Ke:(Pe=Ke.ownerDocument)?Pe.defaultView||Pe.parentWindow:window,Ne?(bt=i.relatedTarget||i.toElement,Ne=Le,bt=bt?bi(bt):null,bt!==null&&(Jt=L(bt),xt=bt.tag,bt!==Jt||xt!==5&&xt!==27&&xt!==6)&&(bt=null)):(Ne=null,bt=Le),Ne!==bt)){if(xt=ml,Ze="onMouseLeave",Oe="onMouseEnter",ye="mouse",(e==="pointerout"||e==="pointerover")&&(xt=yl,Ze="onPointerLeave",Oe="onPointerEnter",ye="pointer"),Jt=Ne==null?Pe:jt(Ne),Ce=bt==null?Pe:jt(bt),Pe=new xt(Ze,ye+"leave",Ne,i,Ke),Pe.target=Jt,Pe.relatedTarget=Ce,Ze=null,bi(Ke)===Le&&(xt=new xt(Oe,ye+"enter",bt,i,Ke),xt.target=Ce,xt.relatedTarget=Jt,Ze=xt),Jt=Ze,Ne&&bt)t:{for(xt=Ne,Oe=bt,ye=0,Ce=xt;Ce;Ce=is(Ce))ye++;for(Ce=0,Ze=Oe;Ze;Ze=is(Ze))Ce++;for(;0<ye-Ce;)xt=is(xt),ye--;for(;0<Ce-ye;)Oe=is(Oe),Ce--;for(;ye--;){if(xt===Oe||Oe!==null&&xt===Oe.alternate)break t;xt=is(xt),Oe=is(Oe)}xt=null}else xt=null;Ne!==null&&bc(Je,Pe,Ne,xt,!1),bt!==null&&Jt!==null&&bc(Je,Jt,bt,xt,!0)}}e:{if(Pe=Le?jt(Le):window,Ne=Pe.nodeName&&Pe.nodeName.toLowerCase(),Ne==="select"||Ne==="input"&&Pe.type==="file")var gt=Dl;else if(gs(Pe))if(Ol)gt=Ca;else{gt=Rl;var Lt=Ll}else Ne=Pe.nodeName,!Ne||Ne.toLowerCase()!=="input"||Pe.type!=="checkbox"&&Pe.type!=="radio"?Le&&tn(Le.elementType)&&(gt=Dl):gt=qo;if(gt&&(gt=gt(e,Le))){vs(Je,gt,i,Ke);break e}Lt&&Lt(e,Pe,Le),e==="focusout"&&Le&&Pe.type==="number"&&Le.memoizedProps.value!=null&&vn(Pe,"number",Pe.value)}switch(Lt=Le?jt(Le):window,e){case"focusin":(gs(Lt)||Lt.contentEditable==="true")&&(Jn=Lt,Ra=Le,br=null);break;case"focusout":br=Ra=Jn=null;break;case"mousedown":za=!0;break;case"contextmenu":case"mouseup":case"dragend":za=!1,ys(Je,i,Ke);break;case"selectionchange":if(La)break;case"keydown":case"keyup":ys(Je,i,Ke)}var mt;if(ia)e:{switch(e){case"compositionstart":var yt="onCompositionStart";break e;case"compositionend":yt="onCompositionEnd";break e;case"compositionupdate":yt="onCompositionUpdate";break e}yt=void 0}else pn?Ml(e,i)&&(yt="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(yt="onCompositionStart");yt&&(bl&&i.locale!=="ko"&&(pn||yt!=="onCompositionStart"?yt==="onCompositionEnd"&&pn&&(mt=fs()):(Cn=Ke,us="value"in Cn?Cn.value:Cn.textContent,pn=!0)),Lt=vo(Le,yt),0<Lt.length&&(yt=new _r(yt,e,null,i,Ke),Je.push({event:yt,listeners:Lt}),mt?yt.data=mt:(mt=Sl(i),mt!==null&&(yt.data=mt)))),(mt=Qo?Jo(e,i):$o(e,i))&&(yt=vo(Le,"onBeforeInput"),0<yt.length&&(Lt=new _r("onBeforeInput","beforeinput",null,i,Ke),Je.push({event:Lt,listeners:yt}),Lt.data=mt)),Ed(Je,e,Le,i,Ke)}xc(Je,t)})}function il(e,t,i){return{instance:e,listener:t,currentTarget:i}}function vo(e,t){for(var i=t+"Capture",s=[];e!==null;){var _=e,C=_.stateNode;if(_=_.tag,_!==5&&_!==26&&_!==27||C===null||(_=Jr(e,i),_!=null&&s.unshift(il(e,_,C)),_=Jr(e,t),_!=null&&s.push(il(e,_,C))),e.tag===3)return s;e=e.return}return[]}function is(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function bc(e,t,i,s,_){for(var C=t._reactName,Z=[];i!==null&&i!==s;){var te=i,ce=te.alternate,Le=te.stateNode;if(te=te.tag,ce!==null&&ce===s)break;te!==5&&te!==26&&te!==27||Le===null||(ce=Le,_?(Le=Jr(i,C),Le!=null&&Z.unshift(il(i,Le,ce))):_||(Le=Jr(i,C),Le!=null&&Z.push(il(i,Le,ce)))),i=i.return}Z.length!==0&&e.push({event:t,listeners:Z})}var Td=/\r\n?/g,Dd=/\u0000|\uFFFD/g;function Ec(e){return(typeof e=="string"?e:""+e).replace(Td,`
`).replace(Dd,"")}function Ac(e,t){return t=Ec(t),Ec(e)===t}function mo(){}function Qt(e,t,i,s,_,C){switch(i){case"children":typeof s=="string"?t==="body"||t==="textarea"&&s===""||Hn(e,s):(typeof s=="number"||typeof s=="bigint")&&t!=="body"&&Hn(e,""+s);break;case"className":dr(e,"class",s);break;case"tabIndex":dr(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":dr(e,i,s);break;case"style":wo(e,s,C);break;case"data":if(t!=="object"){dr(e,"data",s);break}case"src":case"href":if(s===""&&(t!=="a"||i!=="href")){e.removeAttribute(i);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(i);break}s=Bt(""+s),e.setAttribute(i,s);break;case"action":case"formAction":if(typeof s=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof C=="function"&&(i==="formAction"?(t!=="input"&&Qt(e,t,"name",_.name,_,null),Qt(e,t,"formEncType",_.formEncType,_,null),Qt(e,t,"formMethod",_.formMethod,_,null),Qt(e,t,"formTarget",_.formTarget,_,null)):(Qt(e,t,"encType",_.encType,_,null),Qt(e,t,"method",_.method,_,null),Qt(e,t,"target",_.target,_,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(i);break}s=Bt(""+s),e.setAttribute(i,s);break;case"onClick":s!=null&&(e.onclick=mo);break;case"onScroll":s!=null&&zt("scroll",e);break;case"onScrollEnd":s!=null&&zt("scrollend",e);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(M(61));if(i=s.__html,i!=null){if(_.children!=null)throw Error(M(60));e.innerHTML=i}}break;case"multiple":e.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":e.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){e.removeAttribute("xlink:href");break}i=Bt(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(i,""+s):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":s===!0?e.setAttribute(i,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(i,s):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?e.setAttribute(i,s):e.removeAttribute(i);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?e.removeAttribute(i):e.setAttribute(i,s);break;case"popover":zt("beforetoggle",e),zt("toggle",e),Nn(e,"popover",s);break;case"xlinkActuate":gn(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":gn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":gn(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":gn(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":gn(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":gn(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":gn(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":gn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":gn(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":Nn(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=Ci.get(i)||i,Nn(e,i,s))}}function rf(e,t,i,s,_,C){switch(i){case"style":wo(e,s,C);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(M(61));if(i=s.__html,i!=null){if(_.children!=null)throw Error(M(60));e.innerHTML=i}}break;case"children":typeof s=="string"?Hn(e,s):(typeof s=="number"||typeof s=="bigint")&&Hn(e,""+s);break;case"onScroll":s!=null&&zt("scroll",e);break;case"onScrollEnd":s!=null&&zt("scrollend",e);break;case"onClick":s!=null&&(e.onclick=mo);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Tn.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(_=i.endsWith("Capture"),t=i.slice(2,_?i.length-7:void 0),C=e[vt]||null,C=C!=null?C[i]:null,typeof C=="function"&&e.removeEventListener(t,C,_),typeof s=="function")){typeof C!="function"&&C!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(t,s,_);break e}i in e?e[i]=s:s===!0?e.setAttribute(i,""):Nn(e,i,s)}}}function Si(e,t,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":zt("error",e),zt("load",e);var s=!1,_=!1,C;for(C in i)if(i.hasOwnProperty(C)){var Z=i[C];if(Z!=null)switch(C){case"src":s=!0;break;case"srcSet":_=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(M(137,t));default:Qt(e,t,C,Z,i,null)}}_&&Qt(e,t,"srcSet",i.srcSet,i,null),s&&Qt(e,t,"src",i.src,i,null);return;case"input":zt("invalid",e);var te=C=Z=_=null,ce=null,Le=null;for(s in i)if(i.hasOwnProperty(s)){var Ke=i[s];if(Ke!=null)switch(s){case"name":_=Ke;break;case"type":Z=Ke;break;case"checked":ce=Ke;break;case"defaultChecked":Le=Ke;break;case"value":C=Ke;break;case"defaultValue":te=Ke;break;case"children":case"dangerouslySetInnerHTML":if(Ke!=null)throw Error(M(137,t));break;default:Qt(e,t,s,Ke,i,null)}}Wn(e,C,te,ce,Le,Z,_,!1),vr(e);return;case"select":zt("invalid",e),s=Z=C=null;for(_ in i)if(i.hasOwnProperty(_)&&(te=i[_],te!=null))switch(_){case"value":C=te;break;case"defaultValue":Z=te;break;case"multiple":s=te;default:Qt(e,t,_,te,i,null)}t=C,i=Z,e.multiple=!!s,t!=null?Vi(e,!!s,t,!1):i!=null&&Vi(e,!!s,i,!0);return;case"textarea":zt("invalid",e),C=_=s=null;for(Z in i)if(i.hasOwnProperty(Z)&&(te=i[Z],te!=null))switch(Z){case"value":s=te;break;case"defaultValue":_=te;break;case"children":C=te;break;case"dangerouslySetInnerHTML":if(te!=null)throw Error(M(91));break;default:Qt(e,t,Z,te,i,null)}Dn(e,s,_,C),vr(e);return;case"option":for(ce in i)if(i.hasOwnProperty(ce)&&(s=i[ce],s!=null))switch(ce){case"selected":e.selected=s&&typeof s!="function"&&typeof s!="symbol";break;default:Qt(e,t,ce,s,i,null)}return;case"dialog":zt("beforetoggle",e),zt("toggle",e),zt("cancel",e),zt("close",e);break;case"iframe":case"object":zt("load",e);break;case"video":case"audio":for(s=0;s<tl.length;s++)zt(tl[s],e);break;case"image":zt("error",e),zt("load",e);break;case"details":zt("toggle",e);break;case"embed":case"source":case"link":zt("error",e),zt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Le in i)if(i.hasOwnProperty(Le)&&(s=i[Le],s!=null))switch(Le){case"children":case"dangerouslySetInnerHTML":throw Error(M(137,t));default:Qt(e,t,Le,s,i,null)}return;default:if(tn(t)){for(Ke in i)i.hasOwnProperty(Ke)&&(s=i[Ke],s!==void 0&&rf(e,t,Ke,s,i,void 0));return}}for(te in i)i.hasOwnProperty(te)&&(s=i[te],s!=null&&Qt(e,t,te,s,i,null))}function Od(e,t,i,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var _=null,C=null,Z=null,te=null,ce=null,Le=null,Ke=null;for(Ne in i){var Je=i[Ne];if(i.hasOwnProperty(Ne)&&Je!=null)switch(Ne){case"checked":break;case"value":break;case"defaultValue":ce=Je;default:s.hasOwnProperty(Ne)||Qt(e,t,Ne,null,s,Je)}}for(var Pe in s){var Ne=s[Pe];if(Je=i[Pe],s.hasOwnProperty(Pe)&&(Ne!=null||Je!=null))switch(Pe){case"type":C=Ne;break;case"name":_=Ne;break;case"checked":Le=Ne;break;case"defaultChecked":Ke=Ne;break;case"value":Z=Ne;break;case"defaultValue":te=Ne;break;case"children":case"dangerouslySetInnerHTML":if(Ne!=null)throw Error(M(137,t));break;default:Ne!==Je&&Qt(e,t,Pe,Ne,s,Je)}}di(e,Z,te,ce,Le,Ke,C,_);return;case"select":Ne=Z=te=Pe=null;for(C in i)if(ce=i[C],i.hasOwnProperty(C)&&ce!=null)switch(C){case"value":break;case"multiple":Ne=ce;default:s.hasOwnProperty(C)||Qt(e,t,C,null,s,ce)}for(_ in s)if(C=s[_],ce=i[_],s.hasOwnProperty(_)&&(C!=null||ce!=null))switch(_){case"value":Pe=C;break;case"defaultValue":te=C;break;case"multiple":Z=C;default:C!==ce&&Qt(e,t,_,C,s,ce)}t=te,i=Z,s=Ne,Pe!=null?Vi(e,!!i,Pe,!1):!!s!=!!i&&(t!=null?Vi(e,!!i,t,!0):Vi(e,!!i,i?[]:"",!1));return;case"textarea":Ne=Pe=null;for(te in i)if(_=i[te],i.hasOwnProperty(te)&&_!=null&&!s.hasOwnProperty(te))switch(te){case"value":break;case"children":break;default:Qt(e,t,te,null,s,_)}for(Z in s)if(_=s[Z],C=i[Z],s.hasOwnProperty(Z)&&(_!=null||C!=null))switch(Z){case"value":Pe=_;break;case"defaultValue":Ne=_;break;case"children":break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(M(91));break;default:_!==C&&Qt(e,t,Z,_,s,C)}gl(e,Pe,Ne);return;case"option":for(var bt in i)if(Pe=i[bt],i.hasOwnProperty(bt)&&Pe!=null&&!s.hasOwnProperty(bt))switch(bt){case"selected":e.selected=!1;break;default:Qt(e,t,bt,null,s,Pe)}for(ce in s)if(Pe=s[ce],Ne=i[ce],s.hasOwnProperty(ce)&&Pe!==Ne&&(Pe!=null||Ne!=null))switch(ce){case"selected":e.selected=Pe&&typeof Pe!="function"&&typeof Pe!="symbol";break;default:Qt(e,t,ce,Pe,s,Ne)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var xt in i)Pe=i[xt],i.hasOwnProperty(xt)&&Pe!=null&&!s.hasOwnProperty(xt)&&Qt(e,t,xt,null,s,Pe);for(Le in s)if(Pe=s[Le],Ne=i[Le],s.hasOwnProperty(Le)&&Pe!==Ne&&(Pe!=null||Ne!=null))switch(Le){case"children":case"dangerouslySetInnerHTML":if(Pe!=null)throw Error(M(137,t));break;default:Qt(e,t,Le,Pe,s,Ne)}return;default:if(tn(t)){for(var Jt in i)Pe=i[Jt],i.hasOwnProperty(Jt)&&Pe!==void 0&&!s.hasOwnProperty(Jt)&&rf(e,t,Jt,void 0,s,Pe);for(Ke in s)Pe=s[Ke],Ne=i[Ke],!s.hasOwnProperty(Ke)||Pe===Ne||Pe===void 0&&Ne===void 0||rf(e,t,Ke,Pe,s,Ne);return}}for(var Oe in i)Pe=i[Oe],i.hasOwnProperty(Oe)&&Pe!=null&&!s.hasOwnProperty(Oe)&&Qt(e,t,Oe,null,s,Pe);for(Je in s)Pe=s[Je],Ne=i[Je],!s.hasOwnProperty(Je)||Pe===Ne||Pe==null&&Ne==null||Qt(e,t,Je,Pe,s,Ne)}var af=null,sf=null;function _o(e){return e.nodeType===9?e:e.ownerDocument}function Mc(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Sc(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function lf(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var of=null;function Cd(){var e=window.event;return e&&e.type==="popstate"?e===of?!1:(of=e,!0):(of=null,!1)}var Tc=typeof setTimeout=="function"?setTimeout:void 0,wd=typeof clearTimeout=="function"?clearTimeout:void 0,Dc=typeof Promise=="function"?Promise:void 0,Ld=typeof queueMicrotask=="function"?queueMicrotask:typeof Dc<"u"?function(e){return Dc.resolve(null).then(e).catch(Rd)}:Tc;function Rd(e){setTimeout(function(){throw e})}function Wr(e){return e==="head"}function Oc(e,t){var i=t,s=0,_=0;do{var C=i.nextSibling;if(e.removeChild(i),C&&C.nodeType===8)if(i=C.data,i==="/$"){if(0<s&&8>s){i=s;var Z=e.ownerDocument;if(i&1&&nl(Z.documentElement),i&2&&nl(Z.body),i&4)for(i=Z.head,nl(i),Z=i.firstChild;Z;){var te=Z.nextSibling,ce=Z.nodeName;Z[Pt]||ce==="SCRIPT"||ce==="STYLE"||ce==="LINK"&&Z.rel.toLowerCase()==="stylesheet"||i.removeChild(Z),Z=te}}if(_===0){e.removeChild(C),hl(t);return}_--}else i==="$"||i==="$?"||i==="$!"?_++:s=i.charCodeAt(0)-48;else s=0;i=C}while(i);hl(t)}function uf(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var i=t;switch(t=t.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":uf(i),Hi(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function zd(e,t,i,s){for(;e.nodeType===1;){var _=i;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!s&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(s){if(!e[Pt])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(C=e.getAttribute("rel"),C==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(C!==_.rel||e.getAttribute("href")!==(_.href==null||_.href===""?null:_.href)||e.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin)||e.getAttribute("title")!==(_.title==null?null:_.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(C=e.getAttribute("src"),(C!==(_.src==null?null:_.src)||e.getAttribute("type")!==(_.type==null?null:_.type)||e.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin))&&C&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var C=_.name==null?null:""+_.name;if(_.type==="hidden"&&e.getAttribute("name")===C)return e}else return e;if(e=Sn(e.nextSibling),e===null)break}return null}function Bd(e,t,i){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=Sn(e.nextSibling),e===null))return null;return e}function ff(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function Ud(e,t){var i=e.ownerDocument;if(e.data!=="$?"||i.readyState==="complete")t();else{var s=function(){t(),i.removeEventListener("DOMContentLoaded",s)};i.addEventListener("DOMContentLoaded",s),e._reactRetry=s}}function Sn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var hf=null;function Cc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(t===0)return e;t--}else i==="/$"&&t++}e=e.previousSibling}return null}function wc(e,t,i){switch(t=_o(i),e){case"html":if(e=t.documentElement,!e)throw Error(M(452));return e;case"head":if(e=t.head,!e)throw Error(M(453));return e;case"body":if(e=t.body,!e)throw Error(M(454));return e;default:throw Error(M(451))}}function nl(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Hi(e)}var dn=new Map,Lc=new Set;function po(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var cr=F.d;F.d={f:Pd,r:Id,D:Gd,C:Nd,L:Fd,m:Wd,X:Vd,S:Hd,M:jd};function Pd(){var e=cr.f(),t=oo();return e||t}function Id(e){var t=Ht(e);t!==null&&t.tag===5&&t.type==="form"?Jf(t):cr.r(e)}var ns=typeof document>"u"?null:document;function Rc(e,t,i){var s=ns;if(s&&typeof t=="string"&&t){var _=mi(t);_='link[rel="'+e+'"][href="'+_+'"]',typeof i=="string"&&(_+='[crossorigin="'+i+'"]'),Lc.has(_)||(Lc.add(_),e={rel:e,crossOrigin:i,href:t},s.querySelector(_)===null&&(t=s.createElement("link"),Si(t,"link",e),Nt(t),s.head.appendChild(t)))}}function Gd(e){cr.D(e),Rc("dns-prefetch",e,null)}function Nd(e,t){cr.C(e,t),Rc("preconnect",e,t)}function Fd(e,t,i){cr.L(e,t,i);var s=ns;if(s&&e&&t){var _='link[rel="preload"][as="'+mi(t)+'"]';t==="image"&&i&&i.imageSrcSet?(_+='[imagesrcset="'+mi(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(_+='[imagesizes="'+mi(i.imageSizes)+'"]')):_+='[href="'+mi(e)+'"]';var C=_;switch(t){case"style":C=rs(e);break;case"script":C=as(e)}dn.has(C)||(e=m({rel:"preload",href:t==="image"&&i&&i.imageSrcSet?void 0:e,as:t},i),dn.set(C,e),s.querySelector(_)!==null||t==="style"&&s.querySelector(rl(C))||t==="script"&&s.querySelector(al(C))||(t=s.createElement("link"),Si(t,"link",e),Nt(t),s.head.appendChild(t)))}}function Wd(e,t){cr.m(e,t);var i=ns;if(i&&e){var s=t&&typeof t.as=="string"?t.as:"script",_='link[rel="modulepreload"][as="'+mi(s)+'"][href="'+mi(e)+'"]',C=_;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":C=as(e)}if(!dn.has(C)&&(e=m({rel:"modulepreload",href:e},t),dn.set(C,e),i.querySelector(_)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(al(C)))return}s=i.createElement("link"),Si(s,"link",e),Nt(s),i.head.appendChild(s)}}}function Hd(e,t,i){cr.S(e,t,i);var s=ns;if(s&&e){var _=It(s).hoistableStyles,C=rs(e);t=t||"default";var Z=_.get(C);if(!Z){var te={loading:0,preload:null};if(Z=s.querySelector(rl(C)))te.loading=5;else{e=m({rel:"stylesheet",href:e,"data-precedence":t},i),(i=dn.get(C))&&cf(e,i);var ce=Z=s.createElement("link");Nt(ce),Si(ce,"link",e),ce._p=new Promise(function(Le,Ke){ce.onload=Le,ce.onerror=Ke}),ce.addEventListener("load",function(){te.loading|=1}),ce.addEventListener("error",function(){te.loading|=2}),te.loading|=4,xo(Z,t,s)}Z={type:"stylesheet",instance:Z,count:1,state:te},_.set(C,Z)}}}function Vd(e,t){cr.X(e,t);var i=ns;if(i&&e){var s=It(i).hoistableScripts,_=as(e),C=s.get(_);C||(C=i.querySelector(al(_)),C||(e=m({src:e,async:!0},t),(t=dn.get(_))&&df(e,t),C=i.createElement("script"),Nt(C),Si(C,"link",e),i.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},s.set(_,C))}}function jd(e,t){cr.M(e,t);var i=ns;if(i&&e){var s=It(i).hoistableScripts,_=as(e),C=s.get(_);C||(C=i.querySelector(al(_)),C||(e=m({src:e,async:!0,type:"module"},t),(t=dn.get(_))&&df(e,t),C=i.createElement("script"),Nt(C),Si(C,"link",e),i.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},s.set(_,C))}}function zc(e,t,i,s){var _=(_=oe.current)?po(_):null;if(!_)throw Error(M(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(t=rs(i.href),i=It(_).hoistableStyles,s=i.get(t),s||(s={type:"style",instance:null,count:0,state:null},i.set(t,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=rs(i.href);var C=It(_).hoistableStyles,Z=C.get(e);if(Z||(_=_.ownerDocument||_,Z={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},C.set(e,Z),(C=_.querySelector(rl(e)))&&!C._p&&(Z.instance=C,Z.state.loading=5),dn.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},dn.set(e,i),C||Kd(_,e,i,Z.state))),t&&s===null)throw Error(M(528,""));return Z}if(t&&s!==null)throw Error(M(529,""));return null;case"script":return t=i.async,i=i.src,typeof i=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=as(i),i=It(_).hoistableScripts,s=i.get(t),s||(s={type:"script",instance:null,count:0,state:null},i.set(t,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(M(444,e))}}function rs(e){return'href="'+mi(e)+'"'}function rl(e){return'link[rel="stylesheet"]['+e+"]"}function Bc(e){return m({},e,{"data-precedence":e.precedence,precedence:null})}function Kd(e,t,i,s){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?s.loading=1:(t=e.createElement("link"),s.preload=t,t.addEventListener("load",function(){return s.loading|=1}),t.addEventListener("error",function(){return s.loading|=2}),Si(t,"link",i),Nt(t),e.head.appendChild(t))}function as(e){return'[src="'+mi(e)+'"]'}function al(e){return"script[async]"+e}function Uc(e,t,i){if(t.count++,t.instance===null)switch(t.type){case"style":var s=e.querySelector('style[data-href~="'+mi(i.href)+'"]');if(s)return t.instance=s,Nt(s),s;var _=m({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return s=(e.ownerDocument||e).createElement("style"),Nt(s),Si(s,"style",_),xo(s,i.precedence,e),t.instance=s;case"stylesheet":_=rs(i.href);var C=e.querySelector(rl(_));if(C)return t.state.loading|=4,t.instance=C,Nt(C),C;s=Bc(i),(_=dn.get(_))&&cf(s,_),C=(e.ownerDocument||e).createElement("link"),Nt(C);var Z=C;return Z._p=new Promise(function(te,ce){Z.onload=te,Z.onerror=ce}),Si(C,"link",s),t.state.loading|=4,xo(C,i.precedence,e),t.instance=C;case"script":return C=as(i.src),(_=e.querySelector(al(C)))?(t.instance=_,Nt(_),_):(s=i,(_=dn.get(C))&&(s=m({},i),df(s,_)),e=e.ownerDocument||e,_=e.createElement("script"),Nt(_),Si(_,"link",s),e.head.appendChild(_),t.instance=_);case"void":return null;default:throw Error(M(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(s=t.instance,t.state.loading|=4,xo(s,i.precedence,e));return t.instance}function xo(e,t,i){for(var s=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),_=s.length?s[s.length-1]:null,C=_,Z=0;Z<s.length;Z++){var te=s[Z];if(te.dataset.precedence===t)C=te;else if(C!==_)break}C?C.parentNode.insertBefore(e,C.nextSibling):(t=i.nodeType===9?i.head:i,t.insertBefore(e,t.firstChild))}function cf(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function df(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var yo=null;function Pc(e,t,i){if(yo===null){var s=new Map,_=yo=new Map;_.set(i,s)}else _=yo,s=_.get(i),s||(s=new Map,_.set(i,s));if(s.has(e))return s;for(s.set(e,null),i=i.getElementsByTagName(e),_=0;_<i.length;_++){var C=i[_];if(!(C[Pt]||C[tt]||e==="link"&&C.getAttribute("rel")==="stylesheet")&&C.namespaceURI!=="http://www.w3.org/2000/svg"){var Z=C.getAttribute(t)||"";Z=e+Z;var te=s.get(Z);te?te.push(C):s.set(Z,[C])}}return s}function Ic(e,t,i){e=e.ownerDocument||e,e.head.insertBefore(i,t==="title"?e.querySelector("head > title"):null)}function Yd(e,t,i){if(i===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Gc(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var sl=null;function Xd(){}function Zd(e,t,i){if(sl===null)throw Error(M(475));var s=sl;if(t.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&(t.state.loading&4)===0){if(t.instance===null){var _=rs(i.href),C=e.querySelector(rl(_));if(C){e=C._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(s.count++,s=bo.bind(s),e.then(s,s)),t.state.loading|=4,t.instance=C,Nt(C);return}C=e.ownerDocument||e,i=Bc(i),(_=dn.get(_))&&cf(i,_),C=C.createElement("link"),Nt(C);var Z=C;Z._p=new Promise(function(te,ce){Z.onload=te,Z.onerror=ce}),Si(C,"link",i),t.instance=C}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(t,e),(e=t.state.preload)&&(t.state.loading&3)===0&&(s.count++,t=bo.bind(s),e.addEventListener("load",t),e.addEventListener("error",t))}}function kd(){if(sl===null)throw Error(M(475));var e=sl;return e.stylesheets&&e.count===0&&gf(e,e.stylesheets),0<e.count?function(t){var i=setTimeout(function(){if(e.stylesheets&&gf(e,e.stylesheets),e.unsuspend){var s=e.unsuspend;e.unsuspend=null,s()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(i)}}:null}function bo(){if(this.count--,this.count===0){if(this.stylesheets)gf(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Eo=null;function gf(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Eo=new Map,t.forEach(Qd,e),Eo=null,bo.call(e))}function Qd(e,t){if(!(t.state.loading&4)){var i=Eo.get(e);if(i)var s=i.get(null);else{i=new Map,Eo.set(e,i);for(var _=e.querySelectorAll("link[data-precedence],style[data-precedence]"),C=0;C<_.length;C++){var Z=_[C];(Z.nodeName==="LINK"||Z.getAttribute("media")!=="not all")&&(i.set(Z.dataset.precedence,Z),s=Z)}s&&i.set(null,s)}_=t.instance,Z=_.getAttribute("data-precedence"),C=i.get(Z)||s,C===s&&i.set(null,_),i.set(Z,_),this.count++,s=bo.bind(this),_.addEventListener("load",s),_.addEventListener("error",s),C?C.parentNode.insertBefore(_,C.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(_,e.firstChild)),t.state.loading|=4}}var ll={$$typeof:f,Provider:null,Consumer:null,_currentValue:H,_currentValue2:H,_threadCount:0};function Jd(e,t,i,s,_,C,Z,te){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=We(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=We(0),this.hiddenUpdates=We(null),this.identifierPrefix=s,this.onUncaughtError=_,this.onCaughtError=C,this.onRecoverableError=Z,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=te,this.incompleteTransitions=new Map}function Nc(e,t,i,s,_,C,Z,te,ce,Le,Ke,Je){return e=new Jd(e,t,i,Z,te,ce,Le,Je),t=1,C===!0&&(t|=24),C=Ii(3,null,null,t),e.current=C,C.stateNode=e,t=Us(),t.refCount++,e.pooledCache=t,t.refCount++,C.memoizedState={element:s,isDehydrated:i,cache:t},xe(C),e}function Fc(e){return e?(e=Mr,e):Mr}function Wc(e,t,i,s,_,C){_=Fc(_),s.context===null?s.context=_:s.pendingContext=_,s=Dt(t),s.payload={element:i},C=C===void 0?null:C,C!==null&&(s.callback=C),i=ft(e,s,t),i!==null&&(Ji(i,e,t),qe(i,e,t))}function Hc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function vf(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}function Vc(e){if(e.tag===13){var t=Kt(e,67108864);t!==null&&Ji(t,e,67108864),vf(e,67108864)}}var Ao=!0;function $d(e,t,i,s){var _=G.T;G.T=null;var C=F.p;try{F.p=2,mf(e,t,i,s)}finally{F.p=C,G.T=_}}function qd(e,t,i,s){var _=G.T;G.T=null;var C=F.p;try{F.p=8,mf(e,t,i,s)}finally{F.p=C,G.T=_}}function mf(e,t,i,s){if(Ao){var _=_f(s);if(_===null)nf(e,t,s,Mo,i),Kc(e,s);else if(t0(_,e,t,i,s))s.stopPropagation();else if(Kc(e,s),t&4&&-1<e0.indexOf(e)){for(;_!==null;){var C=Ht(_);if(C!==null)switch(C.tag){case 3:if(C=C.stateNode,C.current.memoizedState.isDehydrated){var Z=me(C.pendingLanes);if(Z!==0){var te=C;for(te.pendingLanes|=2,te.entangledLanes|=2;Z;){var ce=1<<31-re(Z);te.entanglements[1]|=ce,Z&=~ce}Gn(C),(Xt&6)===0&&(so=Xe()+500,el(0))}}break;case 13:te=Kt(C,2),te!==null&&Ji(te,C,2),oo(),vf(C,2)}if(C=_f(s),C===null&&nf(e,t,s,Mo,i),C===_)break;_=C}_!==null&&s.stopPropagation()}else nf(e,t,s,null,i)}}function _f(e){return e=kr(e),pf(e)}var Mo=null;function pf(e){if(Mo=null,e=bi(e),e!==null){var t=L(e);if(t===null)e=null;else{var i=t.tag;if(i===13){if(e=B(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Mo=e,null}function jc(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(it()){case nt:return 2;case et:return 8;case $e:case Qe:return 32;case Ye:return 268435456;default:return 32}default:return 32}}var xf=!1,Hr=null,Vr=null,jr=null,ol=new Map,ul=new Map,Kr=[],e0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Kc(e,t){switch(e){case"focusin":case"focusout":Hr=null;break;case"dragenter":case"dragleave":Vr=null;break;case"mouseover":case"mouseout":jr=null;break;case"pointerover":case"pointerout":ol.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ul.delete(t.pointerId)}}function fl(e,t,i,s,_,C){return e===null||e.nativeEvent!==C?(e={blockedOn:t,domEventName:i,eventSystemFlags:s,nativeEvent:C,targetContainers:[_]},t!==null&&(t=Ht(t),t!==null&&Vc(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,_!==null&&t.indexOf(_)===-1&&t.push(_),e)}function t0(e,t,i,s,_){switch(t){case"focusin":return Hr=fl(Hr,e,t,i,s,_),!0;case"dragenter":return Vr=fl(Vr,e,t,i,s,_),!0;case"mouseover":return jr=fl(jr,e,t,i,s,_),!0;case"pointerover":var C=_.pointerId;return ol.set(C,fl(ol.get(C)||null,e,t,i,s,_)),!0;case"gotpointercapture":return C=_.pointerId,ul.set(C,fl(ul.get(C)||null,e,t,i,s,_)),!0}return!1}function Yc(e){var t=bi(e.target);if(t!==null){var i=L(t);if(i!==null){if(t=i.tag,t===13){if(t=B(i),t!==null){e.blockedOn=t,ut(e.priority,function(){if(i.tag===13){var s=Qi();s=q(s);var _=Kt(i,s);_!==null&&Ji(_,i,s),vf(i,s)}});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function So(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=_f(e.nativeEvent);if(i===null){i=e.nativeEvent;var s=new i.constructor(i.type,i);Vn=s,i.target.dispatchEvent(s),Vn=null}else return t=Ht(i),t!==null&&Vc(t),e.blockedOn=i,!1;t.shift()}return!0}function Xc(e,t,i){So(e)&&i.delete(t)}function i0(){xf=!1,Hr!==null&&So(Hr)&&(Hr=null),Vr!==null&&So(Vr)&&(Vr=null),jr!==null&&So(jr)&&(jr=null),ol.forEach(Xc),ul.forEach(Xc)}function To(e,t){e.blockedOn===t&&(e.blockedOn=null,xf||(xf=!0,k.unstable_scheduleCallback(k.unstable_NormalPriority,i0)))}var Do=null;function Zc(e){Do!==e&&(Do=e,k.unstable_scheduleCallback(k.unstable_NormalPriority,function(){Do===e&&(Do=null);for(var t=0;t<e.length;t+=3){var i=e[t],s=e[t+1],_=e[t+2];if(typeof s!="function"){if(pf(s||i)===null)continue;break}var C=Ht(i);C!==null&&(e.splice(t,3),t-=3,_u(C,{pending:!0,data:_,method:i.method,action:s},s,_))}}))}function hl(e){function t(ce){return To(ce,e)}Hr!==null&&To(Hr,e),Vr!==null&&To(Vr,e),jr!==null&&To(jr,e),ol.forEach(t),ul.forEach(t);for(var i=0;i<Kr.length;i++){var s=Kr[i];s.blockedOn===e&&(s.blockedOn=null)}for(;0<Kr.length&&(i=Kr[0],i.blockedOn===null);)Yc(i),i.blockedOn===null&&Kr.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(s=0;s<i.length;s+=3){var _=i[s],C=i[s+1],Z=_[vt]||null;if(typeof C=="function")Z||Zc(i);else if(Z){var te=null;if(C&&C.hasAttribute("formAction")){if(_=C,Z=C[vt]||null)te=Z.formAction;else if(pf(_)!==null)continue}else te=Z.action;typeof te=="function"?i[s+1]=te:(i.splice(s,3),s-=3),Zc(i)}}}function yf(e){this._internalRoot=e}Oo.prototype.render=yf.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(M(409));var i=t.current,s=Qi();Wc(i,s,e,t,null,null)},Oo.prototype.unmount=yf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Wc(e.current,2,null,e,null,null),oo(),t[ti]=null}};function Oo(e){this._internalRoot=e}Oo.prototype.unstable_scheduleHydration=function(e){if(e){var t=we();e={blockedOn:null,target:e,priority:t};for(var i=0;i<Kr.length&&t!==0&&t<Kr[i].priority;i++);Kr.splice(i,0,e),i===0&&Yc(e)}};var kc=R.version;if(kc!=="19.1.0")throw Error(M(527,kc,"19.1.0"));F.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(M(188)):(e=Object.keys(e).join(","),Error(M(268,e)));return e=b(t),e=e!==null?S(e):null,e=e===null?null:e.stateNode,e};var n0={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Co=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Co.isDisabled&&Co.supportsFiber)try{st=Co.inject(n0),Q=Co}catch{}}return reactDomClient_production.createRoot=function(e,t){if(!z(e))throw Error(M(299));var i=!1,s="",_=hh,C=ch,Z=dh,te=null;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onUncaughtError!==void 0&&(_=t.onUncaughtError),t.onCaughtError!==void 0&&(C=t.onCaughtError),t.onRecoverableError!==void 0&&(Z=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(te=t.unstable_transitionCallbacks)),t=Nc(e,1,!1,null,null,i,s,_,C,Z,te,null),e[ti]=t.current,tf(e),new yf(t)},reactDomClient_production.hydrateRoot=function(e,t,i){if(!z(e))throw Error(M(299));var s=!1,_="",C=hh,Z=ch,te=dh,ce=null,Le=null;return i!=null&&(i.unstable_strictMode===!0&&(s=!0),i.identifierPrefix!==void 0&&(_=i.identifierPrefix),i.onUncaughtError!==void 0&&(C=i.onUncaughtError),i.onCaughtError!==void 0&&(Z=i.onCaughtError),i.onRecoverableError!==void 0&&(te=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(ce=i.unstable_transitionCallbacks),i.formState!==void 0&&(Le=i.formState)),t=Nc(e,1,!0,t,i??null,s,_,C,Z,te,ce,Le),t.context=Fc(null),i=t.current,s=Qi(),s=q(s),_=Dt(s),_.callback=null,ft(i,_,s),i=s,t.current.lanes=i,rt(t,i),Gn(t),e[ti]=t.current,tf(e),new Oo(t)},reactDomClient_production.version="19.1.0",reactDomClient_production}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client.exports;hasRequiredClient=1;function k(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(k)}catch(R){console.error(R)}}return k(),client.exports=requireReactDomClient_production(),client.exports}var clientExports=requireClient(),_3Dmol$1={exports:{}};/*!
 * 3dmol v2.4.2
 * JavaScript/TypeScript molecular visualization library
 * Author: David Koes and contributors
 */var _3Dmol=_3Dmol$1.exports,hasRequired_3Dmol;function require_3Dmol(){return hasRequired_3Dmol||(hasRequired_3Dmol=1,function(module,exports){(function(R,g){module.exports=g()})(_3Dmol,()=>(()=>{var __webpack_modules__={"./node_modules/iobuffer/lib-esm/IOBuffer.js":(k,R,g)=>{g.r(R),g.d(R,{IOBuffer:()=>x});var M=g("./node_modules/iobuffer/lib-esm/text.browser.js");const z=1024*8,L=(()=>{const b=new Uint8Array(4),S=new Uint32Array(b.buffer);return!((S[0]=1)&b[0])})(),B={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class x{constructor(S=z,m={}){let T=!1;typeof S=="number"?S=new ArrayBuffer(S):(T=!0,this.lastWrittenByte=S.byteLength);const D=m.offset?m.offset>>>0:0,p=S.byteLength-D;let A=D;(ArrayBuffer.isView(S)||S instanceof x)&&(S.byteLength!==S.buffer.byteLength&&(A=S.byteOffset+D),S=S.buffer),T?this.lastWrittenByte=p:this.lastWrittenByte=0,this.buffer=S,this.length=p,this.byteLength=p,this.byteOffset=A,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,A,p),this._mark=0,this._marks=[]}available(S=1){return this.offset+S<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(S=1){return this.offset+=S,this}back(S=1){return this.offset-=S,this}seek(S){return this.offset=S,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const S=this._marks.pop();if(S===void 0)throw new Error("Mark stack empty");return this.seek(S),this}rewind(){return this.offset=0,this}ensureAvailable(S=1){if(!this.available(S)){const T=(this.offset+S)*2,D=new Uint8Array(T);D.set(new Uint8Array(this.buffer)),this.buffer=D.buffer,this.length=this.byteLength=T,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(S=1){return this.readArray(S,"uint8")}readArray(S,m){const T=B[m].BYTES_PER_ELEMENT*S,D=this.byteOffset+this.offset,p=this.buffer.slice(D,D+T);if(this.littleEndian===L&&m!=="uint8"&&m!=="int8"){const l=new Uint8Array(this.buffer.slice(D,D+T));l.reverse();const n=new B[m](l.buffer);return this.offset+=T,n.reverse(),n}const A=new B[m](p);return this.offset+=T,A}readInt16(){const S=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,S}readUint16(){const S=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,S}readInt32(){const S=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,S}readUint32(){const S=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,S}readFloat32(){const S=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,S}readFloat64(){const S=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,S}readBigInt64(){const S=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,S}readBigUint64(){const S=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,S}readChar(){return String.fromCharCode(this.readInt8())}readChars(S=1){let m="";for(let T=0;T<S;T++)m+=this.readChar();return m}readUtf8(S=1){return(0,M.decode)(this.readBytes(S))}decodeText(S=1,m="utf-8"){return(0,M.decode)(this.readBytes(S),m)}writeBoolean(S){return this.writeUint8(S?255:0),this}writeInt8(S){return this.ensureAvailable(1),this._data.setInt8(this.offset++,S),this._updateLastWrittenByte(),this}writeUint8(S){return this.ensureAvailable(1),this._data.setUint8(this.offset++,S),this._updateLastWrittenByte(),this}writeByte(S){return this.writeUint8(S)}writeBytes(S){this.ensureAvailable(S.length);for(let m=0;m<S.length;m++)this._data.setUint8(this.offset++,S[m]);return this._updateLastWrittenByte(),this}writeInt16(S){return this.ensureAvailable(2),this._data.setInt16(this.offset,S,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(S){return this.ensureAvailable(2),this._data.setUint16(this.offset,S,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(S){return this.ensureAvailable(4),this._data.setInt32(this.offset,S,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(S){return this.ensureAvailable(4),this._data.setUint32(this.offset,S,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(S){return this.ensureAvailable(4),this._data.setFloat32(this.offset,S,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(S){return this.ensureAvailable(8),this._data.setFloat64(this.offset,S,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(S){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,S,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(S){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,S,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(S){return this.writeUint8(S.charCodeAt(0))}writeChars(S){for(let m=0;m<S.length;m++)this.writeUint8(S.charCodeAt(m));return this}writeUtf8(S){return this.writeBytes((0,M.encode)(S))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}},"./node_modules/iobuffer/lib-esm/text-encoding-polyfill.js":function(){(function(k){if(k.TextEncoder&&k.TextDecoder)return!1;function R(M="utf-8"){if(M!=="utf-8")throw new RangeError(`Failed to construct 'TextEncoder': The encoding label provided ('${M}') is invalid.`)}Object.defineProperty(R.prototype,"encoding",{value:"utf-8"}),R.prototype.encode=function(M,z={stream:!1}){if(z.stream)throw new Error("Failed to encode: the 'stream' option is unsupported.");let L=0;const B=M.length;let x=0,b=Math.max(32,B+(B>>1)+7),S=new Uint8Array(b>>3<<3);for(;L<B;){let m=M.charCodeAt(L++);if(m>=55296&&m<=56319){if(L<B){const T=M.charCodeAt(L);(T&64512)===56320&&(++L,m=((m&1023)<<10)+(T&1023)+65536)}if(m>=55296&&m<=56319)continue}if(x+4>S.length){b+=8,b*=1+L/M.length*2,b=b>>3<<3;const T=new Uint8Array(b);T.set(S),S=T}if((m&4294967168)===0){S[x++]=m;continue}else if((m&4294965248)===0)S[x++]=m>>6&31|192;else if((m&4294901760)===0)S[x++]=m>>12&15|224,S[x++]=m>>6&63|128;else if((m&4292870144)===0)S[x++]=m>>18&7|240,S[x++]=m>>12&63|128,S[x++]=m>>6&63|128;else continue;S[x++]=m&63|128}return S.slice(0,x)};function g(M="utf-8",z={fatal:!1}){if(M!=="utf-8")throw new RangeError(`Failed to construct 'TextDecoder': The encoding label provided ('${M}') is invalid.`);if(z.fatal)throw new Error("Failed to construct 'TextDecoder': the 'fatal' option is unsupported.")}Object.defineProperty(g.prototype,"encoding",{value:"utf-8"}),Object.defineProperty(g.prototype,"fatal",{value:!1}),Object.defineProperty(g.prototype,"ignoreBOM",{value:!1}),g.prototype.decode=function(M,z={stream:!1}){if(z.stream)throw new Error("Failed to decode: the 'stream' option is unsupported.");const L=new Uint8Array(M);let B=0;const x=L.length,b=[];for(;B<x;){const S=L[B++];if(S===0)break;if((S&128)===0)b.push(S);else if((S&224)===192){const m=L[B++]&63;b.push((S&31)<<6|m)}else if((S&240)===224){const m=L[B++]&63,T=L[B++]&63;b.push((S&31)<<12|m<<6|T)}else if((S&248)===240){const m=L[B++]&63,T=L[B++]&63,D=L[B++]&63;let p=(S&7)<<18|m<<12|T<<6|D;p>65535&&(p-=65536,b.push(p>>>10&1023|55296),p=56320|p&1023),b.push(p)}}return String.fromCharCode.apply(null,b)},k.TextEncoder=R,k.TextDecoder=g})(typeof window<"u"?window:typeof self<"u"?self:this)},"./node_modules/iobuffer/lib-esm/text.browser.js":(k,R,g)=>{g.r(R),g.d(R,{decode:()=>M,encode:()=>L}),g("./node_modules/iobuffer/lib-esm/text-encoding-polyfill.js");function M(B,x="utf8"){return new TextDecoder(x).decode(B)}const z=new TextEncoder;function L(B){return z.encode(B)}},"./node_modules/netcdfjs/lib-esm/data.js":(k,R,g)=>{g.r(R),g.d(R,{nonRecord:()=>z,record:()=>L});var M=g("./node_modules/netcdfjs/lib-esm/types.js");function z(B,x){const b=(0,M.str2num)(x.type),S=x.size/(0,M.num2bytes)(b),m=new Array(S);for(let T=0;T<S;T++)m[T]=(0,M.readType)(B,b,1);return m}function L(B,x,b){const S=(0,M.str2num)(x.type),m=x.size?x.size/(0,M.num2bytes)(S):1,T=b.length,D=new Array(T),p=b.recordStep;if(p)for(let A=0;A<T;A++){const l=B.offset;D[A]=(0,M.readType)(B,S,m),B.seek(l+p)}else throw new Error("recordDimension.recordStep is undefined");return D}},"./node_modules/netcdfjs/lib-esm/header.js":(k,R,g)=>{g.r(R),g.d(R,{header:()=>m});var M=g("./node_modules/netcdfjs/lib-esm/types.js"),z=g("./node_modules/netcdfjs/lib-esm/utils.js");const L=0,B=10,x=11,b=12,S=0;function m(A,l){const n={version:l},a={length:A.readUint32()},u=T(A);Array.isArray(u)||(a.id=u.recordId,a.name=u.recordName,n.dimensions=u.dimensions),n.globalAttributes=D(A);const f=p(A,a==null?void 0:a.id,l);return Array.isArray(f)||(n.variables=f.variables,a.recordStep=f.recordStep),n.recordDimension=a,n}function T(A){const l={};let n,a;const u=A.readUint32();let f;if(u===L)return(0,z.notNetcdf)(A.readUint32()!==L,"wrong empty tag for list of dimensions"),[];{(0,z.notNetcdf)(u!==B,"wrong tag for list of dimensions");const d=A.readUint32();f=new Array(d);for(let r=0;r<d;r++){const o=(0,z.readName)(A),v=A.readUint32();v===S&&(n=r,a=o),f[r]={name:o,size:v}}}return n!==void 0&&(l.recordId=n),a!==void 0&&(l.recordName=a),l.dimensions=f,l}function D(A){const l=A.readUint32();let n;if(l===L)return(0,z.notNetcdf)(A.readUint32()!==L,"wrong empty tag for list of attributes"),[];{(0,z.notNetcdf)(l!==b,"wrong tag for list of attributes");const a=A.readUint32();n=new Array(a);for(let u=0;u<a;u++){const f=(0,z.readName)(A),d=A.readUint32();(0,z.notNetcdf)(d<1||d>6,`non valid type ${d}`);const r=A.readUint32(),o=(0,M.readType)(A,d,r);(0,z.padding)(A),n[u]={name:f,type:(0,M.num2str)(d),value:o}}}return n}function p(A,l,n){const a=A.readUint32();let u=0,f;if(a===L)return(0,z.notNetcdf)(A.readUint32()!==L,"wrong empty tag for list of variables"),[];{(0,z.notNetcdf)(a!==x,"wrong tag for list of variables");const d=A.readUint32();f=new Array(d);for(let r=0;r<d;r++){const o=(0,z.readName)(A),v=A.readUint32(),h=new Array(v);for(let j=0;j<v;j++)h[j]=A.readUint32();const y=D(A),E=A.readUint32();(0,z.notNetcdf)(E<1&&E>6,`non valid type ${E}`);const w=A.readUint32();let W=A.readUint32();n===2&&((0,z.notNetcdf)(W>0,"offsets larger than 4GB not supported"),W=A.readUint32());let P=!1;typeof l<"u"&&h[0]===l&&(u+=w,P=!0),f[r]={name:o,dimensions:h,attributes:y,type:(0,M.num2str)(E),size:w,offset:W,record:P}}}return{variables:f,recordStep:u}}},"./node_modules/netcdfjs/lib-esm/index.js":(k,R,g)=>{g.r(R),g.d(R,{NetCDFReader:()=>M.NetCDFReader});var M=g("./node_modules/netcdfjs/lib-esm/parser.js")},"./node_modules/netcdfjs/lib-esm/parser.js":(k,R,g)=>{g.r(R),g.d(R,{NetCDFReader:()=>b});var M=g("./node_modules/iobuffer/lib-esm/IOBuffer.js"),z=g("./node_modules/netcdfjs/lib-esm/data.js"),L=g("./node_modules/netcdfjs/lib-esm/header.js"),B=g("./node_modules/netcdfjs/lib-esm/toString.js"),x=g("./node_modules/netcdfjs/lib-esm/utils.js");class b{constructor(m){this.toString=B.toString;const T=new M.IOBuffer(m);T.setBigEndian(),(0,x.notNetcdf)(T.readChars(3)!=="CDF","should start with CDF");const D=T.readByte();(0,x.notNetcdf)(D>2,"unknown version"),this.header=(0,L.header)(T,D),this.buffer=T}get version(){return this.header.version===1?"classic format":"64-bit offset format"}get recordDimension(){return this.header.recordDimension}get dimensions(){return this.header.dimensions}get globalAttributes(){return this.header.globalAttributes}getAttribute(m){const T=this.globalAttributes.find(D=>D.name===m);return T?T.value:null}getDataVariableAsString(m){const T=this.getDataVariable(m);return T?T.join(""):null}get variables(){return this.header.variables}getDataVariable(m){let T;if(typeof m=="string"?T=this.header.variables.find(D=>D.name===m):T=m,T===void 0)throw new Error("Not a valid NetCDF v3.x file: variable not found");return this.buffer.seek(T.offset),T.record?(0,z.record)(this.buffer,T,this.header.recordDimension):(0,z.nonRecord)(this.buffer,T)}dataVariableExists(m){return this.header.variables.find(D=>D.name===m)!==void 0}attributeExists(m){return this.globalAttributes.find(D=>D.name===m)!==void 0}}},"./node_modules/netcdfjs/lib-esm/toString.js":(k,R,g)=>{g.r(R),g.d(R,{toString:()=>M});function M(){const z=[];z.push("DIMENSIONS");for(const B of this.dimensions)z.push(`  ${B.name.padEnd(30)} = size: ${B.size}`);z.push(""),z.push("GLOBAL ATTRIBUTES");for(const B of this.globalAttributes)z.push(`  ${B.name.padEnd(30)} = ${B.value}`);const L=JSON.parse(JSON.stringify(this.variables));z.push(""),z.push("VARIABLES:");for(const B of L){B.value=this.getDataVariable(B);let x=JSON.stringify(B.value);x.length>50&&(x=x.substring(0,50)),isNaN(B.value.length)||(x+=` (length: ${B.value.length})`),z.push(`  ${B.name.padEnd(30)} = ${x}`)}return z.join(`
`)}},"./node_modules/netcdfjs/lib-esm/types.js":(k,R,g)=>{g.r(R),g.d(R,{num2bytes:()=>L,num2str:()=>z,readType:()=>b,str2num:()=>B});const M={BYTE:1,CHAR:2,SHORT:3,INT:4,FLOAT:5,DOUBLE:6};function z(m){switch(Number(m)){case M.BYTE:return"byte";case M.CHAR:return"char";case M.SHORT:return"short";case M.INT:return"int";case M.FLOAT:return"float";case M.DOUBLE:return"double";default:return"undefined"}}function L(m){switch(Number(m)){case M.BYTE:return 1;case M.CHAR:return 1;case M.SHORT:return 2;case M.INT:return 4;case M.FLOAT:return 4;case M.DOUBLE:return 8;default:return-1}}function B(m){switch(String(m)){case"byte":return M.BYTE;case"char":return M.CHAR;case"short":return M.SHORT;case"int":return M.INT;case"float":return M.FLOAT;case"double":return M.DOUBLE;default:return-1}}function x(m,T){if(m!==1){const D=new Array(m);for(let p=0;p<m;p++)D[p]=T();return D}else return T()}function b(m,T,D){switch(T){case M.BYTE:return Array.from(m.readBytes(D));case M.CHAR:return S(m.readChars(D));case M.SHORT:return x(D,m.readInt16.bind(m));case M.INT:return x(D,m.readInt32.bind(m));case M.FLOAT:return x(D,m.readFloat32.bind(m));case M.DOUBLE:return x(D,m.readFloat64.bind(m));default:throw new Error(`non valid type ${T}`)}}function S(m){return m.charCodeAt(m.length-1)===0?m.substring(0,m.length-1):m}},"./node_modules/netcdfjs/lib-esm/utils.js":(k,R,g)=>{g.r(R),g.d(R,{notNetcdf:()=>M,padding:()=>z,readName:()=>L});function M(B,x){if(B)throw new TypeError(`Not a valid NetCDF v3.x file: ${x}`)}function z(B){B.offset%4!==0&&B.skip(4-B.offset%4)}function L(B){const x=B.readUint32(),b=B.readChars(x);return z(B),b}},"./src/WebGL/shaders/lib/basic/basic.frag":(k,R,g)=>{g.r(R),g.d(R,{default:()=>M});const M=`uniform mat4 viewMatrix;
uniform float opacity;
uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
varying vec3 vColor;
//DEFINEFRAGCOLOR
void main() {
    gl_FragColor = vec4( vColor, opacity );
    float depth = gl_FragCoord.z / gl_FragCoord.w;
    float fogFactor = smoothstep( fogNear, fogFar, depth );
    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
}`},"./src/WebGL/shaders/lib/basic/basic.vert":(k,R,g)=>{g.r(R),g.d(R,{default:()=>M});const M=`uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;

attribute vec3 position;
attribute vec3 color;

varying vec3 vColor;

void main() {

    vColor = color;
    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
    gl_Position = projectionMatrix * mvPosition;

}`},"./src/WebGL/shaders/lib/blur/blur.frag":(k,R,g)=>{g.r(R),g.d(R,{default:()=>M});const M=`const float INV_TOTAL_SAMPLES_FACTOR = 1.0 / 9.0;
uniform highp sampler2D inTex;
varying highp vec2 vTexCoords;
    
void main() {
 
 vec2 texelSize = 1.0 / vec2(textureSize(inTex,0));
 float blurred_visibility_factor = 0.0f;
 for (int t = -1; t <= 1; ++t) {
  for (int s = -1; s <= 1; ++s) {
   vec2 offset = vec2(float(s), float(t)) * texelSize;
   blurred_visibility_factor += texture2D(inTex, vTexCoords + offset).r;
  }
 }
    
 gl_FragDepthEXT = blurred_visibility_factor * INV_TOTAL_SAMPLES_FACTOR;
 
}`},"./src/WebGL/shaders/lib/blur/blur.vert":(k,R,g)=>{g.r(R),g.d(R,{default:()=>M});const M=`attribute vec2 vertexPosition;
varying highp vec2 vTexCoords;
const vec2 scale = vec2(0.5, 0.5);

void main() {
   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range
   gl_Position = vec4(vertexPosition, 0.0, 1.0);
}
        `},"./src/WebGL/shaders/lib/instanced/instanced.frag":(k,R,g)=>{g.r(R),g.d(R,{default:()=>M});const M=`uniform mat4 viewMatrix;
uniform float opacity;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
#ifdef SHADED
uniform highp sampler2D shading;
#endif
varying vec3 vLightFront;
varying vec3 vColor;
//DEFINEFRAGCOLOR

void main() {

    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );

    #ifndef WIREFRAME
    gl_FragColor.xyz *= vLightFront;
    #endif

#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    vColor *= shadowFactor;
#endif
    gl_FragColor = gl_FragColor * vec4( vColor, opacity );
    float depth = gl_FragCoord.z / gl_FragCoord.w;

    float fogFactor = smoothstep( fogNear, fogFar, depth );

    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );

}


`},"./src/WebGL/shaders/lib/instanced/instanced.vert":(k,R,g)=>{g.r(R),g.d(R,{default:()=>M});const M=`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 offset;
attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;
attribute float radius;

varying vec3 vColor;
varying vec3 vLightFront;

void main() {

    vColor = color;

    vec3 objectNormal = normal;
    vec3 transformedNormal = normalMatrix * objectNormal;
    vec4 mvPosition = modelViewMatrix * vec4( position * radius + offset, 1.0 );

    vLightFront = vec3( 0.0 );

    transformedNormal = normalize( transformedNormal );

    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vec3 dirVector = normalize( lDirection.xyz );
    float dotProduct = dot( transformedNormal, dirVector );
    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );

    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;

    gl_Position = projectionMatrix * mvPosition;
}

`},"./src/WebGL/shaders/lib/lambert/lambert.frag":(k,R,g)=>{g.r(R),g.d(R,{default:()=>M});const M=`uniform mat4 viewMatrix;
uniform float opacity;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
#ifdef SHADED
uniform highp sampler2D shading;
#endif
varying vec3 vLightFront;
varying vec3 vColor;
//DEFINEFRAGCOLOR

void main() {

    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );

    #ifndef WIREFRAME
    gl_FragColor.xyz *= vLightFront;
    #endif
#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    vColor *= shadowFactor;
#endif
    gl_FragColor = gl_FragColor * vec4( vColor, opacity );
    float depth = gl_FragCoord.z / gl_FragCoord.w;

    float fogFactor = smoothstep( fogNear, fogFar, depth );

    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );

}`},"./src/WebGL/shaders/lib/lambert/lambert.vert":(k,R,g)=>{g.r(R),g.d(R,{default:()=>M});const M=`
uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec3 vColor;
varying vec3 vLightFront;

void main() {

    vColor = color;

    vec3 objectNormal = normal;
    vec3 transformedNormal = normalMatrix * objectNormal;
    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );

    vLightFront = vec3( 0.0 );

    transformedNormal = normalize( transformedNormal );

    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vec3 dirVector = normalize( lDirection.xyz );
    float dotProduct = dot( transformedNormal, dirVector );
    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );

    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;

    gl_Position = projectionMatrix * mvPosition;
}`},"./src/WebGL/shaders/lib/lambertdouble/lambertdouble.frag":(k,R,g)=>{g.r(R),g.d(R,{default:()=>M});const M=`
#ifdef SHADED
uniform highp sampler2D shading;
#endif

uniform mat4 viewMatrix;
uniform float opacity;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;

varying vec3 vLightFront;
varying vec3 vLightBack;

varying vec3 vColor;


//DEFINEFRAGCOLOR

void main() {

    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );

    #ifndef WIREFRAME
    if ( gl_FrontFacing )
       gl_FragColor.xyz *= vLightFront;
    else
       gl_FragColor.xyz *= vLightBack;
    #endif

    vec3 color = vColor;
#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    color *= shadowFactor;
#endif
    gl_FragColor = gl_FragColor * vec4( color, opacity );
    float depth = gl_FragCoord.z / gl_FragCoord.w;

    float fogFactor = smoothstep( fogNear, fogFar, depth );

    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );

}


`},"./src/WebGL/shaders/lib/lambertdouble/lambertdouble.vert":(k,R,g)=>{g.r(R),g.d(R,{default:()=>M});const M=`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec3 vColor;
varying vec3 vLightFront;
varying vec3 vLightBack;

void main() {

    vColor = color;

    vec3 objectNormal = normal;
    vec3 transformedNormal = normalMatrix * objectNormal;
    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );

    vLightFront = vec3( 0.0 );
    vLightBack = vec3( 0.0 );

    transformedNormal = normalize( transformedNormal );

    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vec3 dirVector = normalize( lDirection.xyz );
    float dotProduct = dot( transformedNormal, dirVector );
    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );
    vec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );

    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;
    vLightBack += directionalLightColor[ 0 ] * directionalLightWeightingBack;

    gl_Position = projectionMatrix * mvPosition;
}

`},"./src/WebGL/shaders/lib/outline/outline.frag":(k,R,g)=>{g.r(R),g.d(R,{default:()=>M});const M=`

uniform float opacity;
uniform vec3 outlineColor;
uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
//DEFINEFRAGCOLOR

void main() {
    gl_FragColor = vec4( outlineColor, 1 );

    float depth = gl_FragCoord.z / gl_FragCoord.w;
    float fogFactor = smoothstep( fogNear, fogFar, depth );
    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );    
}


`},"./src/WebGL/shaders/lib/outline/outline.vert":(k,R,g)=>{g.r(R),g.d(R,{default:()=>M});const M=`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform float outlineWidth;
uniform float outlinePushback;
uniform float vWidth;
uniform float vHeight;
uniform float outlineMaxPixels;

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

void main() {

    vec4 norm = modelViewMatrix*vec4(normalize(normal),0.0);
    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
    mvPosition.xy += norm.xy*outlineWidth;
    vec4 outpos = projectionMatrix * mvPosition;

    if(outlineMaxPixels > 0.0) {
        vec4 unadjusted = projectionMatrix*modelViewMatrix * vec4( position, 1.0 );
        float w = outpos.w;
        //normalize homogeneous coords
        unadjusted /= unadjusted.w;
        outpos /= outpos.w;
        vec2 diff = outpos.xy-unadjusted.xy;
        //put into pixels
        diff.x *= vWidth;
        diff.y *= vHeight;
        if ( length(diff) > outlineMaxPixels) {
            vec2 ndiff = normalize(diff)*outlineMaxPixels;
            ndiff.x /= vWidth;
            ndiff.y /= vHeight;
            outpos.xy = unadjusted.xy;
            outpos.xy += ndiff;
        }
        outpos *= w; //if I don't do this things blow up
    }
    gl_Position = outpos;
    mvPosition.z -= outlinePushback; //go backwards in model space
    vec4 pushpos = projectionMatrix*mvPosition; //project to get z in projection space, I'm probably missing some simple math to do the same thing..
    gl_Position.z = gl_Position.w*pushpos.z/pushpos.w;
}

`},"./src/WebGL/shaders/lib/screen/screen.frag":(k,R,g)=>{g.r(R),g.d(R,{default:()=>M});const M=`uniform sampler2D colormap;
varying highp vec2 vTexCoords;
uniform vec2 dimensions;
//DEFINEFRAGCOLOR
void main (void) {
   gl_FragColor = texture2D(colormap, vTexCoords);

   //gl_FragColor.g = gl_FragColor.b =  gl_FragColor.r; //debug shading 
}
        `},"./src/WebGL/shaders/lib/screen/screen.vert":(k,R,g)=>{g.r(R),g.d(R,{default:()=>M});const M=`attribute vec2 vertexPosition;
varying highp vec2 vTexCoords;
const vec2 scale = vec2(0.5, 0.5);

void main() {
   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range
   gl_Position = vec4(vertexPosition, 0.0, 1.0);
}
        `},"./src/WebGL/shaders/lib/screenaa/screenaa.frag":(k,R,g)=>{g.r(R),g.d(R,{default:()=>M});const M=`uniform highp sampler2D colormap;
varying highp vec2 vTexCoords;


// Basic FXAA implementation based on the code on geeks3d.com 
#define FXAA_REDUCE_MIN (1.0/ 128.0)
#define FXAA_REDUCE_MUL (1.0 / 8.0)
#define FXAA_SPAN_MAX 8.0


vec4 applyFXAA(vec2 fragCoord, highp sampler2D tex)
{
    vec4 color;
    ivec2 dim = textureSize(tex,0);
    vec2 dimensions = vec2(float(dim.x),float(dim.y));
    vec2 inverseVP = vec2(1.0 / dimensions.x, 1.0 / dimensions.y);
    vec4 rgbNW = texture2D(tex, fragCoord + vec2(-1.0, -1.0) * inverseVP);
    vec4 rgbNE = texture2D(tex, fragCoord + vec2(1.0, -1.0) * inverseVP);
    vec4 rgbSW = texture2D(tex, fragCoord + vec2(-1.0, 1.0) * inverseVP);
    vec4 rgbSE = texture2D(tex, fragCoord + vec2(1.0, 1.0) * inverseVP);
    vec4 rgbM  = texture2D(tex, fragCoord );
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW.xyz, luma);
    float lumaNE = dot(rgbNE.xyz, luma);
    float lumaSW = dot(rgbSW.xyz, luma);
    float lumaSE = dot(rgbSE.xyz, luma);
    float lumaM  = dot(rgbM.xyz,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                        (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
            max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
            dir * rcpDirMin)) * inverseVP;

    vec4 rgbA = 0.5 * (
        texture2D(tex, fragCoord + dir * (1.0 / 3.0 - 0.5)) +
        texture2D(tex, fragCoord  + dir * (2.0 / 3.0 - 0.5)));
    vec4 rgbB = rgbA * 0.5 + 0.25 * (
        texture2D(tex, fragCoord  + dir * -0.5) +
        texture2D(tex, fragCoord  + dir * 0.5));

    float lumaB = dot(rgbB.xyz, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = rgbA;
    else
        color = rgbB;

    return color;
}


//DEFINEFRAGCOLOR
void main (void) {
    ivec2 dim = textureSize(colormap,0);

  gl_FragColor = applyFXAA(vTexCoords, colormap);
}
        `},"./src/WebGL/shaders/lib/screenaa/screenaa.vert":(k,R,g)=>{g.r(R),g.d(R,{default:()=>M});const M=`attribute vec2 vertexPosition;
varying highp vec2 vTexCoords;
const vec2 scale = vec2(0.5, 0.5);

void main() {
   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range
   gl_Position = vec4(vertexPosition, 0.0, 1.0);
}
        `},"./src/WebGL/shaders/lib/sphereimposter/sphereimposter.frag":(k,R,g)=>{g.r(R),g.d(R,{default:()=>M});const M=`
uniform mat4 viewMatrix;
uniform float opacity;
uniform mat4 projectionMatrix;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
uniform float uDepth;
uniform vec3 directionalLightColor[ 1 ];

varying vec3 vColor;
varying vec2 mapping;
varying float rval;
varying vec3 vLight;
varying vec3 center;

#ifdef SHADED
uniform highp sampler2D shading;
#endif

//DEFINEFRAGCOLOR

void main() {
    float lensqr = dot(mapping,mapping);
    float rsqr = rval*rval;
    if(lensqr > rsqr)
       discard;
    float z = sqrt(rsqr-lensqr);
    vec3 cameraPos = center+ vec3(mapping.x,mapping.y,z);
    vec4 clipPos = projectionMatrix * vec4(cameraPos, 1.0);
    float ndcDepth = clipPos.z / clipPos.w;
    gl_FragDepthEXT = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
    vec3 norm = normalize(vec3(mapping.x,mapping.y,z));
    float dotProduct = dot( norm, vLight );
    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );
    vec3 vLight = directionalLightColor[ 0 ] * directionalLightWeighting;
    vec3 color = vLight*vColor;
#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    color *= shadowFactor;
#endif    
    gl_FragColor = vec4(color, opacity*opacity );
    float fogFactor = smoothstep( fogNear, fogFar, gl_FragDepthEXT/gl_FragCoord.w );
    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
}

`},"./src/WebGL/shaders/lib/sphereimposter/sphereimposter.vert":(k,R,g)=>{g.r(R),g.d(R,{default:()=>M});const M=`uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec2 mapping;
varying vec3 vColor;
varying float rval;
varying vec3 vLight;
varying vec3 center;

void main() {

    vColor = color;
    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
    center = mvPosition.xyz;
    vec4 projPosition = projectionMatrix * mvPosition;
    vec4 adjust = projectionMatrix* vec4(normal,0.0); adjust.z = 0.0; adjust.w = 0.0;
    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vLight = normalize( lDirection.xyz );
    mapping = normal.xy;
    rval = abs(normal.x);
    gl_Position = projPosition+adjust;

}
`},"./src/WebGL/shaders/lib/sphereimposteroutline/sphereimposteroutline.frag":(k,R,g)=>{g.r(R),g.d(R,{default:()=>M});const M=`

uniform float opacity;
uniform vec3 outlineColor;
uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
uniform mat4 projectionMatrix;
varying vec2 mapping;
varying float rval;
varying vec3 center;

uniform float outlinePushback;

//DEFINEFRAGCOLOR

void main() {
    float lensqr = dot(mapping,mapping);
    float rsqr = rval*rval;
    if(lensqr > rsqr)
       discard;
    float z = sqrt(rsqr-lensqr);
    vec3 cameraPos = center+ vec3(mapping.x,mapping.y,z-outlinePushback);
    vec4 clipPos = projectionMatrix * vec4(cameraPos, 1.0);
    float ndcDepth = clipPos.z / clipPos.w;
    gl_FragDepthEXT = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
    gl_FragColor = vec4(outlineColor, 1 );
}


`},"./src/WebGL/shaders/lib/sphereimposteroutline/sphereimposteroutline.vert":(k,R,g)=>{g.r(R),g.d(R,{default:()=>M});const M=`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform float outlineWidth;
uniform float outlinePushback;
uniform float outlineMaxPixels;
uniform float vWidth;
uniform float vHeight;

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec2 mapping;
varying float rval;
varying vec3 center;

void main() {

    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
    center = mvPosition.xyz;
    vec4 projPosition = projectionMatrix * mvPosition;
    vec2 norm = normal.xy + vec2(sign(normal.x)*outlineWidth,sign(normal.y)*outlineWidth);

    vec4 adjust = projectionMatrix* vec4(norm,normal.z,1.0); 
    mapping = norm.xy;
    rval = abs(norm.x);
    gl_Position = projPosition+vec4(adjust.xy,0.0,0.0);

    if(outlineMaxPixels > 0.0) {
        vec4 unadjusted = projectionMatrix*vec4(center.x+normal.x, center.y,center.z,1.0); 
        vec4 ccoord = projectionMatrix*vec4(center.xyz,1.0);
        adjust = projectionMatrix* vec4(center.x+norm.x,center.y,center.z,1.0); 
        //subtract center 
        unadjusted.xyz -= ccoord.xyz;
        adjust.xyz -= ccoord.xyz;
        unadjusted /= unadjusted.w;
        adjust /= adjust.w;
        float diff = abs(adjust.x-unadjusted.x);
        diff *= vWidth;
        if(diff > outlineMaxPixels) {
            
            float fixlen = abs(unadjusted.x) + outlineMaxPixels/vWidth;
            //adjsut reval by ratio of lengths
            rval *= fixlen/abs(adjust.x);
        }

    }
}

`},"./src/WebGL/shaders/lib/sprite/sprite.frag":(k,R,g)=>{g.r(R),g.d(R,{default:()=>M});const M=`

uniform vec3 color;
uniform sampler2D map;
uniform float opacity;

uniform int fogType;
uniform vec3 fogColor;
uniform float fogDensity;
uniform float fogNear;
uniform float fogFar;
uniform float alphaTest;

varying vec2 vUV;
//DEFINEFRAGCOLOR

void main() {

    vec4 texture = texture2D(map, vUV);

    if (texture.a <= alphaTest) discard;

    gl_FragColor = vec4(color * texture.xyz, texture.a * opacity);

    if (fogType > 0) {

        float depth = gl_FragCoord.z / gl_FragCoord.w;
        float fogFactor = 0.0;

        if (fogType == 1) {
            fogFactor = smoothstep(fogNear, fogFar, depth);
        }

        else {
            const float LOG2 = 1.442695;
            float fogFactor = exp2(- fogDensity * fogDensity * depth * depth * LOG2);
            fogFactor = 1.0 - clamp(fogFactor, 0.0, 1.0);
        }

        gl_FragColor = mix(gl_FragColor, vec4(fogColor, gl_FragColor.w), fogFactor);

    }
}

`},"./src/WebGL/shaders/lib/sprite/sprite.vert":(k,R,g)=>{g.r(R),g.d(R,{default:()=>M});const M=`

uniform int useScreenCoordinates;
uniform vec3 screenPosition;
uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform float rotation;
uniform vec2 scale;
uniform vec2 alignment;
uniform vec2 uvOffset;
uniform vec2 uvScale;

attribute vec2 position;
attribute vec2 uv;

varying vec2 vUV;

void main() {

    vUV = uvOffset + uv * uvScale;

    vec2 alignedPosition = position + alignment;

    vec2 rotatedPosition;
    rotatedPosition.x = ( cos(rotation) * alignedPosition.x - sin(rotation) * alignedPosition.y ) * scale.x;
    rotatedPosition.y = ( sin(rotation) * alignedPosition.x + cos(rotation) * alignedPosition.y ) * scale.y;

    vec4 finalPosition;

    if(useScreenCoordinates != 0) {
        finalPosition = vec4(screenPosition.xy + rotatedPosition, screenPosition.z, 1.0);
    }

    else {
        finalPosition = projectionMatrix * modelViewMatrix * vec4(0.0, 0.0, 0.0, 1.0); finalPosition /= finalPosition.w;
        finalPosition.xy += rotatedPosition; 
    }

    gl_Position = finalPosition;

}

`},"./src/WebGL/shaders/lib/ssao/ssao.frag":(k,R,g)=>{g.r(R),g.d(R,{default:()=>M});const M=`uniform sampler2D depthmap;
varying highp vec2 vTexCoords;
uniform float vWidth;
uniform float vHeight;
uniform float total_strength;
uniform float radius;
uniform mat4 projinv;
uniform mat4 projectionMatrix;

//code for pseudorandom vector from chatgpt
float hash(vec3 p) {
    p = fract(p * vec3(0.1031, 0.1030, 0.0973));
    p += dot(p, p.yzx + 33.33);
    return fract((p.x + p.y) * p.z);
}

// Generate a pseudorandom vec3 from a seed vec3
vec3 pseudorandomVec3(vec3 seed) {
    vec3 randomVec;
    randomVec.x = hash(seed);
    randomVec.y = hash(seed + vec3(1.0, 0.0, 17.1));
    randomVec.z = hash(seed + vec3(0.0, 13.23, 0.0));
    return randomVec;
}

void main(void)
{   
   const float base = 0.2;
   const float area = 0.75;
   const int cycles = 1;

   const int samples = 64;
   vec3 sample_sphere[64] = vec3[](
      vec3(0.091258,-0.510164,0.000000),
      vec3(-0.204347,-0.872967,0.187199),
      vec3(0.009690,-0.263696,-0.110414),
      vec3(0.175208,-0.563987,0.228527),
      vec3(-0.001824,-0.003113,-0.000323),
      vec3(0.411134,-0.719869,-0.261530),
      vec3(-0.074272,-0.377368,0.276290),
      vec3(-0.147773,-0.381587,-0.284529),
      vec3(0.173317,-0.199635,0.063295),
      vec3(-0.186452,-0.199460,0.076965),
      vec3(0.143985,-0.308160,-0.307687),
      vec3(0.053194,-0.148286,0.169589),
      vec3(-0.547656,-0.486476,-0.317378),
      vec3(0.020804,-0.015092,-0.004574),
      vec3(-0.038006,-0.043165,0.054059),
      vec3(-0.094795,-0.443908,-0.731525),
      vec3(0.547552,-0.396466,0.461477),
      vec3(-0.176886,-0.089989,0.007315),
      vec3(0.074401,-0.048840,-0.074039),
      vec3(-0.008240,-0.075697,0.178197),
      vec3(-0.307880,-0.185053,-0.368943),
      vec3(0.309520,-0.108483,0.041646),
      vec3(-0.773478,-0.292946,0.538166),
      vec3(0.184487,-0.231594,-0.820065),
      vec3(0.207318,-0.100531,0.361797),
      vec3(-0.173306,-0.037737,-0.055289),
      vec3(0.548102,-0.105342,-0.253237),
      vec3(-0.119342,-0.043907,0.285162),
      vec3(-0.270247,-0.087861,-0.751357),
      vec3(0.449312,-0.039777,0.236146),
      vec3(-0.743773,-0.036095,0.196056),
      vec3(0.148819,-0.004300,-0.231448),
      vec3(0.008773,0.000809,0.051047),
      vec3(-0.461467,0.027390,-0.357386),
      vec3(0.169626,0.013338,-0.014053),
      vec3(-0.043786,0.007095,0.047331),
      vec3(0.004821,0.140371,-0.988260),
      vec3(0.092402,0.023994,0.101860),
      vec3(-0.295335,0.061530,-0.027372),
      vec3(0.024903,0.007537,-0.018901),
      vec3(-0.081463,0.125402,0.447794),
      vec3(-0.397119,0.231805,-0.631062),
      vec3(0.163853,0.059014,0.044905),
      vec3(-0.495220,0.214357,0.254139),
      vec3(0.306123,0.373687,-0.825715),
      vec3(0.021665,0.026737,0.053220),
      vec3(-0.208231,0.117129,-0.098685),
      vec3(0.139749,0.080968,-0.043086),
      vec3(-0.153599,0.182814,0.262090),
      vec3(-0.159673,0.496777,-0.743568),
      vec3(0.134797,0.117152,0.095753),
      vec3(-0.155626,0.120533,0.019395),
      vec3(0.042311,0.054462,-0.049709),
      vec3(0.001257,0.031288,0.034468),
      vec3(-0.002271,0.003199,-0.002304),
      vec3(0.662104,0.717307,0.033854),
      vec3(-0.373100,0.576021,0.308274),
      vec3(0.024233,0.231316,-0.173688),
      vec3(0.161311,0.420217,0.234273),
      vec3(-0.045248,0.078031,-0.010411),
      vec3(0.167453,0.376942,-0.094872),
      vec3(-0.056194,0.433247,0.173218),
      vec3(-0.016224,0.123149,-0.035569),
      vec3(0.067127,0.407641,0.028479)
   );

   float depth = texture2D(depthmap, vTexCoords).r;
   if(depth == 1.0) {
      discard;
   }

   vec4 screen_position = vec4(vTexCoords, depth,1.0);
   vec4 pos = projinv*screen_position;
   pos /= pos.w;
   vec3 position = pos.xyz;

   //approximate the normal from the depth map; I find this simpler
   //than trying to recompute the exact normal within every possible object shader

   //pixel offset positions in screen space
   ivec2 dim = textureSize(depthmap,0);
   vec2 offset1 = vec2(0.0,1.0/float(dim.y));
   vec2 offset2 = vec2(1.0/float(dim.x),0.0);
   float depth1 = texture2D(depthmap, vTexCoords + offset1).r;
   float depth2 = texture2D(depthmap, vTexCoords + offset2).r;
   
   vec3 p1 = vec3(screen_position.xy+offset1, depth1 - depth);
   vec3 p2 = vec3(screen_position.xy+offset2, depth2 - depth);

   //convert to model space
   vec4 pos1 = projinv*vec4(p1,1);
   pos1 /= pos1.w;
   vec4 pos2 = projinv*vec4(p2,1);
   pos2 /= pos2.w;

   vec3 normal = normalize(cross(pos1.xyz-position, pos2.xyz-position)); //model normal, important we normalize in model space

   //pseudo random number

   float occlusion = 0.0;
   for(int c = 0; c < cycles; c++) {
   vec3 random = normalize(pseudorandomVec3(position+float(c)));
   for(int i=0; i < samples; i++) {

      vec3 ray = radius * reflect(sample_sphere[i],random);
      vec3 hemi_ray = position + sign(dot(ray,normal)) * ray; //model space
      vec4 hemi_screen = projectionMatrix*vec4(hemi_ray,1.0);
      hemi_screen /= hemi_screen.w;
      
      float occ_depth = texture2D(depthmap, clamp(hemi_screen.xy,0.0,1.0)).r;
      float difference = hemi_screen.z - occ_depth;
      
      occlusion += step(0.0, difference) * (1.0-smoothstep(0.0, area, difference));
   }
   }
   float ao = 1.0 - total_strength * occlusion * (1.0 / float(cycles*samples));
   gl_FragDepthEXT = clamp(ao+base,0.0,1.0);

}`},"./src/WebGL/shaders/lib/ssao/ssao.vert":(k,R,g)=>{g.r(R),g.d(R,{default:()=>M});const M=`attribute vec2 vertexPosition;
varying highp vec2 vTexCoords;
const vec2 scale = vec2(0.5, 0.5);

void main() {
   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range
   gl_Position = vec4(vertexPosition, 0.0, 1.0);
}
        `},"./src/WebGL/shaders/lib/stickimposter/stickimposter.partial.frag":(k,R,g)=>{g.r(R),g.d(R,{default:()=>M});const M=`    float dotProduct = dot( norm, vLight );
    vec3 light = vec3( max( dotProduct, 0.0 ) );
    color *= light;
#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    color *= shadowFactor;
#endif    
    gl_FragColor = vec4(color, opacity*opacity );
    float fogFactor = smoothstep( fogNear, fogFar, depth );
    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
}`},"./src/WebGL/shaders/lib/stickimposter/stickimposter.vert":(k,R,g)=>{g.r(R),g.d(R,{default:()=>M});const M=`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;
attribute float radius;

varying vec3 vColor;
varying vec3 vLight;
varying vec3 cposition;
varying vec3 p1;
varying vec3 p2;
varying float r;

void main() {

    vColor = color; vColor.z = abs(vColor.z); //z indicates which vertex and so would vary
    r = abs(radius);
    vec4 to = modelViewMatrix*vec4(normal, 1.0); //normal is other point of cylinder
    vec4 pt = modelViewMatrix*vec4(position, 1.0);
    vec4 mvPosition = pt;
    p1 = pt.xyz; p2 = to.xyz;
    vec3 norm = to.xyz-pt.xyz;
    float mult = 1.1; //slop to account for perspective of sphere
    if(length(p1) > length(p2)) { //billboard at level of closest point
       mvPosition = to;
    }
    vec3 n = normalize(mvPosition.xyz);
    bool isperspective = (projectionMatrix[3][3] == 0.0);
//intersect with the plane defined by the camera looking at the billboard point
    if(color.z >= 0.0) { //p1
       if(isperspective) { //perspective
         vec3 pnorm = normalize(p1);
         float t = dot(mvPosition.xyz-p1,n)/dot(pnorm,n);
         mvPosition.xyz = p1+t*pnorm; 
       } else { //orthographic
         mvPosition.xyz = p1;
       }
    } else {
      if(isperspective) { //perspective
         vec3 pnorm = normalize(p2);
         float t = dot(mvPosition.xyz-p2,n)/dot(pnorm,n);
         mvPosition.xyz = p2+t*pnorm;
       } else { //orthographic
         mvPosition.xyz = p2;
       } 
       mult *= -1.0;
    }

    if(isperspective) { //perspective
      vec3 cr = normalize(cross(mvPosition.xyz,norm))*radius;
      vec3 doublecr = normalize(cross(mvPosition.xyz,cr))*radius;
      mvPosition.xyz +=  mult*(cr + doublecr).xyz;
    } else {
      vec3 cr = normalize(cross(vec3(0.0,0.0,-1.0),norm))*radius;
      vec3 doublecr = normalize(cross(vec3(0.0,0.0,-1.0),cr))*radius;
      mvPosition.xyz +=  mult*(cr + doublecr).xyz;     
    }

    cposition = mvPosition.xyz;
    gl_Position = projectionMatrix * mvPosition;
    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vLight = normalize( lDirection.xyz )*directionalLightColor[0]; //not really sure this is right, but color is always white so..
}

`},"./src/WebGL/shaders/lib/stickimposter/stickimposterFragmentShader.partial.frag":(k,R,g)=>{g.r(R),g.d(R,{default:()=>M});const M=`uniform float opacity;
uniform mat4 projectionMatrix;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;

varying vec3 vLight;
varying vec3 vColor;
varying vec3 cposition;
varying vec3 p1;
varying vec3 p2;
varying float r;

#ifdef SHADED
uniform highp sampler2D shading;
#endif

//DEFINEFRAGCOLOR

//cylinder-ray intersection testing taken from http://mrl.nyu.edu/~dzorin/cg05/lecture12.pdf
//also useful: http://stackoverflow.com/questions/9595300/cylinder-impostor-in-glsl
//with a bit more care (caps) this could be a general cylinder imposter (see also outline)
void main() {
    vec3 color = abs(vColor);
    vec3 pos = cposition;
    vec3 p = pos; //ray point
    vec3 v = vec3(0.0,0.0,-1.0); //ray normal - orthographic
    if(projectionMatrix[3][3] == 0.0) v = normalize(pos); //ray normal - perspective
    vec3 pa = p1; //cyl start
    vec3 va = normalize(p2-p1); //cyl norm
    vec3 tmp1 = v-(dot(v,va)*va);
    vec3 deltap = p-pa;
    float A = dot(tmp1,tmp1);
    if(A == 0.0) discard;
    vec3 tmp2 = deltap-(dot(deltap,va)*va);
    float B = 2.0*dot(tmp1, tmp2);
    float C = dot(tmp2,tmp2)-r*r;
//quadratic equation!
    float det = (B*B) - (4.0*A*C);
    if(det < 0.0) discard;
    float sqrtDet = sqrt(det);
    float posT = (-B+sqrtDet)/(2.0*A);
    float negT = (-B-sqrtDet)/(2.0*A);
    float intersectionT = min(posT,negT);
    vec3 qi = p+v*intersectionT;
    float dotp1 = dot(va,qi-p1);
    float dotp2 = dot(va,qi-p2);
    vec3 norm;
    if( dotp1 < 0.0 || dotp2 > 0.0) { //(p-c)^2 + 2(p-c)vt +v^2+t^2 - r^2 = 0
       vec3 cp;
       if( dotp1 < 0.0) {  
//        if(vColor.x < 0.0 ) discard; //color sign bit indicates if we should cap or not
        cp = p1;
       } else {
//          if(vColor.y < 0.0 ) discard;
          cp = p2;
       }
       vec3 diff = p-cp;
       A = dot(v,v);
       B = dot(diff,v)*2.0;
       C = dot(diff,diff)-r*r;
       det = (B*B) - (4.0*C);
       if(det < 0.0) discard;
       sqrtDet = sqrt(det);
       posT = (-B+sqrtDet)/(2.0);
       negT = (-B-sqrtDet)/(2.0);
       float t = min(posT,negT);
       qi = p+v*t; 
       norm = normalize(qi-cp); 
    } else {
       norm = normalize(qi-(dotp1*va + p1));
    }
    vec4 clipPos = projectionMatrix * vec4(qi, 1.0);
    float ndcDepth = clipPos.z / clipPos.w;
    float depth = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
    gl_FragDepthEXT = depth;`},"./src/WebGL/shaders/lib/stickimposteroutline/stickimposteroutline.vert":(k,R,g)=>{g.r(R),g.d(R,{default:()=>M});const M=`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];
uniform vec3 outlineColor;
uniform float outlineWidth;
uniform float outlinePushback;
uniform float outlineMaxPixels;
uniform float vWidth;
uniform mat4 projinv;


attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;
attribute float radius;

varying vec3 vColor;
varying vec3 vLight;
varying vec3 cposition;
varying vec3 p1;
varying vec3 p2;
varying float r;

void main() {

    vColor = outlineColor;
    float rad = radius+sign(radius)*outlineWidth;
    r = abs(rad);

    vec4 to = modelViewMatrix*vec4(normal, 1.0); //normal is other point of cylinder
    vec4 pt = modelViewMatrix*vec4(position, 1.0);
//pushback
    float scale = 1.0;
    if(projectionMatrix[3][3] != 0.0) { //orthographic
        to.z -= outlinePushback;
        pt.z -= outlinePushback;
    } else { //perspective
        vec4 midbefore = pt;
        if(length(to.xyz) < length(pt)) {
            midbefore = to;
        }
        vec4 midafter = midbefore;
        midafter.xyz += normalize(midbefore.xyz)*outlinePushback;

        to.xyz += normalize(to.xyz)*outlinePushback;
        pt.xyz += normalize(pt.xyz)*outlinePushback;

        //figure out a scaling factor for radius to account for perspective setback
        vec4 midbeforer = vec4(midbefore.x+rad,midbefore.y, midbefore.z, midbefore.w);
        vec4 midafterr = vec4(midafter.x+rad,midafter.y, midafter.z, midafter.w);

        vec4 mb = projectionMatrix*midbefore;
        vec4 mbr = projectionMatrix*midbeforer;
        vec4 ma = projectionMatrix*midafter;
        vec4 mar = projectionMatrix*midafterr;
        mb /= mb.w;
        mbr /= mbr.w;
        ma /= ma.w;
        mar /= mar.w;
        scale = abs((mbr.x-mb.x)/(mar.x-ma.x));
        rad *= scale;
        r = abs(rad);
    }
    vec4 mvPosition = pt;
    p1 = pt.xyz; p2 = to.xyz;
    vec3 norm = to.xyz-pt.xyz;
    float mult = 1.1; //slop to account for perspective of sphere
    if(length(p1) > length(p2)) { //billboard at level of closest point
       mvPosition = to;
    }

    vec3 n = normalize(mvPosition.xyz);
//intersect with the plane defined by the camera looking at the billboard point
    if(color.z >= 0.0) { //p1
       vec3 pnorm = normalize(p1);
       float t = dot(mvPosition.xyz-p1,n)/dot(pnorm,n);
       mvPosition.xyz = p1+t*pnorm;
    } else {
       vec3 pnorm = normalize(p2);
       float t = dot(mvPosition.xyz-p2,n)/dot(pnorm,n);
       mvPosition.xyz = p2+t*pnorm;
       mult *= -1.0;
    }

    if(outlineMaxPixels > 0.0) {
        vec4 cpos = mvPosition;
        vec4 unadjusted = projectionMatrix*vec4(cpos.x+abs(scale*radius), cpos.y,cpos.z,cpos.w); 
        vec4 ccoord = projectionMatrix*cpos;
        vec4 adjust = projectionMatrix*vec4(cpos.x+r,cpos.y,cpos.z,cpos.w); 
        unadjusted /= unadjusted.w;
        adjust /= adjust.w;
        unadjusted.xyz -= ccoord.xyz/ccoord.w;
        adjust.xyz -= ccoord.xyz/ccoord.w;
        float diff = abs(adjust.x-unadjusted.x);
        diff *= vWidth; //this should now be in pixels
        if(diff > outlineMaxPixels) {
            float fixlen = abs(unadjusted.x) + outlineMaxPixels/vWidth; 
            vec4 pcoord = ccoord;
            pcoord.x += fixlen*pcoord.w;
            vec4 altc = projinv*pcoord;
            r= abs(altc.x-cpos.x);
        }
    }

    vec3 cr = normalize(cross(mvPosition.xyz,norm))*rad;
    vec3 doublecr = normalize(cross(mvPosition.xyz,cr))*rad;
    mvPosition.xy +=  mult*(cr + doublecr).xy;
    cposition = mvPosition.xyz;
    gl_Position = projectionMatrix * mvPosition;
    vLight = vec3(1.0,1.0,1.0);
}

`},"./src/WebGL/shaders/lib/volumetric/volumetric.frag":(k,R,g)=>{g.r(R),g.d(R,{default:()=>M});const M=`
uniform highp sampler3D data;
uniform highp sampler2D colormap;
uniform highp sampler2D depthmap;


uniform mat4 textmat;
uniform mat4 projinv;
uniform mat4 projectionMatrix;

uniform float step;
uniform float subsamples;
uniform float maxdepth;
uniform float transfermin;
uniform float transfermax;
in  vec4 mvPosition;
out vec4 color;
void main(void) {

   vec4 pos = mvPosition;
   bool seengood = false;
   float i = 0.0;
   color = vec4(1,1,1,0);
   float increment = 1.0/subsamples;
   float maxsteps = (maxdepth*subsamples/step);
//there's probably a better way to do this..
//calculate farthest possible point in model coordinates
   vec4 maxpos = vec4(pos.x,pos.y,pos.z-maxdepth,1.0);
// convert to projection
   maxpos = projectionMatrix*maxpos;
   vec4 startp = projectionMatrix*pos;
// homogonize
   maxpos /= maxpos.w;
   startp /= startp.w;
//take x,y from start and z from max
   maxpos = vec4(startp.x,startp.y,maxpos.z,1.0);
//convert back to model space
   maxpos = projinv*maxpos;
   maxpos /= maxpos.w;
   float incr = step/subsamples;
//get depth from depthmap
//startp is apparently [-1,1]
   vec2 tpos = startp.xy/2.0+0.5;
   float depth = texture(depthmap, tpos).r;
//compute vector between start and end
   vec4 direction = maxpos-pos;
   for( i = 0.0; i <= maxsteps; i++) {
      vec4 pt = (pos+(i/maxsteps)*direction);
      vec4 ppt = projectionMatrix*pt;
      float ptdepth = ppt.z/ppt.w;
      ptdepth = ((gl_DepthRange.diff * ptdepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
      if(ptdepth > depth) break;
      pt = textmat*pt;
//       pt /= pt.w;
      if(pt.x >= -0.01 && pt.y >= -0.01 && pt.z >= -0.01 && pt.x <= 1.01 && pt.y <= 1.01 && pt.z <= 1.01) {
         seengood = true;
      } else if(seengood) {
         break;
      }
      if( pt.x < -0.01 || pt.x > 1.01 || pt.y < -0.01 || pt.y > 1.01 || pt.z < -0.01 || pt.z > 1.01  ){
          color.a = 0.0;
          continue;
      }
      else {
         float val = texture(data, pt.zyx).r;
         if(isinf(val)) continue; //masked out
         float cval = (val-transfermin)/(transfermax-transfermin); //scale to texture 0-1 range
         vec4 val_color = texture(colormap, vec2(cval,0.5));
         color.rgb = color.rgb*color.a + (1.0-color.a)*val_color.a*val_color.rgb;
         color.a += (1.0 - color.a) * val_color.a; 
         if(color.a > 0.0) color.rgb /= color.a;
//          color = vec4(pt.x, pt.y, pt.z, 1.0);
      }
//       color = vec4(pt.x, pt.y, pt.z, 0.0)
    }
}

        `},"./src/WebGL/shaders/lib/volumetric/volumetric.vert":(k,R,g)=>{g.r(R),g.d(R,{default:()=>M});const M=`uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;

in vec3 position;
out vec4 mvPosition;
void main() {

    mvPosition = modelViewMatrix * vec4( position, 1.0 );
    gl_Position = projectionMatrix*mvPosition;
}
`},"./src/GLDraw.ts":(k,R,g)=>{g.r(R),g.d(R,{CAP:()=>z,GLDraw:()=>L});var M=g("./src/WebGL/math/index.ts"),z;(function(B){B[B.NONE=0]="NONE",B[B.FLAT=1]="FLAT",B[B.ROUND=2]="ROUND"})(z||(z={}));var L;(function(B){function x(l,n,a){var u=Math.hypot(l,n),f,d,r,o,v;u<1e-4?(d=0,r=1):(d=-l/u,r=n/u),n=-d*l+r*n,f=Math.hypot(n,a),f<1e-4?(o=0,v=1):(o=a/f,v=n/f);var h=new Float32Array(9);return h[0]=r,h[1]=d,h[2]=0,h[3]=-d*v,h[4]=r*v,h[5]=o,h[6]=d*o,h[7]=-r*o,h[8]=v,h}class b{constructor(){this.cache={};let n=[],a=4,u=Math.pow(2,a),f=2,d=Math.pow(2,f),r=u/d,o;for(n[0]=new M.Vector3(-1,0,0),n[r]=new M.Vector3(0,0,1),n[r*2]=new M.Vector3(1,0,0),n[r*3]=new M.Vector3(0,0,-1),f=3;f<=a;f++){for(d=Math.pow(2,f-1),r=u/d,o=0;o<d-1;o++)n[r/2+o*r]=n[o*r].clone().add(n[(o+1)*r]).normalize();o=d-1,n[r/2+o*r]=n[o*r].clone().add(n[0]).normalize()}this.basisVectors=n}getVerticesForRadius(n,a,u){if(typeof this.cache<"u"&&this.cache[n]!==void 0&&this.cache[n][a+u]!==void 0)return this.cache[n][a+u];for(var f=this.basisVectors.length,d=[],r=[],o,v=0;v<f;v++)d.push(this.basisVectors[v].clone().multiplyScalar(n)),d.push(this.basisVectors[v].clone().multiplyScalar(n)),o=this.basisVectors[v].clone().normalize(),r.push(o),r.push(o);var h=[],y=10,E=f,w=0,W=Math.PI*2,P=0,j=Math.PI,V,G,F=!1,H=!1;for(G=0;G<=y;G++){F=G===0||G===y,H=G===y/2;var K=[],U=[];for(V=0;V<=E;V++){if(H){var N=V<E?2*V:0;U.push(N+1),K.push(N);continue}var Y=V/E,ne=G/y;if(!F||V===0)if(V<E){var ae=new M.Vector3;ae.x=-n*Math.cos(w+Y*W)*Math.sin(P+ne*j),a==1?ae.y=0:ae.y=n*Math.cos(P+ne*j),ae.z=n*Math.sin(w+Y*W)*Math.sin(P+ne*j),Math.abs(ae.x)<1e-5&&(ae.x=0),Math.abs(ae.y)<1e-5&&(ae.y=0),Math.abs(ae.z)<1e-5&&(ae.z=0),a==z.FLAT?(o=new M.Vector3(0,Math.cos(P+ne*j),0),o.normalize()):(o=new M.Vector3(ae.x,ae.y,ae.z),o.normalize()),d.push(ae),r.push(o),K.push(d.length-1)}else K.push(d.length-E);else F&&K.push(d.length-1)}H&&h.push(U),h.push(K)}var he={vertices:d,normals:r,verticesRows:h,w:E,h:y};return n in this.cache||(this.cache[n]={}),this.cache[n][a+u]=he,he}}var S=new b;function m(l,n,a,u,f,d=0,r=0){if(!n||!a)return;let o=function(we){if(typeof we=="string"){let ut=we;return ut.toLowerCase()=="flat"?z.FLAT:ut.toLowerCase()=="round"?z.ROUND:z.NONE}else return we};d=o(d),r=o(r);var v=r||d;f=f||{r:0,g:0,b:0};var h=x(a.x-n.x,a.y-n.y,a.z-n.z),y=S.getVerticesForRadius(u,r,"to"),E=y.w,w=y.h,W=v?w*E+2:2*E,P=l.updateGeoGroup(W),j=y.vertices,V=y.normals,G=y.verticesRows,F=G[w/2],H=G[w/2+1],K=P.vertices,U,N,Y,ne,ae,he,oe=P.vertexArray,pe=P.normalArray,ue=P.colorArray,ge=P.faceArray;for(Y=0;Y<E;++Y){var Fe=2*Y;ne=h[0]*j[Fe].x+h[3]*j[Fe].y+h[6]*j[Fe].z,ae=h[1]*j[Fe].x+h[4]*j[Fe].y+h[7]*j[Fe].z,he=h[5]*j[Fe].y+h[8]*j[Fe].z,U=3*(K+Fe),N=P.faceidx,oe[U]=ne+n.x,oe[U+1]=ae+n.y,oe[U+2]=he+n.z,oe[U+3]=ne+a.x,oe[U+4]=ae+a.y,oe[U+5]=he+a.z,pe[U]=ne,pe[U+3]=ne,pe[U+1]=ae,pe[U+4]=ae,pe[U+2]=he,pe[U+5]=he,ue[U]=f.r,ue[U+3]=f.r,ue[U+1]=f.g,ue[U+4]=f.g,ue[U+2]=f.b,ue[U+5]=f.b,ge[N]=H[Y]+K,ge[N+1]=H[Y+1]+K,ge[N+2]=F[Y]+K,ge[N+3]=F[Y]+K,ge[N+4]=H[Y+1]+K,ge[N+5]=F[Y+1]+K,P.faceidx+=6}if(v){var Be=r?0:w/2,ke=d?w+1:w/2+1,be,fe,De,Ve,Xe,it,nt,et,$e,Qe,Ye,Ge,ot,st,Q,ee,re,Se,ve,je,Ie,J,me,Te,He,_e,Ue,$,We,rt,I,Ae;for(ae=Be;ae<ke;ae++)if(ae!==w/2){var Ee=ae<=w/2?a:n,q=S.getVerticesForRadius(u,r,"to"),de=S.getVerticesForRadius(u,d,"from");for(Ee===a?(j=q.vertices,V=q.normals,G=q.verticesRows):Ee==n&&(j=de.vertices,V=de.normals,G=de.verticesRows),ne=0;ne<E;ne++)N=P.faceidx,be=G[ae][ne+1],We=(be+K)*3,fe=G[ae][ne],rt=(fe+K)*3,De=G[ae+1][ne],I=(De+K)*3,Ve=G[ae+1][ne+1],Ae=(Ve+K)*3,Xe=h[0]*j[be].x+h[3]*j[be].y+h[6]*j[be].z,it=h[0]*j[fe].x+h[3]*j[fe].y+h[6]*j[fe].z,nt=h[0]*j[De].x+h[3]*j[De].y+h[6]*j[De].z,et=h[0]*j[Ve].x+h[3]*j[Ve].y+h[6]*j[Ve].z,$e=h[1]*j[be].x+h[4]*j[be].y+h[7]*j[be].z,Qe=h[1]*j[fe].x+h[4]*j[fe].y+h[7]*j[fe].z,Ye=h[1]*j[De].x+h[4]*j[De].y+h[7]*j[De].z,Ge=h[1]*j[Ve].x+h[4]*j[Ve].y+h[7]*j[Ve].z,ot=h[5]*j[be].y+h[8]*j[be].z,st=h[5]*j[fe].y+h[8]*j[fe].z,Q=h[5]*j[De].y+h[8]*j[De].z,ee=h[5]*j[Ve].y+h[8]*j[Ve].z,oe[We]=Xe+Ee.x,oe[rt]=it+Ee.x,oe[I]=nt+Ee.x,oe[Ae]=et+Ee.x,oe[We+1]=$e+Ee.y,oe[rt+1]=Qe+Ee.y,oe[I+1]=Ye+Ee.y,oe[Ae+1]=Ge+Ee.y,oe[We+2]=ot+Ee.z,oe[rt+2]=st+Ee.z,oe[I+2]=Q+Ee.z,oe[Ae+2]=ee+Ee.z,ue[We]=f.r,ue[rt]=f.r,ue[I]=f.r,ue[Ae]=f.r,ue[We+1]=f.g,ue[rt+1]=f.g,ue[I+1]=f.g,ue[Ae+1]=f.g,ue[We+2]=f.b,ue[rt+2]=f.b,ue[I+2]=f.b,ue[Ae+2]=f.b,re=h[0]*V[be].x+h[3]*V[be].y+h[6]*V[be].z,Se=h[0]*V[fe].x+h[3]*V[fe].y+h[6]*V[fe].z,ve=h[0]*V[De].x+h[3]*V[De].y+h[6]*V[De].z,je=h[0]*V[Ve].x+h[3]*V[Ve].y+h[6]*V[Ve].z,Ie=h[1]*V[be].x+h[4]*V[be].y+h[7]*V[be].z,J=h[1]*V[fe].x+h[4]*V[fe].y+h[7]*V[fe].z,me=h[1]*V[De].x+h[4]*V[De].y+h[7]*V[De].z,Te=h[1]*V[Ve].x+h[4]*V[Ve].y+h[7]*V[Ve].z,He=h[5]*V[be].y+h[8]*V[be].z,_e=h[5]*V[fe].y+h[8]*V[fe].z,Ue=h[5]*V[De].y+h[8]*V[De].z,$=h[5]*V[Ve].y+h[8]*V[Ve].z,ae===0?(pe[We]=re,pe[I]=ve,pe[Ae]=je,pe[We+1]=Ie,pe[I+1]=me,pe[Ae+1]=Te,pe[We+2]=He,pe[I+2]=Ue,pe[Ae+2]=$,ge[N]=be+K,ge[N+1]=De+K,ge[N+2]=Ve+K,P.faceidx+=3):ae===ke-1?(pe[We]=re,pe[rt]=Se,pe[I]=ve,pe[We+1]=Ie,pe[rt+1]=J,pe[I+1]=me,pe[We+2]=He,pe[rt+2]=_e,pe[I+2]=Ue,ge[N]=be+K,ge[N+1]=fe+K,ge[N+2]=De+K,P.faceidx+=3):(pe[We]=re,pe[rt]=Se,pe[Ae]=je,pe[We+1]=Ie,pe[rt+1]=J,pe[Ae+1]=Te,pe[We+2]=He,pe[rt+2]=_e,pe[Ae+2]=$,pe[rt]=Se,pe[I]=ve,pe[Ae]=je,pe[rt+1]=J,pe[I+1]=me,pe[Ae+1]=Te,pe[rt+2]=_e,pe[I+2]=Ue,pe[Ae+2]=$,ge[N]=be+K,ge[N+1]=fe+K,ge[N+2]=Ve+K,ge[N+3]=fe+K,ge[N+4]=De+K,ge[N+5]=Ve+K,P.faceidx+=6)}}P.vertices+=W}B.drawCylinder=m;function T(l,n,a,u,f){if(!n||!a)return;f=f||{r:0,g:0,b:0};let d=new M.Vector3(a.x-n.x,a.y-n.y,a.z-n.z);var r=x(d.x,d.y,d.z);d=d.normalize();var o=S.basisVectors.length,v=S.basisVectors,h=o+2,y=l.updateGeoGroup(h),E=y.vertices,w,W,P,j,V,G,F=y.vertexArray,H=y.normalArray,K=y.colorArray,U=y.faceArray;for(w=E*3,F[w]=n.x,F[w+1]=n.y,F[w+2]=n.z,H[w]=-d.x,H[w+1]=-d.y,H[w+2]=-d.z,K[w]=f.r,K[w+1]=f.g,K[w+2]=f.b,F[w+3]=a.x,F[w+4]=a.y,F[w+5]=a.z,H[w+3]=d.x,H[w+4]=d.y,H[w+5]=d.z,K[w+3]=f.r,K[w+4]=f.g,K[w+5]=f.b,w+=6,P=0;P<o;++P){var N=v[P].clone();N.multiplyScalar(u),j=r[0]*N.x+r[3]*N.y+r[6]*N.z,V=r[1]*N.x+r[4]*N.y+r[7]*N.z,G=r[5]*N.y+r[8]*N.z,F[w]=j+n.x,F[w+1]=V+n.y,F[w+2]=G+n.z,H[w]=j,H[w+1]=V,H[w+2]=G,K[w]=f.r,K[w+1]=f.g,K[w+2]=f.b,w+=3}for(y.vertices+=o+2,W=y.faceidx,P=0;P<o;P++){var Y=E+2+P,ne=E+2+(P+1)%o;U[W]=Y,U[W+1]=ne,U[W+2]=E,W+=3,U[W]=Y,U[W+1]=ne,U[W+2]=E+1,W+=3}y.faceidx+=6*o}B.drawCone=T;class D{constructor(){this.cache=new Map}getVerticesForRadius(n,a){a=a||2,this.cache.has(a)||this.cache.set(a,new Map);let u=this.cache.get(a);if(u.has(n))return u.get(n);var f={vertices:[],verticesRows:[],normals:[]},d=16*a,r=10*a;n<1&&(d=10*a,r=8*a);var o=0,v=Math.PI*2,h=0,y=Math.PI,E,w;for(w=0;w<=r;w++){let P=[];for(E=0;E<=d;E++){let j=E/d,V=w/r,G=-n*Math.cos(o+j*v)*Math.sin(h+V*y),F=n*Math.cos(h+V*y),H=n*Math.sin(o+j*v)*Math.sin(h+V*y);var W=new M.Vector3(G,F,H);W.normalize(),f.vertices.push({x:G,y:F,z:H}),f.normals.push(W),P.push(f.vertices.length-1)}f.verticesRows.push(P)}return u.set(n,f),f}}var p=new D;function A(l,n,a,u,f){var d=p.getVerticesForRadius(a,f),r=d.vertices,o=d.normals,v=l.updateGeoGroup(r.length),h=v.vertices,y=v.vertexArray,E=v.colorArray,w=v.faceArray,W=v.lineArray,P=v.normalArray;for(let G=0,F=r.length;G<F;++G){let H=3*(h+G),K=r[G];y[H]=K.x+n.x,y[H+1]=K.y+n.y,y[H+2]=K.z+n.z,E[H]=u.r,E[H+1]=u.g,E[H+2]=u.b}v.vertices+=r.length;let j=d.verticesRows,V=j.length-1;for(let G=0;G<V;G++){let F=j[G].length-1;for(let H=0;H<F;H++){let K=v.faceidx,U=v.lineidx,N=j[G][H+1]+h,Y=N*3,ne=j[G][H]+h,ae=ne*3,he=j[G+1][H]+h,oe=he*3,pe=j[G+1][H+1]+h,ue=pe*3,ge=o[N-h],Fe=o[ne-h],Be=o[he-h],ke=o[pe-h];Math.abs(r[N-h].y)===a?(P[Y]=ge.x,P[oe]=Be.x,P[ue]=ke.x,P[Y+1]=ge.y,P[oe+1]=Be.y,P[ue+1]=ke.y,P[Y+2]=ge.z,P[oe+2]=Be.z,P[ue+2]=ke.z,w[K]=N,w[K+1]=he,w[K+2]=pe,W[U]=N,W[U+1]=he,W[U+2]=N,W[U+3]=pe,W[U+4]=he,W[U+5]=pe,v.faceidx+=3,v.lineidx+=6):Math.abs(r[he-h].y)===a?(P[Y]=ge.x,P[ae]=Fe.x,P[oe]=Be.x,P[Y+1]=ge.y,P[ae+1]=Fe.y,P[oe+1]=Be.y,P[Y+2]=ge.z,P[ae+2]=Fe.z,P[oe+2]=Be.z,w[K]=N,w[K+1]=ne,w[K+2]=he,W[U]=N,W[U+1]=ne,W[U+2]=N,W[U+3]=he,W[U+4]=ne,W[U+5]=he,v.faceidx+=3,v.lineidx+=6):(P[Y]=ge.x,P[ae]=Fe.x,P[ue]=ke.x,P[Y+1]=ge.y,P[ae+1]=Fe.y,P[ue+1]=ke.y,P[Y+2]=ge.z,P[ae+2]=Fe.z,P[ue+2]=ke.z,P[ae]=Fe.x,P[oe]=Be.x,P[ue]=ke.x,P[ae+1]=Fe.y,P[oe+1]=Be.y,P[ue+1]=ke.y,P[ae+2]=Fe.z,P[oe+2]=Be.z,P[ue+2]=ke.z,w[K]=N,w[K+1]=ne,w[K+2]=pe,w[K+3]=ne,w[K+4]=he,w[K+5]=pe,W[U]=N,W[U+1]=ne,W[U+2]=N,W[U+3]=pe,W[U+4]=ne,W[U+5]=he,W[U+6]=he,W[U+7]=pe,v.faceidx+=6,v.lineidx+=8)}}}B.drawSphere=A})(L||(L={}))},"./src/GLModel.ts":(k,R,g)=>{g.r(R),g.d(R,{GLModel:()=>A});var M=g("./src/WebGL/index.ts"),z=g("./src/WebGL/shapes/index.ts"),L=g("./src/WebGL/math/index.ts"),B=g("./src/colors.ts"),x=g("./src/GLDraw.ts"),b=g("./src/glcartoon.ts"),S=g("./src/utilities.ts"),m=g("./src/Gradient.ts"),T=g("./src/parsers/index.ts"),D=g("./node_modules/netcdfjs/lib-esm/index.js"),p=g("./src/parsers/utils/assignBonds.ts");class A{static sameObj(n,a){return n&&a?JSON.stringify(n)==JSON.stringify(a):n==a}constructor(n,a){this.atoms=[],this.frames=[],this.box=null,this.atomdfs=null,this.id=0,this.hidden=!1,this.molObj=null,this.renderedMolObj=null,this.lastColors=null,this.modelData={},this.modelDatas=null,this.idMatrix=new L.Matrix4,this.dontDuplicateAtoms=!0,this.defaultColor=B.elementColors.defaultColor,this.defaultStickRadius=.25,this.options=a||{},this.ElementColors=this.options.defaultcolors?this.options.defaultcolors:B.elementColors.defaultColors,this.defaultSphereRadius=this.options.defaultSphereRadius?this.options.defaultSphereRadius:1.5,this.defaultCartoonQuality=this.options.cartoonQuality?this.options.cartoonQuality:10,this.id=n}getRadiusFromStyle(n,a){var u=this.defaultSphereRadius;if(typeof a.radius<"u")u=a.radius;else if(A.vdwRadii[n.elem])u=A.vdwRadii[n.elem];else if(n.elem.length>1){let f=n.elem;f=f[0].toUpperCase()+f[1].toLowerCase(),A.vdwRadii[f]&&(u=A.vdwRadii[f])}return typeof a.scale<"u"&&(u*=a.scale),u}drawAtomCross(n,a){if(n.style.cross){var u=n.style.cross;if(!u.hidden){var f=u.linewidth||A.defaultlineWidth;a[f]||(a[f]=new M.Geometry);var d=a[f].updateGeoGroup(6),r=this.getRadiusFromStyle(n,u),o=[[r,0,0],[-r,0,0],[0,r,0],[0,-r,0],[0,0,r],[0,0,-r]],v=n.clickable||n.hoverable;v&&n.intersectionShape===void 0&&(n.intersectionShape={sphere:[],cylinder:[],line:[]});for(var h=(0,S.getColorFromStyle)(n,u),y=d.vertexArray,E=d.colorArray,w=0;w<6;w++){var W=d.vertices*3;if(d.vertices++,y[W]=n.x+o[w][0],y[W+1]=n.y+o[w][1],y[W+2]=n.z+o[w][2],E[W]=h.r,E[W+1]=h.g,E[W+2]=h.b,v){var P=new L.Vector3(o[w][0],o[w][1],o[w][2]);P.multiplyScalar(.1),P.set(P.x+n.x,P.y+n.y,P.z+n.z),n.intersectionShape.line.push(P)}}}}}getGoodCross(n,a,u,f){for(var d=null,r=-1,o=0,v=n.bonds.length;o<v;o++)if(n.bonds[o]!=a.index){let y=n.bonds[o],E=this.atoms[y],W=new L.Vector3(E.x,E.y,E.z).clone();W.sub(u);let P=W.clone();P.cross(f);var h=P.lengthSq();if(h>r&&(r=h,d=P,r>.1))return d}return d}getSideBondV(n,a,u){var f,d,r,o,v,h=new L.Vector3(n.x,n.y,n.z),y=new L.Vector3(a.x,a.y,a.z),E=y.clone(),w=null;if(E.sub(h),n.bonds.length===1)a.bonds.length===1?(w=E.clone(),Math.abs(w.x)>1e-4?w.y+=1:w.x+=1):(f=(u+1)%a.bonds.length,d=a.bonds[f],r=this.atoms[d],r.index==n.index&&(f=(f+1)%a.bonds.length,d=a.bonds[f],r=this.atoms[d]),o=new L.Vector3(r.x,r.y,r.z),v=o.clone(),v.sub(h),w=v.clone(),w.cross(E));else if(w=this.getGoodCross(n,a,h,E),w.lengthSq()<.01){var W=this.getGoodCross(a,n,h,E);W!=null&&(w=W)}return w.lengthSq()<.01&&(w=E.clone(),Math.abs(w.x)>1e-4?w.y+=1:w.x+=1),w.cross(E),w.normalize(),w}addLine(n,a,u,f,d,r){n[u]=f.x,n[u+1]=f.y,n[u+2]=f.z,a[u]=r.r,a[u+1]=r.g,a[u+2]=r.b,n[u+3]=d.x,n[u+4]=d.y,n[u+5]=d.z,a[u+3]=r.r,a[u+4]=r.g,a[u+5]=r.b}drawBondLines(n,a,u){if(n.style.line){var f=n.style.line;if(!f.hidden){var d,r,o,v,h=f.linewidth||A.defaultlineWidth;u[h]||(u[h]=new M.Geometry);for(var y=u[h].updateGeoGroup(6*n.bonds.length),E=y.vertexArray,w=y.colorArray,W=0;W<n.bonds.length;W++){var P=n.bonds[W],j=a[P];if(j.style.line&&!(n.index>=j.index)){var V=new L.Vector3(n.x,n.y,n.z),G=new L.Vector3(j.x,j.y,j.z),F=V.clone().add(G).multiplyScalar(.5),H=!1,K=n.clickable||n.hoverable,U=j.clickable||j.hoverable;(K||U)&&(K&&(n.intersectionShape===void 0&&(n.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),n.intersectionShape.line.push(V),n.intersectionShape.line.push(F)),U&&(j.intersectionShape===void 0&&(j.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),j.intersectionShape.line.push(F),j.intersectionShape.line.push(G)));var N=(0,S.getColorFromStyle)(n,n.style.line),Y=(0,S.getColorFromStyle)(j,j.style.line);if(n.bondStyles&&n.bondStyles[W]){var ne=n.bondStyles[W];if(!ne.iswire)continue;ne.singleBond&&(H=!0),typeof ne.color1<"u"&&(N=B.CC.color(ne.color1)),typeof ne.color2<"u"&&(Y=B.CC.color(ne.color2))}var ae=y.vertices*3,he,oe;if(n.bondOrder[W]>1&&n.bondOrder[W]<4&&!H){var pe=this.getSideBondV(n,j,W),ue=G.clone();ue.sub(V),n.bondOrder[W]==2?(pe.multiplyScalar(.1),d=V.clone(),d.add(pe),r=V.clone(),r.sub(pe),o=d.clone(),o.add(ue),v=r.clone(),v.add(ue),N==Y?(y.vertices+=4,this.addLine(E,w,ae,d,o,N),this.addLine(E,w,ae+6,r,v,N)):(y.vertices+=8,ue.multiplyScalar(.5),he=d.clone(),he.add(ue),oe=r.clone(),oe.add(ue),this.addLine(E,w,ae,d,he,N),this.addLine(E,w,ae+6,he,o,Y),this.addLine(E,w,ae+12,r,oe,N),this.addLine(E,w,ae+18,oe,v,Y))):n.bondOrder[W]==3&&(pe.multiplyScalar(.1),d=V.clone(),d.add(pe),r=V.clone(),r.sub(pe),o=d.clone(),o.add(ue),v=r.clone(),v.add(ue),N==Y?(y.vertices+=6,this.addLine(E,w,ae,V,G,N),this.addLine(E,w,ae+6,d,o,N),this.addLine(E,w,ae+12,r,v,N)):(y.vertices+=12,ue.multiplyScalar(.5),he=d.clone(),he.add(ue),oe=r.clone(),oe.add(ue),this.addLine(E,w,ae,V,F,N),this.addLine(E,w,ae+6,F,G,Y),this.addLine(E,w,ae+12,d,he,N),this.addLine(E,w,ae+18,he,o,Y),this.addLine(E,w,ae+24,r,oe,N),this.addLine(E,w,ae+30,oe,v,Y)))}else N==Y?(y.vertices+=2,this.addLine(E,w,ae,V,G,N)):(y.vertices+=4,this.addLine(E,w,ae,V,F,N),this.addLine(E,w,ae+6,F,G,Y))}}}}}drawAtomSphere(n,a){if(n.style.sphere){var u=n.style.sphere;if(!u.hidden){var f=(0,S.getColorFromStyle)(n,u),d=this.getRadiusFromStyle(n,u);if((n.clickable===!0||n.hoverable)&&n.intersectionShape!==void 0){var r=new L.Vector3(n.x,n.y,n.z);n.intersectionShape.sphere.push(new z.Sphere(r,d))}x.GLDraw.drawSphere(a,n,d,f)}}}drawAtomClickSphere(n){if(n.style.clicksphere){var a=n.style.clicksphere;if(!a.hidden){var u=this.getRadiusFromStyle(n,a);if((n.clickable===!0||n.hoverable)&&n.intersectionShape!==void 0){var f=new L.Vector3(n.x,n.y,n.z);n.intersectionShape.sphere.push(new z.Sphere(f,u))}}}}drawAtomInstanced(n,a){if(n.style.sphere){var u=n.style.sphere;if(!u.hidden){var f=this.getRadiusFromStyle(n,u),d=(0,S.getColorFromStyle)(n,u),r=a.updateGeoGroup(1),o=r.vertices,v=o*3,h=r.vertexArray,y=r.colorArray,E=r.radiusArray;if(h[v]=n.x,h[v+1]=n.y,h[v+2]=n.z,y[v]=d.r,y[v+1]=d.g,y[v+2]=d.b,E[o]=f,(n.clickable===!0||n.hoverable)&&n.intersectionShape!==void 0){var w=new L.Vector3(n.x,n.y,n.z);n.intersectionShape.sphere.push(new z.Sphere(w,f))}r.vertices+=1}}}drawSphereImposter(n,a,u,f){var d=n.updateGeoGroup(4),r,o=d.vertices,v=o*3,h=d.vertexArray,y=d.colorArray;for(r=0;r<4;r++)h[v+3*r]=a.x,h[v+3*r+1]=a.y,h[v+3*r+2]=a.z;var E=d.normalArray;for(r=0;r<4;r++)y[v+3*r]=f.r,y[v+3*r+1]=f.g,y[v+3*r+2]=f.b;E[v+0]=-u,E[v+1]=u,E[v+2]=0,E[v+3]=-u,E[v+4]=-u,E[v+5]=0,E[v+6]=u,E[v+7]=-u,E[v+8]=0,E[v+9]=u,E[v+10]=u,E[v+11]=0,d.vertices+=4;var w=d.faceArray,W=d.faceidx;w[W+0]=o,w[W+1]=o+1,w[W+2]=o+2,w[W+3]=o+2,w[W+4]=o+3,w[W+5]=o,d.faceidx+=6}drawAtomImposter(n,a){if(n.style.sphere){var u=n.style.sphere;if(!u.hidden){var f=this.getRadiusFromStyle(n,u),d=(0,S.getColorFromStyle)(n,u);if((n.clickable===!0||n.hoverable)&&n.intersectionShape!==void 0){var r=new L.Vector3(n.x,n.y,n.z);n.intersectionShape.sphere.push(new z.Sphere(r,f))}this.drawSphereImposter(a,n,f,d)}}}calculateDashes(n,a,u,f,d){var r=Math.sqrt(Math.pow(n.x-a.x,2)+Math.pow(n.y-a.y,2)+Math.pow(n.z-a.z,2));u=Math.max(u,0),d=Math.max(d,0)+2*u,f=Math.max(f,.001),f+d>r&&(f=r,d=0);var o=Math.floor((r-f)/(f+d))+1,v=o*f;d=(r-v)/o;for(var h,y=new L.Vector3(n.x,n.y,n.z),E=new L.Vector3((a.x-n.x)/(r/d),(a.y-n.y)/(r/d),(a.z-n.z)/(r/d)),w=new L.Vector3((a.x-n.x)/(r/f),(a.y-n.y)/(r/f),(a.z-n.z)/(r/f)),W=[],P=0;P<o;P++)h=new L.Vector3(y.x+w.x,y.y+w.y,y.z+w.z),W.push({from:y,to:h}),y=new L.Vector3(h.x+E.x,h.y+E.y,h.z+E.z);return W}static drawStickImposter(n,a,u,f,d,r=0,o=0){for(var v=n.updateGeoGroup(4),h=v.vertices,y=h*3,E=v.vertexArray,w=v.colorArray,W=v.radiusArray,P=v.normalArray,j=d.r,V=d.g,G=d.b,F=function(Y){var ne=-Y;return ne==0&&(ne=-1e-4),ne},H=y,K=0;K<4;K++)E[H]=a.x,P[H]=u.x,w[H]=j,H++,E[H]=a.y,P[H]=u.y,w[H]=V,H++,E[H]=a.z,P[H]=u.z,K<2?w[H]=G:w[H]=F(G),H++;v.vertices+=4,W[h]=-f,W[h+1]=f,W[h+2]=-f,W[h+3]=f;var U=v.faceArray,N=v.faceidx;U[N+0]=h,U[N+1]=h+1,U[N+2]=h+2,U[N+3]=h+2,U[N+4]=h+3,U[N+5]=h,v.faceidx+=6}drawBondSticks(n,a,u){var f,d;if(n.style.stick){var r=n.style.stick;if(!r.hidden){var o=r.radius||this.defaultStickRadius,v=r.doubleBondScaling||.4,h=r.tripleBondScaling||.25,y=((f=r.dashedBondConfig)===null||f===void 0?void 0:f.dashLength)||.1,E=((d=r.dashedBondConfig)===null||d===void 0?void 0:d.gapLength)||.25,w=o,W=r.singleBonds||!1,P=r.dashedBonds||!1,j=0,V=0,G,F,H,K,U,N,Y,ne,ae,he,oe,pe=(0,S.getColorFromStyle)(n,r),ue,ge,Fe;!n.capDrawn&&n.bonds.length<4&&(j=2);var Be=me=>{var Te=u.imposter?A.drawStickImposter:x.GLDraw.drawCylinder;return!P&&me>=1?Te:(He,_e,Ue,$,We,rt=0,I=0,Ae=.1,Ee=.25)=>{var q=this.calculateDashes(_e,Ue,$,Ae,Ee);q.forEach(de=>{Te(He,de.from,de.to,$,We,rt,I)})}};for(H=0;H<n.bonds.length;H++){var ke=Be(n.bondOrder[H]),be=n.bonds[H],fe=a[be];if(ue=ge=Fe=null,n.index<fe.index){var De=fe.style;if(!De.stick||De.stick.hidden)continue;var Ve=(0,S.getColorFromStyle)(fe,De.stick);if(w=o,K=W,n.bondStyles&&n.bondStyles[H]){if(U=n.bondStyles[H],U.iswire)continue;U.radius&&(w=U.radius),U.singleBond&&(K=!0),typeof U.color1<"u"&&(pe=B.CC.color(U.color1)),typeof U.color2<"u"&&(Ve=B.CC.color(U.color2))}var Xe=new L.Vector3(n.x,n.y,n.z),it=new L.Vector3(fe.x,fe.y,fe.z);if(n.bondOrder[H]<=1||K||n.bondOrder[H]>3){if(n.bondOrder[H]<1&&(w*=n.bondOrder[H]),!fe.capDrawn&&fe.bonds.length<4&&(V=2),pe!=Ve?(ue=new L.Vector3().addVectors(Xe,it).multiplyScalar(.5),ke(u,Xe,ue,w,pe,j,0,y,E),ke(u,ue,it,w,Ve,0,V,y,E)):ke(u,Xe,it,w,pe,j,V,y,E),G=n.clickable||n.hoverable,F=fe.clickable||fe.hoverable,G||F){if(ue||(ue=new L.Vector3().addVectors(Xe,it).multiplyScalar(.5)),G){var nt=new z.Cylinder(Xe,ue,w),et=new z.Sphere(Xe,w);n.intersectionShape.cylinder.push(nt),n.intersectionShape.sphere.push(et)}if(F){var $e=new z.Cylinder(it,ue,w),Qe=new z.Sphere(it,w);fe.intersectionShape.cylinder.push($e),fe.intersectionShape.sphere.push(Qe)}}}else if(n.bondOrder[H]>1){var Ye=0,Ge=0;w!=o&&(Ye=2,Ge=2);var ot=it.clone(),st=null;ot.sub(Xe);var Q,ee,re,Se,ve;st=this.getSideBondV(n,fe,H),n.bondOrder[H]==2?(Q=w*v,st.multiplyScalar(Q*1.5),ee=Xe.clone(),ee.add(st),re=Xe.clone(),re.sub(st),Se=ee.clone(),Se.add(ot),ve=re.clone(),ve.add(ot),pe!=Ve?(ue=new L.Vector3().addVectors(ee,Se).multiplyScalar(.5),ge=new L.Vector3().addVectors(re,ve).multiplyScalar(.5),ke(u,ee,ue,Q,pe,Ye,0),ke(u,ue,Se,Q,Ve,0,Ge),ke(u,re,ge,Q,pe,Ye,0),ke(u,ge,ve,Q,Ve,0,Ge)):(ke(u,ee,Se,Q,pe,Ye,Ge),ke(u,re,ve,Q,pe,Ye,Ge)),G=n.clickable||n.hoverable,F=fe.clickable||fe.hoverable,(G||F)&&(ue||(ue=new L.Vector3().addVectors(ee,Se).multiplyScalar(.5)),ge||(ge=new L.Vector3().addVectors(re,ve).multiplyScalar(.5)),G&&(N=new z.Cylinder(ee,ue,Q),Y=new z.Cylinder(re,ge,Q),n.intersectionShape.cylinder.push(N),n.intersectionShape.cylinder.push(Y)),F&&(ae=new z.Cylinder(Se,ue,Q),he=new z.Cylinder(ve,ge,Q),fe.intersectionShape.cylinder.push(ae),fe.intersectionShape.cylinder.push(he)))):n.bondOrder[H]==3&&(Q=w*h,st.cross(ot),st.normalize(),st.multiplyScalar(Q*3),ee=Xe.clone(),ee.add(st),re=Xe.clone(),re.sub(st),Se=ee.clone(),Se.add(ot),ve=re.clone(),ve.add(ot),pe!=Ve?(ue=new L.Vector3().addVectors(ee,Se).multiplyScalar(.5),ge=new L.Vector3().addVectors(re,ve).multiplyScalar(.5),Fe=new L.Vector3().addVectors(Xe,it).multiplyScalar(.5),ke(u,ee,ue,Q,pe,Ye,0),ke(u,ue,Se,Q,Ve,0,Ge),ke(u,Xe,Fe,Q,pe,j,0),ke(u,Fe,it,Q,Ve,0,V),ke(u,re,ge,Q,pe,Ye,0),ke(u,ge,ve,Q,Ve,0,Ge)):(ke(u,ee,Se,Q,pe,Ye,Ge),ke(u,Xe,it,Q,pe,j,V),ke(u,re,ve,Q,pe,Ye,Ge)),G=n.clickable||n.hoverable,F=fe.clickable||fe.hoverable,(G||F)&&(ue||(ue=new L.Vector3().addVectors(ee,Se).multiplyScalar(.5)),ge||(ge=new L.Vector3().addVectors(re,ve).multiplyScalar(.5)),Fe||(Fe=new L.Vector3().addVectors(Xe,it).multiplyScalar(.5)),G&&(N=new z.Cylinder(ee.clone(),ue.clone(),Q),Y=new z.Cylinder(re.clone(),ge.clone(),Q),ne=new z.Cylinder(Xe.clone(),Fe.clone(),Q),n.intersectionShape.cylinder.push(N),n.intersectionShape.cylinder.push(Y),n.intersectionShape.cylinder.push(ne)),F&&(ae=new z.Cylinder(Se.clone(),ue.clone(),Q),he=new z.Cylinder(ve.clone(),ge.clone(),Q),oe=new z.Cylinder(it.clone(),Fe.clone(),Q),fe.intersectionShape.cylinder.push(ae),fe.intersectionShape.cylinder.push(he),fe.intersectionShape.cylinder.push(oe))))}}}var je=!1,Ie=0,J=!1;for(H=0;H<n.bonds.length;H++)K=W,n.bondStyles&&n.bondStyles[H]&&(U=n.bondStyles[H],U.singleBond&&(K=!0),U.radius&&U.radius!=o&&(J=!0)),(K||n.bondOrder[H]==1)&&Ie++;J?Ie>0&&(je=!0):Ie==0&&(n.bonds.length>0||r.showNonBonded)&&(je=!0),je&&(w=o,u.imposter?this.drawSphereImposter(u.sphereGeometry,n,w,pe):x.GLDraw.drawSphere(u,n,w,pe))}}}createMolObj(n,a){a=a||{};var u=new M.Object3D,f=[],d={},r={},o=this.drawAtomSphere,v=null,h=null;a.supportsImposters?(o=this.drawAtomImposter,v=new M.Geometry(!0),v.imposter=!0,h=new M.Geometry(!0,!0),h.imposter=!0,h.sphereGeometry=new M.Geometry(!0),h.sphereGeometry.imposter=!0,h.drawnCaps={}):a.supportsAIA?(o=this.drawAtomInstanced,v=new M.Geometry(!1,!0,!0),v.instanced=!0,h=new M.Geometry(!0)):(v=new M.Geometry(!0),h=new M.Geometry(!0));var y,E,w,W,P={},j=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(y=0,w=n.length;y<w;y++){var V=n[y];if(V&&V.style){(V.clickable||V.hoverable)&&V.intersectionShape===void 0&&(V.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),W={line:void 0,cross:void 0,stick:void 0,sphere:void 0};for(E in W)V.style[E]?V.style[E].opacity?W[E]=parseFloat(V.style[E].opacity):W[E]=1:W[E]=void 0,P[E]?W[E]!=null&&P[E]!=W[E]&&(console.log("Warning: "+E+" opacity is ambiguous"),P[E]=1):P[E]=W[E];o.call(this,V,v),this.drawAtomClickSphere(V),this.drawAtomCross(V,r),this.drawBondLines(V,n,d),this.drawBondSticks(V,n,h),typeof V.style.cartoon<"u"&&!V.style.cartoon.hidden&&(V.style.cartoon.color==="spectrum"&&typeof V.resi=="number"&&!V.hetflag&&(V.resi<j[0]&&(j[0]=V.resi),V.resi>j[1]&&(j[1]=V.resi)),f.push(V))}}if(f.length>0&&(0,b.drawCartoon)(u,f,j,this.defaultCartoonQuality),v&&v.vertices>0){v.initTypedArrays();var G=null,F=null;v.imposter?G=new M.SphereImposterMaterial({ambient:0,vertexColors:!0,reflectivity:0}):v.instanced?(F=new M.Geometry(!0),x.GLDraw.drawSphere(F,{x:0,y:0,z:0},1,new B.Color(.5,.5,.5)),F.initTypedArrays(),G=new M.InstancedMaterial({sphereMaterial:new M.MeshLambertMaterial({ambient:0,vertexColors:!0,reflectivity:0}),sphere:F})):G=new M.MeshLambertMaterial({ambient:0,vertexColors:!0,reflectivity:0}),P.sphere<1&&P.sphere>=0&&(G.transparent=!0,G.opacity=P.sphere),F=new M.Mesh(v,G),u.add(F)}if(h.vertices>0){var H=null,K=null,U=h.sphereGeometry;(!U||typeof U.vertices>"u"||U.vertices==0)&&(U=null),h.initTypedArrays(),U&&U.initTypedArrays();var N={ambient:0,vertexColors:!0,reflectivity:0};h.imposter?(H=new M.StickImposterMaterial(N),K=new M.SphereImposterMaterial(N)):(H=new M.MeshLambertMaterial(N),K=new M.MeshLambertMaterial(N),H.wireframe&&(h.setUpWireframe(),U&&U.setUpWireframe())),P.stick<1&&P.stick>=0&&(H.transparent=!0,H.opacity=P.stick,K.transparent=!0,K.opacity=P.stick);var Y=new M.Mesh(h,H);if(u.add(Y),U){var ne=new M.Mesh(U,K);u.add(ne)}}var ae;for(y in d)if(d.hasOwnProperty(y)){ae=y;var he=new M.LineBasicMaterial({linewidth:ae,vertexColors:!0});P.line<1&&P.line>=0&&(he.transparent=!0,he.opacity=P.line),d[y].initTypedArrays();var oe=new M.Line(d[y],he,M.LineStyle.LinePieces);u.add(oe)}for(y in r)if(r.hasOwnProperty(y)){ae=y;var pe=new M.LineBasicMaterial({linewidth:ae,vertexColors:!0});P.cross<1&&P.cross>=0&&(pe.transparent=!0,pe.opacity=P.cross),r[y].initTypedArrays();var ue=new M.Line(r[y],pe,M.LineStyle.LinePieces);u.add(ue)}if(this.dontDuplicateAtoms&&this.modelData.symmetries&&this.modelData.symmetries.length>0){var ge=new M.Object3D,Fe;for(Fe=0;Fe<this.modelData.symmetries.length;Fe++){var Be=new M.Object3D;Be=u.clone(),Be.matrix.copy(this.modelData.symmetries[Fe]),Be.matrixAutoUpdate=!1,ge.add(Be)}return ge}return u}getInternalState(){return{atoms:this.atoms,frames:this.frames}}setInternalState(n){this.atoms=n.atoms,this.frames=n.frames,this.molObj=null}getCrystData(){if(this.modelData.cryst){if(!this.modelData.cryst.matrix){const n=this.modelData.cryst;this.modelData.cryst.matrix=(0,L.conversionMatrix3)(n.a,n.b,n.c,n.alpha,n.beta,n.gamma)}return this.modelData.cryst}else return null}setCrystData(n,a,u,f,d,r){n=n||1,a=a||1,u=u||1,f=f||90,d=d||90,r=r||90;const o=(0,L.conversionMatrix3)(n,a,u,f,d,r);this.modelData.cryst={a:n,b:a,c:u,alpha:f,beta:d,gamma:r,matrix:o}}setCrystMatrix(n){n=n||new L.Matrix3(1,0,0,0,1,0,0,0,1),this.modelData.cryst={matrix:n}}getSymmetries(){return typeof this.modelData.symmetries>"u"&&(this.modelData.symmetries=[this.idMatrix]),this.modelData.symmetries}setSymmetries(n){typeof n>"u"?this.modelData.symmetries=[this.idMatrix]:this.modelData.symmetries=n}getID(){return this.id}getNumFrames(){return this.frames.numFrames!=null?this.frames.numFrames:this.frames.length}adjustCoord(n,a,u,f){var d=a-n;return d<-u?a+f:d>u?a-f:a}adjustCoordinatesToBox(){if(this.box&&this.atomdfs)for(var n=this.box[0],a=this.box[1],u=this.box[2],f=n*.9,d=a*.9,r=u*.9,o=0;o<this.atomdfs.length;o++)for(var v=this.atomdfs[o],h=1;h<v.length;h++){var y=this.atoms[v[h][0]],E=this.atoms[v[h][1]];y.x=this.adjustCoord(E.x,y.x,f,n),y.y=this.adjustCoord(E.y,y.y,d,a),y.z=this.adjustCoord(E.z,y.z,r,u)}}setFrame(n,a){var u=this.getNumFrames();let f=this;return new Promise(function(d,r){if(u==0&&d(),(n<0||n>=u)&&(n=u-1),f.frames.url!=null){var o=f.frames.url;(0,S.getbin)(o+"/traj/frame/"+n+"/"+f.frames.path,void 0,"POST",void 0).then(function(v){for(var h=new Float32Array(v,44),y=0,E=0;E<f.atoms.length;E++)f.atoms[E].x=h[y++],f.atoms[E].y=h[y++],f.atoms[E].z=h[y++];f.box&&f.atomdfs&&f.adjustCoordinatesToBox(),d()}).catch(r)}else f.atoms=f.frames[n],d();f.molObj=null,f.modelDatas&&n<f.modelDatas.length&&(f.modelData=f.modelDatas[n],f.unitCellObjects&&a&&(a.removeUnitCell(f),a.addUnitCell(f)))})}addFrame(n){this.frames.push(n)}vibrate(n=10,a=1,u=!1,f,d){var r=0,o=n;u&&(r=-n,o=n),this.frames!==void 0&&this.frames.origIndex!==void 0?this.setFrame(this.frames.origIndex):this.setFrame(0),r<o&&(this.frames=[]),u&&(this.frames.origIndex=n);for(var v=r;v<o;v++){var h=[],y=this.frames.length;if(v==0&&!d){this.frames.push(this.atoms);continue}for(var E=0;E<this.atoms.length;E++){var w=(0,S.getAtomProperty)(this.atoms[E],"dx"),W=(0,S.getAtomProperty)(this.atoms[E],"dy"),P=(0,S.getAtomProperty)(this.atoms[E],"dz"),j=new L.Vector3(w,W,P),V=new L.Vector3(this.atoms[E].x,this.atoms[E].y,this.atoms[E].z),G=v*a/n;j.multiplyScalar(G),V.add(j);var F={};for(var H in this.atoms[E])F[H]=this.atoms[E][H];if(F.x=V.x,F.y=V.y,F.z=V.z,h.push(F),f&&d){var K=(0,S.extend)({},d),U=new L.Vector3(w,W,P);if(U.multiplyScalar(a),U.add(V),K.start=V,K.end=U,K.frame=y,!K.color){var N=F.style.sphere;N||(N=F.style.stick),N||(N=F.style.line),K.color=(0,S.getColorFromStyle)(F,N)}f.addArrow(K)}}this.frames.push(h)}}setAtomDefaults(n){for(let a=0;a<n.length;a++){let u=n[a];u&&(u.style=u.style||(0,S.deepCopy)(A.defaultAtomStyle),u.color=u.color||this.ElementColors[u.elem]||this.defaultColor,u.model=this.id,(u.clickable||u.hoverable)&&(u.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}))}}addMolData(n,a,u={}){var f=A.parseMolData(n,a,u);this.dontDuplicateAtoms=!u.duplicateAssemblyAtoms;var d=f.modelData;if(d&&(Array.isArray(d)?(this.modelData=d[0],u.frames&&(this.modelDatas=d)):this.modelData=d),f.box?this.box=f.box:this.box=null,this.frames.length==0){for(let o=0;o<f.length;o++)f[o].length!=0&&this.frames.push(f[o]);this.frames[0]&&(this.atoms=this.frames[0])}else if(u.frames)for(let o=0;o<f.length;o++)this.frames.push(f[o]);else for(var r=0;r<f.length;r++)this.addAtoms(f[r]);for(let o=0;o<this.frames.length;o++)this.setAtomDefaults(this.frames[o]);u.vibrate&&u.vibrate.frames&&u.vibrate.amplitude&&this.vibrate(u.vibrate.frames,u.vibrate.amplitude),u.style&&this.setStyle({},u.style)}setDontDuplicateAtoms(n){this.dontDuplicateAtoms=n}setModelData(n){this.modelData=n}propertyMatches(n,a){if(n==a)return!0;if(typeof a=="string"&&typeof n=="number"){var u=a.match(/(-?\d+)\s*-\s*(-?\d+)/);if(u){var f=parseInt(u[1]),d=parseInt(u[2]);if(u&&n>=f&&n<=d)return!0}}return!1}static deepCopyAndCache(n,a){if(typeof n!="object"||n==null||n.__cache_created)return n;const u={};for(const f in n){const d=n[f];if(Array.isArray(d)){u[f]=[];for(let r=0;r<d.length;r++)u[f].push(A.deepCopyAndCache(d[r],a))}else typeof d=="object"&&f!="properties"&&f!="model"?u[f]=A.deepCopyAndCache(d,a):u[f]=d;if(f=="and"||f=="or"){const r=[];for(const o of u[f]){const v=new Set;for(const h of a.selectedAtoms(o))v.add(h.index);r.push(v)}if(f=="and"){const o=function(h,y){const E=new Set;for(const w of y)h.has(w)&&E.add(w);return E};let v=new Set(r[0]);for(const h of r.splice(1))v=o(v,h);u[f].__cached_results=v}else if(f=="or"){const o=new Set;for(const v of r)for(const h of v)o.add(h);u[f].__cached_results=o}}}return u.__cache_created=!0,u}atomIsSelected(n,a){if(typeof a>"u")return!0;var u=!!a.invert,f=!0;for(var d in a)if(d=="and"||d=="or"||d=="not"){if(d=="not"){if(this.atomIsSelected(n,a[d])){f=!1;break}}else if(a[d].__cached_results===void 0&&(a=A.deepCopyAndCache(a,this)),f=a[d].__cached_results.has(n.index),!f)break}else if(d==="predicate"){if(!a.predicate(n)){f=!1;break}}else if(d=="properties"&&n[d]){for(var r in a.properties)if(!r.startsWith("__cache")){if(typeof n.properties[r]>"u"){f=!1;break}if(n.properties[r]!=a.properties[r]){f=!1;break}}}else if(a.hasOwnProperty(d)&&!A.ignoredKeys.has(d)&&!d.startsWith("__cache")){if(typeof n[d]>"u"){f=!1;break}var o=!1;if(d==="bonds"){var v=a[d];if(v!=n.bonds.length){f=!1;break}}else if(Array.isArray(a[d])){var h=a[d],y=n[d];for(let E=0;E<h.length;E++)if(this.propertyMatches(y,h[E])){o=!0;break}if(!o){f=!1;break}}else{let E=a[d];if(!this.propertyMatches(n[d],E)){f=!1;break}}}return u?!f:f}static squaredDistance(n,a){var u=a.x-n.x,f=a.y-n.y,d=a.z-n.z;return u*u+f*f+d*d}expandAtomList(n,a){if(a<=0)return n;for(var u=(0,S.getExtent)(n,void 0),f=[[],[],[]],d=0;d<3;d++)f[0][d]=u[0][d]-a,f[1][d]=u[1][d]+a,f[2][d]=u[2][d];var r=[];for(let y=0;y<this.atoms.length;y++){var o=this.atoms[y].x,v=this.atoms[y].y,h=this.atoms[y].z;o>=f[0][0]&&o<=f[1][0]&&v>=f[0][1]&&v<=f[1][1]&&h>=f[0][2]&&h<=f[1][2]&&(o>=u[0][0]&&o<=u[1][0]&&v>=u[0][1]&&v<=u[1][1]&&h>=u[0][2]&&h<=u[1][2]||r.push(this.atoms[y]))}return r}static getFloat(n){return typeof n=="number"?n:parseFloat(n)}selectedAtoms(n,a){var u=[];n=A.deepCopyAndCache(n||{},this),a||(a=this.atoms);for(var f=a.length,d=0;d<f;d++){var r=a[d];r&&this.atomIsSelected(r,n)&&u.push(r)}if(n.hasOwnProperty("expand")){const F=A.getFloat(n.expand);let H=this.expandAtomList(u,F),K=u.length;const U=F*F;for(let N=0;N<H.length;N++)for(let Y=0;Y<K;Y++){var o=A.squaredDistance(H[N],u[Y]);o<U&&o>0&&u.push(H[N])}}if(n.hasOwnProperty("within")&&n.within.hasOwnProperty("sel")&&n.within.hasOwnProperty("distance")){var v=this.selectedAtoms(n.within.sel,this.atoms),h={};const F=A.getFloat(n.within.distance),H=F*F;for(let K=0;K<v.length;K++)for(let U=0;U<u.length;U++){let N=A.squaredDistance(v[K],u[U]);N<H&&N>0&&(h[U]=1)}var y=[];if(n.within.invert)for(let K=0;K<u.length;K++)h[K]||y.push(u[K]);else for(let K in h)y.push(u[K]);u=y}if(n.hasOwnProperty("byres")){var E={},w=[],W=[];for(let F=0;F<u.length;F++){let H=u[F];var P=H.chain,j=H.resi;if(E[P]===void 0&&(E[P]={}),H.hasOwnProperty("resi")&&E[P][j]===void 0){for(E[P][j]=!0,W.push(H);W.length>0;)if(H=W.pop(),P=H.chain,j=H.resi,w[H.index]===void 0){w[H.index]=!0;for(var V=0;V<H.bonds.length;V++){var G=this.atoms[H.bonds[V]];w[G.index]===void 0&&G.hasOwnProperty("resi")&&G.chain==P&&G.resi==j&&(W.push(G),u.push(G))}}}}}return u}addAtoms(n){this.molObj=null;var a=this.atoms.length,u=[],f;for(f=0;f<n.length;f++)typeof n[f].index>"u"&&(n[f].index=f),typeof n[f].serial>"u"&&(n[f].serial=f),u[n[f].index]=a+f;for(f=0;f<n.length;f++){var d=n[f],r=u[d.index],o=(0,S.extend)({},d);o.index=r,o.bonds=[],o.bondOrder=[],o.model=this.id,o.style=o.style||(0,S.deepCopy)(A.defaultAtomStyle),typeof o.color>"u"&&(o.color=this.ElementColors[o.elem]||this.defaultColor);for(var v=d.bonds?d.bonds.length:0,h=0;h<v;h++){var y=u[d.bonds[h]];typeof y<"u"&&(o.bonds.push(y),o.bondOrder.push(d.bondOrder?d.bondOrder[h]:1))}this.atoms.push(o)}}assignBonds(){(0,p.assignBonds)(this.atoms,{assignBonds:!0})}removeAtoms(n){this.molObj=null;var a=[],u;for(u=0;u<n.length;u++)a[n[u].index]=!0;var f=[];for(u=0;u<this.atoms.length;u++){var d=this.atoms[u];a[d.index]||f.push(d)}this.atoms=[],this.addAtoms(f)}setStyle(n,a,u){typeof a>"u"&&typeof u>"u"&&(a=n,n={}),n=n,typeof a=="string"&&(a=(0,S.specStringToObject)(a));var f=!1,d=this,r=function(v){var h=d.selectedAtoms(n,v);for(let y=0;y<v.length;y++)v[y]&&(v[y].capDrawn=!1);for(let y=0;y<h.length;y++){f=!0,(h[y].clickable||h[y].hoverable)&&(h[y].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),u||(h[y].style={});for(let E in a)a.hasOwnProperty(E)&&(h[y].style[E]=h[y].style[E]||{},Object.assign(h[y].style[E],a[E]))}};if(n.frame!==void 0&&n.frame<this.frames.length){let v=n.frame;v<0&&(v=this.frames.length+v),r(this.frames[v])}else{r(this.atoms);for(var o=0;o<this.frames.length;o++)this.frames[o]!==this.atoms&&r(this.frames[o])}f&&(this.molObj=null)}setClickable(n,a,u){if(a=!!a,u=(0,S.makeFunction)(u),u===null){console.log("Callback is not a function");return}var f=this.selectedAtoms(n,this.atoms),d=f.length;for(let r=0;r<d;r++)f[r].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},f[r].clickable=a,u&&(f[r].callback=u);d>0&&(this.molObj=null)}setHoverable(n,a,u,f){if(a=!!a,u=(0,S.makeFunction)(u),f=(0,S.makeFunction)(f),u===null){console.log("Hover_callback is not a function");return}if(f===null){console.log("Unhover_callback is not a function");return}var d=this.selectedAtoms(n,this.atoms),r=d.length;for(let o=0;o<r;o++)d[o].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},d[o].hoverable=a,u&&(d[o].hover_callback=u),f&&(d[o].unhover_callback=f);r>0&&(this.molObj=null)}enableContextMenu(n,a){a=!!a;var u,f=this.selectedAtoms(n,this.atoms),d=f.length;for(u=0;u<d;u++)f[u].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},f[u].contextMenuEnabled=a;d>0&&(this.molObj=null)}setColorByElement(n,a){if(!(this.molObj!==null&&A.sameObj(a,this.lastColors))){this.lastColors=a;var u=this.selectedAtoms(n,u);u.length>0&&(this.molObj=null);for(var f=0;f<u.length;f++){var d=u[f];typeof a[d.elem]<"u"&&(d.color=a[d.elem])}}}setColorByProperty(n,a,u,f){var d,r,o=this.selectedAtoms(n,o);for(this.lastColors=null,o.length>0&&(this.molObj=null),typeof u=="string"&&typeof m.Gradient.builtinGradients[u]<"u"&&(u=new m.Gradient.builtinGradients[u]),u=u,f||(f=u.range()),f||(f=(0,S.getPropertyRange)(o,a)),d=0;d<o.length;d++){r=o[d];var v=(0,S.getAtomProperty)(r,a);v!=null&&(r.color=u.valueToHex(parseFloat(r.properties[a]),f))}}setColorByFunction(n,a){var u=this.selectedAtoms(n,u);if(typeof a=="function"){this.lastColors=null,u.length>0&&(this.molObj=null);for(let f=0;f<u.length;f++){let d=u[f];d.color=a(d)}}}toCDObject(n=!1){var a={a:[],b:[]};n&&(a.s=[]);for(let f=0;f<this.atoms.length;f++){let d={},r=this.atoms[f];if(d.x=r.x,d.y=r.y,d.z=r.z,r.elem!="C"&&(d.l=r.elem),n){for(var u=0;u<a.s.length&&JSON.stringify(r.style)!==JSON.stringify(a.s[u]);)u++;u===a.s.length&&a.s.push(r.style),u!==0&&(d.s=u)}a.a.push(d);for(let o=0;o<r.bonds.length;o++){let v=f,h=r.bonds[o];if(v>=h)continue;let y={b:v,e:h},E=r.bondOrder[o];E!=1&&(y.o=E),a.b.push(y)}}return a}globj(n,a){(this.molObj===null||a.regen)&&(this.molObj=this.createMolObj(this.atoms,a),this.renderedMolObj&&(n.remove(this.renderedMolObj),this.renderedMolObj=null),this.renderedMolObj=this.molObj.clone(),this.hidden&&(this.renderedMolObj.setVisible(!1),this.molObj.setVisible(!1)),n.add(this.renderedMolObj))}exportVRML(){var n=this.createMolObj(this.atoms,{supportsImposters:!1,supportsAIA:!1});return n.vrml()}removegl(n){this.renderedMolObj&&(this.renderedMolObj.geometry!==void 0&&this.renderedMolObj.geometry.dispose(),this.renderedMolObj.material!==void 0&&this.renderedMolObj.material.dispose(),n.remove(this.renderedMolObj),this.renderedMolObj=null),this.molObj=null}hide(){this.hidden=!0,this.renderedMolObj&&this.renderedMolObj.setVisible(!1),this.molObj&&this.molObj.setVisible(!1)}show(){this.hidden=!1,this.renderedMolObj&&this.renderedMolObj.setVisible(!0),this.molObj&&this.molObj.setVisible(!0)}addPropertyLabels(n,a,u,f){for(var d=this.selectedAtoms(a,d),r=(0,S.deepCopy)(f),o=0;o<d.length;o++){var v=d[o],h=null;typeof v[n]<"u"?h=String(v[n]):typeof v.properties[n]<"u"&&(h=String(v.properties[n])),h!=null&&(r.position=v,u.addLabel(h,r))}}addResLabels(n,a,u,f=!1){var d=[],r=function(v,h){for(var y=v.selectedAtoms(n,y),E={},w=0;w<y.length;w++){var W=y[w],P=W.chain,j=W.resn,V=W.resi,G=j+""+V;E[P]||(E[P]={}),E[P][G]||(E[P][G]=[]),E[P][G].push(W)}var F=(0,S.deepCopy)(u);for(let K in E)if(E.hasOwnProperty(K)){var H=E[K];for(let U in H)if(H.hasOwnProperty(U)){let N=H[U],Y=new L.Vector3(0,0,0);for(let ae=0;ae<N.length;ae++){let he=N[ae];Y.x+=he.x,Y.y+=he.y,Y.z+=he.z}Y.divideScalar(N.length),F.position=Y,F.frame=h;let ne=a.addLabel(U,F,void 0,!0);d.push(ne)}}};if(f){var o=this.getNumFrames();let v=this.atoms;for(let h=0;h<o;h++)this.frames[h]&&(this.atoms=this.frames[h],r(this,h));this.atoms=v}else r(this);return d}setupDFS(){this.atomdfs=[];var n=this,a=new Int8Array(this.atoms.length);a.fill(0);for(var u=function(o,v,h){h.push([o,v]);var y=n.atoms[o];a[o]=1;for(var E=0;E<y.bonds.length;E++){var w=y.bonds[E];n.atoms[w]&&!a[w]&&u(w,o,h)}},f=0;f<this.atoms.length;f++){var d=this.atoms[f];if(d&&!a[f]){var r=[];u(f,-1,r),this.atomdfs.push(r)}}}setCoordinatesFromURL(n,a){this.frames=[];var u=this;return this.box&&this.setupDFS(),n.startsWith("http")||(n="http://"+n),(0,S.get)(n+"/traj/numframes/"+a,function(f){if(!isNaN(parseInt(f)))return u.frames.push(u.atoms),u.frames.numFrames=f,u.frames.url=n,u.frames.path=a,u.setFrame(0)})}setCoordinates(n,a){if(a=a||"",!n)return[];if(/\.gz$/.test(a)){a=a.replace(/\.gz$/,"");try{n=(0,S.inflateString)(n)}catch(E){console.log(E)}}var u={mdcrd:"",inpcrd:"",pdb:"",netcdf:"",array:""};if(u.hasOwnProperty(a)){this.frames=[];for(var f=this.atoms.length,d=A.parseCrd(n,a),r=0;r<d.length;){for(var o=[],v=0;v<f;v++){var h={};for(var y in this.atoms[v])h[y]=this.atoms[v][y];o[v]=h,o[v].x=d[r++],o[v].y=d[r++],o[v].z=d[r++]}this.frames.push(o)}return this.atoms=this.frames[0],this.frames}return[]}addAtomSpecs(n){}static parseCrd(n,a){var u=[],f=0;if(a=="pdb")for(var d=n.indexOf(`
ATOM`);d!=-1;){for(;n.slice(d,d+5)==`
ATOM`||n.slice(d,d+7)==`
HETATM`;)u[f++]=parseFloat(n.slice(d+31,d+39)),u[f++]=parseFloat(n.slice(d+39,d+47)),u[f++]=parseFloat(n.slice(d+47,d+55)),d=n.indexOf(`
`,d+54),n.slice(d,d+4)==`
TER`&&(d=n.indexOf(`
`,d+5));d=n.indexOf(`
ATOM`,d)}else if(a=="netcdf"){var r=new D.NetCDFReader(n);u=[].concat.apply([],r.getDataVariable("coordinates"))}else{if(a=="array"||Array.isArray(n))return n.flat(2);{let o=n.indexOf(`
`);a=="inpcrd"&&(o=n.indexOf(`
`,o+1)),n=n.slice(o+1),u=n.match(/\S+/g).map(parseFloat)}}return u}static parseMolData(n,a="",u){if(!n)return[];if(/\.gz$/.test(a)){a=a.replace(/\.gz$/,"");try{a.match(/bcif/i)?n=(0,S.inflateString)(n,!1):n=(0,S.inflateString)(n)}catch(r){console.log(r)}}typeof T.Parsers[a]>"u"&&(a=a.split(".").pop(),typeof T.Parsers[a]>"u"&&(console.log("Unknown format: "+a),n instanceof Uint8Array?a="bcif":n.match(/^@<TRIPOS>MOLECULE/gm)?a="mol2":n.match(/^data_/gm)&&n.match(/^loop_/gm)?a="cif":n.match(/^HETATM/gm)||n.match(/^ATOM/gm)?a="pdb":n.match(/ITEM: TIMESTEP/gm)?a="lammpstrj":n.match(/^.*\n.*\n.\s*(\d+)\s+(\d+)/gm)?a="sdf":n.match(/^%VERSION\s+VERSION_STAMP/gm)?a="prmtop":a="xyz",console.log("Best guess: "+a)));var f=T.Parsers[a],d=f(n,u);return d}}A.defaultAtomStyle={line:{}},A.defaultlineWidth=1,A.vdwRadii={H:1.2,He:1.4,Li:1.82,Be:1.53,B:1.92,C:1.7,N:1.55,O:1.52,F:1.47,Ne:1.54,Na:2.27,Mg:1.73,Al:1.84,Si:2.1,P:1.8,S:1.8,Cl:1.75,Ar:1.88,K:2.75,Ca:2.31,Ni:1.63,Cu:1.4,Zn:1.39,Ga:1.87,Ge:2.11,As:1.85,Se:1.9,Br:1.85,Kr:2.02,Rb:3.03,Sr:2.49,Pd:1.63,Ag:1.72,Cd:1.58,In:1.93,Sn:2.17,Sb:2.06,Te:2.06,I:1.98,Xe:2.16,Cs:3.43,Ba:2.68,Pt:1.75,Au:1.66,Hg:1.55,Tl:1.96,Pb:2.02,Bi:2.07,Po:1.97,At:2.02,Rn:2.2,Fr:3.48,Ra:2.83,U:1.86},A.ignoredKeys=new Set(["props","invert","model","frame","byres","expand","within","and","or","not"])},"./src/GLShape.ts":(k,R,g)=>{g.r(R),g.d(R,{GLShape:()=>D,splitMesh:()=>p});var M=g("./src/WebGL/index.ts"),z=g("./src/WebGL/shapes/index.ts"),L=g("./src/WebGL/math/index.ts"),B=g("./src/colors.ts"),x=g("./src/ProteinSurface4.ts"),b=g("./src/VolumeData.ts"),S=g("./src/GLDraw.ts"),m=g("./src/glcartoon.ts"),T=g("./src/utilities.ts");class D{static finalizeGeo(l){var n=l.updateGeoGroup(0);n.vertices>0&&n.truncateArrayBuffers(!0,!0)}static updateColor(l,n){n=n||B.CC.color(n),l.colorsNeedUpdate=!0;var a,u,f;n.constructor!==Array&&(a=n.r,u=n.g,f=n.b);for(let d in l.geometryGroups){let r=l.geometryGroups[d],o=r.colorArray;for(let v=0,h=r.vertices;v<h;++v){if(n.constructor===Array){let y=n[v];a=y.r,u=y.g,f=y.b}o[v*3]=a,o[v*3+1]=u,o[v*3+2]=f}}}static drawArrow(l,n,a){var u=a.start,f=a.end,d=a.radius,r=a.radiusRatio,o=a.mid,v=a.midpos;if(!(u&&f))return;var h=n.updateGeoGroup(51),y=new L.Vector3(f.x,f.y,f.z).sub(u);if(v){let _e=y.length();v>0?o=v/_e:o=(_e+v)/_e}y.multiplyScalar(o);var E=new L.Vector3(u.x,u.y,u.z).add(y),w=y.clone().negate();let W=new L.Vector3(u.x,u.y,u.z);l.intersectionShape.cylinder.push(new z.Cylinder(W,E.clone(),d)),l.intersectionShape.sphere.push(new z.Sphere(W,d));var P=[];P[0]=y.clone(),Math.abs(P[0].x)>1e-4?P[0].y+=1:P[0].x+=1,P[0].cross(y),P[0].normalize(),P[4]=P[0].clone(),P[4].crossVectors(P[0],y),P[4].normalize(),P[8]=P[0].clone().negate(),P[12]=P[4].clone().negate(),P[2]=P[0].clone().add(P[4]).normalize(),P[6]=P[4].clone().add(P[8]).normalize(),P[10]=P[8].clone().add(P[12]).normalize(),P[14]=P[12].clone().add(P[0]).normalize(),P[1]=P[0].clone().add(P[2]).normalize(),P[3]=P[2].clone().add(P[4]).normalize(),P[5]=P[4].clone().add(P[6]).normalize(),P[7]=P[6].clone().add(P[8]).normalize(),P[9]=P[8].clone().add(P[10]).normalize(),P[11]=P[10].clone().add(P[12]).normalize(),P[13]=P[12].clone().add(P[14]).normalize(),P[15]=P[14].clone().add(P[0]).normalize();var j=h.vertices,V=h.vertexArray,G=h.faceArray,F=h.normalArray,H=h.lineArray,K,U,N;for(U=0,N=P.length;U<N;++U){K=3*(j+3*U);var Y=P[U].clone().multiplyScalar(d).add(u),ne=P[U].clone().multiplyScalar(d).add(E),ae=P[U].clone().multiplyScalar(d*r).add(E);if(V[K]=Y.x,V[K+1]=Y.y,V[K+2]=Y.z,V[K+3]=ne.x,V[K+4]=ne.y,V[K+5]=ne.z,V[K+6]=ae.x,V[K+7]=ae.y,V[K+8]=ae.z,U>0){var he=V[K-3],oe=V[K-2],pe=V[K-1],ue=new L.Vector3(he,oe,pe),ge=new L.Vector3(f.x,f.y,f.z),Fe=E.clone(),Be=new L.Vector3(ae.x,ae.y,ae.z);l.intersectionShape.triangle.push(new z.Triangle(Be,ge,ue)),l.intersectionShape.triangle.push(new z.Triangle(ue.clone(),Fe,Be.clone()))}}h.vertices+=48,K=h.vertices*3,V[K]=u.x,V[K+1]=u.y,V[K+2]=u.z,V[K+3]=E.x,V[K+4]=E.y,V[K+5]=E.z,V[K+6]=f.x,V[K+7]=f.y,V[K+8]=f.z,h.vertices+=3;var ke,be,fe,De,Ve,Xe,it,nt,et,$e,Qe,Ye,Ge,ot,st,Q,ee,re,Se,ve=h.vertices-3,je=h.vertices-2,Ie=h.vertices-1,J=ve*3,me=je*3,Te=Ie*3;for(U=0,N=P.length-1;U<N;++U){var He=j+3*U;K=He*3,be=h.faceidx,fe=h.lineidx,De=He,$e=De*3,Ve=He+1,Qe=Ve*3,Xe=He+2,Ye=Xe*3,it=He+4,Ge=it*3,nt=He+5,ot=nt*3,et=He+3,st=et*3,Q=ee=P[U],re=Se=P[U+1],F[$e]=Q.x,F[Qe]=ee.x,F[st]=Se.x,F[$e+1]=Q.y,F[Qe+1]=ee.y,F[st+1]=Se.y,F[$e+2]=Q.z,F[Qe+2]=ee.z,F[st+2]=Se.z,F[Qe]=ee.x,F[Ge]=re.x,F[st]=Se.x,F[Qe+1]=ee.y,F[Ge+1]=re.y,F[st+1]=Se.y,F[Qe+2]=ee.z,F[Ge+2]=re.z,F[st+2]=Se.z,F[Ye]=ee.x,F[ot]=re.x,F[Ye+1]=ee.y,F[ot+1]=re.y,F[Ye+2]=ee.z,F[ot+2]=re.z,G[be]=De,G[be+1]=Ve,G[be+2]=et,G[be+3]=Ve,G[be+4]=it,G[be+5]=et,G[be+6]=De,G[be+7]=et,G[be+8]=ve,G[be+9]=Xe,G[be+10]=je,G[be+11]=nt,G[be+12]=Xe,G[be+13]=Ie,G[be+14]=nt,H[fe]=De,H[fe+1]=Ve,H[fe+2]=De,H[fe+3]=et,H[fe+4]=it,H[fe+5]=et,H[fe+6]=De,H[fe+7]=et,H[fe+8]=Xe,H[fe+9]=Ve,H[fe+10]=Xe,H[fe+11]=nt,H[fe+12]=it,H[fe+13]=nt,H[fe+14]=Xe,H[fe+15]=Ie,H[fe+16]=Xe,H[fe+17]=nt,H[fe+18]=Ie,H[fe+19]=nt,h.faceidx+=15,h.lineidx+=20}ke=[j+45,j+46,j+1,j,j+47,j+2],be=h.faceidx,fe=h.lineidx,De=ke[0],$e=De*3,Ve=ke[1],Qe=Ve*3,Xe=ke[4],Ye=Xe*3,it=ke[2],Ge=it*3,nt=ke[5],ot=nt*3,et=ke[3],st=et*3,Q=ee=P[15],re=Se=P[0],F[$e]=Q.x,F[Qe]=ee.x,F[st]=Se.x,F[$e+1]=Q.y,F[Qe+1]=ee.y,F[st+1]=Se.y,F[$e+2]=Q.z,F[Qe+2]=ee.z,F[st+2]=Se.z,F[Qe]=ee.x,F[Ge]=re.x,F[st]=Se.x,F[Qe+1]=ee.y,F[Ge+1]=re.y,F[st+1]=Se.y,F[Qe+2]=ee.z,F[Ge+2]=re.z,F[st+2]=Se.z,F[Ye]=ee.x,F[ot]=re.x,F[Ye+1]=ee.y,F[ot+1]=re.y,F[Ye+2]=ee.z,F[ot+2]=re.z,y.normalize(),w.normalize(),F[J]=w.x,F[me]=F[Te]=y.x,F[J+1]=w.y,F[me+1]=F[Te+1]=y.y,F[J+2]=w.z,F[me+2]=F[Te+2]=y.z,G[be]=De,G[be+1]=Ve,G[be+2]=et,G[be+3]=Ve,G[be+4]=it,G[be+5]=et,G[be+6]=De,G[be+7]=et,G[be+8]=ve,G[be+9]=Xe,G[be+10]=je,G[be+11]=nt,G[be+12]=Xe,G[be+13]=Ie,G[be+14]=nt,H[fe]=De,H[fe+1]=Ve,H[fe+2]=De,H[fe+3]=et,H[fe+4]=it,H[fe+5]=et,H[fe+6]=De,H[fe+7]=et,H[fe+8]=Xe,H[fe+9]=Ve,H[fe+10]=Xe,H[fe+11]=nt,H[fe+12]=it,H[fe+13]=nt,H[fe+14]=Xe,H[fe+15]=Ie,H[fe+16]=Xe,H[fe+17]=nt,H[fe+18]=Ie,H[fe+19]=nt,h.faceidx+=15,h.lineidx+=20}static updateBoundingFromPoints(l,n,a,u){l.center.set(0,0,0);let f=1/0,d=1/0,r=1/0,o=-1/0,v=-1/0,h=-1/0;l.box&&(f=l.box.min.x,o=l.box.max.x,d=l.box.min.y,v=l.box.max.y,r=l.box.min.z,h=l.box.max.z);for(let W=0,P=u;W<P;W++){var y=a[W*3],E=a[W*3+1],w=a[W*3+2];y<f&&(f=y),E<d&&(d=E),w<r&&(r=w),y>o&&(o=y),E>v&&(v=E),w>h&&(h=w)}l.center.set((o+f)/2,(v+d)/2,(h+r)/2),l.radius=l.center.distanceTo({x:o,y:v,z:h}),l.box={min:{x:f,y:d,z:r},max:{x:o,y:v,z:h}}}static addCustomGeo(l,n,a,u,f){var d=n.addGeoGroup(),r=a.vertexArr,o=a.normalArr,v=a.faceArr;d.vertices=r.length,d.faceidx=v.length;var h,y,E,w,W,P,j,V,G,F=d.vertexArray,H=d.colorArray;for(u.constructor!==Array&&(V=u.r,G=u.g,w=u.b),P=0,j=d.vertices;P<j;++P)h=P*3,y=r[P],F[h]=y.x,F[h+1]=y.y,F[h+2]=y.z,u.constructor===Array&&(W=u[P],V=W.r,G=W.g,w=W.b),H[h]=V,H[h+1]=G,H[h+2]=w;if(f)for(P=0,j=d.faceidx/3;P<j;++P){h=P*3,E=v[h],w=v[h+1],W=v[h+2];var K=new L.Vector3,U=new L.Vector3,N=new L.Vector3;l.intersectionShape.triangle.push(new z.Triangle(K.copy(r[E]),U.copy(r[w]),N.copy(r[W])))}if(f){var Y=new L.Vector3(0,0,0),ne=0;for(let oe=0;oe<n.geometryGroups.length;oe++)Y.add(n.geometryGroups[oe].getCentroid()),ne++;Y.divideScalar(ne),D.updateBoundingFromPoints(l.boundingSphere,{centroid:Y},F,d.vertices)}if(d.faceArray=new Uint16Array(v),d.truncateArrayBuffers(!0,!0),o.length<d.vertices)d.setNormals();else{var ae=d.normalArray=new Float32Array(d.vertices*3),he;for(P=0,j=d.vertices;P<j;++P)h=P*3,he=o[P],ae[h]=he.x,ae[h+1]=he.y,ae[h+2]=he.z}d.setLineIndices(),d.lineidx=d.lineArray.length}static updateFromStyle(l,n){typeof n.color<"u"?(l.color=n.color||new B.Color,n.color instanceof B.Color||(l.color=B.CC.color(n.color))):l.color=B.CC.color(0),l.wireframe=!!n.wireframe,l.opacity=n.alpha?(0,L.clamp)(n.alpha,0,1):1,typeof n.opacity<"u"&&(l.opacity=(0,L.clamp)(n.opacity,0,1)),l.side=n.side!==void 0?n.side:M.DoubleSide,l.linewidth=typeof n.linewidth>"u"?1:n.linewidth,l.clickable=!!n.clickable,l.callback=(0,T.makeFunction)(n.callback),l.hoverable=!!n.hoverable,l.hover_callback=(0,T.makeFunction)(n.hover_callback),l.unhover_callback=(0,T.makeFunction)(n.unhover_callback),l.contextMenuEnabled=!!n.contextMenuEnabled,l.hidden=n.hidden,l.frame=n.frame}constructor(l){this.color=16777215,this.hidden=!1,this.wireframe=!1,this.opacity=1,this.linewidth=1,this.clickable=!1,this.hoverable=!1,this.contextMenuEnabled=!1,this.side=M.DoubleSide,this.stylespec=l||{},this.boundingSphere=new z.Sphere,this.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},D.updateFromStyle(this,this.stylespec),this.components=[],this.shapeObj=null,this.renderedShapeObj=null,this.geo=new M.Geometry(!0),this.linegeo=new M.Geometry(!0)}updateStyle(l){for(var n in l)this.stylespec[n]=l[n];if(D.updateFromStyle(this,this.stylespec),l.voldata&&l.volscheme){(0,T.adjustVolumeStyle)(l);const a=l.volscheme,u=l.voldata,f=B.CC,d=a.range()||[-1,1];this.geo.setColors(function(r,o,v){let h=u.getVal(r,o,v);return f.color(a.valueToHex(h,d))}),delete this.color}}addCustom(l){l.vertexArr=l.vertexArr||[],l.faceArr=l.faceArr||[],l.normalArr=l.normalArr||[],D.drawCustom(this,this.geo,l)}addSphere(l){l.center||(l.center=new L.Vector3(0,0,0)),l.radius=l.radius?(0,L.clamp)(l.radius,0,1/0):1.5,l.color=B.CC.color(l.color),this.intersectionShape.sphere.push(new z.Sphere(l.center,l.radius)),S.GLDraw.drawSphere(this.geo,l.center,l.radius,l.color,l.quality),this.components.push({centroid:new L.Vector3(l.center.x,l.center.y,l.center.z)});var n=this.geo.updateGeoGroup(0);D.updateBoundingFromPoints(this.boundingSphere,this.components,n.vertexArray,n.vertices)}addBox(l){var n=l.dimensions||{w:1,h:1,d:1},a;typeof n.w=="number"?a={x:n.w,y:0,z:0}:a=n.w;var u;typeof n.h=="number"?u={x:0,y:n.h,z:0}:u=n.h;var f;typeof n.d=="number"?f={x:0,y:0,z:n.d}:f=n.d;var d=l.corner;d==null&&(l.center!==void 0?d={x:l.center.x-.5*(a.x+u.x+f.x),y:l.center.y-.5*(a.y+u.y+f.y),z:l.center.z-.5*(a.z+u.z+f.z)}:d={x:0,y:0,z:0});var r=[{x:d.x,y:d.y,z:d.z},{x:d.x+a.x,y:d.y+a.y,z:d.z+a.z},{x:d.x+u.x,y:d.y+u.y,z:d.z+u.z},{x:d.x+a.x+u.x,y:d.y+a.y+u.y,z:d.z+a.z+u.z},{x:d.x+f.x,y:d.y+f.y,z:d.z+f.z},{x:d.x+a.x+f.x,y:d.y+a.y+f.y,z:d.z+a.z+f.z},{x:d.x+u.x+f.x,y:d.y+u.y+f.y,z:d.z+u.z+f.z},{x:d.x+a.x+u.x+f.x,y:d.y+a.y+u.y+f.y,z:d.z+a.z+u.z+f.z}],o=[],v=[];o.splice(o.length,0,r[0],r[1],r[2],r[3]),v.splice(v.length,0,0,2,1,1,2,3);var h=4;o.splice(o.length,0,r[2],r[3],r[6],r[7]),v.splice(v.length,0,h+0,h+2,h+1,h+1,h+2,h+3),h+=4,o.splice(o.length,0,r[4],r[5],r[0],r[1]),v.splice(v.length,0,h+0,h+2,h+1,h+1,h+2,h+3),h+=4,o.splice(o.length,0,r[6],r[7],r[4],r[5]),v.splice(v.length,0,h+0,h+2,h+1,h+1,h+2,h+3),h+=4,o.splice(o.length,0,r[3],r[1],r[7],r[5]),v.splice(v.length,0,h+0,h+2,h+1,h+1,h+2,h+3),h+=4,o.splice(o.length,0,r[2],r[6],r[0],r[4]),v.splice(v.length,0,h+0,h+2,h+1,h+1,h+2,h+3),h+=4;var y=(0,T.extend)({},l);y.vertexArr=o,y.faceArr=v,y.normalArr=[],D.drawCustom(this,this.geo,y);var E=new L.Vector3;this.components.push({centroid:E.addVectors(r[0],r[7]).multiplyScalar(.5)});var w=this.geo.updateGeoGroup(0);D.updateBoundingFromPoints(this.boundingSphere,this.components,w.vertexArray,w.vertices)}addCylinder(l){var n,a;l.start?n=new L.Vector3(l.start.x||0,l.start.y||0,l.start.z||0):n=new L.Vector3(0,0,0),l.end?(a=new L.Vector3(l.end.x,l.end.y||0,l.end.z||0),typeof a.x>"u"&&(a.x=3)):a=new L.Vector3(0,0,0);var u=l.radius||.1,f=B.CC.color(l.color);this.intersectionShape.cylinder.push(new z.Cylinder(n,a,u)),S.GLDraw.drawCylinder(this.geo,n,a,u,f,l.fromCap,l.toCap);var d=new L.Vector3;this.components.push({centroid:d.addVectors(n,a).multiplyScalar(.5)});var r=this.geo.updateGeoGroup(0);D.updateBoundingFromPoints(this.boundingSphere,this.components,r.vertexArray,r.vertices)}addDashedCylinder(l){l.dashLength=l.dashLength||.25,l.gapLength=l.gapLength||.25;var n;l.start?n=new L.Vector3(l.start.x||0,l.start.y||0,l.start.z||0):n=new L.Vector3(0,0,0);var a;l.end?(a=new L.Vector3(l.end.x,l.end.y||0,l.end.z||0),typeof a.x>"u"&&(a.x=3)):a=new L.Vector3(3,0,0);for(var u=l.radius||.1,f=B.CC.color(l.color),d=Math.sqrt(Math.pow(n.x-a.x,2)+Math.pow(n.y-a.y,2)+Math.pow(n.z-a.z,2)),r=d/(l.gapLength+l.dashLength),o=new L.Vector3(l.start.x||0,l.start.y||0,l.start.z||0),v=new L.Vector3(l.end.x,l.end.y||0,l.end.z||0),h=new L.Vector3((a.x-n.x)/(d/l.gapLength),(a.y-n.y)/(d/l.gapLength),(a.z-n.z)/(d/l.gapLength)),y=new L.Vector3((a.x-n.x)/(d/l.dashLength),(a.y-n.y)/(d/l.dashLength),(a.z-n.z)/(d/l.dashLength)),E=0;E<r;E++)v=new L.Vector3(o.x+y.x,o.y+y.y,o.z+y.z),this.intersectionShape.cylinder.push(new z.Cylinder(o,v,u)),S.GLDraw.drawCylinder(this.geo,o,v,u,f,l.fromCap,l.toCap),o=new L.Vector3(v.x+h.x,v.y+h.y,v.z+h.z);var w=new L.Vector3;this.components.push({centroid:w.addVectors(n,a).multiplyScalar(.5)});var W=this.geo.updateGeoGroup(0);D.updateBoundingFromPoints(this.boundingSphere,this.components,W.vertexArray,W.vertices)}addCurve(l){l.points=l.points||[],l.smooth=l.smooth||10,typeof l.fromCap>"u"&&(l.fromCap=2),typeof l.toCap>"u"&&(l.toCap=2);var n=(0,m.subdivide_spline)(l.points,l.smooth);if(n.length<3){console.log("Too few points in addCurve");return}var a=l.radius||.1,u=B.CC.color(l.color),f=0,d=n.length-1,r=n[0].distanceTo(n[1]),o=Math.ceil(2*a/r);if(l.toArrow){d-=o;let E={start:n[d],end:n[n.length-1],radius:a,color:u,mid:1e-4};this.addArrow(E)}if(l.fromArrow){f+=o;let E={start:n[f],end:n[0],radius:a,color:u,mid:1e-4};this.addArrow(E)}for(var v=Math.ceil(n.length/2),h={radius:a,color:u,fromCap:2,toCap:2},y=f;y<d;y++)h.start=n[y],h.end=n[y+1],h.fromCap=2,h.toCap=2,y<v?(h.fromCap=2,h.toCap=0):y>v?(h.fromCap=0,h.toCap=2):(h.fromCap=2,h.toCap=2),this.addCylinder(h)}addLine(l){var n,a;l.start?n=new L.Vector3(l.start.x||0,l.start.y||0,l.start.z||0):n=new L.Vector3(0,0,0),l.end?(a=new L.Vector3(l.end.x,l.end.y||0,l.end.z||0),typeof a.x>"u"&&(a.x=3)):a=new L.Vector3(3,0,0);var u=this.geo.updateGeoGroup(2),f=u.vertices,d=f*3,r=u.vertexArray;r[d]=n.x,r[d+1]=n.y,r[d+2]=n.z,r[d+3]=a.x,r[d+4]=a.y,r[d+5]=a.z,u.vertices+=2;var o=u.lineArray,v=u.lineidx;o[v]=f,o[v+1]=f+1,u.lineidx+=2;var h=new L.Vector3;this.components.push({centroid:h.addVectors(n,a).multiplyScalar(.5)}),u=this.geo.updateGeoGroup(0),D.updateBoundingFromPoints(this.boundingSphere,this.components,u.vertexArray,u.vertices)}addArrow(l){if(l.start?l.start=new L.Vector3(l.start.x||0,l.start.y||0,l.start.z||0):l.start=new L.Vector3(0,0,0),l.dir instanceof L.Vector3&&typeof l.length=="number"){var n=l.dir.clone().multiplyScalar(l.length).add(l.start);l.end=n}else l.end?(l.end=new L.Vector3(l.end.x,l.end.y||0,l.end.z||0),typeof l.end.x>"u"&&(l.end.x=3)):l.end=new L.Vector3(3,0,0);l.radius=l.radius||.1,l.radiusRatio=l.radiusRatio||1.618034,l.mid=0<l.mid&&l.mid<1?l.mid:.618034,D.drawArrow(this,this.geo,l);var a=new L.Vector3;this.components.push({centroid:a.addVectors(l.start,l.end).multiplyScalar(.5)});var u=this.geo.updateGeoGroup(0);D.updateBoundingFromPoints(this.boundingSphere,this.components,u.vertexArray,u.vertices)}static distance_from(l,n){return Math.sqrt(Math.pow(l.x-n.x,2)+Math.pow(l.y-n.y,2)+Math.pow(l.z-n.z,2))}static inSelectedRegion(l,n,a){for(var u=0;u<n.length;u++)if(D.distance_from(n[u],l)<=a)return!0;return!1}addIsosurface(l,n,a,u){var f=n.isoval!==void 0&&typeof n.isoval=="number"?n.isoval:0,d=!!n.voxel,r=n.smoothness===void 0?1:n.smoothness,o=l.size.x,v=l.size.y,h=l.size.z,y=new Int16Array(o*v*h),E=l.data,w,W;for(w=0,W=y.length;w<W;++w)y[w]=-1;var P=new Uint8Array(o*v*h);for(w=0,W=E.length;w<W;++w){var j=f>=0?E[w]-f:f-E[w];j>0&&(P[w]|=D.ISDONE)}var V=[],G=[];x.MarchingCube.march(P,V,G,{fulltable:!0,voxel:d,unitCube:l.unit,origin:l.origin,matrix:l.matrix,nX:o,nY:v,nZ:h}),!d&&r>0&&x.MarchingCube.laplacianSmooth(r,V,G);var F=[],H=[],K=[];if(n.selectedRegion&&n.coords===void 0&&(n.coords=n.selectedRegion),n.coords===void 0&&n.selection!==void 0&&(u?n.coords=u.selectedAtoms(n.selection):console.log("addIsosurface needs viewer is selection provided.")),n.coords!==void 0){var U=n.coords[0].x,N=n.coords[0].y,Y=n.coords[0].z,ne=n.coords[0].x,ae=n.coords[0].y,he=n.coords[0].z;for(let fe=0;fe<n.coords.length;fe++)n.coords[fe].x>U?U=n.coords[fe].x:n.coords[fe].x<ne&&(ne=n.coords[fe].x),n.coords[fe].y>N?N=n.coords[fe].y:n.coords[fe].y<ae&&(ae=n.coords[fe].y),n.coords[fe].z>Y?Y=n.coords[fe].z:n.coords[fe].z<he&&(he=n.coords[fe].z);var oe=2;n.radius!==void 0&&(oe=n.radius),n.selectedOffset!==void 0&&(oe=n.selectedOffset),n.seldist!==void 0&&(oe=n.seldist),ne-=oe,U+=oe,ae-=oe,N+=oe,he-=oe,Y+=oe;for(let fe=0;fe<V.length;fe++)V[fe].x>ne&&V[fe].x<U&&V[fe].y>ae&&V[fe].y<N&&V[fe].z>he&&V[fe].z<Y&&D.inSelectedRegion(V[fe],n.coords,oe)?(F.push(H.length),H.push(V[fe])):F.push(-1);for(let fe=0;fe+2<G.length;fe+=3)F[G[fe]]!==-1&&F[G[fe+1]]!==-1&&F[G[fe+2]]!==-1&&(K.push(G[fe]-(G[fe]-F[G[fe]])),K.push(G[fe+1]-(G[fe+1]-F[G[fe+1]])),K.push(G[fe+2]-(G[fe+2]-F[G[fe+2]])));V=H,G=K}D.drawCustom(this,this.geo,{vertexArr:V,faceArr:G,normalArr:[],clickable:n.clickable,hoverable:n.hoverable}),this.updateStyle(n);var pe=new L.Vector3(l.origin.x,l.origin.y,l.origin.z),ue=new L.Vector3(l.size.x*l.unit.x,l.size.y*l.unit.y,l.size.z*l.unit.z),ge=new L.Vector3(0,0,0),Fe=pe.clone(),Be=pe.clone().add(ue);for(let fe=0;fe<V.length;fe++)ge.add(V[fe]),Fe.max(V[fe]),Be.min(V[fe]);ge.divideScalar(V.length);var ke=ge.distanceTo(Be),be=ge.distanceTo(Fe);this.boundingSphere.center=ge,this.boundingSphere.radius=Math.max(ke,be),typeof a=="function"&&a()}addVolumetricData(l,n,a){l=new b.VolumeData(l,n),this.addIsosurface(l,a)}finalize(){return D.finalizeGeo(this.geo),this.geo.initTypedArrays(),this.geo}globj(l){if(this.renderedShapeObj&&(l.remove(this.renderedShapeObj),this.renderedShapeObj=null),!this.hidden){D.finalizeGeo(this.geo),this.geo.initTypedArrays(),this.wireframe&&this.geo.setUpWireframe(),typeof this.color<"u"&&D.updateColor(this.geo,this.color),this.shapeObj=new M.Object3D;var n=null;this.side==M.DoubleSide?n=new M.MeshDoubleLambertMaterial({wireframe:this.wireframe,side:this.side,transparent:this.opacity<1,opacity:this.opacity,wireframeLinewidth:this.linewidth,vertexColors:M.Coloring.VertexColors}):n=new M.MeshLambertMaterial({wireframe:this.wireframe,side:this.side,transparent:this.opacity<1,opacity:this.opacity,wireframeLinewidth:this.linewidth,vertexColors:M.Coloring.VertexColors});var a=new M.Mesh(this.geo,n);if(this.shapeObj.add(a),this.linegeo&&this.linegeo.vertices>0){var u=new M.LineBasicMaterial({linewidth:this.linewidth,color:this.color}),f=new M.Line(this.linegeo,u,M.LineStyle.LinePieces);this.shapeObj.add(f)}this.renderedShapeObj=this.shapeObj.clone(),l.add(this.renderedShapeObj)}}removegl(l){this.renderedShapeObj&&(this.renderedShapeObj.geometry!==void 0&&this.renderedShapeObj.geometry.dispose(),this.renderedShapeObj.material!==void 0&&this.renderedShapeObj.material.dispose(),l.remove(this.renderedShapeObj),this.renderedShapeObj=null),this.shapeObj=null}get position(){return this.boundingSphere.center}get x(){return this.boundingSphere.center.x}get y(){return this.boundingSphere.center.y}get z(){return this.boundingSphere.center.z}}D.ISDONE=2,D.drawCustom=function(A,l,n){var a=n,u=a.vertexArr,f=a.faceArr;(u.length===0||f.length===0)&&console.warn("Error adding custom shape component: No vertices and/or face indices supplied!");var d=n.color;typeof d>"u"&&(d=A.color),d=B.CC.color(d);for(var r=p(a),o=0,v=r.length;o<v;o++)D.addCustomGeo(A,l,r[o],r[o].colorArr?r[o].colorArr:d,n.clickable)};function p(A){var l=64e3;if(A.vertexArr.length<l)return[A];var n=[{vertexArr:[],normalArr:[],faceArr:[]}];A.colorArr&&(n.colorArr=[]);var a=[],u=[],f=0,d=A.faceArr;for(let o=0,v=d.length;o<v;o+=3){let h=n[f];for(let y=0;y<3;y++){var r=d[o+y];a[r]!==f&&(a[r]=f,u[r]=h.vertexArr.length,h.vertexArr.push(A.vertexArr[r]),A.normalArr&&A.normalArr[r]&&h.normalArr.push(A.normalArr[r]),A.colorArr&&A.colorArr[r]&&h.colorArr.push(A.colorArr[r])),h.faceArr.push(u[r])}h.vertexArr.length>=l&&(n.push({vertexArr:[],normalArr:[],faceArr:[]}),A.colorArr&&(n.colorArr=[]),f++)}return n}},"./src/GLViewer.ts":(k,R,g)=>{g.r(R),g.d(R,{CONTEXTS_PER_VIEWPORT:()=>l,GLViewer:()=>n,createStereoViewer:()=>f,createViewer:()=>a,createViewerGrid:()=>u});var M=g("./src/WebGL/index.ts"),z=g("./src/WebGL/math/index.ts"),L=g("./src/colors.ts"),B=g("./src/utilities.ts"),x=g("./src/Gradient.ts"),b=g("./src/GLModel.ts"),S=g("./src/Label.ts"),m=g("./src/GLShape.ts"),T=g("./src/VolumeData.ts"),D=g("./src/ProteinSurface4.ts"),p=g("./src/VolumetricRender.ts"),A=g("./node_modules/upng-js/UPNG.js");const l=16;class n{getWidth(){let r=this.container,o=r.offsetWidth;if(o==0&&r.style.display==="none"){let v=r.style.position,h=r.style.visibility;r.style.display="block",r.style.visibility="hidden",r.style.position="absolute",o=r.offsetWidth,r.style.display="none",r.style.visibility=h,r.style.position=v}return o}getHeight(){let r=this.container,o=r.offsetHeight;if(o==0&&r.style.display==="none"){let v=r.style.position,h=r.style.visibility;r.style.display="block",r.style.visibility="hidden",r.style.position="absolute",o=r.offsetHeight,r.style.display="none",r.style.visibility=h,r.style.position=v}return o}setupRenderer(){this.renderer=new M.Renderer({antialias:this.config.antialias,preserveDrawingBuffer:!0,premultipliedAlpha:!1,id:this.config.id,row:this.config.row,col:this.config.col,rows:this.config.rows,cols:this.config.cols,canvas:this.config.canvas,containerWidth:this.WIDTH,containerHeight:this.HEIGHT,ambientOcclusion:this.config.ambientOcclusion,outline:this.config.outline}),this.renderer.domElement.style.width="100%",this.renderer.domElement.style.height="100%",this.renderer.domElement.style.padding="0",this.renderer.domElement.style.position="absolute",this.renderer.domElement.style.top="0px",this.renderer.domElement.style.left="0px",this.renderer.domElement.style.zIndex="0"}initializeScene(){this.scene=new M.Scene,this.scene.fog=new M.Fog(this.bgColor,100,200),this.modelGroup=new M.Object3D,this.rotationGroup=new M.Object3D,this.rotationGroup.useQuaternion=!0,this.rotationGroup.quaternion=new z.Quaternion(0,0,0,1),this.rotationGroup.add(this.modelGroup),this.scene.add(this.rotationGroup);var r=new M.Light(16777215);r.position=new z.Vector3(.2,.2,1).normalize(),r.intensity=1,this.scene.add(r)}_handleLostContext(r){const o=function(v){const h=v.getBoundingClientRect();return!(h.right<0||h.bottom<0||h.top>(window.innerHeight||document.documentElement.clientHeight)||h.left>(window.innerWidth||document.documentElement.clientWidth))};if(o(this.container)){let v=0;for(let h of document.getElementsByTagName("canvas"))if(o(h)&&h._3dmol_viewer!=null&&(h._3dmol_viewer.resize(),v+=1,v>=l))break}}initContainer(r){this.container=r,this.WIDTH=this.getWidth(),this.HEIGHT=this.getHeight(),this.ASPECT=this.renderer.getAspect(this.WIDTH,this.HEIGHT),this.renderer.setSize(this.WIDTH,this.HEIGHT),this.container.append(this.renderer.domElement),this.glDOM=this.renderer.domElement,this.glDOM._3dmol_viewer=this,this.glDOM.addEventListener("webglcontextlost",this._handleLostContext.bind(this)),this.nomouse||(this.glDOM.addEventListener("mousedown",this._handleMouseDown.bind(this),{passive:!1}),this.glDOM.addEventListener("touchstart",this._handleMouseDown.bind(this),{passive:!1}),this.glDOM.addEventListener("wheel",this._handleMouseScroll.bind(this),{passive:!1}),this.glDOM.addEventListener("mousemove",this._handleMouseMove.bind(this),{passive:!1}),this.glDOM.addEventListener("touchmove",this._handleMouseMove.bind(this),{passive:!1}),this.glDOM.addEventListener("contextmenu",this._handleContextMenu.bind(this),{passive:!1}))}decAnim(){this.animated--,this.animated<0&&(this.animated=0)}incAnim(){this.animated++}nextSurfID(){var r=0;for(let v in this.surfaces)if(this.surfaces.hasOwnProperty(v)){var o=parseInt(v);isNaN(o)||o>r&&(r=o)}return r+1}setSlabAndFog(){let r=this.camera.position.z-this.rotationGroup.position.z;r<1&&(r=1),this.camera.near=r+this.slabNear,!this.camera.ortho&&this.camera.near<1&&(this.camera.near=1),this.camera.far=r+this.slabFar,this.camera.near+1>this.camera.far&&(this.camera.far=this.camera.near+1),this.camera.fov=this.fov,this.camera.right=r*Math.tan(Math.PI/180*this.fov),this.camera.left=-this.camera.right,this.camera.top=this.camera.right/this.ASPECT,this.camera.bottom=-this.camera.top,this.camera.updateProjectionMatrix(),this.scene.fog.near=this.camera.near+this.fogStart*(this.camera.far-this.camera.near),this.scene.fog.far=this.camera.far,this.config.disableFog&&(this.scene.fog.near=this.scene.fog.far)}show(r){if(this.renderer.setViewport(),!!this.scene&&(this.setSlabAndFog(),this.renderer.render(this.scene,this.camera),this.viewChangeCallback&&this.viewChangeCallback(this._viewer.getView()),!r&&this.linkedViewers.length>0))for(var o=this._viewer.getView(),v=0;v<this.linkedViewers.length;v++){var h=this.linkedViewers[v];h.setView(o,!0)}}updateClickables(){this.clickables.splice(0,this.clickables.length),this.hoverables.splice(0,this.hoverables.length),this.contextMenuEnabledObjects.splice(0,this.contextMenuEnabledObjects.length);for(let r=0,o=this.models.length;r<o;r++){let v=this.models[r];if(v){let h=v.selectedAtoms({clickable:!0}),y=v.selectedAtoms({hoverable:!0}),E=v.selectedAtoms({contextMenuEnabled:!0});for(let w=0;w<y.length;w++)this.hoverables.push(y[w]);for(let w=0;w<h.length;w++)this.clickables.push(h[w]);for(let w=0;w<E.length;w++)this.contextMenuEnabledObjects.push(E[w])}}for(let r=0,o=this.shapes.length;r<o;r++){let v=this.shapes[r];v&&v.clickable&&this.clickables.push(v),v&&v.hoverable&&this.hoverables.push(v),v&&v.contextMenuEnabled&&this.contextMenuEnabledObjects.push(v)}}handleClickSelection(r,o,v){let h=this.targetedObjects(r,o,this.clickables);if(h.length){var y=h[0].clickable;y.callback!==void 0&&(typeof y.callback!="function"&&(y.callback=(0,B.makeFunction)(y.callback)),typeof y.callback=="function"&&(this.mouseButton===3&&this.contextMenuEnabledObjects.includes(y)&&this.userContextMenuHandler||y.callback(y,this._viewer,v,this.container,h)))}}canvasOffset(){let r=this.glDOM,o=r.getBoundingClientRect(),v=r.ownerDocument,h=v.documentElement,y=v.defaultView;return{top:o.top+y.pageYOffset-h.clientTop,left:o.left+y.pageXOffset-h.clientLeft}}setHover(r,o,v){this.current_hover!=r&&(this.current_hover&&(typeof this.current_hover.unhover_callback!="function"&&(this.current_hover.unhover_callback=(0,B.makeFunction)(this.current_hover.unhover_callback)),this.current_hover.unhover_callback(this.current_hover,this._viewer,o,this.container,v)),this.current_hover=r,r&&r.hover_callback!==void 0&&(typeof r.hover_callback!="function"&&(r.hover_callback=(0,B.makeFunction)(r.hover_callback)),typeof r.hover_callback=="function"&&r.hover_callback(r,this._viewer,o,this.container,v)))}handleHoverSelection(r,o,v){if(this.hoverables.length==0)return;let h=this.targetedObjects(r,o,this.hoverables);if(h.length){var y=h[0].clickable;this.setHover(y,v,h),this.current_hover=y}else this.setHover(null)}handleHoverContinue(r,o){let v=this.targetedObjects(r,o,this.hoverables);(v.length==0||v[0]===void 0)&&this.setHover(null),v[0]!==void 0&&v[0].clickable!==this.current_hover&&this.setHover(null)}closeEnoughForClick(r,{allowTolerance:o=r.targetTouches,tolerance:v=5}={}){const h=this.getX(r),y=this.getY(r);if(o){const E=Math.abs(h-this.mouseStartX),w=Math.abs(y-this.mouseStartY);return E<=v&&w<=v}else return h===this.mouseStartX&&y===this.mouseStartY}calcTouchDistance(r){var o=r.targetTouches[0].pageX-r.targetTouches[1].pageX,v=r.targetTouches[0].pageY-r.targetTouches[1].pageY;return Math.hypot(o,v)}getX(r){var o=r.pageX;return o==null&&(o=r.pageX),r.targetTouches&&r.targetTouches[0]?o=r.targetTouches[0].pageX:r.changedTouches&&r.changedTouches[0]&&(o=r.changedTouches[0].pageX),o}getY(r){var o=r.pageY;return o==null&&(o=r.pageY),r.targetTouches&&r.targetTouches[0]?o=r.targetTouches[0].pageY:r.changedTouches&&r.changedTouches[0]&&(o=r.changedTouches[0].pageY),o}isInViewer(r,o){if(this.viewers!=null){var v=this.WIDTH/this.cols,h=this.HEIGHT/this.rows,y=this.canvasOffset(),E=r-y.left,w=o-y.top,W=this.rows-Math.floor(w/h)-1,P=Math.floor(E/v);if(W!=this.row||P!=this.col)return!1}return!0}adjustZoomToLimits(r){if(this.config.lowerZoomLimit&&this.config.lowerZoomLimit>0){let o=this.CAMERA_Z-this.config.lowerZoomLimit;r>o&&(r=o)}if(this.config.upperZoomLimit&&this.config.upperZoomLimit>0){let o=this.CAMERA_Z-this.config.upperZoomLimit;r<o&&(r=o)}return r>this.CAMERA_Z-1&&(r=this.CAMERA_Z-1),r}static slerp(r,o,v){if(v==1)return o.clone();if(v==0)return r.clone();let h=r.x*o.x+r.y*o.y+r.z*o.z+r.w*o.w;if(h>.9995){let V=new z.Quaternion(r.x+v*(o.x-r.x),r.y+v*(o.y-r.y),r.z+v*(o.z-r.z),r.w+v*(o.w-r.w));return V.normalize(),V}h<0&&(o=o.clone().multiplyScalar(-1),h=-h),h>1?h=1:h<-1&&(h=-1);var y=Math.acos(h),E=y*v,w=o.clone();w.sub(r.clone().multiplyScalar(h)),w.normalize();var W=Math.cos(E),P=Math.sin(E),j=new z.Quaternion(r.x*W+w.x*P,r.y*W+w.y*P,r.z*W+w.z*P,r.w*W+w.w*P);return j.normalize(),j}constructor(r,o={}){if(this.nomouse=!1,this.glDOM=null,this.models=[],this.surfaces={},this.shapes=[],this.labels=[],this.clickables=[],this.hoverables=[],this.contextMenuEnabledObjects=[],this.current_hover=null,this.hoverDuration=500,this.longTouchDuration=1e3,this.viewer_frame=0,this.viewChangeCallback=null,this.stateChangeCallback=null,this.NEAR=1,this.FAR=800,this.CAMERA_Z=150,this.fov=20,this.linkedViewers=[],this.renderer=null,this.control_all=!1,this.scene=null,this.rotationGroup=null,this.modelGroup=null,this.fogStart=.4,this.slabNear=-50,this.slabFar=50,this.cq=new z.Quaternion(0,0,0,1),this.dq=new z.Quaternion(0,0,0,1),this.animated=0,this.animationTimers=new Set,this.isDragging=!1,this.mouseStartX=0,this.mouseStartY=0,this.touchDistanceStart=0,this.touchHold=!1,this.currentModelPos=0,this.cz=0,this.cslabNear=0,this.cslabFar=0,this.userContextMenuHandler=null,this.config=o,this.callback=this.config.callback,this.defaultcolors=this.config.defaultcolors,this.defaultcolors||(this.defaultcolors=L.elementColors.defaultColors),this.nomouse=!!this.config.nomouse,this.bgColor=0,this.config.backgroundColor=this.config.backgroundColor||"#ffffff",typeof this.config.backgroundColor<"u"&&(this.bgColor=L.CC.color(this.config.backgroundColor).getHex()),this.config.backgroundAlpha=this.config.backgroundAlpha==null?1:this.config.backgroundAlpha,this.camerax=0,typeof this.config.camerax<"u"&&(this.camerax=typeof this.config.camerax=="string"?parseFloat(this.config.camerax):this.config.camerax),this._viewer=this,this.container=r,this.config.hoverDuration!=null&&(this.hoverDuration=this.config.hoverDuration),this.config.antialias===void 0&&(this.config.antialias=!0),this.config.cartoonQuality===void 0&&(this.config.cartoonQuality=10),this.WIDTH=this.getWidth(),this.HEIGHT=this.getHeight(),this.setupRenderer(),this.row=this.config.row==null?0:this.config.row,this.col=this.config.col==null?0:this.config.col,this.cols=this.config.cols,this.rows=this.config.rows,this.viewers=this.config.viewers,this.control_all=this.config.control_all,this.ASPECT=this.renderer.getAspect(this.WIDTH,this.HEIGHT),this.camera=new M.Camera(this.fov,this.ASPECT,this.NEAR,this.FAR,this.config.orthographic),this.camera.position=new z.Vector3(this.camerax,0,this.CAMERA_Z),this.lookingAt=new z.Vector3,this.camera.lookAt(this.lookingAt),this.raycaster=new M.Raycaster(new z.Vector3(0,0,0),new z.Vector3(0,0,0)),this.projector=new M.Projector,this.initializeScene(),this.renderer.setClearColorHex(this.bgColor,this.config.backgroundAlpha),this.scene.fog.color=L.CC.color(this.bgColor),document.body.addEventListener("mouseup",this._handleMouseUp.bind(this)),document.body.addEventListener("touchend",this._handleMouseUp.bind(this)),this.initContainer(this.container),this.config.style&&this.setViewStyle(this.config),window.addEventListener("resize",this.resize.bind(this)),typeof window.ResizeObserver<"u"&&(this.divwatcher=new window.ResizeObserver(this.resize.bind(this)),this.divwatcher.observe(this.container)),typeof window.IntersectionObserver<"u"){let v=(h,y)=>{h.forEach(E=>{E.isIntersecting&&this.resize()})};this.intwatcher=new window.IntersectionObserver(v),this.intwatcher.observe(this.container)}try{typeof this.callback=="function"&&this.callback(this)}catch(v){console.log("error with glviewer callback: "+v)}}targetedObjects(r,o,v){var h={x:r,y:o,z:-1};return Array.isArray(v)||(v=this.selectedAtoms(v)),v.length==0?[]:(this.raycaster.setFromCamera(h,this.camera),this.raycaster.intersectObjects(this.modelGroup,v))}modelToScreen(r){let o=!1;Array.isArray(r)||(r=[r],o=!0);let v=this.renderer.getXRatio(),h=this.renderer.getYRatio(),y=this.col,E=this.row,w=y*(this.WIDTH/v),W=(h-E-1)*(this.HEIGHT/h),P=[],j=this.canvasOffset();return r.forEach(V=>{let G=new z.Vector3(V.x,V.y,V.z);G.applyMatrix4(this.modelGroup.matrixWorld),this.projector.projectVector(G,this.camera);let F=this.WIDTH/v*(G.x+1)/2+j.left+w,H=-(this.HEIGHT/h)*(G.y-1)/2+j.top+W;P.push({x:F,y:H})}),o&&(P=P[0]),P}screenOffsetToModel(r,o,v){var h=r/this.WIDTH,y=o/this.HEIGHT,E=v===void 0?this.rotationGroup.position.z:v,w=this.rotationGroup.quaternion,W=new z.Vector3(0,0,E);return this.projector.projectVector(W,this.camera),W.x+=h*2,W.y-=y*2,this.projector.unprojectVector(W,this.camera),W.z=0,W.applyQuaternion(w),W}screenToModelDistance(r,o){let v=this.canvasOffset(),h=new z.Vector3(o.x,o.y,o.z);h.applyMatrix4(this.modelGroup.matrixWorld);let y=h.clone();this.projector.projectVector(h,this.camera);let E=new z.Vector3((r.x-v.left)*2/this.WIDTH-1,(r.y-v.top)*2/-this.HEIGHT+1,h.z);return this.projector.unprojectVector(E,this.camera),E.distanceTo(y)}setViewChangeCallback(r){(typeof r=="function"||r==null)&&(this.viewChangeCallback=r)}setStateChangeCallback(r){(typeof r=="function"||r==null)&&(this.stateChangeCallback=r)}getConfig(){return this.config}setConfig(r){this.config=r,r.ambientOcclusion&&this.renderer.enableAmbientOcclusion(r.ambientOcclusion)}getInternalState(){var r={models:[],surfaces:[],shapes:[],labels:[]};for(let o=0;o<this.models.length;o++)this.models[o]&&(r.models[o]=this.models[o].getInternalState());return r}setInternalState(r){this.clear();var o=r.models;for(let v=0;v<o.length;v++)o[v]&&(this.models[v]=new b.GLModel(v),this.models[v].setInternalState(o[v]));this.render()}setZoomLimits(r,o){typeof r<"u"&&(this.config.lowerZoomLimit=r),o&&(this.config.upperZoomLimit=o),this.rotationGroup.position.z=this.adjustZoomToLimits(this.rotationGroup.position.z),this.show()}setCameraParameters(r){r.fov!==void 0&&(this.fov=r.fov,this.camera.fov=this.fov),r.z!==void 0&&(this.CAMERA_Z=r.z,this.camera.z=this.CAMERA_Z),r.orthographic!==void 0&&(this.camera.ortho=r.orthographic),this.setSlabAndFog()}_handleMouseDown(r){if(r.preventDefault(),!this.scene)return;var o=this.getX(r),v=this.getY(r);if(o===void 0)return;this.isDragging=!0,this.mouseButton=r.which,this.mouseStartX=o,this.mouseStartY=v,this.touchHold=!0,this.touchDistanceStart=0,r.targetTouches&&r.targetTouches.length==2&&(this.touchDistanceStart=this.calcTouchDistance(r)),this.cq=this.rotationGroup.quaternion.clone(),this.cz=this.rotationGroup.position.z,this.currentModelPos=this.modelGroup.position.clone(),this.cslabNear=this.slabNear,this.cslabFar=this.slabFar;let h=this;r.targetTouches&&r.targetTouches.length===1&&(this.longTouchTimeout=setTimeout(function(){if(h.touchHold==!0){h.glDOM=h.renderer.domElement;const y=r.targetTouches[0],E=new PointerEvent("contextmenu",Object.assign(Object.assign({},r),{pageX:y.pageX,pageY:y.pageY,screenX:y.screenX,screenY:y.screenY,clientX:y.clientX,clientY:y.clientY}));h.glDOM.dispatchEvent(E)}},this.longTouchDuration))}_handleMouseUp(r){if(this.touchHold=!1,this.isDragging&&this.scene){var o=this.getX(r),v=this.getY(r);if(this.closeEnoughForClick(r)&&this.isInViewer(o,v)){let h=this.mouseXY(o,v);this.handleClickSelection(h.x,h.y,r)}}this.isDragging=!1}_handleMouseScroll(r){if(r.preventDefault(),!!this.scene){var o=this.getX(r),v=this.getY(r);if(o!==void 0&&!(!this.control_all&&!this.isInViewer(o,v))){var h=(this.CAMERA_Z-this.rotationGroup.position.z)*.85,y=1;if(r.ctrlKey&&(y=-1),r.detail)this.rotationGroup.position.z+=y*h*r.detail/10;else if(r.wheelDelta){let E=r.wheelDelta*600/(r.wheelDelta+600);this.rotationGroup.position.z-=y*h*E/400}this.rotationGroup.position.z=this.adjustZoomToLimits(this.rotationGroup.position.z),this.show()}}}pngURI(){return this.getCanvas().toDataURL("image/png")}apngURI(r){let o=this;return r=r||1,new Promise(function(v){let h=0,y=o.viewChangeCallback,E=[],w=[],W=Date.now();o.viewChangeCallback=function(){w.push(Date.now()-W),W=Date.now(),E.push(new Promise(P=>{o.getCanvas().toBlob(function(j){j.arrayBuffer().then(P)},"image/png")})),h+=1,h==r&&(o.viewChangeCallback=y,Promise.all(E).then(P=>{let j=[];for(let U=0;U<P.length;U++){let N=(0,A.decode)(P[U]);j.push((0,A.toRGBA8)(N)[0])}let V=o.getCanvas().width,G=o.getCanvas().height,F=(0,A.encode)(j,V,G,0,w),H=new Blob([F],{type:"image/png"}),K=new FileReader;K.onload=function(U){v(U.target.result)},K.readAsDataURL(H)}))}})}getCanvas(){return this.glDOM}getRenderer(){return this.renderer}setHoverDuration(r){this.hoverDuration=r}mouseXY(r,o){let v=this.canvasOffset(),h=this.renderer.getXRatio(),y=this.renderer.getYRatio(),E=this.col,w=this.row,W=E*(this.WIDTH/h),P=(y-w-1)*(this.HEIGHT/y),j=(r-v.left-W)/(this.WIDTH/h)*2-1,V=-((o-v.top-P)/(this.HEIGHT/y))*2+1;return{x:j,y:V}}_handleMouseMove(r){clearTimeout(this.hoverTimeout),r.preventDefault();let o=this.getX(r),v=this.getY(r);if(o===void 0)return;let h=this.renderer.getXRatio(),y=this.renderer.getYRatio(),E=this.mouseXY(o,v),w=this;this.current_hover!==null&&this.handleHoverContinue(E.x,E.y);var W=0;if(!(!this.control_all&&!this.isInViewer(o,v))&&this.scene&&(this.hoverables.length>0&&(this.hoverTimeout=setTimeout(function(){w.handleHoverSelection(E.x,E.y,r)},this.hoverDuration)),!!this.isDragging)){r.targetTouches&&(r.targetTouches.length>1||r.targetTouches.length===1&&!this.closeEnoughForClick(r))&&clearTimeout(this.longTouchTimeout);var P=(o-this.mouseStartX)/this.WIDTH,j=(v-this.mouseStartY)/this.HEIGHT;if(this.touchDistanceStart!=0&&r.targetTouches&&r.targetTouches.length==2){var V=this.calcTouchDistance(r);W=2,j=(V-this.touchDistanceStart)*2/(this.WIDTH+this.HEIGHT)}else r.targetTouches&&r.targetTouches.length==3&&(W=1);P*=h,j*=y;var G=Math.hypot(P,j),F;if(W==3||this.mouseButton==3&&r.ctrlKey)this.slabNear=this.cslabNear+P*100,this.slabFar=this.cslabFar-j*100;else if(W==2||this.mouseButton==3||r.shiftKey)F=(this.CAMERA_Z-this.rotationGroup.position.z)*.85,F<80&&(F=80),this.rotationGroup.position.z=this.cz+j*F,this.rotationGroup.position.z=this.adjustZoomToLimits(this.rotationGroup.position.z);else if(W==1||this.mouseButton==2||r.ctrlKey){var H=this.screenOffsetToModel(h*(o-this.mouseStartX),y*(v-this.mouseStartY));this.modelGroup.position.addVectors(this.currentModelPos,H)}else if((W===0||this.mouseButton==1)&&G!==0){var K=Math.sin(G*Math.PI)/G;this.dq.x=Math.cos(G*Math.PI),this.dq.y=0,this.dq.z=K*P,this.dq.w=-K*j,this.rotationGroup.quaternion.set(1,0,0,0),this.rotationGroup.quaternion.multiply(this.dq),this.rotationGroup.quaternion.multiply(this.cq)}this.show()}}_handleContextMenu(r){if(r.preventDefault(),this.closeEnoughForClick(r)){var h=this.mouseStartX,y=this.mouseStartY,v=this.canvasOffset();let E=this.mouseXY(h,y),w=E.x,W=E.y,P=this.targetedObjects(w,W,this.contextMenuEnabledObjects);var o=null;P.length&&(o=P[0].clickable);var v=this.canvasOffset(),h=this.mouseStartX-v.left,y=this.mouseStartY-v.top;this.userContextMenuHandler&&(this.userContextMenuHandler(o,h,y,P,r),this.isDragging=!1)}}setContainer(r){let o=(0,B.getElement)(r)||this.container;return this.initContainer(o),this}setBackgroundColor(r,o){(typeof o>"u"||o<0||o>1)&&(o=1);var v=L.CC.color(r);return this.scene.fog.color=v,this.bgColor=v.getHex(),this.renderer.setClearColorHex(v.getHex(),o),this.show(),this}setProjection(r){this.camera.ortho=r==="orthographic",this.setSlabAndFog()}setViewStyle(r){if(r=r||{},r.style=r.style||"",r.style.includes("outline")?this.renderer.enableOutline(r):this.renderer.disableOutline(),r.style.includes("ambientOcclusion")){var o={};r.strength&&(o.strength=r.strength),r.radius&&(o.radius=r.radius),this.renderer.enableAmbientOcclusion(o)}else this.renderer.disableAmbientOcclusion();return this}updateSize(){this.renderer.setSize(this.WIDTH,this.HEIGHT),this.ASPECT=this.renderer.getAspect(this.WIDTH,this.HEIGHT),this.renderer.setSize(this.WIDTH,this.HEIGHT),this.camera.aspect=this.ASPECT,this.camera.updateProjectionMatrix()}setWidth(r){return this.WIDTH=r||this.WIDTH,this.updateSize(),this}setHeight(r){return this.HEIGHT=r||this.HEIGHT,this.updateSize(),this}resize(){this.WIDTH=this.getWidth(),this.HEIGHT=this.getHeight();let r=!1;if(this.renderer.isLost()&&this.WIDTH>0&&this.HEIGHT>0){let o=!1,v=this.container.querySelector("canvas");v&&v!=this.renderer.getCanvas()?this.config.canvas=v:(v.remove(),this.config&&this.config.canvas!=null&&(delete this.config.canvas,o=!0)),this.setupRenderer(),this.initContainer(this.container),this.renderer.setClearColorHex(this.bgColor,this.config.backgroundAlpha),r=!0,o&&(this.config.canvas=this.renderer.getCanvas())}if(this.WIDTH==0||this.HEIGHT==0?this.animated&&this._viewer.pauseAnimate():this.animated&&this._viewer.resumeAnimate(),this.updateSize(),r){let o=this.renderer.supportedExtensions();if(o.regen=!0,this.viewers)for(let v=0,h=this.viewers.length;v<h;v++)for(let y=0,E=this.viewers[v].length;y<E;y++)this.viewers[v][y].render(null,o);this._viewer.render(null,o)}else this.show();return this}getModel(r){return r===void 0?this.models.length==0?null:this.models[this.models.length-1]:r instanceof b.GLModel?r:r in this.models?this.models[r]:this.models.length==0?null:this.models[this.models.length-1]}spin(r,o=1,v=!1){if(clearInterval(this.spinInterval),typeof r>"u"&&(r="y"),typeof r=="boolean")if(r)r="y";else return;Array.isArray(r)&&(r={x:r[0],y:r[1],z:r[2]});var h=this;this.spinInterval=setInterval(function(){!h.getCanvas().isConnected&&h.renderer.isLost()&&clearInterval(h.spinInterval),(!v||h.container.checkVisibility&&h.container.checkVisibility())&&h.rotate(1*o,r)},25)}animateMotion(r,o,v,h,y,E){var w=20,W=Math.ceil(r/w);W<1&&(W=1),this.incAnim();var P={mpos:this.modelGroup.position.clone(),rz:this.rotationGroup.position.z,rot:this.rotationGroup.quaternion.clone(),cam:this.lookingAt.clone()};if(o){let G=new Array(W);for(let U=0;U<W;U++){let N=(U+1)/W,Y={mpos:P.mpos,rz:P.rz,rot:P.rot};Y.mpos=v.clone().sub(P.mpos).multiplyScalar(N).add(P.mpos),Y.rz=P.rz+N*(h-P.rz),Y.rot=n.slerp(P.rot,y,N),Y.cam=E.clone().sub(P.cam).multiplyScalar(N).add(P.cam),G[U]=Y}let F=0,H=this,K=function(){var U=G[F];F+=1,H.modelGroup.position=U.mpos,H.rotationGroup.position.z=U.rz,H.rotationGroup.quaternion=U.rot,H.camera.lookAt(U.cam),F<G.length?setTimeout(K,w):H.decAnim(),H.show()};setTimeout(K,w)}else{var j={};let G=1/W;if(v&&(j.mpos=v.clone().sub(P.mpos).multiplyScalar(G)),typeof h<"u"&&h!=null&&(j.rz=G*(h-P.rz)),y){var V=n.slerp(P.rot,y,G);j.rot=P.rot.clone().inverse().multiply(V)}E&&(j.cam=E.clone().sub(P.cam).multiplyScalar(G));let F=0,H=this,K=function(){F+=1,j.mpos&&H.modelGroup.position.add(j.mpos),j.rz&&(H.rotationGroup.position.z+=j.rz),j.rot&&H.rotationGroup.quaternion.multiply(j.rot),j.cam&&(H.lookingAt.add(j.cam),H.camera.lookAt(H.lookingAt)),F<W?setTimeout(K,w):H.decAnim(),H.show()};setTimeout(K,w)}}rotate(r,o="y",v=0,h=!1){if(o=="x"?o={x:1,y:0,z:0}:o=="y"?o={x:0,y:1,z:0}:o=="z"&&(o={x:0,y:0,z:1}),o=="vx"?o={vx:1,vy:0,vz:0}:o=="vy"?o={vx:0,vy:1,vz:0}:o=="vz"&&(o={vx:0,vy:0,vz:1}),typeof o.vx<"u"){var y=new z.Vector3(o.vx,o.vy,o.vz);y.applyQuaternion(this.rotationGroup.quaternion),o={x:y.x,y:y.y,z:y.z}}var E=function(j){var V=Math.sin(j/2),G=Math.cos(j/2),F=0,H=0,K=0;return F=o.x*V,H=o.y*V,K=o.z*V,new z.Quaternion(F,H,K,G).normalize()},w=Math.PI*r/180,W=E(w);if(v){var P=new z.Quaternion().copy(this.rotationGroup.quaternion).multiply(W);this.animateMotion(v,h,this.modelGroup.position,this.rotationGroup.position.z,P,this.lookingAt)}else this.rotationGroup.quaternion.multiply(W),this.show();return this}surfacesFinished(){for(var r in this.surfaces)if(!this.surfaces[r][0].done)return!1;return!0}getView(){if(!this.modelGroup)return[0,0,0,0,0,0,0,1];var r=this.modelGroup.position,o=this.rotationGroup.quaternion;return[r.x,r.y,r.z,this.rotationGroup.position.z,o.x,o.y,o.z,o.w]}setView(r,o){return r===void 0||!(r instanceof Array||r.length!==8)?this:!this.modelGroup||!this.rotationGroup?this:(this.modelGroup.position.x=r[0],this.modelGroup.position.y=r[1],this.modelGroup.position.z=r[2],this.rotationGroup.position.z=r[3],this.rotationGroup.quaternion.x=r[4],this.rotationGroup.quaternion.y=r[5],this.rotationGroup.quaternion.z=r[6],this.rotationGroup.quaternion.w=r[7],typeof r[8]<"u"&&(this.rotationGroup.position.x=r[8],this.rotationGroup.position.y=r[9]),this.show(o),this)}render(r,o){this.renderer.setViewport(),this.updateClickables();var v=this.getView();this.stateChangeCallback&&this.stateChangeCallback(this.getInternalState());var h,y;for(o||(o=this.renderer.supportedExtensions()),h=0;h<this.models.length;h++)this.models[h]&&this.models[h].globj(this.modelGroup,o);for(h=0;h<this.shapes.length;h++)this.shapes[h]&&(typeof this.shapes[h].frame>"u"||this.viewer_frame<0||this.shapes[h].frame<0||this.shapes[h].frame==this.viewer_frame?this.shapes[h].globj(this.modelGroup,o):this.shapes[h].removegl(this.modelGroup));for(h=0;h<this.labels.length;h++)o.regen&&(this.labels[h].dispose(),this.modelGroup.remove(this.labels[h].sprite),this.labels[h].setContext(),this.modelGroup.add(this.labels[h].sprite)),this.labels[h]&&typeof this.labels[h].frame<"u"&&this.labels[h].frame>=0&&(this.modelGroup.remove(this.labels[h].sprite),(this.viewer_frame<0||this.labels[h].frame==this.viewer_frame)&&this.modelGroup.add(this.labels[h].sprite));for(h in this.surfaces)if(this.surfaces.hasOwnProperty(h)){var E=this.surfaces[h];for(y=0;y<E.length;y++)if(E.hasOwnProperty(y)){var w=E[y].geo;if(!E[y].finished||o.regen){w.verticesNeedUpdate=!0,w.elementsNeedUpdate=!0,w.normalsNeedUpdate=!0,w.colorsNeedUpdate=!0,w.buffersNeedUpdate=!0,E[y].mat.needsUpdate=!0,E[y].done&&(E[y].finished=!0),E[y].lastGL&&this.modelGroup.remove(E[y].lastGL);var W=null;if(E[y].mat instanceof M.LineBasicMaterial?W=new M.Line(w,E[y].mat):W=new M.Mesh(w,E[y].mat),E[y].mat.transparent&&E[y].mat.opacity==0?W.visible=!1:W.visible=!0,E[y].symmetries.length>1||E[y].symmetries.length==1&&!E[y].symmetries[y].isIdentity()){var P,j=new M.Object3D;for(P=0;P<E[y].symmetries.length;P++){var V=W.clone();V.matrix=E[y].symmetries[P],V.matrixAutoUpdate=!1,j.add(V)}E[y].lastGL=j,this.modelGroup.add(j)}else E[y].lastGL=W,this.modelGroup.add(W)}}}return this.setView(v),typeof r=="function"&&r(this),this}getModelList(r){let o=[];if(typeof r>"u"||typeof r.model>"u")for(let h=0;h<this.models.length;h++)this.models[h]&&o.push(this.models[h]);else{let h=r.model;Array.isArray(h)||(h=[h]);for(let y=0;y<h.length;y++)if(typeof h[y]=="number"){var v=h[y];v<0&&(v+=this.models.length),o.push(this.models[v])}else o.push(h[y])}return o}getAtomsFromSel(r){var o=[];typeof r>"u"&&(r={});var v=this.getModelList(r);for(let h=0;h<v.length;h++)o=o.concat(v[h].selectedAtoms(r));return o}atomIsSelected(r,o){typeof o>"u"&&(o={});for(var v=this.getModelList(o),h=0;h<v.length;h++)if(v[h].atomIsSelected(r,o))return!0;return!1}selectedAtoms(r){return this.getAtomsFromSel(r)}getUniqueValues(r,o){typeof o>"u"&&(o={});var v=this.getAtomsFromSel(o),h={};for(var y in v)if(v[y].hasOwnProperty(r)){var E=v[y][r];h[E]=!0}return Object.keys(h)}pdbData(r){for(var o=this.getAtomsFromSel(r),v="",h=0,y=o.length;h<y;++h)v+=o[h].pdbline+`
`;return v}zoom(r=2,o=0,v=!1){var h=(this.CAMERA_Z-this.rotationGroup.position.z)/r,y=this.CAMERA_Z-h;return o>0?this.animateMotion(o,v,this.modelGroup.position,this.adjustZoomToLimits(y),this.rotationGroup.quaternion,this.lookingAt):(this.rotationGroup.position.z=this.adjustZoomToLimits(y),this.show()),this}translate(r,o,v=0,h=!1){var y=r/this.WIDTH,E=o/this.HEIGHT,w=new z.Vector3(0,0,-this.CAMERA_Z);this.projector.projectVector(w,this.camera),w.x-=y,w.y-=E,this.projector.unprojectVector(w,this.camera),w.z=0;var W=this.lookingAt.clone().add(w);return v>0?this.animateMotion(v,h,this.modelGroup.position,this.rotationGroup.position.z,this.rotationGroup.quaternion,W):(this.lookingAt=W,this.camera.lookAt(this.lookingAt),this.show()),this}translateScene(r,o,v=0,h=!1){var y=this.screenOffsetToModel(r,o),E=this.modelGroup.position.clone().add(y);return v>0?this.animateMotion(v,h,this.modelGroup.position,this.rotationGroup.position.z,this.rotationGroup.quaternion,this.lookingAt):(this.modelGroup.position=E,this.show()),this}fitSlab(r){r=r||{};var o=this.getAtomsFromSel(r),v=(0,B.getExtent)(o),h=v[1][0]-v[0][0],y=v[1][1]-v[0][1],E=v[1][2]-v[0][2],w=Math.hypot(h,y,E);return w<5&&(w=5),this.slabNear=-w/1.9,this.slabFar=w/2,this}center(r={},o=0,v=!1){var h,y,E=this.getAtomsFromSel(r),w=(0,B.getExtent)(E);(0,B.isEmptyObject)(r)?(this.shapes.forEach(N=>{if(N&&N.boundingSphere&&N.boundingSphere.center){var Y=N.boundingSphere.center,ne=N.boundingSphere.radius;ne>0?(E.push(new z.Vector3(Y.x+ne,Y.y,Y.z)),E.push(new z.Vector3(Y.x-ne,Y.y,Y.z)),E.push(new z.Vector3(Y.x,Y.y+ne,Y.z)),E.push(new z.Vector3(Y.x,Y.y-ne,Y.z)),E.push(new z.Vector3(Y.x,Y.y,Y.z+ne)),E.push(new z.Vector3(Y.x,Y.y,Y.z-ne))):E.push(Y)}}),w=(0,B.getExtent)(E),h=E,y=w):(h=this.getAtomsFromSel({}),y=(0,B.getExtent)(h));var W=new z.Vector3(w[2][0],w[2][1],w[2][2]),P=y[1][0]-y[0][0],j=y[1][1]-y[0][1],V=y[1][2]-y[0][2],G=Math.hypot(P,j,V);G<5&&(G=5),this.slabNear=-G/1.9,this.slabFar=G/2,P=w[1][0]-w[0][0],j=w[1][1]-w[0][1],V=w[1][2]-w[0][2],G=Math.hypot(P,j,V),G<5&&(G=5);for(var F=25,H=0;H<E.length;H++)if(E[H]){var K=W.distanceToSquared(E[H]);K>F&&(F=K)}G=Math.sqrt(F)*2;var U=W.clone().multiplyScalar(-1);return o>0?this.animateMotion(o,v,U,this.rotationGroup.position.z,this.rotationGroup.quaternion,this.lookingAt):(this.modelGroup.position=U,this.show()),this}zoomTo(r={},o=0,v=!1){let h=this.getAtomsFromSel(r),y=(0,B.getExtent)(h),E=y;if((0,B.isEmptyObject)(r)){let Y=h&&h.length;if(this.shapes.forEach(ne=>{if(ne&&ne.boundingSphere){if(ne.boundingSphere.box){let oe=ne.boundingSphere.box;h.push(new z.Vector3(oe.min.x,oe.min.y,oe.min.z)),h.push(new z.Vector3(oe.max.x,oe.max.y,oe.max.z))}else if(ne.boundingSphere.center){var ae=ne.boundingSphere.center,he=ne.boundingSphere.radius;he>0?(h.push(new z.Vector3(ae.x+he,ae.y,ae.z)),h.push(new z.Vector3(ae.x-he,ae.y,ae.z)),h.push(new z.Vector3(ae.x,ae.y+he,ae.z)),h.push(new z.Vector3(ae.x,ae.y-he,ae.z)),h.push(new z.Vector3(ae.x,ae.y,ae.z+he)),h.push(new z.Vector3(ae.x,ae.y,ae.z-he))):h.push(ae)}}}),E=(0,B.getExtent)(h),!Y)for(let ne=0;ne<3;ne++)y[2][ne]=(E[0][ne]+E[1][ne])/2}else{let Y=this.getAtomsFromSel({});E=(0,B.getExtent)(Y)}var w=new z.Vector3(y[2][0],y[2][1],y[2][2]),W=E[1][0]-E[0][0],P=E[1][1]-E[0][1],j=E[1][2]-E[0][2],V=Math.hypot(W,P,j);V<5&&(V=5),this.slabNear=-V/1.9,this.slabFar=V/2,Object.keys(r).length===0&&(this.slabNear=Math.min(-V*2,-50),this.slabFar=Math.max(V*2,50));var G=this.config.minimumZoomToDistance||5;W=y[1][0]-y[0][0],P=y[1][1]-y[0][1],j=y[1][2]-y[0][2],V=Math.hypot(W,P,j),V<G&&(V=G);for(var F=G*G,H=0;H<h.length;H++)if(h[H]){var K=w.distanceToSquared(h[H]);K>F&&(F=K)}V=Math.sqrt(F)*2;var U=w.clone().multiplyScalar(-1),N=-(V*.5/Math.tan(Math.PI/180*this.camera.fov/2)-this.CAMERA_Z);return N=this.adjustZoomToLimits(N),o>0?this.animateMotion(o,v,U,N,this.rotationGroup.quaternion,this.lookingAt):(this.modelGroup.position=U,this.rotationGroup.position.z=N,this.show()),this}setSlab(r,o){this.slabNear=r,this.slabFar=o}getSlab(){return{near:this.slabNear,far:this.slabFar}}addLabel(r,o={},v,h=!1){if(v){var y=(0,B.getExtent)(this.getAtomsFromSel(v));o.position={x:y[2][0],y:y[2][1],z:y[2][2]}}var E=new S.Label(r,o);return E.setContext(),this.modelGroup.add(E.sprite),this.labels.push(E),h||this.show(),E}addResLabels(r,o,v=!1){let h=this.labels.length;return this.applyToModels("addResLabels",r,this,o,v),this.show(),this.labels.slice(h)}addPropertyLabels(r,o,v){return this.applyToModels("addPropertyLabels",r,o,this,v),this.show(),this}removeLabel(r){for(var o=0;o<this.labels.length;o++)if(this.labels[o]==r){this.labels.splice(o,1),r.dispose(),this.modelGroup.remove(r.sprite);break}return this.show(),this}removeAllLabels(){for(var r=0;r<this.labels.length;r++)this.labels[r]&&this.labels[r].sprite&&this.modelGroup.remove(this.labels[r].sprite);return this.labels.splice(0,this.labels.length),this.show(),this}hideAllLabels(){for(var r=0;r<this.labels.length;r++)this.labels[r]&&this.labels[r].hide();return this.show(),this}showAllLabels(){for(var r=0;r<this.labels.length;r++)this.labels[r]&&this.labels[r].show();return this.show(),this}setLabelStyle(r,o){return this.modelGroup.remove(r.sprite),r.dispose(),r.stylespec=o,r.setContext(),this.modelGroup.add(r.sprite),this.show(),r}setLabelText(r,o){return this.modelGroup.remove(r.sprite),r.dispose(),r.text=o,r.setContext(),this.modelGroup.add(r.sprite),this.show(),r}addShape(r){r=r||{};var o=new m.GLShape(r);return o.shapePosition=this.shapes.length,this.shapes.push(o),o}removeShape(r){if(!r)return this;for(r.removegl(this.modelGroup),delete this.shapes[r.shapePosition];this.shapes.length>0&&typeof this.shapes[this.shapes.length-1]>"u";)this.shapes.pop();return this}removeAllShapes(){for(var r=0;r<this.shapes.length;r++){var o=this.shapes[r];o&&o.removegl(this.modelGroup)}return this.shapes.splice(0,this.shapes.length),this}getSelectionCenter(r){if(r.hasOwnProperty("x")&&r.hasOwnProperty("y")&&r.hasOwnProperty("z"))return r;var o=this.getAtomsFromSel(r);if(o.length==0)return{x:0,y:0,z:0};var v=(0,B.getExtent)(o);return{x:v[0][0]+(v[1][0]-v[0][0])/2,y:v[0][1]+(v[1][1]-v[0][1])/2,z:v[0][2]+(v[1][2]-v[0][2])/2}}addSphere(r){r=r||{},r.center=this.getSelectionCenter(r.center);var o=new m.GLShape(r);return o.shapePosition=this.shapes.length,o.addSphere(r),this.shapes.push(o),o.finalize(),o}addBox(r={}){r.corner!=null&&(r.corner=this.getSelectionCenter(r.corner)),r.center!=null&&(r.center=this.getSelectionCenter(r.center));var o=new m.GLShape(r);return o.shapePosition=this.shapes.length,o.addBox(r),this.shapes.push(o),o.finalize(),o}addArrow(r={}){r.start=this.getSelectionCenter(r.start),r.end=this.getSelectionCenter(r.end);var o=new m.GLShape(r);return o.shapePosition=this.shapes.length,o.addArrow(r),this.shapes.push(o),o.finalize(),o}addCylinder(r={}){r.start=this.getSelectionCenter(r.start),r.end=this.getSelectionCenter(r.end);var o=new m.GLShape(r);return o.shapePosition=this.shapes.length,r.dashed?o.addDashedCylinder(r):o.addCylinder(r),this.shapes.push(o),o.finalize(),o}addCurve(r={}){var o=new m.GLShape(r);return o.shapePosition=this.shapes.length,o.addCurve(r),this.shapes.push(o),o.finalize(),o}addLine(r={}){r.start=this.getSelectionCenter(r.start),r.end=this.getSelectionCenter(r.end),r.wireframe=!0;var o=new m.GLShape(r);return o.shapePosition=this.shapes.length,r.dashed?o=this.addLineDashed(r,o):o.addLine(r),this.shapes.push(o),o.finalize(),o}addUnitCell(r,o){r=this.getModel(r),o=o||{alabel:"a",blabel:"b",clabel:"c"},o.box=o.box||{},o.astyle=o.astyle||{color:"red",radius:.1,midpos:-1},o.bstyle=o.bstyle||{color:"green",radius:.1,midpos:-1},o.cstyle=o.cstyle||{color:"blue",radius:.1,midpos:-1},o.alabelstyle=o.alabelstyle||{fontColor:"red",showBackground:!1,alignment:"center",inFront:!1},o.blabelstyle=o.blabelstyle||{fontColor:"green",showBackground:!1,alignment:"center",inFront:!1},o.clabelstyle=o.clabelstyle||{fontColor:"blue",showBackground:!1,alignment:"center",inFront:!1},r.unitCellObjects&&this.removeUnitCell(r),r.unitCellObjects={shapes:[],labels:[]};var v=r.getCrystData(),h=null;if(v){if(v.matrix)h=v.matrix;else{var y=v.a,E=v.b,w=v.c,W=v.alpha,P=v.beta,j=v.gamma;W=W*Math.PI/180,P=P*Math.PI/180,j=j*Math.PI/180;var V,G,F;V=Math.cos(P),G=(Math.cos(W)-Math.cos(P)*Math.cos(j))/Math.sin(j),F=Math.sqrt(Math.max(0,1-V*V-G*G)),h=new z.Matrix3(y,E*Math.cos(j),w*V,0,E*Math.sin(j),w*G,0,0,w*F)}var H=[new z.Vector3(0,0,0),new z.Vector3(1,0,0),new z.Vector3(0,1,0),new z.Vector3(0,0,1),new z.Vector3(1,1,0),new z.Vector3(0,1,1),new z.Vector3(1,0,1),new z.Vector3(1,1,1)];if(v.matrix4)for(let U=0;U<H.length;U++)v.size&&H[U].multiplyVectors(H[U],v.size),H[U]=H[U].applyMatrix4(v.matrix4);else for(let U=0;U<H.length;U++)H[U]=H[U].applyMatrix3(h);if(o.box&&!o.box.hidden){o.box.wireframe=!0;var K=new m.GLShape(o.box);K.shapePosition=this.shapes.length,K.addLine({start:H[0],end:H[1]}),K.addLine({start:H[0],end:H[2]}),K.addLine({start:H[1],end:H[4]}),K.addLine({start:H[2],end:H[4]}),K.addLine({start:H[0],end:H[3]}),K.addLine({start:H[3],end:H[5]}),K.addLine({start:H[2],end:H[5]}),K.addLine({start:H[1],end:H[6]}),K.addLine({start:H[4],end:H[7]}),K.addLine({start:H[6],end:H[7]}),K.addLine({start:H[3],end:H[6]}),K.addLine({start:H[5],end:H[7]}),this.shapes.push(K),r.unitCellObjects.shapes.push(K),K.finalize()}if(!o.astyle.hidden){o.astyle.start=H[0],o.astyle.end=H[1];let U=this.addArrow(o.astyle);r.unitCellObjects.shapes.push(U)}if(!o.bstyle.hidden){o.bstyle.start=H[0],o.bstyle.end=H[2];let U=this.addArrow(o.bstyle);r.unitCellObjects.shapes.push(U)}if(!o.cstyle.hidden){o.cstyle.start=H[0],o.cstyle.end=H[3];let U=this.addArrow(o.cstyle);r.unitCellObjects.shapes.push(U)}if(o.alabel){o.alabelstyle.position=H[1];let U=this.addLabel(o.alabel,o.alabelstyle);r.unitCellObjects.labels.push(U)}if(o.blabel){o.blabelstyle.position=H[2];let U=this.addLabel(o.blabel,o.blabelstyle);r.unitCellObjects.labels.push(U)}if(o.clabel){o.clabelstyle.position=H[3];let U=this.addLabel(o.clabel,o.clabelstyle);r.unitCellObjects.labels.push(U)}}}removeUnitCell(r){if(r=this.getModel(r),r.unitCellObjects){let o=this;r.unitCellObjects.shapes.forEach(function(v){o.removeShape(v)}),r.unitCellObjects.labels.forEach(function(v){o.removeLabel(v)})}delete r.unitCellObjects}replicateUnitCell(r=3,o=r,v=o,h,y,E){h=this.getModel(h);let w=h.getCrystData();if(w){const W=h.selectedAtoms({}),P=w.matrix;let j=function(G){return G%2==0?-G/2:Math.ceil(G/2)};r<=1&&o<=1&&v<=1&&(E=!0,r=o=v=3);let V=function(G,F,H){return!1};if(E){const G=new z.Matrix3().getInverse3(P);V=function(F,H,K){let U=new z.Vector3(F,H,K).applyMatrix3(G);return!(U.x>-1e-4&&U.x<1.0001&&U.y>-1e-4&&U.y<1.0001&&U.z>-1e-4&&U.z<1.0001)}}for(let G=0;G<r;G++)for(let F=0;F<o;F++)for(let H=0;H<v;H++){if(G==0&&F==0&&H==0)continue;let K=new z.Vector3(j(G),j(F),j(H));K.applyMatrix3(P);let U=[];for(let N=0;N<W.length;N++){let Y=W[N].x+K.x,ne=W[N].y+K.y,ae=W[N].z+K.z;if(V(Y,ne,ae))continue;let he={};for(let oe in W[N])he[oe]=W[N][oe];he.x=Y,he.y=ne,he.z=ae,U.push(he)}h.addAtoms(U)}y&&h.assignBonds()}}addLineDashed(r,o){r.dashLength=r.dashLength||.5,r.gapLength=r.gapLength||.5;var v;r.start?v=new z.Vector3(r.start.x||0,r.start.y||0,r.start.z||0):v=new z.Vector3(0,0,0);var h;r.end?h=new z.Vector3(r.end.x,r.end.y||0,r.end.z||0):h=new z.Vector3(0,0,0);var y=new z.Vector3,E=new z.Vector3,w=new z.Vector3,W,P,j,V=v.clone(),G=0;for(y.subVectors(h,v),W=y.length(),y.normalize(),E=y.clone(),w=y.clone(),E.multiplyScalar(r.dashLength),w.multiplyScalar(r.gapLength),P=E.length(),j=w.length();G<W;){if(G+P>W){r.start=v,r.end=h,o.addLine(r);break}V.addVectors(v,E),r.start=v,r.end=V,o.addLine(r),v=V.clone(),G+=P,V.addVectors(v,w),v=V.clone(),G+=j}return o.finalize(),o}addCustom(r){r=r||{};var o=new m.GLShape(r);return o.shapePosition=this.shapes.length,o.addCustom(r),this.shapes.push(o),o.finalize(),o}addVolumetricData(r,o,v={}){var h=new T.VolumeData(r,o);return v.hasOwnProperty("transferfn")?this.addVolumetricRender(h,v):this.addIsosurface(h,v)}addIsosurface(r,o={},v){var h=new m.GLShape(o);return h.shapePosition=this.shapes.length,h.addIsosurface(r,o,v,this),this.shapes.push(h),h}addVolumetricRender(r,o){o=o||{};var v=new p.GLVolumetricRender(r,o,this);return v.shapePosition=this.shapes.length,this.shapes.push(v),v}hasVolumetricRender(){return this.renderer.supportsVolumetric()}enableFog(r){r?this.scene.fog=new M.Fog(this.bgColor,100,200):(this.config.disableFog=!0,this.show())}setFrame(r){this.viewer_frame=r;let o=this;return new Promise(function(v){var h=o.models.map(function(y){return y.setFrame(r,o)});Promise.all(h).then(function(){v()})})}getFrame(){return this.viewer_frame}getNumFrames(){var r=0;for(let o=0;o<this.models.length;o++)this.models[o].getNumFrames()>r&&(r=this.models[o].getNumFrames());for(let o=0;o<this.shapes.length;o++)this.shapes[o].frame&&this.shapes[o].frame>=r&&(r=this.shapes[o].frame+1);for(let o=0;o<this.labels.length;o++)this.labels[o].frame&&this.labels[o].frame>=r&&(r=this.labels[o].frame+1);return r}animate(r){this.incAnim();var o=100,v="forward",h=1/0;r=r||{},r.interval&&(o=r.interval),r.loop&&(v=r.loop),r.reps&&(h=r.reps);var y=this.getNumFrames(),E=this,w=0;r.startFrame&&(w=r.startFrame%y);var W=1;r.step&&(W=r.step,h/=W);var P=0,j=y*h,V=new Date,G,F,H=function(K){V=new Date,K=="forward"?E.setFrame(w).then(function(){w=(w+W)%y,G()}):K=="backward"?E.setFrame(y-1-w).then(function(){w=(w+W)%y,G()}):E.setFrame(w).then(function(){w+=W,W*=w%(y-1)==0?-1:1,G()})};return G=function(){if(E.render(),!E.getCanvas().isConnected)E.stopAnimate();else if(++P>=j||!E.isAnimated())F.cancel(),E.animationTimers.delete(F),E.decAnim();else{var K=o-(new Date().getTime()-V.getTime());K=K>0?K:0,E.animationTimers.delete(F),F=new B.PausableTimer(H,K,v),E.animationTimers.add(F)}},F=new B.PausableTimer(H,0,v),this.animationTimers.add(F),this}stopAnimate(){return this.animated=0,this.animationTimers.forEach(function(r){r.cancel()}),this.animationTimers=new Set,this}pauseAnimate(){return this.animationTimers.forEach(function(r){r.pause()}),this}resumeAnimate(){return this.animationTimers.forEach(function(r){r.resume()}),this}isAnimated(){return this.animated>0}getModelOpt(r){return r&&!r.defaultcolors?(r.defaultcolors=this.defaultcolors,r.cartoonQuality=r.cartoonQuality||this.config.cartoonQuality):typeof r>"u"&&(r={defaultcolors:this.defaultcolors,cartoonQuality:this.config.cartoonQuality}),r}addModel(r,o="",v){v=this.getModelOpt(v);var h=new b.GLModel(this.models.length,v);return h.addMolData(r,o,v),this.models.push(h),h}addModels(r,o,v){v=this.getModelOpt(v),v.multimodel=!0,v.frames=!0;for(var h=b.GLModel.parseMolData(r,o,v),y=0;y<h.length;y++){var E=new b.GLModel(this.models.length,v);E.setAtomDefaults(h[y]),E.addFrame(h[y]),E.setFrame(0),h.modelData&&E.setModelData(h.modelData[y]),E.setDontDuplicateAtoms(!v.duplicateAssemblyAtoms),this.models.push(E)}return this.models}addModelsAsFrames(r,o,v){v=this.getModelOpt(v),v.multimodel=!0,v.frames=!0;var h=new b.GLModel(this.models.length,v);return h.addMolData(r,o,v),this.models.push(h),h}addAsOneMolecule(r,o,v){v=this.getModelOpt(v),v.multimodel=!0,v.onemol=!0;var h=new b.GLModel(this.models.length,v);return h.addMolData(r,o,v),this.models.push(h),h}removeModel(r){if(r=this.getModel(r),!!r){for(r.removegl(this.modelGroup),delete this.models[r.getID()];this.models.length>0&&typeof this.models[this.models.length-1]>"u";)this.models.pop();return this}}removeAllModels(){for(var r=0;r<this.models.length;r++){var o=this.models[r];o&&o.removegl(this.modelGroup)}return this.models.splice(0,this.models.length),this}exportJSON(r,o){var v={};return o===void 0?v.m=this.models.map(function(h){return h.toCDObject(r)}):v.m=[this.models[o].toCDObject()],JSON.stringify(v)}exportVRML(){var r=this.modelGroup;this.applyToModels("removegl",this.modelGroup),this.modelGroup=new M.Object3D,this.render(null,{supportsImposters:!1,supportsAIA:!1,regen:!0});var o=`#VRML V2.0 utf8
`+this.modelGroup.vrml()+`
`;return this.applyToModels("removegl",this.modelGroup),this.modelGroup=r,o}createModelFrom(r,o=!1){for(var v=new b.GLModel(this.models.length,this.defaultcolors),h=0;h<this.models.length;h++)if(this.models[h]){var y=this.models[h].selectedAtoms(r);v.addAtoms(y),o&&this.models[h].removeAtoms(y)}return this.models.push(v),v}applyToModels(r,o,v,h,y,E,w){for(var W=this.getModelList(o),P=0;P<W.length;P++)W[P][r](o,v,h,y,E,w)}setStyle(r,o){return typeof o>"u"&&(o=r,r={}),this.applyToModels("setStyle",r,o,!1),this}addStyle(r,o){return typeof o>"u"&&(o=r,r={}),this.applyToModels("setStyle",r,o,!0),this}setClickable(r,o,v){return this.applyToModels("setClickable",r,o,v),this}setHoverable(r,o,v,h){return this.applyToModels("setHoverable",r,o,v,h),this}enableContextMenu(r,o){return this.applyToModels("enableContextMenu",r,o),this}vibrate(r,o,v,h){return this.applyToModels("vibrate",r,o,v,this,h),this}setColorByProperty(r,o,v,h){return this.applyToModels("setColorByProperty",r,o,v,h),this}setColorByElement(r,o){return this.applyToModels("setColorByElement",r,o),this}static getAtomsWithin(r,o){var v=[];for(let y=0;y<r.length;y++){var h=r[y];typeof h>"u"||h.x<o[0][0]||h.x>o[1][0]||h.y<o[0][1]||h.y>o[1][1]||h.z<o[0][2]||h.z>o[1][2]||v.push(h)}return v}static volume(r){var o=r[1][0]-r[0][0],v=r[1][1]-r[0][1],h=r[1][2]-r[0][2];return o*v*h}carveUpExtent(r,o,v){let h=[],y={};for(let V=0,G=o.length;V<G;V++)y[o[V].index]=V;let E=function(V){let G=[];for(let F=0,H=V.length;F<H;F++)V[F].index in y&&G.push(y[V[F].index]);return G},w=function(V){let G=[];return G[0]=[V[0][0],V[0][1],V[0][2]],G[1]=[V[1][0],V[1][1],V[1][2]],G},W=function(V){if(n.volume(V)<n.maxVolume)return[V];var G=V[1][0]-V[0][0],F=V[1][1]-V[0][1],H=V[1][2]-V[0][2],K;G>F&&G>H?K=0:F>G&&F>H?K=1:K=2;var U=w(V),N=w(V),Y=(V[1][K]-V[0][K])/2+V[0][K];U[1][K]=Y,N[0][K]=Y;var ne=W(U),ae=W(N);return ne.concat(ae)},P=W(r),j=6;for(let V=0,G=P.length;V<G;V++){let F=w(P[V]);F[0][0]-=j,F[0][1]-=j,F[0][2]-=j,F[1][0]+=j,F[1][1]+=j,F[1][2]+=j;let H=n.getAtomsWithin(o,F),K=n.getAtomsWithin(v,P[V]);h.push({extent:P[V],atoms:E(H),toshow:E(K)})}return h}static generateSurfaceMesh(r,o,v){var h=new M.Geometry(!0),y=h.updateGeoGroup(0),E=[];for(let be=0,fe=r.length;be<fe;be++){var w=r[be];w&&(typeof w.surfaceColor<"u"?E[be]=w.surfaceColor:w.color&&(E[be]=L.CC.color(w.color)))}var W=y.vertexArray,P=o.vertices;for(let be=0,fe=P.length;be<fe;be++){let De=y.vertices*3;W[De]=P[be].x,W[De+1]=P[be].y,W[De+2]=P[be].z,y.vertices++}var j=y.colorArray;let V=y.atomArray;if(v.voldata&&v.volscheme){var G=v.volscheme,F=v.voldata,H=G.range()||[-1,1];for(let be=0,fe=P.length;be<fe;be++){let De=P[be].atomid,Ve=F.getVal(P[be].x,P[be].y,P[be].z),Xe=L.CC.color(G.valueToHex(Ve,H)),it=be*3;j[it]=Xe.r,j[it+1]=Xe.g,j[it+2]=Xe.b,V[be]=r[De]}}else if(E.length>0)for(let be=0,fe=P.length;be<fe;be++){let De=P[be].atomid,Ve=be*3;j[Ve]=E[De].r,j[Ve+1]=E[De].g,j[Ve+2]=E[De].b,V[be]=r[De]}var K=o.faces;y.faceidx=K.length,h.initTypedArrays();var U=y.vertexArray,N=y.normalArray,Y,ne,ae,he;for(let be=0,fe=K.length;be<fe;be+=3){var oe=K[be],pe=K[be+1],ue=K[be+2],ge=oe*3,Fe=pe*3,Be=ue*3;Y=new z.Vector3(U[ge],U[ge+1],U[ge+2]),ne=new z.Vector3(U[Fe],U[Fe+1],U[Fe+2]),ae=new z.Vector3(U[Be],U[Be+1],U[Be+2]),ae.subVectors(ae,ne),Y.subVectors(Y,ne),ae.cross(Y),he=ae,he.normalize(),N[ge]+=he.x,N[Fe]+=he.x,N[Be]+=he.x,N[ge+1]+=he.y,N[Fe+1]+=he.y,N[Be+1]+=he.y,N[ge+2]+=he.z,N[Fe+2]+=he.z,N[Be+2]+=he.z}y.faceArray=new Uint16Array(K);var ke=new M.Mesh(h,v);return ke}static generateMeshSyncHelper(r,o,v,h,y,E){var w=new D.ProteinSurface;return w.initparm(o,r!==1,E),w.fillvoxels(y,v),w.buildboundary(),(r==D.SurfaceType.SES||r==D.SurfaceType.MS)&&(w.fastdistancemap(),w.boundingatom(!1),w.fillvoxelswaals(y,v)),w.marchingcube(r),w.getFacesAndVertices(h)}static getMatWithStyle(r){let o=null;r.onesided?o=new M.MeshLambertMaterial:o=new M.MeshDoubleLambertMaterial,o.vertexColors=M.Coloring.VertexColors;for(var v in r)v==="color"||v==="map"||r.hasOwnProperty(v)&&(o[v]=r[v]);return r.opacity!==void 0&&(r.opacity===1?o.transparent=!1:o.transparent=!0),o}addMesh(r){var o={geo:r.geometry,mat:r.material,done:!0,finished:!1},v=this.nextSurfID();return this.surfaces[v]=[o],v}static shallowCopy(r){var o=[];let v=r.length;for(let h=0;h<v;h++)o[h]=(0,B.extend)({},r[h]);return o}addSurface(r,o={},v={},h,y,E){let w=this.nextSurfID(),W=null,P=this,j=D.SurfaceType.VDW;typeof r=="string"?n.surfaceTypeMap[r.toUpperCase()]!==void 0?j=n.surfaceTypeMap[r]:console.log("Surface type : "+r+" is not recognized"):typeof r=="number"&&(j=r);var V=null,G=null,F=n.shallowCopy(this.getAtomsFromSel(v));h?V=n.shallowCopy(this.getAtomsFromSel(h)):V=F,(0,B.adjustVolumeStyle)(o);var H=!1,K;for(K=0;K<this.models.length;K++)if(this.models[K]){var U=this.models[K].getSymmetries();if(U.length>1||U.length==1&&!U[0].isIdentity()){H=!0;break}}var N=function(ue,ge,Fe){y?G=n.shallowCopy(P.getAtomsFromSel(y)):G=Fe;var Be,ke=(0,B.getExtent)(Fe,!0);if(o.map&&o.map.prop){var be=o.map.prop;let Ge=(0,x.getGradient)(o.map.scheme||o.map.gradient||new x.Gradient.RWB),ot=Ge.range();ot||(ot=(0,B.getPropertyRange)(Fe,be)),o.colorscheme={prop:be,gradient:Ge}}for(let Ge=0,ot=ge.length;Ge<ot;Ge++)Be=ge[Ge],Be.surfaceColor=(0,B.getColorFromStyle)(Be,o);var fe=n.volume(ke),De=P.carveUpExtent(ke,ge,Fe);if(G&&G.length&&G.length>0){var Ve=(0,B.getExtent)(G,!0),Xe=function(Ge,ot){var st=function(re,Se){var ve=re.extent,je=ve[1][0]-ve[0][0],Ie=ve[1][1]-ve[0][1],J=ve[1][2]-ve[0][2],me=je-Se[2][0];me*=me;var Te=Ie-Se[2][1];Te*=Te;var He=J-Se[2][2];return He*=He,me+Te+He},Q=st(Ge,Ve),ee=st(ot,Ve);return Q-ee};De.sort(Xe)}var it=[];for(let Ge=0,ot=ge.length;Ge<ot;Ge++)Be=ge[Ge],it[Ge]={x:Be.x,y:Be.y,z:Be.z,serial:Ge,elem:Be.elem};var nt=!!D.syncSurface;if(nt){var et=function(ot){return new Promise(function(st){for(var Q=n.generateMeshSyncHelper(j,De[ot].extent,De[ot].atoms,De[ot].toshow,it,fe),ee=(0,m.splitMesh)({vertexArr:Q.vertices,faceArr:Q.faces}),re=0,Se=ee.length;re<Se;re++){Q={vertices:ee[re].vertexArr,faces:ee[re].faceArr};var ve=n.generateSurfaceMesh(ge,Q,W);(0,B.mergeGeos)(ue.geo,ve)}P.render(),st()})},$e=[];for(let Ge=0;Ge<De.length;Ge++)$e.push(et(Ge));return Promise.all($e).then(function(){return ue.done=!0,Promise.resolve(w)})}else{var Qe=[];j<0&&(j=0);for(let Ge=0,ot=n.numWorkers;Ge<ot;Ge++){var Ye=new Worker($3Dmol.SurfaceWorker);Qe.push(Ye),Ye.postMessage({type:-1,atoms:it,volume:fe})}return new Promise(function(Ge,ot){var st=0,Q=function(){!Qe||!Qe.length||Qe.forEach(function(ve){ve&&ve.terminate&&ve.terminate()})},ee=function(ve){for(var je=(0,m.splitMesh)({vertexArr:ve.data.vertices,faceArr:ve.data.faces}),Ie=0,J=je.length;Ie<J;Ie++){var me={vertices:je[Ie].vertexArr,faces:je[Ie].faceArr},Te=n.generateSurfaceMesh(ge,me,W);(0,B.mergeGeos)(ue.geo,Te)}P.render(),st++,st==De.length&&(ue.done=!0,Q(),Ge(w))},re=function(ve){Q(),console.log(ve.message+" ("+ve.filename+":"+ve.lineno+")"),ot(ve)};for(let ve=0;ve<De.length;ve++){var Se=Qe[ve%Qe.length];Se.onmessage=ee,Se.onerror=re,Se.postMessage({type:j,expandedExtent:De[ve].extent,extendedAtoms:De[ve].atoms,atomsToShow:De[ve].toshow})}})}};o=o||{},W=n.getMatWithStyle(o);var Y=[];Y.style=o,Y.atomsel=v,Y.allsel=h,Y.focus=y;var ne=null;if(H){var ae={},he={};for(K=0;K<this.models.length;K++)ae[K]=[],he[K]=[];for(K=0;K<V.length;K++)ae[V[K].model].push(V[K]);for(K=0;K<F.length;K++)he[F[K].model].push(F[K]);var oe=[];for(K=0;K<this.models.length;K++)he[K].length>0&&(Y.push({geo:new M.Geometry(!0),mat:W,done:!1,finished:!1,symmetries:this.models[K].getSymmetries()}),oe.push(N(Y[Y.length-1],ae[K],he[K])));ne=Promise.all(oe)}else Y.push({geo:new M.Geometry(!0),mat:W,done:!1,finished:!1,symmetries:[new z.Matrix4]}),ne=N(Y[Y.length-1],V,F);return this.surfaces[w]=Y,ne.surfid=w,E&&typeof E=="function"?(ne.then(function(pe){E(pe)}),w):ne}setSurfaceMaterialStyle(r,o){if((0,B.adjustVolumeStyle)(o),this.surfaces[r]){var v=this.surfaces[r];for(let y=0;y<v.length;y++){var h=v[y].mat=n.getMatWithStyle(o);if(v[y].mat.side=M.FrontSide,o.color){v[y].mat.color=L.CC.color(o.color),v[y].geo.colorsNeedUpdate=!0;const E=L.CC.color(o.color);v[y].geo.setColor(E)}else if(h.voldata&&h.volscheme){const E=h.volscheme,w=h.voldata,W=L.CC,P=E.range()||[-1,1];v[y].geo.setColors(function(j,V,G){let F=w.getVal(j,V,G);return W.color(E.valueToHex(F,P))})}else{v[y].geo.colorsNeedUpdate=!0;for(let E of v[y].geo.geometryGroups)for(let w=0;w<E.vertices;w++){let W=(0,B.getColorFromStyle)(E.atomArray[w],o),P=3*w;E.colorArray[P]=W.r,E.colorArray[P+1]=W.g,E.colorArray[P+2]=W.b}}v[y].finished=!1}}return this}getSurface(r){return this.surfaces[r]}removeSurface(r){for(var o=this.surfaces[r],v=0;v<o.length;v++)o[v]&&o[v].lastGL&&(o[v].geo!==void 0&&o[v].geo.dispose(),o[v].mat!==void 0&&o[v].mat.dispose(),this.modelGroup.remove(o[v].lastGL));return delete this.surfaces[r],this.show(),this}removeAllSurfaces(){for(var r in this.surfaces)if(this.surfaces.hasOwnProperty(r)){for(var o=this.surfaces[r],v=0;v<o.length;v++)o[v]&&o[v].lastGL&&(o[v].geo!==void 0&&o[v].geo.dispose(),o[v].mat!==void 0&&o[v].mat.dispose(),this.modelGroup.remove(o[v].lastGL));delete this.surfaces[r]}return this.show(),this}jmolMoveTo(){var r=this.modelGroup.position,o="center { "+-r.x+" "+-r.y+" "+-r.z+" }; ",v=this.rotationGroup.quaternion;return o+="moveto .5 quaternion { "+v.x+" "+v.y+" "+v.z+" "+v.w+" };",o}clear(){return this.removeAllSurfaces(),this.removeAllModels(),this.removeAllLabels(),this.removeAllShapes(),this.show(),this}mapAtomProperties(r,o){o=o||{};var v=this.getAtomsFromSel(o);if(typeof r=="function")for(let E=0,w=v.length;E<w;E++){let W=v[E];r(W)}else for(let E=0,w=v.length;E<w;E++){var h=v[E];for(let W=0,P=r.length;W<P;W++){let j=r[W];if(j.props)for(var y in j.props)j.props.hasOwnProperty(y)&&this.atomIsSelected(h,j)&&(h.properties||(h.properties={}),h.properties[y]=j.props[y])}}return this}linkViewer(r){return this.linkedViewers.push(r),this}getPerceivedDistance(){return this.CAMERA_Z-this.rotationGroup.position.z}setPerceivedDistance(r){this.rotationGroup.position.z=this.CAMERA_Z-r}setAutoEyeSeparation(r,o){var v=this.getPerceivedDistance();return o||(o=5),r||this.camera.position.x>0?this.camera.position.x=v*Math.tan(Math.PI/180*o):this.camera.position.x=-v*Math.tan(Math.PI/180*o),this.camera.lookAt(new z.Vector3(0,0,this.rotationGroup.position.z)),this.camera.position.x}setDefaultCartoonQuality(r){this.config.cartoonQuality=r}}n.numWorkers=4,n.maxVolume=64e3,n.surfaceTypeMap={VDW:D.SurfaceType.VDW,MS:D.SurfaceType.MS,SAS:D.SurfaceType.SAS,SES:D.SurfaceType.SES};function a(d,r){if(d=(0,B.getElement)(d),!!d){r=r||{};try{var o=new n(d,r);return o}catch(v){throw"error creating viewer: "+v}}}function u(d,r={},o={}){if(d=(0,B.getElement)(d),!!d){var v=[],h=document.createElement("canvas");o.rows=r.rows,o.cols=r.cols,o.control_all=r.control_all!=null?r.control_all:!1,d.appendChild(h);try{for(var y=0;y<r.rows;y++){for(var E=[],w=0;w<r.cols;w++){o.row=y,o.col=w,o.canvas=h,o.viewers=v,o.control_all=r.control_all;var W=a(d,(0,B.extend)({},o));E.push(W)}v.unshift(E)}}catch(P){throw"error creating viewer grid: "+P}return v}}function f(d){var r=this;if(d=(0,B.getElement)(d),!!d){var o=u(d,{rows:1,cols:2,control_all:!0});this.glviewer1=o[0][0],this.glviewer2=o[0][1],this.glviewer1.setAutoEyeSeparation(!1),this.glviewer2.setAutoEyeSeparation(!0),this.glviewer1.linkViewer(this.glviewer2),this.glviewer2.linkViewer(this.glviewer1);for(var v=Object.getOwnPropertyNames(this.glviewer1.__proto__).filter(function(y){return typeof r.glviewer1[y]=="function"}),h=0;h<v.length;h++)this[v[h]]=function(y){return function(){var E=this.glviewer1[y].apply(this.glviewer1,arguments),w=this.glviewer2[y].apply(this.glviewer2,arguments);return[E,w]}}(v[h]);this.setCoordinates=function(y,E,w){for(var W=0;W<y.length;W++)y[W].setCoordinates(E,w)},this.surfacesFinished=function(){return this.glviewer1.surfacesFinished()&&this.glviewer2.surfacesFinished()},this.isAnimated=function(){return this.glviewer1.isAnimated()||this.glviewer2.isAnimated()},this.render=function(y){this.glviewer1.render(),this.glviewer2.render(),y&&y(this)},this.getCanvas=function(){return this.glviewer1.getCanvas()}}}},"./src/Gradient.ts":(k,R,g)=>{g.r(R),g.d(R,{CustomLinear:()=>m,Gradient:()=>D,GradientType:()=>z,ROYGB:()=>b,RWB:()=>x,Sinebow:()=>S,builtinGradients:()=>T,getGradient:()=>B,normalizeValue:()=>L});var M=g("./src/colors.ts");class z{}function L(p,A,l){return A>=p?(l<p&&(l=p),l>A&&(l=A),{lo:p,hi:A,val:l}):(l>p&&(l=p),l<A&&(l=A),l=p-l+A,{lo:A,hi:p,val:l})}function B(p){if(p instanceof z)return p;if(p.gradient!==void 0&&T[p.gradient]){let A=p.min===void 0?-1:p.min,l=p.max===void 0?1:p.max;return p.mid===void 0?p.colors===void 0?new T[p.gradient](A,l):new T[p.gradient](A,l,p.colors):new T[p.gradient](A,l,p.mid)}else if(typeof p.gradient=="string"&&p.gradient.startsWith("linear_")){let A=p.gradient.split("_");A.shift();let l=p.min===void 0?-1:p.min,n=p.max===void 0?1:p.max;return new m(l,n,A)}return p}class x extends z{constructor(A,l,n){super(),this.gradient="RWB",this.mult=1,this.mid=n,this.min=A,this.max=l,typeof l>"u"&&Array.isArray(A)&&A.length>=2?(this.max=A[1],this.min=A[0]):A&&l&&!Array.isArray(A)&&(this.min=A,this.max=l)}range(){return typeof this.min<"u"&&typeof this.max<"u"?[this.min,this.max]:null}valueToHex(A,l){var n,a;if(A=this.mult*A,l?(n=l[0],a=l[1]):(n=this.min,a=this.max),A===void 0)return 16777215;var u=L(n,a,A);n=u.lo,a=u.hi,A=u.val;var f=(a+n)/2;l&&typeof l[2]<"u"?f=l[2]:typeof this.mid<"u"?f=this.mid:f=(n+a)/2;var d,r;return A<f?(d=Math.floor(255*Math.sqrt((A-n)/(f-n))),r=16711680+256*d+d,r):A>f?(d=Math.floor(255*Math.sqrt(1-(A-f)/(a-f))),r=65536*d+256*d+255,r):16777215}}class b extends z{constructor(A,l){super(),this.gradient="ROYGB",this.mult=1,this.min=A,this.max=l,typeof l>"u"&&Array.isArray(A)&&A.length>=2?(this.max=A[1],this.min=A[0]):A&&l&&!Array.isArray(A)&&(this.min=A,this.max=l)}valueToHex(A,l){var n,a;if(A=this.mult*A,l?(n=l[0],a=l[1]):(n=this.min,a=this.max),typeof A>"u")return 16777215;var u=L(n,a,A);n=u.lo,a=u.hi,A=u.val;var f=(n+a)/2,d=(n+f)/2,r=(f+a)/2,o,v;return A<d?(o=Math.floor(255*Math.sqrt((A-n)/(d-n))),v=16711680+256*o+0,v):A<f?(o=Math.floor(255*Math.sqrt(1-(A-d)/(f-d))),v=65536*o+65280+0,v):A<r?(o=Math.floor(255*Math.sqrt((A-f)/(r-f))),v=65280+1*o,v):(o=Math.floor(255*Math.sqrt(1-(A-r)/(a-r))),v=0+256*o+255,v)}range(){return typeof this.min<"u"&&typeof this.max<"u"?[this.min,this.max]:null}}class S extends z{constructor(A,l){super(),this.gradient="Sinebow",this.mult=1,this.min=A,this.max=l,typeof l>"u"&&Array.isArray(A)&&A.length>=2&&(this.max=A[1],this.min=A[0]),l<A&&(this.mult=-1,this.min*=-1,this.max*=-1)}valueToHex(A,l){var n,a;if(A=this.mult*A,l?(n=l[0],a=l[1]):(n=this.min,a=this.max),typeof A>"u")return 16777215;var u=D.normalizeValue(n,a,A);n=u.lo,a=u.hi,A=u.val;var f=(A-n)/(a-n),d=5*f/6+.5,r=Math.sin(Math.PI*d);r*=r*255;var o=Math.sin(Math.PI*(d+1/3));o*=o*255;var v=Math.sin(Math.PI*(d+2/3));return v*=v*255,65536*Math.floor(r)+256*Math.floor(v)+1*Math.floor(o)}range(){return typeof this.min<"u"&&typeof this.max<"u"?[this.min,this.max]:null}}class m extends z{constructor(A,l,n){super(),this.gradient="linear",this.colors=new Array;var a;if(Array.isArray(A)&&A.length>=2?(this.max=A[1],this.min=A[0],a=l):(this.min=A,this.max=l,a=n),a)for(let u of a)this.colors.push(M.CC.color(u));else this.colors.push(M.CC.color(0))}range(){return typeof this.min<"u"&&typeof this.max<"u"?[this.min,this.max]:null}valueToHex(A,l){var n,a;if(l?(n=l[0],a=l[1]):(n=this.min,a=this.max),A===void 0)return 16777215;var u=L(n,a,A);n=u.lo,a=u.hi,A=u.val;let f=this.colors.length,d=(a-n)/f,r=Math.min(Math.floor((A-n)/d),f-1),o=Math.min(r+1,f-1),v=(A-n-r*d)/d,h=this.colors[r],y=this.colors[o];return new M.Color(h.r+v*(y.r-h.r),h.g+v*(y.g-h.g),h.b+v*(y.b-h.b)).getHex()}}const T={rwb:x,RWB:x,roygb:b,ROYGB:b,sinebow:S,linear:m};class D extends z{valueToHex(A,l){return 0}range(){return null}}D.RWB=x,D.ROYGB=b,D.Sinebow=S,D.CustomLinear=m,D.builtinGradients=T,D.normalizeValue=L,D.getGradient=B},"./src/Label.ts":(k,R,g)=>{g.r(R),g.d(R,{Label:()=>S,LabelCount:()=>B});var M=g("./src/WebGL/index.ts"),z=g("./src/Gradient.ts"),L=g("./src/colors.ts");let B=0;function x(m,T,D,p,A,l,n){m.beginPath(),m.moveTo(T+l,D),m.lineTo(T+p-l,D),m.quadraticCurveTo(T+p,D,T+p,D+l),m.lineTo(T+p,D+A-l),m.quadraticCurveTo(T+p,D+A,T+p-l,D+A),m.lineTo(T+l,D+A),m.quadraticCurveTo(T,D+A,T,D+A-l),m.lineTo(T,D+l),m.quadraticCurveTo(T,D,T+l,D),m.closePath(),m.fill(),n&&m.stroke()}function b(m,T,D){var p=D;return typeof m<"u"&&(m instanceof L.Color?p=m.scaled():(p=L.CC.color(m),typeof p.scaled<"u"&&(p=p.scaled()))),typeof T<"u"&&(p.a=parseFloat(T)),p}class S{constructor(T,D){this.id=B++,this.stylespec=D||{},this.canvas=document.createElement("canvas"),this.canvas.width=134,this.canvas.height=35,this.context=this.canvas.getContext("2d"),this.sprite=new M.Sprite,this.text=T,this.frame=this.stylespec.frame}getStyle(){return this.stylespec}hide(){this.sprite&&(this.sprite.visible=!1)}show(){this.sprite&&(this.sprite.visible=!0)}setContext(){var T=this.stylespec,D=typeof T.useScreen>"u"?!1:T.useScreen,p=T.showBackground;(p==="0"||p==="false")&&(p=!1),typeof p>"u"&&(p=!0);var A=T.font?T.font:"sans-serif",l=parseInt(T.fontSize)?parseInt(T.fontSize):18,n=b(T.fontColor,T.fontOpacity,{r:255,g:255,b:255,a:1}),a=T.padding?T.padding:4,u=T.borderThickness?T.borderThickness:0,f=b(T.backgroundColor,T.backgroundOpacity,{r:0,g:0,b:0,a:1}),d=b(T.borderColor,T.borderOpacity,f),r=T.position?T.position:{x:-10,y:1,z:1},o=T.inFront!==void 0?T.inFront:!0;(o==="false"||o==="0")&&(o=!1);var v=T.alignment||M.SpriteAlignment.topLeft;typeof v=="string"&&v in M.SpriteAlignment&&(v=M.SpriteAlignment[v]);var h="";T.bold&&(h="bold "),this.context.font=h+l+"px  "+A;var y=this.context.measureText(this.text),E=y.width;p||(u=0);var w=E+2.5*u+2*a,W=l*1.25+2*u+2*a;if(T.backgroundImage){var P=T.backgroundImage,j=T.backgroundWidth?T.backgroundWidth:P.width,V=T.backgroundHeight?T.backgroundHeight:P.height;j>w&&(w=j),V>W&&(W=V)}if(this.canvas.width=w,this.canvas.height=W,this.context.clearRect(0,0,this.canvas.width,this.canvas.height),h="",T.bold&&(h="bold "),this.context.font=h+l+"px  "+A,this.context.fillStyle="rgba("+f.r+","+f.g+","+f.b+","+f.a+")",this.context.strokeStyle="rgba("+d.r+","+d.g+","+d.b+","+d.a+")",T.backgroundGradient){let F=this.context.createLinearGradient(0,W/2,w,W/2),H=z.Gradient.getGradient(T.backgroundGradient),K=H.range(),U=-1,N=1;K&&(U=K[0],N=K[1]);let Y=N-U;for(let ne=0;ne<1.01;ne+=.1){let ae=b(H.valueToHex(U+Y*ne)),he="rgba("+ae.r+","+ae.g+","+ae.b+","+ae.a+")";F.addColorStop(ne,he)}this.context.fillStyle=F}this.context.lineWidth=u,p&&x(this.context,u,u,w-2*u,W-2*u,6,u>0),T.backgroundImage&&this.context.drawImage(P,0,0,w,W),this.context.fillStyle="rgba("+n.r+","+n.g+","+n.b+","+n.a+")",this.context.fillText(this.text,u+a,l+u+a,E);var G=new M.Texture(this.canvas);G.needsUpdate=!0,this.sprite.material=new M.SpriteMaterial({map:G,useScreenCoordinates:D,alignment:v,depthTest:!o,screenOffset:T.screenOffset||null}),this.sprite.scale.set(1,1,1),this.sprite.position.set(r.x,r.y,r.z)}dispose(){this.sprite.material.map!==void 0&&this.sprite.material.map.dispose(),this.sprite.material!==void 0&&this.sprite.material.dispose()}}},"./src/ProteinSurface4.ts":(k,R,g)=>{g.r(R),g.d(R,{MarchingCube:()=>b,MarchingCubeInitializer:()=>x,PointGrid:()=>S,ProteinSurface:()=>m,SurfaceType:()=>z,setSyncSurface:()=>B,syncSurface:()=>L});var M=g("./src/WebGL/math/index.ts"),z;(function(T){T[T.VDW=1]="VDW",T[T.MS=2]="MS",T[T.SAS=3]="SAS",T[T.SES=4]="SES"})(z||(z={}));var L=!1;function B(T){L=T}(window.navigator.userAgent.indexOf("MSIE ")>=0||window.navigator.userAgent.indexOf("Trident/")>=0)&&(L=!0);class x{constructor(){this.ISDONE=2,this.edgeTable=new Uint32Array([0,0,0,0,0,0,0,2816,0,0,0,1792,0,3328,3584,3840,0,0,0,138,0,21,0,134,0,0,0,652,0,2067,3865,3600,0,0,0,42,0,0,0,294,0,0,21,28,0,3875,1049,3360,0,168,162,170,0,645,2475,2210,0,687,293,172,4010,3747,3497,3232,0,0,0,0,0,69,0,900,0,0,0,1792,138,131,1608,1920,0,81,0,2074,84,85,84,86,0,81,0,3676,330,1105,1881,1616,0,0,0,42,0,69,0,502,0,0,21,3580,138,2035,1273,1520,2816,104,2337,106,840,581,367,102,2816,3695,3429,3180,1898,1635,1385,1120,0,0,0,0,0,0,0,3910,0,0,69,588,42,2083,41,2880,0,0,0,1722,0,2293,4095,3830,0,255,757,764,2538,2291,3065,2800,0,0,81,338,0,3925,1119,3414,84,855,85,340,2130,2899,89,2384,1792,712,194,1162,4036,3781,3535,3270,708,719,197,204,3018,2755,2505,2240,0,0,0,0,168,420,168,1958,162,162,676,2988,170,163,680,928,3328,3096,3328,3642,52,53,1855,1590,2340,2111,2869,2620,298,51,825,560,3584,3584,3090,3482,1668,1941,1183,1430,146,2975,2069,2460,154,915,153,400,3840,3592,3329,3082,1796,1541,1295,1030,2818,2575,2309,2060,778,515,265,0]),this.triTable=[[],[],[],[],[],[],[],[11,9,8],[],[],[],[8,10,9],[],[10,8,11],[9,11,10],[8,10,9,8,11,10],[],[],[],[1,7,3],[],[4,2,0],[],[2,1,7],[],[],[],[2,7,3,2,9,7],[],[1,4,11,1,0,4],[3,8,0,11,9,4,11,10,9],[4,11,9,11,10,9],[],[],[],[5,3,1],[],[],[],[2,5,8,2,1,5],[],[],[2,4,0],[3,2,4],[],[0,9,1,8,10,5,8,11,10],[3,4,0,3,10,4],[5,8,10,8,11,10],[],[3,5,7],[7,1,5],[1,7,3,1,5,7],[],[9,2,0,9,7,2],[0,3,8,1,7,11,1,5,7],[11,1,7,1,5,7],[],[9,1,0,5,3,2,5,7,3],[8,2,5,8,0,2],[2,5,3,5,7,3],[3,9,1,3,8,9,7,11,10,7,10,5],[9,1,0,10,7,11,10,5,7],[3,8,0,7,10,5,7,11,10],[11,5,7,11,10,5],[],[],[],[],[],[0,6,2],[],[7,2,9,7,9,8],[],[],[],[8,10,9],[7,1,3],[7,1,0],[6,9,3,6,10,9],[7,10,8,10,9,8],[],[6,0,4],[],[11,1,4,11,3,1],[2,4,6],[2,0,4,2,4,6],[2,4,6],[1,4,2,4,6,2],[],[6,0,4],[],[2,11,3,6,9,4,6,10,9],[8,6,1,8,1,3],[10,0,6,0,4,6],[8,0,3,9,6,10,9,4,6],[10,4,6,10,9,4],[],[],[],[5,3,1],[],[0,6,2],[],[7,4,8,5,2,1,5,6,2],[],[],[2,4,0],[7,4,8,2,11,3,10,5,6],[7,1,3],[5,6,10,0,9,1,8,7,4],[5,6,10,7,0,3,7,4,0],[10,5,6,4,8,7],[9,11,8],[3,5,6],[0,5,11,0,11,8],[6,3,5,3,1,5],[3,9,6,3,8,9],[9,6,0,6,2,0],[0,3,8,2,5,6,2,1,5],[1,6,2,1,5,6],[9,11,8],[1,0,9,6,10,5,11,3,2],[6,10,5,2,8,0,2,11,8],[3,2,11,10,5,6],[10,5,6,9,3,8,9,1,3],[0,9,1,5,6,10],[8,0,3,10,5,6],[10,5,6],[],[],[],[],[],[],[],[1,10,2,9,11,6,9,8,11],[],[],[6,0,2],[3,6,9,3,2,6],[3,5,1],[0,5,1,0,11,5],[0,3,5],[6,9,11,9,8,11],[],[],[],[4,5,9,7,1,10,7,3,1],[],[11,6,7,2,4,5,2,0,4],[11,6,7,8,0,3,1,10,2,9,4,5],[6,7,11,1,10,2,9,4,5],[],[4,1,0,4,5,1,6,7,3,6,3,2],[9,4,5,0,6,7,0,2,6],[4,5,9,6,3,2,6,7,3],[6,7,11,5,3,8,5,1,3],[6,7,11,4,1,0,4,5,1],[4,5,9,3,8,0,11,6,7],[9,4,5,7,11,6],[],[],[0,6,4],[8,6,4,8,1,6],[],[0,10,2,0,9,10,4,8,11,4,11,6],[10,2,1,6,0,3,6,4,0],[10,2,1,11,4,8,11,6,4],[4,2,6],[1,0,9,2,4,8,2,6,4],[2,4,0,2,6,4],[8,2,4,2,6,4],[11,4,1,11,6,4],[0,9,1,4,11,6,4,8,11],[3,6,0,6,4,0],[8,6,4,8,11,6],[10,8,9],[6,3,9,6,7,3],[6,7,1],[10,7,1,7,3,1],[7,11,6,8,10,2,8,9,10],[11,6,7,10,0,9,10,2,0],[2,1,10,7,11,6,8,0,3],[1,10,2,6,7,11],[7,2,6,7,9,2],[1,0,9,3,6,7,3,2,6],[7,0,6,0,2,6],[2,7,3,2,6,7],[7,11,6,3,9,1,3,8,9],[9,1,0,11,6,7],[0,3,8,11,6,7],[11,6,7],[],[],[],[],[5,3,7],[8,5,2,8,7,5],[5,3,7],[1,10,2,5,8,7,5,9,8],[1,7,5],[1,7,5],[9,2,7,9,7,5],[11,3,2,8,5,9,8,7,5],[1,3,7,1,7,5],[0,7,1,7,5,1],[9,3,5,3,7,5],[9,7,5,9,8,7],[8,10,11],[3,4,10,3,10,11],[8,10,11],[5,9,4,1,11,3,1,10,11],[2,4,5],[5,2,4,2,0,4],[0,3,8,5,9,4,10,2,1],[2,1,10,9,4,5],[2,8,5,2,11,8],[3,2,11,1,4,5,1,0,4],[9,4,5,8,2,11,8,0,2],[11,3,2,9,4,5],[8,5,3,5,1,3],[5,0,4,5,1,0],[3,8,0,4,5,9],[9,4,5],[11,9,10],[11,9,10],[1,11,4,1,10,11],[8,7,4,11,1,10,11,3,1],[2,7,9,2,9,10],[4,8,7,0,10,2,0,9,10],[2,1,10,0,7,4,0,3,7],[10,2,1,8,7,4],[1,7,4],[3,2,11,4,8,7,9,1,0],[11,4,2,4,0,2],[2,11,3,7,4,8],[4,1,7,1,3,7],[1,0,9,8,7,4],[3,4,0,3,7,4],[8,7,4],[8,9,10,8,10,11],[3,9,11,9,10,11],[0,10,8,10,11,8],[10,3,1,10,11,3],[2,8,10,8,9,10],[9,2,0,9,10,2],[8,0,3,1,10,2],[10,2,1],[1,11,9,11,8,9],[11,3,2,0,9,1],[11,0,2,11,8,0],[11,3,2],[8,1,3,8,9,1],[9,1,0],[8,0,3],[]],this.edgeTable2=[0,265,515,778,2060,2309,2575,2822,1030,1295,1541,1804,3082,3331,3593,3840,400,153,915,666,2460,2197,2975,2710,1430,1183,1941,1692,3482,3219,3993,3728,560,825,51,314,2620,2869,2111,2358,1590,1855,1077,1340,3642,3891,3129,3376,928,681,419,170,2988,2725,2479,2214,1958,1711,1445,1196,4010,3747,3497,3232,2240,2505,2755,3018,204,453,719,966,3270,3535,3781,4044,1226,1475,1737,1984,2384,2137,2899,2650,348,85,863,598,3414,3167,3925,3676,1370,1107,1881,1616,2800,3065,2291,2554,764,1013,255,502,3830,4095,3317,3580,1786,2035,1273,1520,2912,2665,2403,2154,876,613,367,102,3942,3695,3429,3180,1898,1635,1385,1120,1120,1385,1635,1898,3180,3429,3695,3942,102,367,613,876,2154,2403,2665,2912,1520,1273,2035,1786,3580,3317,4095,3830,502,255,1013,764,2554,2291,3065,2800,1616,1881,1107,1370,3676,3925,3167,3414,598,863,85,348,2650,2899,2137,2384,1984,1737,1475,1226,4044,3781,3535,3270,966,719,453,204,3018,2755,2505,2240,3232,3497,3747,4010,1196,1445,1711,1958,2214,2479,2725,2988,170,419,681,928,3376,3129,3891,3642,1340,1077,1855,1590,2358,2111,2869,2620,314,51,825,560,3728,3993,3219,3482,1692,1941,1183,1430,2710,2975,2197,2460,666,915,153,400,3840,3593,3331,3082,1804,1541,1295,1030,2822,2575,2309,2060,778,515,265,0],this.triTable2=[[],[8,3,0],[9,0,1],[8,3,1,8,1,9],[11,2,3],[11,2,0,11,0,8],[11,2,3,0,1,9],[2,1,11,1,9,11,11,9,8],[10,1,2],[8,3,0,1,2,10],[9,0,2,9,2,10],[3,2,8,2,10,8,8,10,9],[10,1,3,10,3,11],[1,0,10,0,8,10,10,8,11],[0,3,9,3,11,9,9,11,10],[8,10,9,8,11,10],[8,4,7],[3,0,4,3,4,7],[1,9,0,8,4,7],[9,4,1,4,7,1,1,7,3],[2,3,11,7,8,4],[7,11,4,11,2,4,4,2,0],[3,11,2,4,7,8,9,0,1],[2,7,11,2,1,7,1,4,7,1,9,4],[10,1,2,8,4,7],[2,10,1,0,4,7,0,7,3],[4,7,8,0,2,10,0,10,9],[2,7,3,2,9,7,7,9,4,2,10,9],[8,4,7,11,10,1,11,1,3],[11,4,7,1,4,11,1,11,10,1,0,4],[3,8,0,7,11,4,11,9,4,11,10,9],[7,11,4,4,11,9,11,10,9],[9,5,4],[3,0,8,4,9,5],[5,4,0,5,0,1],[4,8,5,8,3,5,5,3,1],[11,2,3,9,5,4],[9,5,4,8,11,2,8,2,0],[3,11,2,1,5,4,1,4,0],[8,5,4,2,5,8,2,8,11,2,1,5],[2,10,1,9,5,4],[0,8,3,5,4,9,10,1,2],[10,5,2,5,4,2,2,4,0],[3,4,8,3,2,4,2,5,4,2,10,5],[5,4,9,1,3,11,1,11,10],[0,9,1,4,8,5,8,10,5,8,11,10],[3,4,0,3,10,4,4,10,5,3,11,10],[4,8,5,5,8,10,8,11,10],[9,5,7,9,7,8],[0,9,3,9,5,3,3,5,7],[8,0,7,0,1,7,7,1,5],[1,7,3,1,5,7],[11,2,3,8,9,5,8,5,7],[9,2,0,9,7,2,2,7,11,9,5,7],[0,3,8,2,1,11,1,7,11,1,5,7],[2,1,11,11,1,7,1,5,7],[1,2,10,5,7,8,5,8,9],[9,1,0,10,5,2,5,3,2,5,7,3],[5,2,10,8,2,5,8,5,7,8,0,2],[10,5,2,2,5,3,5,7,3],[3,9,1,3,8,9,7,11,10,7,10,5],[9,1,0,10,7,11,10,5,7],[3,8,0,7,10,5,7,11,10],[11,5,7,11,10,5],[11,7,6],[0,8,3,11,7,6],[9,0,1,11,7,6],[7,6,11,3,1,9,3,9,8],[2,3,7,2,7,6],[8,7,0,7,6,0,0,6,2],[1,9,0,3,7,6,3,6,2],[7,6,2,7,2,9,2,1,9,7,9,8],[1,2,10,6,11,7],[2,10,1,7,6,11,8,3,0],[11,7,6,10,9,0,10,0,2],[7,6,11,3,2,8,8,2,10,8,10,9],[6,10,7,10,1,7,7,1,3],[6,10,1,6,1,7,7,1,0,7,0,8],[9,0,3,6,9,3,6,10,9,6,3,7],[6,10,7,7,10,8,10,9,8],[8,4,6,8,6,11],[11,3,6,3,0,6,6,0,4],[0,1,9,4,6,11,4,11,8],[1,9,4,11,1,4,11,3,1,11,4,6],[3,8,2,8,4,2,2,4,6],[2,0,4,2,4,6],[1,9,0,3,8,2,2,8,4,2,4,6],[9,4,1,1,4,2,4,6,2],[10,1,2,11,8,4,11,4,6],[10,1,2,11,3,6,6,3,0,6,0,4],[0,2,10,0,10,9,4,11,8,4,6,11],[2,11,3,6,9,4,6,10,9],[8,4,6,8,6,1,6,10,1,8,1,3],[1,0,10,10,0,6,0,4,6],[8,0,3,9,6,10,9,4,6],[10,4,6,10,9,4],[9,5,4,7,6,11],[4,9,5,3,0,8,11,7,6],[6,11,7,4,0,1,4,1,5],[6,11,7,4,8,5,5,8,3,5,3,1],[4,9,5,6,2,3,6,3,7],[9,5,4,8,7,0,0,7,6,0,6,2],[4,0,1,4,1,5,6,3,7,6,2,3],[7,4,8,5,2,1,5,6,2],[6,11,7,1,2,10,9,5,4],[11,7,6,8,3,0,1,2,10,9,5,4],[11,7,6,10,5,2,2,5,4,2,4,0],[7,4,8,2,11,3,10,5,6],[4,9,5,6,10,7,7,10,1,7,1,3],[5,6,10,0,9,1,8,7,4],[5,6,10,7,0,3,7,4,0],[10,5,6,4,8,7],[5,6,9,6,11,9,9,11,8],[0,9,5,0,5,3,3,5,6,3,6,11],[0,1,5,0,5,11,5,6,11,0,11,8],[11,3,6,6,3,5,3,1,5],[9,5,6,3,9,6,3,8,9,3,6,2],[5,6,9,9,6,0,6,2,0],[0,3,8,2,5,6,2,1,5],[1,6,2,1,5,6],[1,2,10,5,6,9,9,6,11,9,11,8],[1,0,9,6,10,5,11,3,2],[6,10,5,2,8,0,2,11,8],[3,2,11,10,5,6],[10,5,6,9,3,8,9,1,3],[0,9,1,5,6,10],[8,0,3,10,5,6],[10,5,6],[10,6,5],[8,3,0,10,6,5],[0,1,9,5,10,6],[10,6,5,9,8,3,9,3,1],[3,11,2,10,6,5],[6,5,10,2,0,8,2,8,11],[1,9,0,6,5,10,11,2,3],[1,10,2,5,9,6,9,11,6,9,8,11],[1,2,6,1,6,5],[0,8,3,2,6,5,2,5,1],[5,9,6,9,0,6,6,0,2],[9,6,5,3,6,9,3,9,8,3,2,6],[11,6,3,6,5,3,3,5,1],[0,5,1,0,11,5,5,11,6,0,8,11],[0,5,9,0,3,5,3,6,5,3,11,6],[5,9,6,6,9,11,9,8,11],[10,6,5,4,7,8],[5,10,6,7,3,0,7,0,4],[5,10,6,0,1,9,8,4,7],[4,5,9,6,7,10,7,1,10,7,3,1],[7,8,4,2,3,11,10,6,5],[11,6,7,10,2,5,2,4,5,2,0,4],[11,6,7,8,0,3,1,10,2,9,4,5],[6,7,11,1,10,2,9,4,5],[7,8,4,5,1,2,5,2,6],[4,1,0,4,5,1,6,7,3,6,3,2],[9,4,5,8,0,7,0,6,7,0,2,6],[4,5,9,6,3,2,6,7,3],[6,7,11,4,5,8,5,3,8,5,1,3],[6,7,11,4,1,0,4,5,1],[4,5,9,3,8,0,11,6,7],[9,4,5,7,11,6],[10,6,4,10,4,9],[8,3,0,9,10,6,9,6,4],[1,10,0,10,6,0,0,6,4],[8,6,4,8,1,6,6,1,10,8,3,1],[2,3,11,6,4,9,6,9,10],[0,10,2,0,9,10,4,8,11,4,11,6],[10,2,1,11,6,3,6,0,3,6,4,0],[10,2,1,11,4,8,11,6,4],[9,1,4,1,2,4,4,2,6],[1,0,9,3,2,8,2,4,8,2,6,4],[2,4,0,2,6,4],[3,2,8,8,2,4,2,6,4],[1,4,9,11,4,1,11,1,3,11,6,4],[0,9,1,4,11,6,4,8,11],[11,6,3,3,6,0,6,4,0],[8,6,4,8,11,6],[6,7,10,7,8,10,10,8,9],[9,3,0,6,3,9,6,9,10,6,7,3],[6,1,10,6,7,1,7,0,1,7,8,0],[6,7,10,10,7,1,7,3,1],[7,11,6,3,8,2,8,10,2,8,9,10],[11,6,7,10,0,9,10,2,0],[2,1,10,7,11,6,8,0,3],[1,10,2,6,7,11],[7,2,6,7,9,2,2,9,1,7,8,9],[1,0,9,3,6,7,3,2,6],[8,0,7,7,0,6,0,2,6],[2,7,3,2,6,7],[7,11,6,3,9,1,3,8,9],[9,1,0,11,6,7],[0,3,8,11,6,7],[11,6,7],[11,7,5,11,5,10],[3,0,8,7,5,10,7,10,11],[9,0,1,10,11,7,10,7,5],[3,1,9,3,9,8,7,10,11,7,5,10],[10,2,5,2,3,5,5,3,7],[5,10,2,8,5,2,8,7,5,8,2,0],[9,0,1,10,2,5,5,2,3,5,3,7],[1,10,2,5,8,7,5,9,8],[2,11,1,11,7,1,1,7,5],[0,8,3,2,11,1,1,11,7,1,7,5],[9,0,2,9,2,7,2,11,7,9,7,5],[11,3,2,8,5,9,8,7,5],[1,3,7,1,7,5],[8,7,0,0,7,1,7,5,1],[0,3,9,9,3,5,3,7,5],[9,7,5,9,8,7],[4,5,8,5,10,8,8,10,11],[3,0,4,3,4,10,4,5,10,3,10,11],[0,1,9,4,5,8,8,5,10,8,10,11],[5,9,4,1,11,3,1,10,11],[3,8,4,3,4,2,2,4,5,2,5,10],[10,2,5,5,2,4,2,0,4],[0,3,8,5,9,4,10,2,1],[2,1,10,9,4,5],[8,4,5,2,8,5,2,11,8,2,5,1],[3,2,11,1,4,5,1,0,4],[9,4,5,8,2,11,8,0,2],[11,3,2,9,4,5],[4,5,8,8,5,3,5,1,3],[5,0,4,5,1,0],[3,8,0,4,5,9],[9,4,5],[7,4,11,4,9,11,11,9,10],[3,0,8,7,4,11,11,4,9,11,9,10],[11,7,4,1,11,4,1,10,11,1,4,0],[8,7,4,11,1,10,11,3,1],[2,3,7,2,7,9,7,4,9,2,9,10],[4,8,7,0,10,2,0,9,10],[2,1,10,0,7,4,0,3,7],[10,2,1,8,7,4],[2,11,7,2,7,1,1,7,4,1,4,9],[3,2,11,4,8,7,9,1,0],[7,4,11,11,4,2,4,0,2],[2,11,3,7,4,8],[9,1,4,4,1,7,1,3,7],[1,0,9,8,7,4],[3,4,0,3,7,4],[8,7,4],[8,9,10,8,10,11],[0,9,3,3,9,11,9,10,11],[1,10,0,0,10,8,10,11,8],[10,3,1,10,11,3],[3,8,2,2,8,10,8,9,10],[9,2,0,9,10,2],[8,0,3,1,10,2],[10,2,1],[2,11,1,1,11,9,11,8,9],[11,3,2,0,9,1],[11,0,2,11,8,0],[11,3,2],[8,1,3,8,9,1],[9,1,0],[8,0,3],[]]}march(D,p,A,l){let n=!!l.fulltable,a=l.hasOwnProperty("origin")&&l.origin.hasOwnProperty("x")?l.origin:{x:0,y:0,z:0},u=!!l.voxel,f=l.matrix,d=l.nX||0,r=l.nY||0,o=l.nZ||0,v=l.scale||1,h=null;l.unitCube?h=l.unitCube:h={x:v,y:v,z:v};let y=new Int32Array(d*r*o),E,w;for(E=0,w=y.length;E<w;++E)y[E]=-1;let W=function(G,F,H,K,U,N){let Y={x:0,y:0,z:0},ne=!!(K&1<<U),ae=!!(K&1<<N),he=U;if(!ne&&ae&&(he=N),he&1&&H++,he&2&&F++,he&4&&G++,f){let pe=new M.Vector3(G,F,H);pe=pe.applyMatrix4(f),Y={x:pe.x,y:pe.y,z:pe.z}}else Y.x=a.x+h.x*G,Y.y=a.y+h.y*F,Y.z=a.z+h.z*H;let oe=(r*G+F)*o+H;return u?(p.push(Y),p.length-1):(y[oe]<0&&(y[oe]=p.length,p.push(Y)),y[oe])},P=new Int32Array(12),j=n?this.edgeTable2:this.edgeTable,V=n?this.triTable2:this.triTable;for(E=0;E<d-1;++E)for(let G=0;G<r-1;++G)for(let F=0;F<o-1;++F){let H=0;for(let N=0;N<8;++N){let Y=(r*(E+((N&4)>>2))+G+((N&2)>>1))*o+F+(N&1),ne=!!(D[Y]&this.ISDONE);H|=ne<<N}if(H===0||H===255)continue;let K=j[H];if(K===0)continue;let U=V[H];K&1&&(P[0]=W(E,G,F,H,0,1)),K&2&&(P[1]=W(E,G,F,H,1,3)),K&4&&(P[2]=W(E,G,F,H,3,2)),K&8&&(P[3]=W(E,G,F,H,2,0)),K&16&&(P[4]=W(E,G,F,H,4,5)),K&32&&(P[5]=W(E,G,F,H,5,7)),K&64&&(P[6]=W(E,G,F,H,7,6)),K&128&&(P[7]=W(E,G,F,H,6,4)),K&256&&(P[8]=W(E,G,F,H,0,4)),K&512&&(P[9]=W(E,G,F,H,1,5)),K&1024&&(P[10]=W(E,G,F,H,3,7)),K&2048&&(P[11]=W(E,G,F,H,2,6));for(let N=0;N<U.length;N+=3){let Y=P[U[N]],ne=P[U[N+1]],ae=P[U[N+2]];u&&N>=3&&(p.push(p[Y]),Y=p.length-1,p.push(p[ne]),ne=p.length-1,p.push(p[ae]),ae=p.length-1),A.push(Y),A.push(ne),A.push(ae)}}}laplacianSmooth(D,p,A){let l=new Array(p.length),n,a,u,f,d;for(n=0,a=p.length;n<a;n++)l[n]={x:0,y:0,z:0};let r=new Array(20),o;for(n=0;n<20;n++)r[n]=new Array(p.length);for(n=0,a=p.length;n<a;n++)r[0][n]=0;for(n=0,a=A.length/3;n<a;n++){let y=n*3,E=n*3+1,w=n*3+2;for(o=!0,u=0,f=r[0][A[y]];u<f;u++)if(A[E]==r[u+1][A[y]]){o=!1;break}for(o&&(r[0][A[y]]++,r[r[0][A[y]]][A[y]]=A[E]),o=!0,u=0,f=r[0][A[y]];u<f;u++)if(A[w]==r[u+1][A[y]]){o=!1;break}for(o&&(r[0][A[y]]++,r[r[0][A[y]]][A[y]]=A[w]),o=!0,u=0,f=r[0][A[E]];u<f;u++)if(A[y]==r[u+1][A[E]]){o=!1;break}for(o&&(r[0][A[E]]++,r[r[0][A[E]]][A[E]]=A[y]),o=!0,u=0,f=r[0][A[E]];u<f;u++)if(A[w]==r[u+1][A[E]]){o=!1;break}for(o&&(r[0][A[E]]++,r[r[0][A[E]]][A[E]]=A[w]),o=!0,u=0;u<r[0][A[w]];u++)if(A[y]==r[u+1][A[w]]){o=!1;break}for(o&&(r[0][A[w]]++,r[r[0][A[w]]][A[w]]=A[y]),o=!0,u=0,f=r[0][A[w]];u<f;u++)if(A[E]==r[u+1][A[w]]){o=!1;break}o&&(r[0][A[w]]++,r[r[0][A[w]]][A[w]]=A[E])}let v=1,h=.5;for(d=0;d<D;d++){for(n=0,a=p.length;n<a;n++)if(r[0][n]<3)l[n].x=p[n].x,l[n].y=p[n].y,l[n].z=p[n].z;else if(r[0][n]==3||r[0][n]==4){for(l[n].x=0,l[n].y=0,l[n].z=0,u=0,f=r[0][n];u<f;u++)l[n].x+=p[r[u+1][n]].x,l[n].y+=p[r[u+1][n]].y,l[n].z+=p[r[u+1][n]].z;l[n].x+=h*p[n].x,l[n].y+=h*p[n].y,l[n].z+=h*p[n].z,l[n].x/=h+r[0][n],l[n].y/=h+r[0][n],l[n].z/=h+r[0][n]}else{for(l[n].x=0,l[n].y=0,l[n].z=0,u=0,f=r[0][n];u<f;u++)l[n].x+=p[r[u+1][n]].x,l[n].y+=p[r[u+1][n]].y,l[n].z+=p[r[u+1][n]].z;l[n].x+=v*p[n].x,l[n].y+=v*p[n].y,l[n].z+=v*p[n].z,l[n].x/=v+r[0][n],l[n].y/=v+r[0][n],l[n].z/=v+r[0][n]}for(n=0,a=p.length;n<a;n++)p[n].x=l[n].x,p[n].y=l[n].y,p[n].z=l[n].z}}}let b=new x;class S{constructor(D,p,A){this.data=new Int32Array(D*p*A*3),this.width=p,this.height=A}set(D,p,A,l){let n=((D*this.width+p)*this.height+A)*3;this.data[n]=l.ix,this.data[n+1]=l.iy,this.data[n+2]=l.iz}get(D,p,A){let l=((D*this.width+p)*this.height+A)*3;return{ix:this.data[l],iy:this.data[l+1],iz:this.data[l+2]}}}class m{constructor(){this.INOUT=1,this.ISDONE=2,this.ISBOUND=4,this.ptranx=0,this.ptrany=0,this.ptranz=0,this.probeRadius=1.4,this.defaultScaleFactor=2,this.scaleFactor=this.defaultScaleFactor,this.pHeight=0,this.pWidth=0,this.pLength=0,this.cutRadius=0,this.vpBits=null,this.vpDistance=null,this.vpAtomID=null,this.pminx=0,this.pminy=0,this.pminz=0,this.pmaxx=0,this.pmaxy=0,this.pmaxz=0,this.depty={},this.widxz={},this.faces=[],this.verts=[],this.vdwRadii={H:1.2,Li:1.82,Na:2.27,K:2.75,C:1.7,N:1.55,O:1.52,F:1.47,P:1.8,S:1.8,CL:1.75,BR:1.85,SE:1.9,ZN:1.39,CU:1.4,NI:1.63,X:2},this.nb=[new Int32Array([1,0,0]),new Int32Array([-1,0,0]),new Int32Array([0,1,0]),new Int32Array([0,-1,0]),new Int32Array([0,0,1]),new Int32Array([0,0,-1]),new Int32Array([1,1,0]),new Int32Array([1,-1,0]),new Int32Array([-1,1,0]),new Int32Array([-1,-1,0]),new Int32Array([1,0,1]),new Int32Array([1,0,-1]),new Int32Array([-1,0,1]),new Int32Array([-1,0,-1]),new Int32Array([0,1,1]),new Int32Array([0,1,-1]),new Int32Array([0,-1,1]),new Int32Array([0,-1,-1]),new Int32Array([1,1,1]),new Int32Array([1,1,-1]),new Int32Array([1,-1,1]),new Int32Array([-1,1,1]),new Int32Array([1,-1,-1]),new Int32Array([-1,-1,1]),new Int32Array([-1,1,-1]),new Int32Array([-1,-1,-1])],m.MarchingCube||(m.MarchingCube=new x)}getVDWIndex(D){return!D.elem||typeof this.vdwRadii[D.elem]>"u"?"X":D.elem}getFacesAndVertices(D){let p={};for(let n=0,a=D.length;n<a;n++)p[D[n]]=!0;let A=this.verts;for(let n=0,a=A.length;n<a;n++)A[n].x=A[n].x/this.scaleFactor-this.ptranx,A[n].y=A[n].y/this.scaleFactor-this.ptrany,A[n].z=A[n].z/this.scaleFactor-this.ptranz;let l=[];for(let n=0,a=this.faces.length;n<a;n+=3){let u=this.faces[n],f=this.faces[n+1],d=this.faces[n+2],r=A[u].atomid,o=A[f].atomid,v=A[d].atomid,h=r;o<h&&(h=o),v<h&&(h=v),p[h]&&u!==f&&f!==d&&u!==d&&(l.push(u),l.push(f),l.push(d))}return this.vpBits=null,this.vpDistance=null,this.vpAtomID=null,{vertices:A,faces:l}}initparm(D,p,A){A>1e6&&(this.scaleFactor=this.defaultScaleFactor/2);let l=1/this.scaleFactor*5.5;this.pminx=D[0][0],this.pmaxx=D[1][0],this.pminy=D[0][1],this.pmaxy=D[1][1],this.pminz=D[0][2],this.pmaxz=D[1][2],p?(this.pminx-=this.probeRadius+l,this.pminy-=this.probeRadius+l,this.pminz-=this.probeRadius+l,this.pmaxx+=this.probeRadius+l,this.pmaxy+=this.probeRadius+l,this.pmaxz+=this.probeRadius+l):(this.pminx-=l,this.pminy-=l,this.pminz-=l,this.pmaxx+=l,this.pmaxy+=l,this.pmaxz+=l),this.pminx=Math.floor(this.pminx*this.scaleFactor)/this.scaleFactor,this.pminy=Math.floor(this.pminy*this.scaleFactor)/this.scaleFactor,this.pminz=Math.floor(this.pminz*this.scaleFactor)/this.scaleFactor,this.pmaxx=Math.ceil(this.pmaxx*this.scaleFactor)/this.scaleFactor,this.pmaxy=Math.ceil(this.pmaxy*this.scaleFactor)/this.scaleFactor,this.pmaxz=Math.ceil(this.pmaxz*this.scaleFactor)/this.scaleFactor,this.ptranx=-this.pminx,this.ptrany=-this.pminy,this.ptranz=-this.pminz,this.pLength=Math.ceil(this.scaleFactor*(this.pmaxx-this.pminx))+1,this.pWidth=Math.ceil(this.scaleFactor*(this.pmaxy-this.pminy))+1,this.pHeight=Math.ceil(this.scaleFactor*(this.pmaxz-this.pminz))+1,this.boundingatom(p),this.cutRadius=this.probeRadius*this.scaleFactor,this.vpBits=new Uint8Array(this.pLength*this.pWidth*this.pHeight),this.vpDistance=new Float64Array(this.pLength*this.pWidth*this.pHeight),this.vpAtomID=new Int32Array(this.pLength*this.pWidth*this.pHeight)}boundingatom(D){let p={};for(const A in this.vdwRadii){let l=this.vdwRadii[A];D?p[A]=(l+this.probeRadius)*this.scaleFactor+.5:p[A]=l*this.scaleFactor+.5;let n=p[A]*p[A];this.widxz[A]=Math.floor(p[A])+1,this.depty[A]=new Int32Array(this.widxz[A]*this.widxz[A]);let a=0;for(let u=0;u<this.widxz[A];u++)for(let f=0;f<this.widxz[A];f++){let d=u*u+f*f;if(d>n)this.depty[A][a]=-1;else{let r=Math.sqrt(n-d);this.depty[A][a]=Math.floor(r)}a++}}}fillvoxels(D,p){for(let A=0,l=this.vpBits.length;A<l;A++)this.vpBits[A]=0,this.vpDistance[A]=-1,this.vpAtomID[A]=-1;for(let A in p){let l=D[p[A]];l!==void 0&&this.fillAtom(l,D)}for(let A=0,l=this.vpBits.length;A<l;A++)this.vpBits[A]&this.INOUT&&(this.vpBits[A]|=this.ISDONE)}fillAtom(D,p){let A=Math.floor(.5+this.scaleFactor*(D.x+this.ptranx)),l=Math.floor(.5+this.scaleFactor*(D.y+this.ptrany)),n=Math.floor(.5+this.scaleFactor*(D.z+this.ptranz)),a=this.getVDWIndex(D),u=0,f=this.pWidth*this.pHeight;for(let d=0,r=this.widxz[a];d<r;d++)for(let o=0;o<r;o++){if(this.depty[a][u]!=-1){for(let v=-1;v<2;v++)for(let h=-1;h<2;h++)for(let y=-1;y<2;y++)if(v!==0&&h!==0&&y!==0){let E=v*d,w=y*o;for(let W=0;W<=this.depty[a][u];W++){let P=W*h,j=A+E,V=l+P,G=n+w;if(j<0||V<0||G<0||j>=this.pLength||V>=this.pWidth||G>=this.pHeight)continue;let F=j*f+V*this.pHeight+G;if(!(this.vpBits[F]&this.INOUT))this.vpBits[F]|=this.INOUT,this.vpAtomID[F]=D.serial;else{let H=p[this.vpAtomID[F]];if(H.serial!=D.serial){let K=A+E-Math.floor(.5+this.scaleFactor*(H.x+this.ptranx)),U=l+P-Math.floor(.5+this.scaleFactor*(H.y+this.ptrany)),N=n+w-Math.floor(.5+this.scaleFactor*(H.z+this.ptranz));E*E+P*P+w*w<K*K+U*U+N*N&&(this.vpAtomID[F]=D.serial)}}}}}u++}}fillvoxelswaals(D,p){for(let A=0,l=this.vpBits.length;A<l;A++)this.vpBits[A]&=~this.ISDONE;for(let A in p){let l=D[p[A]];l!==void 0&&this.fillAtomWaals(l,D)}}fillAtomWaals(D,p){let A=0,l=Math.floor(.5+this.scaleFactor*(D.x+this.ptranx)),n=Math.floor(.5+this.scaleFactor*(D.y+this.ptrany)),a=Math.floor(.5+this.scaleFactor*(D.z+this.ptranz)),u=this.getVDWIndex(D),f=this.pWidth*this.pHeight;for(let d=0,r=this.widxz[u];d<r;d++)for(let o=0;o<r;o++){if(this.depty[u][A]!=-1){for(let v=-1;v<2;v++)for(let h=-1;h<2;h++)for(let y=-1;y<2;y++)if(v!==0&&h!==0&&y!==0){let E=v*d,w=y*o;for(let W=0;W<=this.depty[u][A];W++){let P=W*h,j=l+E,V=n+P,G=a+w;if(j<0||V<0||G<0||j>=this.pLength||V>=this.pWidth||G>=this.pHeight)continue;let F=j*f+V*this.pHeight+G;if(!(this.vpBits[F]&this.ISDONE))this.vpBits[F]|=this.ISDONE,this.vpAtomID[F]=D.serial;else{let H=p[this.vpAtomID[F]];if(H.serial!=D.serial){let K=l+E-Math.floor(.5+this.scaleFactor*(H.x+this.ptranx)),U=n+P-Math.floor(.5+this.scaleFactor*(H.y+this.ptrany)),N=a+w-Math.floor(.5+this.scaleFactor*(H.z+this.ptranz));E*E+P*P+w*w<K*K+U*U+N*N&&(this.vpAtomID[F]=D.serial)}}}}}A++}}buildboundary(){let D=this.pWidth*this.pHeight;for(let p=0;p<this.pLength;p++)for(let A=0;A<this.pHeight;A++)for(let l=0;l<this.pWidth;l++){let n=p*D+l*this.pHeight+A;if(this.vpBits[n]&this.INOUT){let a=0;for(;a<26;){let u=p+this.nb[a][0],f=A+this.nb[a][2],d=l+this.nb[a][1];if(u>-1&&u<this.pLength&&d>-1&&d<this.pWidth&&f>-1&&f<this.pHeight&&!(this.vpBits[u*D+d*this.pHeight+f]&this.INOUT)){this.vpBits[n]|=this.ISBOUND;break}else a++}}}}fastdistancemap(){let D=new S(this.pLength,this.pWidth,this.pHeight),p=this.pWidth*this.pHeight,A=this.cutRadius*this.cutRadius,l=[],n=[],a;for(let d=0;d<this.pLength;d++)for(let r=0;r<this.pWidth;r++)for(let o=0;o<this.pHeight;o++)if(a=d*p+r*this.pHeight+o,this.vpBits[a]&=~this.ISDONE,this.vpBits[a]&this.INOUT&&this.vpBits[a]&this.ISBOUND){let v={ix:d,iy:r,iz:o};D.set(d,r,o,v),l.push(v),this.vpDistance[a]=0,this.vpBits[a]|=this.ISDONE,this.vpBits[a]&=~this.ISBOUND}do{n=this.fastoneshell(l,D),l=[];for(let d=0,r=n.length;d<r;d++)a=p*n[d].ix+this.pHeight*n[d].iy+n[d].iz,this.vpBits[a]&=~this.ISBOUND,this.vpDistance[a]<=1.0404*A&&l.push({ix:n[d].ix,iy:n[d].iy,iz:n[d].iz})}while(l.length!==0);l=[],n=[],D=null;let u=this.scaleFactor-.5;u<0&&(u=0);let f=A-.5/(.1+u);for(let d=0;d<this.pLength;d++)for(let r=0;r<this.pWidth;r++)for(let o=0;o<this.pHeight;o++)a=d*p+r*this.pHeight+o,this.vpBits[a]&=~this.ISBOUND,this.vpBits[a]&this.INOUT&&(!(this.vpBits[a]&this.ISDONE)||this.vpBits[a]&this.ISDONE&&this.vpDistance[a]>=f)&&(this.vpBits[a]|=this.ISBOUND)}fastoneshell(D,p){let A,l,n,a,u,f,d,r,o,v=[];if(D.length===0)return v;let h={ix:-1,iy:-1,iz:-1},y=this.pWidth*this.pHeight;for(let E=0,w=D.length;E<w;E++){A=D[E].ix,l=D[E].iy,n=D[E].iz,r=p.get(A,l,n);for(let W=0;W<6;W++)h.ix=A+this.nb[W][0],h.iy=l+this.nb[W][1],h.iz=n+this.nb[W][2],h.ix<this.pLength&&h.ix>-1&&h.iy<this.pWidth&&h.iy>-1&&h.iz<this.pHeight&&h.iz>-1&&(o=h.ix*y+this.pHeight*h.iy+h.iz,this.vpBits[o]&this.INOUT&&!(this.vpBits[o]&this.ISDONE)?(p.set(h.ix,h.iy,n+this.nb[W][2],r),a=h.ix-r.ix,u=h.iy-r.iy,f=h.iz-r.iz,d=a*a+u*u+f*f,this.vpDistance[o]=d,this.vpBits[o]|=this.ISDONE,this.vpBits[o]|=this.ISBOUND,v.push({ix:h.ix,iy:h.iy,iz:h.iz})):this.vpBits[o]&this.INOUT&&this.vpBits[o]&this.ISDONE&&(a=h.ix-r.ix,u=h.iy-r.iy,f=h.iz-r.iz,d=a*a+u*u+f*f,d<this.vpDistance[o]&&(p.set(h.ix,h.iy,h.iz,r),this.vpDistance[o]=d,this.vpBits[o]&this.ISBOUND||(this.vpBits[o]|=this.ISBOUND,v.push({ix:h.ix,iy:h.iy,iz:h.iz})))))}for(let E=0,w=D.length;E<w;E++){A=D[E].ix,l=D[E].iy,n=D[E].iz,r=p.get(A,l,n);for(let W=6;W<18;W++)h.ix=A+this.nb[W][0],h.iy=l+this.nb[W][1],h.iz=n+this.nb[W][2],h.ix<this.pLength&&h.ix>-1&&h.iy<this.pWidth&&h.iy>-1&&h.iz<this.pHeight&&h.iz>-1&&(o=h.ix*y+this.pHeight*h.iy+h.iz,this.vpBits[o]&this.INOUT&&!(this.vpBits[o]&this.ISDONE)?(p.set(h.ix,h.iy,n+this.nb[W][2],r),a=h.ix-r.ix,u=h.iy-r.iy,f=h.iz-r.iz,d=a*a+u*u+f*f,this.vpDistance[o]=d,this.vpBits[o]|=this.ISDONE,this.vpBits[o]|=this.ISBOUND,v.push({ix:h.ix,iy:h.iy,iz:h.iz})):this.vpBits[o]&this.INOUT&&this.vpBits[o]&this.ISDONE&&(a=h.ix-r.ix,u=h.iy-r.iy,f=h.iz-r.iz,d=a*a+u*u+f*f,d<this.vpDistance[o]&&(p.set(h.ix,h.iy,h.iz,r),this.vpDistance[o]=d,this.vpBits[o]&this.ISBOUND||(this.vpBits[o]|=this.ISBOUND,v.push({ix:h.ix,iy:h.iy,iz:h.iz})))))}for(let E=0,w=D.length;E<w;E++){A=D[E].ix,l=D[E].iy,n=D[E].iz,r=p.get(A,l,n);for(let W=18;W<26;W++)h.ix=A+this.nb[W][0],h.iy=l+this.nb[W][1],h.iz=n+this.nb[W][2],h.ix<this.pLength&&h.ix>-1&&h.iy<this.pWidth&&h.iy>-1&&h.iz<this.pHeight&&h.iz>-1&&(o=h.ix*y+this.pHeight*h.iy+h.iz,this.vpBits[o]&this.INOUT&&!(this.vpBits[o]&this.ISDONE)?(p.set(h.ix,h.iy,n+this.nb[W][2],r),a=h.ix-r.ix,u=h.iy-r.iy,f=h.iz-r.iz,d=a*a+u*u+f*f,this.vpDistance[o]=d,this.vpBits[o]|=this.ISDONE,this.vpBits[o]|=this.ISBOUND,v.push({ix:h.ix,iy:h.iy,iz:h.iz})):this.vpBits[o]&this.INOUT&&this.vpBits[o]&this.ISDONE&&(a=h.ix-r.ix,u=h.iy-r.iy,f=h.iz-r.iz,d=a*a+u*u+f*f,d<this.vpDistance[o]&&(p.set(h.ix,h.iy,h.iz,r),this.vpDistance[o]=d,this.vpBits[o]&this.ISBOUND||(this.vpBits[o]|=this.ISBOUND,v.push({ix:h.ix,iy:h.iy,iz:h.iz})))))}return v}marchingcubeinit(D){for(let p=0,A=this.vpBits.length;p<A;p++)D==1?this.vpBits[p]&=~this.ISBOUND:D==4?(this.vpBits[p]&=~this.ISDONE,this.vpBits[p]&this.ISBOUND&&(this.vpBits[p]|=this.ISDONE),this.vpBits[p]&=~this.ISBOUND):D==2?this.vpBits[p]&this.ISBOUND&&this.vpBits[p]&this.ISDONE?this.vpBits[p]&=~this.ISBOUND:this.vpBits[p]&this.ISBOUND&&!(this.vpBits[p]&this.ISDONE)&&(this.vpBits[p]|=this.ISDONE):D==3&&(this.vpBits[p]&=~this.ISBOUND)}marchingcube(D){this.marchingcubeinit(D),this.verts=[],this.faces=[],m.MarchingCube.march(this.vpBits,this.verts,this.faces,{smooth:1,nX:this.pLength,nY:this.pWidth,nZ:this.pHeight});let p=this.pWidth*this.pHeight;for(let A=0,l=this.verts.length;A<l;A++)this.verts[A].atomid=this.vpAtomID[this.verts[A].x*p+this.pHeight*this.verts[A].y+this.verts[A].z];m.MarchingCube.laplacianSmooth(1,this.verts,this.faces)}}m.MarchingCube=new x},"./src/VolumeData.ts":(k,R,g)=>{g.r(R),g.d(R,{VolumeData:()=>b});var M=g("./src/utilities.ts"),z=g("./src/WebGL/math/index.ts"),L=g("./src/parsers/VASP.ts"),B=g("./src/parsers/CUBE.ts"),x=g("./node_modules/pako/dist/pako.esm.mjs");class b{constructor(m,T,D){if(this.unit={x:1,y:1,z:1},this.origin={x:0,y:0,z:0},this.size={x:0,y:0,z:0},this.data=new Float32Array([]),this.matrix=null,this.inversematrix=null,this.isbinary=new Set(["ccp4","CCP4"]),this.getCoordinates=function(a){var u=a/(this.size.y*this.size.z),f=a%(this.size.y*this.size.z),d=a%this.size.z;return u*=this.unit.x,f*=this.unit.y,d*=this.unit.z,u+=this.origin.x,f+=this.origin.y,d+=this.origin.z,{x:u,y:f,z:d}},this.vasp=function(a){var u=a.replace(/^\s+/,"").split(/[\n\r]/),f=(0,L.VASP)(a)[0],d=f.length;if(d==0){console.warn("No good formating of CHG or CHGCAR file, not atomic information provided in the file."),this.data=[];return}var r=1.889725992,o=.036749309,v=parseFloat(u[1]),h;h=u[2].replace(/^\s+/,"").split(/\s+/);var y=new z.Vector3(parseFloat(h[0]),parseFloat(h[1]),parseFloat(h[2])).multiplyScalar(v*r);h=u[3].replace(/^\s+/,"").split(/\s+/);var E=new z.Vector3(parseFloat(h[0]),parseFloat(h[1]),parseFloat(h[2])).multiplyScalar(v*r);h=u[4].replace(/^\s+/,"").split(/\s+/);var w=new z.Vector3(parseFloat(h[0]),parseFloat(h[1]),parseFloat(h[2])).multiplyScalar(v*r),W=y.x*(E.y*w.z-w.y*E.z)-E.x*(y.y*w.z-w.y*y.z)+w.x*(y.y*E.z-E.y*y.z);W=Math.abs(W)/Math.pow(r,3);var P=1/W;u.splice(0,8+d+1);var j=u[0].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),V=Math.abs(parseFloat(j[0])),G=Math.abs(parseFloat(j[1])),F=Math.abs(parseFloat(j[2])),H=this.origin=new z.Vector3(0,0,0);this.size={x:V,y:G,z:F},this.unit=new z.Vector3(y.x,E.y,w.z),y=y.multiplyScalar(1/(r*V)),E=E.multiplyScalar(1/(r*G)),w=w.multiplyScalar(1/(r*F)),(y.y!=0||y.z!=0||E.x!=0||E.z!=0||w.x!=0||w.y!=0)&&(this.matrix=new z.Matrix4(y.x,E.x,w.x,0,y.y,E.y,w.y,0,y.z,E.z,w.z,0,0,0,0,1),this.matrix=this.matrix.multiplyMatrices(this.matrix,new z.Matrix4().makeTranslation(H.x,H.y,H.z)),this.origin=new z.Vector3(0,0,0),this.unit=new z.Vector3(1,1,1)),u.splice(0,1);var K=u.join(" ");K=K.replace(/^\s+/,"");var U=K.split(/[\s\r]+/);U.splice(V*G*F+1);for(var N=Float32Array.from(U,parseFloat),Y=0;Y<N.length;Y++)N[Y]=N[Y]*P*o;this.data=N},this.dx=function(a){var u=a.split(/[\n\r]+/),f,d=/gridpositions\s+counts\s+(\d+)\s+(\d+)\s+(\d+)/,r=/^origin\s+(\S+)\s+(\S+)\s+(\S+)/,o=/^delta\s+(\S+)\s+(\S+)\s+(\S+)/,v=/data follows/,h=0;for(h=0;h<u.length;h++){var y=u[h];if(f=d.exec(y)){var E=parseInt(f[1]),w=parseInt(f[2]),W=parseInt(f[3]);this.size={x:E,y:w,z:W}}else if(f=o.exec(y)){var P=parseFloat(f[1]);if((parseFloat(f[2])!=0||parseFloat(f[3])!=0)&&console.warn("Non-orthogonal delta matrix not currently supported in dx format"),h+=1,y=u[h],f=o.exec(y),f==null){console.error("Parse error in dx delta matrix");return}var j=parseFloat(f[2]);if((parseFloat(f[1])!=0||parseFloat(f[3])!=0)&&console.warn("Non-orthogonal delta matrix not currently supported in dx format"),h+=1,y=u[h],f=o.exec(y),f==null){console.error("Parse error in dx delta matrix");return}var V=parseFloat(f[3]);(parseFloat(f[1])!=0||parseFloat(f[2])!=0)&&console.warn("Non-orthogonal delta matrix not currently supported in dx format"),this.unit=new z.Vector3(P,j,V)}else if(f=r.exec(y)){var G=parseFloat(f[1]),F=parseFloat(f[2]),H=parseFloat(f[3]);this.origin=new z.Vector3(G,F,H)}else if(f=v.exec(y))break}if(h+=1,!this.size||!this.origin||!this.unit||!this.size){console.error("Error parsing dx format");return}var K=u.splice(h).join(" "),U=K.split(/[\s\r]+/);this.data=Float32Array.from(U,parseFloat)},T=T.toLowerCase(),/\.gz$/.test(T)){T=T.replace(/\.gz$/,"");try{this[T]&&this.isbinary.has(T)?(typeof m=="string"&&(m=(0,M.base64ToArray)(m)),m=(0,x.inflate)(m)):m=new TextDecoder("utf-8").decode((0,x.inflate)(m))}catch(a){console.error(a)}}if(this[T]&&(this.isbinary.has(T)&&typeof m=="string"&&(m=(0,M.base64ToArray)(m)),this[T](m)),D){if(D.negate)for(let a=0,u=this.data.length;a<u;a++)this.data[a]=-this.data[a];if(D.normalize){var p=0;for(let a=0,u=this.data.length;a<u;a++)p+=this.data[a];var A=p/this.data.length;p=0;for(let a=0,u=this.data.length;a<u;a++){var l=this.data[a]-A;p+=l*l}var n=p/this.data.length;for(let a=0,u=this.data.length;a<u;a++)this.data[a]=(this.data[a]-A)/n}}}getIndex(m,T,D){if(this.matrix){this.inversematrix==null&&(this.inversematrix=new z.Matrix4().getInverse(this.matrix));var p=new z.Vector3(m,T,D);p=p.applyMatrix4(this.inversematrix),m=p.x,T=p.y,D=p.z}else m-=this.origin.x,T-=this.origin.y,D-=this.origin.z,m/=this.unit.x,T/=this.unit.y,D/=this.unit.z;return m=Math.round(m),T=Math.round(T),D=Math.round(D),m<0||m>=this.size.x||T<0||T>=this.size.y||D<0||D>=this.size.z?-1:m*this.size.y*this.size.z+T*this.size.z+D}getVal(m,T,D){let p=this.getIndex(m,T,D);return p<0?0:this.data[p]}cube(m){var T=m.split(/\r?\n/);if(!(T.length<6)){var D=(0,B.CUBE)(m,{}).modelData[0].cryst,p=T[2].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),A=parseFloat(p[0]),l=Math.abs(A);this.origin=D.origin,this.size=D.size,this.unit=D.unit,this.matrix=D.matrix4;var n=6;A<0&&n++;var a=T.splice(l+n).join(" ");a=a.replace(/^\s+/,"");var u=a.split(/[\s\r]+/);this.data=Float32Array.from(u,parseFloat)}}ccp4(m){var T={};m=new Int8Array(m);var D=new Int32Array(m.buffer,0,56),p=new Float32Array(m.buffer,0,56),A=new DataView(m.buffer);if(T.MAP=String.fromCharCode(A.getUint8(208),A.getUint8(209),A.getUint8(210),A.getUint8(211)),T.MACHST=[A.getUint8(212),A.getUint8(213)],T.MACHST[0]===17&&T.MACHST[1]===17)for(var l=m.byteLength,n=0;n<l;n+=4)A.setFloat32(n,A.getFloat32(n),!0);T.NX=D[0],T.NY=D[1],T.NZ=D[2],T.MODE=D[3],T.NXSTART=D[4],T.NYSTART=D[5],T.NZSTART=D[6],T.MX=D[7],T.MY=D[8],T.MZ=D[9],T.xlen=p[10],T.ylen=p[11],T.zlen=p[12],T.alpha=p[13],T.beta=p[14],T.gamma=p[15],T.MAPC=D[16],T.MAPR=D[17],T.MAPS=D[18],T.DMIN=p[19],T.DMAX=p[20],T.DMEAN=p[21],T.ISPG=D[22],T.NSYMBT=D[23],T.LSKFLG=D[24],T.originX=p[49],T.originY=p[50],T.originZ=p[51],T.ARMS=p[54];var a=T,u=[a.xlen,0,0],f=[a.ylen*Math.cos(Math.PI/180*a.gamma),a.ylen*Math.sin(Math.PI/180*a.gamma),0],d=[a.zlen*Math.cos(Math.PI/180*a.beta),a.zlen*(Math.cos(Math.PI/180*a.alpha)-Math.cos(Math.PI/180*a.gamma)*Math.cos(Math.PI/180*a.beta))/Math.sin(Math.PI/180*a.gamma),0];d[2]=Math.sqrt(a.zlen*a.zlen*Math.sin(Math.PI/180*a.beta)*Math.sin(Math.PI/180*a.beta)-d[1]*d[1]);var r=[0,u,f,d],o=[0,a.MX,a.MY,a.MZ],v=[0,a.MAPC,a.MAPR,a.MAPS];this.matrix=new z.Matrix4,this.matrix.set(r[v[1]][0]/o[v[1]],r[v[2]][0]/o[v[2]],r[v[3]][0]/o[v[3]],0,r[v[1]][1]/o[v[1]],r[v[2]][1]/o[v[2]],r[v[3]][1]/o[v[3]],0,r[v[1]][2]/o[v[1]],r[v[2]][2]/o[v[2]],r[v[3]][2]/o[v[3]],0,0,0,0,1),this.matrix=this.matrix.multiplyMatrices(this.matrix,new z.Matrix4().makeTranslation(a.NXSTART+a.originX,a.NYSTART+a.originY,a.NZSTART+a.originZ)),this.origin=new z.Vector3(0,0,0),this.unit=new z.Vector3(1,1,1),this.size={x:T.NX,y:T.NY,z:T.NZ},this.dimensionorder=[T.MAPC,T.MAPR,T.MAPS];var h=new Float32Array(m.buffer,1024+T.NSYMBT),y=T.NX,E=T.NY,w=T.NZ;this.data=new Float32Array(y*E*w);for(let W=0;W<y;W++)for(let P=0;P<E;P++)for(let j=0;j<w;j++)this.data[(W*E+P)*w+j]=h[(j*E+P)*y+W]}}},"./src/VolumetricRender.ts":(k,R,g)=>{g.r(R),g.d(R,{GLVolumetricRender:()=>b});var M=g("./src/WebGL/shapes/index.ts"),z=g("./src/WebGL/math/index.ts"),L=g("./src/WebGL/index.ts"),B=g("./src/colors.ts"),x=g("./src/GLShape.ts");class b{static interpolateArray(m,T){function D(d,r,o){return d+(r-d)*o}var p=[],A=(m.length-1)/(T-1);p[0]=m[0];for(var l=1;l<T-1;l++){var n=l*A,a=Math.floor(n),u=Math.ceil(n),f=n-a;p[l]=D(m[a],m[u],f)}return p[T-1]=m[m.length-1],p}constructor(m,T,D){this.hidden=!1,this.boundingSphere=new M.Sphere,this.renderedShapeObj=null,this.shapeObj=null,this.subsamples=5,this.data=null,this.transferfunctionbuffer=[],this.min=0,this.max=0,T=T||{};var p=Object.assign([],T.transferfn);this.subsamples=T.subsamples||5;let A=256;p.forEach(function(E){E.value=parseFloat(E.value)}),p.sort(function(E,w){return E.value-w.value}),this.min=p[0].value,p.length==0&&p.push(p[0]),this.max=p[p.length-1].value;var l,n,a,u,f,d,r,o,v,h;for(let E=0;E<p.length-1;E++)if(a=B.CC.color(p[E].color),u=B.CC.color(p[E+1].color),v=p[E].opacity,h=p[E+1].opacity,l=Math.floor((p[E].value-this.min)*A/(this.max-this.min)),n=Math.floor((p[E+1].value-this.min)*A/(this.max-this.min)),l!=n){f=b.interpolateArray([a.r*255,u.r*255],n-l),d=b.interpolateArray([a.g*255,u.g*255],n-l),r=b.interpolateArray([a.b*255,u.b*255],n-l),o=b.interpolateArray([v*255,h*255],n-l);for(let w=0;w<f.length;w++)this.transferfunctionbuffer.push(f[w]),this.transferfunctionbuffer.push(d[w]),this.transferfunctionbuffer.push(r[w]),this.transferfunctionbuffer.push(o[w])}if(this.transferfunctionbuffer=new Uint8ClampedArray(this.transferfunctionbuffer),m.matrix){let E=new z.Vector3(0,0,0),w=new z.Vector3(m.size.x,m.size.y,m.size.z),W=new z.Vector3(1,1,1);E.applyMatrix4(m.matrix),w.applyMatrix4(m.matrix),W.applyMatrix4(m.matrix).sub(E),this.extent=[[E.x,E.y,E.z],[w.x,w.y,w.z]];for(let G=1;G<7;G++)w.x=G&1?m.size.x:0,w.y=G&2?m.size.y:0,w.z=G&4?m.size.z:0,w.applyMatrix4(m.matrix),this.extent[0][0]=Math.min(this.extent[0][0],w.x),this.extent[0][1]=Math.min(this.extent[0][1],w.y),this.extent[0][2]=Math.min(this.extent[0][2],w.z),this.extent[1][0]=Math.max(this.extent[1][0],w.x),this.extent[1][1]=Math.max(this.extent[1][1],w.y),this.extent[1][2]=Math.max(this.extent[1][2],w.z);let P=w.x-E.x,j=w.y-E.y,V=w.z-E.z;this.maxdepth=Math.sqrt(P*P+j*j+V*V),this.minunit=Math.min(Math.min(W.x,W.y),W.z),this.texmatrix=new z.Matrix4().identity().scale({x:m.size.x,y:m.size.y,z:m.size.z}),this.texmatrix=this.texmatrix.multiplyMatrices(m.matrix,this.texmatrix),this.texmatrix=this.texmatrix.getInverse(this.texmatrix)}else{this.texmatrix=new z.Matrix4().identity();let E=m.unit.x*m.size.x,w=m.unit.y*m.size.y,W=m.unit.z*m.size.z;this.texmatrix.makeTranslation(-m.origin.x/E,-m.origin.y/w,-m.origin.z/W),this.texmatrix.scale({x:1/E,y:1/w,z:1/W}),this.minunit=Math.min(Math.min(m.unit.x,m.unit.y),m.unit.z),this.extent=[[m.origin.x,m.origin.y,m.origin.z],[m.origin.x+E,m.origin.y+w,m.origin.z+W]],this.maxdepth=Math.sqrt(E*E+w*w+W*W)}var y=new x.GLShape({});if(y.addBox({corner:{x:this.extent[0][0],y:this.extent[0][1],z:this.extent[0][2]},dimensions:{w:this.extent[1][0]-this.extent[0][0],h:this.extent[1][1]-this.extent[0][1],d:this.extent[1][2]-this.extent[0][2]}}),this.geo=y.finalize(),this.boundingSphere.center=new z.Vector3((this.extent[0][0]+this.extent[1][0])/2,(this.extent[0][1]+this.extent[1][1])/2,(this.extent[0][2]+this.extent[1][2])/2),this.boundingSphere.radius=this.maxdepth/2,T.coords===void 0&&T.selection!==void 0&&(D?T.coords=D.selectedAtoms(T.selection):console.log("Need to provide viewer to volumetric renderer if selection specified.")),T.coords!==void 0&&T.seldist!==void 0){let E=new Uint8Array(m.data.length),w=T.seldist,W=w*w;for(let P=0,j=T.coords.length;P<j;P++){let V=T.coords[P],G=V.x-w,F=V.y-w,H=V.z-w,K=V.x+w,U=V.y+w,N=V.z+w;if(m.getIndex(G,F,H)>=0||m.getIndex(K,U,N)>=0)for(let Y=G;Y<K;Y+=this.minunit)for(let ne=F;ne<U;ne+=this.minunit)for(let ae=H;ae<N;ae+=this.minunit){let he=m.getIndex(Y,ne,ae);he>=0&&!E[he]&&(Y-V.x)*(Y-V.x)+(ne-V.y)*(ne-V.y)+(ae-V.z)*(ae-V.z)<W&&(E[he]=1)}}for(let P=0,j=m.data.length;P<j;P++)E[P]==0&&(m.data[P]=1/0)}this.data=m}globj(m){if(this.renderedShapeObj&&(m.remove(this.renderedShapeObj),this.renderedShapeObj=null),!this.hidden){this.shapeObj=new L.Object3D;var T=null,D=new L.Texture(this.data,!0),p=new L.Texture(this.transferfunctionbuffer,!1);D.needsUpdate=!0,p.needsUpdate=!0,p.flipY=!1,T=new L.VolumetricMaterial({transferfn:p,transfermin:this.min,transfermax:this.max,map:D,extent:this.extent,maxdepth:this.maxdepth,texmatrix:this.texmatrix,unit:this.minunit,subsamples:this.subsamples});var A=new L.Mesh(this.geo,T);this.shapeObj.add(A),this.renderedShapeObj=this.shapeObj.clone(),m.add(this.renderedShapeObj)}}removegl(m){this.renderedShapeObj&&(this.renderedShapeObj.geometry!==void 0&&this.renderedShapeObj.geometry.dispose(),this.renderedShapeObj.material!==void 0&&this.renderedShapeObj.material.dispose(),m.remove(this.renderedShapeObj),this.renderedShapeObj=null),this.shapeObj=null}get position(){return this.boundingSphere.center}get x(){return this.boundingSphere.center.x}get y(){return this.boundingSphere.center.y}get z(){return this.boundingSphere.center.z}}},"./src/WebGL/Camera.ts":(k,R,g)=>{g.r(R),g.d(R,{Camera:()=>L});var M=g("./src/WebGL/core/index.ts"),z=g("./src/WebGL/math/index.ts");class L extends M.Object3D{constructor(x=50,b=1,S=.1,m=2e3,T=!1){super(),this.projectionMatrix=new z.Matrix4,this.projectionMatrixInverse=new z.Matrix4,this.matrixWorldInverse=new z.Matrix4,this.fov=x,this.aspect=b,this.near=S,this.far=m;var D=this.position.z;this.right=D*Math.tan(Math.PI/180*x),this.left=-this.right,this.top=this.right/this.aspect,this.bottom=-this.top,this.ortho=!!T,this.updateProjectionMatrix()}lookAt(x){this.matrix.lookAt(this.position,x,this.up),this.rotationAutoUpdate&&(this.useQuaternion===!1&&this.rotation instanceof z.Vector3?this.rotation.setEulerFromRotationMatrix(this.matrix,this.eulerOrder):console.error("Unimplemented math operation."))}updateProjectionMatrix(){this.ortho?this.projectionMatrix.makeOrthographic(this.left,this.right,this.top,this.bottom,this.near,this.far):this.projectionMatrix.makePerspective(this.fov,this.aspect,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)}}},"./src/WebGL/Fog.ts":(k,R,g)=>{g.r(R),g.d(R,{Fog:()=>z});var M=g("./src/colors.ts");class z{constructor(B,x=1,b=1e3){this.name="",this.color=new M.Color(B),this.near=x,this.far=b}clone(){return new z(this.color.getHex(),this.near,this.far)}}},"./src/WebGL/Renderer.ts":(k,R,g)=>{g.r(R),g.d(R,{Renderer:()=>l});var M=g("./src/WebGL/Camera.ts"),z=g("./src/WebGL/constants/Sides.ts"),L=g("./src/WebGL/constants/TextureConstants.ts"),B=g("./src/WebGL/core/index.ts"),x=g("./src/colors.ts"),b=g("./src/WebGL/materials/index.ts"),S=g("./src/WebGL/math/index.ts"),m=g("./src/WebGL/objects/index.ts"),T=g("./src/WebGL/shaders/index.ts"),D=g("./src/WebGL/SpritePlugin.ts"),p=null,A=null;class l{constructor(a){this.context=null,this.devicePixelRatio=1,this.sortObjects=!0,this.autoUpdateObjects=!0,this.autoUpdateScene=!0,this.info={memory:{programs:0,geometries:0,textures:0},render:{calls:0,vertices:0,faces:0,points:0}},this._offscreen=null,this._bitmap=null,this._programs=[],this._programs_counter=0,this._webglversion=1,this._currentProgram=null,this._currentMaterialId=-1,this._currentGeometryGroupHash=null,this._currentCamera=null,this._geometryGroupCounter=0,this._oldDoubleSided=-1,this._oldFlipSided=-1,this._oldDepthTest=-1,this._oldDepthWrite=-1,this._oldPolygonOffset=null,this._oldLineWidth=null,this._viewportWidth=0,this._viewportHeight=0,this._currentWidth=0,this._currentHeight=0,this._enabledAttributes={},this._vector3=new S.Vector3,this._worldInverse=new S.Matrix4,this._projInverse=new S.Matrix4,this._textureMatrix=new S.Matrix4,this._fullProjModelMatrix=new S.Matrix4,this._fullProjModelMatrixInv=new S.Matrix4,this._direction=new S.Vector3,this._lightsNeedUpdate=!0,this._lights={ambient:[0,0,0],directional:{length:0,colors:[],positions:[]},point:{length:0,colors:[],positions:[],distances:[]},spot:{length:0,colors:[],positions:[],distances:[],directions:[],anglesCos:[],exponents:[]},hemi:{length:0,skyColors:[],groundColors:[],positions:[]}},this.sprites=new D.SpritePlugin,this._screenshader=null,this._AOshader=null,this._blurshader=null,this._vertexattribpos=null,this._aovertexattribpos=null,this._blurvertexattribpos=null,this._screenQuadVBO=null,this._fb=null,this._targetTexture=null,this._depthTexture=null,this._shadingTexture=null,this._scratchTexture=null,this._AOstrength=1,this._AOradius=5,this.SHADE_TEXTURE=3,a=a||{},this.row=a.row,this.col=a.col,this.rows=a.rows,this.cols=a.cols,this._canvas=a.canvas!==void 0?a.canvas:document.createElement("canvas"),this._precision=a.precision!==void 0?a.precision:"highp",this._alpha=a.alpha!==void 0?a.alpha:!0,this._premultipliedAlpha=a.premultipliedAlpha!==void 0?a.premultipliedAlpha:!0,this._antialias=a.antialias!==void 0?a.antialias:!1,this._preserveDrawingBuffer=a.preserveDrawingBuffer!==void 0?a.preserveDrawingBuffer:!1,this._clearColor=a.clearColor!==void 0?new x.Color(a.clearColor):new x.Color(0),this._clearAlpha=a.clearAlpha!==void 0?a.clearAlpha:0,this._outlineMaterial=new b.MeshOutlineMaterial(a.outline),this._outlineSphereImposterMaterial=new b.SphereImposterOutlineMaterial(a.outline),this._outlineStickImposterMaterial=new b.StickImposterOutlineMaterial(a.outline),this._outlineEnabled=!!a.outline,this._AOEnabled=!!a.ambientOcclusion,a.ambientOcclusion&&typeof a.ambientOcclusion.strength<"u"&&(this._AOstrength=parseFloat(a.ambientOcclusion.strength)),this._AOstrength==0&&(this._AOEnabled=!1),a.ambientOcclusion&&typeof a.ambientOcclusion.radius<"u"&&(this._AOradius=parseFloat(a.ambientOcclusion.radius)),this.domElement=this._canvas,this._canvas.id=a.id,!(a.containerWidth==0||a.containerHeight==0)&&(this.initGL(),this.setDefaultGLState(),this.context=this._gl,this.isWebGL1()?this._extInstanced=this._gl.getExtension("ANGLE_instanced_arrays"):this._extInstanced={vertexAttribDivisorANGLE:this._gl.vertexAttribDivisor.bind(this._gl),drawElementsInstancedANGLE:this._gl.drawElementsInstanced.bind(this._gl)},this._extFragDepth=this._gl.getExtension("EXT_frag_depth"),this._extFloatLinear=this._gl.getExtension("OES_texture_float_linear"),this._extColorBufferFloat=this._gl.getExtension("EXT_color_buffer_float"),this.sprites.init(this))}supportedExtensions(){return{supportsAIA:!!this._extInstanced,supportsImposters:!!this._extFragDepth||!this.isWebGL1(),regen:!1}}getContext(){return this._gl}getCanvas(){return this._canvas}isLost(){return this._gl==null||this._gl.isContextLost()}getPrecision(){return this._precision}setClearColorHex(a,u){this._clearColor.setHex(a),this._clearAlpha=u,this.isLost()||this._gl.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearAlpha)}enableOutline(a){this._outlineMaterial=new b.MeshOutlineMaterial(a),this._outlineSphereImposterMaterial=new b.SphereImposterOutlineMaterial(a),this._outlineStickImposterMaterial=new b.StickImposterOutlineMaterial(a),this._outlineEnabled=!0}disableOutline(){this._outlineEnabled=!1}enableAmbientOcclusion(a){a&&(a.strength&&(this._AOstrength=a.strength),a.scale&&(this._AOradius=a.scale)),this._AOEnabled=this._AOstrength>0}disableAmbientOcclusion(){this._AOEnabled=!1}setViewport(){if(this._offscreen&&(this._offscreen.width=this._canvas.width,this._offscreen.height=this._canvas.height),this.rows!=null&&this.cols!=null&&this.row!=null&&this.col!=null){var a=this._canvas.width/this.cols,u=this._canvas.height/this.rows;this._viewportWidth=a,this._viewportHeight=u,this.isLost()||(this._gl.enable(this._gl.SCISSOR_TEST),this._gl.scissor(a*this.col,u*this.row,a,u),this._gl.viewport(a*this.col,u*this.row,a,u))}}setSize(a,u){if(this.devicePixelRatio=window.devicePixelRatio!==void 0?window.devicePixelRatio:1,this._antialias&&this.devicePixelRatio<2&&(this.devicePixelRatio*=2),this.rows!=null&&this.cols!=null&&this.row!=null&&this.col!=null){var f=a/this.cols,d=u/this.rows;this._canvas.width=a*this.devicePixelRatio,this._canvas.height=u*this.devicePixelRatio,this._viewportWidth=f*this.devicePixelRatio,this._viewportHeight=d*this.devicePixelRatio,this._canvas.style.width=a+"px",this._canvas.style.height=u+"px",this.setViewport()}else this._viewportWidth=this._canvas.width=a*this.devicePixelRatio,this._viewportHeight=this._canvas.height=u*this.devicePixelRatio,this._canvas.style.width=a+"px",this._canvas.style.height=u+"px",this.isLost()||this._gl.viewport(0,0,this._gl.drawingBufferWidth,this._gl.drawingBufferHeight);this.initFrameBuffer()}clear(a,u,f){var d=0;(a===void 0||a)&&(d|=this._gl.COLOR_BUFFER_BIT),(u===void 0||u)&&(d|=this._gl.DEPTH_BUFFER_BIT),(f===void 0||f)&&(d|=this._gl.STENCIL_BUFFER_BIT),this._gl.clear(d)}setMaterialFaces(a,u){var f=a.side===z.DoubleSide,d=a.side===z.BackSide;a.imposter||(d=u?!d:d),this._oldDoubleSided!==f&&(f?this._gl.disable(this._gl.CULL_FACE):this._gl.enable(this._gl.CULL_FACE),this._oldDoubleSided=f),this._oldFlipSided!==d&&(d?this._gl.frontFace(this._gl.CW):this._gl.frontFace(this._gl.CCW),this._oldFlipSided=d),this._gl.cullFace(this._gl.BACK)}setDepthTest(a){this._oldDepthTest!==a&&(a?this._gl.enable(this._gl.DEPTH_TEST):this._gl.disable(this._gl.DEPTH_TEST),this._oldDepthTest=a)}setDepthWrite(a){this._oldDepthWrite!==a&&(this._gl.depthMask(a),this._oldDepthWrite=a)}setBlending(a){a?(this._gl.enable(this._gl.BLEND),this._gl.blendEquationSeparate(this._gl.FUNC_ADD,this._gl.FUNC_ADD),this._gl.blendFuncSeparate(this._gl.SRC_ALPHA,this._gl.ONE_MINUS_SRC_ALPHA,this._gl.ONE,this._gl.ONE_MINUS_SRC_ALPHA)):this._gl.disable(this._gl.BLEND)}initMaterial(a,u,f,d){a.addEventListener("dispose",this.onMaterialDispose.bind(this));var r,o;if(o=a.shaderID,o){var v=T.ShaderLib[o];a.vertexShader=v.vertexShader,a.fragmentShader=v.fragmentShader,a.uniforms=T.ShaderUtils.clone(v.uniforms),a.shaded&&a.makeShaded(this.SHADE_TEXTURE)}r={wireframe:a.wireframe,fragdepth:a.imposter,volumetric:a.volumetric,shaded:a.shaded},a.program=this.buildProgram(a.fragmentShader,a.vertexShader,a.uniforms,r)}renderBuffer(a,u,f,d,r,o){if(d.visible){var v,h;if(v=this.setProgram(a,u,f,d,o,this),!!v){h=v.attributes;var y=!1,E=d.wireframe?1:0,w=r.id*16777215+v.id*2+E;w!==this._currentGeometryGroupHash&&(this._currentGeometryGroupHash=w,y=!0),y&&(this.disableAttributes(),h.position>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,r.__webglVertexBuffer),this.enableAttribute(h.position),this._gl.vertexAttribPointer(h.position,3,this._gl.FLOAT,!1,0,0)),h.color>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,r.__webglColorBuffer),this.enableAttribute(h.color),this._gl.vertexAttribPointer(h.color,3,this._gl.FLOAT,!1,0,0)),h.normal>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,r.__webglNormalBuffer),this.enableAttribute(h.normal),this._gl.vertexAttribPointer(h.normal,3,this._gl.FLOAT,!1,0,0)),h.offset>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,r.__webglOffsetBuffer),this.enableAttribute(h.offset),this._gl.vertexAttribPointer(h.offset,3,this._gl.FLOAT,!1,0,0)),h.radius>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,r.__webglRadiusBuffer),this.enableAttribute(h.radius),this._gl.vertexAttribPointer(h.radius,1,this._gl.FLOAT,!1,0,0)));var W,P;if(o instanceof m.Mesh){if(d.shaderID==="instanced"){var j=d.sphere.geometryGroups[0];y&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,r.__webglVertexBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,j.vertexArray,this._gl.STATIC_DRAW),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,r.__webglNormalBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,j.normalArray,this._gl.STATIC_DRAW),this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,r.__webglFaceBuffer),this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,j.faceArray,this._gl.STATIC_DRAW)),W=j.faceidx,this._extInstanced.vertexAttribDivisorANGLE(h.offset,1),this._extInstanced.vertexAttribDivisorANGLE(h.radius,1),this._extInstanced.vertexAttribDivisorANGLE(h.color,1),this._extInstanced.drawElementsInstancedANGLE(this._gl.TRIANGLES,W,this._gl.UNSIGNED_SHORT,0,r.radiusArray.length),this._extInstanced.vertexAttribDivisorANGLE(h.offset,0),this._extInstanced.vertexAttribDivisorANGLE(h.radius,0),this._extInstanced.vertexAttribDivisorANGLE(h.color,0)}else d.wireframe?(P=r.lineidx,this.setLineWidth(d.wireframeLinewidth),y&&this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,r.__webglLineBuffer),this._gl.drawElements(this._gl.LINES,P,this._gl.UNSIGNED_SHORT,0)):(W=r.faceidx,y&&this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,r.__webglFaceBuffer),this._gl.drawElements(this._gl.TRIANGLES,W,this._gl.UNSIGNED_SHORT,0));this.info.render.calls++,this.info.render.vertices+=W,this.info.render.faces+=W/3}else o instanceof m.Line&&(P=r.vertices,this.setLineWidth(d.linewidth),this._gl.drawArrays(this._gl.LINES,0,P),this.info.render.calls++)}}}clearShading(){this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._shadingTexture,0),this.clear(!1,!0,!1),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._depthTexture,0)}setShading(a,u,f){let d=a.__lights,r=a.fog,o=[];for(let y=0,E=a.__webglObjects.length;y<E;y++){let w=a.__webglObjects[y];w.render&&w[f]&&o.push(w)}if(o.length==0)return;this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._shadingTexture,0),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,null,0),this.renderObjects(a.__webglObjects,!0,f+"Depth",u,d,r,!1),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._scratchTexture,0),this.clear(!1,!0,!1),this._gl.useProgram(this._AOshader),this._currentProgram=this._AOshader,this.setDepthTest(-1),this.setDepthWrite(-1);let v=this._AOshader.uniforms;this._gl.uniform1f(v.total_strength,this._AOstrength),this._gl.uniform1f(v.radius,this._AOradius),this._fullProjModelMatrix=new S.Matrix4,this._fullProjModelMatrixInv=new S.Matrix4;let h=o[0].object;this._fullProjModelMatrix.multiplyMatrices(u.projectionMatrix,h._modelViewMatrix),this._fullProjModelMatrixInv.getInverse(this._fullProjModelMatrix),this._gl.uniformMatrix4fv(v.projectionMatrix,!1,this._fullProjModelMatrix.elements),this._gl.uniformMatrix4fv(v.projinv,!1,this._fullProjModelMatrixInv.elements),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._screenQuadVBO),this._gl.enableVertexAttribArray(this._aovertexattribpos),this._gl.vertexAttribPointer(this._aovertexattribpos,2,this._gl.FLOAT,!1,0,0),this._gl.activeTexture(this._gl.TEXTURE0),this._gl.bindTexture(this._gl.TEXTURE_2D,this._shadingTexture),this._gl.drawArrays(this._gl.TRIANGLES,0,6),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._shadingTexture,0),this.clear(!1,!0,!1),this._gl.useProgram(this._blurshader),this._currentProgram=this._blurshader,this.setDepthTest(-1),this.setDepthWrite(-1),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._screenQuadVBO),this._gl.enableVertexAttribArray(this._blurvertexattribpos),this._gl.vertexAttribPointer(this._blurvertexattribpos,2,this._gl.FLOAT,!1,0,0),this._gl.activeTexture(this._gl.TEXTURE0),this._gl.bindTexture(this._gl.TEXTURE_2D,this._scratchTexture),this._gl.drawArrays(this._gl.TRIANGLES,0,6),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,this._targetTexture,0),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._depthTexture,0)}render(a,u){if(!(u instanceof M.Camera)){console.error("Renderer.render: camera is not an instance of Camera.");return}var f,d,r,o,v,h=a.__lights,y=a.fog;if(this._currentMaterialId=-1,this._lightsNeedUpdate=!0,this.autoUpdateScene&&a.updateMatrixWorld(),u.parent===void 0&&u.updateMatrixWorld(),u.matrixWorldInverse.getInverse(u.matrixWorld),this.isLost())return;this.autoUpdateObjects&&this.initWebGLObjects(a),this.info.render.calls=0,this.info.render.vertices=0,this.info.render.faces=0,this.info.render.points=0,this._currentWidth=this._viewportWidth,this._currentHeight=this._viewportHeight,this.setViewport(),this.setFrameBuffer(),this._gl.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearAlpha),this.clear(!0,!0,!0),v=a.__webglObjects;let E=!1,w=this._AOEnabled;for(f=0,d=v.length;f<d;f++)r=v[f],o=r.object,r.render=!1,o.visible&&(this.setupMatrices(o,u),this.unrollBufferMaterial(r),r.render=!0,r.volumetric&&(E=!0),r.hasAO&&(w=!0));if(this.setBlending(!1),w&&this.setShading(a,u,"opaque"),this.renderObjects(a.__webglObjects,!0,"opaque",u,h,y,!1),w&&this.clearShading(),this.renderSprites(a,u,!1),this.renderObjects(a.__webglObjects,!0,"transparentDepth",u,h,y,!0),this.renderObjects(a.__webglObjects,!1,"transparent",u,h,y,!0),E&&this._fb&&(this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,null,0),this.renderObjects(a.__webglObjects,!1,"volumetric",u,h,y,!0)),this.renderFrameBuffertoScreen(),this.setDepthTest(!0),this.setDepthWrite(!0),this.renderSprites(a,u,!0),this._bitmap){const W=this._offscreen.transferToImageBitmap();this._bitmap.transferFromImageBitmap(W),W.close()}}setFrameBuffer(){if(this.isWebGL1()||!this._fb)return;let a=this._viewportWidth,u=this._viewportHeight;this._gl.enable(this._gl.SCISSOR_TEST),this._gl.scissor(0,0,a,u),this._gl.viewport(0,0,a,u),this._gl.bindTexture(this._gl.TEXTURE_2D,this._targetTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.RGBA,a,u,0,this._gl.RGBA,this._gl.UNSIGNED_BYTE,null),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.LINEAR),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.LINEAR),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.bindTexture(this._gl.TEXTURE_2D,this._depthTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.DEPTH_COMPONENT32F,a,u,0,this._gl.DEPTH_COMPONENT,this._gl.FLOAT,null),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._shadingTexture&&(this._gl.deleteTexture(this._shadingTexture),this._shadingTexture=this._gl.createTexture(),this._gl.bindTexture(this._gl.TEXTURE_2D,this._shadingTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.DEPTH_COMPONENT32F,a,u,0,this._gl.DEPTH_COMPONENT,this._gl.FLOAT,null),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.deleteTexture(this._scratchTexture),this._scratchTexture=this._gl.createTexture(),this._gl.bindTexture(this._gl.TEXTURE_2D,this._scratchTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.DEPTH_COMPONENT32F,a,u,0,this._gl.DEPTH_COMPONENT,this._gl.FLOAT,null),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE)),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,this._fb),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,this._targetTexture,0),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._shadingTexture,0),this._gl.clearDepth(1),this._gl.clear(this._gl.DEPTH_BUFFER_BIT),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._depthTexture,0)}initFrameBuffer(){if(this.isWebGL1())return;let a=this._viewportWidth,u=this._viewportHeight;this._gl.enable(this._gl.SCISSOR_TEST),this._gl.scissor(0,0,a,u),this._gl.viewport(0,0,a,u),this._targetTexture=this._gl.createTexture(),this._depthTexture=this._gl.createTexture(),this._shadingTexture=this._gl.createTexture(),this._scratchTexture=this._gl.createTexture(),this._fb=this._gl.createFramebuffer();var f=this._antialias?T.ShaderLib.screenaa:T.ShaderLib.screen;this._screenshader=this.buildProgram(f.fragmentShader,f.vertexShader,f.uniforms,{}),this._vertexattribpos=this._gl.getAttribLocation(this._screenshader,"vertexPosition");var d=[1,1,-1,1,-1,-1,-1,-1,1,-1,1,1];this._screenQuadVBO=this._gl.createBuffer(),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._screenQuadVBO),this._gl.bufferData(this._gl.ARRAY_BUFFER,new Float32Array(d),this._gl.STATIC_DRAW);let r=T.ShaderLib.ssao;this._AOshader=this.buildProgram(r.fragmentShader,r.vertexShader,r.uniforms,{}),this._aovertexattribpos=this._gl.getAttribLocation(this._AOshader,"vertexPosition");let o=T.ShaderLib.blur;this._blurshader=this.buildProgram(o.fragmentShader,o.vertexShader,o.uniforms,{}),this._blurvertexattribpos=this._gl.getAttribLocation(this._blurshader,"vertexPosition")}renderFrameBuffertoScreen(){this.isWebGL1()||this._fb===null||(this.setViewport(),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,null),this._gl.clear(this._gl.COLOR_BUFFER_BIT|this._gl.DEPTH_BUFFER_BIT),this._gl.frontFace(this._gl.CCW),this._gl.cullFace(this._gl.BACK),this._gl.useProgram(this._screenshader),this._currentProgram=this._screenshader,this.setDepthTest(-1),this.setDepthWrite(-1),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._screenQuadVBO),this._gl.enableVertexAttribArray(this._vertexattribpos),this._gl.vertexAttribPointer(this._vertexattribpos,2,this._gl.FLOAT,!1,0,0),this._gl.activeTexture(this._gl.TEXTURE0),this._gl.bindTexture(this._gl.TEXTURE_2D,this._targetTexture),this._gl.drawArrays(this._gl.TRIANGLES,0,6))}initWebGLObjects(a){if(a.__webglObjects||(a.__webglObjects=[],a.__webglObjectsImmediate=[],a.__webglSprites=[],a.__webglFlares=[]),a.__objectsAdded.length){for(;a.__objectsAdded.length;)this.addObject(a.__objectsAdded[0],a),a.__objectsAdded.splice(0,1);this._currentGeometryGroupHash=-1}for(;a.__objectsRemoved.length;)this.removeObject(a.__objectsRemoved[0],a),a.__objectsRemoved.splice(0,1);for(var u=0,f=a.__webglObjects.length;u<f;u++)this.updateObject(a.__webglObjects[u].object)}getYRatio(){return this.rows!==void 0&&this.row!==void 0?this.rows:1}getXRatio(){return this.cols!==void 0&&this.col!==void 0?this.cols:1}getAspect(a,u){(a==null||u==null)&&(a=this._canvas.width,u=this._canvas.height);var f=a/u;if(this.rows!=null&&this.cols!=null&&this.row!=null&&this.col!=null){var d=a/this.cols,r=u/this.rows;f=d/r}return f}setTexture(a,u,f){if(a.needsUpdate){a.__webglInit||(a.__webglInit=!0,a.addEventListener("dispose",this.onTextureDispose.bind(this)),a.__webglTexture=this._gl.createTexture(),this.info.memory.textures++),this._gl.activeTexture(this._gl.TEXTURE0+u);var d=f?this._gl.TEXTURE_3D:this._gl.TEXTURE_2D;this._gl.bindTexture(d,a.__webglTexture),this._gl.pixelStorei(this._gl.UNPACK_FLIP_Y_WEBGL,a.flipY),this._gl.pixelStorei(this._gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a.premultiplyAlpha),this._gl.pixelStorei(this._gl.UNPACK_ALIGNMENT,a.unpackAlignment),this._gl.pixelStorei(this._gl.PACK_ALIGNMENT,a.unpackAlignment);var r=this.paramToGL(a.format),o=this.paramToGL(a.type);if(f)this.setTextureParameters(this._gl.TEXTURE_3D,a),this._gl.texImage3D(this._gl.TEXTURE_3D,0,this._gl.R32F,a.image.size.z,a.image.size.y,a.image.size.x,0,this._gl.RED,this._gl.FLOAT,a.image.data);else{var v=a.image,h=v.width,y=v.height;typeof h>"u"&&(h=v.length,r==this._gl.RGBA&&(h/=4),y=1),this.setTextureParameters(this._gl.TEXTURE_2D,a),this.isWebGL1()?this._gl.texImage2D(this._gl.TEXTURE_2D,0,r,r,o,a.image):this._gl.texImage2D(this._gl.TEXTURE_2D,0,r,h,y,0,r,o,a.image)}a.needsUpdate=!1,a.onUpdate&&a.onUpdate()}else this._gl.activeTexture(this._gl.TEXTURE0+u),f?this._gl.bindTexture(this._gl.TEXTURE_3D,a.__webglTexture):this._gl.bindTexture(this._gl.TEXTURE_2D,a.__webglTexture)}supportsVolumetric(){return!this.isWebGL1()}enableAttribute(a){this._enabledAttributes[a]||(this._gl.enableVertexAttribArray(a),this._enabledAttributes[a]=!0)}disableAttributes(){for(let a in this._enabledAttributes)this._enabledAttributes[a]&&(this._gl.disableVertexAttribArray(a),this._enabledAttributes[a]=!1)}setPolygonOffset(a,u,f){this._oldPolygonOffset!==a&&(a?this._gl.enable(this._gl.POLYGON_OFFSET_FILL):this._gl.disable(this._gl.POLYGON_OFFSET_FILL))}setLineWidth(a){a!==this._oldLineWidth&&(this._gl.lineWidth(a),this._oldLineWidth=a)}deallocateGeometry(a){if(a.__webglInit=void 0,a.__webglVertexBuffer!==void 0&&this._gl.deleteBuffer(a.__webglVertexBuffer),a.__webglColorBuffer!==void 0&&this._gl.deleteBuffer(a.__webglColorBuffer),a.geometryGroups!==void 0)for(var u=0,f=a.groups;u<f;u++){var d=a.geometryGroups[u];d.__webglVertexBuffer!==void 0&&this._gl.deleteBuffer(d.__webglVertexBuffer),d.__webglColorBuffer!==void 0&&this._gl.deleteBuffer(d.__webglColorBuffer),d.__webglNormalBuffer!==void 0&&this._gl.deleteBuffer(d.__webglNormalBuffer),d.__webglFaceBuffer!==void 0&&this._gl.deleteBuffer(d.__webglFaceBuffer),d.__webglLineBuffer!==void 0&&this._gl.deleteBuffer(d.__webglLineBuffer)}}deallocateMaterial(a){var u=a.program;if(u!==void 0){a.program=void 0;var f,d,r,o=!1;for(f=0,d=this._programs.length;f<d;f++)if(r=this._programs[f],r.program===u){r.usedTimes--,r.usedTimes===0&&(o=!0);break}if(o===!0){var v=[];for(f=0,d=this._programs.length;f<d;f++)r=this._programs[f],r.program!==u&&v.push(r);this._programs=v,this._gl.deleteProgram(u),this.info.memory.programs--}}}deallocateTexture(a){if(a.image&&a.image.__webglTextureCube)this._gl.deleteTexture(a.image.__webglTextureCube);else{if(!a.__webglInit)return;a.__webglInit=!1,this._gl.deleteTexture(a.__webglTexture)}}onGeometryDispose(a){var u=a.target;u.removeEventListener("dispose",this.onGeometryDispose),this.deallocateGeometry(u),this.info.memory.geometries--}onTextureDispose(a){var u=a.target;u.removeEventListener("dispose",this.onTextureDispose),this.deallocateTexture(u),this.info.memory.textures--}onMaterialDispose(a){var u=a.target;u.removeEventListener("dispose",this.onMaterialDispose),this.deallocateMaterial(u)}getShader(a,u){var f;return!this.isWebGL1()&&!u.startsWith("#version")&&(u=u.replace(/gl_FragDepthEXT/g,"gl_FragDepth"),a=="fragment"?u=u.replace(/varying/g,"in"):u=u.replace(/varying/g,"out"),u=u.replace(/attribute/g,"in"),u=u.replace(/texture2D/g,"texture"),u=u.replace(/\/\/DEFINEFRAGCOLOR/g,"out vec4 glFragColor;"),u=u.replace(/gl_FragColor/g,"glFragColor"),u=`#version 300 es
`+u),a==="fragment"?f=this._gl.createShader(this._gl.FRAGMENT_SHADER):a==="vertex"&&(f=this._gl.createShader(this._gl.VERTEX_SHADER)),f==null?null:(this._gl.shaderSource(f,u),this._gl.compileShader(f),this._gl.getShaderParameter(f,this._gl.COMPILE_STATUS)?f:(console.error(this._gl.getShaderInfoLog(f)),console.error("could not initialize shader"),null))}buildProgram(a,u,f,d){var r,o,v,h,y=[];y.push(a),y.push(u);for(r in d)y.push(r),y.push(d[r]);for(h=y.join(),r=0,o=this._programs.length;r<o;r++){var E=this._programs[r];if(E.code===h)return E.usedTimes++,E.program}if(this.isWebGL1()&&d.volumetric)throw new Error("Volumetric rendering requires webgl2 which is not supported by your hardware.");if(v=this._gl.createProgram(),v==null)return null;var w=this._precision,W="precision "+w+" float;",P=[d.volumetric?"#version 300 es":"",W].join(`
`),j=[d.volumetric?"#version 300 es":"",d.fragdepth&&this.isWebGL1()?"#extension GL_EXT_frag_depth: enable":"",d.shaded?"#define SHADED 1":"",d.wireframe?"#define WIREFRAME 1":"",W].join(`
`),V=this.getShader("fragment",j+a),G=this.getShader("vertex",P+u);G!=null&&this._gl.attachShader(v,G),V!=null&&this._gl.attachShader(v,V),this._gl.linkProgram(v),this._gl.getProgramParameter(v,this._gl.LINK_STATUS)||console.error("Could not initialize shader"),v.uniforms={},v.attributes={};var F,H,K;F=["viewMatrix","modelViewMatrix","projectionMatrix","normalMatrix","vWidth","vHeight"];for(H in f)F.push(H);for(K=0;K<F.length;K++){var U=F[K];v.uniforms[U]=this._gl.getUniformLocation(v,U)}for(F=["position","normal","color","lineDistance","offset","radius"],K=0;K<F.length;K++){var N=F[K];v.attributes[N]=this._gl.getAttribLocation(v,N)}return v.id=this._programs_counter++,this._programs.push({program:v,code:h,usedTimes:1}),this.info.memory.programs=this._programs.length,v}setProgram(a,u,f,d,r,o){if(d.needsUpdate&&(d.program&&this.deallocateMaterial(d),this.initMaterial(d,u,f,r),d.needsUpdate=!1),d.program==null)return null;var v=!1,h=d.program,y=h.uniforms,E=d.uniforms;if(h!=this._currentProgram&&(this._gl.useProgram(h),this._currentProgram=h,v=!0),d.id!=this._currentMaterialId&&(this._currentMaterialId=d.id,v=!0),a!=this._currentCamera&&(this._currentCamera=a,v=!0),y.projectionMatrix&&this._gl.uniformMatrix4fv(y.projectionMatrix,!1,a.projectionMatrix.elements),y.modelViewMatrix&&this._gl.uniformMatrix4fv(y.modelViewMatrix,!1,r._modelViewMatrix.elements),y.normalMatrix&&this._gl.uniformMatrix3fv(y.normalMatrix,!1,r._normalMatrix.elements),y.projinv&&(this._projInverse.getInverse(a.projectionMatrix),this._gl.uniformMatrix4fv(y.projinv,!1,this._projInverse.elements)),y.viewMatrix&&this._gl.uniformMatrix4fv(y.viewMatrix,!1,a.matrixWorldInverse.elements),y.vWidth&&this._gl.uniform1f(y.vWidth,this._viewportWidth),y.vHeight&&this._gl.uniform1f(y.vHeight,this._viewportHeight),v){if(E.fogColor.value=f.color,E.fogNear.value=f.near,E.fogFar.value=f.far,d.shaderID.startsWith("lambert")||d.shaderID==="instanced"||d.shaderID.endsWith("imposter"))this._lightsNeedUpdate&&(this.setupLights(h,u),this._lightsNeedUpdate=!1),E.directionalLightColor.value=this._lights.directional.colors,E.directionalLightDirection.value=this._lights.directional.positions;else if(d.shaderID.endsWith("outline"))E.outlineColor.value=d.outlineColor,E.outlineWidth.value=d.outlineWidth,E.outlinePushback.value=d.outlinePushback,E.outlineMaxPixels.value=d.outlineMaxPixels*this.devicePixelRatio;else if(d.shaderID==="volumetric"){r._modelViewMatrix.getScale(this._direction),this._worldInverse.getInverse(r._modelViewMatrix),this._projInverse.getInverse(a.projectionMatrix),this._textureMatrix.multiplyMatrices(r.material.texmatrix,this._worldInverse),this._gl.uniformMatrix4fv(y.textmat,!1,this._textureMatrix.elements),this._gl.uniformMatrix4fv(y.projinv,!1,this._projInverse.elements);let w=Math.min(Math.min(this._direction.x,this._direction.y),this._direction.z);E.step.value=r.material.unit*w,E.maxdepth.value=r.material.maxdepth*w,E.transfermax.value=r.material.transfermax,E.transfermin.value=r.material.transfermin,E.subsamples.value=r.material.subsamples,o.setTexture(r.material.transferfn,4,!1),o.setTexture(r.material.map,3,!0),this._gl.activeTexture(this._gl.TEXTURE5),this._gl.bindTexture(this._gl.TEXTURE_2D,this._depthTexture)}E.opacity.value=d.opacity,this.loadMaterialUniforms(y,E)}return E.shading&&(E.shading.value==3?(this._gl.activeTexture(this._gl.TEXTURE0+this.SHADE_TEXTURE),this._gl.bindTexture(this._gl.TEXTURE_2D,this._shadingTexture)):console.error("Invalid shading textures.")),h}loadMaterialUniforms(a,u){var f,d,r,o;for(f in u)a[f]&&(d=u[f].type,r=u[f].value,o=a[f],d==="f"?this._gl.uniform1f(o,r):d==="i"?this._gl.uniform1i(o,r):d==="fv"?this._gl.uniform3fv(o,r):d==="c"?this._gl.uniform3f(o,r.r,r.g,r.b):d==="f4"&&this._gl.uniform4f(o,r[0],r[1],r[2],r[3]))}addObject(a,u){var f,d,r,o;if(!a.__webglInit&&(a.__webglInit=!0,a._modelViewMatrix=new S.Matrix4,a._normalMatrix=new S.Matrix3,a.geometry!==void 0&&a.geometry.__webglInit===void 0&&(a.geometry.__webglInit=!0,a.geometry.addEventListener("dispose",this.onGeometryDispose.bind(this))),a instanceof m.Mesh||a instanceof m.Line))for(r=a.geometry,f=0,d=r.geometryGroups.length;f<d;f++)o=r.geometryGroups[f],o.id=this._geometryGroupCounter++,o.__webglVertexBuffer||(a instanceof m.Mesh?(this.createMeshBuffers(o),r.elementsNeedUpdate=!0,r.normalsNeedUpdate=!0):a instanceof m.Line&&this.createLineBuffers(o),r.verticesNeedUpdate=!0,r.colorsNeedUpdate=!0);if(!a.__webglActive){if(a instanceof m.Mesh||a instanceof m.Line)for(r=a.geometry,f=0,d=r.geometryGroups.length;f<d;f++)o=r.geometryGroups[f],this.addBuffer(u.__webglObjects,o,a);else a instanceof m.Sprite&&u.__webglSprites.push(a);a.__webglActive=!0}}updateObject(a){var u=a.geometry,f;if(a instanceof m.Mesh||a instanceof m.Line){for(var d=0,r=u.geometryGroups.length;d<r;d++)f=u.geometryGroups[d],(u.verticesNeedUpdate||u.elementsNeedUpdate||u.colorsNeedUpdate||u.normalsNeedUpdate)&&this.setBuffers(f,this._gl.STATIC_DRAW);u.verticesNeedUpdate=!1,u.elementsNeedUpdate=!1,u.normalsNeedUpdate=!1,u.colorsNeedUpdate=!1,u.buffersNeedUpdate=!1}}removeObject(a,u){a instanceof m.Mesh||a instanceof m.Line?this.removeInstances(u.__webglObjects,a):a instanceof m.Sprite&&this.removeInstancesDirect(u.__webglSprites,a),a.__webglActive=!1}removeInstances(a,u){for(var f=a.length-1;f>=0;--f)a[f].object===u&&a.splice(f,1)}removeInstancesDirect(a,u){for(var f=a.length-1;f>=0;--f)a[f]===u&&a.splice(f,1)}unrollBufferMaterial(a){var u=a.object,f=u.material;if(f.volumetric)a.opaque=null,a.transparent=null,a.volumetric=f;else if(f.transparent){if(a.opaque=null,a.volumetric=null,a.transparent=f,!f.wireframe){let d=f.clone();d.opacity=0,a.transparentDepth=d}}else{if(a.opaque=f,a.transparent=null,a.volumetric=null,!f.wireframe){let d=f.clone();d.opacity=0,a.opaqueDepth=d}f.hasAO&&(a.hasAO=!0),(this._AOEnabled||a.hasAO)&&(a.opaqueShaded=f.clone(),a.opaqueShaded.shaded=!0)}}setBuffers(a,u){var f=a.vertexArray,d=a.colorArray;if(a.__webglOffsetBuffer!==void 0?(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,a.__webglOffsetBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,f,u)):(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,a.__webglVertexBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,f,u)),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,a.__webglColorBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,d,u),a.normalArray&&a.__webglNormalBuffer!==void 0){var r=a.normalArray;this._gl.bindBuffer(this._gl.ARRAY_BUFFER,a.__webglNormalBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,r,u)}if(a.radiusArray&&a.__webglRadiusBuffer!==void 0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,a.__webglRadiusBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,a.radiusArray,u)),a.faceArray&&a.__webglFaceBuffer!==void 0){var o=a.faceArray;this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,a.__webglFaceBuffer),this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,o,u)}if(a.lineArray&&a.__webglLineBuffer!==void 0){var v=a.lineArray;this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,a.__webglLineBuffer),this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,v,u)}}createMeshBuffers(a){a.radiusArray&&(a.__webglRadiusBuffer=this._gl.createBuffer()),a.useOffset&&(a.__webglOffsetBuffer=this._gl.createBuffer()),a.__webglVertexBuffer=this._gl.createBuffer(),a.__webglNormalBuffer=this._gl.createBuffer(),a.__webglColorBuffer=this._gl.createBuffer(),a.__webglFaceBuffer=this._gl.createBuffer(),a.__webglLineBuffer=this._gl.createBuffer(),this.info.memory.geometries++}createLineBuffers(a){a.__webglVertexBuffer=this._gl.createBuffer(),a.__webglColorBuffer=this._gl.createBuffer(),this.info.memory.geometries++}addBuffer(a,u,f){a.push({buffer:u,object:f,opaque:null,transparent:null})}setupMatrices(a,u){a._modelViewMatrix.multiplyMatrices(u.matrixWorldInverse,a.matrixWorld),a._normalMatrix.getInverse(a._modelViewMatrix),a._normalMatrix.transpose()}filterFallback(a){return this._gl.LINEAR}setTextureParameters(a,u){a==this._gl.TEXTURE_2D?(this._gl.texParameteri(a,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(a,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(a,this._gl.TEXTURE_MAG_FILTER,this.filterFallback(u.magFilter)),this._gl.texParameteri(a,this._gl.TEXTURE_MIN_FILTER,this.filterFallback(u.minFilter))):(this._gl.texParameteri(a,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(a,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(a,this._gl.TEXTURE_WRAP_R,this._gl.CLAMP_TO_EDGE),this._extColorBufferFloat&&this._extFloatLinear?(this._gl.texParameteri(a,this._gl.TEXTURE_MAG_FILTER,this._gl.LINEAR),this._gl.texParameteri(a,this._gl.TEXTURE_MIN_FILTER,this._gl.LINEAR)):(this._gl.texParameteri(a,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(a,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST)))}paramToGL(a){return a===L.UnsignedByteType?this._gl.UNSIGNED_BYTE:a===L.RGBAFormat?this._gl.RGBA:a===L.NearestFilter?this._gl.NEAREST:0}setupLights(a,u){var f,d,r,o=0,v=0,h=0,y,E,w=this._lights,W=w.directional.colors,P=w.directional.positions,j=0,V=0;for(f=0,d=u.length;f<d;f++)if(r=u[f],y=r.color,E=r.intensity,r instanceof B.Light){if(this._direction.getPositionFromMatrix(r.matrixWorld),this._vector3.getPositionFromMatrix(r.target.matrixWorld),this._direction.sub(this._vector3),this._direction.normalize(),this._direction.x===0&&this._direction.y===0&&this._direction.z===0)continue;P[V]=this._direction.x,P[V+1]=this._direction.y,P[V+2]=this._direction.z,W[V]=y.r*E,W[V+1]=y.g*E,W[V+2]=y.b*E,V+=3,j++}w.ambient[0]=o,w.ambient[1]=v,w.ambient[2]=h,w.directional.length=j}initGL(){try{if(OffscreenCanvas&&!(this.rows!=null&&this.cols!=null&&this.row!=null&&this.col!=null))(A==null||A.isContextLost())&&(p=new OffscreenCanvas(this._canvas.width,this._canvas.height),A=p.getContext("webgl2",{alpha:!0,premultipliedAlpha:this._premultipliedAlpha,antialias:this._antialias,preserveDrawingBuffer:this._preserveDrawingBuffer})),this._offscreen=p,this._gl=A,this._bitmap=this._canvas.getContext("bitmaprenderer",{alpha:!0});else if(!(this._gl=this._canvas.getContext("webgl2",{alpha:this._alpha,premultipliedAlpha:this._premultipliedAlpha,antialias:this._antialias,preserveDrawingBuffer:this._preserveDrawingBuffer}))&&!(this._gl=this._canvas.getContext("experimental-webgl",{alpha:this._alpha,premultipliedAlpha:this._premultipliedAlpha,antialias:this._antialias,preserveDrawingBuffer:this._preserveDrawingBuffer}))&&!(this._gl=this._canvas.getContext("webgl",{alpha:this._alpha,premultipliedAlpha:this._premultipliedAlpha,antialias:this._antialias,preserveDrawingBuffer:this._preserveDrawingBuffer})))throw"Error creating WebGL context.";var a=this._gl.getParameter(this._gl.VERSION);this._webglversion=parseInt(a[6])}catch(u){console.error(u)}}isWebGL1(){return this._webglversion==1}setDefaultGLState(){this._gl.clearDepth(1),this._gl.clearStencil(0),this._gl.enable(this._gl.DEPTH_TEST),this._gl.depthFunc(this._gl.LEQUAL),this._gl.frontFace(this._gl.CCW),this._gl.cullFace(this._gl.BACK),this._gl.enable(this._gl.CULL_FACE),this._gl.enable(this._gl.BLEND),this._gl.blendEquation(this._gl.FUNC_ADD),this._gl.blendFunc(this._gl.SRC_ALPHA,this._gl.ONE_MINUS_SRC_ALPHA),this._gl.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearAlpha)}renderObjects(a,u,f,d,r,o,v){var h,y,E,w,W,P,j;u?(W=a.length-1,P=-1,j=-1):(W=0,P=a.length,j=1);for(var V=W;V!==P;V+=j)if(h=a[V],h.render){if(y=h.object,E=h.buffer,w=h[f],(h.hasAO||this._AOEnabled)&&h[f+"Shaded"]&&(w=h[f+"Shaded"]),!w)continue;this.setBlending(v),this.setDepthTest(w.depthTest),this.setDepthWrite(w.depthWrite),this.setPolygonOffset(w.polygonOffset,w.polygonOffsetFactor,w.polygonOffsetUnits);var G=y._modelViewMatrix.isReflected();if(this.setMaterialFaces(w,G),this.renderBuffer(d,r,o,w,E,y),(this._outlineEnabled||w.outline)&&!w.wireframe&&w.shaderID!=="basic"&&w.opacity!==0){let F=this._outlineMaterial;w.shaderID=="sphereimposter"?F=this._outlineSphereImposterMaterial:w.shaderID=="stickimposter"&&(F=this._outlineStickImposterMaterial),this.renderBuffer(d,r,o,F,E,y)}}}renderSprites(a,u,f){this._currentGeometryGroupHash=-1,this._currentProgram=null,this._currentCamera=null,this._oldDepthWrite=-1,this._oldDepthTest=-1,this._oldDoubleSided=-1,this._currentMaterialId=-1,this._oldFlipSided=-1,this._lightsNeedUpdate=!0,this.sprites.render(a,u,this._currentWidth,this._currentHeight,f),this._currentGeometryGroupHash=-1,this._currentProgram=null,this._currentCamera=null,this._oldDepthWrite=-1,this._oldDepthTest=-1,this._oldDoubleSided=-1,this._currentMaterialId=-1,this._oldFlipSided=-1}}},"./src/WebGL/SpritePlugin.ts":(k,R,g)=>{g.r(R),g.d(R,{SpritePlugin:()=>z});var M=g("./src/WebGL/shaders/index.ts");class z{constructor(){this.sprite={vertices:null,faces:null,vertexBuffer:null,elementBuffer:null,program:null,attributes:{},uniforms:null}}init(x){this.gl=x.context,this.renderer=x,this.precision=x.getPrecision(),this.sprite.vertices=new Float32Array(16),this.sprite.faces=new Uint16Array(6);var b=0;this.sprite.vertices[b++]=-1,this.sprite.vertices[b++]=-1,this.sprite.vertices[b++]=0,this.sprite.vertices[b++]=0,this.sprite.vertices[b++]=1,this.sprite.vertices[b++]=-1,this.sprite.vertices[b++]=1,this.sprite.vertices[b++]=0,this.sprite.vertices[b++]=1,this.sprite.vertices[b++]=1,this.sprite.vertices[b++]=1,this.sprite.vertices[b++]=1,this.sprite.vertices[b++]=-1,this.sprite.vertices[b++]=1,this.sprite.vertices[b++]=0,this.sprite.vertices[b++]=1,b=0,this.sprite.faces[b++]=0,this.sprite.faces[b++]=1,this.sprite.faces[b++]=2,this.sprite.faces[b++]=0,this.sprite.faces[b++]=2,this.sprite.faces[b++]=3,this.sprite.vertexBuffer=this.gl.createBuffer(),this.sprite.elementBuffer=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.sprite.vertexBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.sprite.vertices,this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.sprite.elementBuffer),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,this.sprite.faces,this.gl.STATIC_DRAW),this.sprite.program=this.createProgram(M.ShaderLib.sprite,this.precision||1),this.sprite.attributes={};const S={};this.sprite.attributes.position=this.gl.getAttribLocation(this.sprite.program,"position"),this.sprite.attributes.uv=this.gl.getAttribLocation(this.sprite.program,"uv"),S.uvOffset=this.gl.getUniformLocation(this.sprite.program,"uvOffset"),S.uvScale=this.gl.getUniformLocation(this.sprite.program,"uvScale"),S.rotation=this.gl.getUniformLocation(this.sprite.program,"rotation"),S.scale=this.gl.getUniformLocation(this.sprite.program,"scale"),S.alignment=this.gl.getUniformLocation(this.sprite.program,"alignment"),S.color=this.gl.getUniformLocation(this.sprite.program,"color"),S.map=this.gl.getUniformLocation(this.sprite.program,"map"),S.opacity=this.gl.getUniformLocation(this.sprite.program,"opacity"),S.useScreenCoordinates=this.gl.getUniformLocation(this.sprite.program,"useScreenCoordinates"),S.screenPosition=this.gl.getUniformLocation(this.sprite.program,"screenPosition"),S.modelViewMatrix=this.gl.getUniformLocation(this.sprite.program,"modelViewMatrix"),S.projectionMatrix=this.gl.getUniformLocation(this.sprite.program,"projectionMatrix"),S.fogType=this.gl.getUniformLocation(this.sprite.program,"fogType"),S.fogDensity=this.gl.getUniformLocation(this.sprite.program,"fogDensity"),S.fogNear=this.gl.getUniformLocation(this.sprite.program,"fogNear"),S.fogFar=this.gl.getUniformLocation(this.sprite.program,"fogFar"),S.fogColor=this.gl.getUniformLocation(this.sprite.program,"fogColor"),S.alphaTest=this.gl.getUniformLocation(this.sprite.program,"alphaTest"),this.sprite.uniforms=S}render(x,b,S,m,T){var D,p,A,l,n,a,u,f,d,r;if(!this.gl)throw new Error("WebGLRenderer not initialized");let o=[];(D=x==null?void 0:x.__webglSprites)===null||D===void 0||D.forEach(ne=>{(T&&ne.material.depthTest==!1||!T&&ne.material.depthTest)&&o.push(ne)});let v=o.length;if(!v)return;const h=this.sprite.attributes,y=this.sprite.uniforms;if(!y)throw new Error("Uniforms not defined");var E=S*.5,w=m*.5;this.gl.useProgram(this.sprite.program),this.gl.enableVertexAttribArray(h.position),this.gl.enableVertexAttribArray(h.uv),this.gl.disable(this.gl.CULL_FACE),this.gl.enable(this.gl.BLEND),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.sprite.vertexBuffer),this.gl.vertexAttribPointer(h.position,2,this.gl.FLOAT,!1,16,0),this.gl.vertexAttribPointer(h.uv,2,this.gl.FLOAT,!1,16,8),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.sprite.elementBuffer),this.gl.uniformMatrix4fv(y.projectionMatrix,!1,b.projectionMatrix.elements),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.uniform1i(y.map,0);var W=0,P=0,j=x.fog;j?(this.gl.uniform3f(y.fogColor,j.color.r,j.color.g,j.color.b),this.gl.uniform1f(y.fogNear,j.near),this.gl.uniform1f(y.fogFar,j.far),this.gl.uniform1i(y.fogType,1),W=1,P=1):(this.gl.uniform1i(y.fogType,0),W=0,P=0);var V;let G,F,H,K,U=[];for(V=0;V<v;V++)G=o[V],F=G.material,F&&(F.depthTest==!1&&!T||!G.visible||F.opacity===0||(F.useScreenCoordinates?G.z=-G.position.z:(G._modelViewMatrix.multiplyMatrices(b.matrixWorldInverse,G.matrixWorld),G.z=-G._modelViewMatrix.elements[14])));for(o.sort(L),V=0;V<v;V++)if(G=o[V],F=G.material,!!F&&!(!G.visible||F.opacity===0)&&F.map&&F.map.image&&F.map.image.width){this.gl.uniform1f((y==null?void 0:y.alphaTest)||null,F.alphaTest);var N=F.map.image.width,Y=F.map.image.height;U[0]=N*this.renderer.devicePixelRatio/S,U[1]=Y*this.renderer.devicePixelRatio/m,F.useScreenCoordinates===!0?(this.gl.uniform1i(y.useScreenCoordinates,1),this.gl.uniform3f(y.screenPosition,(G.position.x*this.renderer.devicePixelRatio-E)/E,(w-G.position.y*this.renderer.devicePixelRatio)/w,Math.max(0,Math.min(1,G.position.z)))):(this.gl.uniform1i(y.useScreenCoordinates,0),this.gl.uniformMatrix4fv(y.modelViewMatrix,!1,G._modelViewMatrix.elements)),x.fog&&F.fog?K=P:K=0,W!==K&&(this.gl.uniform1i(y.fogType,K),W=K),H=1/(F.scaleByViewport?m:1),U[0]*=H*G.scale.x,U[1]*=H*G.scale.y;let ne=(p=F==null?void 0:F.alignment)===null||p===void 0?void 0:p.x,ae=(A=F==null?void 0:F.alignment)===null||A===void 0?void 0:A.y;F.screenOffset&&(ne=(ne||0)+2*F.screenOffset.x/N,ae=(ae||0)+2*F.screenOffset.y/Y),this.gl.uniform2f(y.uvScale,((l=F==null?void 0:F.uvScale)===null||l===void 0?void 0:l.x)||1,((n=F==null?void 0:F.uvScale)===null||n===void 0?void 0:n.y)||1),this.gl.uniform2f(y.uvOffset,((a=F==null?void 0:F.uvOffset)===null||a===void 0?void 0:a.x)||0,((u=F==null?void 0:F.uvOffset)===null||u===void 0?void 0:u.y)||0),this.gl.uniform2f(y.alignment,ne||0,ae||0),this.gl.uniform1f(y.opacity,F.opacity),this.gl.uniform3f(y.color,((f=F==null?void 0:F.color)===null||f===void 0?void 0:f.r)||0,((d=F==null?void 0:F.color)===null||d===void 0?void 0:d.g)||0,((r=F==null?void 0:F.color)===null||r===void 0?void 0:r.b)||0),this.gl.uniform1f(y.rotation,G.rotation),this.gl.uniform2fv(y.scale,U),this.renderer.setDepthTest(F.depthTest),this.renderer.setDepthWrite(F.depthWrite),this.renderer.setTexture(F.map,0),this.gl.drawElements(this.gl.TRIANGLES,6,this.gl.UNSIGNED_SHORT,0)}this.gl.enable(this.gl.CULL_FACE)}createProgram(x,b){if(!this.gl)throw new Error("WebGL Rendering context not found");var S=this.gl.createProgram();if(!S)throw new Error("Error creating webgl program");var m=this.gl.createShader(this.gl.FRAGMENT_SHADER),T=this.gl.createShader(this.gl.VERTEX_SHADER);if(!m)throw new Error("Unable to create fragment shader SpritePlugin.createProgram");if(!T)throw new Error("Unable to create vertex shader SpritePlugin.createProgram");var D="precision "+b+` float;
`;if(this.gl.shaderSource(m,D+x.fragmentShader),this.gl.shaderSource(T,D+x.vertexShader),this.gl.compileShader(m),this.gl.compileShader(T),!this.gl.getShaderParameter(m,this.gl.COMPILE_STATUS)||!this.gl.getShaderParameter(T,this.gl.COMPILE_STATUS))throw new Error(`Error compiling shader: 
      ${this.gl.getShaderInfoLog(m)} 
      ${this.gl.getShaderInfoLog(T)}`);return this.gl.attachShader(S,m),this.gl.attachShader(S,T),this.gl.linkProgram(S),this.gl.getProgramParameter(S,this.gl.LINK_STATUS)||console.error("Could not initialize shader"),S}}function L(B,x){return B.z!==x.z?x.z-B.z:x.id-B.id}},"./src/WebGL/constants/Coloring.ts":(k,R,g)=>{g.r(R),g.d(R,{Coloring:()=>M});var M;(function(z){z[z.NoColors=0]="NoColors",z[z.FaceColors=1]="FaceColors",z[z.VertexColors=2]="VertexColors"})(M||(M={}))},"./src/WebGL/constants/Shading.ts":(k,R,g)=>{g.r(R),g.d(R,{Shading:()=>M});var M;(function(z){z[z.NoShading=0]="NoShading",z[z.FlatShading=1]="FlatShading",z[z.SmoothShading=2]="SmoothShading"})(M||(M={}))},"./src/WebGL/constants/Sides.ts":(k,R,g)=>{g.r(R),g.d(R,{BackSide:()=>z,DoubleSide:()=>L,FrontSide:()=>M});const M=0,z=1,L=2},"./src/WebGL/constants/SpriteAlignment.ts":(k,R,g)=>{g.r(R),g.d(R,{SpriteAlignment:()=>z});var M=g("./src/WebGL/math/index.ts");const z={topLeft:new M.Vector2(1,-1),topCenter:new M.Vector2(0,-1),topRight:new M.Vector2(-1,-1),centerLeft:new M.Vector2(1,0),center:new M.Vector2(0,0),centerRight:new M.Vector2(-1,0),bottomLeft:new M.Vector2(1,1),bottomCenter:new M.Vector2(0,1),bottomRight:new M.Vector2(-1,1)}},"./src/WebGL/constants/TextureConstants.ts":(k,R,g)=>{g.r(R),g.d(R,{ClampToEdgeWrapping:()=>M,FloatType:()=>b,LinearFilter:()=>z,LinearMipMapLinearFilter:()=>B,NearestFilter:()=>L,R32Format:()=>T,RFormat:()=>m,RGBAFormat:()=>S,UnsignedByteType:()=>x});const M=1001,z=1006,L=1007,B=1008,x=1009,b=1010,S=1021,m=1022,T=1023},"./src/WebGL/constants/TextureOperations.ts":(k,R,g)=>{g.r(R),g.d(R,{TextureOperations:()=>M});var M;(function(z){z[z.MultiplyOperation=0]="MultiplyOperation",z[z.MixOperation=1]="MixOperation",z[z.AddOperation=2]="AddOperation"})(M||(M={}))},"./src/WebGL/constants/index.ts":(k,R,g)=>{g.r(R),g.d(R,{BackSide:()=>z.BackSide,ClampToEdgeWrapping:()=>x.ClampToEdgeWrapping,Coloring:()=>M.Coloring,DoubleSide:()=>z.DoubleSide,FloatType:()=>x.FloatType,FrontSide:()=>z.FrontSide,LinearFilter:()=>x.LinearFilter,LinearMipMapLinearFilter:()=>x.LinearMipMapLinearFilter,NearestFilter:()=>x.NearestFilter,R32Format:()=>x.R32Format,RFormat:()=>x.RFormat,RGBAFormat:()=>x.RGBAFormat,Shading:()=>L.Shading,SpriteAlignment:()=>B.SpriteAlignment,TextureOperations:()=>b.TextureOperations,UnsignedByteType:()=>x.UnsignedByteType});var M=g("./src/WebGL/constants/Coloring.ts"),z=g("./src/WebGL/constants/Sides.ts"),L=g("./src/WebGL/constants/Shading.ts"),B=g("./src/WebGL/constants/SpriteAlignment.ts"),x=g("./src/WebGL/constants/TextureConstants.ts"),b=g("./src/WebGL/constants/TextureOperations.ts")},"./src/WebGL/core/EventDispatcher.ts":(k,R,g)=>{g.r(R),g.d(R,{EventDispatcher:()=>M});class M{constructor(){this.listeners={}}dispatchEvent(L){var B=this.listeners[L.type];if(B!==void 0){L.target=this;for(var x=0,b=B.length;x<b;x++)B[x].call(this,L)}}removeEventListener(L,B){if(!B)this.listeners[L]=[];else{var x=this.listeners[L].indexOf(B);x!==-1&&this.listeners[L].splice(x,1)}}addEventListener(L,B){this.listeners[L]===void 0&&(this.listeners[L]=[]),this.listeners[L].indexOf(B)===-1&&this.listeners[L].push(B)}}},"./src/WebGL/core/Geometry.ts":(k,R,g)=>{g.r(R),g.d(R,{Geometry:()=>S,GeometryGroup:()=>b,GeometryIDCount:()=>m});var M=g("./src/WebGL/materials/LineBasicMaterial.ts"),z=g("./src/WebGL/core/EventDispatcher.ts"),L=g("./src/WebGL/math/index.ts"),B=g("./src/colors.ts");const x=65535;class b{constructor(D=0){this.vertexArray=null,this.colorArray=null,this.normalArray=null,this.radiusArray=null,this.faceArray=null,this.lineArray=null,this.atomArray=Array(),this.vertices=0,this.faceidx=0,this.lineidx=0,this.__inittedArrays=!1,this.id=D}setColor(D){var p=this.vertexArray,A=this.colorArray;if(!p)throw new Error("vertex array not initialized");if(!A)throw new Error("color array not initialized");let l=B.CC.color(D);for(var n=0;n<p.length;n+=3)A[n]=l.r,A[n+1]=l.g,A[n+2]=l.b}setColors(D){var p=this.vertexArray,A=this.colorArray;if(!p)throw new Error("vertex array not initialized");if(!A)throw new Error("color array not initialized");if(p.length!=A.length){console.log("Cannot re-color geometry group due to mismatched lengths.");return}for(var l=0;l<p.length;l+=3){var n=D(p[l],p[l+1],p[l+2]);n instanceof B.Color||(n=B.CC.color(n)),A[l]=n.r,A[l+1]=n.g,A[l+2]=n.b}}getNumVertices(){return this.vertices}getVertices(){return this.vertexArray}getCentroid(){if(!this.vertexArray)throw new Error("vertex array not initialized");for(var D=new L.Vector3,p,A,l,n,a=0;a<this.vertices;++a)p=a*3,A=this.vertexArray[p],l=this.vertexArray[p+1],n=this.vertexArray[p+2],D.x+=A,D.y+=l,D.z+=n;return D.divideScalar(this.vertices),D}setNormals(){var D=this.faceArray,p=this.vertexArray,A=this.normalArray;if(!(!this.vertices||!this.faceidx)){if(!D)throw new Error("face array not initialized");if(!p)throw new Error("vertex array not initialized");if(!A)throw new Error("normal array not initialized");for(var l,n,a,u,f,d,r,o=0;o<D.length/3;++o)l=D[o*3]*3,n=D[o*3+1]*3,a=D[o*3+2]*3,u=new L.Vector3(p[l],p[l+1],p[l+2]),f=new L.Vector3(p[n],p[n+1],p[n+2]),d=new L.Vector3(p[a],p[a+1],p[a+2]),u.subVectors(u,f),d.subVectors(d,f),d.cross(u),r=d,r.normalize(),A[l]+=r.x,A[n]+=r.x,A[a]+=r.x,A[l+1]+=r.y,A[n+1]+=r.y,A[a+1]+=r.y,A[l+2]+=r.z,A[n+2]+=r.z,A[a+2]+=r.z}}setLineIndices(){if(this.faceidx&&!(this.lineArray&&this.lineArray.length==this.faceidx*2&&this.lineidx==this.faceidx*2)){var D=this.faceArray,p=this.lineArray=new Uint16Array(this.faceidx*2);if(this.lineidx=this.faceidx*2,!D)throw new Error("face array not initialized");for(var A=0;A<this.faceidx/3;++A){var l=A*3,n=l*2,a=D[l],u=D[l+1],f=D[l+2];p[n]=a,p[n+1]=u,p[n+2]=a,p[n+3]=f,p[n+4]=u,p[n+5]=f}}}vrml(D,p){var A,l,n,a,u,f,d,r,o,v,h,y,E,w,W,P,j,V,G="";if(G+=D+`Shape {
`+D+` appearance Appearance {
`+D+`  material Material {
`+D+"   diffuseColor "+((A=p==null?void 0:p.color)===null||A===void 0?void 0:A.r)+" "+((l=p==null?void 0:p.color)===null||l===void 0?void 0:l.g)+" "+((n=p==null?void 0:p.color)===null||n===void 0?void 0:n.b)+`
`,p.wireframe&&this.colorArray){let H=this.colorArray;G+=D+"    emissiveColor "+H[0]+" "+H[1]+" "+H[2]+`
`}p!=null&&p.transparent&&(G+=D+"   transparency "+(1-p.opacity)+`
`),G+=D+`  }
`,G+=D+` }
`;var F=D;if(D+=" ",p instanceof M.LineBasicMaterial||p.wireframe){G+=D+`geometry IndexedLineSet {
`+D+` colorPerVertex TRUE
`+D+` coord Coordinate {
`+D+`  point [
`;let H,K,U;for(let N=0;N<this.vertices;++N){let Y=N*3;H=(a=this.vertexArray)===null||a===void 0?void 0:a[Y],K=(u=this.vertexArray)===null||u===void 0?void 0:u[Y+1],U=(f=this.vertexArray)===null||f===void 0?void 0:f[Y+2],G+=D+"   "+H+" "+K+" "+U+`,
`}if(G+=D+`  ]
`,G+=D+` }
`,this.colorArray&&!p.wireframe){G+=D+` color Color {
`+D+`  color [
`;for(let N=0;N<this.vertices;++N){let Y=N*3;H=this.colorArray[Y],K=this.colorArray[Y+1],U=this.colorArray[Y+2],G+=D+"   "+H+" "+K+" "+U+`,
`}G+=D+`  ]
`,G+=D+` }
`}if(G+=D+` coordIndex [
`,p.wireframe&&this.faceArray)for(let N=0;N<this.faceidx;N+=3)H=(d=this.faceArray)===null||d===void 0?void 0:d[N],K=(r=this.faceArray)===null||r===void 0?void 0:r[N+1],U=(o=this.faceArray)===null||o===void 0?void 0:o[N+2],G+=D+"  "+H+", "+K+", "+U+`, -1,
`;else for(let N=0;N<this.vertices-1;N+=2)G+=D+"  "+N+", "+(N+1)+`, -1,
`;G+=D+` ]
`,G+=D+`}
`}else{G+=D+`geometry IndexedFaceSet {
`+D+` colorPerVertex TRUE
`+D+` normalPerVertex TRUE
`+D+` solid FALSE
`,G+=D+` coord Coordinate {
`+D+`  point [
`;let H,K,U;for(let N=0;N<this.vertices;++N){let Y=N*3;H=(v=this.vertexArray)===null||v===void 0?void 0:v[Y],K=(h=this.vertexArray)===null||h===void 0?void 0:h[Y+1],U=(y=this.vertexArray)===null||y===void 0?void 0:y[Y+2],G+=D+"   "+H+" "+K+" "+U+`,
`}G+=D+`  ]
`,G+=D+` }
`,G+=D+` normal Normal {
`+D+`  vector [
`;for(let N=0;N<this.vertices;++N){let Y=N*3;H=(E=this.normalArray)===null||E===void 0?void 0:E[Y],K=(w=this.normalArray)===null||w===void 0?void 0:w[Y+1],U=(W=this.normalArray)===null||W===void 0?void 0:W[Y+2],G+=D+"   "+H+" "+K+" "+U+`,
`}if(G+=D+`  ]
`,G+=D+` }
`,this.colorArray){G+=D+` color Color {
`+D+`  color [
`;for(let N=0;N<this.vertices;++N){let Y=N*3;H=this.colorArray[Y],K=this.colorArray[Y+1],U=this.colorArray[Y+2],G+=D+"   "+H+" "+K+" "+U+`,
`}G+=D+`  ]
`,G+=D+` }
`}G+=D+` coordIndex [
`;for(let N=0;N<this.faceidx;N+=3)H=(P=this.faceArray)===null||P===void 0?void 0:P[N],K=(j=this.faceArray)===null||j===void 0?void 0:j[N+1],U=(V=this.faceArray)===null||V===void 0?void 0:V[N+2],G+=D+"  "+H+", "+K+", "+U+`, -1,
`;G+=D+` ]
`,G+=D+`}
`}return G+=F+"}",G}truncateArrayBuffers(D=!0,p=!1){var A=this.vertexArray,l=this.colorArray,n=this.normalArray,a=this.faceArray,u=this.lineArray,f=this.radiusArray;this.vertexArray=(A==null?void 0:A.subarray(0,this.vertices*3))||null,this.colorArray=(l==null?void 0:l.subarray(0,this.vertices*3))||null,D?(this.normalArray=(n==null?void 0:n.subarray(0,this.vertices*3))||null,this.faceArray=(a==null?void 0:a.subarray(0,this.faceidx))||null,this.lineidx>0?this.lineArray=(u==null?void 0:u.subarray(0,this.lineidx))||null:this.lineArray=new Uint16Array(0)):(this.normalArray=new Float32Array(0),this.faceArray=new Uint16Array(0),this.lineArray=new Uint16Array(0)),f&&(this.radiusArray=f.subarray(0,this.vertices)),p&&(this.normalArray&&(this.normalArray=new Float32Array(this.normalArray)),this.faceArray&&(this.faceArray=new Uint16Array(this.faceArray)),this.lineArray&&(this.lineArray=new Uint16Array(this.lineArray)),this.vertexArray&&(this.vertexArray=new Float32Array(this.vertexArray)),this.colorArray&&(this.colorArray=new Float32Array(this.colorArray)),this.radiusArray&&(this.radiusArray=new Float32Array(this.radiusArray))),this.__inittedArrays=!0}}class S extends z.EventDispatcher{constructor(D=!1,p=!1,A=!1){super(),this.name="",this.hasTangents=!1,this.dynamic=!0,this.verticesNeedUpdate=!1,this.elementsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.buffersNeedUpdate=!1,this.imposter=!1,this.instanced=!1,this.geometryGroups=[],this.groups=0,this.id=m++,this.mesh=D,this.radii=p,this.offset=A}updateGeoGroup(D=0){var p,A=this.groups>0?this.geometryGroups[this.groups-1]:null;return(!A||A.vertices+D>(((p=A==null?void 0:A.vertexArray)===null||p===void 0?void 0:p.length)||0)/3)&&(A=this.addGeoGroup()),A}vrml(D,p){for(var A="",l=this.geometryGroups.length,n=0;n<l;n++){var a=this.geometryGroups[n];A+=a.vrml(D,p)+`,
`}return A}addGeoGroup(){var D=new b(this.geometryGroups.length);return this.geometryGroups.push(D),this.groups=this.geometryGroups.length,D.vertexArray=new Float32Array(x*3),D.colorArray=new Float32Array(x*3),this.mesh&&(D.normalArray=new Float32Array(x*3),D.faceArray=new Uint16Array(x*6),D.lineArray=new Uint16Array(x*6)),this.radii&&(D.radiusArray=new Float32Array(x)),D.useOffset=this.offset,D}setUpNormals(...D){for(var p=0;p<this.groups;p++){var A=this.geometryGroups[p];A.setNormals(...D)}}setColors(...D){for(var p=this.geometryGroups.length,A=0;A<p;A++){var l=this.geometryGroups[A];l.setColors(...D)}}setColor(...D){for(var p=this.geometryGroups.length,A=0;A<p;A++){var l=this.geometryGroups[A];l.setColor(...D)}}setUpWireframe(...D){for(var p=0;p<this.groups;p++){var A=this.geometryGroups[p];A.setLineIndices(...D)}}initTypedArrays(){for(var D=0;D<this.groups;D++){var p=this.geometryGroups[D];p.__inittedArrays!==!0&&p.truncateArrayBuffers(this.mesh,!1)}}dispose(){this.dispatchEvent({type:"dispose"})}get vertices(){for(var D=0,p=0;p<this.groups;p++)D+=this.geometryGroups[p].vertices;return D}}let m=0},"./src/WebGL/core/Object3D.ts":(k,R,g)=>{g.r(R),g.d(R,{Light:()=>b,Object3D:()=>B,Object3DIDCount:()=>L,Scene:()=>x});var M=g("./src/WebGL/math/index.ts"),z=g("./src/colors.ts");let L=0;class B{constructor(){this.id=L++,this.name="",this.children=[],this.position=new M.Vector3,this.rotation=new M.Vector3,this.matrix=new M.Matrix4,this.matrixWorld=new M.Matrix4,this.quaternion=new M.Quaternion,this.eulerOrder="XYZ",this.up=new M.Vector3(0,1,0),this.scale=new M.Vector3(1,1,1),this.matrixAutoUpdate=!0,this.matrixWorldNeedsUpdate=!0,this.rotationAutoUpdate=!0,this.useQuaternion=!1,this.visible=!0}lookAt(m){this.matrix.lookAt(m,this.position,this.up),this.rotationAutoUpdate&&(this.useQuaternion===!0?console.error("Unimplemented math operation."):this.rotation instanceof M.Vector3&&this.rotation.setEulerFromRotationMatrix(this.matrix,this.eulerOrder))}add(m){if(m===this){console.error("Can't add $3Dmol.Object3D to itself");return}m.parent=this,this.children.push(m);for(var T=this;T.parent!==void 0;)T=T.parent;T!==void 0&&T instanceof x&&T.__addObject(m)}remove(m){var T=this.children.indexOf(m);if(T!==-1){m.parent=void 0,this.children.splice(T,1);for(var D=this;D.parent!==void 0;)D=D.parent;D!==void 0&&D instanceof x&&D.__removeObject(m)}}vrml(m){m||(m=" ");var T=2*Math.atan2(this.quaternion.lengthxyz(),this.quaternion.w),D=0,p=0,A=0;if(T!=0){let a=Math.sin(T/2);D=this.quaternion.x/a,p=this.quaternion.y/a,A=this.quaternion.z/a}var l=m+`Transform {
`+m+" center "+this.position.x+" "+this.position.y+" "+this.position.z+`
`+m+" rotation "+D+" "+p+" "+A+" "+T+`
`+m+` children [
`;this.geometry&&(l+=this.geometry.vrml(m,this.material));for(var n=0;n<this.children.length;n++)l+=this.children[n].vrml(m+" ")+`,
`;return l+=` ]
`,l+="}",l}updateMatrix(){this.matrix.setPosition(this.position),this.useQuaternion===!1&&this.rotation instanceof M.Vector3?this.matrix.setRotationFromEuler(this.rotation,this.eulerOrder):this.matrix.setRotationFromQuaternion(this.quaternion),(this.scale.x!==1||this.scale.y!==1||this.scale.z!==1)&&this.matrix.scale(this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(m){this.matrixAutoUpdate===!0&&this.updateMatrix(),(this.matrixWorldNeedsUpdate===!0||m===!0)&&(this.parent===void 0?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1;for(var T=0;T<this.children.length;T++)this.children[T].updateMatrixWorld(!0)}clone(m){m===void 0&&(m=new B),m.name=this.name,m.up.copy(this.up),m.position.copy(this.position),m.rotation instanceof M.Vector3&&this.rotation instanceof M.Vector3?m.rotation.copy(this.rotation):m.rotation=this.rotation,m.eulerOrder=this.eulerOrder,m.scale.copy(this.scale),m.rotationAutoUpdate=this.rotationAutoUpdate,m.matrix.copy(this.matrix),m.matrixWorld.copy(this.matrixWorld),m.quaternion.copy(this.quaternion),m.matrixAutoUpdate=this.matrixAutoUpdate,m.matrixWorldNeedsUpdate=this.matrixWorldNeedsUpdate,m.useQuaternion=this.useQuaternion,m.visible=this.visible;for(var T=0;T<this.children.length;T++){var D=this.children[T];m.add(D.clone())}return m}setVisible(m){this.visible=m;for(var T=0;T<this.children.length;T++){var D=this.children[T];D.setVisible(m)}}}class x extends B{constructor(){super(...arguments),this.fog=null,this.overrideMaterial=null,this.matrixAutoUpdate=!1,this.__objects=[],this.__lights=[],this.__objectsAdded=[],this.__objectsRemoved=[]}__addObject(m){if(m instanceof b)this.__lights.indexOf(m)===-1&&this.__lights.push(m),m.target&&m.target.parent===void 0&&this.add(m.target);else if(this.__objects.indexOf(m)===-1){this.__objects.push(m),this.__objectsAdded.push(m);var T=this.__objectsRemoved.indexOf(m);T!==-1&&this.__objectsRemoved.splice(T,1)}for(var D=0;D<m.children.length;D++)this.__addObject(m.children[D])}__removeObject(m){var T;if(m instanceof b)T=this.__lights.indexOf(m),T!==-1&&this.__lights.splice(T,1);else if(T=this.__objects.indexOf(m),T!==-1){this.__objects.splice(T,1),this.__objectsRemoved.push(m);var D=this.__objectsAdded.indexOf(m);D!==-1&&this.__objectsAdded.splice(T,1)}for(var p=0;p<m.children.length;p++)this.__removeObject(m.children[p])}}class b extends B{constructor(m,T=1){super(),this.position=new M.Vector3(0,1,0),this.target=new B,this.castShadow=!1,this.onlyShadow=!1,this.color=new z.Color(m),this.intensity=T}}},"./src/WebGL/core/Projector.ts":(k,R,g)=>{g.r(R),g.d(R,{Projector:()=>L});var M=g("./src/WebGL/math/index.ts");const z=new M.Matrix4;class L{static unprojectVector(x,b){return b.projectionMatrixInverse.getInverse(b.projectionMatrix),z.multiplyMatrices(b.matrixWorld,b.projectionMatrixInverse),x.applyProjection(z)}static projectVector(x,b){return b.matrixWorldInverse.getInverse(b.matrixWorld),z.multiplyMatrices(b.projectionMatrix,b.matrixWorldInverse),x.applyProjection(z)}projectVector(x,b){return L.projectVector(x,b)}unprojectVector(x,b){return L.unprojectVector(x,b)}}},"./src/WebGL/core/Raycaster.ts":(k,R,g)=>{g.r(R),g.d(R,{Raycaster:()=>x,intersectObject:()=>a});var M=g("./src/WebGL/math/index.ts"),z=g("./src/WebGL/shapes/index.ts");const L=(u,f)=>u.distance-f.distance,B=new M.Matrix4;class x{constructor(f,d,r,o){this.precision=1e-4,this.linePrecision=.2,this.ray=new M.Ray(f,d),this.ray.direction.lengthSq()>0&&this.ray.direction.normalize(),this.near=o||0,this.far=r||1/0}set(f,d){this.ray.set(f,d)}setFromCamera(f,d){d.ortho?(this.ray.origin.set(f.x,f.y,(d.near+d.far)/(d.near-d.far)).unproject(d),this.ray.direction.set(0,0,-1).transformDirection(d.matrixWorld)):(this.ray.origin.setFromMatrixPosition(d.matrixWorld),this.ray.direction.set(f.x,f.y,f.z),d.projectionMatrixInverse.getInverse(d.projectionMatrix),B.multiplyMatrices(d.matrixWorld,d.projectionMatrixInverse),this.ray.direction.applyProjection(B),this.ray.direction.sub(this.ray.origin).normalize())}intersectObjects(f,d){for(var r=[],o=0,v=d.length;o<v;o++)a(f,d[o],this,r);return r.sort(L),r}}const b=u=>Math.min(Math.max(u,-1),1);var S=new z.Sphere,m=new z.Cylinder,T=new z.Triangle,D=new M.Vector3,p=new M.Vector3,A=new M.Vector3,l=new M.Vector3,n=new M.Vector3;function a(u,f,d,r){if(n.getPositionFromMatrix(u.matrixWorld),f.intersectionShape===void 0)return r;var o=f.intersectionShape,v=d.linePrecision;v*=u.matrixWorld.getMaxScaleOnAxis();var h=v*v;if(f.boundingSphere!==void 0&&f.boundingSphere instanceof z.Sphere&&(S.copy(f.boundingSphere),S.applyMatrix4(u.matrixWorld),!d.ray.isIntersectionSphere(S)))return r;var y,E,w,W,P,j,V,G,F,H,K,U,N,Y;for(y=0,E=o.triangle.length;y<E;y++)if(o.triangle[y]instanceof z.Triangle){if(T.copy(o.triangle[y]),T.applyMatrix4(u.matrixWorld),w=T.getNormal(),W=d.ray.direction.dot(w),W>=0||(D.subVectors(T.a,d.ray.origin),V=w.dot(D)/W,V<0))continue;p.copy(d.ray.direction).multiplyScalar(V).add(d.ray.origin),p.sub(T.a),A.copy(T.b).sub(T.a),l.copy(T.c).sub(T.a);var ne=A.dot(l),ae=A.lengthSq(),he=l.lengthSq();if(U=(ae*p.dot(l)-ne*p.dot(A))/(ae*he-ne*ne),U<0||U>1||(K=(p.dot(A)-U*ne)/ae,K<0||K>1||K+U>1))continue;r.push({clickable:f,distance:V})}for(y=0,E=o.cylinder.length;y<E;y++)if(o.cylinder[y]instanceof z.Cylinder){if(m.copy(o.cylinder[y]),m.applyMatrix4(u.matrixWorld),D.subVectors(m.c1,d.ray.origin),P=D.dot(m.direction),j=D.dot(d.ray.direction),W=b(d.ray.direction.dot(m.direction)),F=1-W*W,F===0)continue;N=(W*j-P)/F,Y=(j-W*P)/F,p.copy(m.direction).multiplyScalar(N).add(m.c1),A.copy(d.ray.direction).multiplyScalar(Y).add(d.ray.origin),G=l.subVectors(p,A).lengthSq();var oe=m.radius*m.radius;if(G<=oe){if(H=(W*P-j)*(W*P-j)-F*(D.lengthSq()-P*P-oe),H<=0?U=V=Math.sqrt(G):U=V=(j-W*P-Math.sqrt(H))/F,K=W*U-P,K<0||K*K>m.lengthSq()||U<0)continue;r.push({clickable:f,distance:V})}}for(y=0,E=o.line.length;y<E;y+=2){p.copy(o.line[y]),p.applyMatrix4(u.matrixWorld),A.copy(o.line[y+1]),A.applyMatrix4(u.matrixWorld),l.subVectors(A,p);var pe=l.lengthSq();l.normalize(),D.subVectors(p,d.ray.origin);var ue=D.dot(l);j=D.dot(d.ray.direction),W=b(d.ray.direction.dot(l)),F=1-W*W,F!==0&&(N=(W*j-ue)/F,Y=(j-W*ue)/F,p.add(l.multiplyScalar(N)),A.copy(d.ray.direction).multiplyScalar(Y).add(d.ray.origin),G=l.subVectors(A,p).lengthSq(),G<h&&N*N<pe&&r.push({clickable:f,distance:Y}))}for(y=0,E=o.sphere.length;y<E;y++)if(o.sphere[y]instanceof z.Sphere&&(S.copy(o.sphere[y]),S.applyMatrix4(u.matrixWorld),d.ray.isIntersectionSphere(S))){p.subVectors(S.center,d.ray.origin);var ge=p.dot(d.ray.direction);if(H=ge*ge-(p.lengthSq()-S.radius*S.radius),ge<0)return r;H<=0?V=ge:V=ge-Math.sqrt(H),r.push({clickable:f,distance:V})}return r}},"./src/WebGL/core/Texture.ts":(k,R,g)=>{g.r(R),g.d(R,{Texture:()=>x,TextureIdCount:()=>b});var M=g("./src/WebGL/constants/TextureConstants.ts"),z=g("./src/WebGL/math/index.ts"),L=g("./src/WebGL/core/EventDispatcher.ts"),B=g("./src/WebGL/core/UVMapping.ts");class x extends L.EventDispatcher{constructor(m,T){super(),this.id=b++,this.name="",this.image=m,this.mapping=new B.UVMapping,this.wrapS=M.ClampToEdgeWrapping,this.wrapT=M.ClampToEdgeWrapping,this.anisotropy=1,T?(this.format=M.RFormat,this.type=M.FloatType,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.magFilter=M.NearestFilter,this.minFilter=M.NearestFilter):(this.format=M.RGBAFormat,this.type=M.UnsignedByteType,this.offset=new z.Vector2(0,0),this.repeat=new z.Vector2(1,1),this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.magFilter=M.LinearFilter,this.minFilter=M.LinearMipMapLinearFilter),this.needsUpdate=!1,this.onUpdate=null}clone(m=new x){return m.image=this.image,m.mapping=this.mapping,m.wrapS=this.wrapS,m.wrapT=this.wrapT,m.magFilter=this.magFilter,m.minFilter=this.minFilter,m.anisotropy=this.anisotropy,m.format=this.format,m.type=this.type,m.offset.copy(this.offset),m.repeat.copy(this.repeat),m.premultiplyAlpha=this.premultiplyAlpha,m.flipY=this.flipY,m.unpackAlignment=this.unpackAlignment,m}dispose(){this.dispatchEvent({type:"dispose"})}}let b=0},"./src/WebGL/core/UVMapping.ts":(k,R,g)=>{g.r(R),g.d(R,{UVMapping:()=>M});class M{}},"./src/WebGL/core/index.ts":(k,R,g)=>{g.r(R),g.d(R,{EventDispatcher:()=>M.EventDispatcher,Geometry:()=>z.Geometry,GeometryGroup:()=>z.GeometryGroup,GeometryIDCount:()=>z.GeometryIDCount,Light:()=>L.Light,Object3D:()=>L.Object3D,Object3DIDCount:()=>L.Object3DIDCount,Projector:()=>B.Projector,Raycaster:()=>x.Raycaster,Scene:()=>L.Scene,Texture:()=>b.Texture,TextureIdCount:()=>b.TextureIdCount,UVMapping:()=>S.UVMapping,intersectObject:()=>x.intersectObject});var M=g("./src/WebGL/core/EventDispatcher.ts"),z=g("./src/WebGL/core/Geometry.ts"),L=g("./src/WebGL/core/Object3D.ts"),B=g("./src/WebGL/core/Projector.ts"),x=g("./src/WebGL/core/Raycaster.ts"),b=g("./src/WebGL/core/Texture.ts"),S=g("./src/WebGL/core/UVMapping.ts")},"./src/WebGL/index.ts":(k,R,g)=>{g.r(R),g.d(R,{BackSide:()=>M.BackSide,Camera:()=>m.Camera,ClampToEdgeWrapping:()=>M.ClampToEdgeWrapping,Coloring:()=>M.Coloring,Cylinder:()=>S.Cylinder,DoubleSide:()=>M.DoubleSide,EventDispatcher:()=>z.EventDispatcher,FloatType:()=>M.FloatType,Fog:()=>T.Fog,FrontSide:()=>M.FrontSide,Geometry:()=>z.Geometry,GeometryGroup:()=>z.GeometryGroup,GeometryIDCount:()=>z.GeometryIDCount,ImposterMaterial:()=>L.ImposterMaterial,InstancedMaterial:()=>L.InstancedMaterial,Light:()=>z.Light,Line:()=>x.Line,LineBasicMaterial:()=>L.LineBasicMaterial,LineStyle:()=>x.LineStyle,LinearFilter:()=>M.LinearFilter,LinearMipMapLinearFilter:()=>M.LinearMipMapLinearFilter,Material:()=>L.Material,MaterialIdCount:()=>L.MaterialIdCount,Matrix3:()=>B.Matrix3,Matrix4:()=>B.Matrix4,Mesh:()=>x.Mesh,MeshDoubleLambertMaterial:()=>L.MeshDoubleLambertMaterial,MeshLambertMaterial:()=>L.MeshLambertMaterial,MeshOutlineMaterial:()=>L.MeshOutlineMaterial,NearestFilter:()=>M.NearestFilter,Object3D:()=>z.Object3D,Object3DIDCount:()=>z.Object3DIDCount,Projector:()=>z.Projector,Quaternion:()=>B.Quaternion,R32Format:()=>M.R32Format,RFormat:()=>M.RFormat,RGBAFormat:()=>M.RGBAFormat,Ray:()=>B.Ray,Raycaster:()=>z.Raycaster,Renderer:()=>D.Renderer,Scene:()=>z.Scene,ShaderLib:()=>b.ShaderLib,ShaderUtils:()=>b.ShaderUtils,Shading:()=>M.Shading,Sphere:()=>S.Sphere,SphereImposterMaterial:()=>L.SphereImposterMaterial,SphereImposterOutlineMaterial:()=>L.SphereImposterOutlineMaterial,Sprite:()=>x.Sprite,SpriteAlignment:()=>M.SpriteAlignment,SpriteMaterial:()=>L.SpriteMaterial,SpritePlugin:()=>p.SpritePlugin,StickImposterMaterial:()=>L.StickImposterMaterial,StickImposterOutlineMaterial:()=>L.StickImposterOutlineMaterial,Texture:()=>z.Texture,TextureIdCount:()=>z.TextureIdCount,TextureOperations:()=>M.TextureOperations,Triangle:()=>S.Triangle,UVMapping:()=>z.UVMapping,UnsignedByteType:()=>M.UnsignedByteType,Vector2:()=>B.Vector2,Vector3:()=>B.Vector3,VolumetricMaterial:()=>L.VolumetricMaterial,basic:()=>b.basic,clamp:()=>B.clamp,clone:()=>b.clone,conversionMatrix3:()=>B.conversionMatrix3,degToRad:()=>B.degToRad,instanced:()=>b.instanced,intersectObject:()=>z.intersectObject,lambert:()=>b.lambert,lambertdouble:()=>b.lambertdouble,outline:()=>b.outline,screen:()=>b.screen,screenaa:()=>b.screenaa,sphereimposter:()=>b.sphereimposter,sphereimposteroutline:()=>b.sphereimposteroutline,sprite:()=>b.sprite,stickimposter:()=>b.stickimposter,stickimposteroutline:()=>b.stickimposteroutline,volumetric:()=>b.volumetric});var M=g("./src/WebGL/constants/index.ts"),z=g("./src/WebGL/core/index.ts"),L=g("./src/WebGL/materials/index.ts"),B=g("./src/WebGL/math/index.ts"),x=g("./src/WebGL/objects/index.ts"),b=g("./src/WebGL/shaders/index.ts"),S=g("./src/WebGL/shapes/index.ts"),m=g("./src/WebGL/Camera.ts"),T=g("./src/WebGL/Fog.ts"),D=g("./src/WebGL/Renderer.ts"),p=g("./src/WebGL/SpritePlugin.ts")},"./src/WebGL/materials/ImposterMaterial.ts":(k,R,g)=>{g.r(R),g.d(R,{ImposterMaterial:()=>b});var M=g("./src/WebGL/constants/Coloring.ts"),z=g("./src/WebGL/constants/Shading.ts"),L=g("./src/colors.ts"),B=g("./src/WebGL/math/index.ts"),x=g("./src/WebGL/materials/Material.ts");class b extends x.Material{constructor(m){super(),this.color=new L.Color(16777215),this.ambient=new L.Color(1048575),this.emissive=new L.Color(0),this.imposter=!0,this.wrapAround=!1,this.wrapRGB=new B.Vector3(1,1,1),this.map=void 0,this.lightMap=null,this.specularMap=null,this.envMap=null,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.shading=z.Shading.SmoothShading,this.shaderID=null,this.vertexColors=M.Coloring.NoColors,this.skinning=!1,this.setValues(m)}clone(m=new b){return super.clone.call(this,m),m.color.copy(this.color),m.ambient.copy(this.ambient),m.emissive.copy(this.emissive),m.wrapAround=this.wrapAround,m.wrapRGB.copy(this.wrapRGB),m.map=this.map,m.lightMap=this.lightMap,m.specularMap=this.specularMap,m.envMap=this.envMap,m.combine=this.combine,m.reflectivity=this.reflectivity,m.refractionRatio=this.refractionRatio,m.fog=this.fog,m.shading=this.shading,m.shaderID=this.shaderID,m.vertexColors=this.vertexColors,m.skinning=this.skinning,m.morphTargets=this.morphTargets,m.morphNormals=this.morphNormals,m}}},"./src/WebGL/materials/InstancedMaterial.ts":(k,R,g)=>{g.r(R),g.d(R,{InstancedMaterial:()=>b});var M=g("./src/WebGL/constants/Coloring.ts"),z=g("./src/WebGL/constants/Shading.ts"),L=g("./src/colors.ts"),B=g("./src/WebGL/math/index.ts"),x=g("./src/WebGL/materials/Material.ts");class b extends x.Material{constructor(m){super(),this.color=new L.Color(16777215),this.ambient=new L.Color(1048575),this.emissive=new L.Color(0),this.wrapAround=!1,this.wrapRGB=new B.Vector3(1,1,1),this.map=void 0,this.lightMap=null,this.specularMap=null,this.envMap=null,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.shading=z.Shading.SmoothShading,this.shaderID="instanced",this.vertexColors=M.Coloring.NoColors,this.skinning=!1,this.sphere=null,this.setValues(m)}clone(m=new b){return super.clone.call(this,m),m.color.copy(this.color),m.ambient.copy(this.ambient),m.emissive.copy(this.emissive),m.wrapAround=this.wrapAround,m.wrapRGB.copy(this.wrapRGB),m.map=this.map,m.lightMap=this.lightMap,m.specularMap=this.specularMap,m.envMap=this.envMap,m.combine=this.combine,m.reflectivity=this.reflectivity,m.refractionRatio=this.refractionRatio,m.fog=this.fog,m.shading=this.shading,m.shaderID=this.shaderID,m.vertexColors=this.vertexColors,m.skinning=this.skinning,m.morphTargets=this.morphTargets,m.morphNormals=this.morphNormals,m.sphere=this.sphere,m}}},"./src/WebGL/materials/LineBasicMaterial.ts":(k,R,g)=>{g.r(R),g.d(R,{LineBasicMaterial:()=>L});var M=g("./src/colors.ts"),z=g("./src/WebGL/materials/Material.ts");class L extends z.Material{constructor(x){super(),this.color=new M.Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.vertexColors=!1,this.fog=!0,this.shaderID="basic",this.setValues(x)}clone(x=new L){return super.clone.call(this,x),x.color.copy(this.color),x}}},"./src/WebGL/materials/Material.ts":(k,R,g)=>{g.r(R),g.d(R,{Material:()=>x,MaterialIdCount:()=>b});var M=g("./src/WebGL/constants/Sides.ts"),z=g("./src/WebGL/core/index.ts"),L=g("./src/WebGL/math/index.ts"),B=g("./src/colors.ts");class x extends z.EventDispatcher{constructor(){super(...arguments),this.id=b++,this.name="",this.side=M.FrontSide,this.opacity=1,this.transparent=!1,this.depthTest=!0,this.depthWrite=!0,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.alphaTest=0,this.visible=!0,this.needsUpdate=!0,this.outline=!1,this.wireframe=!1,this.shaded=!1}setValues(m={}){if(m!==void 0)for(var T in m){var D=m[T];if(D===void 0){console.warn("$3Dmol.Material: '"+T+"' parameter is undefined.");continue}if(T in this){var p=this[T];p instanceof B.Color&&D instanceof B.Color?p.copy(D):p instanceof B.Color?p.set(D):p instanceof L.Vector3&&D instanceof L.Vector3?p.copy(D):this[T]=D}}}clone(m=new x){return m.name=this.name,m.side=this.side,m.opacity=this.opacity,m.transparent=this.transparent,m.depthTest=this.depthTest,m.depthWrite=this.depthWrite,m.polygonOffset=this.polygonOffset,m.polygonOffsetFactor=this.polygonOffsetFactor,m.polygonOffsetUnits=this.polygonOffsetUnits,m.alphaTest=this.alphaTest,m.overdraw=this.overdraw,m.visible=this.visible,m}makeShaded(m){this.shaded=!0,this.uniforms&&(this.uniforms.shading={type:"i",value:m},this.uniforms.vWidth={type:"f",value:1},this.uniforms.vHeight={type:"f",value:1})}dispose(){this.dispatchEvent({type:"dispose"})}}let b=0},"./src/WebGL/materials/MeshDoubleLambertMaterial.ts":(k,R,g)=>{g.r(R),g.d(R,{MeshDoubleLambertMaterial:()=>L});var M=g("./src/WebGL/constants/Sides.ts"),z=g("./src/WebGL/materials/MeshLambertMaterial.ts");class L extends z.MeshLambertMaterial{constructor(x){super(x),this.shaderID="lambertdouble",this.side=M.DoubleSide,this.outline=!1}clone(x=new L){return super.clone.call(this,x),x}}},"./src/WebGL/materials/MeshLambertMaterial.ts":(k,R,g)=>{g.r(R),g.d(R,{MeshLambertMaterial:()=>b});var M=g("./src/WebGL/constants/Coloring.ts"),z=g("./src/WebGL/constants/Shading.ts"),L=g("./src/WebGL/materials/Material.ts"),B=g("./src/colors.ts"),x=g("./src/WebGL/math/index.ts");class b extends L.Material{constructor(m){super(),this.color=new B.Color(16777215),this.ambient=new B.Color(1048575),this.emissive=new B.Color(0),this.wrapAround=!1,this.wrapRGB=new x.Vector3(1,1,1),this.map=void 0,this.lightMap=null,this.specularMap=null,this.envMap=null,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.shading=z.Shading.SmoothShading,this.shaderID="lambert",this.vertexColors=M.Coloring.NoColors,this.skinning=!1,this.setValues(m)}clone(m=new b){return super.clone.call(this,m),m.color.copy(this.color),m.ambient.copy(this.ambient),m.emissive.copy(this.emissive),m.wrapAround=this.wrapAround,m.wrapRGB.copy(this.wrapRGB),m.map=this.map,m.lightMap=this.lightMap,m.specularMap=this.specularMap,m.envMap=this.envMap,m.combine=this.combine,m.reflectivity=this.reflectivity,m.refractionRatio=this.refractionRatio,m.fog=this.fog,m.shading=this.shading,m.shaderID=this.shaderID,m.vertexColors=this.vertexColors,m.skinning=this.skinning,m.morphTargets=this.morphTargets,m.morphNormals=this.morphNormals,m}}},"./src/WebGL/materials/MeshOutlineMaterial.ts":(k,R,g)=>{g.r(R),g.d(R,{MeshOutlineMaterial:()=>L});var M=g("./src/colors.ts"),z=g("./src/WebGL/materials/Material.ts");class L extends z.Material{constructor(x){super(),x=x||{},this.fog=!0,this.shaderID="outline",this.wireframe=!1,this.outlineColor=M.CC.color(x.color||new M.Color(0,0,0)),this.outlineWidth=x.width||.1,this.outlinePushback=x.pushback||1,this.outlineMaxPixels=x.maxpixels||0}clone(x=new L){return super.clone.call(this,x),x.fog=this.fog,x.shaderID=this.shaderID,x.wireframe=this.wireframe,x.outlineColor=this.outlineColor,x.outlineWidth=this.outlineWidth,x.outlinePushback=this.outlinePushback,x.outlineMaxPixels=this.outlineMaxPixels,x}}},"./src/WebGL/materials/SphereImposterMaterial.ts":(k,R,g)=>{g.r(R),g.d(R,{SphereImposterMaterial:()=>z});var M=g("./src/WebGL/materials/ImposterMaterial.ts");class z extends M.ImposterMaterial{constructor(B){super(B),this.shaderID="sphereimposter",this.setValues(B)}clone(B=new z){return super.clone.call(this,B),B}}},"./src/WebGL/materials/SphereImposterOutlineMaterial.ts":(k,R,g)=>{g.r(R),g.d(R,{SphereImposterOutlineMaterial:()=>L});var M=g("./src/colors.ts"),z=g("./src/WebGL/materials/ImposterMaterial.ts");class L extends z.ImposterMaterial{constructor(x){super(x),x=x||{},this.shaderID="sphereimposteroutline",this.outlineColor=M.CC.color(x.color||new M.Color(0,0,0)),this.outlineWidth=x.width||.1,this.outlinePushback=x.pushback||1,this.outlineMaxPixels=x.maxpixels||0,this.setValues(x)}clone(x=new L){return super.clone.call(this,x),x.outlineColor=this.outlineColor,x.outlineWidth=this.outlineWidth,x.outlinePushback=this.outlinePushback,x.outlineMaxPixels=this.outlineMaxPixels,x}}},"./src/WebGL/materials/SpriteMaterial.ts":(k,R,g)=>{g.r(R),g.d(R,{SpriteMaterial:()=>b});var M=g("./src/WebGL/constants/SpriteAlignment.ts"),z=g("./src/WebGL/core/Texture.ts"),L=g("./src/colors.ts"),B=g("./src/WebGL/math/index.ts"),x=g("./src/WebGL/materials/Material.ts");class b extends x.Material{constructor(m){super(),this.color=new L.Color(16777215),this.map=new z.Texture,this.useScreenCoordinates=!0,this.fog=!1,this.uvOffset=new B.Vector2(0,0),this.uvScale=new B.Vector2(1,1),this.depthTest=!this.useScreenCoordinates,this.sizeAttenuation=!this.useScreenCoordinates,this.screenOffset=this.screenOffset,this.scaleByViewPort=!this.sizeAttenuation,this.alignment=M.SpriteAlignment.center.clone(),this.setValues(m),m=m||{},m.depthTest===void 0&&(this.depthTest=!this.useScreenCoordinates),m.sizeAttenuation===void 0&&(this.sizeAttenuation=!this.useScreenCoordinates),m.scaleByViewPort===void 0&&(this.scaleByViewPort=!this.sizeAttenuation)}clone(m=new b){return super.clone.call(this,m),m.color.copy(this.color),m.map=this.map,m.useScreenCoordinates=this.useScreenCoordinates,m.screenOffset=this.screenOffset,m.sizeAttenuation=this.sizeAttenuation,m.scaleByViewport=this.scaleByViewPort,m.alignment.copy(this.alignment),m.uvOffset.copy(this.uvOffset),m}}},"./src/WebGL/materials/StickImposterMaterial.ts":(k,R,g)=>{g.r(R),g.d(R,{StickImposterMaterial:()=>z});var M=g("./src/WebGL/materials/ImposterMaterial.ts");class z extends M.ImposterMaterial{constructor(B){super(B),this.shaderID="stickimposter",this.setValues(B)}clone(B=new z){return super.clone.call(this,B),B}}},"./src/WebGL/materials/StickImposterOutlineMaterial.ts":(k,R,g)=>{g.r(R),g.d(R,{StickImposterOutlineMaterial:()=>L});var M=g("./src/colors.ts"),z=g("./src/WebGL/materials/ImposterMaterial.ts");class L extends z.ImposterMaterial{constructor(x={}){super(x),this.shaderID="stickimposteroutline",this.outlineColor=new M.Color(0,0,0),this.outlineWidth=.1,this.outlinePushback=1,this.outlineMaxPixels=0,x.color&&(this.outlineColor=M.CC.color(x.color)),x.width&&(this.outlineWidth=x.width),x.pushback&&(this.outlinePushback=x.pushback),x.maxpixels&&(this.outlineMaxPixels=x.maxpixels),this.setValues(x)}clone(x=new L){return super.clone.call(this,x),x.outlineColor=this.outlineColor,x.outlineWidth=this.outlineWidth,x.outlinePushback=this.outlinePushback,x.outlineMaxPixels=this.outlineMaxPixels,x}}},"./src/WebGL/materials/VolumetricMaterial.ts":(k,R,g)=>{g.r(R),g.d(R,{VolumetricMaterial:()=>B});var M=g("./src/WebGL/constants/Sides.ts"),z=g("./src/colors.ts"),L=g("./src/WebGL/materials/Material.ts");class B extends L.Material{constructor(b){super(),this.transparent=!1,this.volumetric=!0,this.color=new z.Color(16777215),this.transferfn=null,this.map=void 0,this.extent=[],this.maxdepth=100,this.unit=0,this.texmatrix=null,this.transfermin=-1,this.transfermax=1,this.subsamples=5,this.shaderID="volumetric",this.side=M.FrontSide,this.setValues(b)}clone(b=new B){return super.clone.call(this,b),b.transparent=this.transparent,b.volumetric=this.volumetric,b.color=this.color,b.transferfn=this.transferfn,b.map=this.map,b.extent=this.extent,b.maxdepth=this.maxdepth,b.unit=this.unit,b.texmatrix=this.texmatrix,b.transfermin=this.transfermin,b.transfermax=this.transfermax,b.subsamples=this.subsamples,b.shaderID=this.shaderID,b.side=this.side,b}}},"./src/WebGL/materials/index.ts":(k,R,g)=>{g.r(R),g.d(R,{ImposterMaterial:()=>M.ImposterMaterial,InstancedMaterial:()=>z.InstancedMaterial,LineBasicMaterial:()=>L.LineBasicMaterial,Material:()=>B.Material,MaterialIdCount:()=>B.MaterialIdCount,MeshDoubleLambertMaterial:()=>x.MeshDoubleLambertMaterial,MeshLambertMaterial:()=>b.MeshLambertMaterial,MeshOutlineMaterial:()=>S.MeshOutlineMaterial,SphereImposterMaterial:()=>m.SphereImposterMaterial,SphereImposterOutlineMaterial:()=>T.SphereImposterOutlineMaterial,SpriteMaterial:()=>D.SpriteMaterial,StickImposterMaterial:()=>p.StickImposterMaterial,StickImposterOutlineMaterial:()=>A.StickImposterOutlineMaterial,VolumetricMaterial:()=>l.VolumetricMaterial});var M=g("./src/WebGL/materials/ImposterMaterial.ts"),z=g("./src/WebGL/materials/InstancedMaterial.ts"),L=g("./src/WebGL/materials/LineBasicMaterial.ts"),B=g("./src/WebGL/materials/Material.ts"),x=g("./src/WebGL/materials/MeshDoubleLambertMaterial.ts"),b=g("./src/WebGL/materials/MeshLambertMaterial.ts"),S=g("./src/WebGL/materials/MeshOutlineMaterial.ts"),m=g("./src/WebGL/materials/SphereImposterMaterial.ts"),T=g("./src/WebGL/materials/SphereImposterOutlineMaterial.ts"),D=g("./src/WebGL/materials/SpriteMaterial.ts"),p=g("./src/WebGL/materials/StickImposterMaterial.ts"),A=g("./src/WebGL/materials/StickImposterOutlineMaterial.ts"),l=g("./src/WebGL/materials/VolumetricMaterial.ts")},"./src/WebGL/math/Quaternion.ts":(k,R,g)=>{g.r(R),g.d(R,{Quaternion:()=>M});class M{constructor(L,B,x,b){this.x=L||0,this.y=B||0,this.z=x||0,this.w=b!==void 0?b:1}set(L,B,x,b){return this.x=L,this.y=B,this.z=x,this.w=b,this}copy(L){return this.x=L.x,this.y=L.y,this.z=L.z,this.w=L.w,this}conjugate(){return this.x*=-1,this.y*=-1,this.z*=-1,this}inverse(){return this.conjugate().normalize()}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}lengthxyz(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}normalize(){let L=this.length();return L===0?(this.x=0,this.y=0,this.z=0,this.w=1):(L=1/L,this.x*=L,this.y*=L,this.z*=L,this.w*=L),this}multiply(L){return this.multiplyQuaternions(this,L)}multiplyScalar(L){return this.x*=L,this.y*=L,this.z*=L,this.w*=L,this}multiplyQuaternions(L,B){const x=L.x,b=L.y,S=L.z,m=L.w,T=B.x,D=B.y,p=B.z,A=B.w;return this.x=x*A+m*T+b*p-S*D,this.y=b*A+m*D+S*T-x*p,this.z=S*A+m*p+x*D-b*T,this.w=m*A-x*T-b*D-S*p,this}sub(L){return this.x-=L.x,this.y-=L.y,this.z-=L.z,this.w-=L.w,this}clone(){return new M(this.x,this.y,this.z,this.w)}setFromEuler(L){const B=Math.cos(L.x/2),x=Math.cos(L.y/2),b=Math.cos(L.z/2),S=Math.sin(L.x/2),m=Math.sin(L.y/2),T=Math.sin(L.z/2);return this.x=S*x*b+B*m*T,this.y=B*m*b-S*x*T,this.z=B*x*T+S*m*b,this.w=B*x*b-S*m*T,this}}},"./src/WebGL/math/Vector2.ts":(k,R,g)=>{g.r(R),g.d(R,{Vector2:()=>M});class M{constructor(L,B){this.x=L||0,this.y=B||0}set(L,B){return this.x=L,this.y=B,this}subVectors(L,B){return this.x=L.x-B.x,this.y=L.y-B.y,this}copy(L){return this.x=L.x,this.y=L.y,this}clone(){return new M(this.x,this.y)}}},"./src/WebGL/math/index.ts":(k,R,g)=>{g.r(R),g.d(R,{Matrix3:()=>b.Matrix3,Matrix4:()=>b.Matrix4,Quaternion:()=>M.Quaternion,Ray:()=>b.Ray,Vector2:()=>z.Vector2,Vector3:()=>b.Vector3,clamp:()=>L.clamp,conversionMatrix3:()=>B.conversionMatrix3,degToRad:()=>x.degToRad});var M=g("./src/WebGL/math/Quaternion.ts"),z=g("./src/WebGL/math/Vector2.ts"),L=g("./src/WebGL/math/utils/clamp.ts"),B=g("./src/WebGL/math/utils/conversionMatrix3.ts"),x=g("./src/WebGL/math/utils/degToRad.ts"),b=g("./src/WebGL/math/math.ts")},"./src/WebGL/math/math.ts":(k,R,g)=>{g.r(R),g.d(R,{Matrix3:()=>D,Matrix4:()=>m,Ray:()=>p,Vector3:()=>T});var M=g("./src/WebGL/math/utils/degToRad.ts"),z=g("./src/WebGL/math/utils/clamp.ts"),L,B,x,b,S;class m{constructor(l=1,n=0,a=0,u=0,f=0,d=1,r=0,o=0,v=0,h=0,y=1,E=0,w=0,W=0,P=0,j=1){typeof l<"u"&&typeof l!="number"?this.elements=new Float32Array(l):(this.elements=new Float32Array(16),this.elements[0]=l,this.elements[4]=n,this.elements[8]=a,this.elements[12]=u,this.elements[1]=f,this.elements[5]=d,this.elements[9]=r,this.elements[13]=o,this.elements[2]=v,this.elements[6]=h,this.elements[10]=y,this.elements[14]=E,this.elements[3]=w,this.elements[7]=W,this.elements[11]=P,this.elements[15]=j)}makeScale(l,n,a){throw new Error("Method not implemented.")}set(l,n,a,u,f,d,r,o,v,h,y,E,w,W,P,j){const V=this.elements;return V[0]=l,V[4]=n,V[8]=a,V[12]=u,V[1]=f,V[5]=d,V[9]=r,V[13]=o,V[2]=v,V[6]=h,V[10]=y,V[14]=E,V[3]=w,V[7]=W,V[11]=P,V[15]=j,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}copy(l){const n=l.elements;return this.set(n[0],n[4],n[8],n[12],n[1],n[5],n[9],n[13],n[2],n[6],n[10],n[14],n[3],n[7],n[11],n[15]),this}matrix3FromTopLeft(){const l=this.elements;return new D(l[0],l[4],l[8],l[1],l[5],l[9],l[2],l[6],l[10])}setRotationFromEuler(l,n){const a=this.elements,{x:u,y:f,z:d}=l,r=Math.cos(u),o=Math.sin(u),v=Math.cos(f),h=Math.sin(f),y=Math.cos(d),E=Math.sin(d);if(n===void 0||n==="XYZ"){const w=r*y,W=r*E,P=o*y,j=o*E;a[0]=v*y,a[4]=-v*E,a[8]=h,a[1]=W+P*h,a[5]=w-j*h,a[9]=-o*v,a[2]=j-w*h,a[6]=P+W*h,a[10]=r*v}else console.error(`Error with matrix4 setRotationFromEuler. Order: ${n}`);return this}setRotationFromQuaternion(l){const n=this.elements,{x:a,y:u,z:f,w:d}=l,r=a+a,o=u+u,v=f+f,h=a*r,y=a*o,E=a*v,w=u*o,W=u*v,P=f*v,j=d*r,V=d*o,G=d*v;return n[0]=1-(w+P),n[4]=y-G,n[8]=E+V,n[1]=y+G,n[5]=1-(h+P),n[9]=W-j,n[2]=E-V,n[6]=W+j,n[10]=1-(h+w),this}multiplyMatrices(l,n){const a=l.elements,u=n.elements,f=this.elements,d=a[0],r=a[4],o=a[8],v=a[12],h=a[1],y=a[5],E=a[9],w=a[13],W=a[2],P=a[6],j=a[10],V=a[14],G=a[3],F=a[7],H=a[11],K=a[15],U=u[0],N=u[4],Y=u[8],ne=u[12],ae=u[1],he=u[5],oe=u[9],pe=u[13],ue=u[2],ge=u[6],Fe=u[10],Be=u[14],ke=u[3],be=u[7],fe=u[11],De=u[15];return f[0]=d*U+r*ae+o*ue+v*ke,f[4]=d*N+r*he+o*ge+v*be,f[8]=d*Y+r*oe+o*Fe+v*fe,f[12]=d*ne+r*pe+o*Be+v*De,f[1]=h*U+y*ae+E*ue+w*ke,f[5]=h*N+y*he+E*ge+w*be,f[9]=h*Y+y*oe+E*Fe+w*fe,f[13]=h*ne+y*pe+E*Be+w*De,f[2]=W*U+P*ae+j*ue+V*ke,f[6]=W*N+P*he+j*ge+V*be,f[10]=W*Y+P*oe+j*Fe+V*fe,f[14]=W*ne+P*pe+j*Be+V*De,f[3]=G*U+F*ae+H*ue+K*ke,f[7]=G*N+F*he+H*ge+K*be,f[11]=G*Y+F*oe+H*Fe+K*fe,f[15]=G*ne+F*pe+H*Be+K*De,this}multiplyScalar(l){const n=this.elements;return n[0]*=l,n[4]*=l,n[8]*=l,n[12]*=l,n[1]*=l,n[5]*=l,n[9]*=l,n[13]*=l,n[2]*=l,n[6]*=l,n[10]*=l,n[14]*=l,n[3]*=l,n[7]*=l,n[11]*=l,n[15]*=l,this}makeTranslation(l,n,a){return this.set(1,0,0,l,0,1,0,n,0,0,1,a,0,0,0,1),this}snap(l){const n=Math.pow(10,4),a=this.elements;for(let u=0;u<16;u++){const f=Math.round(a[u]);f===Math.round(a[u]*n)/n&&(a[u]=f)}return this}transpose(){const l=this.elements;let n;return n=l[1],l[1]=l[4],l[4]=n,n=l[2],l[2]=l[8],l[8]=n,n=l[6],l[6]=l[9],l[9]=n,n=l[3],l[3]=l[12],l[12]=n,n=l[7],l[7]=l[13],l[13]=n,n=l[11],l[11]=l[14],l[14]=n,this}setPosition(l){const n=this.elements;return n[12]=l.x,n[13]=l.y,n[14]=l.z,this}translate(l){const n=this.elements;return n[12]+=l.x,n[13]+=l.y,n[14]+=l.z,this}getInverse(l,n){const a=this.elements,u=l.elements,f=u[0],d=u[4],r=u[8],o=u[12],v=u[1],h=u[5],y=u[9],E=u[13],w=u[2],W=u[6],P=u[10],j=u[14],V=u[3],G=u[7],F=u[11],H=u[15];a[0]=y*j*G-E*P*G+E*W*F-h*j*F-y*W*H+h*P*H,a[4]=o*P*G-r*j*G-o*W*F+d*j*F+r*W*H-d*P*H,a[8]=r*E*G-o*y*G+o*h*F-d*E*F-r*h*H+d*y*H,a[12]=o*y*W-r*E*W-o*h*P+d*E*P+r*h*j-d*y*j,a[1]=E*P*V-y*j*V-E*w*F+v*j*F+y*w*H-v*P*H,a[5]=r*j*V-o*P*V+o*w*F-f*j*F-r*w*H+f*P*H,a[9]=o*y*V-r*E*V-o*v*F+f*E*F+r*v*H-f*y*H,a[13]=r*E*w-o*y*w+o*v*P-f*E*P-r*v*j+f*y*j,a[2]=h*j*V-E*W*V+E*w*G-v*j*G-h*w*H+v*W*H,a[6]=o*W*V-d*j*V-o*w*G+f*j*G+d*w*H-f*W*H,a[10]=d*E*V-o*h*V+o*v*G-f*E*G-d*v*H+f*h*H,a[14]=o*h*w-d*E*w-o*v*W+f*E*W+d*v*j-f*h*j,a[3]=y*W*V-h*P*V-y*w*G+v*P*G+h*w*F-v*W*F,a[7]=d*P*V-r*W*V+r*w*G-f*P*G-d*w*F+f*W*F,a[11]=r*h*V-d*y*V-r*v*G+f*y*G+d*v*F-f*h*F,a[15]=d*y*w-r*h*w+r*v*W-f*y*W-d*v*P+f*h*P;const K=f*a[0]+v*a[4]+w*a[8]+V*a[12];if(K===0){const U="Matrix4.getInverse(): can't invert matrix, determinant is 0";if(n)throw new Error(U);return console.warn(U),this.identity(),this}return this.multiplyScalar(1/K),this}isReflected(){const l=this.elements,n=l[0],a=l[4],u=l[8],f=l[1],d=l[5],r=l[9],o=l[2],v=l[6],h=l[10];return n*d*h+f*v*u+o*a*r-o*d*u-f*a*h-n*v*r<0}scale(l){const n=this.elements,{x:a}=l,{y:u}=l,{z:f}=l;return n[0]*=a,n[4]*=u,n[8]*=f,n[1]*=a,n[5]*=u,n[9]*=f,n[2]*=a,n[6]*=u,n[10]*=f,n[3]*=a,n[7]*=u,n[11]*=f,this}getMaxScaleOnAxis(){const l=this.elements,n=l[0]*l[0]+l[1]*l[1]+l[2]*l[2],a=l[4]*l[4]+l[5]*l[5]+l[6]*l[6],u=l[8]*l[8]+l[9]*l[9]+l[10]*l[10];return Math.sqrt(Math.max(n,Math.max(a,u)))}makeFrustum(l,n,a,u,f,d){const r=this.elements,o=2*f/(n-l),v=2*f/(u-a),h=(n+l)/(n-l),y=(u+a)/(u-a),E=-(d+f)/(d-f),w=-2*d*f/(d-f);return r[0]=o,r[4]=0,r[8]=h,r[12]=0,r[1]=0,r[5]=v,r[9]=y,r[13]=0,r[2]=0,r[6]=0,r[10]=E,r[14]=w,r[3]=0,r[7]=0,r[11]=-1,r[15]=0,this}makePerspective(l,n,a,u){const f=a*Math.tan((0,M.degToRad)(l*.5)),d=-f,r=d*n,o=f*n;return this.makeFrustum(r,o,d,f,a,u)}makeOrthographic(l,n,a,u,f,d){const r=this.elements,o=1/(n-l),v=1/(a-u),h=1/(d-f),y=(n+l)*o,E=(a+u)*v,w=(d+f)*h;return r[0]=2*o,r[4]=0,r[8]=0,r[12]=-y,r[1]=0,r[5]=2*v,r[9]=0,r[13]=-E,r[2]=0,r[6]=0,r[10]=-2*h,r[14]=-w,r[3]=0,r[7]=0,r[11]=0,r[15]=1,this}isEqual(l){const n=l.elements,a=this.elements;return a[0]===n[0]&&a[4]===n[4]&&a[8]===n[8]&&a[12]===n[12]&&a[1]===n[1]&&a[5]===n[5]&&a[9]===n[9]&&a[13]===n[13]&&a[2]===n[2]&&a[6]===n[6]&&a[10]===n[10]&&a[14]===n[14]&&a[3]===n[3]&&a[7]===n[7]&&a[11]===n[11]&&a[15]===n[15]}clone(){const l=this.elements;return new m(l[0],l[4],l[8],l[12],l[1],l[5],l[9],l[13],l[2],l[6],l[10],l[14],l[3],l[7],l[11],l[15])}isIdentity(){const l=this.elements;return l[0]===1&&l[4]===0&&l[8]===0&&l[12]===0&&l[1]===0&&l[5]===1&&l[9]===0&&l[13]===0&&l[2]===0&&l[6]===0&&l[10]===1&&l[14]===0&&l[3]===0&&l[7]===0&&l[11]===0&&l[15]===1}isNearlyIdentity(l){return this.clone().snap(l).isIdentity()}getScale(l){const n=this.elements;return l=l||new T,x.set(n[0],n[1],n[2]),b.set(n[4],n[5],n[6]),S.set(n[8],n[9],n[10]),l.x=x.length(),l.y=b.length(),l.z=S.length(),l}lookAt(l,n,a){const u=this.elements;return S.subVectors(l,n).normalize(),S.length()===0&&(S.z=1),x.crossVectors(a,S).normalize(),x.length()===0&&(S.x+=1e-4,x.crossVectors(a,S).normalize()),b.crossVectors(S,x),u[0]=x.x,u[4]=b.x,u[8]=S.x,u[1]=x.y,u[5]=b.y,u[9]=S.y,u[2]=x.z,u[6]=b.z,u[10]=S.z,this}compose(l,n,a){const u=this.elements;return L.identity(),L.setRotationFromQuaternion(n),B.makeScale(a.x,a.y,a.z),this.multiplyMatrices(L,B),u[12]=l.x,u[13]=l.y,u[14]=l.z,this}}L=new m,B=new m;class T{constructor(l,n,a){this.x=l||0,this.y=n||0,this.z=a||0,this.atomid=void 0}set(l,n,a){return this.x=l,this.y=n,this.z=a,this}copy(l){return this.x=l.x,this.y=l.y,this.z=l.z,this}add(l){return this.x+=l.x,this.y+=l.y,this.z+=l.z,this}addVectors(l,n){return this.x=l.x+n.x,this.y=l.y+n.y,this.z=l.z+n.z,this}multiplyVectors(l,n){return this.x=l.x*n.x,this.y=l.y*n.y,this.z=l.z*n.z,this}sub(l){return this.x-=l.x,this.y-=l.y,this.z-=l.z,this}subVectors(l,n){return this.x=l.x-n.x,this.y=l.y-n.y,this.z=l.z-n.z,this}multiplyScalar(l){return this.x*=l,this.y*=l,this.z*=l,this}divideScalar(l){return l!==0?(this.x/=l,this.y/=l,this.z/=l):(this.x=0,this.y=0,this.z=0),this}max(l){return this.x=Math.max(this.x,l.x),this.y=Math.max(this.y,l.y),this.z=Math.max(this.z,l.z),this}min(l){return this.x=Math.min(this.x,l.x),this.y=Math.min(this.y,l.y),this.z=Math.min(this.z,l.z),this}distanceTo(l){return Math.sqrt(this.distanceToSquared(l))}distanceToSquared(l){const n=this.x-l.x,a=this.y-l.y,u=this.z-l.z;return n*n+a*a+u*u}applyMatrix3(l){const{x:n}=this,{y:a}=this,{z:u}=this,f=l.elements;return this.x=f[0]*n+f[3]*a+f[6]*u,this.y=f[1]*n+f[4]*a+f[7]*u,this.z=f[2]*n+f[5]*a+f[8]*u,this}applyMatrix4(l){const{x:n}=this,{y:a}=this,{z:u}=this,f=l.elements;return this.x=f[0]*n+f[4]*a+f[8]*u+f[12],this.y=f[1]*n+f[5]*a+f[9]*u+f[13],this.z=f[2]*n+f[6]*a+f[10]*u+f[14],this}applyProjection(l){const{x:n}=this,{y:a}=this,{z:u}=this,f=l.elements,d=f[3]*n+f[7]*a+f[11]*u+f[15];return this.x=(f[0]*n+f[4]*a+f[8]*u+f[12])/d,this.y=(f[1]*n+f[5]*a+f[9]*u+f[13])/d,this.z=(f[2]*n+f[6]*a+f[10]*u+f[14])/d,this}applyQuaternion(l){const{x:n}=this,{y:a}=this,{z:u}=this,f=l.x,d=l.y,r=l.z,o=l.w,v={};v.x=2*(a*r-u*d),v.y=2*(u*f-n*r),v.z=2*(n*d-a*f);const h={};return h.x=v.y*r-v.z*d,h.y=v.z*f-v.x*r,h.z=v.x*d-v.y*f,this.x=n+o*v.x+h.x,this.y=a+o*v.y+h.y,this.z=u+o*v.z+h.z,this}negate(){return this.multiplyScalar(-1)}dot(l){return this.x*l.x+this.y*l.y+this.z*l.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}normalize(){return this.divideScalar(this.length())}cross(l){const{x:n}=this,{y:a}=this,{z:u}=this;return this.x=a*l.z-u*l.y,this.y=u*l.x-n*l.z,this.z=n*l.y-a*l.x,this}crossVectors(l,n){return this.x=l.y*n.z-l.z*n.y,this.y=l.z*n.x-l.x*n.z,this.z=l.x*n.y-l.y*n.x,this}equals(l){return this.x==l.x&&this.y==l.y&&this.z==l.z}getPositionFromMatrix(l){return this.x=l.elements[12],this.y=l.elements[13],this.z=l.elements[14],this}setEulerFromRotationMatrix(l,n){const a=l.elements,u=a[0],f=a[4],d=a[8],r=a[5],o=a[9],v=a[6],h=a[10];return n===void 0||n==="XYZ"?(this.y=Math.asin((0,z.clamp)(d,-1,1)),Math.abs(d)<.99999?(this.x=Math.atan2(-o,h),this.z=Math.atan2(-f,u)):(this.x=Math.atan2(v,r),this.z=0)):console.error(`Error with vector's setEulerFromRotationMatrix: Unknown order: ${n}`),this}rotateAboutVector(l,n){l.normalize();const a=Math.cos(n),u=Math.sin(n),f=this.clone().multiplyScalar(a),d=l.clone().cross(this).multiplyScalar(u),r=l.clone().multiplyScalar(l.clone().dot(this)).multiplyScalar(1-a),o=f.add(d).add(r);return this.x=o.x,this.y=o.y,this.z=o.z,this}setFromMatrixPosition(l){const n=l.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}transformDirection(l){const{x:n}=this,{y:a}=this,{z:u}=this,f=l.elements;return this.x=f[0]*n+f[4]*a+f[8]*u,this.y=f[1]*n+f[5]*a+f[9]*u,this.z=f[2]*n+f[6]*a+f[10]*u,this.normalize()}clone(){return new T(this.x,this.y,this.z)}unproject(l){const n=L;return n.multiplyMatrices(l.matrixWorld,n.getInverse(l.projectionMatrix)),this.applyMatrix4(n)}}x=new T,b=new T,S=new T;class D{constructor(l=1,n=0,a=0,u=0,f=1,d=0,r=0,o=0,v=1){this.elements=new Float32Array(9),this.set(l,n,a,u,f,d,r,o,v)}set(l,n,a,u,f,d,r,o,v){const h=this.elements;return h[0]=l,h[3]=n,h[6]=a,h[1]=u,h[4]=f,h[7]=d,h[2]=r,h[5]=o,h[8]=v,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(l){const n=l.elements;this.set(n[0],n[3],n[6],n[1],n[4],n[7],n[2],n[5],n[8])}multiplyScalar(l){const n=this.elements;return n[0]*=l,n[3]*=l,n[6]*=l,n[1]*=l,n[4]*=l,n[7]*=l,n[2]*=l,n[5]*=l,n[8]*=l,this}getInverse3(l){const n=l.elements,a=this.elements;a[0]=n[4]*n[8]-n[5]*n[7],a[3]=n[6]*n[5]-n[3]*n[8],a[6]=n[3]*n[7]-n[6]*n[4],a[1]=n[7]*n[2]-n[1]*n[8],a[4]=n[0]*n[8]-n[6]*n[2],a[7]=n[1]*n[6]-n[0]*n[7],a[2]=n[1]*n[5]-n[2]*n[4],a[5]=n[2]*n[3]-n[0]*n[5],a[8]=n[0]*n[4]-n[1]*n[3];const u=n[0]*a[0]+n[3]*a[1]+n[6]*a[2];return this.multiplyScalar(1/u),this}getInverse(l,n){const a=l.elements,u=this.elements;u[0]=a[10]*a[5]-a[6]*a[9],u[1]=-a[10]*a[1]+a[2]*a[9],u[2]=a[6]*a[1]-a[2]*a[5],u[3]=-a[10]*a[4]+a[6]*a[8],u[4]=a[10]*a[0]-a[2]*a[8],u[5]=-a[6]*a[0]+a[2]*a[4],u[6]=a[9]*a[4]-a[5]*a[8],u[7]=-a[9]*a[0]+a[1]*a[8],u[8]=a[5]*a[0]-a[1]*a[4];const f=a[0]*u[0]+a[1]*u[3]+a[2]*u[6];if(f===0){const d="Matrix3.getInverse(): can't invert matrix, determinant is 0";if(n)throw new Error(d);return console.warn(d),this.identity(),this}return this.multiplyScalar(1/f),this}getDeterminant(){const l=this.elements;return l[0]*l[4]*l[8]+l[1]*l[5]*l[6]+l[2]*l[3]*l[7]-l[2]*l[4]*l[6]-l[1]*l[3]*l[8]-l[0]*l[5]*l[7]}transpose(){let l;const n=this.elements;return l=n[1],n[1]=n[3],n[3]=l,l=n[2],n[2]=n[6],n[6]=l,l=n[5],n[5]=n[7],n[7]=l,this}clone(){const l=this.elements;return new D(l[0],l[3],l[6],l[1],l[4],l[7],l[2],l[5],l[8])}getMatrix4(){const l=this.elements;return new m(l[0],l[3],l[6],0,l[1],l[4],l[7],0,l[2],l[5],l[8],0)}}class p{constructor(l,n){this.origin=l!==void 0?l:new T,this.direction=n!==void 0?n:new T}set(l,n){return this.origin.copy(l),this.direction.copy(n),this}copy(l){return this.origin.copy(l.origin),this.direction.copy(l.direction),this}at(l,n){return(n||new T).copy(this.direction).multiplyScalar(l).add(this.origin)}recast(l){const n=x;return this.origin.copy(this.at(l,n)),this}closestPointToPoint(l,n){const a=n||new T;a.subVectors(l,this.origin);const u=a.dot(this.direction);return a.copy(this.direction).multiplyScalar(u).add(this.origin)}distanceToPoint(l){const n=x,a=n.subVectors(l,this.origin).dot(this.direction);return n.copy(this.direction).multiplyScalar(a).add(this.origin),n.distanceTo(l)}isIntersectionCylinder(){}isIntersectionSphere(l){return this.distanceToPoint(l.center)<=l.radius}isIntersectionPlane(l){return l.normal.dot(this.direction)!==0||l.distanceToPoint(this.origin)===0}distanceToPlane(l){const n=l.normal.dot(this.direction);return n===0?l.distanceToPoint(this.origin)===0?0:void 0:-(this.origin.dot(l.normal)+l.constant)/n}intersectPlane(l,n){const a=this.distanceToPlane(l);if(a!==void 0)return this.at(a,n)}applyMatrix4(l){return this.direction.add(this.origin).applyMatrix4(l),this.origin.applyMatrix4(l),this.direction.sub(this.origin),this}clone(){return new p().copy(this)}}},"./src/WebGL/math/utils/clamp.ts":(k,R,g)=>{g.r(R),g.d(R,{clamp:()=>M});function M(z,L,B){return Math.min(Math.max(z,L),B)}},"./src/WebGL/math/utils/conversionMatrix3.ts":(k,R,g)=>{g.r(R),g.d(R,{conversionMatrix3:()=>z});var M=g("./src/WebGL/math/math.ts");function z(L,B,x,b,S,m){b=b*Math.PI/180,S=S*Math.PI/180,m=m*Math.PI/180;const T=a=>a*a,D=Math.cos(b),p=Math.cos(S),A=Math.cos(m),l=Math.sin(m);return new M.Matrix3(L,B*A,x*p,0,B*l,x*(D-p*A)/l,0,0,x*Math.sqrt(1-T(D)-T(p)-T(A)+2*D*p*A)/l)}},"./src/WebGL/math/utils/degToRad.ts":(k,R,g)=>{g.r(R),g.d(R,{degToRad:()=>z});const M=Math.PI/180;function z(L){return L*M}},"./src/WebGL/objects/Line.ts":(k,R,g)=>{g.r(R),g.d(R,{Line:()=>B,LineStyle:()=>L});var M=g("./src/WebGL/materials/index.ts"),z=g("./src/WebGL/core/index.ts"),L;(function(x){x[x.LineStrip=0]="LineStrip",x[x.LinePieces=1]="LinePieces"})(L||(L={}));class B extends z.Object3D{constructor(b,S=new M.LineBasicMaterial({color:Math.random()*16777215}),m=L.LineStrip){super(),this.geometry=b,this.material=S,this.type=m}clone(b=new B(this.geometry,this.material,this.type)){return super.clone.call(this,b),b}}},"./src/WebGL/objects/Mesh.ts":(k,R,g)=>{g.r(R),g.d(R,{Mesh:()=>z});var M=g("./src/WebGL/core/index.ts");class z extends M.Object3D{constructor(B,x){super(),this.geometry=B,this.material=x}clone(B){return B===void 0&&(B=new z(this.geometry,this.material)),super.clone.call(this,B),B}}},"./src/WebGL/objects/Sprite.ts":(k,R,g)=>{g.r(R),g.d(R,{Sprite:()=>L});var M=g("./src/WebGL/materials/index.ts"),z=g("./src/WebGL/core/index.ts");class L extends z.Object3D{constructor(x=new M.SpriteMaterial){super(),this.material=x,this.rotation3d=this.rotation,this.rotation=0}updateMatrix(){this.matrix.setPosition(this.position),this.rotation3d.set(0,0,this.rotation),this.matrix.setRotationFromEuler(this.rotation3d),(this.scale.x!==1||this.scale.y!==1)&&this.matrix.scale(this.scale),this.matrixWorldNeedsUpdate=!0}clone(x=new L(this.material)){return z.Object3D.prototype.clone.call(this,x),x}}},"./src/WebGL/objects/index.ts":(k,R,g)=>{g.r(R),g.d(R,{Line:()=>M.Line,LineStyle:()=>M.LineStyle,Mesh:()=>z.Mesh,Sprite:()=>L.Sprite});var M=g("./src/WebGL/objects/Line.ts"),z=g("./src/WebGL/objects/Mesh.ts"),L=g("./src/WebGL/objects/Sprite.ts")},"./src/WebGL/shaders/ShaderType.ts":(k,R,g)=>{g.r(R)},"./src/WebGL/shaders/index.ts":(k,R,g)=>{g.r(R),g.d(R,{ShaderLib:()=>M.ShaderLib,ShaderUtils:()=>z.ShaderUtils,basic:()=>M.basic,clone:()=>z.clone,instanced:()=>M.instanced,lambert:()=>M.lambert,lambertdouble:()=>M.lambertdouble,outline:()=>M.outline,screen:()=>M.screen,screenaa:()=>M.screenaa,sphereimposter:()=>M.sphereimposter,sphereimposteroutline:()=>M.sphereimposteroutline,sprite:()=>M.sprite,stickimposter:()=>M.stickimposter,stickimposteroutline:()=>M.stickimposteroutline,volumetric:()=>M.volumetric});var M=g("./src/WebGL/shaders/lib/index.ts"),z=g("./src/WebGL/shaders/utils/index.ts");g("./src/WebGL/shaders/ShaderType.ts")},"./src/WebGL/shaders/lib/basic/index.ts":(k,R,g)=>{g.r(R),g.d(R,{basic:()=>B});var M=g("./src/WebGL/shaders/lib/basic/uniforms.ts"),z=g("./src/WebGL/shaders/lib/basic/basic.frag"),L=g("./src/WebGL/shaders/lib/basic/basic.vert");const B={vertexShader:L.default.replace("#define GLSLIFY 1",""),fragmentShader:z.default.replace("#define GLSLIFY 1",""),uniforms:M.uniforms}},"./src/WebGL/shaders/lib/basic/uniforms.ts":(k,R,g)=>{g.r(R),g.d(R,{uniforms:()=>z});var M=g("./src/colors.ts");const z={opacity:{type:"f",value:1},fogColor:{type:"c",value:new M.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3}}},"./src/WebGL/shaders/lib/blur/index.ts":(k,R,g)=>{g.r(R),g.d(R,{blur:()=>B});var M=g("./src/WebGL/shaders/lib/blur/uniforms.ts"),z=g("./src/WebGL/shaders/lib/blur/blur.frag"),L=g("./src/WebGL/shaders/lib/blur/blur.vert");const B={fragmentShader:z.default,vertexShader:L.default,uniforms:M.uniforms}},"./src/WebGL/shaders/lib/blur/uniforms.ts":(k,R,g)=>{g.r(R),g.d(R,{uniforms:()=>M});const M={}},"./src/WebGL/shaders/lib/index.ts":(k,R,g)=>{g.r(R),g.d(R,{ShaderLib:()=>u,basic:()=>M.basic,instanced:()=>z.instanced,lambert:()=>L.lambert,lambertdouble:()=>B.lambertdouble,outline:()=>x.outline,screen:()=>b.screen,screenaa:()=>S.screenaa,sphereimposter:()=>m.sphereimposter,sphereimposteroutline:()=>T.sphereimposteroutline,sprite:()=>D.sprite,stickimposter:()=>p.stickimposter,stickimposteroutline:()=>A.stickimposteroutline,volumetric:()=>l.volumetric});var M=g("./src/WebGL/shaders/lib/basic/index.ts"),z=g("./src/WebGL/shaders/lib/instanced/index.ts"),L=g("./src/WebGL/shaders/lib/lambert/index.ts"),B=g("./src/WebGL/shaders/lib/lambertdouble/index.ts"),x=g("./src/WebGL/shaders/lib/outline/index.ts"),b=g("./src/WebGL/shaders/lib/screen/index.ts"),S=g("./src/WebGL/shaders/lib/screenaa/index.ts"),m=g("./src/WebGL/shaders/lib/sphereimposter/index.ts"),T=g("./src/WebGL/shaders/lib/sphereimposteroutline/index.ts"),D=g("./src/WebGL/shaders/lib/sprite/index.ts"),p=g("./src/WebGL/shaders/lib/stickimposter/index.ts"),A=g("./src/WebGL/shaders/lib/stickimposteroutline/index.ts"),l=g("./src/WebGL/shaders/lib/volumetric/index.ts"),n=g("./src/WebGL/shaders/lib/ssao/index.ts"),a=g("./src/WebGL/shaders/lib/blur/index.ts");const u={basic:M.basic,blur:a.blur,instanced:z.instanced,lambert:L.lambert,lambertdouble:B.lambertdouble,outline:x.outline,screen:b.screen,screenaa:S.screenaa,ssao:n.ssao,sphereimposter:m.sphereimposter,sphereimposteroutline:T.sphereimposteroutline,sprite:D.sprite,stickimposter:p.stickimposter,stickimposteroutline:A.stickimposteroutline,volumetric:l.volumetric}},"./src/WebGL/shaders/lib/instanced/index.ts":(k,R,g)=>{g.r(R),g.d(R,{instanced:()=>B});var M=g("./src/WebGL/shaders/lib/instanced/uniforms.ts"),z=g("./src/WebGL/shaders/lib/instanced/instanced.frag"),L=g("./src/WebGL/shaders/lib/instanced/instanced.vert");const B={fragmentShader:z.default.replace("#define GLSLIFY 1",""),vertexShader:L.default.replace("#define GLSLIFY 1",""),uniforms:M.uniforms}},"./src/WebGL/shaders/lib/instanced/uniforms.ts":(k,R,g)=>{g.r(R),g.d(R,{uniforms:()=>z});var M=g("./src/colors.ts");const z={opacity:{type:"f",value:1},fogColor:{type:"c",value:new M.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}},"./src/WebGL/shaders/lib/lambert/index.ts":(k,R,g)=>{g.r(R),g.d(R,{lambert:()=>B});var M=g("./src/WebGL/shaders/lib/lambert/uniforms.ts"),z=g("./src/WebGL/shaders/lib/lambert/lambert.frag"),L=g("./src/WebGL/shaders/lib/lambert/lambert.vert");const B={fragmentShader:z.default.replace("#define GLSLIFY 1",""),vertexShader:L.default.replace("#define GLSLIFY 1",""),uniforms:M.uniforms}},"./src/WebGL/shaders/lib/lambert/uniforms.ts":(k,R,g)=>{g.r(R),g.d(R,{uniforms:()=>z});var M=g("./src/colors.ts");const z={opacity:{type:"f",value:1},fogColor:{type:"c",value:new M.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}},"./src/WebGL/shaders/lib/lambertdouble/index.ts":(k,R,g)=>{g.r(R),g.d(R,{lambertdouble:()=>B});var M=g("./src/WebGL/shaders/lib/lambertdouble/uniforms.ts"),z=g("./src/WebGL/shaders/lib/lambertdouble/lambertdouble.frag"),L=g("./src/WebGL/shaders/lib/lambertdouble/lambertdouble.vert");const B={fragmentShader:z.default.replace("#define GLSLIFY 1",""),vertexShader:L.default.replace("#define GLSLIFY 1",""),uniforms:M.uniforms}},"./src/WebGL/shaders/lib/lambertdouble/uniforms.ts":(k,R,g)=>{g.r(R),g.d(R,{uniforms:()=>z});var M=g("./src/colors.ts");const z={opacity:{type:"f",value:1},fogColor:{type:"c",value:new M.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}},"./src/WebGL/shaders/lib/outline/index.ts":(k,R,g)=>{g.r(R),g.d(R,{outline:()=>B});var M=g("./src/WebGL/shaders/lib/outline/uniforms.ts"),z=g("./src/WebGL/shaders/lib/outline/outline.frag"),L=g("./src/WebGL/shaders/lib/outline/outline.vert");const B={fragmentShader:z.default.replace("#define GLSLIFY 1",""),vertexShader:L.default.replace("#define GLSLIFY 1",""),uniforms:M.uniforms}},"./src/WebGL/shaders/lib/outline/uniforms.ts":(k,R,g)=>{g.r(R),g.d(R,{uniforms:()=>z});var M=g("./src/colors.ts");const z={opacity:{type:"f",value:1},outlineColor:{type:"c",value:new M.Color(0,0,0)},fogColor:{type:"c",value:new M.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},outlineWidth:{type:"f",value:.1},outlinePushback:{type:"f",value:1},outlineMaxPixels:{type:"f",value:0}}},"./src/WebGL/shaders/lib/screen/index.ts":(k,R,g)=>{g.r(R),g.d(R,{screen:()=>B});var M=g("./src/WebGL/shaders/lib/screen/uniforms.ts"),z=g("./src/WebGL/shaders/lib/screen/screen.frag"),L=g("./src/WebGL/shaders/lib/screen/screen.vert");const B={fragmentShader:z.default.replace("#define GLSLIFY 1",""),vertexShader:L.default.replace("#define GLSLIFY 1",""),uniforms:M.uniforms}},"./src/WebGL/shaders/lib/screen/uniforms.ts":(k,R,g)=>{g.r(R),g.d(R,{uniforms:()=>M});const M={}},"./src/WebGL/shaders/lib/screenaa/index.ts":(k,R,g)=>{g.r(R),g.d(R,{screenaa:()=>B});var M=g("./src/WebGL/shaders/lib/screenaa/uniforms.ts"),z=g("./src/WebGL/shaders/lib/screenaa/screenaa.frag"),L=g("./src/WebGL/shaders/lib/screenaa/screenaa.vert");const B={fragmentShader:z.default.replace("#define GLSLIFY 1",""),vertexShader:L.default.replace("#define GLSLIFY 1",""),uniforms:M.uniforms}},"./src/WebGL/shaders/lib/screenaa/uniforms.ts":(k,R,g)=>{g.r(R),g.d(R,{uniforms:()=>M});const M={}},"./src/WebGL/shaders/lib/sphereimposter/index.ts":(k,R,g)=>{g.r(R),g.d(R,{sphereimposter:()=>B});var M=g("./src/WebGL/shaders/lib/sphereimposter/uniforms.ts"),z=g("./src/WebGL/shaders/lib/sphereimposter/sphereimposter.frag"),L=g("./src/WebGL/shaders/lib/sphereimposter/sphereimposter.vert");const B={vertexShader:L.default.replace("#define GLSLIFY 1",""),fragmentShader:z.default.replace("#define GLSLIFY 1",""),uniforms:M.uniforms}},"./src/WebGL/shaders/lib/sphereimposter/uniforms.ts":(k,R,g)=>{g.r(R),g.d(R,{uniforms:()=>z});var M=g("./src/colors.ts");const z={opacity:{type:"f",value:1},fogColor:{type:"c",value:new M.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}},"./src/WebGL/shaders/lib/sphereimposteroutline/index.ts":(k,R,g)=>{g.r(R),g.d(R,{sphereimposteroutline:()=>B});var M=g("./src/WebGL/shaders/lib/sphereimposteroutline/uniforms.ts"),z=g("./src/WebGL/shaders/lib/sphereimposteroutline/sphereimposteroutline.frag"),L=g("./src/WebGL/shaders/lib/sphereimposteroutline/sphereimposteroutline.vert");const B={fragmentShader:z.default.replace("#define GLSLIFY 1",""),vertexShader:L.default.replace("#define GLSLIFY 1",""),uniforms:M.uniforms}},"./src/WebGL/shaders/lib/sphereimposteroutline/uniforms.ts":(k,R,g)=>{g.r(R),g.d(R,{uniforms:()=>z});var M=g("./src/colors.ts");const z={opacity:{type:"f",value:1},outlineColor:{type:"c",value:new M.Color(0,0,0)},fogColor:{type:"c",value:new M.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},outlineWidth:{type:"f",value:.1},outlinePushback:{type:"f",value:1},outlineMaxPixels:{type:"f",value:0}}},"./src/WebGL/shaders/lib/sprite/index.ts":(k,R,g)=>{g.r(R),g.d(R,{sprite:()=>B});var M=g("./src/WebGL/shaders/lib/sprite/uniforms.ts"),z=g("./src/WebGL/shaders/lib/sprite/sprite.frag"),L=g("./src/WebGL/shaders/lib/sprite/sprite.vert");const B={fragmentShader:z.default.replace("#define GLSLIFY 1",""),vertexShader:L.default.replace("#define GLSLIFY 1",""),uniforms:M.uniforms}},"./src/WebGL/shaders/lib/sprite/uniforms.ts":(k,R,g)=>{g.r(R),g.d(R,{uniforms:()=>M});const M={}},"./src/WebGL/shaders/lib/ssao/index.ts":(k,R,g)=>{g.r(R),g.d(R,{ssao:()=>B});var M=g("./src/WebGL/shaders/lib/ssao/uniforms.ts"),z=g("./src/WebGL/shaders/lib/ssao/ssao.frag"),L=g("./src/WebGL/shaders/lib/ssao/ssao.vert");const B={fragmentShader:z.default,vertexShader:L.default,uniforms:M.uniforms}},"./src/WebGL/shaders/lib/ssao/uniforms.ts":(k,R,g)=>{g.r(R),g.d(R,{uniforms:()=>M});const M={total_strength:{type:"f",value:1},radius:{type:"f",value:5},projinv:{type:"mat4",value:[]}}},"./src/WebGL/shaders/lib/stickimposter/index.ts":(k,R,g)=>{g.r(R),g.d(R,{stickimposter:()=>b});var M=g("./src/WebGL/shaders/lib/stickimposter/uniforms.ts"),z=g("./src/WebGL/shaders/lib/stickimposter/stickimposterFragmentShader.partial.frag"),L=g("./src/WebGL/shaders/lib/stickimposter/stickimposter.partial.frag"),B=g("./src/WebGL/shaders/lib/stickimposter/stickimposter.vert");const b={fragmentShader:[z.default,L.default].join(`
`),vertexShader:B.default,uniforms:M.uniforms}},"./src/WebGL/shaders/lib/stickimposter/uniforms.ts":(k,R,g)=>{g.r(R),g.d(R,{uniforms:()=>z});var M=g("./src/colors.ts");const z={opacity:{type:"f",value:1},fogColor:{type:"c",value:new M.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}},"./src/WebGL/shaders/lib/stickimposteroutline/index.ts":(k,R,g)=>{g.r(R),g.d(R,{stickimposteroutline:()=>x});var M=g("./src/WebGL/shaders/lib/stickimposteroutline/uniforms.ts"),z=g("./src/WebGL/shaders/lib/stickimposter/stickimposterFragmentShader.partial.frag"),L=g("./src/WebGL/shaders/lib/stickimposteroutline/stickimposteroutline.vert");const x={fragmentShader:z.default+"gl_FragColor = vec4(color,1.0);}",vertexShader:L.default,uniforms:M.uniforms}},"./src/WebGL/shaders/lib/stickimposteroutline/uniforms.ts":(k,R,g)=>{g.r(R),g.d(R,{uniforms:()=>z});var M=g("./src/colors.ts");const z={opacity:{type:"f",value:1},fogColor:{type:"c",value:new M.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},outlineColor:{type:"c",value:new M.Color(0,0,0)},outlineWidth:{type:"f",value:.1},outlinePushback:{type:"f",value:1},outlineMaxPixels:{type:"f",value:0},projinv:{type:"mat4",value:[]}}},"./src/WebGL/shaders/lib/volumetric/index.ts":(k,R,g)=>{g.r(R),g.d(R,{volumetric:()=>B});var M=g("./src/WebGL/shaders/lib/volumetric/uniforms.ts"),z=g("./src/WebGL/shaders/lib/volumetric/volumetric.frag"),L=g("./src/WebGL/shaders/lib/volumetric/volumetric.vert");const B={fragmentShader:z.default.replace("#define GLSLIFY 1",""),vertexShader:L.default.replace("#define GLSLIFY 1",""),uniforms:M.uniforms}},"./src/WebGL/shaders/lib/volumetric/uniforms.ts":(k,R,g)=>{g.r(R),g.d(R,{uniforms:()=>z});var M=g("./src/colors.ts");const z={opacity:{type:"f",value:1},fogColor:{type:"c",value:new M.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},data:{type:"i",value:3},colormap:{type:"i",value:4},depthmap:{type:"i",value:5},step:{type:"f",value:1},maxdepth:{type:"f",value:100},subsamples:{type:"f",value:5},textmat:{type:"mat4",value:[]},projinv:{type:"mat4",value:[]},transfermin:{type:"f",value:-.2},transfermax:{type:"f",value:.2}}},"./src/WebGL/shaders/utils/clone.ts":(k,R,g)=>{g.r(R),g.d(R,{clone:()=>z});var M=g("./src/colors.ts");function z(L){let B={};for(const b in L){B[b]={},B[b].type=L[b].type;var x=L[b].value;x instanceof M.Color?B[b].value=x.clone():typeof x=="number"?B[b].value=x:x instanceof Array?B[b].value=[]:console.error("Error copying shader uniforms from ShaderLib: unknown type for uniform")}return B}},"./src/WebGL/shaders/utils/index.ts":(k,R,g)=>{g.r(R),g.d(R,{ShaderUtils:()=>z,clone:()=>M.clone});var M=g("./src/WebGL/shaders/utils/clone.ts");const z={clone:M.clone}},"./src/WebGL/shapes/Cylinder.ts":(k,R,g)=>{g.r(R),g.d(R,{Cylinder:()=>L});var M=g("./src/WebGL/math/index.ts");let z=new M.Vector3;class L{constructor(x=new M.Vector3,b=new M.Vector3,S=0){this.c1=x,this.c2=b,this.radius=S,this.direction=new M.Vector3().subVectors(this.c2,this.c1).normalize()}copy(x){return this.c1.copy(x.c1),this.c2.copy(x.c2),this.direction.copy(x.direction),this.radius=x.radius,this}lengthSq(){return z.subVectors(this.c2,this.c1).lengthSq()}applyMatrix4(x){return this.direction.add(this.c1).applyMatrix4(x),this.c1.applyMatrix4(x),this.c2.applyMatrix4(x),this.direction.sub(this.c1).normalize(),this.radius=this.radius*x.getMaxScaleOnAxis(),this}}},"./src/WebGL/shapes/Sphere.ts":(k,R,g)=>{g.r(R),g.d(R,{Sphere:()=>z});var M=g("./src/WebGL/math/index.ts");class z{constructor(B={x:0,y:0,z:0},x=0){this.center=new M.Vector3(B.x,B.y,B.z),this.radius=x}set(B,x){return this.center.copy(B),this.radius=x,this}copy(B){return this.center.copy(B.center),this.radius=B.radius,this}applyMatrix4(B){return this.center.applyMatrix4(B),this.radius=this.radius*B.getMaxScaleOnAxis(),this}translate(B){return this.center.add(B),this}equals(B){return B.center.equals(this.center)&&B.radius===this.radius}clone(){return new z().copy(this)}}},"./src/WebGL/shapes/Triangle.ts":(k,R,g)=>{g.r(R),g.d(R,{Triangle:()=>L});var M=g("./src/WebGL/math/index.ts");const z=new M.Vector3;class L{constructor(x=new M.Vector3,b=new M.Vector3,S=new M.Vector3){this.a=x,this.b=b,this.c=S}copy(x){return this.a.copy(x.a),this.b.copy(x.b),this.c.copy(x.c),this}applyMatrix4(x){return this.a.applyMatrix4(x),this.b.applyMatrix4(x),this.c.applyMatrix4(x),this}getNormal(){var x=this.a.clone();return x.sub(this.b),z.subVectors(this.c,this.b),x.cross(z),x.normalize(),x}}},"./src/WebGL/shapes/index.ts":(k,R,g)=>{g.r(R),g.d(R,{Cylinder:()=>z.Cylinder,Sphere:()=>M.Sphere,Triangle:()=>L.Triangle});var M=g("./src/WebGL/shapes/Sphere.ts"),z=g("./src/WebGL/shapes/Cylinder.ts"),L=g("./src/WebGL/shapes/Triangle.ts")},"./src/autoload.ts":(k,R,g)=>{g.r(R),g.d(R,{autoinit:()=>x,autoload:()=>m,processing_autoinit:()=>b,viewers:()=>S});var M=g("./src/GLViewer.ts"),z=g("./src/ProteinSurface4.ts"),L=g("./src/utilities.ts"),B=g("./src/colors.ts"),x=!1,b=!1,S={};function m(T,D){var p,A,l;if(document.querySelector(".viewer_3Dmoljs")!=null&&(x=!0),x){b=!0,T=T??null;var n=0;document.querySelectorAll(".viewer_3Dmoljs").forEach(a=>{var u=[],f=[],d="";a.style.position=="static"&&(a.style.position="relative");var r=null;if(l=null,a.dataset.pdb)u.push("https://files.rcsb.org/view/"+a.dataset.pdb+".pdb"),f.push("pdb");else if(a.dataset.cid)f.push("sdf"),u.push("https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/"+a.dataset.cid+"/SDF?record_type=3d");else if(a.dataset.href||a.dataset.url){if(a.dataset.href?d=a.dataset.href:d=a.dataset.url,u.push(d),l=d.substring(d.lastIndexOf(".")+1),l=="gz"){let be=d.substring(0,d.lastIndexOf(".")).lastIndexOf(".");l=d.substring(be+1)}f.push(l);var o=d.substring(d.lastIndexOf("/")+1,d.lastIndexOf("."));o=="/"&&(o=d.substring(d.lastIndexOf("/")+1)),a.dataset[f[f.length-1]]=o}let v=a.dataset;for(p in v)p.substring(0,3)==="pdb"&&p!=="pdb"?(u.push("https://files.rcsb.org/view/"+v[p]+".pdb"),f.push("pdb")):p.substring(0,4)==="href"&&p!=="href"?(d=v[p],u.push(d),f.push(d.substring(d.lastIndexOf(".")+1))):p.substring(0,3)==="cid"&&p!=="cid"&&(u.push("https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/"+v[p]+"/SDF?record_type=3d"),f.push("sdf"));var h={};a.dataset.options&&(h=(0,L.specStringToObject)(a.dataset.options));var y=B.CC.color(a.dataset.backgroundcolor),E=a.dataset.backgroundalpha;E=E==null?1:parseFloat(E);var w={line:{}};a.dataset.style&&(w=(0,L.specStringToObject)(a.dataset.style));var W={};a.dataset.select&&(W=(0,L.specStringToObject)(a.dataset.select));var P=[],j=[],V=[],G={},F=null,H=a.dataset,K=/style(.+)/,U=/surface(.*)/,N=/labelres(.*)/,Y=[];for(A in H)Object.prototype.hasOwnProperty.call(H,A)&&Y.push(A);for(Y.sort(),p=0;p<Y.length;p++){A=Y[p];var ne=K.exec(A),ae,he,oe;ne&&(ae="select"+ne[1],he=(0,L.specStringToObject)(H[ae]),oe=(0,L.specStringToObject)(H[A]),P.push([he,oe])),ne=U.exec(A),ne&&(ae="select"+ne[1],he=(0,L.specStringToObject)(H[ae]),oe=(0,L.specStringToObject)(H[A]),j.push([he,oe])),ne=N.exec(A),ne&&(ae="select"+ne[1],he=(0,L.specStringToObject)(H[ae]),oe=(0,L.specStringToObject)(H[A]),V.push([he,oe])),A=="zoomto"&&(G=(0,L.specStringToObject)(H[A])),A=="spin"&&(F=(0,L.specStringToObject)(H[A]))}var pe=function(be){for(be.setStyle(W,w),r&&r.createSelectionAndStyle(W,w),p=0;p<P.length;p++){let fe=P[p][0]||{},De=P[p][1]||{line:{}};be.setStyle(fe,De),r&&r.createSelectionAndStyle(W,w)}for(p=0;p<j.length;p++){let fe=j[p][0]||{},De=j[p][1]||{};r?be.addSurface(z.SurfaceType.VDW,De,fe,fe).then(Xe=>{r.loadSurface("VDW",fe,De,Xe)}):be.addSurface(z.SurfaceType.VDW,De,fe,fe)}for(p=0;p<V.length;p++){let fe=V[p][0]||{},De=V[p][1]||{};be.addResLabels(fe,De)}be.render(),be.zoomTo(G),F&&be.spin(F.axis,F.speed)};let ue=T;try{var ge=(0,L.specStringToObject)(a.dataset.config)||{};ge.backgroundColor===void 0&&(ge.backgroundColor=y),ge.backgroundAlpha===void 0&&(ge.backgroundAlpha=E),ue==null?ue=S[a.id||n++]=(0,M.createViewer)(a,ge):(ue.setBackgroundColor(y,E),ue.setConfig(ge),r&&r.initiateUI()),a.dataset.ui&&$3Dmol.StateManager&&(r=new $3Dmol.StateManager(ue))}catch(be){console.log(be),a.textContent="WebGL appears to be disabled."}if(u.length!=0){let be=0,fe=((De,Ve)=>function(Xe){d=u[be];var it=De.dataset.type||De.dataset.datatype||f[be];if(Ve.addModel(Xe,it,h),r){var nt=De.dataset[f[be]];r.setModelTitle(nt)}be+=1,be<u.length?(0,L.get)(u[be]).then(fe):(pe(Ve),De.dataset.callback&&(0,L.makeFunction)(De.dataset.callback)(Ve),b=!1,D&&D(Ve))})(a,ue);l&&l.endsWith("gz")?(0,L.getbin)(u[0]).then(fe):(0,L.get)(u[0]).then(fe)}else{if(a.dataset.element){var Fe="#"+a.dataset.element,Be=document.querySelector(Fe),ke=Be?Be.textContent:"";l=a.dataset.type||a.dataset.datatype,ue.addModel(ke,l,h)}pe(ue),a.dataset.callback&&(0,L.makeFunction)(a.dataset.callback)(ue),b=!1,D&&D(ue)}})}}document.onreadystatechange=()=>{document.readyState==="complete"&&m()}},"./src/colors.ts":(k,R,g)=>{g.r(R),g.d(R,{CC:()=>z,Color:()=>M,builtinColorSchemes:()=>T,chains:()=>m,elementColors:()=>b,htmlColors:()=>L,residues:()=>S,ssColors:()=>B});class M{constructor(p,A,l){return this.r=0,this.g=0,this.b=0,arguments.length>1&&typeof p=="number"?(this.r=p||0,this.g=A||0,this.b=l||0,this):this.set(p||0)}set(p){return p instanceof M?p.clone():(typeof p=="number"?this.setHex(p):typeof p=="object"&&(this.r=(p==null?void 0:p.r)||0,this.g=(p==null?void 0:p.g)||0,this.b=(p==null?void 0:p.b)||0),this)}setHex(p){return p=Math.floor(p),this.r=(p>>16&255)/255,this.g=(p>>8&255)/255,this.b=(p&255)/255,this}getHex(){var p=Math.round(this.r*255),A=Math.round(this.g*255),l=Math.round(this.b*255);return p<<16|A<<8|l}clone(){return new M(this.r,this.g,this.b)}copy(p){return this.r=p.r,this.g=p.g,this.b=p.b,this}scaled(){var p={};return p.r=Math.round(this.r*255),p.g=Math.round(this.g*255),p.b=Math.round(this.b*255),p.a=1,p}}class z{static color(p){if(!p)return z.cache[0];if(p instanceof M)return p;if(typeof p=="number"&&typeof z.cache[p]<"u")return z.cache[p];if(p&&Array.isArray(p))return p.map(z.color);let A=z.getHex(p),l=new M(A);return z.cache[A]=l,l}static getHex(p){var A;if(Array.isArray(p))return p.map(z.getHex);if(typeof p=="string"){let l=p;if(!isNaN(parseInt(l)))return parseInt(l);if(l=l.trim(),l.length==4&&l[0]=="#"&&(l="#"+l[1]+l[1]+l[2]+l[2]+l[3]+l[3]),l.length==7&&l[0]=="#")return parseInt(l.substring(1),16);let n=z.rgbRegEx.exec(l);if(n){n[1]!=""&&console.log("WARNING: Opacity value in rgba ignored.  Specify separately as opacity attribute.");let a=0;for(let u=2;u<5;u++){a*=256;let f=n[u].endsWith("%")?255*parseFloat(n[u])/100:parseFloat(n[u]);a+=Math.round(f)}return a}return((A=window==null?void 0:window.$3Dmol)===null||A===void 0?void 0:A.htmlColors[p.toLowerCase()])||0}return p}}z.rgbRegEx=/rgb(a?)\(\s*([^ ,\)\t]+)\s*,\s*([^ ,\)\t]+)\s*,\s*([^ ,\)\t]+)/i,z.cache={0:new M(0)};const L={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgrey:11119017,darkgreen:25600,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,grey:8421504,green:32768,greenyellow:11403055,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgrey:13882323,lightgreen:9498256,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},B={pyMol:{h:16711680,s:16776960,c:65280},Jmol:{h:16711808,s:16762880,c:16777215}},x={H:16777215,He:16761035,HE:16761035,Li:11674146,LI:11674146,B:65280,C:13158600,N:9408511,O:15728640,F:14329120,Na:255,NA:255,Mg:2263842,MG:2263842,Al:8421520,AL:8421520,Si:14329120,SI:14329120,P:16753920,S:16762930,Cl:65280,CL:65280,Ca:8421520,CA:8421520,Ti:8421520,TI:8421520,Cr:8421520,CR:8421520,Mn:8421520,MN:8421520,Fe:16753920,FE:16753920,Ni:10824234,NI:10824234,Cu:10824234,CU:10824234,Zn:10824234,ZN:10824234,Br:10824234,BR:10824234,Ag:8421520,AG:8421520,I:10494192,Ba:16753920,BA:16753920,Au:14329120,AU:14329120},b={defaultColor:16716947,Jmol:{H:16777215,He:14286847,HE:14286847,Li:13402367,LI:13402367,Be:12779264,BE:12779264,B:16758197,C:9474192,N:3166456,O:16715021,F:9494608,Ne:11789301,NE:11789301,Na:11230450,NA:11230450,Mg:9109248,MG:9109248,Al:12560038,AL:12560038,Si:1578e4,SI:1578e4,P:16744448,S:16777008,Cl:2093087,CL:2093087,Ar:8442339,AR:8442339,K:9388244,Ca:4062976,CA:4062976,Sc:15132390,SC:15132390,Ti:12567239,TI:12567239,V:10921643,Cr:9083335,CR:9083335,Mn:10255047,MN:10255047,Fe:14706227,FE:14706227,Co:15765664,CO:15765664,Ni:5296208,NI:5296208,Cu:13140019,CU:13140019,Zn:8224944,ZN:8224944,Ga:12750735,GA:12750735,Ge:6721423,GE:6721423,As:12419299,AS:12419299,Se:16752896,SE:16752896,Br:10889513,BR:10889513,Kr:6076625,KR:6076625,Rb:7351984,RB:7351984,Sr:65280,SR:65280,Y:9764863,Zr:9756896,ZR:9756896,Nb:7586505,NB:7586505,Mo:5551541,MO:5551541,Tc:3907230,TC:3907230,Ru:2396047,RU:2396047,Rh:687500,RH:687500,Pd:27013,PD:27013,Ag:12632256,AG:12632256,Cd:16767375,CD:16767375,In:10909043,IN:10909043,Sn:6717568,SN:6717568,Sb:10380213,SB:10380213,Te:13924864,TE:13924864,I:9699476,Xe:4366e3,XE:4366e3,Cs:5707663,CS:5707663,Ba:51456,BA:51456,La:7394559,LA:7394559,Ce:16777159,CE:16777159,Pr:14286791,PR:14286791,Nd:13107143,ND:13107143,Pm:10747847,PM:10747847,Sm:9437127,SM:9437127,Eu:6422471,EU:6422471,Gd:4587463,GD:4587463,Tb:3211207,TB:3211207,Dy:2097095,DY:2097095,Ho:65436,HO:65436,Er:58997,ER:58997,Tm:54354,TM:54354,Yb:48952,YB:48952,Lu:43812,LU:43812,Hf:5096191,HF:5096191,Ta:5089023,TA:5089023,W:2200790,Re:2522539,RE:2522539,Os:2516630,OS:2516630,Ir:1528967,IR:1528967,Pt:13684960,PT:13684960,Au:16765219,AU:16765219,Hg:12105936,HG:12105936,Tl:10900557,TL:10900557,Pb:5724513,PB:5724513,Bi:10375093,BI:10375093,Po:11230208,PO:11230208,At:7688005,AT:7688005,Rn:4358806,RN:4358806,Fr:4325478,FR:4325478,Ra:32e3,RA:32e3,Ac:7384058,AC:7384058,Th:47871,TH:47871,Pa:41471,PA:41471,U:36863,Np:33023,NP:33023,Pu:27647,PU:27647,Am:5528818,AM:5528818,Cm:7888099,CM:7888099,Bk:9064419,BK:9064419,Cf:10565332,CF:10565332,Es:11739092,ES:11739092,Fm:11739066,FM:11739066,Md:11734438,MD:11734438,No:12389767,NO:12389767,Lr:13041766,LR:13041766,Rf:13369433,RF:13369433,Db:13697103,DB:13697103,Sg:14221381,SG:14221381,Bh:14680120,BH:14680120,Hs:15073326,HS:15073326,Mt:15400998,MT:15400998},rasmol:x,defaultColors:Object.assign({},x),greenCarbon:Object.assign(Object.assign({},x),{C:65280}),cyanCarbon:Object.assign(Object.assign({},x),{C:65535}),magentaCarbon:Object.assign(Object.assign({},x),{C:16711935}),yellowCarbon:Object.assign(Object.assign({},x),{C:16776960}),whiteCarbon:Object.assign(Object.assign({},x),{C:16777215}),orangeCarbon:Object.assign(Object.assign({},x),{C:16753920}),purpleCarbon:Object.assign(Object.assign({},x),{C:8388736}),blueCarbon:Object.assign(Object.assign({},x),{C:255})},S={amino:{ALA:13158600,ARG:1334015,ASN:56540,ASP:15075850,CYS:15132160,GLN:56540,GLU:15075850,GLY:15461355,HIS:8553170,ILE:1016335,LEU:1016335,LYS:1334015,MET:15132160,PHE:3289770,PRO:14456450,SER:16422400,THR:16422400,TRP:11819700,TYR:3289770,VAL:1016335,ASX:16738740,GLX:16738740},shapely:{ALA:9240460,ARG:124,ASN:16743536,ASP:10485826,CYS:16777072,GLN:16731212,GLU:6684672,GLY:16777215,HIS:7368959,ILE:19456,LEU:4546117,LYS:4671416,MET:12099650,PHE:5459026,PRO:5395026,SER:16740418,THR:12078080,TRP:5195264,TYR:9203788,VAL:16747775,ASX:16711935,GLX:16711935},nucleic:{A:10526975,G:16740464,I:8454143,C:16747595,T:10551200,U:16744576}},m={atom:{A:12636415,B:11599792,C:16761032,D:16777088,E:16761087,F:11596016,G:16765040,H:15761536,I:16113331,J:49151,K:13458524,L:6737322,M:10145074,N:15631086,O:52945,P:65407,Q:3978097,R:139,S:12433259,T:25600,U:8388608,V:8421376,W:8388736,X:32896,Y:12092939,Z:11674146},hetatm:{A:9478351,B:8441752,C:13602992,D:13619056,E:13603023,F:8437952,G:13607008,H:12603504,I:12955267,J:42959,K:11881548,L:5682578,M:9090346,N:12481214,O:46753,P:53103,Q:3447649,R:187,S:10854235,T:37888,U:11534336,V:11579392,W:11534512,X:45232,Y:15250963,Z:12726834}},T={ssPyMol:{prop:"ss",map:B.pyMol},ssJmol:{prop:"ss",map:B.Jmol},Jmol:{prop:"elem",map:b.Jmol},amino:{prop:"resn",map:S.amino},shapely:{prop:"resn",map:S.shapely},nucleic:{prop:"resn",map:S.nucleic},chain:{prop:"chain",map:m.atom},rasmol:{prop:"elem",map:b.rasmol},default:{prop:"elem",map:b.defaultColors},greenCarbon:{prop:"elem",map:b.greenCarbon},chainHetatm:{prop:"chain",map:m.hetatm},cyanCarbon:{prop:"elem",map:b.cyanCarbon},magentaCarbon:{prop:"elem",map:b.magentaCarbon},purpleCarbon:{prop:"elem",map:b.purpleCarbon},whiteCarbon:{prop:"elem",map:b.whiteCarbon},orangeCarbon:{prop:"elem",map:b.orangeCarbon},yellowCarbon:{prop:"elem",map:b.yellowCarbon},blueCarbon:{prop:"elem",map:b.blueCarbon}}},"./src/glcartoon.ts":(k,R,g)=>{g.r(R),g.d(R,{drawCartoon:()=>W,subdivide_spline:()=>m});var M=g("./src/WebGL/math/index.ts"),z=g("./src/WebGL/shapes/index.ts"),L=g("./src/WebGL/index.ts"),B=g("./src/Gradient.ts"),x=g("./src/colors.ts"),b=g("./src/GLDraw.ts"),S=g("./src/utilities.ts");function m(P,j){var V=[],G=P;G=[],G.push(P[0]);var F,H,K,U,N,Y,ne,ae,he;for(F=1,H=P.length-1;F<H;F++)if(N=P[F],Y=P[F+1],N.smoothen){var oe=new M.Vector3((N.x+Y.x)/2,(N.y+Y.y)/2,(N.z+Y.z)/2);oe.atom=N.atom,G.push(oe)}else G.push(N);for(G.push(P[P.length-1]),F=-1,K=G.length;F<=K-3;F++)if(U=G[F===-1?0:F],N=G[F+1],Y=G[F+2],ne=G[F===K-3?K-1:F+3],ae=new M.Vector3().subVectors(Y,U).multiplyScalar(.5),he=new M.Vector3().subVectors(ne,N).multiplyScalar(.5),!Y.skip)for(var pe=0;pe<j;pe++){var ue=1/j*pe,ge=N.x+ue*ae.x+ue*ue*(-3*N.x+3*Y.x-2*ae.x-he.x)+ue*ue*ue*(2*N.x-2*Y.x+ae.x+he.x),Fe=N.y+ue*ae.y+ue*ue*(-3*N.y+3*Y.y-2*ae.y-he.y)+ue*ue*ue*(2*N.y-2*Y.y+ae.y+he.y),Be=N.z+ue*ae.z+ue*ue*(-3*N.z+3*Y.z-2*ae.z-he.z)+ue*ue*ue*(2*N.z-2*Y.z+ae.z+he.z),ke=new M.Vector3(ge,Fe,Be);pe<j/2?ke.atom=N.atom:ke.atom=Y.atom,V.push(ke)}return V.push(G[G.length-1]),V}const T=.5,D=1.3,p=.8,A=.4,l=.4;function n(P,j,V,G){for(var F,H,K,U,N=0,Y=j.length;N<Y;N++){U=Math.round(N*(G.length-1)/Y),K=x.CC.color(G[U]);var ne=P.updateGeoGroup(2),ae=ne.vertexArray,he=ne.colorArray,oe=ne.faceArray;F=ne.vertices,H=F*3,ae[H]=j[N].x,ae[H+1]=j[N].y,ae[H+2]=j[N].z,ae[H+3]=V[N].x,ae[H+4]=V[N].y,ae[H+5]=V[N].z;for(var pe=0;pe<6;++pe)he[H+3*pe]=K.r,he[H+1+3*pe]=K.g,he[H+2+3*pe]=K.b;if(N>0){var ue=[F,F+1,F-1,F-2],ge=ne.faceidx;oe[ge]=ue[0],oe[ge+1]=ue[1],oe[ge+2]=ue[3],oe[ge+3]=ue[1],oe[ge+4]=ue[2],oe[ge+5]=ue[3],ne.faceidx+=6}ne.vertices+=2}}function a(P,j,V,G,F,H,K){var U,N,Y,ne;if(Y=j.length,Y<2||j[0].length<2)return;for(U=0;U<Y;U++)j[U]=m(j[U],G);if(ne=j[0].length,!F)return n(P,j[0],j[Y-1],V);var ae,he,oe,pe,ue,ge,Fe=[],Be=[],ke=[];for(N=0;N<Y;N++)Fe.push(.25+1.5*Math.sqrt((Y-1)*N-Math.pow(N,2))/(Y-1)),Be.push(.5),ke.push(2*(Math.pow(N/Y,2)-N/Y)+.6);var be=[];for(N=0;N<Y*2-1;N++)be[N]=[N,N+1,N+1-2*Y,N-2*Y];be[Y*2-1]=[N,N+1-2*Y,N+1-4*Y,N-2*Y];var fe,De,Ve,Xe,it,nt,et,$e,Qe,Ye;let Ge=P.updateGeoGroup();for(U=0;U<ne;U++){let ee=P.groups,re=!1;Ge=P.updateGeoGroup(2*Y),ee!=P.groups&&U>0&&(U=U-1,re=!0),nt=Math.round(U*(V.length-1)/ne),it=x.CC.color(V[nt]),ue=oe,ge=pe,oe=[],pe=[],ae=[],j[0][U].atom!==void 0&&(Xe=j[0][U].atom,K==="oval"?he=Fe:K==="rectangle"?he=Be:K==="parabola"&&(he=ke)),he||(he=Be);var ot,st;for(N=0;N<Y;N++)U<ne-1?ot=j[N][U+1].clone().sub(j[N][U]):ot=j[N][U-1].clone().sub(j[N][U]).negate(),N<Y-1?st=j[N+1][U].clone().sub(j[N][U]):st=j[N-1][U].clone().sub(j[N][U]).negate(),ae[N]=st.cross(ot).normalize().multiplyScalar(F*he[N]);for(N=0;N<Y;N++)oe[N]=j[N][U].clone().add(ae[N].clone().negate());for(N=0;N<Y;N++)pe[N]=j[N][U].clone().add(ae[N]);for(et=Ge.vertexArray,$e=Ge.colorArray,Qe=Ge.faceArray,fe=Ge.vertices,De=fe*3,N=0;N<Y;N++)et[De+3*N+0]=oe[N].x,et[De+3*N+1]=oe[N].y,et[De+3*N+2]=oe[N].z;for(N=0;N<Y;N++)et[De+3*N+0+3*Y]=pe[Y-1-N].x,et[De+3*N+1+3*Y]=pe[Y-1-N].y,et[De+3*N+2+3*Y]=pe[Y-1-N].z;for(N=0;N<2*Y;++N)$e[De+3*N+0]=it.r,$e[De+3*N+1]=it.g,$e[De+3*N+2]=it.b;if(U>0&&!re){for(N=0;N<Y*2;N++)Ye=[fe+be[N][0],fe+be[N][1],fe+be[N][2],fe+be[N][3]],Ve=Ge.faceidx,Qe[Ve]=Ye[0],Qe[Ve+1]=Ye[1],Qe[Ve+2]=Ye[3],Qe[Ve+3]=Ye[1],Qe[Ve+4]=Ye[2],Qe[Ve+5]=Ye[3],Ge.faceidx+=6;if(Xe.clickable||Xe.hoverable){var Q=[];Q.push(new z.Triangle(ue[0],oe[0],oe[Y-1])),Q.push(new z.Triangle(ue[0],oe[Y-1],ue[Y-1])),Q.push(new z.Triangle(ue[Y-1],oe[Y-1],pe[Y-1])),Q.push(new z.Triangle(ue[Y-1],pe[Y-1],ge[Y-1])),Q.push(new z.Triangle(pe[0],ge[0],ge[Y-1])),Q.push(new z.Triangle(pe[Y-1],pe[0],ge[Y-1])),Q.push(new z.Triangle(oe[0],ue[0],ge[0])),Q.push(new z.Triangle(pe[0],oe[0],ge[0]));for(N in Q)Xe.intersectionShape.triangle.push(Q[N])}}Ge.vertices+=2*Y}for(et=Ge.vertexArray,$e=Ge.colorArray,Qe=Ge.faceArray,fe=Ge.vertices,De=fe*3,Ve=Ge.faceidx,U=0;U<Y-1;U++)Ye=[U,U+1,2*Y-2-U,2*Y-1-U],Ve=Ge.faceidx,Qe[Ve]=Ye[0],Qe[Ve+1]=Ye[1],Qe[Ve+2]=Ye[3],Qe[Ve+3]=Ye[1],Qe[Ve+4]=Ye[2],Qe[Ve+5]=Ye[3],Ge.faceidx+=6;for(U=0;U<Y-1;U++)Ye=[fe-1-U,fe-2-U,fe-2*Y+U+1,fe-2*Y+U],Ve=Ge.faceidx,Qe[Ve]=Ye[0],Qe[Ve+1]=Ye[1],Qe[Ve+2]=Ye[3],Qe[Ve+3]=Ye[1],Qe[Ve+4]=Ye[2],Qe[Ve+5]=Ye[3],Ge.faceidx+=6}function u(P,j,V,G,F,H){if(!(j.length<2)){var K,U;if(K=j[0],U=j[j.length-1],K=m(K,G),U=m(U,G),!F)return n(P,K,U,V);var N=[],Y,ne,ae,he,oe,pe=[[0,2,-6,-8],[-4,-2,6,4],[7,-1,-5,3],[-3,5,1,-7]],ue,ge,Fe,Be,ke,be,fe,De,Ve,Xe,it,nt,et,$e,Qe,Ye,Ge;for(De=0,Ve=K.length;De<Ve;De++){if(ke=Math.round(De*(V.length-1)/Ve),Be=x.CC.color(V[ke]),N.push(ne=K[De]),N.push(ne),N.push(ae=U[De]),N.push(ae),De<Ve-1){var ot=K[De+1].clone().sub(K[De]),st=U[De].clone().sub(K[De]);Y=st.cross(ot).normalize().multiplyScalar(F)}for(N.push(he=K[De].clone().add(Y)),N.push(he),N.push(oe=U[De].clone().add(Y)),N.push(oe),ne.atom!==void 0&&(be=ne.atom),$e=P.updateGeoGroup(8),Qe=$e.vertexArray,Ye=$e.colorArray,Ge=$e.faceArray,ue=$e.vertices,ge=ue*3,Qe[ge]=ne.x,Qe[ge+1]=ne.y,Qe[ge+2]=ne.z,Qe[ge+3]=ne.x,Qe[ge+4]=ne.y,Qe[ge+5]=ne.z,Qe[ge+6]=ae.x,Qe[ge+7]=ae.y,Qe[ge+8]=ae.z,Qe[ge+9]=ae.x,Qe[ge+10]=ae.y,Qe[ge+11]=ae.z,Qe[ge+12]=he.x,Qe[ge+13]=he.y,Qe[ge+14]=he.z,Qe[ge+15]=he.x,Qe[ge+16]=he.y,Qe[ge+17]=he.z,Qe[ge+18]=oe.x,Qe[ge+19]=oe.y,Qe[ge+20]=oe.z,Qe[ge+21]=oe.x,Qe[ge+22]=oe.y,Qe[ge+23]=oe.z,Xe=0;Xe<8;++Xe)Ye[ge+3*Xe]=Be.r,Ye[ge+1+3*Xe]=Be.g,Ye[ge+2+3*Xe]=Be.b;if(De>0){var Q=fe!==void 0&&be!==void 0&&fe.serial!==be.serial;for(Xe=0;Xe<4;Xe++){var ee=[ue+pe[Xe][0],ue+pe[Xe][1],ue+pe[Xe][2],ue+pe[Xe][3]];if(Fe=$e.faceidx,Ge[Fe]=ee[0],Ge[Fe+1]=ee[1],Ge[Fe+2]=ee[3],Ge[Fe+3]=ee[1],Ge[Fe+4]=ee[2],Ge[Fe+5]=ee[3],$e.faceidx+=6,be.clickable||fe.clickable||be.hoverable||fe.hoverable){var re=N[ee[3]].clone(),Se=N[ee[0]].clone(),ve=N[ee[2]].clone(),je=N[ee[1]].clone();if(re.atom=N[ee[3]].atom||null,ve.atom=N[ee[2]].atom||null,Se.atom=N[ee[0]].atom||null,je.atom=N[ee[1]].atom||null,Q){var Ie=re.clone().add(Se).multiplyScalar(.5),J=ve.clone().add(je).multiplyScalar(.5),me=re.clone().add(je).multiplyScalar(.5);Xe%2===0?((fe.clickable||fe.hoverable)&&(it=new z.Triangle(Ie,me,re),nt=new z.Triangle(J,ve,me),et=new z.Triangle(me,ve,re),fe.intersectionShape.triangle.push(it),fe.intersectionShape.triangle.push(nt),fe.intersectionShape.triangle.push(et)),(be.clickable||be.hoverable)&&(it=new z.Triangle(Se,je,me),nt=new z.Triangle(je,J,me),et=new z.Triangle(Se,me,Ie),be.intersectionShape.triangle.push(it),be.intersectionShape.triangle.push(nt),be.intersectionShape.triangle.push(et))):((be.clickable||be.hoverable)&&(it=new z.Triangle(Ie,me,re),nt=new z.Triangle(J,ve,me),et=new z.Triangle(me,ve,re),be.intersectionShape.triangle.push(it),be.intersectionShape.triangle.push(nt),be.intersectionShape.triangle.push(et)),(fe.clickable||fe.hoverable)&&(it=new z.Triangle(Se,je,me),nt=new z.Triangle(je,J,me),et=new z.Triangle(Se,me,Ie),fe.intersectionShape.triangle.push(it),fe.intersectionShape.triangle.push(nt),fe.intersectionShape.triangle.push(et)))}else(be.clickable||be.hoverable)&&(it=new z.Triangle(Se,je,re),nt=new z.Triangle(je,ve,re),be.intersectionShape.triangle.push(it),be.intersectionShape.triangle.push(nt))}}}$e.vertices+=8,fe=be}var Te=N.length-8;for($e=P.updateGeoGroup(8),Qe=$e.vertexArray,Ye=$e.colorArray,Ge=$e.faceArray,ue=$e.vertices,ge=ue*3,Fe=$e.faceidx,De=0;De<4;De++){N.push(N[De*2]),N.push(N[Te+De*2]);var He=N[De*2],_e=N[Te+De*2];Qe[ge+6*De]=He.x,Qe[ge+1+6*De]=He.y,Qe[ge+2+6*De]=He.z,Qe[ge+3+6*De]=_e.x,Qe[ge+4+6*De]=_e.y,Qe[ge+5+6*De]=_e.z,Ye[ge+6*De]=Be.r,Ye[ge+1+6*De]=Be.g,Ye[ge+2+6*De]=Be.b,Ye[ge+3+6*De]=Be.r,Ye[ge+4+6*De]=Be.g,Ye[ge+5+6*De]=Be.b}Te+=8,it=[ue,ue+2,ue+6,ue+4],nt=[ue+1,ue+5,ue+7,ue+3],Ge[Fe]=it[0],Ge[Fe+1]=it[1],Ge[Fe+2]=it[3],Ge[Fe+3]=it[1],Ge[Fe+4]=it[2],Ge[Fe+5]=it[3],Ge[Fe+6]=nt[0],Ge[Fe+7]=nt[1],Ge[Fe+8]=nt[3],Ge[Fe+9]=nt[1],Ge[Fe+10]=nt[2],Ge[Fe+11]=nt[3],$e.faceidx+=12,$e.vertices+=8}}function f(P,j,V,G,F,H,K){(!K||K==="default")&&(K="rectangle"),K==="edged"?u(P,j,V,G,F):(K==="rectangle"||K==="oval"||K==="parabola")&&a(P,j,V,G,F,H,K)}function d(P){return P&&P.elem==="C"&&P.atom==="CA"}function r(P,j){if(P&&j&&P.chain===j.chain){if(!P.hetflag&&!j.hetflag&&P.reschain===j.reschain&&(P.resi===j.resi||P.resi===j.resi-1))return!0;if(P.resi<j.resi){var V=P.x-j.x,G=P.y-j.y,F=P.z-j.z,H=V*V+G*G+F*F;if(P.atom=="CA"&&j.atom=="CA"&&H<16)return!0;if((P.atom=="P"||j.atom=="P")&&H<64)return!0}}return!1}function o(P,j,V,G,F){if(!(j==null||j.vertices==0)){F&&(j.initTypedArrays(),j.setUpNormals());var H=new L.MeshDoubleLambertMaterial;H.vertexColors=L.Coloring.FaceColors,typeof V=="number"&&V>=0&&V<1&&(H.transparent=!0,H.opacity=V),H.outline=G;var K=new L.Mesh(j,H);P.add(K)}}function v(P,j,V,G,F,H,K,U,N){var Y,ne,ae,he,oe,pe;if(!(!G||!F||!K)){var ue=F.sub(G);ue.normalize();var ge=U[N];for(ne=N+1;ne<U.length&&(ge=U[ne],ge.atom!=K.atom);ne++);if(ge=ge?new M.Vector3(ge.x,ge.y,ge.z):new M.Vector3(0,0,0),ge.sub(G),K.ss==="arrow start"){var Fe=ge.clone().multiplyScalar(.3).cross(F);G.add(Fe);var Be=ge.clone().cross(ue).normalize();ue.rotateAboutVector(Be,.43)}for(K.style.cartoon.ribbon?Y=K.style.cartoon.thickness||A:K.style.cartoon.width?Y=K.style.cartoon.width:K.ss==="c"?K.atom==="P"?Y=p:Y=T:K.ss==="arrow start"?(Y=D,oe=!0):K.ss==="arrow end"||K.ss==="h"&&K.style.cartoon.tubes||K.ss==="tube start"?Y=T:Y=D,H!=null&&ue.dot(H)<0&&ue.negate(),ue.multiplyScalar(Y),ne=0;ne<j;ne++)ae=-1+ne*2/(j-1),he=new M.Vector3(G.x+ae*ue.x,G.y+ae*ue.y,G.z+ae*ue.z),he.atom=K,K.ss==="s"&&(he.smoothen=!0),P[ne].push(he);if(oe)for(ue.multiplyScalar(2),ne=0;ne<j;ne++)ae=-1+ne*2/(j-1),he=new M.Vector3(G.x+ae*ue.x,G.y+ae*ue.y,G.z+ae*ue.z),he.atom=K,he.smoothen=!1,he.skip=!0,P[ne].push(he);return pe=K.style.cartoon.style||"default",P.style?P.style!=pe&&(console.log("Warning: a cartoon chain's strand-style is ambiguous"),P.style="default"):P.style=pe,(K.ss==="arrow start"||K.ss==="arrow end")&&(K.ss="s"),oe}}const h={C:!0,CA:!0,O:!0,P:!0,OP2:!0,O2P:!0,"O5'":!0,"O3'":!0,"C5'":!0,"C2'":!0,"O5*":!0,"O3*":!0,"C5*":!0,"C2*":!0,N1:!0,N3:!0},y={DA:!0,DG:!0,A:!0,G:!0},E={DT:!0,DC:!0,U:!0,C:!0,T:!0},w={DA:!0,DG:!0,A:!0,G:!0,DT:!0,DC:!0,U:!0,C:!0,T:!0};function W(P,j,V,G=10){let F=G,H=G;var K,U,N,Y,ne,ae,he,oe,pe,ue,ge,Fe,Be,ke,be,fe,De,Ve,Xe=new L.Geometry(!0),it=new L.Geometry(!0),nt=[],et=[],$e=1,Qe=!1,Ye={};for(var Ge in B.Gradient.builtinGradients)B.Gradient.builtinGradients.hasOwnProperty(Ge)&&(Ye[Ge]=new B.Gradient.builtinGradients[Ge](V[1],V[0]));var ot=function($,We){return V&&We.color==="spectrum"?We.colorscheme in Ye?Ye[We.colorscheme].valueToHex($.resi):Ye.sinebow.valueToHex($.resi):(0,S.getColorFromStyle)($,We).getHex()};for(oe=0;oe<F;oe++)et[oe]=[];var st=!1,Q=!1,ee=[];for(oe in j){if(Y=j[oe],Y.elem==="C"&&Y.atom==="CA"){var re=r(N,Y);re&&Y.ss==="s"?st=!0:st&&(N&&U&&N.style.cartoon.arrows&&U.style.cartoon.arrows&&(N.ss="arrow end",U.ss="arrow start"),st=!1),re&&(N.ss==="h"||N.ss=="tube start")&&N.style.cartoon.tubes?!Q&&N.ss!="tube start"&&Y.style.cartoon.tubes&&(Y.ss="tube start",Q=!0):Q&&(N.ss==="tube start"?N.ss="tube end":U&&U.style.cartoon.tubes&&(U.ss="tube end"),Q=!1),U=N,N=Y}Y&&Y.atom in h&&ee.push(Y)}Q&&N.style.cartoon.tubes&&(N.ss="tube end",Q=!1);var Se=function($){et[0].length>0&&f(it,et,nt,H,he,$e,et.style);var We=[],rt=null;if($){for(oe=0;oe<F;oe++)We[oe]=et[oe][et[oe].length-1];rt=nt[nt.length-1]}for(et=[],oe=0;oe<F;oe++)et[oe]=[];if(nt=[],$){for(oe=0;oe<F;oe++)et[oe].push(We[oe]);nt.push(rt)}o(P,it,$e,Qe,!0),o(P,Xe,$e,Qe,!1),it=new L.Geometry(!0),Xe=new L.Geometry(!0)};N=void 0;for(var ve=0;ve<ee.length;ve++){Y=ee[ve];var je=Y.resn.trim(),Ie=je in w;if($e=1,K=Y.style.cartoon,N&&N.style.cartoon&&($e=N.style.cartoon.opacity),N&&N.style.cartoon&&N.style.cartoon.outline&&(Qe=N.style.cartoon.outline),N&&N.style.cartoon&&(!Y.style.cartoon||N.style.cartoon.opacity!=Y.style.cartoon.opacity)&&Se(N.chain==Y.chain),K.style==="trace"){if(!Y.hetflag){if(Y.elem==="C"&&Y.atom==="CA"||Ie&&Y.atom==="P"||Y.atom==="BB"){if(ae=ot(Y,K),(0,S.isNumeric)(K.thickness)?he=K.thickness:he=A,r(N,Y))if(ae==ne){var J=x.CC.color(ae);b.GLDraw.drawCylinder(Xe,N,Y,he,J,2,2)}else{var me=new M.Vector3().addVectors(N,Y).multiplyScalar(.5),Te=x.CC.color(ne),He=x.CC.color(ae);b.GLDraw.drawCylinder(Xe,N,me,he,Te,2,0),b.GLDraw.drawCylinder(Xe,me,Y,he,He,0,2)}if((Y.clickable===!0||Y.hoverable)&&Y.intersectionShape!==void 0){var _e=new M.Vector3(Y.x,Y.y,Y.z);Y.intersectionShape.sphere.push(new z.Sphere(_e,he))}N=Y,ne=ae}}}else{if(d(Y)||Ie&&(Y.atom==="P"||Y.atom.indexOf("O5")==0)){if(Ve)if(Y.ss==="tube end")Ve=!1,De=new M.Vector3(Y.x,Y.y,Y.z),b.GLDraw.drawCylinder(Xe,fe,De,2,x.CC.color(ne),1,1),Y.ss="h";else if(N.chain!=Y.chain||N.ss==="tube end")Ve=!1,N.ss="h",De=new M.Vector3(N.x,N.y,N.z),b.GLDraw.drawCylinder(Xe,fe,De,2,x.CC.color(ne),1,1);else continue;if(N&&(!r(N,Y)||N.ss==="tube start")){for(N.ss==="tube start"&&(Ve=!0,fe=new M.Vector3(N.x,N.y,N.z),N.ss="h"),be&&(Fe?ke=new M.Vector3().addVectors(N,Fe).multiplyScalar(.5):ke=new M.Vector3(N.x,N.y,N.z),b.GLDraw.drawCylinder(Xe,ke,be,l,x.CC.color(be.color),0,2),v(et,F,!0,Fe,Be,ge,N,ee,ve),nt.push(ae),ke=null,be=null),et[0].length>0&&f(it,et,nt,H,he,$e,et.style),et=[],oe=0;oe<F;oe++)et[oe]=[];nt=[]}if(N===void 0||N.rescode!=Y.rescode||N.resi!=Y.resi){if(be&&N!=null){ke=new M.Vector3().addVectors(N,Y).multiplyScalar(.5);var Ue=ke.clone().sub(be).multiplyScalar(.02);ke.add(Ue),b.GLDraw.drawCylinder(Xe,ke,be,l,x.CC.color(be.color),0,2),ke=null,be=null}ae=ot(Y,K),nt.push(ae),(0,S.isNumeric)(K.thickness)?he=K.thickness:he=A,N=Y,pe=new M.Vector3(N.x,N.y,N.z),pe.resi=N.resi,ne=ae}(Y.clickable===!0||Y.hoverable===!0)&&(Y.intersectionShape===void 0||Y.intersectionShape.triangle===void 0)&&(Y.intersectionShape={sphere:null,cylinder:[],line:[],triangle:[]})}else N!=null&&(d(N)&&Y.atom==="O"||Ie&&N.atom==="P"&&(Y.atom==="OP2"||Y.atom==="O2P")||Ie&&N.atom.indexOf("O5")==0&&Y.atom.indexOf("C5")==0)?(ue=new M.Vector3(Y.x,Y.y,Y.z),ue.resi=Y.resi,(Y.atom==="OP2"||Y.atom==="O2P")&&(Be=new M.Vector3(Y.x,Y.y,Y.z))):Ie&&Y.atom.indexOf("O3")==0?Fe=new M.Vector3(Y.x,Y.y,Y.z):(Y.atom==="N1"&&je in y||Y.atom==="N3"&&je in E)&&(be=new M.Vector3(Y.x,Y.y,Y.z),be.color=(0,S.getColorFromStyle)(Y,K).getHex());ue&&pe&&ue.resi===pe.resi&&(v(et,F,!0,pe,ue,ge,N,ee,ve),ge=ue,pe=null,ue=null,nt.push(ae))}}be&&(Fe?ke=new M.Vector3().addVectors(N,Fe).multiplyScalar(.5):ke=new M.Vector3(N.x,N.y,N.z),b.GLDraw.drawCylinder(Xe,ke,be,l,x.CC.color(be.color),0,2),v(et,F,!0,Fe,Be,ge,N,ee,ve),nt.push(ae)),Se(!1)}},"./src/index.ts":(k,R,g)=>{g.r(R),g.d(R,{CAP:()=>l.CAP,CC:()=>z.CC,CONTEXTS_PER_VIEWPORT:()=>u.CONTEXTS_PER_VIEWPORT,Color:()=>z.Color,CustomLinear:()=>M.CustomLinear,Cylinder:()=>S.Cylinder,GLDraw:()=>l.GLDraw,GLModel:()=>a.GLModel,GLShape:()=>A.GLShape,GLViewer:()=>u.GLViewer,GLVolumetricRender:()=>p.GLVolumetricRender,Gradient:()=>M.Gradient,GradientType:()=>M.GradientType,Label:()=>L.Label,LabelCount:()=>L.LabelCount,MarchingCube:()=>T.MarchingCube,MarchingCubeInitializer:()=>T.MarchingCubeInitializer,Matrix3:()=>b.Matrix3,Matrix4:()=>b.Matrix4,Parsers:()=>x.Parsers,PausableTimer:()=>m.PausableTimer,PointGrid:()=>T.PointGrid,ProteinSurface:()=>T.ProteinSurface,Quaternion:()=>b.Quaternion,ROYGB:()=>M.ROYGB,RWB:()=>M.RWB,Ray:()=>b.Ray,Sinebow:()=>M.Sinebow,Sphere:()=>S.Sphere,SurfaceType:()=>T.SurfaceType,Triangle:()=>S.Triangle,Vector2:()=>b.Vector2,Vector3:()=>b.Vector3,VolumeData:()=>D.VolumeData,adjustVolumeStyle:()=>m.adjustVolumeStyle,applyPartialCharges:()=>B.applyPartialCharges,autoinit:()=>f.autoinit,autoload:()=>f.autoload,base64ToArray:()=>m.base64ToArray,bondLength:()=>x.bondLength,builtinColorSchemes:()=>z.builtinColorSchemes,builtinGradients:()=>M.builtinGradients,chains:()=>z.chains,clamp:()=>b.clamp,conversionMatrix3:()=>b.conversionMatrix3,createStereoViewer:()=>u.createStereoViewer,createViewer:()=>u.createViewer,createViewerGrid:()=>u.createViewerGrid,deepCopy:()=>m.deepCopy,degToRad:()=>b.degToRad,download:()=>m.download,drawCartoon:()=>n.drawCartoon,elementColors:()=>z.elementColors,extend:()=>m.extend,get:()=>m.get,getAtomProperty:()=>m.getAtomProperty,getColorFromStyle:()=>m.getColorFromStyle,getElement:()=>m.getElement,getExtent:()=>m.getExtent,getGradient:()=>M.getGradient,getPropertyRange:()=>m.getPropertyRange,getbin:()=>m.getbin,htmlColors:()=>z.htmlColors,inflateString:()=>m.inflateString,isEmptyObject:()=>m.isEmptyObject,isNumeric:()=>m.isNumeric,makeFunction:()=>m.makeFunction,mergeGeos:()=>m.mergeGeos,normalizeValue:()=>M.normalizeValue,partialCharges:()=>B.partialCharges,processing_autoinit:()=>f.processing_autoinit,residues:()=>z.residues,setBondLength:()=>x.setBondLength,setSyncSurface:()=>T.setSyncSurface,specStringToObject:()=>m.specStringToObject,splitMesh:()=>A.splitMesh,ssColors:()=>z.ssColors,subdivide_spline:()=>n.subdivide_spline,syncSurface:()=>T.syncSurface,viewers:()=>f.viewers});var M=g("./src/Gradient.ts"),z=g("./src/colors.ts"),L=g("./src/Label.ts"),B=g("./src/partialCharges.ts"),x=g("./src/parsers/index.ts"),b=g("./src/WebGL/math/index.ts"),S=g("./src/WebGL/shapes/index.ts"),m=g("./src/utilities.ts"),T=g("./src/ProteinSurface4.ts"),D=g("./src/VolumeData.ts"),p=g("./src/VolumetricRender.ts"),A=g("./src/GLShape.ts"),l=g("./src/GLDraw.ts"),n=g("./src/glcartoon.ts"),a=g("./src/GLModel.ts"),u=g("./src/GLViewer.ts"),f=g("./src/autoload.ts");g("./src/specs.ts"),window&&(window.$3Dmol=R)},"./src/parsers/BCIF.ts":(k,R,g)=>{g.r(R),g.d(R,{BCIF:()=>A});var M=g("./src/utilities.ts"),z=g("./src/parsers/utils/computeSecondaryStructure.ts"),L=g("./src/parsers/utils/processSymmetries.ts"),B=g("./src/parsers/cifutils/category.ts"),x=g("./src/parsers/utils/assignPDBBonds.ts"),b=g("./src/WebGL/index.ts"),S=g("./src/parsers/utils/isEmpty.ts"),m=g("./src/vendor/mmtf.js");class T{constructor(n){if(this.C={},n){let a=n.getField("comp_id"),u=n.getField("atom_id_1"),f=n.getField("atom_id_2"),d=n.getField("value_order");for(let r=0;r<a.length;r++){let o=a[r],v=u[r],h=f[r],y=d[r],E=1;y=="doub"?E=2:y=="trip"&&(E=3),this.C[o]==null&&(this.C[o]={}),this.C[o][v]==null&&(this.C[o][v]={}),this.C[o][h]==null&&(this.C[o][h]={}),this.C[o][v][h]=E,this.C[o][h][v]=E}}}order(n,a,u){return this.C[n]!==void 0&&this.C[n][a]!==void 0&&this.C[n][a][u]!==void 0?this.C[n][a][u]:0}}class D{constructor(n){if(this.C=[],n){let a=n.getField("conn_type_id"),u=n.getField("ptnr1_label_asym_id"),f=n.getField("ptnr1_label_seq_id"),d=n.getField("ptnr1_label_comp_id"),r=n.getField("ptnr1_label_atom_id"),o=n.getField("ptnr2_label_asym_id"),v=n.getField("ptnr2_label_seq_id"),h=n.getField("ptnr2_label_comp_id"),y=n.getField("ptnr2_label_atom_id"),E=n.getField("pdbx_value_order");for(let w=0;w<a.length;w++)if(a[w]=="disulf"||a[w]=="covale"){let W=E?E[w]==""?1:parseInt(E[w]):1;this.C.push([[u[w],f[w],d[w],r[w]],[o[w],v[w],h[w],y[w]],W])}}}}class p{constructor(){this.R={}}add(n){this.R[n.lchain]==null&&(this.R[n.lchain]={}),this.R[n.lchain][n.lresi]==null&&(this.R[n.lchain][n.lresi]={}),this.R[n.lchain][n.lresi][n.lresn]==null&&(this.R[n.lchain][n.lresi][n.lresn]=[]),this.R[n.lchain][n.lresi][n.lresn].push(n),this.R[n.lchain][n.lresi][n.lresn][n.atom]=n}geta([n,a,u,f]){if(this.R[n]!==void 0&&this.R[n][a]!==void 0&&this.R[n][a][u]!==void 0)return this.R[n][a][u][f]}setBonds(n,a){for(let u in this.R)for(let f in this.R[u])for(let d in this.R[u][f]){let r=this.R[u][f][d];for(let o=0;o<r.length;o++)for(let v=o+1;v<r.length;v++){let h=r[o],y=r[v],E=n.order(d,h.atom,y.atom);h.altLoc!=y.altLoc&&h.altLoc!=""&&y.altLoc!=""&&(E=0),E>0&&(h.bonds.push(y.index),y.bonds.push(h.index),h.bondOrder.push(E),y.bondOrder.push(E))}}for(let u of a.C){let f=u[0],d=u[1],r=u[2],o=this.geta(f),v=this.geta(d);o!=null&&v!=null&&(o.bonds.push(v.index),v.bonds.push(o.index),o.bondOrder.push(r),v.bondOrder.push(r))}}}function A(l,n){var a=!n.keepH,u=n.altLoc?n.altLoc:"A",f=!n.noComputeSecondaryStructure;const d=!n.doAssembly,r=n.assignBonds===void 0?!0:n.assignBonds;if(typeof l=="string")try{l=(0,M.base64ToArray)(l)}catch{l=new TextEncoder().encode(l)}else l=new Uint8Array(l);var o=m.decodeMsgpack(l);o==31&&(l=(0,M.inflateString)(l,!1),o=m.decodeMsgpack(l));var v=[],h=v.modelData=[],y=o.dataBlocks.length;if(y==0)return v;n.multimodel||(y=1);for(let E=0;E<y;E++){let w=v.length;const W=[];h.push({symmetries:[]}),v.push([]);const P=o.dataBlocks[E],j=Object.create(null);for(const Ye of P.categories)j[Ye.name.substr(1)]=(0,B.Category)(Ye);let V={},G=j.struct_conf;if(G){let Ye=G.getField("conf_type_id"),Ge=G.getField("beg_label_asym_id"),ot=G.getField("beg_label_seq_id"),st=G.getField("end_label_seq_id");for(let Q=0;Q<Ye.length;Q++)if(Ye[Q].startsWith("H")){let ee=Ge[Q],re=ot[Q],Se=st[Q];ee in V||(V[ee]={}),V[ee][re]="h1";for(let ve=re+1;ve<Se;ve++)V[ee][ve]="h";V[ee][Se]="h2"}}let F=j.struct_sheet_range;if(F){let Ye=F.getField("id"),Ge=F.getField("beg_label_asym_id"),ot=F.getField("beg_label_seq_id"),st=F.getField("end_label_seq_id");for(let Q=0;Q<Ye.length;Q++){let ee=Ge[Q],re=ot[Q],Se=st[Q];ee in V||(V[ee]={}),V[ee][re]="s1";for(let ve=re+1;ve<Se;ve++)V[ee][ve]="s";V[ee][Se]="s2"}}let H=j.pdbx_struct_oper_list,K=H.getField("id");if(K&&!d){let Ye=H.getField("matrix[1][1]"),Ge=H.getField("matrix[1][2]"),ot=H.getField("matrix[1][3]"),st=H.getField("matrix[2][1]"),Q=H.getField("matrix[2][2]"),ee=H.getField("matrix[2][3]"),re=H.getField("matrix[3][1]"),Se=H.getField("matrix[3][2]"),ve=H.getField("matrix[3][3]"),je=H.getField("vector[1]"),Ie=H.getField("vector[2]"),J=H.getField("vector[3]");for(let me=0;me<K.length;me++){const Te=new b.Matrix4(Ye[me],Ge[me],ot[me],je[me],st[me],Q[me],ee[me],Ie[me],re[me],Se[me],ve[me],J[me]);h[h.length-1].symmetries.push(Te)}}let U=new T(j.chem_comp_bond),N=new p,Y=new D(j.struct_conn),ne=j.atom_site,ae=ne.rowCount,he=ne.getField("group_PDB"),oe=ne.getField("Cartn_x"),pe=ne.getField("Cartn_y"),ue=ne.getField("Cartn_z"),ge=ne.getField("auth_asym_id"),Fe=ne.getField("label_asym_id"),Be=ne.getField("auth_seq_id"),ke=ne.getField("label_seq_id"),be=ne.getField("auth_comp_id"),fe=ne.getField("label_comp_id"),De=ne.getField("auth_atom_id"),Ve=ne.getField("label_atom_id"),Xe=ne.getField("type_symbol"),it=ne.getField("B_iso_or_equiv"),nt=ne.getField("id"),et=ne.getField("label_alt_id"),$e=ne.getField("pdbx_PDB_model_num"),Qe=$e?$e[0]:0;for(let Ye=0;Ye<ae;Ye++){if(he!==void 0&&he[Ye]==="TER")continue;if($e&&$e[Ye]!=Qe)if(Qe=$e[Ye],n.multimodel)n.onemol||(v.push([]),h.push(h[h.length-1]),Qe=$e[Ye],N.setBonds(U,Y),N=new p);else break;const Ge={};Ge.x=oe[Ye],Ge.y=pe[Ye],Ge.z=ue[Ye],Ge.chain=ge?ge[Ye]:Fe?Fe[Ye]:void 0,Ge.lchain=Fe?Fe[Ye]:void 0,Ge.resi=Be?Be[Ye]:ke?ke[Ye]:void 0,Ge.lresi=ke?ke[Ye]:void 0,Ge.resn=be?be[Ye].trim():fe?fe[Ye].trim():void 0,Ge.lresn=fe?fe[Ye].trim():void 0,Ge.atom=De?De[Ye].replace(/"/gm,""):Ve?Ve[Ye].replace(/"/gm,""):void 0,Ge.icode=et?et[Ye]:void 0,Ge.altLoc=Ge.icode,Ge.hetflag=!he||he[Ye]==="HETA"||he[Ye]==="HETATM";let ot="X";Xe&&(ot=Xe[Ye].replace(/\(?\+?\d+.*/,"")),Ge.elem=ot[0].toUpperCase()+ot.substring(1,2).toLowerCase(),it&&(Ge.b=it[Ye]),!(a&&Ge.elem=="H")&&(Ge.altLoc!=""&&Ge.altLoc!=u&&u!="*"||(Ge.bonds=[],Ge.ss="c",Ge.serial=nt[Ye],Ge.model=Qe,Ge.bondOrder=[],Ge.properties={},Ge.index=v[v.length-1].length,W[Ge.serial]=[v.length,Ge.index],v[v.length-1].push(Ge),N.add(Ge)))}if(N.setBonds(U,Y),!(0,S.isEmpty)(V))for(let Ye=w;Ye<v.length;Ye++){let Ge=v[Ye];for(let ot=0;ot<Ge.length;ot++){const st=Ge[ot];if(st!==void 0&&st.lchain in V&&st.lresi in V[st.lchain]){const Q=V[st.lchain][st.lresi];st.ss=Q[0],Q.length>1&&(Q[1]=="1"?st.ssbegin=!0:Q[1]=="2"&&(st.ssend=!0))}}}n.multimodel&&E<y-1&&(n.onemol||(v.push([]),h.push({symmetries:[]})))}for(let E=0;E<v.length;E++)r&&!(n.duplicateAssemblyAtoms&&!n.dontConnectDuplicatedAtoms)&&(0,x.assignPDBBonds)(v[E],n),f&&(0,z.computeSecondaryStructure)(v[E],n.hbondCutoff),(0,L.processSymmetries)(h[E].symmetries,v[E],n,h[E].cryst),n.duplicateAssemblyAtoms&&!n.dontConnectDuplicatedAtoms&&r&&(0,x.assignPDBBonds)(v[E],n);return v}},"./src/parsers/CDJSON.ts":(k,R,g)=>{g.r(R),g.d(R,{CDJSON:()=>M});function M(z,L){var B=[[]];typeof z=="string"&&(z=JSON.parse(z));for(var x=z.m,b=x[0].a,S=x[0].b,m=x[0].s,T=L!==void 0&&L.parseStyle!==void 0?L.parseStyle:m!==void 0,D=B[B.length-1].length,p=0;p<b.length;p++){var A=b[p],l={};l.id=A.i,l.x=A.x,l.y=A.y,l.z=A.z||0,l.bonds=[],l.bondOrder=[];var n=A.l||"C";l.elem=n[0].toUpperCase()+n.substring(1).toLowerCase(),l.serial=B[B.length-1].length,T&&(l.style=m[A.s||0]),B[B.length-1].push(l)}for(let a=0;a<S.length;a++){let u=S[a],f=u.b+D,d=u.e+D,r=u.o||1,o=B[B.length-1][f],v=B[B.length-1][d];o.bonds.push(d),o.bondOrder.push(r),v.bonds.push(f),v.bondOrder.push(r)}return B}},"./src/parsers/CIF.ts":(k,R,g)=>{g.r(R),g.d(R,{CIF:()=>b});var M=g("./src/parsers/utils/computeSecondaryStructure.ts"),z=g("./src/parsers/utils/processSymmetries.ts"),L=g("./src/WebGL/index.ts"),B=g("./src/parsers/utils/assignPDBBonds.ts");const x=function(S,m,T,D){return new L.Vector3(m,T,D).applyMatrix3(S)};function b(S,m={}){const T=[],D=!m.doAssembly,p=T.modelData=[],A=m.assignBonds===void 0?!0:m.assignBonds;function l(r,o){const v=[];let h=0,y=0;for(;y<r.length;){for(;r.substring(y,y+o.length)!==o&&y<r.length;)if(r[y]==="'"){for(y++;y<r.length&&r[y]!=="'";)y++;for(;r.substring(y,y+o.length)!==o&&y<r.length;)y++}else if(r[y]==='"'){for(y++;y<r.length&&r[y]!=='"';)y++;y++}else y++;v.push(r.substring(h,y)),h=y=y+o.length}return v}const n=S.split(/\r?\n|\r/),a=[];let u=!1;for(let r=0;r<n.length;r++){var f=n[r].split("#")[0];if(u?f[0]===";"&&(u=!1):f[0]===";"&&(u=!0),u||f!==""){if(!u&&(f=f.trim(),f[0]==="_")){const o=f.split(/\s/)[0].indexOf(".");if(o>-1){let v=f.split("");v[o]="_",f=v.join(""),f=f.substring(0,o)+"_"+f.substring(o+1)}}a.push(f)}}let d=0;for(;d<a.length;){for(;!a[d].startsWith("data_")||a[d]==="data_global";)d++;d++;const r={};for(;d<a.length&&!a[d].startsWith("data_");)if(a[d][0]===void 0)d++;else if(a[d][0]==="_"){const y=a[d].split(/\s/)[0].toLowerCase(),E=r[y]=r[y]||[],w=a[d].substring(a[d].indexOf(y)+y.length);if(w==="")if(d++,a[d][0]===";"){let W=a[d].substring(1);for(d++;a[d]!==";";)W=W+`
`+a[d],d++;E.push(W)}else E.push(a[d]);else E.push(w.trim());d++}else if(a[d].substring(0,5)==="loop_"){d++;const y=[];for(;a[d]===""||a[d][0]==="_";){if(a[d]!==""){let w=a[d].split(/\s/)[0].toLowerCase(),W=r[w]=r[w]||[];y.push(W)}d++}let E=0;for(;d<a.length&&a[d][0]!=="_"&&!a[d].startsWith("loop_")&&!a[d].startsWith("data_");){let w=l(a[d]," ");for(let W=0;W<w.length;W++)w[W]!==""&&(y[E].push(w[W]),E=(E+1)%y.length);d++}}else d++;p.push({symmetries:[]}),T.push([]);const o=r._atom_site_id!==void 0?r._atom_site_id.length:r._atom_site_label.length;let v;if(r._cell_length_a!==void 0){const y=parseFloat(r._cell_length_a),E=parseFloat(r._cell_length_b),w=parseFloat(r._cell_length_c),W=parseFloat(r._cell_angle_alpha)||90,P=parseFloat(r._cell_angle_beta)||90,j=parseFloat(r._cell_angle_gamma)||90;v=(0,L.conversionMatrix3)(y,E,w,W,P,j),p[p.length-1].cryst={a:y,b:E,c:w,alpha:W,beta:P,gamma:j}}for(let y=0;y<o;y++){if(r._atom_site_group_pdb!==void 0&&r._atom_site_group_pdb[y]==="TER")continue;const E={};if(r._atom_site_cartn_x!==void 0)E.x=parseFloat(r._atom_site_cartn_x[y]),E.y=parseFloat(r._atom_site_cartn_y[y]),E.z=parseFloat(r._atom_site_cartn_z[y]);else{const W=x(v,parseFloat(r._atom_site_fract_x[y]),parseFloat(r._atom_site_fract_y[y]),parseFloat(r._atom_site_fract_z[y]));E.x=W.x,E.y=W.y,E.z=W.z}E.chain=r._atom_site_auth_asym_id?r._atom_site_auth_asym_id[y]:r._atom_site_label_asym_id?r._atom_site_label_asym_id[y]:void 0,E.resi=r._atom_site_auth_seq_id?parseInt(r._atom_site_auth_seq_id[y]):r._atom_site_label_seq_id?r._atom_site_label_seq_id[y]:void 0,E.resn=r._atom_site_auth_comp_id?r._atom_site_auth_comp_id[y].trim():r._atom_site_label_comp_id?r._atom_site_label_comp_id[y].trim():void 0,E.atom=r._atom_site_auth_atom_id?r._atom_site_auth_atom_id[y].replace(/"/gm,""):r._atom_site_label_atom_id?r._atom_site_label_atom_id[y].replace(/"/gm,""):void 0,E.hetflag=!r._atom_site_group_pdb||r._atom_site_group_pdb[y]==="HETA"||r._atom_site_group_pdb[y]==="HETATM",r._atom_site_b_iso_or_equiv&&(E.b=parseFloat(r._atom_site_b_iso_or_equiv[y]));let w="X";r._atom_site_type_symbol?w=r._atom_site_type_symbol[y].replace(/\(?\+?\d+.*/,""):r._atom_site_label&&(w=r._atom_site_label[y].split("_")[0].replace(/\(?\d+.*/,"")),E.elem=w[0].toUpperCase()+w.substring(1,2).toLowerCase(),E.bonds=[],E.ss="c",E.serial=y,E.bondOrder=[],E.properties={},T[T.length-1].push(E)}if(r._pdbx_struct_oper_list_id!==void 0&&!D)for(let y=0;y<r._pdbx_struct_oper_list_id.length;y++){const E=parseFloat(r["_pdbx_struct_oper_list_matrix[1][1]"][y]),w=parseFloat(r["_pdbx_struct_oper_list_matrix[1][2]"][y]),W=parseFloat(r["_pdbx_struct_oper_list_matrix[1][3]"][y]),P=parseFloat(r["_pdbx_struct_oper_list_vector[1]"][y]),j=parseFloat(r["_pdbx_struct_oper_list_matrix[2][1]"][y]),V=parseFloat(r["_pdbx_struct_oper_list_matrix[2][2]"][y]),G=parseFloat(r["_pdbx_struct_oper_list_matrix[2][3]"][y]),F=parseFloat(r["_pdbx_struct_oper_list_vector[2]"][y]),H=parseFloat(r["_pdbx_struct_oper_list_matrix[3][1]"][y]),K=parseFloat(r["_pdbx_struct_oper_list_matrix[3][2]"][y]),U=parseFloat(r["_pdbx_struct_oper_list_matrix[3][3]"][y]),N=parseFloat(r["_pdbx_struct_oper_list_vector[3]"][y]),Y=new L.Matrix4(E,w,W,P,j,V,G,F,H,K,U,N);p[p.length-1].symmetries.push(Y)}const h=function(y){const E=y.match("-");y=y.replace(/[-xyz]/g,"");const w=y.split("/");let W,P;return w[1]===void 0?P=1:P=parseInt(w[1]),w[0]===""?W=1:W=parseInt(w[0]),W/P*(E?-1:1)};if(r._symmetry_equiv_pos_as_xyz!==void 0&&!D)for(let y=0;y<r._symmetry_equiv_pos_as_xyz.length;y++){const w=r._symmetry_equiv_pos_as_xyz[y].replace(/["' ]/g,"").split(",").map(function(V){return V.replace(/-/g,"+-")});let W=new L.Matrix4(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1);for(let V=0;V<3;V++){const G=w[V].split("+");for(let F=0;F<G.length;F++){const H=G[F];if(H==="")continue;const K=h(H);H.match("x")?W.elements[V+0]=K:H.match("y")?W.elements[V+4]=K:H.match("z")?W.elements[V+8]=K:W.elements[V+12]=K}}const P=v.getMatrix4(),j=new L.Matrix4().getInverse(P,!0);W=new L.Matrix4().multiplyMatrices(W,j),W=new L.Matrix4().multiplyMatrices(P,W),p[p.length-1].symmetries.push(W)}}for(let r=0;r<T.length;r++)A&&!(m.duplicateAssemblyAtoms&&!m.dontConnectDuplicatedAtoms)&&(0,B.assignPDBBonds)(T[r],m),(0,M.computeSecondaryStructure)(T[r],m.hbondCutoff),(0,z.processSymmetries)(p[r].symmetries,T[r],m,p[r].cryst),m.duplicateAssemblyAtoms&&!m.dontConnectDuplicatedAtoms&&A&&(0,B.assignPDBBonds)(T[r],m);return T}},"./src/parsers/CUBE.ts":(k,R,g)=>{g.r(R),g.d(R,{CUBE:()=>B});var M=g("./src/WebGL/index.ts"),z=g("./src/parsers/utils/assignBonds.ts"),L=g("./src/parsers/utils/anumToSymbol.ts");function B(x,b){b=b||{};const S=[[]];let m=x.split(/\r?\n/);const T=b.assignBonds===void 0?!0:b.assignBonds;if(m.length<6)return S;let D=m[2].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");const p=Math.abs(parseFloat(D[0]));let A={origin:void 0,size:void 0,unit:void 0,matrix4:void 0,matrix:void 0};const l=A.origin=new M.Vector3(parseFloat(D[1]),parseFloat(D[2]),parseFloat(D[3]));D=m[3].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),D=m[3].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");const n=D[0]>0?.529177:1;l.multiplyScalar(n);const a=Math.abs(D[0]),u=new M.Vector3(parseFloat(D[1]),parseFloat(D[2]),parseFloat(D[3])).multiplyScalar(n);D=m[4].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");const f=Math.abs(D[0]),d=new M.Vector3(parseFloat(D[1]),parseFloat(D[2]),parseFloat(D[3])).multiplyScalar(n);D=m[5].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");const r=Math.abs(D[0]),o=new M.Vector3(parseFloat(D[1]),parseFloat(D[2]),parseFloat(D[3])).multiplyScalar(n);if(A.size={x:a,y:f,z:r},A.unit=new M.Vector3(u.x,d.y,o.z),u.y!=0||u.z!=0||d.x!=0||d.z!=0||o.x!=0||o.y!=0){A.matrix4=new M.Matrix4(u.x,d.x,o.x,0,u.y,d.y,o.y,0,u.z,d.z,o.z,0,0,0,0,1);let P=new M.Matrix4().makeTranslation(l.x,l.y,l.z);A.matrix4=A.matrix4.multiplyMatrices(P,A.matrix4),A.matrix=A.matrix4.matrix3FromTopLeft(),A.origin=new M.Vector3(0,0,0),A.unit=new M.Vector3(1,1,1)}S.modelData=[{cryst:A}],m=m.splice(6,p);for(var v=S[S.length-1].length,h=v+m.length,y=v;y<h;++y){var E={};E.serial=y;var w=m[y-v],W=w.replace(/^\s+/,"").replace(/\s+/g," ").split(" ");E.elem=L.anumToSymbol[W[0]],E.x=parseFloat(W[2])*n,E.y=parseFloat(W[3])*n,E.z=parseFloat(W[4])*n,E.hetflag=!0,E.bonds=[],E.bondOrder=[],E.properties={},S[S.length-1].push(E)}if(T)for(let P=0;P<S.length;P++)(0,z.assignBonds)(S[P],b);return S}},"./src/parsers/GRO.ts":(k,R,g)=>{g.r(R),g.d(R,{GRO:()=>L});var M=g("./src/parsers/utils/assignPDBBonds.ts"),z=g("./src/parsers/utils/atomNameToElem.ts");function L(B,x){const b=[],S=B.split(/\r?\n|\r/);for(;S.length>0;){const m=parseInt(S[1]);if(S.length<3||isNaN(m)||m<=0||S.length<m+3)break;const D=[];b.push(D);let p=2;const A=D.length,l=A+m;for(let n=A;n<l;n++){const a=S[p++],u={};u.serial=n,u.atom=a.slice(10,15).trim(),u.elem=(0,z.atomNameToElem)(u.atom,!0),u.x=10*parseFloat(a.slice(20,28)),u.y=10*parseFloat(a.slice(28,36)),u.z=10*parseFloat(a.slice(36,44)),u.resi=parseInt(a.slice(0,5)),u.resn=a.slice(5,10).trim(),u.bonds=[],u.bondOrder=[],u.properties={},a.length>44&&(u.dx=10*parseFloat(a.slice(44,52)),u.dy=10*parseFloat(a.slice(52,60)),u.dz=10*parseFloat(a.slice(60,68))),D[n]=u}if(S.length<=p+3){const a=S[p++].trim().split(/\s+/);if(a.length===3){for(let u=0;u<3;u++)a[u]=(parseFloat(a[u])*10).toString();b.box=a}}S.splice(0,++p)}for(let m=0;m<b.length;m++)(0,M.assignPDBBonds)(b[m],x);return b}},"./src/parsers/LAMMPSTRJ.ts":(k,R,g)=>{g.r(R),g.d(R,{LAMMPSTRJ:()=>L});var M=g("./src/parsers/utils/assignBonds.ts");const z={id:"serial",type:"atom",element:"elem",q:"charge",radius:"radius",x:"x",xu:"x",xs:"x",xsu:"x",y:"y",yu:"y",ys:"y",ysu:"y",z:"z",zu:"z",zs:"z",zsu:"z"};function L(B,x){const b=[],S=B.split(/\r?\n|\r/);let m=0,T=0,D=0;for(;D<S.length-9;){for(var p=D;p<S.length;p++)if(S[p].match(/ITEM: NUMBER OF ATOMS/)&&(T=parseInt(S[p+1])),S[p].match(/ITEM: ATOMS/)){m=p+1;break}const A=S[m-1].replace("ITEM: ATOMS ","").split(" ");b.push([]);for(let l=m;l<m+T;l++){const n={},a={},u=S[l].split(" ");for(let f=0;f<u.length;f++){const d=z[A[f]];d!==void 0&&(d==="serial"?n[d]=parseInt(u[f]):d==="x"||d==="y"||d==="z"?n[d]=parseFloat(u[f]):d==="charge"||d==="radius"?a[d]=parseFloat(u[f]):n[d]=u[f]),n.properties=a,n.bonds=[],n.bondOrder=[]}b[b.length-1][l-m]=n}D=m+T-1}if(x.assignBonds)for(let A=0;A<b.length;A++)(0,M.assignBonds)(b[A],x);return b}},"./src/parsers/MMTF.ts":(k,R,g)=>{g.r(R),g.d(R,{MMTFparser:()=>T});var M=g("./src/utilities.ts"),z=g("./src/WebGL/index.ts"),L=g("./src/parsers/utils/computeSecondaryStructure.ts"),B=g("./src/parsers/utils/processSymmetries.ts"),x=g("./src/vendor/mmtf.js"),b=function(D){return String.fromCharCode.apply(null,D).replace(/\0/g,"")},S=function(D){return D==0||D==2||D==4?"h":D==3?"s":"c"};let m=new Set(["D-SACCHARIDE","D-SACCHARIDE 1,4 AND 1,4 LINKING","D-SACCHARIDE 1,4 AND 1,6 LINKING","L-SACCHARIDE","L-SACCHARIDE 1,4 AND 1,4 LINKING","L-SACCHARIDE 1,4 AND 1,6 LINKING","NON-POLYMER","OTHER","PEPTIDE-LIKE","SACCHARIDE"]);function T(D,p){var A=!p.keepH,l=p.altLoc?p.altLoc:"A",n=!!p.noSecondaryStructure,a=!p.noComputeSecondaryStructure,u=!p.doAssembly,f=p.assemblyIndex?p.assemblyIndex:0;typeof D=="string"?D=(0,M.base64ToArray)(D):D=new Uint8Array(D);var d=x.decode(D),r=[[]],o=r.modelData=[],v=0,h=0,y=0,E=d.secStructList,w=d.bFactorList,W=d.altLocList,P=d.occupancyList,j=d.bondAtomList,V=d.bondOrderList,G=d.numModels;if(G==0)return r;p.multimodel||(G=1);var F,H,K,U,N,Y,ne=[];if(!u&&d.bioAssemblyList&&d.bioAssemblyList.length>0){var ae=d.bioAssemblyList[f].transformList;for(F=0,Y=ae.length;F<Y;F++){var he=new z.Matrix4(ae[F].matrix);he.transpose(),ne.push(he)}}var oe=null;if(d.unitCell){var pe=d.unitCell;oe={a:pe[0],b:pe[1],c:pe[2],alpha:pe[3],beta:pe[4],gamma:pe[5]}}let ue=[];d.entityList.forEach(Ee=>{Ee.chainIndexList.forEach(q=>{ue[q]=Ee.type=="polymer"})});var ge=0;for(N=0;N<G;N++){var Fe=d.chainsPerModel[N],Be=r[r.length-1],ke=[];for(o.push({symmetries:ne,cryst:oe}),F=0;F<Fe;++F){var be=d.groupsPerChain[v],fe=b(d.chainIdList.subarray(v*4,v*4+4));d.chainNameList&&(fe=b(d.chainNameList.subarray(v*4,v*4+4)));var De=h,Ve="";for(H=0;H<be;++H){var Xe=d.groupList[d.groupTypeList[h]],it=Xe.atomNameList.length,nt=0,et=!1,$e=!1;if(E){nt=E[h];var Qe=S(nt);(h==0||Qe!=Ve)&&(et=!0),Ve=Qe;var Ye=h+1;(Ye>=E.length||S(E[Ye]!=Qe))&&($e=!0)}var Ge=d.groupIdList[h],ot=Xe.groupName;let Ee=Xe.chemCompType;var st=y;let q=m.has(Ee)||!ue[v];for(K=0;K<it;++K){var Q=Xe.elementList[K];if(A&&Q=="H"){y+=1;continue}var ee="";w&&(ee=w[y]);var re="";W&&W[y]&&(re=String.fromCharCode(W[y]));var Se="";if(P&&(Se=P[y]),re!=""&&re!=l&&l!="*"){y+=1;continue}var ve=d.atomIdList[y],je=Xe.atomNameList[K],Ie=0;Xe.atomChargeList&&(Ie=Xe.atomChargeList[K]);var J=d.xCoordList[y],me=d.yCoordList[y],Te=d.zCoordList[y];ke[y]=Be.length,Be.push({resn:ot,x:J,y:me,z:Te,elem:Q,hetflag:q,chain:fe,resi:Ge,icode:re,rescode:Ge+(re!=" "?"^"+re:""),serial:ve,altLoc:re,index:y,atom:je,bonds:[],ss:S(nt),ssbegin:et,ssend:$e,bondOrder:[],properties:{charge:Ie,occupancy:Se},b:ee}),y+=1}var He=Xe.bondAtomList;for(K=0,U=Xe.bondOrderList.length;K<U;++K){var _e=st+He[K*2],Ue=st+He[K*2+1],$=Xe.bondOrderList[K],We=ke[_e],rt=ke[Ue],I=Be[We],Ae=Be[rt];I&&Ae&&(I.bonds.push(rt),I.bondOrder.push($),Ae.bonds.push(We),Ae.bondOrder.push($))}h+=1}for(h=De,H=0;H<be;++H)h+=1;v+=1}if(j)for(let Ee=ge,q=j.length;Ee<q;Ee+=2){let de=j[Ee],we=j[Ee+1],ut=V?V[Ee/2]:1;if(de>=y){ge=Ee;break}let at=ke[de],tt=ke[we],vt=Be[at],ti=Be[tt];vt&&ti&&(vt.bonds.push(tt),vt.bondOrder.push(ut),ti.bonds.push(at),ti.bondOrder.push(ut))}p.multimodel&&(p.onemol||r.push([]))}if(!u)for(let Ee=0;Ee<r.length;Ee++)(0,B.processSymmetries)(o[Ee].symmetries,r[Ee],p,o[Ee].cryst);return a&&!n&&(0,L.computeSecondaryStructure)(r,p.hbondCutoff),r}},"./src/parsers/MOL2.ts":(k,R,g)=>{g.r(R),g.d(R,{MOL2:()=>z});let M={"C.1":"C",C1:"C","C.2":"C",C2:"C","C.3":"C",C3:"C","C.ar":"C",Car:"C","C.cat":"C",Ccat:"C","H.spc":"H",Hspc:"H","H.t3p":"H",Ht3p:"H","N.1":"N",N1:"N","N.2":"N",N2:"N","N.3":"N",N3:"N","N.4":"N",N4:"N","N.am":"N",Nam:"N","N.ar":"N",Nar:"N","N.p13":"N",Np13:"N","O.2":"O",O2:"O","O.3":"O",O3:"O","O.co2":"O",Oco2:"O","O.spc":"O",Ospc:"O","O.t3p":"O",Ot3p:"O","P.3":"P",P3:"P","S.2":"S",S2:"S","S.3":"S",S3:"S","S.o":"S",So:"S","S.o2":"S",So2:"S"};function z(L,B){var x=[[]],b=!1;typeof B.keepH<"u"&&(b=!B.keepH);var S=L.search(/@<TRIPOS>MOLECULE/),m=L.search(/@<TRIPOS>ATOM/);if(S==-1||m==-1)return x;for(var T=L.substring(S).split(/\r?\n|\r/);T.length>0;){var D=[],p=T[2].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),A=parseInt(p[0]),l=0;p.length>1&&(l=parseInt(p[1]));var n=4,a;for(a=3;a<T.length;a++)if(T[a]=="@<TRIPOS>ATOM"){n=a+1;break}var u=x[x.length-1].length,f=u+A,d;for(a=u;a<f;a++){d=T[n++],p=d.replace(/^\s+/,"").replace(/\s+/g," ").split(" ");var r={},o=p[5];if(M[o]!==void 0?o=M[o]:(o=o.split(".")[0],o=o[0].toUpperCase()+o.substring(1).toLowerCase()),r.atom=p[1],r.elem=o,!(r.elem=="H"&&b)){var v=x[x.length-1].length,h=parseInt(p[0]);r.serial=h,r.x=parseFloat(p[2]),r.y=parseFloat(p[3]),r.z=parseFloat(p[4]),r.atom=p[5];var y=parseFloat(p[8]);r.index=v,r.bonds=[],r.bondOrder=[],r.properties={charge:y,partialCharge:y},D[h]=v,x[x.length-1].push(r)}}for(var E=!1;n<T.length;)if(T[n++]=="@<TRIPOS>BOND"){E=!0;break}if(E&&l)for(a=0;a<l;a++){d=T[n++],p=d.replace(/^\s+/,"").replace(/\s+/g," ").split(" ");var w=parseInt(p[1]),W=x[x.length-1][D[w]],P=parseInt(p[2]),j=x[x.length-1][D[P]],V=parseInt(p[3]);isNaN(V)&&(V=1),W!==void 0&&j!==void 0&&(W.bonds.push(D[P]),W.bondOrder.push(V),j.bonds.push(D[w]),j.bondOrder.push(V))}if(B.multimodel){B.onemol||x.push([]),T.splice(0,n),L=T.join(`
`);continue}else break}return x}},"./src/parsers/PDB.ts":(k,R,g)=>{g.r(R),g.d(R,{PDB:()=>z});var M=g("./src/parsers/utils/getSinglePDB.ts");function z(L,B){B=B||{};var x=[],b={};x.modelData=[];for(var S=L.split(/\r?\n|\r/);S.length>0;){var m=(0,M.getSinglePDB)(S,B,b),T=m[0],D=m[1];if(S=m[2],T.length!=0){if(B.multimodel&&B.onemol&&x.length>0)for(var p=x[0].length,A=0;A<T.length;A++){var l=T[A];l.index=A;for(var n=0;n<l.bonds.length;n++)l.bonds[n]+=p;x[0].push(l)}else x.modelData.push(D),x.push(T);if(!B.multimodel)break}}return x}},"./src/parsers/PQR.ts":(k,R,g)=>{g.r(R),g.d(R,{PQR:()=>L});var M=g("./src/parsers/utils/assignPDBBonds.ts"),z=g("./src/parsers/utils/computeSecondaryStructure.ts");function L(B,x){var b=[[]],S=!x.noSecondaryStructure;b.modelData=[{symmetries:[]}];var m=[],T=B.split(/\r?\n|\r/),D;for(let E=0;E<T.length;E++){D=T[E].replace(/^\s*/,"");var p=D.substring(0,6);if(p.indexOf("END")==0)if(x.multimodel){x.onemol||b.push([]);continue}else break;else if(p=="ATOM  "||p=="HETATM"){var A;let w=parseInt(D.substring(6,11)),W=D.substring(12,16).replace(/ /g,""),P=D.substring(17,20).trim(),j=D.substring(21,22),V=parseInt(D.substring(22,26));var l=D.substring(30).trim().split(/\s+/),n=parseFloat(l[0]),a=parseFloat(l[1]),u=parseFloat(l[2]),f=parseFloat(l[3]),d=parseFloat(l[4]),r=W[0];W.length>1&&W[1].toUpperCase()!=W[1]&&(r=W.substring(0,2)),D[0]=="H"?A=!0:A=!1,m[w]=b[b.length-1].length,b[b.length-1].push({resn:P,x:n,y:a,z:u,elem:r,hetflag:A,chain:j,resi:V,serial:w,atom:W,bonds:[],ss:"c",bondOrder:[],properties:{charge:f,partialCharge:f,radius:d},pdbline:D})}else if(p=="CONECT"){var o=parseInt(D.substring(6,11)),v=b[b.length-1][m[o]];for(let w=0;w<4;w++){var h=parseInt(D.substring([11,16,21,26][w],[11,16,21,26][w]+5)),y=b[b.length-1][m[h]];v!==void 0&&y!==void 0&&(v.bonds.push(m[h]),v.bondOrder.push(1))}}}for(let E=0;E<b.length;E++)(0,M.assignPDBBonds)(b[E],x),S&&(0,z.computeSecondaryStructure)(b[E],x.hbondCutoff);return b}},"./src/parsers/PRMTOP.ts":(k,R,g)=>{g.r(R),g.d(R,{PRMTOP:()=>M});function M(z){var L=[],B,x=0,b=z.split(/\r?\n|\r/);if(b.length>0&&b[0].includes("VERSION")){var S=b.filter(function(n){return n.includes("POINTERS")||n.includes("ATOM_NAME")||n.includes("CHARGE")||n.includes("RADII")||n.includes("BONDS_INC_HYDROGEN")||n.includes("BONDS_WITHOUT_HYDROGEN")}),m=A("POINTERS");if(m==-1)return[];var T=l(m),D=parseInt(b[m+1].slice(0,T[1]));if(isNaN(D)||D<=0)return[];if(m=A("ATOM_NAME"),m==-1)return[];T=l(m);var p=T[0];for(let n=0;n<D/T[0];n++){n==parseInt(D/T[0])&&(p=D%T[0]);for(let a=0;a<p;a++){let u={},f={charge:"",radii:""};u.serial=x,u.x=0,u.y=0,u.z=0,u.atom=b[m+1].slice(T[1]*a,T[1]*(a+1)).trim(),u.elem=b[m+1].slice(T[1]*a,T[1]*a+1).trim(),u.properties=f,u.bonds=[],u.bondOrder=[],L.push(u),x++}m++}if(m=A("CHARGE"),m!=-1){T=l(m),x=0,p=T[0];for(let n=0;n<D/T[0];n++){n==parseInt(D/T[0])&&(p=D%T[0]);for(let a=0;a<p;a++)L[x].properties.charge=parseFloat(b[m+1].slice(T[1]*a,T[1]*(a+1))),x++;m++}}if(m=A("RADII"),m!=-1){T=l(m),x=0,p=T[0];for(let n=0;n<D/T[0];n++){n==parseInt(D/T[0])&&(p=D%T[0]);for(let a=0;a<p;a++)L[x].properties.radii=parseFloat(b[m+1].slice(T[1]*a,T[1]*(a+1))),x++;m++}}if(m=A("BONDS_WITHOUT_HYDROGEN"),m!=-1)for(T=l(m),x=0,p=T[0],m=m+1;!b[m].match(/^%FLAG/);){b[m+1].match(/^%FLAG/)&&(p=D%T[0]);for(let n=0;n<p;n++)x%3==0?B=parseInt(b[m].slice(T[1]*n,T[1]*(n+1))/3):x%3==1&&L[B].bonds.push(parseInt(b[m].slice(T[1]*n,T[1]*(n+1))/3)),x++;m++}if(m=A("BONDS_INC_HYDROGEN"),m!=-1)for(T=l(m),x=0,p=T[0],m=m+1;!b[m].match(/^%FLAG/);){b[m+1].match(/^%FLAG/)&&(p=D%T[0]);for(let n=0;n<p;n++)x%3==0?B=parseInt(b[m].slice(T[1]*n,T[1]*(n+1))/3):x%3==1&&L[B].bonds.push(parseInt(b[m].slice(T[1]*n,T[1]*(n+1))/3)),x++;m++}}else return[];function A(n){var a=b.indexOf(S.filter(function(u){return u.includes(n)})[0]);if(Number.isInteger(a)&&a>0){for(;!b[a].includes("FORMAT");)a++;return a}else return-1}function l(n){var a=b[n].match(/\((\d*)\S*/),u=b[n].match(/[a-zA-Z](\d*)\)\s*/);return u==null&&(u=b[n].match(/[a-zA-Z](\d*)\.\d*\)\s*/)),[a[1],u[1]]}return[L]}},"./src/parsers/SDF.ts":(k,R,g)=>{g.r(R),g.d(R,{SDF:()=>L});var M=function(B,x){var b=[[]],S=!1;for(typeof x.keepH<"u"&&(S=!x.keepH);B.length>0&&!(B.length<4);){var m=parseInt(B[3].substring(0,3));if(isNaN(m)||m<=0)break;var T=parseInt(B[3].substring(3,6)),D=4;if(B.length<4+m+T)break;var p=[],A=b[b.length-1].length,l=A+m,n,a;for(n=A;n<l;n++,D++){a=B[D];var u={},f=a.substring(31,34).replace(/ /g,"");u.atom=u.elem=f[0].toUpperCase()+f.substring(1).toLowerCase(),(u.elem!=="H"||!S)&&(u.serial=n,p[n]=b[b.length-1].length,u.x=parseFloat(a.substring(0,10)),u.y=parseFloat(a.substring(10,20)),u.z=parseFloat(a.substring(20,30)),u.hetflag=!0,u.bonds=[],u.bondOrder=[],u.properties={},u.index=b[b.length-1].length,b[b.length-1].push(u))}for(n=0;n<T;n++,D++){a=B[D];var d=p[parseInt(a.substring(0,3))-1+A],r=p[parseInt(a.substring(3,6))-1+A],o=parseFloat(a.substring(6));typeof d<"u"&&typeof r<"u"&&(b[b.length-1][d].bonds.push(r),b[b.length-1][d].bondOrder.push(o),b[b.length-1][r].bonds.push(d),b[b.length-1][r].bondOrder.push(o))}if(x.multimodel){for(x.onemol||b.push([]);B[D]!=="$$$$"&&D<B.length;)D++;B.splice(0,++D)}else break}return b},z=function(B,x){var b=[[]],S=!1;for(typeof x.keepH<"u"&&(S=!x.keepH);B.length>0&&!(B.length<8||!B[4].startsWith("M  V30 BEGIN CTAB")||!B[5].startsWith("M  V30 COUNTS")||B[5].length<14);){var m=B[5].substring(13).match(/\S+/g);if(m.length<2)break;var T=parseInt(m[0]);if(isNaN(T)||T<=0)break;var D=parseInt(m[1]),p=7;if(B.length<8+T+D)break;var A=[],l=b[b.length-1].length,n=l+T,a,u;for(a=l;a<n;a++,p++){u=B[p];var f=u.substring(6).match(/\S+/g);if(f.length>4){var d={},r=f[1].replace(/ /g,"");d.atom=d.elem=r[0].toUpperCase()+r.substring(1).toLowerCase(),(d.elem!=="H"||!S)&&(d.serial=a,A[a]=b[b.length-1].length,d.x=parseFloat(f[2]),d.y=parseFloat(f[3]),d.z=parseFloat(f[4]),d.hetflag=!0,d.bonds=[],d.bondOrder=[],d.properties={},d.index=b[b.length-1].length,b[b.length-1].push(d))}}if(B[p]==="M  V30 END ATOM")p++;else break;if(D!==0&&B[p]==="M  V30 BEGIN BOND")p++;else break;for(a=0;a<D;a++,p++){u=B[p];var o=u.substring(6).match(/\S+/g);if(o.length>3){var v=A[parseInt(o[2])-1+l],h=A[parseInt(o[3])-1+l],y=parseFloat(o[1]);typeof v<"u"&&typeof h<"u"&&(b[b.length-1][v].bonds.push(h),b[b.length-1][v].bondOrder.push(y),b[b.length-1][h].bonds.push(v),b[b.length-1][h].bondOrder.push(y))}}if(x.multimodel){for(x.onemol||b.push([]);B[p]!=="$$$$"&&p<B.length;)p++;B.splice(0,++p)}else break}return b};function L(B,x){var b="V2000",S=B.split(/\r?\n|\r/);return S.length>3&&S[3].length>38&&(b=S[3].substring(34,39)),b==="V2000"?M(S,x):b==="V3000"?z(S,x):[[""]]}},"./src/parsers/VASP.ts":(k,R,g)=>{g.r(R),g.d(R,{VASP:()=>L});var M=g("./src/WebGL/index.ts"),z=g("./src/parsers/utils/assignBonds.ts");function L(B,x={}){var b=[[]],S={};const m=x.assignBonds===void 0?!0:x.assignBonds;var T=B.replace(/^\s+/,"").split(/\r?\n/);if(T.length<3)return b;if(T[1].match(/\d+/))S.length=parseFloat(T[1]);else return console.log("Warning: second line of the vasp structure file must be a number"),b;if(S.length<0)return console.log("Warning: Vasp implementation for negative lattice lengths is not yet available"),b;S.xVec=new Float32Array(T[2].replace(/^\s+/,"").split(/\s+/)),S.yVec=new Float32Array(T[3].replace(/^\s+/,"").split(/\s+/)),S.zVec=new Float32Array(T[4].replace(/^\s+/,"").split(/\s+/));var D=new M.Matrix3(S.xVec[0],S.xVec[1],S.xVec[2],S.yVec[0],S.yVec[1],S.yVec[2],S.zVec[0],S.zVec[1],S.zVec[2]);D.multiplyScalar(S.length),b.modelData=[{symmetries:[],cryst:{matrix:D}}];var p=T[5].trim().split(/\s+/),A=new Int16Array(T[6].trim().split(/\s+/)),l=T[7].trim(),n=!1;if(l.match(/S/)&&(n=!0,l=T[8].trim()),l.toLowerCase()[0]=="c")l="cartesian";else if(l.toLowerCase()[0]=="d")l="direct";else return console.log("Warning: Unknown vasp mode in POSCAR file: mode must be either C(artesian) or D(irect)"),b;if(p.length!=A.length)return console.log("Warning: declaration of atomary species wrong:"),console.log(p),console.log(A),b;n?T.splice(0,9):T.splice(0,8);for(var a=0,u=0,f=p.length;u<f;u++){for(var d=p[u],r=0,o=A[u];r<o;r++){var v=new Float32Array(T[a+r].trim().split(/\s+/)),h={};h.elem=d,l=="cartesian"?(h.x=S.length*v[0],h.y=S.length*v[1],h.z=S.length*v[2]):(h.x=S.length*(v[0]*S.xVec[0]+v[1]*S.yVec[0]+v[2]*S.zVec[0]),h.y=S.length*(v[0]*S.xVec[1]+v[1]*S.yVec[1]+v[2]*S.zVec[1]),h.z=S.length*(v[0]*S.xVec[2]+v[1]*S.yVec[2]+v[2]*S.zVec[2])),h.bonds=[],h.bondOrder=[],b[0].push(h)}a+=A[u]}if(m)for(let y=0;y<b.length;y++)(0,z.assignBonds)(b[y],x);return b}},"./src/parsers/XYZ.ts":(k,R,g)=>{g.r(R),g.d(R,{XYZ:()=>L});var M=g("./src/WebGL/index.ts"),z=g("./src/parsers/utils/assignBonds.ts");function L(B,x){x=x||{};for(var b=[[]],S=x.assignBonds===void 0?!0:x.assignBonds,m=B.trimStart().split(/\r?\n|\r/);m.length>0&&!(m.length<3);){var T=parseInt(m[0]);if(isNaN(T)||T<=0||m.length<T+2)break;var D=/Lattice\s*=\s*["\{\}]([^"\{\}]+)["\{\}]\s*/gi,p=D.exec(m[1]);if(p!=null&&p.length>1){var A=new Float32Array(p[1].split(/\s+/)),l=new M.Matrix3(A[0],A[3],A[6],A[1],A[4],A[7],A[2],A[5],A[8]);b.modelData=[{cryst:{matrix:l}}]}for(var n=2,a=b[b.length-1].length,u=a+T,f=a;f<u;f++){var d=m[n++],r=d.trim().split(/\s+/),o={};o.serial=f;var v=r[0];o.atom=o.elem=v[0].toUpperCase()+v.substring(1,2).toLowerCase(),o.x=parseFloat(r[1]),o.y=parseFloat(r[2]),o.z=parseFloat(r[3]),o.hetflag=!0,o.bonds=[],o.bondOrder=[],o.properties={},b[b.length-1][f]=o,r.length>=7&&(o.dx=parseFloat(r[4]),o.dy=parseFloat(r[5]),o.dz=parseFloat(r[6]))}if(x.multimodel)b.push([]),m.splice(0,n);else break}if(S)for(let y=0;y<b.length;y++)(0,z.assignBonds)(b[y],x);if(x.onemol){var h=b;b=[],b.push(h[0]);for(let y=1;y<h.length;y++){let E=b[0].length;for(let w=0;w<h[y].length;w++){let W=h[y][w];for(let P=0;P<W.bonds.length;P++)W.bonds[P]=W.bonds[P]+E;W.index=b[0].length,W.serial=b[0].length,b[0].push(W)}}}return b}},"./src/parsers/cifutils/category.ts":(k,R,g)=>{g.r(R),g.d(R,{Category:()=>z});var M=g("./src/parsers/cifutils/decoder.ts");function z(L){const B=Object.create(null),x=Object.create(null);for(const b of L.columns)B[b.name]=b;return{rowCount:L.rowCount,name:L.name.substring(1),fieldNames:L.columns.map(b=>b.name),getField(b){const S=B[b];if(S)return x[b]||(x[b]=(0,M.decode)(S.data)),x[b]}}}},"./src/parsers/cifutils/decoder.ts":(k,R,g)=>{g.r(R),g.d(R,{decode:()=>B});var M=g("./src/parsers/cifutils/encoding.ts");const z=new Uint16Array(new Uint8Array([18,52]).buffer)[0]===13330;function L(E,w){const W=new ArrayBuffer(E.length),P=new Uint8Array(W);for(let j=0,V=E.length;j<V;j+=w)for(let G=0;G<w;G++)P[j+w-G-1]=E[j+G];return W}function B(E){let w=E.data;for(let W=E.encoding.length-1;W>=0;W--)w=x(w,E.encoding[W]);return w}function x(E,w){switch(w.kind){case"ByteArray":switch(w.type){case M.Encoding.IntDataType.Uint8:return E;case M.Encoding.IntDataType.Int8:return m(E);case M.Encoding.IntDataType.Int16:return D(E);case M.Encoding.IntDataType.Uint16:return p(E);case M.Encoding.IntDataType.Int32:return A(E);case M.Encoding.IntDataType.Uint32:return l(E);case M.Encoding.FloatDataType.Float32:return n(E);case M.Encoding.FloatDataType.Float64:return a(E);default:throw new Error("unreachable")}case"FixedPoint":return u(E,w);case"IntervalQuantization":return f(E,w);case"RunLength":return d(E,w);case"Delta":return r(E,w);case"IntegerPacking":return h(E,w);case"StringArray":return y(E,w)}}function b(E,w){switch(E){case M.Encoding.IntDataType.Int8:return new Int8Array(w);case M.Encoding.IntDataType.Int16:return new Int16Array(w);case M.Encoding.IntDataType.Int32:return new Int32Array(w);case M.Encoding.IntDataType.Uint8:return new Uint8Array(w);case M.Encoding.IntDataType.Uint16:return new Uint16Array(w);case M.Encoding.IntDataType.Uint32:return new Uint32Array(w);default:return new Int32Array(w)}}function S(E,w){switch(E){case M.Encoding.FloatDataType.Float32:return new Float32Array(w);case M.Encoding.FloatDataType.Float64:return new Float64Array(w);default:return new Float64Array(w)}}function m(E){return new Int8Array(E.buffer,E.byteOffset)}function T(E,w,W){return(E.byteOffset!=0||E.byteLength!=E.buffer.byteLength)&&(E=new Uint8Array(E)),z?new W(E.buffer):new W(L(E,w))}function D(E){return T(E,2,Int16Array)}function p(E){return T(E,2,Uint16Array)}function A(E){return T(E,4,Int32Array)}function l(E){return T(E,4,Uint32Array)}function n(E){return T(E,4,Float32Array)}function a(E){return T(E,8,Float64Array)}function u(E,w){const W=E.length,P=S(w.srcType,W),j=1/w.factor;for(let V=0;V<W;V++)P[V]=j*E[V];return P}function f(E,w){const W=E.length,P=S(w.srcType,W),j=(w.max-w.min)/(w.numSteps-1),V=w.min;for(let G=0;G<W;G++)P[G]=V+j*E[G];return P}function d(E,w){const W=b(w.srcType,w.srcSize);let P=0;for(let j=0,V=E.length;j<V;j+=2){const G=E[j],F=E[j+1];for(let H=0;H<F;++H)W[P++]=G}return W}function r(E,w){const W=E.length,P=b(w.srcType,W);if(!W)return E;P[0]=E[0]+(w.origin|0);for(let j=1;j<W;++j)P[j]=E[j]+P[j-1];return P}function o(E,w){const W=w.byteCount===1?127:32767,P=-W-1,j=E.length,V=new Int32Array(w.srcSize);let G=0,F=0;for(;G<j;){let H=0,K=E[G];for(;K===W||K===P;)H+=K,G++,K=E[G];H+=K,V[F]=H,G++,F++}return V}function v(E,w){const W=w.byteCount===1?255:65535,P=E.length,j=new Int32Array(w.srcSize);let V=0,G=0;for(;V<P;){let F=0,H=E[V];for(;H===W;)F+=H,V++,H=E[V];F+=H,j[G]=F,V++,G++}return j}function h(E,w){return E.length===w.srcSize?E:w.isUnsigned?v(E,w):o(E,w)}function y(E,w){const W=B({encoding:w.offsetEncoding,data:w.offsets}),P=B({encoding:w.dataEncoding,data:E}),j=w.stringData,V=new Array(W.length);V[0]="";for(let H=1,K=W.length;H<K;H++)V[H]=j.substring(W[H-1],W[H]);let G=0;const F=new Array(P.length);for(let H=0,K=P.length;H<K;H++)F[G++]=V[P[H]+1];return F}},"./src/parsers/cifutils/encoding.ts":(k,R,g)=>{g.r(R),g.d(R,{Encoding:()=>z,VERSION:()=>M});const M="0.3.0";var z;(function(L){(function(b){b[b.Int8=1]="Int8",b[b.Int16=2]="Int16",b[b.Int32=3]="Int32",b[b.Uint8=4]="Uint8",b[b.Uint16=5]="Uint16",b[b.Uint32=6]="Uint32"})(L.IntDataType||(L.IntDataType={})),function(b){b[b.Float32=32]="Float32",b[b.Float64=33]="Float64"}(L.FloatDataType||(L.FloatDataType={}));function B(b){let S;return b instanceof Int8Array?S=L.IntDataType.Int8:b instanceof Int16Array?S=L.IntDataType.Int16:b instanceof Int32Array?S=L.IntDataType.Int32:b instanceof Uint8Array?S=L.IntDataType.Uint8:b instanceof Uint16Array?S=L.IntDataType.Uint16:b instanceof Uint32Array?S=L.IntDataType.Uint32:b instanceof Float32Array?S=L.FloatDataType.Float32:b instanceof Float64Array?S=L.FloatDataType.Float64:S=L.IntDataType.Int32,S}L.getDataType=B;function x(b){if(b instanceof Int8Array||b instanceof Int16Array||b instanceof Int32Array)return!0;for(let S=0,m=b.length;S<m;S++)if(S<0)return!1;return!0}L.isSignedIntegerDataType=x})(z||(z={}))},"./src/parsers/index.ts":(k,R,g)=>{g.r(R),g.d(R,{Parsers:()=>u,bondLength:()=>a.bondLength,setBondLength:()=>a.setBondLength});var M=g("./src/parsers/VASP.ts"),z=g("./src/parsers/CUBE.ts"),L=g("./src/parsers/XYZ.ts"),B=g("./src/parsers/SDF.ts"),x=g("./src/parsers/CDJSON.ts"),b=g("./src/parsers/CIF.ts"),S=g("./src/parsers/MOL2.ts"),m=g("./src/parsers/PDB.ts"),T=g("./src/parsers/PQR.ts"),D=g("./src/parsers/MMTF.ts"),p=g("./src/parsers/PRMTOP.ts"),A=g("./src/parsers/GRO.ts"),l=g("./src/parsers/LAMMPSTRJ.ts"),n=g("./src/parsers/BCIF.ts"),a=g("./src/parsers/utils/bondLength.ts");const u={vasp:M.VASP,VASP:M.VASP,cube:z.CUBE,CUBE:z.CUBE,xyz:L.XYZ,XYZ:L.XYZ,sdf:B.SDF,SDF:B.SDF,json:x.CDJSON,cdjson:x.CDJSON,CDJSON:x.CDJSON,mcif:b.CIF,cif:b.CIF,CIF:b.CIF,mol2:S.MOL2,MOL2:S.MOL2,pdb:m.PDB,PDB:m.PDB,pdbqt:m.PDB,PDBQT:m.PDB,pqr:T.PQR,PQR:T.PQR,mmtf:D.MMTFparser,MMTF:D.MMTFparser,prmtop:p.PRMTOP,PRMTOP:p.PRMTOP,gro:A.GRO,GRO:A.GRO,lammpstrj:l.LAMMPSTRJ,LAMMPSTRJ:l.LAMMPSTRJ,bcif:n.BCIF,BCIF:n.BCIF}},"./src/parsers/utils/anumToSymbol.ts":(k,R,g)=>{g.r(R),g.d(R,{anumToSymbol:()=>M});const M={1:"H",2:"He",3:"Li",4:"Be",5:"B",6:"C",7:"N",8:"O",9:"F",10:"Ne",11:"Na",12:"Mg",13:"Al",14:"Si",15:"P",16:"S",17:"Cl",18:"Ar",19:"K",20:"Ca",21:"Sc",22:"Ti",23:"V",24:"Cr",25:"Mn",26:"Fe",27:"Co",28:"Ni",29:"Cu",30:"Zn",31:"Ga",32:"Ge",33:"As",34:"Se",35:"Br",36:"Kr",37:"Rb",38:"Sr",39:"Y",40:"Zr",41:"Nb",42:"Mo",43:"Tc",44:"Ru",45:"Rh",46:"Pd",47:"Ag",48:"Cd",49:"In",50:"Sn",51:"Sb",52:"Te",53:"I",54:"Xe",55:"Cs",56:"Ba",71:"Lu",72:"Hf",73:"Ta",74:"W",75:"Re",76:"Os",77:"Ir",78:"Pt",79:"Au",80:"Hg",81:"Tl",82:"Pb",83:"Bi",84:"Po",85:"At",86:"Rn",87:"Fr",88:"Ra",104:"Rf",105:"Db",106:"Sg",107:"Bh",108:"Hs",109:"Mt",110:"Ds",111:"Rg",112:"Cn",113:"Nh",114:"Fl",115:"Mc",116:"Lv",117:"Ts",118:"Og",57:"La",58:"Ce",59:"Pr",60:"Nd",61:"Pm",62:"Sm",63:"Eu",64:"Gd",65:"Tb",66:"Dy",67:"Ho",68:"Er",69:"Tm",70:"Yb",89:"Ac",90:"Th",91:"Pa",92:"U",93:"Np",94:"Pu",95:"Am",96:"Cm",97:"Bk",98:"Cf",99:"Es",100:"Fm",101:"Md",102:"No"}},"./src/parsers/utils/areConnected.ts":(k,R,g)=>{g.r(R),g.d(R,{areConnected:()=>L});var M=g("./src/parsers/utils/bondLength.ts");const z=new Set(["Na","K","Ca","Mg","Mn","Sr"]);function L(B,x,b){if(b&&b.unboundCations&&(z.has(B.elem)||z.has(x.elem)))return!1;let S=(0,M.bondLength)(B.elem)+(0,M.bondLength)(x.elem);S+=.25,S*=S;let m=B.x-x.x;if(m*=m,m>S)return!1;let T=B.y-x.y;if(T*=T,T>S)return!1;let D=B.z-x.z;if(D*=D,D>S)return!1;const p=m+T+D;return!(isNaN(p)||p<.5||p>S||B.altLoc!==x.altLoc&&B.altLoc.trim()!==""&&x.altLoc.trim()!=="")}},"./src/parsers/utils/assignBackboneHBonds.ts":(k,R,g)=>{g.r(R),g.d(R,{assignBackboneHBonds:()=>M});function M(z,L){const B=L||3.2,x=B*B,b=[];for(let S=0,m=z.length;S<m;S++){z[S].index=S;const T=z[S];!T.hetflag&&(T.atom==="N"||T.atom==="O")&&(b.push(T),T.hbondOther=null,T.hbondDistanceSq=Number.POSITIVE_INFINITY)}b.sort(function(S,m){return S.z-m.z});for(let S=0,m=b.length;S<m;S++){const T=b[S];for(let D=S+1;D<m;D++){const p=b[D],A=p.z-T.z;if(A>B)break;if(p.atom==T.atom)continue;const l=Math.abs(p.y-T.y);if(l>B)continue;const n=Math.abs(p.x-T.x);if(n>B)continue;const a=n*n+l*l+A*A;a>x||p.chain==T.chain&&Math.abs(p.resi-T.resi)<4||(a<T.hbondDistanceSq&&(T.hbondOther=p,T.hbondDistanceSq=a),a<p.hbondDistanceSq&&(p.hbondOther=T,p.hbondDistanceSq=a))}}}},"./src/parsers/utils/assignBonds.ts":(k,R,g)=>{g.r(R),g.d(R,{assignBonds:()=>B});var M=g("./src/parsers/utils/areConnected.ts");const z=[{x:0,y:0,z:1},{x:0,y:1,z:-1},{x:0,y:1,z:0},{x:0,y:1,z:1},{x:1,y:-1,z:-1},{x:1,y:-1,z:0},{x:1,y:-1,z:1},{x:1,y:0,z:-1},{x:1,y:0,z:0},{x:1,y:0,z:1},{x:1,y:1,z:-1},{x:1,y:1,z:0},{x:1,y:1,z:1}],L=4.95;function B(x,b){for(let T=0,D=x.length;T<D;T++)x[T].index||(x[T].index=T);const S={x:{y:{z:[]}}};for(let T=0;T<x.length;T++){const D=x[T],p=Math.floor(D.x/L),A=Math.floor(D.y/L),l=Math.floor(D.z/L);S[p]||(S[p]={}),S[p][A]||(S[p][A]={}),S[p][A][l]||(S[p][A][l]=[]),S[p][A][l].push(D)}function m(T,D){for(let p=0;p<T.length;p++){const A=T[p];for(let l=0;l<D.length;l++){const n=D[l];if((0,M.areConnected)(A,n,b)){const a=A.bonds.indexOf(n.index),u=n.bonds.indexOf(A.index);a===-1&&u===-1?(A.bonds.push(n.index),A.bondOrder.push(1),n.bonds.push(A.index),n.bondOrder.push(1)):a===-1?(A.bonds.push(n.index),A.bondOrder.push(n.bondOrder[u])):u===-1&&(n.bonds.push(A.index),n.bondOrder.push(A.bondOrder[a]))}}}}for(let T in S){const D=parseInt(T);for(let p in S[D]){const A=parseInt(p);for(let l in S[D][A]){const n=parseInt(l),a=S[D][A][n];for(let u=0;u<a.length;u++){const f=a[u];for(let d=u+1;d<a.length;d++){const r=a[d];(0,M.areConnected)(f,r,b)&&f.bonds.indexOf(r.index)==-1&&(f.bonds.push(r.index),f.bondOrder.push(1),r.bonds.push(f.index),r.bondOrder.push(1))}}for(let u=0;u<z.length;u++){const f=z[u];if(!S[D+f.x]||!S[D+f.x][A+f.y]||!S[D+f.x][A+f.y][n+f.z])continue;const d=S[D+f.x][A+f.y][n+f.z];m(a,d)}}}}}},"./src/parsers/utils/assignPDBBonds.ts":(k,R,g)=>{g.r(R),g.d(R,{assignPDBBonds:()=>B});var M=g("./src/parsers/utils/areConnected.ts"),z=g("./src/parsers/utils/assignBonds.ts"),L=g("./src/parsers/utils/standardResidues.ts");function B(x,b){const S=[],m=[];for(let A=0,l=x.length;A<l;A++){const n=x[A];n.index=A,n.hetflag||!L.standardResidues.has(n.resn)?m.push(n):S.push(n)}(0,z.assignBonds)(m,b),S.sort(function(A,l){return A.chain!==l.chain?A.chain<l.chain?-1:1:A.resi-l.resi});let T=-1,D=-1,p;for(let A=0,l=S.length;A<l;A++){const n=S[A];n.resi!==T&&(T=n.resi,p||D++,p=!1),n.reschain=D;for(let a=A+1;a<S.length;a++){const u=S[a];if(u.chain!==n.chain||u.resi-n.resi>1)break;(0,M.areConnected)(n,u,b)&&(n.bonds.indexOf(u.index)===-1&&(n.bonds.push(u.index),n.bondOrder.push(1),u.bonds.push(n.index),u.bondOrder.push(1)),n.resi!==u.resi&&(p=!0))}}}},"./src/parsers/utils/atomNameToElem.ts":(k,R,g)=>{g.r(R),g.d(R,{atomNameToElem:()=>z});var M=g("./src/parsers/utils/bondLength.ts");function z(L,B){let x=L.replace(/ /g,"");return x.length>0&&x[0]==="H"&&x!=="Hg"&&x!=="He"&&x!=="Hf"&&x!=="Hs"&&x!=="Ho"&&(x="H"),x.length>1&&(x=x[0].toUpperCase()+x.substring(1).toLowerCase(),M.bondTable[x]===void 0?x=x[0]:B&&(x==="Ca"||x==="Cd")&&(x="C")),x}},"./src/parsers/utils/bondLength.ts":(k,R,g)=>{g.r(R),g.d(R,{bondLength:()=>z,bondTable:()=>M,setBondLength:()=>L});let M={H:.37,He:.32,Li:1.34,Be:.9,B:.82,C:.77,N:.75,O:.73,F:.71,Ne:.69,Na:1.54,Mg:1.3,Al:1.18,Si:1.11,P:1.06,S:1.02,Cl:.99,Ar:.97,K:1.96,Ca:1.74,Sc:1.44,Ti:1.56,V:1.25,Mn:1.39,Fe:1.25,Co:1.26,Ni:1.21,Cu:1.38,Zn:1.31,Ga:1.26,Ge:1.22,Se:1.16,Br:1.14,Kr:1.1,Rb:2.11,Sr:1.92,Y:1.62,Zr:1.48,Nb:1.37,Mo:1.45,Tc:1.56,Ru:1.26,Rh:1.35,Pd:1.31,Ag:1.53,Cd:1.48,In:1.44,Sn:1.41,Sb:1.38,Te:1.35,I:1.33,Xe:1.3,Cs:2.25,Ba:1.98,Lu:1.6,Hf:1.5,Ta:1.38,W:1.46,Re:1.59,Os:1.44,Ir:1.37,Pt:1.28,Au:1.44,Hg:1.49,Tl:1.48,Pb:1.47,Bi:1.46,Rn:1.45};function z(B){return M[B]||1.6}function L(B,x){x<0&&(x=0),M[B]=x}},"./src/parsers/utils/computeSecondaryStructure.ts":(k,R,g)=>{g.r(R),g.d(R,{computeSecondaryStructure:()=>z});var M=g("./src/parsers/utils/assignBackboneHBonds.ts");function z(L,B){(0,M.assignBackboneHBonds)(L,B);const x={};let b,S,m,T,D,p;for(b=0,S=L.length;b<S;b++)if(D=L[b],x[D.chain]===void 0&&(x[D.chain]=[]),isFinite(D.hbondDistanceSq)){const A=D.hbondOther;x[A.chain]===void 0&&(x[A.chain]=[]),Math.abs(A.resi-D.resi)===4&&(x[D.chain][D.resi]="h")}for(m in x)for(T=1;T<x[m].length-1;T++){const A=x[m][T-1],l=x[m][T+1];p=x[m][T],A=="h"&&A==l&&p!=A&&(x[m][T]=A)}for(b=0,S=L.length;b<S;b++)D=L[b],isFinite(D.hbondDistanceSq)&&x[D.chain][D.resi]!="h"&&D.ss!=="h"&&(x[D.chain][D.resi]="maybesheet");for(let A=0,l=L.length;A<l;A++)if(D=L[A],isFinite(D.hbondDistanceSq)&&x[D.chain][D.resi]=="maybesheet"){let n=D.hbondOther,a=x[n.chain][n.resi];(a=="maybesheet"||a=="s")&&(x[D.chain][D.resi]="s",x[n.chain][n.resi]="s")}for(let A in x){for(let l=1;l<x[A].length-1;l++){const n=x[A][l-1],a=x[A][l+1];p=x[A][l],n=="s"&&n==a&&p!=n&&(x[A][l]=n)}for(let l=0;l<x[A].length;l++){const n=x[A][l];(n=="h"||n=="s")&&x[A][l-1]!=n&&x[A][l+1]!=n&&delete x[A][l]}}for(b=0,S=L.length;b<S;b++)D=L[b],p=x[D.chain][D.resi],delete D.hbondOther,delete D.hbondDistanceSq,!(p===void 0||p==="maybesheet")&&(D.ss=p,x[D.chain][D.resi-1]!=p&&(D.ssbegin=!0),x[D.chain][D.resi+1]!=p&&(D.ssend=!0))}},"./src/parsers/utils/getSinglePDB.ts":(k,R,g)=>{g.r(R),g.d(R,{getSinglePDB:()=>T});var M=g("./src/WebGL/index.ts"),z=g("./src/parsers/utils/atomNameToElem.ts"),L=g("./src/parsers/utils/bondLength.ts"),B=g("./src/parsers/utils/computeSecondaryStructure.ts"),x=g("./src/parsers/utils/isEmpty.ts"),b=g("./src/parsers/utils/processSymmetries.ts"),S=g("./src/parsers/utils/assignPDBBonds.ts"),m=g("./src/parsers/utils/validateBonds.ts");function T(D,p,A){const l=[],n=p.assignBonds===void 0?!0:p.assignBonds,a=!p.keepH,u=!!p.noSecondaryStructure,f=!p.noComputeSecondaryStructure,d=!p.doAssembly,r=p.altLoc?p.altLoc:"A",o={symmetries:[],cryst:void 0};let v,h=[];const y=[];let E;const w={};for(let W=0;W<D.length;W++){E=D[W].replace(/^\s*/,"");const P=E.substring(0,6);let j,V,G;if(P.indexOf("END")===0){if(h=D.slice(W+1),P==="END")for(const F in A)A.hasOwnProperty(F)&&delete A[F];break}else if(P==="ATOM  "||P==="HETATM"){let F,H,K,U,N,Y,ne,ae,he,oe,pe,ue;if(pe=E.substring(16,17),pe!==" "&&pe!==r&&r!=="*"||(oe=parseInt(E.substring(6,11)),v=E.substring(12,16).replace(/ /g,""),F=E.substring(17,20).replace(/ /g,""),H=E.substring(21,22),K=parseInt(E.substring(22,26)),U=E.substring(26,27),N=parseFloat(E.substring(30,38)),Y=parseFloat(E.substring(38,46)),ne=parseFloat(E.substring(46,54)),ue=parseFloat(E.substring(60,68)),he=E.substring(76,78).replace(/ /g,""),he===""||L.bondTable[he]===void 0?he=(0,z.atomNameToElem)(E.substring(12,14),E[0]=="A"):he=he[0].toUpperCase()+he.substring(1).toLowerCase(),he==="H"&&a))continue;P[0]=="H"?ae=!0:ae=!1,y[oe]=l.length,l.push({resn:F,x:N,y:Y,z:ne,elem:he,hetflag:ae,altLoc:pe,chain:H,resi:K,icode:U,rescode:K+(U!==" "?"^"+U:""),serial:oe,atom:v,bonds:[],ss:"c",bondOrder:[],properties:{},b:ue,pdbline:E})}else if(P==="SHEET "){j=E.substring(21,22),V=parseInt(E.substring(22,26)),G=parseInt(E.substring(33,37)),j in A||(A[j]={}),A[j][V]="s1";for(let F=V+1;F<G;F++)A[j][F]="s";A[j][G]="s2"}else if(P==="CONECT"){const F=parseInt(E.substring(6,11)),H=y[F],K=l[H],U=[11,16,21,26];for(let N=0;N<4;N++){const Y=parseInt(E.substring(U[N],U[N]+5)),ne=y[Y];let ae=H+":"+ne;const he=l[ne];if(K!==void 0&&he!==void 0)if(!w[ae])w[ae]=1,(K.bonds.length==0||K.bonds[K.bonds.length-1]!==ne)&&(K.bonds.push(ne),K.bondOrder.push(1));else{w[ae]+=1;for(let oe=0;oe<K.bonds.length;oe++)if(K.bonds[oe]==ne){const pe=w[ae];pe>=4?K.bondOrder[oe]=1:K.bondOrder[oe]=pe}}}}else if(P==="HELIX "){j=E.substring(19,20),V=parseInt(E.substring(21,25)),G=parseInt(E.substring(33,37)),j in A||(A[j]={}),A[j][V]="h1";for(let F=V+1;F<G;F++)A[j][F]="h";A[j][G]="h2"}else if(!d&&P==="REMARK"&&E.substring(13,18)==="BIOMT"){let F,H=new M.Matrix4;for(F=1;F<=3;F++)if(E=D[W].replace(/^\s*/,""),parseInt(E.substring(18,19))==F)H.elements[F-1]=parseFloat(E.substring(23,33)),H.elements[F-1+4]=parseFloat(E.substring(33,43)),H.elements[F-1+8]=parseFloat(E.substring(43,53)),H.elements[F-1+12]=parseFloat(E.substring(53)),W++;else for(;E.substring(13,18)==="BIOMT";)W++,E=D[W].replace(/^\s*/,"");H.elements[3]=0,H.elements[7]=0,H.elements[11]=0,H.elements[15]=1,o.symmetries.push(H),W--}else if(P==="CRYST1"){let F,H,K,U,N,Y;F=parseFloat(E.substring(7,15)),H=parseFloat(E.substring(16,24)),K=parseFloat(E.substring(25,33)),U=parseFloat(E.substring(34,40)),N=parseFloat(E.substring(41,47)),Y=parseFloat(E.substring(48,54)),o.cryst={a:F,b:H,c:K,alpha:U,beta:N,gamma:Y}}else if(P==="ANISOU"){const F=parseInt(E.substring(6,11)),H=y[F],K=l[H];if(K){const U=E.substring(30).trim().split(/\s+/),N={u11:parseInt(U[0]),u22:parseInt(U[1]),u33:parseInt(U[2]),u12:parseInt(U[3]),u13:parseInt(U[4]),u23:parseInt(U[5])};K.uMat=N}}}if((0,m.validateBonds)(l,y),n&&(0,S.assignPDBBonds)(l,p),d||(0,b.processSymmetries)(o.symmetries,l,p,o.cryst),f&&!u&&(0,B.computeSecondaryStructure)(l,p.hbondCutoff),!(0,x.isEmpty)(A))for(let W=0;W<l.length;W++){const P=l[W];if(P!==void 0&&P.chain in A&&P.resi in A[P.chain]){const j=A[P.chain][P.resi];P.ss=j[0],j.length>1&&(j[1]=="1"?P.ssbegin=!0:j[1]=="2"&&(P.ssend=!0))}}return[l,o,h]}},"./src/parsers/utils/isEmpty.ts":(k,R,g)=>{g.r(R),g.d(R,{isEmpty:()=>M});function M(z){for(const L in z)return!1;return!0}},"./src/parsers/utils/processSymmetries.ts":(k,R,g)=>{g.r(R),g.d(R,{processSymmetries:()=>z});var M=g("./src/WebGL/index.ts");function z(L,B,x,b){const S=!x.duplicateAssemblyAtoms,m=B.length;let T=m,D=-1,p=null,A=null;(x.normalizeAssembly||x.wrapAtoms)&&b&&(p=(0,M.conversionMatrix3)(b.a,b.b,b.c,b.alpha,b.beta,b.gamma),A=new M.Matrix3,A.getInverse3(p));let l=function(u){let f=u.clone().applyMatrix3(A);const d=[f.x,f.y,f.z],r=[0,0,0];for(let v=0;v<3;v++){for(;d[v]<-.001;)d[v]+=1,r[v]+=1;for(;d[v]>1.001;)d[v]-=1,r[v]-=1}const o=new M.Vector3(r[0],r[1],r[2]);return o.applyMatrix3(p),o};if(x.normalizeAssembly&&b)for(let u=0;u<L.length;u++){const f=new M.Vector3(0,0,0);for(let r=0;r<m;r++){const o=new M.Vector3(B[r].x,B[r].y,B[r].z);o.applyMatrix4(L[u]),f.add(o)}f.divideScalar(m);const d=l(f);L[u].isNearlyIdentity()&&d.lengthSq()>.001&&(D=u),L[u].translate(d)}if(S){if(L.length>1)for(let u=0;u<B.length;u++){var n=[];for(let f=0;f<L.length;f++)if(!L[f].isNearlyIdentity()){var a=new M.Vector3;a.set(B[u].x,B[u].y,B[u].z),a.applyMatrix4(L[f]),n.push(a)}B[u].symmetries=n}}else{for(let u=0;u<m;u++)B[u].sym=-1;for(let u=0;u<L.length;u++)if(!L[u].isNearlyIdentity()&&D!=u){let f=new M.Vector3;for(let d=0;d<m;d++){const r=[];for(let v=0;v<B[d].bonds.length;v++)r.push(B[d].bonds[v]+T);if(f.set(B[d].x,B[d].y,B[d].z),f.applyMatrix4(L[u]),x.wrapAtoms&&b){let v=l(f);f.add(v)}const o={};for(const v in B[d])o[v]=B[d][v];o.x=f.x,o.y=f.y,o.z=f.z,o.bonds=r,o.sym=u,o.index=B.length,B.push(o)}T=B.length}else for(let f=0;f<m;f++)B[f].sym=u;if(x.wrapAtoms&&b){let u=new M.Vector3;for(let f=0;f<m;f++){u.set(B[f].x,B[f].y,B[f].z);let d=l(u);u.add(d),B[f].x=u.x,B[f].y=u.y,B[f].z=u.z}}if(D>=0){const u=new M.Vector3;for(let f=0;f<m;f++)u.set(B[f].x,B[f].y,B[f].z),u.applyMatrix4(L[D]),B[f].x=u.x,B[f].y=u.y,B[f].z=u.z}L.length=0}}},"./src/parsers/utils/standardResidues.ts":(k,R,g)=>{g.r(R),g.d(R,{standardResidues:()=>M});const M=new Set(["ABU","ACD","ALA","ALB","ALI","ARG","AR0","ASN","ASP","ASX","BAS","CYS","CYH","CYX","CSS","CSH","GLN","GLU","GLX","GLY","HIS","HIE","HID","HIP","HYP","ILE","ILU","LEU","LYS","MET","PCA","PGA","PHE","PR0","PRO","PRZ","SER","THR","TRP","TYR","VAL","A","1MA","C","5MC","OMC","G","1MG","2MG","M2G","7MG","OMG","YG","I","T","U","+U","H2U","5MU","PSU","ACE","F0R","H2O","HOH","WAT"])},"./src/parsers/utils/validateBonds.ts":(k,R,g)=>{g.r(R),g.d(R,{validateBonds:()=>M});function M(z,L){for(let B=0,x=z.length;B<x;B++){const b=z[B];for(let S=0;S<b.bonds.length;S++){const m=b.bonds[S],T=z[m],D=L[b.serial];T&&D&&T.bonds.indexOf(D)<0&&(T.bonds.push(D),T.bondOrder.push(b.bondOrder[S]))}}}},"./src/partialCharges.ts":(k,R,g)=>{g.r(R),g.d(R,{applyPartialCharges:()=>z,partialCharges:()=>M});const M={"ALA:N":-.15,"ALA:CA":.1,"ALA:CB":0,"ALA:C":.6,"ALA:O":-.55,"ARG:N":-.15,"ARG:CA":.1,"ARG:CB":0,"ARG:CG":0,"ARG:CD":.1,"ARG:NE":-.1,"ARG:CZ":.5,"ARG:NH1":.25,"ARG:NH2":.25,"ARG:C":.6,"ARG:O":-.55,"ASN:N":-.15,"ASN:CA":.1,"ASN:CB":0,"ASN:CG":.55,"ASN:OD1":-.55,"ASN:ND2":0,"ASN:C":.6,"ASN:O":-.55,"ASP:N":-.15,"ASP:CA":.1,"ASP:CB":0,"ASP:CG":.14,"ASP:OD1":-.57,"ASP:OD2":-.57,"ASP:C":.6,"ASP:O":-.55,"CYS:N":-.15,"CYS:CA":.1,"CYS:CB":.19,"CYS:SG":-.19,"CYS:C":.6,"CYS:O":-.55,"GLN:N":-.15,"GLN:CA":.1,"GLN:CB":0,"GLN:CG":0,"GLN:CD":.55,"GLN:OE1":-.55,"GLN:NE2":0,"GLN:C":.6,"GLN:O":-.55,"GLU:N":-.15,"GLU:CA":.1,"GLU:CB":0,"GLU:CG":0,"GLU:CD":.14,"GLU:OE1":-.57,"GLU:OE2":-.57,"GLU:C":.6,"GLU:O":-.55,"GLY:N":-.15,"GLY:CA":.1,"GLY:C":.6,"GLY:O":-.55,"HIS:N":-.15,"HIS:CA":.1,"HIS:CB":0,"HIS:CG":.1,"HIS:ND1":-.1,"HIS:CD2":.1,"HIS:NE2":-.4,"HIS:CE1":.3,"HIS:C":.6,"HIS:O":-.55,"ILE:N":-.15,"ILE:CA":.1,"ILE:CB":0,"ILE:CG2":0,"ILE:CG1":0,"ILE:CD":0,"ILE:C":.6,"ILE:O":-.55,"LEU:N":-.15,"LEU:CA":.1,"LEU:CB":0,"LEU:CG":0,"LEU:CD1":0,"LEU:CD2":0,"LEU:C":.6,"LEU:O":-.55,"LYS:N":-.15,"LYS:CA":.1,"LYS:CB":0,"LYS:CG":0,"LYS:CD":0,"LYS:CE":.25,"LYS:NZ":.75,"LYS:C":.6,"LYS:O":-.55,"MET:N":-.15,"MET:CA":.1,"MET:CB":0,"MET:CG":.06,"MET:SD":-.12,"MET:CE":.06,"MET:C":.6,"MET:O":-.55,"PHE:N":-.15,"PHE:CA":.1,"PHE:CB":0,"PHE:CG":0,"PHE:CD1":0,"PHE:CD2":0,"PHE:CE1":0,"PHE:CE2":0,"PHE:CZ":0,"PHE:C":.6,"PHE:O":-.55,"PRO:N":-.25,"PRO:CD":.1,"PRO:CA":.1,"PRO:CB":0,"PRO:CG":0,"PRO:C":.6,"PRO:O":-.55,"SER:N":-.15,"SER:CA":.1,"SER:CB":.25,"SER:OG":-.25,"SER:C":.6,"SER:O":-.55,"THR:N":-.15,"THR:CA":.1,"THR:CB":.25,"THR:OG1":-.25,"THR:CG2":0,"THR:C":.6,"THR:O":-.55,"TRP:N":-.15,"TRP:CA":.1,"TRP:CB":0,"TRP:CG":-.03,"TRP:CD2":.1,"TRP:CE2":-.04,"TRP:CE3":-.03,"TRP:CD1":.06,"TRP:NE1":-.06,"TRP:CZ2":0,"TRP:CZ3":0,"TRP:CH2":0,"TRP:C":.6,"TRP:O":-.55,"TYR:N":-.15,"TYR:CA":.1,"TYR:CB":0,"TYR:CG":0,"TYR:CD1":0,"TYR:CE1":0,"TYR:CD2":0,"TYR:CE2":0,"TYR:CZ":.25,"TYR:OH":-.25,"TYR:C":.6,"TYR:O":-.55,"VAL:N":-.15,"VAL:CA":.1,"VAL:CB":0,"VAL:CG1":0,"VAL:CG2":0,"VAL:C":.6,"VAL:O":-.55};function z(L,B){if((!B||typeof L.partialCharge>"u")&&L.resn&&L.atom){var x=L.resn+":"+L.atom;L.properties.partialCharge=M[x]}}},"./src/specs.ts":(k,R,g)=>{g.r(R)},"./src/utilities.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{PausableTimer:()=>PausableTimer,adjustVolumeStyle:()=>adjustVolumeStyle,base64ToArray:()=>base64ToArray,deepCopy:()=>deepCopy,download:()=>download,extend:()=>extend,get:()=>get,getAtomProperty:()=>getAtomProperty,getColorFromStyle:()=>getColorFromStyle,getElement:()=>getElement,getExtent:()=>getExtent,getPropertyRange:()=>getPropertyRange,getbin:()=>getbin,inflateString:()=>inflateString,isEmptyObject:()=>isEmptyObject,isNumeric:()=>isNumeric,makeFunction:()=>makeFunction,mergeGeos:()=>mergeGeos,specStringToObject:()=>specStringToObject});var _Gradient__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/Gradient.ts"),_VolumeData__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/VolumeData.ts"),_colors__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/colors.ts"),pako__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/pako/dist/pako.esm.mjs");function extend(k,R){for(var g in R)R.hasOwnProperty(g)&&R[g]!==void 0&&(k[g]=R[g]);return k}function deepCopy(k){let R,g,M;if(k==null)return{};if(typeof k!="object"||k===null)return k;R=Array.isArray(k)?[]:{};for(M in k)g=k[M],R[M]=deepCopy(g);return R}function isNumeric(k){var R=typeof k;return(R==="number"||R==="string")&&!isNaN(k-parseFloat(k))}function isEmptyObject(k){var R;for(R in k)return!1;return!0}function makeFunction(callback){return callback&&typeof callback=="string"&&(callback=eval("("+callback+")")),callback&&typeof callback!="function"?(console.warn("Invalid callback provided."),()=>{}):callback}function adjustVolumeStyle(k){k&&(k.volformat&&!(k.voldata instanceof _VolumeData__WEBPACK_IMPORTED_MODULE_1__.VolumeData)&&(k.voldata=new _VolumeData__WEBPACK_IMPORTED_MODULE_1__.VolumeData(k.voldata,k.volformat)),k.volscheme&&(k.volscheme=_Gradient__WEBPACK_IMPORTED_MODULE_0__.Gradient.getGradient(k.volscheme)))}function getExtent(k,R){var g,M,z,L,B,x,b,S,m,T,D=!R;if(g=M=z=9999,L=B=x=-9999,b=S=m=T=0,k.length===0)return[[0,0,0],[0,0,0],[0,0,0]];for(var p=0;p<k.length;p++){var A=k[p];if(!(typeof A>"u"||!isFinite(A.x)||!isFinite(A.y)||!isFinite(A.z))&&(T++,b+=A.x,S+=A.y,m+=A.z,g=g<A.x?g:A.x,M=M<A.y?M:A.y,z=z<A.z?z:A.z,L=L>A.x?L:A.x,B=B>A.y?B:A.y,x=x>A.z?x:A.z,A.symmetries&&D))for(var l=0;l<A.symmetries.length;l++)T++,b+=A.symmetries[l].x,S+=A.symmetries[l].y,m+=A.symmetries[l].z,g=g<A.symmetries[l].x?g:A.symmetries[l].x,M=M<A.symmetries[l].y?M:A.symmetries[l].y,z=z<A.symmetries[l].z?z:A.symmetries[l].z,L=L>A.symmetries[l].x?L:A.symmetries[l].x,B=B>A.symmetries[l].y?B:A.symmetries[l].y,x=x>A.symmetries[l].z?x:A.symmetries[l].z}return[[g,M,z],[L,B,x],[b/T,S/T,m/T]]}function getPropertyRange(k,R){for(var g=Number.POSITIVE_INFINITY,M=Number.NEGATIVE_INFINITY,z=0,L=k.length;z<L;z++){var B=k[z],x=getAtomProperty(B,R);x!=null&&(x<g&&(g=x),x>M&&(M=x))}return!isFinite(g)&&!isFinite(M)?g=M=0:isFinite(g)?isFinite(M)||(M=g):g=M,[g,M]}class PausableTimer{constructor(R,g,M){this.total_time_run=0,this.fn=R,this.arg=M,this.countdown=g,this.start_time=new Date().getTime(),this.ident=setTimeout(R,g,M)}cancel(){clearTimeout(this.ident)}pause(){clearTimeout(this.ident),this.total_time_run=new Date().getTime()-this.start_time}resume(){this.ident=setTimeout(this.fn,Math.max(0,this.countdown-this.total_time_run),this.arg)}}function base64ToArray(k){for(var R=window.atob(k),g=R.length,M=new Uint8Array(g),z=0;z<g;z++)M[z]=R.charCodeAt(z);return M}function getAtomProperty(k,R){var g=null;return k.properties&&typeof k.properties[R]<"u"?g=k.properties[R]:typeof k[R]<"u"&&(g=k[R]),g}function mergeGeos(k,R){var g=R.geometry;g!==void 0&&k.geometryGroups.push(g.geometryGroups[0])}function specStringToObject(k){if(typeof k=="object")return k;if(typeof k>"u"||k==null)return k;try{return JSON.parse(k)}catch{}k=k.replace(/%7E/g,"~");var R=function(D){return isNumeric(D)?Math.floor(parseFloat(D))==parseInt(D)||D.indexOf(".")>=0?parseFloat(D):parseInt(D):D==="true"?!0:D==="false"?!1:D},g={};if(k==="all")return g;for(var M=k.split(";"),z=0;z<M.length;z++){var L=M[z].split(":"),B=L[0],x={},b=L[1];if(b)if(b=b.replace(/~/g,"="),b.indexOf("=")!==-1)for(var S=b.split(","),m=0;m<S.length;m++){var T=S[m].split("=",2);x[T[0]]=R(T[1])}else b.indexOf(",")!==-1?x=b.split(","):x=R(b);g[B]=x}return g}function checkStatus(k){if(!k.ok)throw new Error(`HTTP ${k.status} - ${k.statusText}`);return k}function get(k,R){var g=fetch(k).then(checkStatus).then(M=>M.text());return R?g.then(R):g}function getbin(k,R,g,M){var z;return g=="POST"?z=fetch(k,{method:"POST",body:M}).then(L=>checkStatus(L)).then(L=>L.arrayBuffer()):z=fetch(k).then(L=>checkStatus(L)).then(L=>L.arrayBuffer()),R?z.then(R):z}function download(k,R,g,M){var z="",L="",B="",x=null,b=R.addModel();if(k.indexOf(":")<0&&(k.length==4?k="pdb:"+k:isNaN(k)?k="url:"+k:k="cid:"+k),k.substring(0,5)=="mmtf:"&&(console.warn("WARNING: MMTF now deprecated.  Reverting to bcif."),k="bcif:"+k.slice(5)),k.substring(0,5)==="bcif:")k=k.substring(5).toUpperCase(),B="https://models.rcsb.org/"+k+".bcif.gz",g&&typeof g.noComputeSecondaryStructure>"u"&&(g.noComputeSecondaryStructure=!0),x=new Promise(function(m){getbin(B).then(function(T){b.addMolData(T,"bcif.gz",g),R.zoomTo(),R.render(),m(b)},function(){console.error("fetch of "+B+" failed.")})});else{if(k.substring(0,4)==="pdb:"){if(z="bcif",g&&g.format&&(z=g.format),g&&typeof g.noComputeSecondaryStructure>"u"&&(g.noComputeSecondaryStructure=!0),k=k.substring(4).toUpperCase(),!k.match(/^[1-9][A-Za-z0-9]{3}$/)){alert("Wrong PDB ID");return}z=="bcif"?B="https://models.rcsb.org/"+k.toUpperCase()+".bcif.gz":(L=g&&g.pdbUri?g.pdbUri:"https://files.rcsb.org/view/",B=L+k+"."+z)}else if(k.substring(0,4)=="cid:"){if(z="sdf",k=k.substring(4),!k.match(/^[0-9]+$/)){alert("Wrong Compound ID");return}B="https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/"+k+"/SDF?record_type=3d"}else k.substring(0,4)=="url:"&&(B=k.substring(4),z=B);var S=function(m){b.addMolData(m,z,g),R.zoomTo(),R.render()};x=new Promise(function(m){z=="bcif"?getbin(B).then(function(T){S(T),m(b)}).catch(function(){L=g&&g.pdbUri?g.pdbUri:"https://files.rcsb.org/view/",B=L+k+".pdb",z="pdb",console.warn("falling back to pdb format"),get(B).then(function(T){S(T),m(b)}).catch(function(T){S(""),m(b),console.error("fetch of "+B+" failed: "+T.statusText)})}):get(B).then(function(T){S(T),m(b)}).catch(function(T){S(""),m(b),console.error("fetch of "+B+" failed: "+T.statusText)})})}return M?(x.then(function(m){M(m)}),b):x}function getColorFromStyle(k,R){let g=R.colorscheme;if(typeof _colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[g]<"u")g=_colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[g];else if(typeof g=="string"&&g.endsWith("Carbon")){let B=g.substring(0,g.lastIndexOf("Carbon")).toLowerCase();if(typeof _colors__WEBPACK_IMPORTED_MODULE_2__.htmlColors[B]<"u"){let x=Object.assign({},_colors__WEBPACK_IMPORTED_MODULE_2__.elementColors.defaultColors);x.C=_colors__WEBPACK_IMPORTED_MODULE_2__.htmlColors[B],_colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[g]={prop:"elem",map:x},g=_colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[g]}}let M=k.color;if(typeof R.color<"u"&&R.color!="spectrum"&&(M=R.color),typeof g<"u"){let B,x;if(typeof _colors__WEBPACK_IMPORTED_MODULE_2__.elementColors[g]<"u")g=_colors__WEBPACK_IMPORTED_MODULE_2__.elementColors[g],typeof g[k[g.prop]]<"u"&&(M=g.map[k[g.prop]]);else if(typeof g[k[g.prop]]<"u")M=g.map[k[g.prop]];else if(typeof g.prop<"u"&&typeof g.gradient<"u"){B=g.prop;var z=g.gradient;z instanceof _Gradient__WEBPACK_IMPORTED_MODULE_0__.GradientType||(z=(0,_Gradient__WEBPACK_IMPORTED_MODULE_0__.getGradient)(g));let b=z.range()||[-1,1];x=getAtomProperty(k,B),x!=null&&(M=z.valueToHex(x,b))}else typeof g.prop<"u"&&typeof g.map<"u"?(B=g.prop,x=getAtomProperty(k,B),typeof g.map[x]<"u"&&(M=g.map[x])):typeof R.colorscheme[k.elem]<"u"?M=R.colorscheme[k.elem]:console.warn("Could not interpret colorscheme "+g)}else typeof R.colorfunc<"u"&&(M=R.colorfunc(k));return _colors__WEBPACK_IMPORTED_MODULE_2__.CC.color(M)}function getElement(k){let R=k;return typeof k=="string"?R=document.querySelector("#"+k):typeof k=="object"&&k.get&&(R=k.get(0)),R}function inflateString(k,R=!0){let g;return typeof k=="string"?g=new TextEncoder().encode(k):g=new Uint8Array(k),(0,pako__WEBPACK_IMPORTED_MODULE_3__.inflate)(g,{to:R?"string":null})}},"./node_modules/upng-js/UPNG.js":(k,R,g)=>{(function(){var M={},z;k.exports=M,z=g("./node_modules/upng-js/node_modules/pako/index.js"),function(L,B){L.toRGBA8=function(x){var b=x.width,S=x.height;if(x.tabs.acTL==null)return[L.toRGBA8.decodeImage(x.data,b,S,x).buffer];var m=[];x.frames[0].data==null&&(x.frames[0].data=x.data);for(var T,D=new Uint8Array(b*S*4),p=0;p<x.frames.length;p++){var A=x.frames[p],l=A.rect.x,n=A.rect.y,a=A.rect.width,u=A.rect.height,f=L.toRGBA8.decodeImage(A.data,a,u,x);if(p==0?T=f:A.blend==0?L._copyTile(f,a,u,T,b,S,l,n,0):A.blend==1&&L._copyTile(f,a,u,T,b,S,l,n,1),m.push(T.buffer),T=T.slice(0),A.dispose!=0){if(A.dispose==1)L._copyTile(D,a,u,T,b,S,l,n,0);else if(A.dispose==2){for(var d=p-1;x.frames[d].dispose==2;)d--;T=new Uint8Array(m[d]).slice(0)}}}return m},L.toRGBA8.decodeImage=function(x,b,S,m){var T=b*S,D=L.decode._getBPP(m),p=Math.ceil(b*D/8),A=new Uint8Array(T*4),l=new Uint32Array(A.buffer),n=m.ctype,a=m.depth,u=L._bin.readUshort;if(n==6){var f=T<<2;if(a==8)for(var d=0;d<f;d++)A[d]=x[d];if(a==16)for(var d=0;d<f;d++)A[d]=x[d<<1]}else if(n==2){var r=m.tabs.tRNS,o=-1,v=-1,h=-1;if(r&&(o=r[0],v=r[1],h=r[2]),a==8)for(var d=0;d<T;d++){var y=d<<2,E=d*3;A[y]=x[E],A[y+1]=x[E+1],A[y+2]=x[E+2],A[y+3]=255,o!=-1&&x[E]==o&&x[E+1]==v&&x[E+2]==h&&(A[y+3]=0)}if(a==16)for(var d=0;d<T;d++){var y=d<<2,E=d*6;A[y]=x[E],A[y+1]=x[E+2],A[y+2]=x[E+4],A[y+3]=255,o!=-1&&u(x,E)==o&&u(x,E+2)==v&&u(x,E+4)==h&&(A[y+3]=0)}}else if(n==3){var w=m.tabs.PLTE,W=m.tabs.tRNS,P=W?W.length:0;if(a==1)for(var j=0;j<S;j++)for(var V=j*p,G=j*b,d=0;d<b;d++){var y=G+d<<2,F=x[V+(d>>3)]>>7-((d&7)<<0)&1,H=3*F;A[y]=w[H],A[y+1]=w[H+1],A[y+2]=w[H+2],A[y+3]=F<P?W[F]:255}if(a==2)for(var j=0;j<S;j++)for(var V=j*p,G=j*b,d=0;d<b;d++){var y=G+d<<2,F=x[V+(d>>2)]>>6-((d&3)<<1)&3,H=3*F;A[y]=w[H],A[y+1]=w[H+1],A[y+2]=w[H+2],A[y+3]=F<P?W[F]:255}if(a==4)for(var j=0;j<S;j++)for(var V=j*p,G=j*b,d=0;d<b;d++){var y=G+d<<2,F=x[V+(d>>1)]>>4-((d&1)<<2)&15,H=3*F;A[y]=w[H],A[y+1]=w[H+1],A[y+2]=w[H+2],A[y+3]=F<P?W[F]:255}if(a==8)for(var d=0;d<T;d++){var y=d<<2,F=x[d],H=3*F;A[y]=w[H],A[y+1]=w[H+1],A[y+2]=w[H+2],A[y+3]=F<P?W[F]:255}}else if(n==4){if(a==8)for(var d=0;d<T;d++){var y=d<<2,K=d<<1,U=x[K];A[y]=U,A[y+1]=U,A[y+2]=U,A[y+3]=x[K+1]}if(a==16)for(var d=0;d<T;d++){var y=d<<2,K=d<<2,U=x[K];A[y]=U,A[y+1]=U,A[y+2]=U,A[y+3]=x[K+2]}}else if(n==0){var o=m.tabs.tRNS?m.tabs.tRNS:-1;if(a==1)for(var d=0;d<T;d++){var U=255*(x[d>>3]>>7-(d&7)&1),N=U==o*255?0:255;l[d]=N<<24|U<<16|U<<8|U}if(a==2)for(var d=0;d<T;d++){var U=85*(x[d>>2]>>6-((d&3)<<1)&3),N=U==o*85?0:255;l[d]=N<<24|U<<16|U<<8|U}if(a==4)for(var d=0;d<T;d++){var U=17*(x[d>>1]>>4-((d&1)<<2)&15),N=U==o*17?0:255;l[d]=N<<24|U<<16|U<<8|U}if(a==8)for(var d=0;d<T;d++){var U=x[d],N=U==o?0:255;l[d]=N<<24|U<<16|U<<8|U}if(a==16)for(var d=0;d<T;d++){var U=x[d<<1],N=u(x,d<<1)==o?0:255;l[d]=N<<24|U<<16|U<<8|U}}return A},L.decode=function(x){for(var b=new Uint8Array(x),S=8,m=L._bin,T=m.readUshort,D=m.readUint,p={tabs:{},frames:[]},A=new Uint8Array(b.length),l=0,n,a=0,u=[137,80,78,71,13,10,26,10],f=0;f<8;f++)if(b[f]!=u[f])throw"The input is not a PNG file!";for(;S<b.length;){var d=m.readUint(b,S);S+=4;var r=m.readASCII(b,S,4);if(S+=4,r=="IHDR")L.decode._IHDR(b,S,p);else if(r=="IDAT"){for(var f=0;f<d;f++)A[l+f]=b[S+f];l+=d}else if(r=="acTL")p.tabs[r]={num_frames:D(b,S),num_plays:D(b,S+4)},n=new Uint8Array(b.length);else if(r=="fcTL"){if(a!=0){var o=p.frames[p.frames.length-1];o.data=L.decode._decompress(p,n.slice(0,a),o.rect.width,o.rect.height),a=0}var v={x:D(b,S+12),y:D(b,S+16),width:D(b,S+4),height:D(b,S+8)},h=T(b,S+22);h=T(b,S+20)/(h==0?100:h);var y={rect:v,delay:Math.round(h*1e3),dispose:b[S+24],blend:b[S+25]};p.frames.push(y)}else if(r=="fdAT"){for(var f=0;f<d-4;f++)n[a+f]=b[S+f+4];a+=d-4}else if(r=="pHYs")p.tabs[r]=[m.readUint(b,S),m.readUint(b,S+4),b[S+8]];else if(r=="cHRM"){p.tabs[r]=[];for(var f=0;f<8;f++)p.tabs[r].push(m.readUint(b,S+f*4))}else if(r=="tEXt"){p.tabs[r]==null&&(p.tabs[r]={});var E=m.nextZero(b,S),w=m.readASCII(b,S,E-S),W=m.readASCII(b,E+1,S+d-E-1);p.tabs[r][w]=W}else if(r=="iTXt"){p.tabs[r]==null&&(p.tabs[r]={});var E=0,P=S;E=m.nextZero(b,P);var w=m.readASCII(b,P,E-P);P=E+1,b[P],b[P+1],P+=2,E=m.nextZero(b,P),m.readASCII(b,P,E-P),P=E+1,E=m.nextZero(b,P),m.readUTF8(b,P,E-P),P=E+1;var W=m.readUTF8(b,P,d-(P-S));p.tabs[r][w]=W}else if(r=="PLTE")p.tabs[r]=m.readBytes(b,S,d);else if(r=="hIST"){var j=p.tabs.PLTE.length/3;p.tabs[r]=[];for(var f=0;f<j;f++)p.tabs[r].push(T(b,S+f*2))}else if(r=="tRNS")p.ctype==3?p.tabs[r]=m.readBytes(b,S,d):p.ctype==0?p.tabs[r]=T(b,S):p.ctype==2&&(p.tabs[r]=[T(b,S),T(b,S+2),T(b,S+4)]);else if(r=="gAMA")p.tabs[r]=m.readUint(b,S)/1e5;else if(r=="sRGB")p.tabs[r]=b[S];else if(r=="bKGD")p.ctype==0||p.ctype==4?p.tabs[r]=[T(b,S)]:p.ctype==2||p.ctype==6?p.tabs[r]=[T(b,S),T(b,S+2),T(b,S+4)]:p.ctype==3&&(p.tabs[r]=b[S]);else if(r=="IEND"){if(a!=0){var o=p.frames[p.frames.length-1];o.data=L.decode._decompress(p,n.slice(0,a),o.rect.width,o.rect.height),a=0}p.data=L.decode._decompress(p,A,p.width,p.height);break}S+=d,m.readUint(b,S),S+=4}return delete p.compress,delete p.interlace,delete p.filter,p},L.decode._decompress=function(x,b,S,m){return x.compress==0&&(b=L.decode._inflate(b)),x.interlace==0?b=L.decode._filterZero(b,x,0,S,m):x.interlace==1&&(b=L.decode._readInterlace(b,x)),b},L.decode._inflate=function(x){return B.inflate(x)},L.decode._readInterlace=function(x,b){for(var S=b.width,m=b.height,T=L.decode._getBPP(b),D=T>>3,p=Math.ceil(S*T/8),A=new Uint8Array(m*p),l=0,n=[0,0,4,0,2,0,1],a=[0,4,0,2,0,1,0],u=[8,8,8,4,4,2,2],f=[8,8,4,4,2,2,1],d=0;d<7;){for(var r=u[d],o=f[d],v=0,h=0,y=n[d];y<m;)y+=r,h++;for(var E=a[d];E<S;)E+=o,v++;var w=Math.ceil(v*T/8);L.decode._filterZero(x,b,l,v,h);for(var W=0,P=n[d];P<m;){for(var j=a[d],V=l+W*w<<3;j<S;){if(T==1){var G=x[V>>3];G=G>>7-(V&7)&1,A[P*p+(j>>3)]|=G<<7-((j&3)<<0)}if(T==2){var G=x[V>>3];G=G>>6-(V&7)&3,A[P*p+(j>>2)]|=G<<6-((j&3)<<1)}if(T==4){var G=x[V>>3];G=G>>4-(V&7)&15,A[P*p+(j>>1)]|=G<<4-((j&1)<<2)}if(T>=8)for(var F=P*p+j*D,H=0;H<D;H++)A[F+H]=x[(V>>3)+H];V+=T,j+=o}W++,P+=r}v*h!=0&&(l+=h*(1+w)),d=d+1}return A},L.decode._getBPP=function(x){var b=[1,null,3,1,2,null,4][x.ctype];return b*x.depth},L.decode._filterZero=function(x,b,S,m,T){var D=L.decode._getBPP(b),p=Math.ceil(m*D/8),A=L.decode._paeth;D=Math.ceil(D/8);for(var l=0;l<T;l++){var n=S+l*p,a=n+l+1,u=x[a-1];if(u==0)for(var f=0;f<p;f++)x[n+f]=x[a+f];else if(u==1){for(var f=0;f<D;f++)x[n+f]=x[a+f];for(var f=D;f<p;f++)x[n+f]=x[a+f]+x[n+f-D]&255}else if(l==0){for(var f=0;f<D;f++)x[n+f]=x[a+f];if(u==2)for(var f=D;f<p;f++)x[n+f]=x[a+f]&255;if(u==3)for(var f=D;f<p;f++)x[n+f]=x[a+f]+(x[n+f-D]>>1)&255;if(u==4)for(var f=D;f<p;f++)x[n+f]=x[a+f]+A(x[n+f-D],0,0)&255}else{if(u==2)for(var f=0;f<p;f++)x[n+f]=x[a+f]+x[n+f-p]&255;if(u==3){for(var f=0;f<D;f++)x[n+f]=x[a+f]+(x[n+f-p]>>1)&255;for(var f=D;f<p;f++)x[n+f]=x[a+f]+(x[n+f-p]+x[n+f-D]>>1)&255}if(u==4){for(var f=0;f<D;f++)x[n+f]=x[a+f]+A(0,x[n+f-p],0)&255;for(var f=D;f<p;f++)x[n+f]=x[a+f]+A(x[n+f-D],x[n+f-p],x[n+f-D-p])&255}}}return x},L.decode._paeth=function(x,b,S){var m=x+b-S,T=Math.abs(m-x),D=Math.abs(m-b),p=Math.abs(m-S);return T<=D&&T<=p?x:D<=p?b:S},L.decode._IHDR=function(x,b,S){var m=L._bin;S.width=m.readUint(x,b),b+=4,S.height=m.readUint(x,b),b+=4,S.depth=x[b],b++,S.ctype=x[b],b++,S.compress=x[b],b++,S.filter=x[b],b++,S.interlace=x[b],b++},L._bin={nextZero:function(x,b){for(;x[b]!=0;)b++;return b},readUshort:function(x,b){return x[b]<<8|x[b+1]},writeUshort:function(x,b,S){x[b]=S>>8&255,x[b+1]=S&255},readUint:function(x,b){return x[b]*16777216+(x[b+1]<<16|x[b+2]<<8|x[b+3])},writeUint:function(x,b,S){x[b]=S>>24&255,x[b+1]=S>>16&255,x[b+2]=S>>8&255,x[b+3]=S&255},readASCII:function(x,b,S){for(var m="",T=0;T<S;T++)m+=String.fromCharCode(x[b+T]);return m},writeASCII:function(x,b,S){for(var m=0;m<S.length;m++)x[b+m]=S.charCodeAt(m)},readBytes:function(x,b,S){for(var m=[],T=0;T<S;T++)m.push(x[b+T]);return m},pad:function(x){return x.length<2?"0"+x:x},readUTF8:function(x,b,S){for(var m="",T,D=0;D<S;D++)m+="%"+L._bin.pad(x[b+D].toString(16));try{T=decodeURIComponent(m)}catch{return L._bin.readASCII(x,b,S)}return T}},L._copyTile=function(x,b,S,m,T,D,p,A,l){for(var n=Math.min(b,T),a=Math.min(S,D),u=0,f=0,d=0;d<a;d++)for(var r=0;r<n;r++)if(p>=0&&A>=0?(u=d*b+r<<2,f=(A+d)*T+p+r<<2):(u=(-A+d)*b-p+r<<2,f=d*T+r<<2),l==0)m[f]=x[u],m[f+1]=x[u+1],m[f+2]=x[u+2],m[f+3]=x[u+3];else if(l==1){var o=x[u+3]*.00392156862745098,v=x[u]*o,h=x[u+1]*o,y=x[u+2]*o,E=m[f+3]*(1/255),w=m[f]*E,W=m[f+1]*E,P=m[f+2]*E,j=1-o,V=o+E*j,G=V==0?0:1/V;m[f+3]=255*V,m[f+0]=(v+w*j)*G,m[f+1]=(h+W*j)*G,m[f+2]=(y+P*j)*G}else if(l==2){var o=x[u+3],v=x[u],h=x[u+1],y=x[u+2],E=m[f+3],w=m[f],W=m[f+1],P=m[f+2];o==E&&v==w&&h==W&&y==P?(m[f]=0,m[f+1]=0,m[f+2]=0,m[f+3]=0):(m[f]=v,m[f+1]=h,m[f+2]=y,m[f+3]=o)}else if(l==3){var o=x[u+3],v=x[u],h=x[u+1],y=x[u+2],E=m[f+3],w=m[f],W=m[f+1],P=m[f+2];if(o==E&&v==w&&h==W&&y==P)continue;if(o<220&&E>20)return!1}return!0},L.encode=function(x,b,S,m,T,D){m==null&&(m=0),D==null&&(D=!1);for(var p=new Uint8Array(x[0].byteLength*x.length+100),A=[137,80,78,71,13,10,26,10],l=0;l<8;l++)p[l]=A[l];var n=8,a=L._bin,u=L.crc.crc,f=a.writeUint,d=a.writeUshort,r=a.writeASCII,o=L.encode.compressPNG(x,b,S,m,D);f(p,n,13),n+=4,r(p,n,"IHDR"),n+=4,f(p,n,b),n+=4,f(p,n,S),n+=4,p[n]=o.depth,n++,p[n]=o.ctype,n++,p[n]=0,n++,p[n]=0,n++,p[n]=0,n++,f(p,n,u(p,n-17,17)),n+=4,f(p,n,1),n+=4,r(p,n,"sRGB"),n+=4,p[n]=1,n++,f(p,n,u(p,n-5,5)),n+=4;var v=x.length>1;if(v&&(f(p,n,8),n+=4,r(p,n,"acTL"),n+=4,f(p,n,x.length),n+=4,f(p,n,0),n+=4,f(p,n,u(p,n-12,12)),n+=4),o.ctype==3){var h=o.plte.length;f(p,n,h*3),n+=4,r(p,n,"PLTE"),n+=4;for(var l=0;l<h;l++){var y=l*3,E=o.plte[l],w=E&255,W=E>>8&255,P=E>>16&255;p[n+y+0]=w,p[n+y+1]=W,p[n+y+2]=P}if(n+=h*3,f(p,n,u(p,n-h*3-4,h*3+4)),n+=4,o.gotAlpha){f(p,n,h),n+=4,r(p,n,"tRNS"),n+=4;for(var l=0;l<h;l++)p[n+l]=o.plte[l]>>24&255;n+=h,f(p,n,u(p,n-h-4,h+4)),n+=4}}for(var j=0,V=0;V<o.frames.length;V++){var G=o.frames[V];v&&(f(p,n,26),n+=4,r(p,n,"fcTL"),n+=4,f(p,n,j++),n+=4,f(p,n,G.rect.width),n+=4,f(p,n,G.rect.height),n+=4,f(p,n,G.rect.x),n+=4,f(p,n,G.rect.y),n+=4,d(p,n,T[V]),n+=2,d(p,n,1e3),n+=2,p[n]=G.dispose,n++,p[n]=G.blend,n++,f(p,n,u(p,n-30,30)),n+=4);var F=G.cimg,h=F.length;f(p,n,h+(V==0?0:4)),n+=4;var H=n;r(p,n,V==0?"IDAT":"fdAT"),n+=4,V!=0&&(f(p,n,j++),n+=4);for(var l=0;l<h;l++)p[n+l]=F[l];n+=h,f(p,n,u(p,H,n-H)),n+=4}return f(p,n,0),n+=4,r(p,n,"IEND"),n+=4,f(p,n,u(p,n-4,4)),n+=4,p.buffer.slice(0,n)},L.encode.compressPNG=function(x,b,S,m,T){for(var D=L.encode.compress(x,b,S,m,!1,T),p=0;p<x.length;p++){var A=D.frames[p];A.rect.width;var l=A.rect.height,n=A.bpl,a=A.bpp,u=new Uint8Array(l*n+l);A.cimg=L.encode._filterZero(A.img,l,a,n,u)}return D},L.encode.compress=function(x,b,S,m,T,D){D==null&&(D=!1);for(var p=6,A=8,l=4,n=255,a=0;a<x.length;a++)for(var u=new Uint8Array(x[a]),f=u.length,d=0;d<f;d+=4)n&=u[d+3];var r=n!=255,o={},v=[];if(x.length!=0&&(o[0]=0,v.push(0),m!=0&&m--),m!=0){var h=L.quantize(x,m,T);x=h.bufs;for(var d=0;d<h.plte.length;d++){var y=h.plte[d].est.rgba;o[y]==null&&(o[y]=v.length,v.push(y))}}else for(var a=0;a<x.length;a++)for(var E=new Uint32Array(x[a]),f=E.length,d=0;d<f;d++){var y=E[d];if((d<b||y!=E[d-1]&&y!=E[d-b])&&o[y]==null&&(o[y]=v.length,v.push(y),v.length>=300))break}var w=r?T:!1,W=v.length;W<=256&&D==!1&&(W<=2?A=1:W<=4?A=2:W<=16?A=4:A=8,T&&(A=8),r=!0);for(var P=[],a=0;a<x.length;a++){var j=new Uint8Array(x[a]),V=new Uint32Array(j.buffer),G=0,F=0,H=b,K=S,U=0;if(a!=0&&!w){for(var N=T||a==1||P[P.length-2].dispose==2?1:2,Y=0,ne=1e9,ae=0;ae<N;ae++){for(var be=new Uint8Array(x[a-1-ae]),he=new Uint32Array(x[a-1-ae]),oe=b,pe=S,ue=-1,ge=-1,Fe=0;Fe<S;Fe++)for(var Be=0;Be<b;Be++){var d=Fe*b+Be;V[d]!=he[d]&&(Be<oe&&(oe=Be),Be>ue&&(ue=Be),Fe<pe&&(pe=Fe),Fe>ge&&(ge=Fe))}var ke=ue==-1?1:(ue-oe+1)*(ge-pe+1);ke<ne&&(ne=ke,Y=ae,ue==-1?(G=F=0,H=K=1):(G=oe,F=pe,H=ue-oe+1,K=ge-pe+1))}var be=new Uint8Array(x[a-1-Y]);Y==1&&(P[P.length-1].dispose=2);var fe=new Uint8Array(H*K*4);new Uint32Array(fe.buffer),L._copyTile(be,b,S,fe,H,K,-G,-F,0),L._copyTile(j,b,S,fe,H,K,-G,-F,3)?(L._copyTile(j,b,S,fe,H,K,-G,-F,2),U=1):(L._copyTile(j,b,S,fe,H,K,-G,-F,0),U=0),j=fe,V=new Uint32Array(j.buffer)}var De=4*H;if(W<=256&&D==!1){De=Math.ceil(A*H/8);for(var fe=new Uint8Array(De*K),Fe=0;Fe<K;Fe++){var d=Fe*De,Ve=Fe*H;if(A==8)for(var Be=0;Be<H;Be++)fe[d+Be]=o[V[Ve+Be]];else if(A==4)for(var Be=0;Be<H;Be++)fe[d+(Be>>1)]|=o[V[Ve+Be]]<<4-(Be&1)*4;else if(A==2)for(var Be=0;Be<H;Be++)fe[d+(Be>>2)]|=o[V[Ve+Be]]<<6-(Be&3)*2;else if(A==1)for(var Be=0;Be<H;Be++)fe[d+(Be>>3)]|=o[V[Ve+Be]]<<7-(Be&7)*1}j=fe,p=3,l=1}else if(r==!1&&x.length==1){for(var fe=new Uint8Array(H*K*3),Xe=H*K,d=0;d<Xe;d++){var it=d*3,nt=d*4;fe[it]=j[nt],fe[it+1]=j[nt+1],fe[it+2]=j[nt+2]}j=fe,p=2,l=3,De=3*H}P.push({rect:{x:G,y:F,width:H,height:K},img:j,bpl:De,bpp:l,blend:U,dispose:w?1:0})}return{ctype:p,depth:A,plte:v,gotAlpha:r,frames:P}},L.encode._filterZero=function(x,b,S,m,T){for(var D=[],p=0;p<5;p++)if(!(b*m>5e5&&(p==2||p==3||p==4))){for(var A=0;A<b;A++)L.encode._filterLine(T,x,A,m,S,p);if(D.push(B.deflate(T)),S==1)break}for(var l,n=1e9,a=0;a<D.length;a++)D[a].length<n&&(l=a,n=D[a].length);return D[l]},L.encode._filterLine=function(x,b,S,m,T,D){var p=S*m,A=p+S,l=L.decode._paeth;if(x[A]=D,A++,D==0)for(var n=0;n<m;n++)x[A+n]=b[p+n];else if(D==1){for(var n=0;n<T;n++)x[A+n]=b[p+n];for(var n=T;n<m;n++)x[A+n]=b[p+n]-b[p+n-T]+256&255}else if(S==0){for(var n=0;n<T;n++)x[A+n]=b[p+n];if(D==2)for(var n=T;n<m;n++)x[A+n]=b[p+n];if(D==3)for(var n=T;n<m;n++)x[A+n]=b[p+n]-(b[p+n-T]>>1)+256&255;if(D==4)for(var n=T;n<m;n++)x[A+n]=b[p+n]-l(b[p+n-T],0,0)+256&255}else{if(D==2)for(var n=0;n<m;n++)x[A+n]=b[p+n]+256-b[p+n-m]&255;if(D==3){for(var n=0;n<T;n++)x[A+n]=b[p+n]+256-(b[p+n-m]>>1)&255;for(var n=T;n<m;n++)x[A+n]=b[p+n]+256-(b[p+n-m]+b[p+n-T]>>1)&255}if(D==4){for(var n=0;n<T;n++)x[A+n]=b[p+n]+256-l(0,b[p+n-m],0)&255;for(var n=T;n<m;n++)x[A+n]=b[p+n]+256-l(b[p+n-T],b[p+n-m],b[p+n-T-m])&255}}},L.crc={table:function(){for(var x=new Uint32Array(256),b=0;b<256;b++){for(var S=b,m=0;m<8;m++)S&1?S=3988292384^S>>>1:S=S>>>1;x[b]=S}return x}(),update:function(x,b,S,m){for(var T=0;T<m;T++)x=L.crc.table[(x^b[S+T])&255]^x>>>8;return x},crc:function(x,b,S){return L.crc.update(4294967295,x,b,S)^4294967295}},L.quantize=function(x,b,S){for(var m=[],T=0,D=0;D<x.length;D++)m.push(L.encode.alphaMul(new Uint8Array(x[D]),S)),T+=x[D].byteLength;for(var p=new Uint8Array(T),A=new Uint32Array(p.buffer),l=0,D=0;D<m.length;D++){for(var n=m[D],a=n.length,u=0;u<a;u++)p[l+u]=n[u];l+=a}var f={i0:0,i1:p.length,bst:null,est:null,tdst:0,left:null,right:null};f.bst=L.quantize.stats(p,f.i0,f.i1),f.est=L.quantize.estats(f.bst);for(var d=[f];d.length<b;){for(var r=0,o=0,D=0;D<d.length;D++)d[D].est.L>r&&(r=d[D].est.L,o=D);if(r<.001)break;var v=d[o],h=L.quantize.splitPixels(p,A,v.i0,v.i1,v.est.e,v.est.eMq255),y={i0:v.i0,i1:h,bst:null,est:null,tdst:0,left:null,right:null};y.bst=L.quantize.stats(p,y.i0,y.i1),y.est=L.quantize.estats(y.bst);var E={i0:h,i1:v.i1,bst:null,est:null,tdst:0,left:null,right:null};E.bst={R:[],m:[],N:v.bst.N-y.bst.N};for(var D=0;D<16;D++)E.bst.R[D]=v.bst.R[D]-y.bst.R[D];for(var D=0;D<4;D++)E.bst.m[D]=v.bst.m[D]-y.bst.m[D];E.est=L.quantize.estats(E.bst),v.left=y,v.right=E,d[o]=y,d.push(E)}d.sort(function(N,Y){return Y.bst.N-N.bst.N});for(var w=0;w<m.length;w++){for(var W=L.quantize.planeDst,P=new Uint8Array(m[w].buffer),j=new Uint32Array(m[w].buffer),V=P.length,D=0;D<V;D+=4){for(var G=P[D]*.00392156862745098,F=P[D+1]*(1/255),H=P[D+2]*(1/255),K=P[D+3]*(1/255),U=f;U.left;)U=W(U.est,G,F,H,K)<=0?U.left:U.right;j[D>>2]=U.est.rgba}m[w]=j.buffer}return{bufs:m,plte:d}},L.quantize.getNearest=function(x,b,S,m,T){if(x.left==null)return x.tdst=L.quantize.dist(x.est.q,b,S,m,T),x;var D=L.quantize.planeDst(x.est,b,S,m,T),p=x.left,A=x.right;D>0&&(p=x.right,A=x.left);var l=L.quantize.getNearest(p,b,S,m,T);if(l.tdst<=D*D)return l;var n=L.quantize.getNearest(A,b,S,m,T);return n.tdst<l.tdst?n:l},L.quantize.planeDst=function(x,b,S,m,T){var D=x.e;return D[0]*b+D[1]*S+D[2]*m+D[3]*T-x.eMq},L.quantize.dist=function(x,b,S,m,T){var D=b-x[0],p=S-x[1],A=m-x[2],l=T-x[3];return D*D+p*p+A*A+l*l},L.quantize.splitPixels=function(x,b,S,m,T,D){var p=L.quantize.vecDot;for(m-=4;S<m;){for(;p(x,S,T)<=D;)S+=4;for(;p(x,m,T)>D;)m-=4;if(S>=m)break;var A=b[S>>2];b[S>>2]=b[m>>2],b[m>>2]=A,S+=4,m-=4}for(;p(x,S,T)>D;)S-=4;return S+4},L.quantize.vecDot=function(x,b,S){return x[b]*S[0]+x[b+1]*S[1]+x[b+2]*S[2]+x[b+3]*S[3]},L.quantize.stats=function(x,b,S){for(var m=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],T=[0,0,0,0],D=S-b>>2,p=b;p<S;p+=4){var A=x[p]*.00392156862745098,l=x[p+1]*(1/255),n=x[p+2]*(1/255),a=x[p+3]*(1/255);T[0]+=A,T[1]+=l,T[2]+=n,T[3]+=a,m[0]+=A*A,m[1]+=A*l,m[2]+=A*n,m[3]+=A*a,m[5]+=l*l,m[6]+=l*n,m[7]+=l*a,m[10]+=n*n,m[11]+=n*a,m[15]+=a*a}return m[4]=m[1],m[8]=m[2],m[12]=m[3],m[9]=m[6],m[13]=m[7],m[14]=m[11],{R:m,m:T,N:D}},L.quantize.estats=function(x){var b=x.R,S=x.m,m=x.N,T=S[0],D=S[1],p=S[2],A=S[3],l=m==0?0:1/m,n=[b[0]-T*T*l,b[1]-T*D*l,b[2]-T*p*l,b[3]-T*A*l,b[4]-D*T*l,b[5]-D*D*l,b[6]-D*p*l,b[7]-D*A*l,b[8]-p*T*l,b[9]-p*D*l,b[10]-p*p*l,b[11]-p*A*l,b[12]-A*T*l,b[13]-A*D*l,b[14]-A*p*l,b[15]-A*A*l],a=n,u=L.M4,f=[.5,.5,.5,.5],d=0,r=0;if(m!=0)for(var o=0;o<10&&(f=u.multVec(a,f),r=Math.sqrt(u.dot(f,f)),f=u.sml(1/r,f),!(Math.abs(r-d)<1e-9));o++)d=r;var v=[T*l,D*l,p*l,A*l],h=u.dot(u.sml(255,v),f),y=v[3]<.001?0:1/v[3];return{Cov:n,q:v,e:f,L:d,eMq255:h,eMq:u.dot(f,v),rgba:(Math.round(255*v[3])<<24|Math.round(255*v[2]*y)<<16|Math.round(255*v[1]*y)<<8|Math.round(255*v[0]*y)<<0)>>>0}},L.M4={multVec:function(x,b){return[x[0]*b[0]+x[1]*b[1]+x[2]*b[2]+x[3]*b[3],x[4]*b[0]+x[5]*b[1]+x[6]*b[2]+x[7]*b[3],x[8]*b[0]+x[9]*b[1]+x[10]*b[2]+x[11]*b[3],x[12]*b[0]+x[13]*b[1]+x[14]*b[2]+x[15]*b[3]]},dot:function(x,b){return x[0]*b[0]+x[1]*b[1]+x[2]*b[2]+x[3]*b[3]},sml:function(x,b){return[x*b[0],x*b[1],x*b[2],x*b[3]]}},L.encode.alphaMul=function(x,b){for(var S=new Uint8Array(x.length),m=x.length>>2,T=0;T<m;T++){var D=T<<2,p=x[D+3];b&&(p=p<128?0:255);var A=p*(1/255);S[D+0]=x[D+0]*A,S[D+1]=x[D+1]*A,S[D+2]=x[D+2]*A,S[D+3]=p}return S}}(M,z)})()},"./node_modules/upng-js/node_modules/pako/index.js":(k,R,g)=>{var M=g("./node_modules/upng-js/node_modules/pako/lib/utils/common.js").assign,z=g("./node_modules/upng-js/node_modules/pako/lib/deflate.js"),L=g("./node_modules/upng-js/node_modules/pako/lib/inflate.js"),B=g("./node_modules/upng-js/node_modules/pako/lib/zlib/constants.js"),x={};M(x,z,L,B),k.exports=x},"./node_modules/upng-js/node_modules/pako/lib/deflate.js":(k,R,g)=>{var M=g("./node_modules/upng-js/node_modules/pako/lib/zlib/deflate.js"),z=g("./node_modules/upng-js/node_modules/pako/lib/utils/common.js"),L=g("./node_modules/upng-js/node_modules/pako/lib/utils/strings.js"),B=g("./node_modules/upng-js/node_modules/pako/lib/zlib/messages.js"),x=g("./node_modules/upng-js/node_modules/pako/lib/zlib/zstream.js"),b=Object.prototype.toString,S=0,m=4,T=0,D=1,p=2,A=-1,l=0,n=8;function a(r){if(!(this instanceof a))return new a(r);this.options=z.assign({level:A,method:n,chunkSize:16384,windowBits:15,memLevel:8,strategy:l,to:""},r||{});var o=this.options;o.raw&&o.windowBits>0?o.windowBits=-o.windowBits:o.gzip&&o.windowBits>0&&o.windowBits<16&&(o.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new x,this.strm.avail_out=0;var v=M.deflateInit2(this.strm,o.level,o.method,o.windowBits,o.memLevel,o.strategy);if(v!==T)throw new Error(B[v]);if(o.header&&M.deflateSetHeader(this.strm,o.header),o.dictionary){var h;if(typeof o.dictionary=="string"?h=L.string2buf(o.dictionary):b.call(o.dictionary)==="[object ArrayBuffer]"?h=new Uint8Array(o.dictionary):h=o.dictionary,v=M.deflateSetDictionary(this.strm,h),v!==T)throw new Error(B[v]);this._dict_set=!0}}a.prototype.push=function(r,o){var v=this.strm,h=this.options.chunkSize,y,E;if(this.ended)return!1;E=o===~~o?o:o===!0?m:S,typeof r=="string"?v.input=L.string2buf(r):b.call(r)==="[object ArrayBuffer]"?v.input=new Uint8Array(r):v.input=r,v.next_in=0,v.avail_in=v.input.length;do{if(v.avail_out===0&&(v.output=new z.Buf8(h),v.next_out=0,v.avail_out=h),y=M.deflate(v,E),y!==D&&y!==T)return this.onEnd(y),this.ended=!0,!1;(v.avail_out===0||v.avail_in===0&&(E===m||E===p))&&(this.options.to==="string"?this.onData(L.buf2binstring(z.shrinkBuf(v.output,v.next_out))):this.onData(z.shrinkBuf(v.output,v.next_out)))}while((v.avail_in>0||v.avail_out===0)&&y!==D);return E===m?(y=M.deflateEnd(this.strm),this.onEnd(y),this.ended=!0,y===T):(E===p&&(this.onEnd(T),v.avail_out=0),!0)},a.prototype.onData=function(r){this.chunks.push(r)},a.prototype.onEnd=function(r){r===T&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=z.flattenChunks(this.chunks)),this.chunks=[],this.err=r,this.msg=this.strm.msg};function u(r,o){var v=new a(o);if(v.push(r,!0),v.err)throw v.msg||B[v.err];return v.result}function f(r,o){return o=o||{},o.raw=!0,u(r,o)}function d(r,o){return o=o||{},o.gzip=!0,u(r,o)}R.Deflate=a,R.deflate=u,R.deflateRaw=f,R.gzip=d},"./node_modules/upng-js/node_modules/pako/lib/inflate.js":(k,R,g)=>{var M=g("./node_modules/upng-js/node_modules/pako/lib/zlib/inflate.js"),z=g("./node_modules/upng-js/node_modules/pako/lib/utils/common.js"),L=g("./node_modules/upng-js/node_modules/pako/lib/utils/strings.js"),B=g("./node_modules/upng-js/node_modules/pako/lib/zlib/constants.js"),x=g("./node_modules/upng-js/node_modules/pako/lib/zlib/messages.js"),b=g("./node_modules/upng-js/node_modules/pako/lib/zlib/zstream.js"),S=g("./node_modules/upng-js/node_modules/pako/lib/zlib/gzheader.js"),m=Object.prototype.toString;function T(A){if(!(this instanceof T))return new T(A);this.options=z.assign({chunkSize:16384,windowBits:0,to:""},A||{});var l=this.options;l.raw&&l.windowBits>=0&&l.windowBits<16&&(l.windowBits=-l.windowBits,l.windowBits===0&&(l.windowBits=-15)),l.windowBits>=0&&l.windowBits<16&&!(A&&A.windowBits)&&(l.windowBits+=32),l.windowBits>15&&l.windowBits<48&&(l.windowBits&15)===0&&(l.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new b,this.strm.avail_out=0;var n=M.inflateInit2(this.strm,l.windowBits);if(n!==B.Z_OK)throw new Error(x[n]);if(this.header=new S,M.inflateGetHeader(this.strm,this.header),l.dictionary&&(typeof l.dictionary=="string"?l.dictionary=L.string2buf(l.dictionary):m.call(l.dictionary)==="[object ArrayBuffer]"&&(l.dictionary=new Uint8Array(l.dictionary)),l.raw&&(n=M.inflateSetDictionary(this.strm,l.dictionary),n!==B.Z_OK)))throw new Error(x[n])}T.prototype.push=function(A,l){var n=this.strm,a=this.options.chunkSize,u=this.options.dictionary,f,d,r,o,v,h=!1;if(this.ended)return!1;d=l===~~l?l:l===!0?B.Z_FINISH:B.Z_NO_FLUSH,typeof A=="string"?n.input=L.binstring2buf(A):m.call(A)==="[object ArrayBuffer]"?n.input=new Uint8Array(A):n.input=A,n.next_in=0,n.avail_in=n.input.length;do{if(n.avail_out===0&&(n.output=new z.Buf8(a),n.next_out=0,n.avail_out=a),f=M.inflate(n,B.Z_NO_FLUSH),f===B.Z_NEED_DICT&&u&&(f=M.inflateSetDictionary(this.strm,u)),f===B.Z_BUF_ERROR&&h===!0&&(f=B.Z_OK,h=!1),f!==B.Z_STREAM_END&&f!==B.Z_OK)return this.onEnd(f),this.ended=!0,!1;n.next_out&&(n.avail_out===0||f===B.Z_STREAM_END||n.avail_in===0&&(d===B.Z_FINISH||d===B.Z_SYNC_FLUSH))&&(this.options.to==="string"?(r=L.utf8border(n.output,n.next_out),o=n.next_out-r,v=L.buf2string(n.output,r),n.next_out=o,n.avail_out=a-o,o&&z.arraySet(n.output,n.output,r,o,0),this.onData(v)):this.onData(z.shrinkBuf(n.output,n.next_out))),n.avail_in===0&&n.avail_out===0&&(h=!0)}while((n.avail_in>0||n.avail_out===0)&&f!==B.Z_STREAM_END);return f===B.Z_STREAM_END&&(d=B.Z_FINISH),d===B.Z_FINISH?(f=M.inflateEnd(this.strm),this.onEnd(f),this.ended=!0,f===B.Z_OK):(d===B.Z_SYNC_FLUSH&&(this.onEnd(B.Z_OK),n.avail_out=0),!0)},T.prototype.onData=function(A){this.chunks.push(A)},T.prototype.onEnd=function(A){A===B.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=z.flattenChunks(this.chunks)),this.chunks=[],this.err=A,this.msg=this.strm.msg};function D(A,l){var n=new T(l);if(n.push(A,!0),n.err)throw n.msg||x[n.err];return n.result}function p(A,l){return l=l||{},l.raw=!0,D(A,l)}R.Inflate=T,R.inflate=D,R.inflateRaw=p,R.ungzip=D},"./node_modules/upng-js/node_modules/pako/lib/utils/common.js":(k,R)=>{var g=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function M(B,x){return Object.prototype.hasOwnProperty.call(B,x)}R.assign=function(B){for(var x=Array.prototype.slice.call(arguments,1);x.length;){var b=x.shift();if(b){if(typeof b!="object")throw new TypeError(b+"must be non-object");for(var S in b)M(b,S)&&(B[S]=b[S])}}return B},R.shrinkBuf=function(B,x){return B.length===x?B:B.subarray?B.subarray(0,x):(B.length=x,B)};var z={arraySet:function(B,x,b,S,m){if(x.subarray&&B.subarray){B.set(x.subarray(b,b+S),m);return}for(var T=0;T<S;T++)B[m+T]=x[b+T]},flattenChunks:function(B){var x,b,S,m,T,D;for(S=0,x=0,b=B.length;x<b;x++)S+=B[x].length;for(D=new Uint8Array(S),m=0,x=0,b=B.length;x<b;x++)T=B[x],D.set(T,m),m+=T.length;return D}},L={arraySet:function(B,x,b,S,m){for(var T=0;T<S;T++)B[m+T]=x[b+T]},flattenChunks:function(B){return[].concat.apply([],B)}};R.setTyped=function(B){B?(R.Buf8=Uint8Array,R.Buf16=Uint16Array,R.Buf32=Int32Array,R.assign(R,z)):(R.Buf8=Array,R.Buf16=Array,R.Buf32=Array,R.assign(R,L))},R.setTyped(g)},"./node_modules/upng-js/node_modules/pako/lib/utils/strings.js":(k,R,g)=>{var M=g("./node_modules/upng-js/node_modules/pako/lib/utils/common.js"),z=!0,L=!0;try{String.fromCharCode.apply(null,[0])}catch{z=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{L=!1}for(var B=new M.Buf8(256),x=0;x<256;x++)B[x]=x>=252?6:x>=248?5:x>=240?4:x>=224?3:x>=192?2:1;B[254]=B[254]=1,R.string2buf=function(S){var m,T,D,p,A,l=S.length,n=0;for(p=0;p<l;p++)T=S.charCodeAt(p),(T&64512)===55296&&p+1<l&&(D=S.charCodeAt(p+1),(D&64512)===56320&&(T=65536+(T-55296<<10)+(D-56320),p++)),n+=T<128?1:T<2048?2:T<65536?3:4;for(m=new M.Buf8(n),A=0,p=0;A<n;p++)T=S.charCodeAt(p),(T&64512)===55296&&p+1<l&&(D=S.charCodeAt(p+1),(D&64512)===56320&&(T=65536+(T-55296<<10)+(D-56320),p++)),T<128?m[A++]=T:T<2048?(m[A++]=192|T>>>6,m[A++]=128|T&63):T<65536?(m[A++]=224|T>>>12,m[A++]=128|T>>>6&63,m[A++]=128|T&63):(m[A++]=240|T>>>18,m[A++]=128|T>>>12&63,m[A++]=128|T>>>6&63,m[A++]=128|T&63);return m};function b(S,m){if(m<65534&&(S.subarray&&L||!S.subarray&&z))return String.fromCharCode.apply(null,M.shrinkBuf(S,m));for(var T="",D=0;D<m;D++)T+=String.fromCharCode(S[D]);return T}R.buf2binstring=function(S){return b(S,S.length)},R.binstring2buf=function(S){for(var m=new M.Buf8(S.length),T=0,D=m.length;T<D;T++)m[T]=S.charCodeAt(T);return m},R.buf2string=function(S,m){var T,D,p,A,l=m||S.length,n=new Array(l*2);for(D=0,T=0;T<l;){if(p=S[T++],p<128){n[D++]=p;continue}if(A=B[p],A>4){n[D++]=65533,T+=A-1;continue}for(p&=A===2?31:A===3?15:7;A>1&&T<l;)p=p<<6|S[T++]&63,A--;if(A>1){n[D++]=65533;continue}p<65536?n[D++]=p:(p-=65536,n[D++]=55296|p>>10&1023,n[D++]=56320|p&1023)}return b(n,D)},R.utf8border=function(S,m){var T;for(m=m||S.length,m>S.length&&(m=S.length),T=m-1;T>=0&&(S[T]&192)===128;)T--;return T<0||T===0?m:T+B[S[T]]>m?T:m}},"./node_modules/upng-js/node_modules/pako/lib/zlib/adler32.js":k=>{function R(g,M,z,L){for(var B=g&65535|0,x=g>>>16&65535|0,b=0;z!==0;){b=z>2e3?2e3:z,z-=b;do B=B+M[L++]|0,x=x+B|0;while(--b);B%=65521,x%=65521}return B|x<<16|0}k.exports=R},"./node_modules/upng-js/node_modules/pako/lib/zlib/constants.js":k=>{k.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},"./node_modules/upng-js/node_modules/pako/lib/zlib/crc32.js":k=>{function R(){for(var z,L=[],B=0;B<256;B++){z=B;for(var x=0;x<8;x++)z=z&1?3988292384^z>>>1:z>>>1;L[B]=z}return L}var g=R();function M(z,L,B,x){var b=g,S=x+B;z^=-1;for(var m=x;m<S;m++)z=z>>>8^b[(z^L[m])&255];return z^-1}k.exports=M},"./node_modules/upng-js/node_modules/pako/lib/zlib/deflate.js":(k,R,g)=>{var M=g("./node_modules/upng-js/node_modules/pako/lib/utils/common.js"),z=g("./node_modules/upng-js/node_modules/pako/lib/zlib/trees.js"),L=g("./node_modules/upng-js/node_modules/pako/lib/zlib/adler32.js"),B=g("./node_modules/upng-js/node_modules/pako/lib/zlib/crc32.js"),x=g("./node_modules/upng-js/node_modules/pako/lib/zlib/messages.js"),b=0,S=1,m=3,T=4,D=5,p=0,A=1,l=-2,n=-3,a=-5,u=-1,f=1,d=2,r=3,o=4,v=0,h=2,y=8,E=9,w=15,W=8,P=29,j=256,V=j+1+P,G=30,F=19,H=2*V+1,K=15,U=3,N=258,Y=N+U+1,ne=32,ae=42,he=69,oe=73,pe=91,ue=103,ge=113,Fe=666,Be=1,ke=2,be=3,fe=4,De=3;function Ve(I,Ae){return I.msg=x[Ae],Ae}function Xe(I){return(I<<1)-(I>4?9:0)}function it(I){for(var Ae=I.length;--Ae>=0;)I[Ae]=0}function nt(I){var Ae=I.state,Ee=Ae.pending;Ee>I.avail_out&&(Ee=I.avail_out),Ee!==0&&(M.arraySet(I.output,Ae.pending_buf,Ae.pending_out,Ee,I.next_out),I.next_out+=Ee,Ae.pending_out+=Ee,I.total_out+=Ee,I.avail_out-=Ee,Ae.pending-=Ee,Ae.pending===0&&(Ae.pending_out=0))}function et(I,Ae){z._tr_flush_block(I,I.block_start>=0?I.block_start:-1,I.strstart-I.block_start,Ae),I.block_start=I.strstart,nt(I.strm)}function $e(I,Ae){I.pending_buf[I.pending++]=Ae}function Qe(I,Ae){I.pending_buf[I.pending++]=Ae>>>8&255,I.pending_buf[I.pending++]=Ae&255}function Ye(I,Ae,Ee,q){var de=I.avail_in;return de>q&&(de=q),de===0?0:(I.avail_in-=de,M.arraySet(Ae,I.input,I.next_in,de,Ee),I.state.wrap===1?I.adler=L(I.adler,Ae,de,Ee):I.state.wrap===2&&(I.adler=B(I.adler,Ae,de,Ee)),I.next_in+=de,I.total_in+=de,de)}function Ge(I,Ae){var Ee=I.max_chain_length,q=I.strstart,de,we,ut=I.prev_length,at=I.nice_match,tt=I.strstart>I.w_size-Y?I.strstart-(I.w_size-Y):0,vt=I.window,ti=I.w_mask,St=I.prev,Tt=I.strstart+N,At=vt[q+ut-1],ii=vt[q+ut];I.prev_length>=I.good_match&&(Ee>>=2),at>I.lookahead&&(at=I.lookahead);do if(de=Ae,!(vt[de+ut]!==ii||vt[de+ut-1]!==At||vt[de]!==vt[q]||vt[++de]!==vt[q+1])){q+=2,de++;do;while(vt[++q]===vt[++de]&&vt[++q]===vt[++de]&&vt[++q]===vt[++de]&&vt[++q]===vt[++de]&&vt[++q]===vt[++de]&&vt[++q]===vt[++de]&&vt[++q]===vt[++de]&&vt[++q]===vt[++de]&&q<Tt);if(we=N-(Tt-q),q=Tt-N,we>ut){if(I.match_start=Ae,ut=we,we>=at)break;At=vt[q+ut-1],ii=vt[q+ut]}}while((Ae=St[Ae&ti])>tt&&--Ee!==0);return ut<=I.lookahead?ut:I.lookahead}function ot(I){var Ae=I.w_size,Ee,q,de,we,ut;do{if(we=I.window_size-I.lookahead-I.strstart,I.strstart>=Ae+(Ae-Y)){M.arraySet(I.window,I.window,Ae,Ae,0),I.match_start-=Ae,I.strstart-=Ae,I.block_start-=Ae,q=I.hash_size,Ee=q;do de=I.head[--Ee],I.head[Ee]=de>=Ae?de-Ae:0;while(--q);q=Ae,Ee=q;do de=I.prev[--Ee],I.prev[Ee]=de>=Ae?de-Ae:0;while(--q);we+=Ae}if(I.strm.avail_in===0)break;if(q=Ye(I.strm,I.window,I.strstart+I.lookahead,we),I.lookahead+=q,I.lookahead+I.insert>=U)for(ut=I.strstart-I.insert,I.ins_h=I.window[ut],I.ins_h=(I.ins_h<<I.hash_shift^I.window[ut+1])&I.hash_mask;I.insert&&(I.ins_h=(I.ins_h<<I.hash_shift^I.window[ut+U-1])&I.hash_mask,I.prev[ut&I.w_mask]=I.head[I.ins_h],I.head[I.ins_h]=ut,ut++,I.insert--,!(I.lookahead+I.insert<U)););}while(I.lookahead<Y&&I.strm.avail_in!==0)}function st(I,Ae){var Ee=65535;for(Ee>I.pending_buf_size-5&&(Ee=I.pending_buf_size-5);;){if(I.lookahead<=1){if(ot(I),I.lookahead===0&&Ae===b)return Be;if(I.lookahead===0)break}I.strstart+=I.lookahead,I.lookahead=0;var q=I.block_start+Ee;if((I.strstart===0||I.strstart>=q)&&(I.lookahead=I.strstart-q,I.strstart=q,et(I,!1),I.strm.avail_out===0)||I.strstart-I.block_start>=I.w_size-Y&&(et(I,!1),I.strm.avail_out===0))return Be}return I.insert=0,Ae===T?(et(I,!0),I.strm.avail_out===0?be:fe):(I.strstart>I.block_start&&(et(I,!1),I.strm.avail_out===0),Be)}function Q(I,Ae){for(var Ee,q;;){if(I.lookahead<Y){if(ot(I),I.lookahead<Y&&Ae===b)return Be;if(I.lookahead===0)break}if(Ee=0,I.lookahead>=U&&(I.ins_h=(I.ins_h<<I.hash_shift^I.window[I.strstart+U-1])&I.hash_mask,Ee=I.prev[I.strstart&I.w_mask]=I.head[I.ins_h],I.head[I.ins_h]=I.strstart),Ee!==0&&I.strstart-Ee<=I.w_size-Y&&(I.match_length=Ge(I,Ee)),I.match_length>=U)if(q=z._tr_tally(I,I.strstart-I.match_start,I.match_length-U),I.lookahead-=I.match_length,I.match_length<=I.max_lazy_match&&I.lookahead>=U){I.match_length--;do I.strstart++,I.ins_h=(I.ins_h<<I.hash_shift^I.window[I.strstart+U-1])&I.hash_mask,Ee=I.prev[I.strstart&I.w_mask]=I.head[I.ins_h],I.head[I.ins_h]=I.strstart;while(--I.match_length!==0);I.strstart++}else I.strstart+=I.match_length,I.match_length=0,I.ins_h=I.window[I.strstart],I.ins_h=(I.ins_h<<I.hash_shift^I.window[I.strstart+1])&I.hash_mask;else q=z._tr_tally(I,0,I.window[I.strstart]),I.lookahead--,I.strstart++;if(q&&(et(I,!1),I.strm.avail_out===0))return Be}return I.insert=I.strstart<U-1?I.strstart:U-1,Ae===T?(et(I,!0),I.strm.avail_out===0?be:fe):I.last_lit&&(et(I,!1),I.strm.avail_out===0)?Be:ke}function ee(I,Ae){for(var Ee,q,de;;){if(I.lookahead<Y){if(ot(I),I.lookahead<Y&&Ae===b)return Be;if(I.lookahead===0)break}if(Ee=0,I.lookahead>=U&&(I.ins_h=(I.ins_h<<I.hash_shift^I.window[I.strstart+U-1])&I.hash_mask,Ee=I.prev[I.strstart&I.w_mask]=I.head[I.ins_h],I.head[I.ins_h]=I.strstart),I.prev_length=I.match_length,I.prev_match=I.match_start,I.match_length=U-1,Ee!==0&&I.prev_length<I.max_lazy_match&&I.strstart-Ee<=I.w_size-Y&&(I.match_length=Ge(I,Ee),I.match_length<=5&&(I.strategy===f||I.match_length===U&&I.strstart-I.match_start>4096)&&(I.match_length=U-1)),I.prev_length>=U&&I.match_length<=I.prev_length){de=I.strstart+I.lookahead-U,q=z._tr_tally(I,I.strstart-1-I.prev_match,I.prev_length-U),I.lookahead-=I.prev_length-1,I.prev_length-=2;do++I.strstart<=de&&(I.ins_h=(I.ins_h<<I.hash_shift^I.window[I.strstart+U-1])&I.hash_mask,Ee=I.prev[I.strstart&I.w_mask]=I.head[I.ins_h],I.head[I.ins_h]=I.strstart);while(--I.prev_length!==0);if(I.match_available=0,I.match_length=U-1,I.strstart++,q&&(et(I,!1),I.strm.avail_out===0))return Be}else if(I.match_available){if(q=z._tr_tally(I,0,I.window[I.strstart-1]),q&&et(I,!1),I.strstart++,I.lookahead--,I.strm.avail_out===0)return Be}else I.match_available=1,I.strstart++,I.lookahead--}return I.match_available&&(q=z._tr_tally(I,0,I.window[I.strstart-1]),I.match_available=0),I.insert=I.strstart<U-1?I.strstart:U-1,Ae===T?(et(I,!0),I.strm.avail_out===0?be:fe):I.last_lit&&(et(I,!1),I.strm.avail_out===0)?Be:ke}function re(I,Ae){for(var Ee,q,de,we,ut=I.window;;){if(I.lookahead<=N){if(ot(I),I.lookahead<=N&&Ae===b)return Be;if(I.lookahead===0)break}if(I.match_length=0,I.lookahead>=U&&I.strstart>0&&(de=I.strstart-1,q=ut[de],q===ut[++de]&&q===ut[++de]&&q===ut[++de])){we=I.strstart+N;do;while(q===ut[++de]&&q===ut[++de]&&q===ut[++de]&&q===ut[++de]&&q===ut[++de]&&q===ut[++de]&&q===ut[++de]&&q===ut[++de]&&de<we);I.match_length=N-(we-de),I.match_length>I.lookahead&&(I.match_length=I.lookahead)}if(I.match_length>=U?(Ee=z._tr_tally(I,1,I.match_length-U),I.lookahead-=I.match_length,I.strstart+=I.match_length,I.match_length=0):(Ee=z._tr_tally(I,0,I.window[I.strstart]),I.lookahead--,I.strstart++),Ee&&(et(I,!1),I.strm.avail_out===0))return Be}return I.insert=0,Ae===T?(et(I,!0),I.strm.avail_out===0?be:fe):I.last_lit&&(et(I,!1),I.strm.avail_out===0)?Be:ke}function Se(I,Ae){for(var Ee;;){if(I.lookahead===0&&(ot(I),I.lookahead===0)){if(Ae===b)return Be;break}if(I.match_length=0,Ee=z._tr_tally(I,0,I.window[I.strstart]),I.lookahead--,I.strstart++,Ee&&(et(I,!1),I.strm.avail_out===0))return Be}return I.insert=0,Ae===T?(et(I,!0),I.strm.avail_out===0?be:fe):I.last_lit&&(et(I,!1),I.strm.avail_out===0)?Be:ke}function ve(I,Ae,Ee,q,de){this.good_length=I,this.max_lazy=Ae,this.nice_length=Ee,this.max_chain=q,this.func=de}var je;je=[new ve(0,0,0,0,st),new ve(4,4,8,4,Q),new ve(4,5,16,8,Q),new ve(4,6,32,32,Q),new ve(4,4,16,16,ee),new ve(8,16,32,32,ee),new ve(8,16,128,128,ee),new ve(8,32,128,256,ee),new ve(32,128,258,1024,ee),new ve(32,258,258,4096,ee)];function Ie(I){I.window_size=2*I.w_size,it(I.head),I.max_lazy_match=je[I.level].max_lazy,I.good_match=je[I.level].good_length,I.nice_match=je[I.level].nice_length,I.max_chain_length=je[I.level].max_chain,I.strstart=0,I.block_start=0,I.lookahead=0,I.insert=0,I.match_length=I.prev_length=U-1,I.match_available=0,I.ins_h=0}function J(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=y,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new M.Buf16(H*2),this.dyn_dtree=new M.Buf16((2*G+1)*2),this.bl_tree=new M.Buf16((2*F+1)*2),it(this.dyn_ltree),it(this.dyn_dtree),it(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new M.Buf16(K+1),this.heap=new M.Buf16(2*V+1),it(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new M.Buf16(2*V+1),it(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function me(I){var Ae;return!I||!I.state?Ve(I,l):(I.total_in=I.total_out=0,I.data_type=h,Ae=I.state,Ae.pending=0,Ae.pending_out=0,Ae.wrap<0&&(Ae.wrap=-Ae.wrap),Ae.status=Ae.wrap?ae:ge,I.adler=Ae.wrap===2?0:1,Ae.last_flush=b,z._tr_init(Ae),p)}function Te(I){var Ae=me(I);return Ae===p&&Ie(I.state),Ae}function He(I,Ae){return!I||!I.state||I.state.wrap!==2?l:(I.state.gzhead=Ae,p)}function _e(I,Ae,Ee,q,de,we){if(!I)return l;var ut=1;if(Ae===u&&(Ae=6),q<0?(ut=0,q=-q):q>15&&(ut=2,q-=16),de<1||de>E||Ee!==y||q<8||q>15||Ae<0||Ae>9||we<0||we>o)return Ve(I,l);q===8&&(q=9);var at=new J;return I.state=at,at.strm=I,at.wrap=ut,at.gzhead=null,at.w_bits=q,at.w_size=1<<at.w_bits,at.w_mask=at.w_size-1,at.hash_bits=de+7,at.hash_size=1<<at.hash_bits,at.hash_mask=at.hash_size-1,at.hash_shift=~~((at.hash_bits+U-1)/U),at.window=new M.Buf8(at.w_size*2),at.head=new M.Buf16(at.hash_size),at.prev=new M.Buf16(at.w_size),at.lit_bufsize=1<<de+6,at.pending_buf_size=at.lit_bufsize*4,at.pending_buf=new M.Buf8(at.pending_buf_size),at.d_buf=1*at.lit_bufsize,at.l_buf=3*at.lit_bufsize,at.level=Ae,at.strategy=we,at.method=Ee,Te(I)}function Ue(I,Ae){return _e(I,Ae,y,w,W,v)}function $(I,Ae){var Ee,q,de,we;if(!I||!I.state||Ae>D||Ae<0)return I?Ve(I,l):l;if(q=I.state,!I.output||!I.input&&I.avail_in!==0||q.status===Fe&&Ae!==T)return Ve(I,I.avail_out===0?a:l);if(q.strm=I,Ee=q.last_flush,q.last_flush=Ae,q.status===ae)if(q.wrap===2)I.adler=0,$e(q,31),$e(q,139),$e(q,8),q.gzhead?($e(q,(q.gzhead.text?1:0)+(q.gzhead.hcrc?2:0)+(q.gzhead.extra?4:0)+(q.gzhead.name?8:0)+(q.gzhead.comment?16:0)),$e(q,q.gzhead.time&255),$e(q,q.gzhead.time>>8&255),$e(q,q.gzhead.time>>16&255),$e(q,q.gzhead.time>>24&255),$e(q,q.level===9?2:q.strategy>=d||q.level<2?4:0),$e(q,q.gzhead.os&255),q.gzhead.extra&&q.gzhead.extra.length&&($e(q,q.gzhead.extra.length&255),$e(q,q.gzhead.extra.length>>8&255)),q.gzhead.hcrc&&(I.adler=B(I.adler,q.pending_buf,q.pending,0)),q.gzindex=0,q.status=he):($e(q,0),$e(q,0),$e(q,0),$e(q,0),$e(q,0),$e(q,q.level===9?2:q.strategy>=d||q.level<2?4:0),$e(q,De),q.status=ge);else{var ut=y+(q.w_bits-8<<4)<<8,at=-1;q.strategy>=d||q.level<2?at=0:q.level<6?at=1:q.level===6?at=2:at=3,ut|=at<<6,q.strstart!==0&&(ut|=ne),ut+=31-ut%31,q.status=ge,Qe(q,ut),q.strstart!==0&&(Qe(q,I.adler>>>16),Qe(q,I.adler&65535)),I.adler=1}if(q.status===he)if(q.gzhead.extra){for(de=q.pending;q.gzindex<(q.gzhead.extra.length&65535)&&!(q.pending===q.pending_buf_size&&(q.gzhead.hcrc&&q.pending>de&&(I.adler=B(I.adler,q.pending_buf,q.pending-de,de)),nt(I),de=q.pending,q.pending===q.pending_buf_size));)$e(q,q.gzhead.extra[q.gzindex]&255),q.gzindex++;q.gzhead.hcrc&&q.pending>de&&(I.adler=B(I.adler,q.pending_buf,q.pending-de,de)),q.gzindex===q.gzhead.extra.length&&(q.gzindex=0,q.status=oe)}else q.status=oe;if(q.status===oe)if(q.gzhead.name){de=q.pending;do{if(q.pending===q.pending_buf_size&&(q.gzhead.hcrc&&q.pending>de&&(I.adler=B(I.adler,q.pending_buf,q.pending-de,de)),nt(I),de=q.pending,q.pending===q.pending_buf_size)){we=1;break}q.gzindex<q.gzhead.name.length?we=q.gzhead.name.charCodeAt(q.gzindex++)&255:we=0,$e(q,we)}while(we!==0);q.gzhead.hcrc&&q.pending>de&&(I.adler=B(I.adler,q.pending_buf,q.pending-de,de)),we===0&&(q.gzindex=0,q.status=pe)}else q.status=pe;if(q.status===pe)if(q.gzhead.comment){de=q.pending;do{if(q.pending===q.pending_buf_size&&(q.gzhead.hcrc&&q.pending>de&&(I.adler=B(I.adler,q.pending_buf,q.pending-de,de)),nt(I),de=q.pending,q.pending===q.pending_buf_size)){we=1;break}q.gzindex<q.gzhead.comment.length?we=q.gzhead.comment.charCodeAt(q.gzindex++)&255:we=0,$e(q,we)}while(we!==0);q.gzhead.hcrc&&q.pending>de&&(I.adler=B(I.adler,q.pending_buf,q.pending-de,de)),we===0&&(q.status=ue)}else q.status=ue;if(q.status===ue&&(q.gzhead.hcrc?(q.pending+2>q.pending_buf_size&&nt(I),q.pending+2<=q.pending_buf_size&&($e(q,I.adler&255),$e(q,I.adler>>8&255),I.adler=0,q.status=ge)):q.status=ge),q.pending!==0){if(nt(I),I.avail_out===0)return q.last_flush=-1,p}else if(I.avail_in===0&&Xe(Ae)<=Xe(Ee)&&Ae!==T)return Ve(I,a);if(q.status===Fe&&I.avail_in!==0)return Ve(I,a);if(I.avail_in!==0||q.lookahead!==0||Ae!==b&&q.status!==Fe){var tt=q.strategy===d?Se(q,Ae):q.strategy===r?re(q,Ae):je[q.level].func(q,Ae);if((tt===be||tt===fe)&&(q.status=Fe),tt===Be||tt===be)return I.avail_out===0&&(q.last_flush=-1),p;if(tt===ke&&(Ae===S?z._tr_align(q):Ae!==D&&(z._tr_stored_block(q,0,0,!1),Ae===m&&(it(q.head),q.lookahead===0&&(q.strstart=0,q.block_start=0,q.insert=0))),nt(I),I.avail_out===0))return q.last_flush=-1,p}return Ae!==T?p:q.wrap<=0?A:(q.wrap===2?($e(q,I.adler&255),$e(q,I.adler>>8&255),$e(q,I.adler>>16&255),$e(q,I.adler>>24&255),$e(q,I.total_in&255),$e(q,I.total_in>>8&255),$e(q,I.total_in>>16&255),$e(q,I.total_in>>24&255)):(Qe(q,I.adler>>>16),Qe(q,I.adler&65535)),nt(I),q.wrap>0&&(q.wrap=-q.wrap),q.pending!==0?p:A)}function We(I){var Ae;return!I||!I.state?l:(Ae=I.state.status,Ae!==ae&&Ae!==he&&Ae!==oe&&Ae!==pe&&Ae!==ue&&Ae!==ge&&Ae!==Fe?Ve(I,l):(I.state=null,Ae===ge?Ve(I,n):p))}function rt(I,Ae){var Ee=Ae.length,q,de,we,ut,at,tt,vt,ti;if(!I||!I.state||(q=I.state,ut=q.wrap,ut===2||ut===1&&q.status!==ae||q.lookahead))return l;for(ut===1&&(I.adler=L(I.adler,Ae,Ee,0)),q.wrap=0,Ee>=q.w_size&&(ut===0&&(it(q.head),q.strstart=0,q.block_start=0,q.insert=0),ti=new M.Buf8(q.w_size),M.arraySet(ti,Ae,Ee-q.w_size,q.w_size,0),Ae=ti,Ee=q.w_size),at=I.avail_in,tt=I.next_in,vt=I.input,I.avail_in=Ee,I.next_in=0,I.input=Ae,ot(q);q.lookahead>=U;){de=q.strstart,we=q.lookahead-(U-1);do q.ins_h=(q.ins_h<<q.hash_shift^q.window[de+U-1])&q.hash_mask,q.prev[de&q.w_mask]=q.head[q.ins_h],q.head[q.ins_h]=de,de++;while(--we);q.strstart=de,q.lookahead=U-1,ot(q)}return q.strstart+=q.lookahead,q.block_start=q.strstart,q.insert=q.lookahead,q.lookahead=0,q.match_length=q.prev_length=U-1,q.match_available=0,I.next_in=tt,I.input=vt,I.avail_in=at,q.wrap=ut,p}R.deflateInit=Ue,R.deflateInit2=_e,R.deflateReset=Te,R.deflateResetKeep=me,R.deflateSetHeader=He,R.deflate=$,R.deflateEnd=We,R.deflateSetDictionary=rt,R.deflateInfo="pako deflate (from Nodeca project)"},"./node_modules/upng-js/node_modules/pako/lib/zlib/gzheader.js":k=>{function R(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}k.exports=R},"./node_modules/upng-js/node_modules/pako/lib/zlib/inffast.js":k=>{var R=30,g=12;k.exports=function(z,L){var B,x,b,S,m,T,D,p,A,l,n,a,u,f,d,r,o,v,h,y,E,w,W,P,j;B=z.state,x=z.next_in,P=z.input,b=x+(z.avail_in-5),S=z.next_out,j=z.output,m=S-(L-z.avail_out),T=S+(z.avail_out-257),D=B.dmax,p=B.wsize,A=B.whave,l=B.wnext,n=B.window,a=B.hold,u=B.bits,f=B.lencode,d=B.distcode,r=(1<<B.lenbits)-1,o=(1<<B.distbits)-1;e:do{u<15&&(a+=P[x++]<<u,u+=8,a+=P[x++]<<u,u+=8),v=f[a&r];t:for(;;){if(h=v>>>24,a>>>=h,u-=h,h=v>>>16&255,h===0)j[S++]=v&65535;else if(h&16){y=v&65535,h&=15,h&&(u<h&&(a+=P[x++]<<u,u+=8),y+=a&(1<<h)-1,a>>>=h,u-=h),u<15&&(a+=P[x++]<<u,u+=8,a+=P[x++]<<u,u+=8),v=d[a&o];i:for(;;){if(h=v>>>24,a>>>=h,u-=h,h=v>>>16&255,h&16){if(E=v&65535,h&=15,u<h&&(a+=P[x++]<<u,u+=8,u<h&&(a+=P[x++]<<u,u+=8)),E+=a&(1<<h)-1,E>D){z.msg="invalid distance too far back",B.mode=R;break e}if(a>>>=h,u-=h,h=S-m,E>h){if(h=E-h,h>A&&B.sane){z.msg="invalid distance too far back",B.mode=R;break e}if(w=0,W=n,l===0){if(w+=p-h,h<y){y-=h;do j[S++]=n[w++];while(--h);w=S-E,W=j}}else if(l<h){if(w+=p+l-h,h-=l,h<y){y-=h;do j[S++]=n[w++];while(--h);if(w=0,l<y){h=l,y-=h;do j[S++]=n[w++];while(--h);w=S-E,W=j}}}else if(w+=l-h,h<y){y-=h;do j[S++]=n[w++];while(--h);w=S-E,W=j}for(;y>2;)j[S++]=W[w++],j[S++]=W[w++],j[S++]=W[w++],y-=3;y&&(j[S++]=W[w++],y>1&&(j[S++]=W[w++]))}else{w=S-E;do j[S++]=j[w++],j[S++]=j[w++],j[S++]=j[w++],y-=3;while(y>2);y&&(j[S++]=j[w++],y>1&&(j[S++]=j[w++]))}}else if((h&64)===0){v=d[(v&65535)+(a&(1<<h)-1)];continue i}else{z.msg="invalid distance code",B.mode=R;break e}break}}else if((h&64)===0){v=f[(v&65535)+(a&(1<<h)-1)];continue t}else if(h&32){B.mode=g;break e}else{z.msg="invalid literal/length code",B.mode=R;break e}break}}while(x<b&&S<T);y=u>>3,x-=y,u-=y<<3,a&=(1<<u)-1,z.next_in=x,z.next_out=S,z.avail_in=x<b?5+(b-x):5-(x-b),z.avail_out=S<T?257+(T-S):257-(S-T),B.hold=a,B.bits=u}},"./node_modules/upng-js/node_modules/pako/lib/zlib/inflate.js":(k,R,g)=>{var M=g("./node_modules/upng-js/node_modules/pako/lib/utils/common.js"),z=g("./node_modules/upng-js/node_modules/pako/lib/zlib/adler32.js"),L=g("./node_modules/upng-js/node_modules/pako/lib/zlib/crc32.js"),B=g("./node_modules/upng-js/node_modules/pako/lib/zlib/inffast.js"),x=g("./node_modules/upng-js/node_modules/pako/lib/zlib/inftrees.js"),b=0,S=1,m=2,T=4,D=5,p=6,A=0,l=1,n=2,a=-2,u=-3,f=-4,d=-5,r=8,o=1,v=2,h=3,y=4,E=5,w=6,W=7,P=8,j=9,V=10,G=11,F=12,H=13,K=14,U=15,N=16,Y=17,ne=18,ae=19,he=20,oe=21,pe=22,ue=23,ge=24,Fe=25,Be=26,ke=27,be=28,fe=29,De=30,Ve=31,Xe=32,it=852,nt=592,et=15,$e=et;function Qe(_e){return(_e>>>24&255)+(_e>>>8&65280)+((_e&65280)<<8)+((_e&255)<<24)}function Ye(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new M.Buf16(320),this.work=new M.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Ge(_e){var Ue;return!_e||!_e.state?a:(Ue=_e.state,_e.total_in=_e.total_out=Ue.total=0,_e.msg="",Ue.wrap&&(_e.adler=Ue.wrap&1),Ue.mode=o,Ue.last=0,Ue.havedict=0,Ue.dmax=32768,Ue.head=null,Ue.hold=0,Ue.bits=0,Ue.lencode=Ue.lendyn=new M.Buf32(it),Ue.distcode=Ue.distdyn=new M.Buf32(nt),Ue.sane=1,Ue.back=-1,A)}function ot(_e){var Ue;return!_e||!_e.state?a:(Ue=_e.state,Ue.wsize=0,Ue.whave=0,Ue.wnext=0,Ge(_e))}function st(_e,Ue){var $,We;return!_e||!_e.state||(We=_e.state,Ue<0?($=0,Ue=-Ue):($=(Ue>>4)+1,Ue<48&&(Ue&=15)),Ue&&(Ue<8||Ue>15))?a:(We.window!==null&&We.wbits!==Ue&&(We.window=null),We.wrap=$,We.wbits=Ue,ot(_e))}function Q(_e,Ue){var $,We;return _e?(We=new Ye,_e.state=We,We.window=null,$=st(_e,Ue),$!==A&&(_e.state=null),$):a}function ee(_e){return Q(_e,$e)}var re=!0,Se,ve;function je(_e){if(re){var Ue;for(Se=new M.Buf32(512),ve=new M.Buf32(32),Ue=0;Ue<144;)_e.lens[Ue++]=8;for(;Ue<256;)_e.lens[Ue++]=9;for(;Ue<280;)_e.lens[Ue++]=7;for(;Ue<288;)_e.lens[Ue++]=8;for(x(S,_e.lens,0,288,Se,0,_e.work,{bits:9}),Ue=0;Ue<32;)_e.lens[Ue++]=5;x(m,_e.lens,0,32,ve,0,_e.work,{bits:5}),re=!1}_e.lencode=Se,_e.lenbits=9,_e.distcode=ve,_e.distbits=5}function Ie(_e,Ue,$,We){var rt,I=_e.state;return I.window===null&&(I.wsize=1<<I.wbits,I.wnext=0,I.whave=0,I.window=new M.Buf8(I.wsize)),We>=I.wsize?(M.arraySet(I.window,Ue,$-I.wsize,I.wsize,0),I.wnext=0,I.whave=I.wsize):(rt=I.wsize-I.wnext,rt>We&&(rt=We),M.arraySet(I.window,Ue,$-We,rt,I.wnext),We-=rt,We?(M.arraySet(I.window,Ue,$-We,We,0),I.wnext=We,I.whave=I.wsize):(I.wnext+=rt,I.wnext===I.wsize&&(I.wnext=0),I.whave<I.wsize&&(I.whave+=rt))),0}function J(_e,Ue){var $,We,rt,I,Ae,Ee,q,de,we,ut,at,tt,vt,ti,St=0,Tt,At,ii,Pt,Hi,bi,Ht,jt,It=new M.Buf8(4),Nt,vi,Tn=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!_e||!_e.state||!_e.output||!_e.input&&_e.avail_in!==0)return a;$=_e.state,$.mode===F&&($.mode=H),Ae=_e.next_out,rt=_e.output,q=_e.avail_out,I=_e.next_in,We=_e.input,Ee=_e.avail_in,de=$.hold,we=$.bits,ut=Ee,at=q,jt=A;e:for(;;)switch($.mode){case o:if($.wrap===0){$.mode=H;break}for(;we<16;){if(Ee===0)break e;Ee--,de+=We[I++]<<we,we+=8}if($.wrap&2&&de===35615){$.check=0,It[0]=de&255,It[1]=de>>>8&255,$.check=L($.check,It,2,0),de=0,we=0,$.mode=v;break}if($.flags=0,$.head&&($.head.done=!1),!($.wrap&1)||(((de&255)<<8)+(de>>8))%31){_e.msg="incorrect header check",$.mode=De;break}if((de&15)!==r){_e.msg="unknown compression method",$.mode=De;break}if(de>>>=4,we-=4,Ht=(de&15)+8,$.wbits===0)$.wbits=Ht;else if(Ht>$.wbits){_e.msg="invalid window size",$.mode=De;break}$.dmax=1<<Ht,_e.adler=$.check=1,$.mode=de&512?V:F,de=0,we=0;break;case v:for(;we<16;){if(Ee===0)break e;Ee--,de+=We[I++]<<we,we+=8}if($.flags=de,($.flags&255)!==r){_e.msg="unknown compression method",$.mode=De;break}if($.flags&57344){_e.msg="unknown header flags set",$.mode=De;break}$.head&&($.head.text=de>>8&1),$.flags&512&&(It[0]=de&255,It[1]=de>>>8&255,$.check=L($.check,It,2,0)),de=0,we=0,$.mode=h;case h:for(;we<32;){if(Ee===0)break e;Ee--,de+=We[I++]<<we,we+=8}$.head&&($.head.time=de),$.flags&512&&(It[0]=de&255,It[1]=de>>>8&255,It[2]=de>>>16&255,It[3]=de>>>24&255,$.check=L($.check,It,4,0)),de=0,we=0,$.mode=y;case y:for(;we<16;){if(Ee===0)break e;Ee--,de+=We[I++]<<we,we+=8}$.head&&($.head.xflags=de&255,$.head.os=de>>8),$.flags&512&&(It[0]=de&255,It[1]=de>>>8&255,$.check=L($.check,It,2,0)),de=0,we=0,$.mode=E;case E:if($.flags&1024){for(;we<16;){if(Ee===0)break e;Ee--,de+=We[I++]<<we,we+=8}$.length=de,$.head&&($.head.extra_len=de),$.flags&512&&(It[0]=de&255,It[1]=de>>>8&255,$.check=L($.check,It,2,0)),de=0,we=0}else $.head&&($.head.extra=null);$.mode=w;case w:if($.flags&1024&&(tt=$.length,tt>Ee&&(tt=Ee),tt&&($.head&&(Ht=$.head.extra_len-$.length,$.head.extra||($.head.extra=new Array($.head.extra_len)),M.arraySet($.head.extra,We,I,tt,Ht)),$.flags&512&&($.check=L($.check,We,tt,I)),Ee-=tt,I+=tt,$.length-=tt),$.length))break e;$.length=0,$.mode=W;case W:if($.flags&2048){if(Ee===0)break e;tt=0;do Ht=We[I+tt++],$.head&&Ht&&$.length<65536&&($.head.name+=String.fromCharCode(Ht));while(Ht&&tt<Ee);if($.flags&512&&($.check=L($.check,We,tt,I)),Ee-=tt,I+=tt,Ht)break e}else $.head&&($.head.name=null);$.length=0,$.mode=P;case P:if($.flags&4096){if(Ee===0)break e;tt=0;do Ht=We[I+tt++],$.head&&Ht&&$.length<65536&&($.head.comment+=String.fromCharCode(Ht));while(Ht&&tt<Ee);if($.flags&512&&($.check=L($.check,We,tt,I)),Ee-=tt,I+=tt,Ht)break e}else $.head&&($.head.comment=null);$.mode=j;case j:if($.flags&512){for(;we<16;){if(Ee===0)break e;Ee--,de+=We[I++]<<we,we+=8}if(de!==($.check&65535)){_e.msg="header crc mismatch",$.mode=De;break}de=0,we=0}$.head&&($.head.hcrc=$.flags>>9&1,$.head.done=!0),_e.adler=$.check=0,$.mode=F;break;case V:for(;we<32;){if(Ee===0)break e;Ee--,de+=We[I++]<<we,we+=8}_e.adler=$.check=Qe(de),de=0,we=0,$.mode=G;case G:if($.havedict===0)return _e.next_out=Ae,_e.avail_out=q,_e.next_in=I,_e.avail_in=Ee,$.hold=de,$.bits=we,n;_e.adler=$.check=1,$.mode=F;case F:if(Ue===D||Ue===p)break e;case H:if($.last){de>>>=we&7,we-=we&7,$.mode=ke;break}for(;we<3;){if(Ee===0)break e;Ee--,de+=We[I++]<<we,we+=8}switch($.last=de&1,de>>>=1,we-=1,de&3){case 0:$.mode=K;break;case 1:if(je($),$.mode=he,Ue===p){de>>>=2,we-=2;break e}break;case 2:$.mode=Y;break;case 3:_e.msg="invalid block type",$.mode=De}de>>>=2,we-=2;break;case K:for(de>>>=we&7,we-=we&7;we<32;){if(Ee===0)break e;Ee--,de+=We[I++]<<we,we+=8}if((de&65535)!==(de>>>16^65535)){_e.msg="invalid stored block lengths",$.mode=De;break}if($.length=de&65535,de=0,we=0,$.mode=U,Ue===p)break e;case U:$.mode=N;case N:if(tt=$.length,tt){if(tt>Ee&&(tt=Ee),tt>q&&(tt=q),tt===0)break e;M.arraySet(rt,We,I,tt,Ae),Ee-=tt,I+=tt,q-=tt,Ae+=tt,$.length-=tt;break}$.mode=F;break;case Y:for(;we<14;){if(Ee===0)break e;Ee--,de+=We[I++]<<we,we+=8}if($.nlen=(de&31)+257,de>>>=5,we-=5,$.ndist=(de&31)+1,de>>>=5,we-=5,$.ncode=(de&15)+4,de>>>=4,we-=4,$.nlen>286||$.ndist>30){_e.msg="too many length or distance symbols",$.mode=De;break}$.have=0,$.mode=ne;case ne:for(;$.have<$.ncode;){for(;we<3;){if(Ee===0)break e;Ee--,de+=We[I++]<<we,we+=8}$.lens[Tn[$.have++]]=de&7,de>>>=3,we-=3}for(;$.have<19;)$.lens[Tn[$.have++]]=0;if($.lencode=$.lendyn,$.lenbits=7,Nt={bits:$.lenbits},jt=x(b,$.lens,0,19,$.lencode,0,$.work,Nt),$.lenbits=Nt.bits,jt){_e.msg="invalid code lengths set",$.mode=De;break}$.have=0,$.mode=ae;case ae:for(;$.have<$.nlen+$.ndist;){for(;St=$.lencode[de&(1<<$.lenbits)-1],Tt=St>>>24,At=St>>>16&255,ii=St&65535,!(Tt<=we);){if(Ee===0)break e;Ee--,de+=We[I++]<<we,we+=8}if(ii<16)de>>>=Tt,we-=Tt,$.lens[$.have++]=ii;else{if(ii===16){for(vi=Tt+2;we<vi;){if(Ee===0)break e;Ee--,de+=We[I++]<<we,we+=8}if(de>>>=Tt,we-=Tt,$.have===0){_e.msg="invalid bit length repeat",$.mode=De;break}Ht=$.lens[$.have-1],tt=3+(de&3),de>>>=2,we-=2}else if(ii===17){for(vi=Tt+3;we<vi;){if(Ee===0)break e;Ee--,de+=We[I++]<<we,we+=8}de>>>=Tt,we-=Tt,Ht=0,tt=3+(de&7),de>>>=3,we-=3}else{for(vi=Tt+7;we<vi;){if(Ee===0)break e;Ee--,de+=We[I++]<<we,we+=8}de>>>=Tt,we-=Tt,Ht=0,tt=11+(de&127),de>>>=7,we-=7}if($.have+tt>$.nlen+$.ndist){_e.msg="invalid bit length repeat",$.mode=De;break}for(;tt--;)$.lens[$.have++]=Ht}}if($.mode===De)break;if($.lens[256]===0){_e.msg="invalid code -- missing end-of-block",$.mode=De;break}if($.lenbits=9,Nt={bits:$.lenbits},jt=x(S,$.lens,0,$.nlen,$.lencode,0,$.work,Nt),$.lenbits=Nt.bits,jt){_e.msg="invalid literal/lengths set",$.mode=De;break}if($.distbits=6,$.distcode=$.distdyn,Nt={bits:$.distbits},jt=x(m,$.lens,$.nlen,$.ndist,$.distcode,0,$.work,Nt),$.distbits=Nt.bits,jt){_e.msg="invalid distances set",$.mode=De;break}if($.mode=he,Ue===p)break e;case he:$.mode=oe;case oe:if(Ee>=6&&q>=258){_e.next_out=Ae,_e.avail_out=q,_e.next_in=I,_e.avail_in=Ee,$.hold=de,$.bits=we,B(_e,at),Ae=_e.next_out,rt=_e.output,q=_e.avail_out,I=_e.next_in,We=_e.input,Ee=_e.avail_in,de=$.hold,we=$.bits,$.mode===F&&($.back=-1);break}for($.back=0;St=$.lencode[de&(1<<$.lenbits)-1],Tt=St>>>24,At=St>>>16&255,ii=St&65535,!(Tt<=we);){if(Ee===0)break e;Ee--,de+=We[I++]<<we,we+=8}if(At&&(At&240)===0){for(Pt=Tt,Hi=At,bi=ii;St=$.lencode[bi+((de&(1<<Pt+Hi)-1)>>Pt)],Tt=St>>>24,At=St>>>16&255,ii=St&65535,!(Pt+Tt<=we);){if(Ee===0)break e;Ee--,de+=We[I++]<<we,we+=8}de>>>=Pt,we-=Pt,$.back+=Pt}if(de>>>=Tt,we-=Tt,$.back+=Tt,$.length=ii,At===0){$.mode=Be;break}if(At&32){$.back=-1,$.mode=F;break}if(At&64){_e.msg="invalid literal/length code",$.mode=De;break}$.extra=At&15,$.mode=pe;case pe:if($.extra){for(vi=$.extra;we<vi;){if(Ee===0)break e;Ee--,de+=We[I++]<<we,we+=8}$.length+=de&(1<<$.extra)-1,de>>>=$.extra,we-=$.extra,$.back+=$.extra}$.was=$.length,$.mode=ue;case ue:for(;St=$.distcode[de&(1<<$.distbits)-1],Tt=St>>>24,At=St>>>16&255,ii=St&65535,!(Tt<=we);){if(Ee===0)break e;Ee--,de+=We[I++]<<we,we+=8}if((At&240)===0){for(Pt=Tt,Hi=At,bi=ii;St=$.distcode[bi+((de&(1<<Pt+Hi)-1)>>Pt)],Tt=St>>>24,At=St>>>16&255,ii=St&65535,!(Pt+Tt<=we);){if(Ee===0)break e;Ee--,de+=We[I++]<<we,we+=8}de>>>=Pt,we-=Pt,$.back+=Pt}if(de>>>=Tt,we-=Tt,$.back+=Tt,At&64){_e.msg="invalid distance code",$.mode=De;break}$.offset=ii,$.extra=At&15,$.mode=ge;case ge:if($.extra){for(vi=$.extra;we<vi;){if(Ee===0)break e;Ee--,de+=We[I++]<<we,we+=8}$.offset+=de&(1<<$.extra)-1,de>>>=$.extra,we-=$.extra,$.back+=$.extra}if($.offset>$.dmax){_e.msg="invalid distance too far back",$.mode=De;break}$.mode=Fe;case Fe:if(q===0)break e;if(tt=at-q,$.offset>tt){if(tt=$.offset-tt,tt>$.whave&&$.sane){_e.msg="invalid distance too far back",$.mode=De;break}tt>$.wnext?(tt-=$.wnext,vt=$.wsize-tt):vt=$.wnext-tt,tt>$.length&&(tt=$.length),ti=$.window}else ti=rt,vt=Ae-$.offset,tt=$.length;tt>q&&(tt=q),q-=tt,$.length-=tt;do rt[Ae++]=ti[vt++];while(--tt);$.length===0&&($.mode=oe);break;case Be:if(q===0)break e;rt[Ae++]=$.length,q--,$.mode=oe;break;case ke:if($.wrap){for(;we<32;){if(Ee===0)break e;Ee--,de|=We[I++]<<we,we+=8}if(at-=q,_e.total_out+=at,$.total+=at,at&&(_e.adler=$.check=$.flags?L($.check,rt,at,Ae-at):z($.check,rt,at,Ae-at)),at=q,($.flags?de:Qe(de))!==$.check){_e.msg="incorrect data check",$.mode=De;break}de=0,we=0}$.mode=be;case be:if($.wrap&&$.flags){for(;we<32;){if(Ee===0)break e;Ee--,de+=We[I++]<<we,we+=8}if(de!==($.total&4294967295)){_e.msg="incorrect length check",$.mode=De;break}de=0,we=0}$.mode=fe;case fe:jt=l;break e;case De:jt=u;break e;case Ve:return f;case Xe:default:return a}return _e.next_out=Ae,_e.avail_out=q,_e.next_in=I,_e.avail_in=Ee,$.hold=de,$.bits=we,($.wsize||at!==_e.avail_out&&$.mode<De&&($.mode<ke||Ue!==T))&&Ie(_e,_e.output,_e.next_out,at-_e.avail_out),ut-=_e.avail_in,at-=_e.avail_out,_e.total_in+=ut,_e.total_out+=at,$.total+=at,$.wrap&&at&&(_e.adler=$.check=$.flags?L($.check,rt,at,_e.next_out-at):z($.check,rt,at,_e.next_out-at)),_e.data_type=$.bits+($.last?64:0)+($.mode===F?128:0)+($.mode===he||$.mode===U?256:0),(ut===0&&at===0||Ue===T)&&jt===A&&(jt=d),jt}function me(_e){if(!_e||!_e.state)return a;var Ue=_e.state;return Ue.window&&(Ue.window=null),_e.state=null,A}function Te(_e,Ue){var $;return!_e||!_e.state||($=_e.state,($.wrap&2)===0)?a:($.head=Ue,Ue.done=!1,A)}function He(_e,Ue){var $=Ue.length,We,rt,I;return!_e||!_e.state||(We=_e.state,We.wrap!==0&&We.mode!==G)?a:We.mode===G&&(rt=1,rt=z(rt,Ue,$,0),rt!==We.check)?u:(I=Ie(_e,Ue,$,$),I?(We.mode=Ve,f):(We.havedict=1,A))}R.inflateReset=ot,R.inflateReset2=st,R.inflateResetKeep=Ge,R.inflateInit=ee,R.inflateInit2=Q,R.inflate=J,R.inflateEnd=me,R.inflateGetHeader=Te,R.inflateSetDictionary=He,R.inflateInfo="pako inflate (from Nodeca project)"},"./node_modules/upng-js/node_modules/pako/lib/zlib/inftrees.js":(k,R,g)=>{var M=g("./node_modules/upng-js/node_modules/pako/lib/utils/common.js"),z=15,L=852,B=592,x=0,b=1,S=2,m=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],T=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],D=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],p=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];k.exports=function(l,n,a,u,f,d,r,o){var v=o.bits,h=0,y=0,E=0,w=0,W=0,P=0,j=0,V=0,G=0,F=0,H,K,U,N,Y,ne=null,ae=0,he,oe=new M.Buf16(z+1),pe=new M.Buf16(z+1),ue=null,ge=0,Fe,Be,ke;for(h=0;h<=z;h++)oe[h]=0;for(y=0;y<u;y++)oe[n[a+y]]++;for(W=v,w=z;w>=1&&oe[w]===0;w--);if(W>w&&(W=w),w===0)return f[d++]=20971520,f[d++]=20971520,o.bits=1,0;for(E=1;E<w&&oe[E]===0;E++);for(W<E&&(W=E),V=1,h=1;h<=z;h++)if(V<<=1,V-=oe[h],V<0)return-1;if(V>0&&(l===x||w!==1))return-1;for(pe[1]=0,h=1;h<z;h++)pe[h+1]=pe[h]+oe[h];for(y=0;y<u;y++)n[a+y]!==0&&(r[pe[n[a+y]]++]=y);if(l===x?(ne=ue=r,he=19):l===b?(ne=m,ae-=257,ue=T,ge-=257,he=256):(ne=D,ue=p,he=-1),F=0,y=0,h=E,Y=d,P=W,j=0,U=-1,G=1<<W,N=G-1,l===b&&G>L||l===S&&G>B)return 1;for(;;){Fe=h-j,r[y]<he?(Be=0,ke=r[y]):r[y]>he?(Be=ue[ge+r[y]],ke=ne[ae+r[y]]):(Be=96,ke=0),H=1<<h-j,K=1<<P,E=K;do K-=H,f[Y+(F>>j)+K]=Fe<<24|Be<<16|ke|0;while(K!==0);for(H=1<<h-1;F&H;)H>>=1;if(H!==0?(F&=H-1,F+=H):F=0,y++,--oe[h]===0){if(h===w)break;h=n[a+r[y]]}if(h>W&&(F&N)!==U){for(j===0&&(j=W),Y+=E,P=h-j,V=1<<P;P+j<w&&(V-=oe[P+j],!(V<=0));)P++,V<<=1;if(G+=1<<P,l===b&&G>L||l===S&&G>B)return 1;U=F&N,f[U]=W<<24|P<<16|Y-d|0}}return F!==0&&(f[Y+F]=h-j<<24|4194304|0),o.bits=W,0}},"./node_modules/upng-js/node_modules/pako/lib/zlib/messages.js":k=>{k.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},"./node_modules/upng-js/node_modules/pako/lib/zlib/trees.js":(k,R,g)=>{var M=g("./node_modules/upng-js/node_modules/pako/lib/utils/common.js"),z=4,L=0,B=1,x=2;function b(J){for(var me=J.length;--me>=0;)J[me]=0}var S=0,m=1,T=2,D=3,p=258,A=29,l=256,n=l+1+A,a=30,u=19,f=2*n+1,d=15,r=16,o=7,v=256,h=16,y=17,E=18,w=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],W=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],P=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],j=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],V=512,G=new Array((n+2)*2);b(G);var F=new Array(a*2);b(F);var H=new Array(V);b(H);var K=new Array(p-D+1);b(K);var U=new Array(A);b(U);var N=new Array(a);b(N);function Y(J,me,Te,He,_e){this.static_tree=J,this.extra_bits=me,this.extra_base=Te,this.elems=He,this.max_length=_e,this.has_stree=J&&J.length}var ne,ae,he;function oe(J,me){this.dyn_tree=J,this.max_code=0,this.stat_desc=me}function pe(J){return J<256?H[J]:H[256+(J>>>7)]}function ue(J,me){J.pending_buf[J.pending++]=me&255,J.pending_buf[J.pending++]=me>>>8&255}function ge(J,me,Te){J.bi_valid>r-Te?(J.bi_buf|=me<<J.bi_valid&65535,ue(J,J.bi_buf),J.bi_buf=me>>r-J.bi_valid,J.bi_valid+=Te-r):(J.bi_buf|=me<<J.bi_valid&65535,J.bi_valid+=Te)}function Fe(J,me,Te){ge(J,Te[me*2],Te[me*2+1])}function Be(J,me){var Te=0;do Te|=J&1,J>>>=1,Te<<=1;while(--me>0);return Te>>>1}function ke(J){J.bi_valid===16?(ue(J,J.bi_buf),J.bi_buf=0,J.bi_valid=0):J.bi_valid>=8&&(J.pending_buf[J.pending++]=J.bi_buf&255,J.bi_buf>>=8,J.bi_valid-=8)}function be(J,me){var Te=me.dyn_tree,He=me.max_code,_e=me.stat_desc.static_tree,Ue=me.stat_desc.has_stree,$=me.stat_desc.extra_bits,We=me.stat_desc.extra_base,rt=me.stat_desc.max_length,I,Ae,Ee,q,de,we,ut=0;for(q=0;q<=d;q++)J.bl_count[q]=0;for(Te[J.heap[J.heap_max]*2+1]=0,I=J.heap_max+1;I<f;I++)Ae=J.heap[I],q=Te[Te[Ae*2+1]*2+1]+1,q>rt&&(q=rt,ut++),Te[Ae*2+1]=q,!(Ae>He)&&(J.bl_count[q]++,de=0,Ae>=We&&(de=$[Ae-We]),we=Te[Ae*2],J.opt_len+=we*(q+de),Ue&&(J.static_len+=we*(_e[Ae*2+1]+de)));if(ut!==0){do{for(q=rt-1;J.bl_count[q]===0;)q--;J.bl_count[q]--,J.bl_count[q+1]+=2,J.bl_count[rt]--,ut-=2}while(ut>0);for(q=rt;q!==0;q--)for(Ae=J.bl_count[q];Ae!==0;)Ee=J.heap[--I],!(Ee>He)&&(Te[Ee*2+1]!==q&&(J.opt_len+=(q-Te[Ee*2+1])*Te[Ee*2],Te[Ee*2+1]=q),Ae--)}}function fe(J,me,Te){var He=new Array(d+1),_e=0,Ue,$;for(Ue=1;Ue<=d;Ue++)He[Ue]=_e=_e+Te[Ue-1]<<1;for($=0;$<=me;$++){var We=J[$*2+1];We!==0&&(J[$*2]=Be(He[We]++,We))}}function De(){var J,me,Te,He,_e,Ue=new Array(d+1);for(Te=0,He=0;He<A-1;He++)for(U[He]=Te,J=0;J<1<<w[He];J++)K[Te++]=He;for(K[Te-1]=He,_e=0,He=0;He<16;He++)for(N[He]=_e,J=0;J<1<<W[He];J++)H[_e++]=He;for(_e>>=7;He<a;He++)for(N[He]=_e<<7,J=0;J<1<<W[He]-7;J++)H[256+_e++]=He;for(me=0;me<=d;me++)Ue[me]=0;for(J=0;J<=143;)G[J*2+1]=8,J++,Ue[8]++;for(;J<=255;)G[J*2+1]=9,J++,Ue[9]++;for(;J<=279;)G[J*2+1]=7,J++,Ue[7]++;for(;J<=287;)G[J*2+1]=8,J++,Ue[8]++;for(fe(G,n+1,Ue),J=0;J<a;J++)F[J*2+1]=5,F[J*2]=Be(J,5);ne=new Y(G,w,l+1,n,d),ae=new Y(F,W,0,a,d),he=new Y(new Array(0),P,0,u,o)}function Ve(J){var me;for(me=0;me<n;me++)J.dyn_ltree[me*2]=0;for(me=0;me<a;me++)J.dyn_dtree[me*2]=0;for(me=0;me<u;me++)J.bl_tree[me*2]=0;J.dyn_ltree[v*2]=1,J.opt_len=J.static_len=0,J.last_lit=J.matches=0}function Xe(J){J.bi_valid>8?ue(J,J.bi_buf):J.bi_valid>0&&(J.pending_buf[J.pending++]=J.bi_buf),J.bi_buf=0,J.bi_valid=0}function it(J,me,Te,He){Xe(J),ue(J,Te),ue(J,~Te),M.arraySet(J.pending_buf,J.window,me,Te,J.pending),J.pending+=Te}function nt(J,me,Te,He){var _e=me*2,Ue=Te*2;return J[_e]<J[Ue]||J[_e]===J[Ue]&&He[me]<=He[Te]}function et(J,me,Te){for(var He=J.heap[Te],_e=Te<<1;_e<=J.heap_len&&(_e<J.heap_len&&nt(me,J.heap[_e+1],J.heap[_e],J.depth)&&_e++,!nt(me,He,J.heap[_e],J.depth));)J.heap[Te]=J.heap[_e],Te=_e,_e<<=1;J.heap[Te]=He}function $e(J,me,Te){var He,_e,Ue=0,$,We;if(J.last_lit!==0)do He=J.pending_buf[J.d_buf+Ue*2]<<8|J.pending_buf[J.d_buf+Ue*2+1],_e=J.pending_buf[J.l_buf+Ue],Ue++,He===0?Fe(J,_e,me):($=K[_e],Fe(J,$+l+1,me),We=w[$],We!==0&&(_e-=U[$],ge(J,_e,We)),He--,$=pe(He),Fe(J,$,Te),We=W[$],We!==0&&(He-=N[$],ge(J,He,We)));while(Ue<J.last_lit);Fe(J,v,me)}function Qe(J,me){var Te=me.dyn_tree,He=me.stat_desc.static_tree,_e=me.stat_desc.has_stree,Ue=me.stat_desc.elems,$,We,rt=-1,I;for(J.heap_len=0,J.heap_max=f,$=0;$<Ue;$++)Te[$*2]!==0?(J.heap[++J.heap_len]=rt=$,J.depth[$]=0):Te[$*2+1]=0;for(;J.heap_len<2;)I=J.heap[++J.heap_len]=rt<2?++rt:0,Te[I*2]=1,J.depth[I]=0,J.opt_len--,_e&&(J.static_len-=He[I*2+1]);for(me.max_code=rt,$=J.heap_len>>1;$>=1;$--)et(J,Te,$);I=Ue;do $=J.heap[1],J.heap[1]=J.heap[J.heap_len--],et(J,Te,1),We=J.heap[1],J.heap[--J.heap_max]=$,J.heap[--J.heap_max]=We,Te[I*2]=Te[$*2]+Te[We*2],J.depth[I]=(J.depth[$]>=J.depth[We]?J.depth[$]:J.depth[We])+1,Te[$*2+1]=Te[We*2+1]=I,J.heap[1]=I++,et(J,Te,1);while(J.heap_len>=2);J.heap[--J.heap_max]=J.heap[1],be(J,me),fe(Te,rt,J.bl_count)}function Ye(J,me,Te){var He,_e=-1,Ue,$=me[0*2+1],We=0,rt=7,I=4;for($===0&&(rt=138,I=3),me[(Te+1)*2+1]=65535,He=0;He<=Te;He++)Ue=$,$=me[(He+1)*2+1],!(++We<rt&&Ue===$)&&(We<I?J.bl_tree[Ue*2]+=We:Ue!==0?(Ue!==_e&&J.bl_tree[Ue*2]++,J.bl_tree[h*2]++):We<=10?J.bl_tree[y*2]++:J.bl_tree[E*2]++,We=0,_e=Ue,$===0?(rt=138,I=3):Ue===$?(rt=6,I=3):(rt=7,I=4))}function Ge(J,me,Te){var He,_e=-1,Ue,$=me[0*2+1],We=0,rt=7,I=4;for($===0&&(rt=138,I=3),He=0;He<=Te;He++)if(Ue=$,$=me[(He+1)*2+1],!(++We<rt&&Ue===$)){if(We<I)do Fe(J,Ue,J.bl_tree);while(--We!==0);else Ue!==0?(Ue!==_e&&(Fe(J,Ue,J.bl_tree),We--),Fe(J,h,J.bl_tree),ge(J,We-3,2)):We<=10?(Fe(J,y,J.bl_tree),ge(J,We-3,3)):(Fe(J,E,J.bl_tree),ge(J,We-11,7));We=0,_e=Ue,$===0?(rt=138,I=3):Ue===$?(rt=6,I=3):(rt=7,I=4)}}function ot(J){var me;for(Ye(J,J.dyn_ltree,J.l_desc.max_code),Ye(J,J.dyn_dtree,J.d_desc.max_code),Qe(J,J.bl_desc),me=u-1;me>=3&&J.bl_tree[j[me]*2+1]===0;me--);return J.opt_len+=3*(me+1)+5+5+4,me}function st(J,me,Te,He){var _e;for(ge(J,me-257,5),ge(J,Te-1,5),ge(J,He-4,4),_e=0;_e<He;_e++)ge(J,J.bl_tree[j[_e]*2+1],3);Ge(J,J.dyn_ltree,me-1),Ge(J,J.dyn_dtree,Te-1)}function Q(J){var me=4093624447,Te;for(Te=0;Te<=31;Te++,me>>>=1)if(me&1&&J.dyn_ltree[Te*2]!==0)return L;if(J.dyn_ltree[18]!==0||J.dyn_ltree[20]!==0||J.dyn_ltree[26]!==0)return B;for(Te=32;Te<l;Te++)if(J.dyn_ltree[Te*2]!==0)return B;return L}var ee=!1;function re(J){ee||(De(),ee=!0),J.l_desc=new oe(J.dyn_ltree,ne),J.d_desc=new oe(J.dyn_dtree,ae),J.bl_desc=new oe(J.bl_tree,he),J.bi_buf=0,J.bi_valid=0,Ve(J)}function Se(J,me,Te,He){ge(J,(S<<1)+(He?1:0),3),it(J,me,Te)}function ve(J){ge(J,m<<1,3),Fe(J,v,G),ke(J)}function je(J,me,Te,He){var _e,Ue,$=0;J.level>0?(J.strm.data_type===x&&(J.strm.data_type=Q(J)),Qe(J,J.l_desc),Qe(J,J.d_desc),$=ot(J),_e=J.opt_len+3+7>>>3,Ue=J.static_len+3+7>>>3,Ue<=_e&&(_e=Ue)):_e=Ue=Te+5,Te+4<=_e&&me!==-1?Se(J,me,Te,He):J.strategy===z||Ue===_e?(ge(J,(m<<1)+(He?1:0),3),$e(J,G,F)):(ge(J,(T<<1)+(He?1:0),3),st(J,J.l_desc.max_code+1,J.d_desc.max_code+1,$+1),$e(J,J.dyn_ltree,J.dyn_dtree)),Ve(J),He&&Xe(J)}function Ie(J,me,Te){return J.pending_buf[J.d_buf+J.last_lit*2]=me>>>8&255,J.pending_buf[J.d_buf+J.last_lit*2+1]=me&255,J.pending_buf[J.l_buf+J.last_lit]=Te&255,J.last_lit++,me===0?J.dyn_ltree[Te*2]++:(J.matches++,me--,J.dyn_ltree[(K[Te]+l+1)*2]++,J.dyn_dtree[pe(me)*2]++),J.last_lit===J.lit_bufsize-1}R._tr_init=re,R._tr_stored_block=Se,R._tr_flush_block=je,R._tr_tally=Ie,R._tr_align=ve},"./node_modules/upng-js/node_modules/pako/lib/zlib/zstream.js":k=>{function R(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}k.exports=R},"./src/SurfaceWorker.js":()=>{$3Dmol.workerString=(function(){self.onmessage=function(k){var R=k.data,g=R.type;if(g<0)self.atomData=R.atoms,self.volume=R.volume,self.ps=new ProteinSurface;else{var M=self.ps;M.initparm(R.expandedExtent,g!=1,self.volume),M.fillvoxels(self.atomData,R.extendedAtoms),M.buildboundary(),(g===4||g===2)&&(M.fastdistancemap(),M.boundingatom(!1),M.fillvoxelswaals(self.atomData,R.extendedAtoms)),M.marchingcube(g);var z=M.getFacesAndVertices(R.atomsToShow);self.postMessage(z)}}}).toString().replace(/(^.*?\{|\}$)/g,""),$3Dmol.workerString+=`;
function _classCallCheck() {};`,$3Dmol.workerString+=`;
`+$3Dmol.Vector3.toString(),$3Dmol.workerString+=`;
`+$3Dmol.MarchingCubeInitializer.toString()+`;

`,$3Dmol.workerString+=`;
`+$3Dmol.PointGrid.toString()+`;
`,$3Dmol.workerString+=`;
var ProteinSurface = `+$3Dmol.ProteinSurface.toString()+`;
`,$3Dmol.SurfaceWorker=window.URL?window.URL.createObjectURL(new Blob([$3Dmol.workerString],{type:"text/javascript"})):void 0},"./src/exporter.js":k=>{typeof k.exports=="object"&&(k.exports=window.$3Dmol)},"./src/vendor/mmtf.js":function(k,R){(function(g,M){M(R)})(this,function(g){function M(Q,ee,re){for(var Se=(Q.byteLength,0),ve=re.length;ve>Se;Se++){var je=re.charCodeAt(Se);if(128>je)Q.setUint8(ee++,je>>>0&127|0);else if(2048>je)Q.setUint8(ee++,je>>>6&31|192),Q.setUint8(ee++,je>>>0&63|128);else if(65536>je)Q.setUint8(ee++,je>>>12&15|224),Q.setUint8(ee++,je>>>6&63|128),Q.setUint8(ee++,je>>>0&63|128);else{if(!(1114112>je))throw new Error("bad codepoint "+je);Q.setUint8(ee++,je>>>18&7|240),Q.setUint8(ee++,je>>>12&63|128),Q.setUint8(ee++,je>>>6&63|128),Q.setUint8(ee++,je>>>0&63|128)}}}function z(Q){for(var ee=0,re=0,Se=Q.length;Se>re;re++){var ve=Q.charCodeAt(re);if(128>ve)ee+=1;else if(2048>ve)ee+=2;else if(65536>ve)ee+=3;else{if(!(1114112>ve))throw new Error("bad codepoint "+ve);ee+=4}}return ee}function L(Q,ee,re){var Se=typeof Q;if(Se==="string"){var ve=z(Q);if(32>ve)return ee.setUint8(re,160|ve),M(ee,re+1,Q),1+ve;if(256>ve)return ee.setUint8(re,217),ee.setUint8(re+1,ve),M(ee,re+2,Q),2+ve;if(65536>ve)return ee.setUint8(re,218),ee.setUint16(re+1,ve),M(ee,re+3,Q),3+ve;if(4294967296>ve)return ee.setUint8(re,219),ee.setUint32(re+1,ve),M(ee,re+5,Q),5+ve}if(Q instanceof Uint8Array){var ve=Q.byteLength,je=new Uint8Array(ee.buffer);if(256>ve)return ee.setUint8(re,196),ee.setUint8(re+1,ve),je.set(Q,re+2),2+ve;if(65536>ve)return ee.setUint8(re,197),ee.setUint16(re+1,ve),je.set(Q,re+3),3+ve;if(4294967296>ve)return ee.setUint8(re,198),ee.setUint32(re+1,ve),je.set(Q,re+5),5+ve}if(Se==="number"){if(!isFinite(Q))throw new Error("Number not finite: "+Q);if(Math.floor(Q)!==Q)return ee.setUint8(re,203),ee.setFloat64(re+1,Q),9;if(Q>=0){if(128>Q)return ee.setUint8(re,Q),1;if(256>Q)return ee.setUint8(re,204),ee.setUint8(re+1,Q),2;if(65536>Q)return ee.setUint8(re,205),ee.setUint16(re+1,Q),3;if(4294967296>Q)return ee.setUint8(re,206),ee.setUint32(re+1,Q),5;throw new Error("Number too big 0x"+Q.toString(16))}if(Q>=-32)return ee.setInt8(re,Q),1;if(Q>=-128)return ee.setUint8(re,208),ee.setInt8(re+1,Q),2;if(Q>=-32768)return ee.setUint8(re,209),ee.setInt16(re+1,Q),3;if(Q>=-2147483648)return ee.setUint8(re,210),ee.setInt32(re+1,Q),5;throw new Error("Number too small -0x"+(-Q).toString(16).substr(1))}if(Q===null)return ee.setUint8(re,192),1;if(Se==="boolean")return ee.setUint8(re,Q?195:194),1;if(Se==="object"){var ve,me=0,Ie=Array.isArray(Q);if(Ie)ve=Q.length;else{var J=Object.keys(Q);ve=J.length}var me;if(16>ve?(ee.setUint8(re,ve|(Ie?144:128)),me=1):65536>ve?(ee.setUint8(re,Ie?220:222),ee.setUint16(re+1,ve),me=3):4294967296>ve&&(ee.setUint8(re,Ie?221:223),ee.setUint32(re+1,ve),me=5),Ie)for(var Te=0;ve>Te;Te++)me+=L(Q[Te],ee,re+me);else for(var Te=0;ve>Te;Te++){var He=J[Te];me+=L(He,ee,re+me),me+=L(Q[He],ee,re+me)}return me}throw new Error("Unknown type "+Se)}function B(Q){var ee=typeof Q;if(ee==="string"){var re=z(Q);if(32>re)return 1+re;if(256>re)return 2+re;if(65536>re)return 3+re;if(4294967296>re)return 5+re}if(Q instanceof Uint8Array){var re=Q.byteLength;if(256>re)return 2+re;if(65536>re)return 3+re;if(4294967296>re)return 5+re}if(ee==="number"){if(Math.floor(Q)!==Q)return 9;if(Q>=0){if(128>Q)return 1;if(256>Q)return 2;if(65536>Q)return 3;if(4294967296>Q)return 5;throw new Error("Number too big 0x"+Q.toString(16))}if(Q>=-32)return 1;if(Q>=-128)return 2;if(Q>=-32768)return 3;if(Q>=-2147483648)return 5;throw new Error("Number too small -0x"+Q.toString(16).substr(1))}if(ee==="boolean"||Q===null)return 1;if(ee==="object"){var re,Se=0;if(Array.isArray(Q)){re=Q.length;for(var ve=0;re>ve;ve++)Se+=B(Q[ve])}else{var je=Object.keys(Q);re=je.length;for(var ve=0;re>ve;ve++){var Ie=je[ve];Se+=B(Ie)+B(Q[Ie])}}if(16>re)return 1+Se;if(65536>re)return 3+Se;if(4294967296>re)return 5+Se;throw new Error("Array or object too long 0x"+re.toString(16))}throw new Error("Unknown type "+ee)}function x(Q){var ee=new ArrayBuffer(B(Q)),re=new DataView(ee);return L(Q,re,0),new Uint8Array(ee)}function b(Q,ee,re){return ee?new Q(ee.buffer,ee.byteOffset,ee.byteLength/(re||1)):void 0}function S(Q){return b(DataView,Q)}function m(Q){return b(Uint8Array,Q)}function T(Q){return b(Int8Array,Q)}function D(Q){return b(Int32Array,Q,4)}function p(Q){return b(Float32Array,Q,4)}function A(Q,ee){var re=Q.length/2;ee||(ee=new Int16Array(re));for(var Se=0,ve=0;re>Se;++Se,ve+=2)ee[Se]=Q[ve]<<8^Q[ve+1]<<0;return ee}function l(Q,ee){var re=Q.length;ee||(ee=new Uint8Array(2*re));for(var Se=S(ee),ve=0;re>ve;++ve)Se.setInt16(2*ve,Q[ve]);return m(ee)}function n(Q,ee){var re=Q.length/4;ee||(ee=new Int32Array(re));for(var Se=0,ve=0;re>Se;++Se,ve+=4)ee[Se]=Q[ve]<<24^Q[ve+1]<<16^Q[ve+2]<<8^Q[ve+3]<<0;return ee}function a(Q,ee){var re=Q.length;ee||(ee=new Uint8Array(4*re));for(var Se=S(ee),ve=0;re>ve;++ve)Se.setInt32(4*ve,Q[ve]);return m(ee)}function u(Q,ee){var re=Q.length;ee||(ee=new Float32Array(re/4));for(var Se=S(ee),ve=S(Q),je=0,Ie=0,J=re/4;J>je;++je,Ie+=4)Se.setFloat32(Ie,ve.getFloat32(Ie),!0);return ee}function f(Q,ee,re){var Se=Q.length,ve=1/ee;re||(re=new Float32Array(Se));for(var je=0;Se>je;++je)re[je]=Q[je]*ve;return re}function d(Q,ee,re){var Se=Q.length;re||(re=new Int32Array(Se));for(var ve=0;Se>ve;++ve)re[ve]=Math.round(Q[ve]*ee);return re}function r(Q,ee){var re,Se;if(!ee){var ve=0;for(re=0,Se=Q.length;Se>re;re+=2)ve+=Q[re+1];ee=new Q.constructor(ve)}var je=0;for(re=0,Se=Q.length;Se>re;re+=2)for(var Ie=Q[re],J=Q[re+1],me=0;J>me;++me)ee[je]=Ie,++je;return ee}function o(Q){if(Q.length===0)return new Int32Array;var ee,re,Se=2;for(ee=1,re=Q.length;re>ee;++ee)Q[ee-1]!==Q[ee]&&(Se+=2);var ve=new Int32Array(Se),je=0,Ie=1;for(ee=1,re=Q.length;re>ee;++ee)Q[ee-1]!==Q[ee]?(ve[je]=Q[ee-1],ve[je+1]=Ie,Ie=1,je+=2):++Ie;return ve[je]=Q[Q.length-1],ve[je+1]=Ie,ve}function v(Q,ee){var re=Q.length;ee||(ee=new Q.constructor(re)),re&&(ee[0]=Q[0]);for(var Se=1;re>Se;++Se)ee[Se]=Q[Se]+ee[Se-1];return ee}function h(Q,ee){var re=Q.length;ee||(ee=new Q.constructor(re)),ee[0]=Q[0];for(var Se=1;re>Se;++Se)ee[Se]=Q[Se]-Q[Se-1];return ee}function y(Q,ee){var re,Se,ve=Q instanceof Int8Array?127:32767,je=-ve-1,Ie=Q.length;if(!ee){var J=0;for(re=0;Ie>re;++re)Q[re]<ve&&Q[re]>je&&++J;ee=new Int32Array(J)}for(re=0,Se=0;Ie>re;){for(var me=0;Q[re]===ve||Q[re]===je;)me+=Q[re],++re;me+=Q[re],++re,ee[Se]=me,++Se}return ee}function E(Q,ee){var re,Se=32767,ve=-32768,je=Q.length,Ie=0;for(re=0;je>re;++re){var J=Q[re];J===0?++Ie:J>0?(Ie+=Math.ceil(J/Se),J%Se===0&&(Ie+=1)):(Ie+=Math.ceil(J/ve),J%ve===0&&(Ie+=1))}var me=new Int16Array(Ie),Te=0;for(re=0;je>re;++re){var J=Q[re];if(J>=0)for(;J>=Se;)me[Te]=Se,++Te,J-=Se;else for(;ve>=J;)me[Te]=ve,++Te,J-=ve;me[Te]=J,++Te}return me}function w(Q,ee){return v(r(Q),ee)}function W(Q){return o(h(Q))}function P(Q,ee,re){return f(r(Q,D(re)),ee,re)}function j(Q,ee){return o(d(Q,ee))}function V(Q,ee,re){return f(v(Q,D(re)),ee,re)}function G(Q,ee,re){return h(d(Q,ee),re)}function F(Q,ee,re){return f(y(Q,D(re)),ee,re)}function H(Q,ee,re){var Se=y(Q,D(re));return V(Se,ee,p(Se))}function K(Q,ee,re){return E(G(Q,ee))}function U(je){var ee=S(je),re=ee.getInt32(0),Se=ee.getInt32(4),ve=je.subarray(8,12),je=je.subarray(12);return[re,je,Se,ve]}function N(Q,ee,re,Se){var ve=new ArrayBuffer(12+Se.byteLength),je=new Uint8Array(ve),Ie=new DataView(ve);return Ie.setInt32(0,Q),Ie.setInt32(4,ee),re&&je.set(re,8),je.set(Se,12),je}function Y(Q){var ee=Q.length,re=m(Q);return N(2,ee,void 0,re)}function ne(Q){var ee=Q.length,re=a(Q);return N(4,ee,void 0,re)}function ae(Q,ee){var re=Q.length/ee,Se=a([ee]),ve=m(Q);return N(5,re,Se,ve)}function he(Q){var ee=Q.length,re=a(o(Q));return N(6,ee,void 0,re)}function oe(Q){var ee=Q.length,re=a(W(Q));return N(8,ee,void 0,re)}function pe(Q,ee){var re=Q.length,Se=a([ee]),ve=a(j(Q,ee));return N(9,re,Se,ve)}function ue(Q,ee){var re=Q.length,Se=a([ee]),ve=l(K(Q,ee));return N(10,re,Se,ve)}function ge(Q){var ee={};return et.forEach(function(re){Q[re]!==void 0&&(ee[re]=Q[re])}),Q.bondAtomList&&(ee.bondAtomList=ne(Q.bondAtomList)),Q.bondOrderList&&(ee.bondOrderList=Y(Q.bondOrderList)),ee.xCoordList=ue(Q.xCoordList,1e3),ee.yCoordList=ue(Q.yCoordList,1e3),ee.zCoordList=ue(Q.zCoordList,1e3),Q.bFactorList&&(ee.bFactorList=ue(Q.bFactorList,100)),Q.atomIdList&&(ee.atomIdList=oe(Q.atomIdList)),Q.altLocList&&(ee.altLocList=he(Q.altLocList)),Q.occupancyList&&(ee.occupancyList=pe(Q.occupancyList,100)),ee.groupIdList=oe(Q.groupIdList),ee.groupTypeList=ne(Q.groupTypeList),Q.secStructList&&(ee.secStructList=Y(Q.secStructList)),Q.insCodeList&&(ee.insCodeList=he(Q.insCodeList)),Q.sequenceIndexList&&(ee.sequenceIndexList=oe(Q.sequenceIndexList)),ee.chainIdList=ae(Q.chainIdList,4),Q.chainNameList&&(ee.chainNameList=ae(Q.chainNameList,4)),ee}function Fe(Q){function ee(me){for(var Te={},He=0;me>He;He++){var _e=je();Te[_e]=je()}return Te}function re(me){var Te=Q.subarray(Ie,Ie+me);return Ie+=me,Te}function Se(me){var Te=Q.subarray(Ie,Ie+me);Ie+=me;var He=65535;if(me>He){for(var _e=[],Ue=0;Ue<Te.length;Ue+=He)_e.push(String.fromCharCode.apply(null,Te.subarray(Ue,Ue+He)));return _e.join("")}return String.fromCharCode.apply(null,Te)}function ve(me){for(var Te=new Array(me),He=0;me>He;He++)Te[He]=je();return Te}function je(){var me,Te,He=Q[Ie];if((128&He)===0)return Ie++,He;if((240&He)===128)return Te=15&He,Ie++,ee(Te);if((240&He)===144)return Te=15&He,Ie++,ve(Te);if((224&He)===160)return Te=31&He,Ie++,Se(Te);if((224&He)===224)return me=J.getInt8(Ie),Ie++,me;switch(He){case 192:return Ie++,null;case 194:return Ie++,!1;case 195:return Ie++,!0;case 196:return Te=J.getUint8(Ie+1),Ie+=2,re(Te);case 197:return Te=J.getUint16(Ie+1),Ie+=3,re(Te);case 198:return Te=J.getUint32(Ie+1),Ie+=5,re(Te);case 202:return me=J.getFloat32(Ie+1),Ie+=5,me;case 203:return me=J.getFloat64(Ie+1),Ie+=9,me;case 204:return me=Q[Ie+1],Ie+=2,me;case 205:return me=J.getUint16(Ie+1),Ie+=3,me;case 206:return me=J.getUint32(Ie+1),Ie+=5,me;case 208:return me=J.getInt8(Ie+1),Ie+=2,me;case 209:return me=J.getInt16(Ie+1),Ie+=3,me;case 210:return me=J.getInt32(Ie+1),Ie+=5,me;case 217:return Te=J.getUint8(Ie+1),Ie+=2,Se(Te);case 218:return Te=J.getUint16(Ie+1),Ie+=3,Se(Te);case 219:return Te=J.getUint32(Ie+1),Ie+=5,Se(Te);case 220:return Te=J.getUint16(Ie+1),Ie+=3,ve(Te);case 221:return Te=J.getUint32(Ie+1),Ie+=5,ve(Te);case 222:return Te=J.getUint16(Ie+1),Ie+=3,ee(Te);case 223:return Te=J.getUint32(Ie+1),Ie+=5,ee(Te)}throw new Error("Unknown type 0x"+He.toString(16))}var Ie=0,J=new DataView(Q.buffer);return je()}function Be(Q,ee,re,Se){switch(Q){case 1:return u(ee);case 2:return T(ee);case 3:return A(ee);case 4:return n(ee);case 5:return m(ee);case 6:return r(n(ee),new Uint8Array(re));case 7:return r(n(ee));case 8:return w(n(ee));case 9:return P(n(ee),n(Se)[0]);case 10:return H(A(ee),n(Se)[0]);case 11:return f(A(ee),n(Se)[0]);case 12:return F(A(ee),n(Se)[0]);case 13:return F(T(ee),n(Se)[0]);case 14:return y(A(ee));case 15:return y(T(ee))}}function ke(Q,ee){ee=ee||{};var re=ee.ignoreFields,Se={};return Qe.forEach(function(ve){var je=re?re.indexOf(ve)!==-1:!1,Ie=Q[ve];je||Ie===void 0||(Ie instanceof Uint8Array?Se[ve]=Be.apply(null,U(Ie)):Se[ve]=Ie)}),Se}function be(Q){return String.fromCharCode.apply(null,Q).replace(/\0/g,"")}function fe(Q,ee,re){re=re||{};var Se,ve,je,Ie,J,me,Te=re.firstModelOnly,He=ee.onModel,_e=ee.onChain,Ue=ee.onGroup,$=ee.onAtom,We=ee.onBond,rt=0,I=0,Ae=0,Ee=0,q=0,de=-1,we=Q.chainNameList,ut=Q.secStructList,at=Q.insCodeList,tt=Q.sequenceIndexList,vt=Q.atomIdList,ti=Q.bFactorList,St=Q.altLocList,Tt=Q.occupancyList,At=Q.bondAtomList,ii=Q.bondOrderList;for(Se=0,ve=Q.chainsPerModel.length;ve>Se&&!(Te&&rt>0);++Se){var Pt=Q.chainsPerModel[rt];for(He&&He({chainCount:Pt,modelIndex:rt}),je=0;Pt>je;++je){var Hi=Q.groupsPerChain[I];if(_e){var bi=be(Q.chainIdList.subarray(4*I,4*I+4)),Ht=null;we&&(Ht=be(we.subarray(4*I,4*I+4))),_e({groupCount:Hi,chainIndex:I,modelIndex:rt,chainId:bi,chainName:Ht})}for(Ie=0;Hi>Ie;++Ie){var jt=Q.groupList[Q.groupTypeList[Ae]],It=jt.atomNameList.length;if(Ue){var Nt=null;ut&&(Nt=ut[Ae]);var vi=null;Q.insCodeList&&(vi=String.fromCharCode(at[Ae]));var Tn=null;tt&&(Tn=tt[Ae]),Ue({atomCount:It,groupIndex:Ae,chainIndex:I,modelIndex:rt,groupId:Q.groupIdList[Ae],groupType:Q.groupTypeList[Ae],groupName:jt.groupName,singleLetterCode:jt.singleLetterCode,chemCompType:jt.chemCompType,secStruct:Nt,insCode:vi,sequenceIndex:Tn})}for(J=0;It>J;++J){if($){var $i=null;vt&&($i=vt[Ee]);var Ui=null;ti&&(Ui=ti[Ee]);var xa=null;St&&(xa=String.fromCharCode(St[Ee]));var Xr=null;Tt&&(Xr=Tt[Ee]),$({atomIndex:Ee,groupIndex:Ae,chainIndex:I,modelIndex:rt,atomId:$i,element:jt.elementList[J],atomName:jt.atomNameList[J],formalCharge:jt.formalChargeList[J],xCoord:Q.xCoordList[Ee],yCoord:Q.yCoordList[Ee],zCoord:Q.zCoordList[Ee],bFactor:Ui,altLoc:xa,occupancy:Xr})}Ee+=1}if(We){var Zr=jt.bondAtomList;for(J=0,me=jt.bondOrderList.length;me>J;++J)We({atomIndex1:Ee-It+Zr[2*J],atomIndex2:Ee-It+Zr[2*J+1],bondOrder:jt.bondOrderList[J]})}Ae+=1}I+=1}if(q=de+1,de=Ee-1,We&&At)for(J=0,me=At.length;me>J;J+=2){var ya=At[J],Nn=At[J+1];(ya>=q&&de>=ya||Nn>=q&&de>=Nn)&&We({atomIndex1:ya,atomIndex2:Nn,bondOrder:ii?ii[J/2]:null})}rt+=1}}function De(Q){return x(ge(Q))}function Ve(Q,ee){Q instanceof ArrayBuffer&&(Q=new Uint8Array(Q));var re;return re=Q instanceof Uint8Array?Fe(Q):Q,ke(re,ee)}function Xe(Q,ee,re,Se){function ve(){try{var Ie=Ve(je.response);re(Ie)}catch(J){Se(J)}}var je=new XMLHttpRequest;je.addEventListener("load",ve,!0),je.addEventListener("error",Se,!0),je.responseType="arraybuffer",je.open("GET",ee+Q.toUpperCase()),je.send()}function it(Q,ee,re){Xe(Q,ot,ee,re)}function nt(Q,ee,re){Xe(Q,st,ee,re)}var et=["mmtfVersion","mmtfProducer","unitCell","spaceGroup","structureId","title","depositionDate","releaseDate","experimentalMethods","resolution","rFree","rWork","bioAssemblyList","ncsOperatorList","entityList","groupList","numBonds","numAtoms","numGroups","numChains","numModels","groupsPerChain","chainsPerModel"],$e=["xCoordList","yCoordList","zCoordList","groupIdList","groupTypeList","chainIdList","bFactorList","atomIdList","altLocList","occupancyList","secStructList","insCodeList","sequenceIndexList","chainNameList","bondAtomList","bondOrderList"],Qe=et.concat($e),Ye="v1.0.1",Ge="//mmtf.rcsb.org/v1.0/",ot=Ge+"full/",st=Ge+"reduced/";g.encode=De,g.decode=Ve,g.traverse=fe,g.fetch=it,g.fetchReduced=nt,g.version=Ye,g.fetchUrl=ot,g.fetchReducedUrl=st,g.encodeMsgpack=x,g.encodeMmtf=ge,g.decodeMsgpack=Fe,g.decodeMmtf=ke})},"./node_modules/pako/dist/pako.esm.mjs":(k,R,g)=>{g.r(R),g.d(R,{Deflate:()=>Fl,Inflate:()=>Bn,constants:()=>wr,default:()=>Hl,deflate:()=>Is,deflateRaw:()=>Wl,gzip:()=>Gs,inflate:()=>Ha,inflateRaw:()=>da,ungzip:()=>Ns});/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const M=4,z=0,L=1,B=2;function x(c){let X=c.length;for(;--X>=0;)c[X]=0}const b=0,S=1,m=2,T=3,D=258,p=29,A=256,l=A+1+p,n=30,a=19,u=2*l+1,f=15,d=16,r=7,o=256,v=16,h=17,y=18,E=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),w=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),W=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),P=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),j=512,V=new Array((l+2)*2);x(V);const G=new Array(n*2);x(G);const F=new Array(j);x(F);const H=new Array(D-T+1);x(H);const K=new Array(p);x(K);const U=new Array(n);x(U);function N(c,X,O,ie,le){this.static_tree=c,this.extra_bits=X,this.extra_base=O,this.elems=ie,this.max_length=le,this.has_stree=c&&c.length}let Y,ne,ae;function he(c,X){this.dyn_tree=c,this.max_code=0,this.stat_desc=X}const oe=c=>c<256?F[c]:F[256+(c>>>7)],pe=(c,X)=>{c.pending_buf[c.pending++]=X&255,c.pending_buf[c.pending++]=X>>>8&255},ue=(c,X,O)=>{c.bi_valid>d-O?(c.bi_buf|=X<<c.bi_valid&65535,pe(c,c.bi_buf),c.bi_buf=X>>d-c.bi_valid,c.bi_valid+=O-d):(c.bi_buf|=X<<c.bi_valid&65535,c.bi_valid+=O)},ge=(c,X,O)=>{ue(c,O[X*2],O[X*2+1])},Fe=(c,X)=>{let O=0;do O|=c&1,c>>>=1,O<<=1;while(--X>0);return O>>>1},Be=c=>{c.bi_valid===16?(pe(c,c.bi_buf),c.bi_buf=0,c.bi_valid=0):c.bi_valid>=8&&(c.pending_buf[c.pending++]=c.bi_buf&255,c.bi_buf>>=8,c.bi_valid-=8)},ke=(c,X)=>{const O=X.dyn_tree,ie=X.max_code,le=X.stat_desc.static_tree,se=X.stat_desc.has_stree,ze=X.stat_desc.extra_bits,Me=X.stat_desc.extra_base,ct=X.stat_desc.max_length;let xe,Re,Dt,ft,qe,_t,$t=0;for(ft=0;ft<=f;ft++)c.bl_count[ft]=0;for(O[c.heap[c.heap_max]*2+1]=0,xe=c.heap_max+1;xe<u;xe++)Re=c.heap[xe],ft=O[O[Re*2+1]*2+1]+1,ft>ct&&(ft=ct,$t++),O[Re*2+1]=ft,!(Re>ie)&&(c.bl_count[ft]++,qe=0,Re>=Me&&(qe=ze[Re-Me]),_t=O[Re*2],c.opt_len+=_t*(ft+qe),se&&(c.static_len+=_t*(le[Re*2+1]+qe)));if($t!==0){do{for(ft=ct-1;c.bl_count[ft]===0;)ft--;c.bl_count[ft]--,c.bl_count[ft+1]+=2,c.bl_count[ct]--,$t-=2}while($t>0);for(ft=ct;ft!==0;ft--)for(Re=c.bl_count[ft];Re!==0;)Dt=c.heap[--xe],!(Dt>ie)&&(O[Dt*2+1]!==ft&&(c.opt_len+=(ft-O[Dt*2+1])*O[Dt*2],O[Dt*2+1]=ft),Re--)}},be=(c,X,O)=>{const ie=new Array(f+1);let le=0,se,ze;for(se=1;se<=f;se++)le=le+O[se-1]<<1,ie[se]=le;for(ze=0;ze<=X;ze++){let Me=c[ze*2+1];Me!==0&&(c[ze*2]=Fe(ie[Me]++,Me))}},fe=()=>{let c,X,O,ie,le;const se=new Array(f+1);for(O=0,ie=0;ie<p-1;ie++)for(K[ie]=O,c=0;c<1<<E[ie];c++)H[O++]=ie;for(H[O-1]=ie,le=0,ie=0;ie<16;ie++)for(U[ie]=le,c=0;c<1<<w[ie];c++)F[le++]=ie;for(le>>=7;ie<n;ie++)for(U[ie]=le<<7,c=0;c<1<<w[ie]-7;c++)F[256+le++]=ie;for(X=0;X<=f;X++)se[X]=0;for(c=0;c<=143;)V[c*2+1]=8,c++,se[8]++;for(;c<=255;)V[c*2+1]=9,c++,se[9]++;for(;c<=279;)V[c*2+1]=7,c++,se[7]++;for(;c<=287;)V[c*2+1]=8,c++,se[8]++;for(be(V,l+1,se),c=0;c<n;c++)G[c*2+1]=5,G[c*2]=Fe(c,5);Y=new N(V,E,A+1,l,f),ne=new N(G,w,0,n,f),ae=new N(new Array(0),W,0,a,r)},De=c=>{let X;for(X=0;X<l;X++)c.dyn_ltree[X*2]=0;for(X=0;X<n;X++)c.dyn_dtree[X*2]=0;for(X=0;X<a;X++)c.bl_tree[X*2]=0;c.dyn_ltree[o*2]=1,c.opt_len=c.static_len=0,c.sym_next=c.matches=0},Ve=c=>{c.bi_valid>8?pe(c,c.bi_buf):c.bi_valid>0&&(c.pending_buf[c.pending++]=c.bi_buf),c.bi_buf=0,c.bi_valid=0},Xe=(c,X,O,ie)=>{const le=X*2,se=O*2;return c[le]<c[se]||c[le]===c[se]&&ie[X]<=ie[O]},it=(c,X,O)=>{const ie=c.heap[O];let le=O<<1;for(;le<=c.heap_len&&(le<c.heap_len&&Xe(X,c.heap[le+1],c.heap[le],c.depth)&&le++,!Xe(X,ie,c.heap[le],c.depth));)c.heap[O]=c.heap[le],O=le,le<<=1;c.heap[O]=ie},nt=(c,X,O)=>{let ie,le,se=0,ze,Me;if(c.sym_next!==0)do ie=c.pending_buf[c.sym_buf+se++]&255,ie+=(c.pending_buf[c.sym_buf+se++]&255)<<8,le=c.pending_buf[c.sym_buf+se++],ie===0?ge(c,le,X):(ze=H[le],ge(c,ze+A+1,X),Me=E[ze],Me!==0&&(le-=K[ze],ue(c,le,Me)),ie--,ze=oe(ie),ge(c,ze,O),Me=w[ze],Me!==0&&(ie-=U[ze],ue(c,ie,Me)));while(se<c.sym_next);ge(c,o,X)},et=(c,X)=>{const O=X.dyn_tree,ie=X.stat_desc.static_tree,le=X.stat_desc.has_stree,se=X.stat_desc.elems;let ze,Me,ct=-1,xe;for(c.heap_len=0,c.heap_max=u,ze=0;ze<se;ze++)O[ze*2]!==0?(c.heap[++c.heap_len]=ct=ze,c.depth[ze]=0):O[ze*2+1]=0;for(;c.heap_len<2;)xe=c.heap[++c.heap_len]=ct<2?++ct:0,O[xe*2]=1,c.depth[xe]=0,c.opt_len--,le&&(c.static_len-=ie[xe*2+1]);for(X.max_code=ct,ze=c.heap_len>>1;ze>=1;ze--)it(c,O,ze);xe=se;do ze=c.heap[1],c.heap[1]=c.heap[c.heap_len--],it(c,O,1),Me=c.heap[1],c.heap[--c.heap_max]=ze,c.heap[--c.heap_max]=Me,O[xe*2]=O[ze*2]+O[Me*2],c.depth[xe]=(c.depth[ze]>=c.depth[Me]?c.depth[ze]:c.depth[Me])+1,O[ze*2+1]=O[Me*2+1]=xe,c.heap[1]=xe++,it(c,O,1);while(c.heap_len>=2);c.heap[--c.heap_max]=c.heap[1],ke(c,X),be(O,ct,c.bl_count)},$e=(c,X,O)=>{let ie,le=-1,se,ze=X[0*2+1],Me=0,ct=7,xe=4;for(ze===0&&(ct=138,xe=3),X[(O+1)*2+1]=65535,ie=0;ie<=O;ie++)se=ze,ze=X[(ie+1)*2+1],!(++Me<ct&&se===ze)&&(Me<xe?c.bl_tree[se*2]+=Me:se!==0?(se!==le&&c.bl_tree[se*2]++,c.bl_tree[v*2]++):Me<=10?c.bl_tree[h*2]++:c.bl_tree[y*2]++,Me=0,le=se,ze===0?(ct=138,xe=3):se===ze?(ct=6,xe=3):(ct=7,xe=4))},Qe=(c,X,O)=>{let ie,le=-1,se,ze=X[0*2+1],Me=0,ct=7,xe=4;for(ze===0&&(ct=138,xe=3),ie=0;ie<=O;ie++)if(se=ze,ze=X[(ie+1)*2+1],!(++Me<ct&&se===ze)){if(Me<xe)do ge(c,se,c.bl_tree);while(--Me!==0);else se!==0?(se!==le&&(ge(c,se,c.bl_tree),Me--),ge(c,v,c.bl_tree),ue(c,Me-3,2)):Me<=10?(ge(c,h,c.bl_tree),ue(c,Me-3,3)):(ge(c,y,c.bl_tree),ue(c,Me-11,7));Me=0,le=se,ze===0?(ct=138,xe=3):se===ze?(ct=6,xe=3):(ct=7,xe=4)}},Ye=c=>{let X;for($e(c,c.dyn_ltree,c.l_desc.max_code),$e(c,c.dyn_dtree,c.d_desc.max_code),et(c,c.bl_desc),X=a-1;X>=3&&c.bl_tree[P[X]*2+1]===0;X--);return c.opt_len+=3*(X+1)+5+5+4,X},Ge=(c,X,O,ie)=>{let le;for(ue(c,X-257,5),ue(c,O-1,5),ue(c,ie-4,4),le=0;le<ie;le++)ue(c,c.bl_tree[P[le]*2+1],3);Qe(c,c.dyn_ltree,X-1),Qe(c,c.dyn_dtree,O-1)},ot=c=>{let X=4093624447,O;for(O=0;O<=31;O++,X>>>=1)if(X&1&&c.dyn_ltree[O*2]!==0)return z;if(c.dyn_ltree[9*2]!==0||c.dyn_ltree[10*2]!==0||c.dyn_ltree[13*2]!==0)return L;for(O=32;O<A;O++)if(c.dyn_ltree[O*2]!==0)return L;return z};let st=!1;const Q=c=>{st||(fe(),st=!0),c.l_desc=new he(c.dyn_ltree,Y),c.d_desc=new he(c.dyn_dtree,ne),c.bl_desc=new he(c.bl_tree,ae),c.bi_buf=0,c.bi_valid=0,De(c)},ee=(c,X,O,ie)=>{ue(c,(b<<1)+(ie?1:0),3),Ve(c),pe(c,O),pe(c,~O),O&&c.pending_buf.set(c.window.subarray(X,X+O),c.pending),c.pending+=O},re=c=>{ue(c,S<<1,3),ge(c,o,V),Be(c)},Se=(c,X,O,ie)=>{let le,se,ze=0;c.level>0?(c.strm.data_type===B&&(c.strm.data_type=ot(c)),et(c,c.l_desc),et(c,c.d_desc),ze=Ye(c),le=c.opt_len+3+7>>>3,se=c.static_len+3+7>>>3,se<=le&&(le=se)):le=se=O+5,O+4<=le&&X!==-1?ee(c,X,O,ie):c.strategy===M||se===le?(ue(c,(S<<1)+(ie?1:0),3),nt(c,V,G)):(ue(c,(m<<1)+(ie?1:0),3),Ge(c,c.l_desc.max_code+1,c.d_desc.max_code+1,ze+1),nt(c,c.dyn_ltree,c.dyn_dtree)),De(c),ie&&Ve(c)},ve=(c,X,O)=>(c.pending_buf[c.sym_buf+c.sym_next++]=X,c.pending_buf[c.sym_buf+c.sym_next++]=X>>8,c.pending_buf[c.sym_buf+c.sym_next++]=O,X===0?c.dyn_ltree[O*2]++:(c.matches++,X--,c.dyn_ltree[(H[O]+A+1)*2]++,c.dyn_dtree[oe(X)*2]++),c.sym_next===c.sym_end);var je=Q,Ie=ee,J=Se,me=ve,Te=re,He={_tr_init:je,_tr_stored_block:Ie,_tr_flush_block:J,_tr_tally:me,_tr_align:Te},Ue=(c,X,O,ie)=>{let le=c&65535|0,se=c>>>16&65535|0,ze=0;for(;O!==0;){ze=O>2e3?2e3:O,O-=ze;do le=le+X[ie++]|0,se=se+le|0;while(--ze);le%=65521,se%=65521}return le|se<<16|0};const $=()=>{let c,X=[];for(var O=0;O<256;O++){c=O;for(var ie=0;ie<8;ie++)c=c&1?3988292384^c>>>1:c>>>1;X[O]=c}return X},We=new Uint32Array($());var I=(c,X,O,ie)=>{const le=We,se=ie+O;c^=-1;for(let ze=ie;ze<se;ze++)c=c>>>8^le[(c^X[ze])&255];return c^-1},Ae={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Ee={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:q,_tr_stored_block:de,_tr_flush_block:we,_tr_tally:ut,_tr_align:at}=He,{Z_NO_FLUSH:tt,Z_PARTIAL_FLUSH:vt,Z_FULL_FLUSH:ti,Z_FINISH:St,Z_BLOCK:Tt,Z_OK:At,Z_STREAM_END:ii,Z_STREAM_ERROR:Pt,Z_DATA_ERROR:Hi,Z_BUF_ERROR:bi,Z_DEFAULT_COMPRESSION:Ht,Z_FILTERED:jt,Z_HUFFMAN_ONLY:It,Z_RLE:Nt,Z_FIXED:vi,Z_DEFAULT_STRATEGY:Tn,Z_UNKNOWN:$i,Z_DEFLATED:Ui}=Ee,xa=9,Xr=15,Zr=8,dr=256+1+29,gn=30,ss=19,cl=2*dr+1,gr=15,Ct=3,qi=258,en=qi+Ct+1,dl=32,ci=42,ba=57,ls=69,vr=73,Ea=91,mr=103,Fn=113,mi=666,di=1,Wn=2,vn=3,Vi=4,gl=3,Dn=(c,X)=>(c.msg=Ae[X],X),Hn=c=>c*2-(c>4?9:0),On=c=>{let X=c.length;for(;--X>=0;)c[X]=0},vl=c=>{let X,O,ie,le=c.w_size;X=c.hash_size,ie=X;do O=c.head[--ie],c.head[ie]=O>=le?O-le:0;while(--X);X=le,ie=X;do O=c.prev[--ie],c.prev[ie]=O>=le?O-le:0;while(--X)};let tn=(c,X,O)=>(X<<c.hash_shift^O)&c.hash_mask;const Ci=c=>{const X=c.state;let O=X.pending;O>c.avail_out&&(O=c.avail_out),O!==0&&(c.output.set(X.pending_buf.subarray(X.pending_out,X.pending_out+O),c.next_out),c.next_out+=O,X.pending_out+=O,c.total_out+=O,c.avail_out-=O,X.pending-=O,X.pending===0&&(X.pending_out=0))},wi=(c,X)=>{we(c,c.block_start>=0?c.block_start:-1,c.strstart-c.block_start,X),c.block_start=c.strstart,Ci(c.strm)},Bt=(c,X)=>{c.pending_buf[c.pending++]=X},Vn=(c,X)=>{c.pending_buf[c.pending++]=X>>>8&255,c.pending_buf[c.pending++]=X&255},kr=(c,X,O,ie)=>{let le=c.avail_in;return le>ie&&(le=ie),le===0?0:(c.avail_in-=le,X.set(c.input.subarray(c.next_in,c.next_in+le),O),c.state.wrap===1?c.adler=Ue(c.adler,X,le,O):c.state.wrap===2&&(c.adler=I(c.adler,X,le,O)),c.next_in+=le,c.total_in+=le,le)},jn=(c,X)=>{let O=c.max_chain_length,ie=c.strstart,le,se,ze=c.prev_length,Me=c.nice_match;const ct=c.strstart>c.w_size-en?c.strstart-(c.w_size-en):0,xe=c.window,Re=c.w_mask,Dt=c.prev,ft=c.strstart+qi;let qe=xe[ie+ze-1],_t=xe[ie+ze];c.prev_length>=c.good_match&&(O>>=2),Me>c.lookahead&&(Me=c.lookahead);do if(le=X,!(xe[le+ze]!==_t||xe[le+ze-1]!==qe||xe[le]!==xe[ie]||xe[++le]!==xe[ie+1])){ie+=2,le++;do;while(xe[++ie]===xe[++le]&&xe[++ie]===xe[++le]&&xe[++ie]===xe[++le]&&xe[++ie]===xe[++le]&&xe[++ie]===xe[++le]&&xe[++ie]===xe[++le]&&xe[++ie]===xe[++le]&&xe[++ie]===xe[++le]&&ie<ft);if(se=qi-(ft-ie),ie=ft-qi,se>ze){if(c.match_start=X,ze=se,se>=Me)break;qe=xe[ie+ze-1],_t=xe[ie+ze]}}while((X=Dt[X&Re])>ct&&--O!==0);return ze<=c.lookahead?ze:c.lookahead},ji=c=>{const X=c.w_size;let O,ie,le;do{if(ie=c.window_size-c.lookahead-c.strstart,c.strstart>=X+(X-en)&&(c.window.set(c.window.subarray(X,X+X-ie),0),c.match_start-=X,c.strstart-=X,c.block_start-=X,c.insert>c.strstart&&(c.insert=c.strstart),vl(c),ie+=X),c.strm.avail_in===0)break;if(O=kr(c.strm,c.window,c.strstart+c.lookahead,ie),c.lookahead+=O,c.lookahead+c.insert>=Ct)for(le=c.strstart-c.insert,c.ins_h=c.window[le],c.ins_h=tn(c,c.ins_h,c.window[le+1]);c.insert&&(c.ins_h=tn(c,c.ins_h,c.window[le+Ct-1]),c.prev[le&c.w_mask]=c.head[c.ins_h],c.head[c.ins_h]=le,le++,c.insert--,!(c.lookahead+c.insert<Ct)););}while(c.lookahead<en&&c.strm.avail_in!==0)},os=(c,X)=>{let O=c.pending_buf_size-5>c.w_size?c.w_size:c.pending_buf_size-5,ie,le,se,ze=0,Me=c.strm.avail_in;do{if(ie=65535,se=c.bi_valid+42>>3,c.strm.avail_out<se||(se=c.strm.avail_out-se,le=c.strstart-c.block_start,ie>le+c.strm.avail_in&&(ie=le+c.strm.avail_in),ie>se&&(ie=se),ie<O&&(ie===0&&X!==St||X===tt||ie!==le+c.strm.avail_in)))break;ze=X===St&&ie===le+c.strm.avail_in?1:0,de(c,0,0,ze),c.pending_buf[c.pending-4]=ie,c.pending_buf[c.pending-3]=ie>>8,c.pending_buf[c.pending-2]=~ie,c.pending_buf[c.pending-1]=~ie>>8,Ci(c.strm),le&&(le>ie&&(le=ie),c.strm.output.set(c.window.subarray(c.block_start,c.block_start+le),c.strm.next_out),c.strm.next_out+=le,c.strm.avail_out-=le,c.strm.total_out+=le,c.block_start+=le,ie-=le),ie&&(kr(c.strm,c.strm.output,c.strm.next_out,ie),c.strm.next_out+=ie,c.strm.avail_out-=ie,c.strm.total_out+=ie)}while(ze===0);return Me-=c.strm.avail_in,Me&&(Me>=c.w_size?(c.matches=2,c.window.set(c.strm.input.subarray(c.strm.next_in-c.w_size,c.strm.next_in),0),c.strstart=c.w_size,c.insert=c.strstart):(c.window_size-c.strstart<=Me&&(c.strstart-=c.w_size,c.window.set(c.window.subarray(c.w_size,c.w_size+c.strstart),0),c.matches<2&&c.matches++,c.insert>c.strstart&&(c.insert=c.strstart)),c.window.set(c.strm.input.subarray(c.strm.next_in-Me,c.strm.next_in),c.strstart),c.strstart+=Me,c.insert+=Me>c.w_size-c.insert?c.w_size-c.insert:Me),c.block_start=c.strstart),c.high_water<c.strstart&&(c.high_water=c.strstart),ze?Vi:X!==tt&&X!==St&&c.strm.avail_in===0&&c.strstart===c.block_start?Wn:(se=c.window_size-c.strstart,c.strm.avail_in>se&&c.block_start>=c.w_size&&(c.block_start-=c.w_size,c.strstart-=c.w_size,c.window.set(c.window.subarray(c.w_size,c.w_size+c.strstart),0),c.matches<2&&c.matches++,se+=c.w_size,c.insert>c.strstart&&(c.insert=c.strstart)),se>c.strm.avail_in&&(se=c.strm.avail_in),se&&(kr(c.strm,c.window,c.strstart,se),c.strstart+=se,c.insert+=se>c.w_size-c.insert?c.w_size-c.insert:se),c.high_water<c.strstart&&(c.high_water=c.strstart),se=c.bi_valid+42>>3,se=c.pending_buf_size-se>65535?65535:c.pending_buf_size-se,O=se>c.w_size?c.w_size:se,le=c.strstart-c.block_start,(le>=O||(le||X===St)&&X!==tt&&c.strm.avail_in===0&&le<=se)&&(ie=le>se?se:le,ze=X===St&&c.strm.avail_in===0&&ie===le?1:0,de(c,c.block_start,ie,ze),c.block_start+=ie,Ci(c.strm)),ze?vn:di)},Qr=(c,X)=>{let O,ie;for(;;){if(c.lookahead<en){if(ji(c),c.lookahead<en&&X===tt)return di;if(c.lookahead===0)break}if(O=0,c.lookahead>=Ct&&(c.ins_h=tn(c,c.ins_h,c.window[c.strstart+Ct-1]),O=c.prev[c.strstart&c.w_mask]=c.head[c.ins_h],c.head[c.ins_h]=c.strstart),O!==0&&c.strstart-O<=c.w_size-en&&(c.match_length=jn(c,O)),c.match_length>=Ct)if(ie=ut(c,c.strstart-c.match_start,c.match_length-Ct),c.lookahead-=c.match_length,c.match_length<=c.max_lazy_match&&c.lookahead>=Ct){c.match_length--;do c.strstart++,c.ins_h=tn(c,c.ins_h,c.window[c.strstart+Ct-1]),O=c.prev[c.strstart&c.w_mask]=c.head[c.ins_h],c.head[c.ins_h]=c.strstart;while(--c.match_length!==0);c.strstart++}else c.strstart+=c.match_length,c.match_length=0,c.ins_h=c.window[c.strstart],c.ins_h=tn(c,c.ins_h,c.window[c.strstart+1]);else ie=ut(c,0,c.window[c.strstart]),c.lookahead--,c.strstart++;if(ie&&(wi(c,!1),c.strm.avail_out===0))return di}return c.insert=c.strstart<Ct-1?c.strstart:Ct-1,X===St?(wi(c,!0),c.strm.avail_out===0?vn:Vi):c.sym_next&&(wi(c,!1),c.strm.avail_out===0)?di:Wn},Kn=(c,X)=>{let O,ie,le;for(;;){if(c.lookahead<en){if(ji(c),c.lookahead<en&&X===tt)return di;if(c.lookahead===0)break}if(O=0,c.lookahead>=Ct&&(c.ins_h=tn(c,c.ins_h,c.window[c.strstart+Ct-1]),O=c.prev[c.strstart&c.w_mask]=c.head[c.ins_h],c.head[c.ins_h]=c.strstart),c.prev_length=c.match_length,c.prev_match=c.match_start,c.match_length=Ct-1,O!==0&&c.prev_length<c.max_lazy_match&&c.strstart-O<=c.w_size-en&&(c.match_length=jn(c,O),c.match_length<=5&&(c.strategy===jt||c.match_length===Ct&&c.strstart-c.match_start>4096)&&(c.match_length=Ct-1)),c.prev_length>=Ct&&c.match_length<=c.prev_length){le=c.strstart+c.lookahead-Ct,ie=ut(c,c.strstart-1-c.prev_match,c.prev_length-Ct),c.lookahead-=c.prev_length-1,c.prev_length-=2;do++c.strstart<=le&&(c.ins_h=tn(c,c.ins_h,c.window[c.strstart+Ct-1]),O=c.prev[c.strstart&c.w_mask]=c.head[c.ins_h],c.head[c.ins_h]=c.strstart);while(--c.prev_length!==0);if(c.match_available=0,c.match_length=Ct-1,c.strstart++,ie&&(wi(c,!1),c.strm.avail_out===0))return di}else if(c.match_available){if(ie=ut(c,0,c.window[c.strstart-1]),ie&&wi(c,!1),c.strstart++,c.lookahead--,c.strm.avail_out===0)return di}else c.match_available=1,c.strstart++,c.lookahead--}return c.match_available&&(ie=ut(c,0,c.window[c.strstart-1]),c.match_available=0),c.insert=c.strstart<Ct-1?c.strstart:Ct-1,X===St?(wi(c,!0),c.strm.avail_out===0?vn:Vi):c.sym_next&&(wi(c,!1),c.strm.avail_out===0)?di:Wn},Jr=(c,X)=>{let O,ie,le,se;const ze=c.window;for(;;){if(c.lookahead<=qi){if(ji(c),c.lookahead<=qi&&X===tt)return di;if(c.lookahead===0)break}if(c.match_length=0,c.lookahead>=Ct&&c.strstart>0&&(le=c.strstart-1,ie=ze[le],ie===ze[++le]&&ie===ze[++le]&&ie===ze[++le])){se=c.strstart+qi;do;while(ie===ze[++le]&&ie===ze[++le]&&ie===ze[++le]&&ie===ze[++le]&&ie===ze[++le]&&ie===ze[++le]&&ie===ze[++le]&&ie===ze[++le]&&le<se);c.match_length=qi-(se-le),c.match_length>c.lookahead&&(c.match_length=c.lookahead)}if(c.match_length>=Ct?(O=ut(c,1,c.match_length-Ct),c.lookahead-=c.match_length,c.strstart+=c.match_length,c.match_length=0):(O=ut(c,0,c.window[c.strstart]),c.lookahead--,c.strstart++),O&&(wi(c,!1),c.strm.avail_out===0))return di}return c.insert=0,X===St?(wi(c,!0),c.strm.avail_out===0?vn:Vi):c.sym_next&&(wi(c,!1),c.strm.avail_out===0)?di:Wn},mn=(c,X)=>{let O;for(;;){if(c.lookahead===0&&(ji(c),c.lookahead===0)){if(X===tt)return di;break}if(c.match_length=0,O=ut(c,0,c.window[c.strstart]),c.lookahead--,c.strstart++,O&&(wi(c,!1),c.strm.avail_out===0))return di}return c.insert=0,X===St?(wi(c,!0),c.strm.avail_out===0?vn:Vi):c.sym_next&&(wi(c,!1),c.strm.avail_out===0)?di:Wn};function Pi(c,X,O,ie,le){this.good_length=c,this.max_lazy=X,this.nice_length=O,this.max_chain=ie,this.func=le}const _n=[new Pi(0,0,0,0,os),new Pi(4,4,8,4,Qr),new Pi(4,5,16,8,Qr),new Pi(4,6,32,32,Qr),new Pi(4,4,16,16,Kn),new Pi(8,16,32,32,Kn),new Pi(8,16,128,128,Kn),new Pi(8,32,128,256,Kn),new Pi(32,128,258,1024,Kn),new Pi(32,258,258,4096,Kn)],Cn=c=>{c.window_size=2*c.w_size,On(c.head),c.max_lazy_match=_n[c.level].max_lazy,c.good_match=_n[c.level].good_length,c.nice_match=_n[c.level].nice_length,c.max_chain_length=_n[c.level].max_chain,c.strstart=0,c.block_start=0,c.lookahead=0,c.insert=0,c.match_length=c.prev_length=Ct-1,c.match_available=0,c.ins_h=0};function us(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Ui,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(cl*2),this.dyn_dtree=new Uint16Array((2*gn+1)*2),this.bl_tree=new Uint16Array((2*ss+1)*2),On(this.dyn_ltree),On(this.dyn_dtree),On(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(gr+1),this.heap=new Uint16Array(2*dr+1),On(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*dr+1),On(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const wn=c=>{if(!c)return 1;const X=c.state;return!X||X.strm!==c||X.status!==ci&&X.status!==ba&&X.status!==ls&&X.status!==vr&&X.status!==Ea&&X.status!==mr&&X.status!==Fn&&X.status!==mi?1:0},fs=c=>{if(wn(c))return Dn(c,Pt);c.total_in=c.total_out=0,c.data_type=$i;const X=c.state;return X.pending=0,X.pending_out=0,X.wrap<0&&(X.wrap=-X.wrap),X.status=X.wrap===2?ba:X.wrap?ci:Fn,c.adler=X.wrap===2?0:1,X.last_flush=-2,q(X),At},$r=c=>{const X=fs(c);return X===At&&Cn(c.state),X},Aa=(c,X)=>wn(c)||c.state.wrap!==2?Pt:(c.state.gzhead=X,At),hs=(c,X,O,ie,le,se)=>{if(!c)return Pt;let ze=1;if(X===Ht&&(X=6),ie<0?(ze=0,ie=-ie):ie>15&&(ze=2,ie-=16),le<1||le>xa||O!==Ui||ie<8||ie>15||X<0||X>9||se<0||se>vi||ie===8&&ze!==1)return Dn(c,Pt);ie===8&&(ie=9);const Me=new us;return c.state=Me,Me.strm=c,Me.status=ci,Me.wrap=ze,Me.gzhead=null,Me.w_bits=ie,Me.w_size=1<<Me.w_bits,Me.w_mask=Me.w_size-1,Me.hash_bits=le+7,Me.hash_size=1<<Me.hash_bits,Me.hash_mask=Me.hash_size-1,Me.hash_shift=~~((Me.hash_bits+Ct-1)/Ct),Me.window=new Uint8Array(Me.w_size*2),Me.head=new Uint16Array(Me.hash_size),Me.prev=new Uint16Array(Me.w_size),Me.lit_bufsize=1<<le+6,Me.pending_buf_size=Me.lit_bufsize*4,Me.pending_buf=new Uint8Array(Me.pending_buf_size),Me.sym_buf=Me.lit_bufsize,Me.sym_end=(Me.lit_bufsize-1)*3,Me.level=X,Me.strategy=se,Me.method=O,$r(c)},Ti=(c,X)=>hs(c,X,Ui,Xr,Zr,Tn),Yn=(c,X)=>{if(wn(c)||X>Tt||X<0)return c?Dn(c,Pt):Pt;const O=c.state;if(!c.output||c.avail_in!==0&&!c.input||O.status===mi&&X!==St)return Dn(c,c.avail_out===0?bi:Pt);const ie=O.last_flush;if(O.last_flush=X,O.pending!==0){if(Ci(c),c.avail_out===0)return O.last_flush=-1,At}else if(c.avail_in===0&&Hn(X)<=Hn(ie)&&X!==St)return Dn(c,bi);if(O.status===mi&&c.avail_in!==0)return Dn(c,bi);if(O.status===ci&&O.wrap===0&&(O.status=Fn),O.status===ci){let le=Ui+(O.w_bits-8<<4)<<8,se=-1;if(O.strategy>=It||O.level<2?se=0:O.level<6?se=1:O.level===6?se=2:se=3,le|=se<<6,O.strstart!==0&&(le|=dl),le+=31-le%31,Vn(O,le),O.strstart!==0&&(Vn(O,c.adler>>>16),Vn(O,c.adler&65535)),c.adler=1,O.status=Fn,Ci(c),O.pending!==0)return O.last_flush=-1,At}if(O.status===ba){if(c.adler=0,Bt(O,31),Bt(O,139),Bt(O,8),O.gzhead)Bt(O,(O.gzhead.text?1:0)+(O.gzhead.hcrc?2:0)+(O.gzhead.extra?4:0)+(O.gzhead.name?8:0)+(O.gzhead.comment?16:0)),Bt(O,O.gzhead.time&255),Bt(O,O.gzhead.time>>8&255),Bt(O,O.gzhead.time>>16&255),Bt(O,O.gzhead.time>>24&255),Bt(O,O.level===9?2:O.strategy>=It||O.level<2?4:0),Bt(O,O.gzhead.os&255),O.gzhead.extra&&O.gzhead.extra.length&&(Bt(O,O.gzhead.extra.length&255),Bt(O,O.gzhead.extra.length>>8&255)),O.gzhead.hcrc&&(c.adler=I(c.adler,O.pending_buf,O.pending,0)),O.gzindex=0,O.status=ls;else if(Bt(O,0),Bt(O,0),Bt(O,0),Bt(O,0),Bt(O,0),Bt(O,O.level===9?2:O.strategy>=It||O.level<2?4:0),Bt(O,gl),O.status=Fn,Ci(c),O.pending!==0)return O.last_flush=-1,At}if(O.status===ls){if(O.gzhead.extra){let le=O.pending,se=(O.gzhead.extra.length&65535)-O.gzindex;for(;O.pending+se>O.pending_buf_size;){let Me=O.pending_buf_size-O.pending;if(O.pending_buf.set(O.gzhead.extra.subarray(O.gzindex,O.gzindex+Me),O.pending),O.pending=O.pending_buf_size,O.gzhead.hcrc&&O.pending>le&&(c.adler=I(c.adler,O.pending_buf,O.pending-le,le)),O.gzindex+=Me,Ci(c),O.pending!==0)return O.last_flush=-1,At;le=0,se-=Me}let ze=new Uint8Array(O.gzhead.extra);O.pending_buf.set(ze.subarray(O.gzindex,O.gzindex+se),O.pending),O.pending+=se,O.gzhead.hcrc&&O.pending>le&&(c.adler=I(c.adler,O.pending_buf,O.pending-le,le)),O.gzindex=0}O.status=vr}if(O.status===vr){if(O.gzhead.name){let le=O.pending,se;do{if(O.pending===O.pending_buf_size){if(O.gzhead.hcrc&&O.pending>le&&(c.adler=I(c.adler,O.pending_buf,O.pending-le,le)),Ci(c),O.pending!==0)return O.last_flush=-1,At;le=0}O.gzindex<O.gzhead.name.length?se=O.gzhead.name.charCodeAt(O.gzindex++)&255:se=0,Bt(O,se)}while(se!==0);O.gzhead.hcrc&&O.pending>le&&(c.adler=I(c.adler,O.pending_buf,O.pending-le,le)),O.gzindex=0}O.status=Ea}if(O.status===Ea){if(O.gzhead.comment){let le=O.pending,se;do{if(O.pending===O.pending_buf_size){if(O.gzhead.hcrc&&O.pending>le&&(c.adler=I(c.adler,O.pending_buf,O.pending-le,le)),Ci(c),O.pending!==0)return O.last_flush=-1,At;le=0}O.gzindex<O.gzhead.comment.length?se=O.gzhead.comment.charCodeAt(O.gzindex++)&255:se=0,Bt(O,se)}while(se!==0);O.gzhead.hcrc&&O.pending>le&&(c.adler=I(c.adler,O.pending_buf,O.pending-le,le))}O.status=mr}if(O.status===mr){if(O.gzhead.hcrc){if(O.pending+2>O.pending_buf_size&&(Ci(c),O.pending!==0))return O.last_flush=-1,At;Bt(O,c.adler&255),Bt(O,c.adler>>8&255),c.adler=0}if(O.status=Fn,Ci(c),O.pending!==0)return O.last_flush=-1,At}if(c.avail_in!==0||O.lookahead!==0||X!==tt&&O.status!==mi){let le=O.level===0?os(O,X):O.strategy===It?mn(O,X):O.strategy===Nt?Jr(O,X):_n[O.level].func(O,X);if((le===vn||le===Vi)&&(O.status=mi),le===di||le===vn)return c.avail_out===0&&(O.last_flush=-1),At;if(le===Wn&&(X===vt?at(O):X!==Tt&&(de(O,0,0,!1),X===ti&&(On(O.head),O.lookahead===0&&(O.strstart=0,O.block_start=0,O.insert=0))),Ci(c),c.avail_out===0))return O.last_flush=-1,At}return X!==St?At:O.wrap<=0?ii:(O.wrap===2?(Bt(O,c.adler&255),Bt(O,c.adler>>8&255),Bt(O,c.adler>>16&255),Bt(O,c.adler>>24&255),Bt(O,c.total_in&255),Bt(O,c.total_in>>8&255),Bt(O,c.total_in>>16&255),Bt(O,c.total_in>>24&255)):(Vn(O,c.adler>>>16),Vn(O,c.adler&65535)),Ci(c),O.wrap>0&&(O.wrap=-O.wrap),O.pending!==0?At:ii)},Ma=c=>{if(wn(c))return Pt;const X=c.state.status;return c.state=null,X===Fn?Dn(c,Hi):At},qr=(c,X)=>{let O=X.length;if(wn(c))return Pt;const ie=c.state,le=ie.wrap;if(le===2||le===1&&ie.status!==ci||ie.lookahead)return Pt;if(le===1&&(c.adler=Ue(c.adler,X,O,0)),ie.wrap=0,O>=ie.w_size){le===0&&(On(ie.head),ie.strstart=0,ie.block_start=0,ie.insert=0);let ct=new Uint8Array(ie.w_size);ct.set(X.subarray(O-ie.w_size,O),0),X=ct,O=ie.w_size}const se=c.avail_in,ze=c.next_in,Me=c.input;for(c.avail_in=O,c.next_in=0,c.input=X,ji(ie);ie.lookahead>=Ct;){let ct=ie.strstart,xe=ie.lookahead-(Ct-1);do ie.ins_h=tn(ie,ie.ins_h,ie.window[ct+Ct-1]),ie.prev[ct&ie.w_mask]=ie.head[ie.ins_h],ie.head[ie.ins_h]=ct,ct++;while(--xe);ie.strstart=ct,ie.lookahead=Ct-1,ji(ie)}return ie.strstart+=ie.lookahead,ie.block_start=ie.strstart,ie.insert=ie.lookahead,ie.lookahead=0,ie.match_length=ie.prev_length=Ct-1,ie.match_available=0,c.next_in=ze,c.input=Me,c.avail_in=se,ie.wrap=le,At};var Lo=Ti,cs=hs,ds=$r,ea=fs,Sa=Aa,ml=Yn,Ro=Ma,zo=qr,Bo="pako deflate (from Nodeca project)",Xn={deflateInit:Lo,deflateInit2:cs,deflateReset:ds,deflateResetKeep:ea,deflateSetHeader:Sa,deflate:ml,deflateEnd:Ro,deflateSetDictionary:zo,deflateInfo:Bo};const Uo=(c,X)=>Object.prototype.hasOwnProperty.call(c,X);var Po=function(c){const X=Array.prototype.slice.call(arguments,1);for(;X.length;){const O=X.shift();if(O){if(typeof O!="object")throw new TypeError(O+"must be non-object");for(const ie in O)Uo(O,ie)&&(c[ie]=O[ie])}}return c},Io=c=>{let X=0;for(let ie=0,le=c.length;ie<le;ie++)X+=c[ie].length;const O=new Uint8Array(X);for(let ie=0,le=0,se=c.length;ie<se;ie++){let ze=c[ie];O.set(ze,le),le+=ze.length}return O},Ta={assign:Po,flattenChunks:Io};let _l=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{_l=!1}const _r=new Uint8Array(256);for(let c=0;c<256;c++)_r[c]=c>=252?6:c>=248?5:c>=240?4:c>=224?3:c>=192?2:1;_r[254]=_r[254]=1;var Go=c=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(c);let X,O,ie,le,se,ze=c.length,Me=0;for(le=0;le<ze;le++)O=c.charCodeAt(le),(O&64512)===55296&&le+1<ze&&(ie=c.charCodeAt(le+1),(ie&64512)===56320&&(O=65536+(O-55296<<10)+(ie-56320),le++)),Me+=O<128?1:O<2048?2:O<65536?3:4;for(X=new Uint8Array(Me),se=0,le=0;se<Me;le++)O=c.charCodeAt(le),(O&64512)===55296&&le+1<ze&&(ie=c.charCodeAt(le+1),(ie&64512)===56320&&(O=65536+(O-55296<<10)+(ie-56320),le++)),O<128?X[se++]=O:O<2048?(X[se++]=192|O>>>6,X[se++]=128|O&63):O<65536?(X[se++]=224|O>>>12,X[se++]=128|O>>>6&63,X[se++]=128|O&63):(X[se++]=240|O>>>18,X[se++]=128|O>>>12&63,X[se++]=128|O>>>6&63,X[se++]=128|O&63);return X};const No=(c,X)=>{if(X<65534&&c.subarray&&_l)return String.fromCharCode.apply(null,c.length===X?c:c.subarray(0,X));let O="";for(let ie=0;ie<X;ie++)O+=String.fromCharCode(c[ie]);return O};var Fo=(c,X)=>{const O=X||c.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(c.subarray(0,X));let ie,le;const se=new Array(O*2);for(le=0,ie=0;ie<O;){let ze=c[ie++];if(ze<128){se[le++]=ze;continue}let Me=_r[ze];if(Me>4){se[le++]=65533,ie+=Me-1;continue}for(ze&=Me===2?31:Me===3?15:7;Me>1&&ie<O;)ze=ze<<6|c[ie++]&63,Me--;if(Me>1){se[le++]=65533;continue}ze<65536?se[le++]=ze:(ze-=65536,se[le++]=55296|ze>>10&1023,se[le++]=56320|ze&1023)}return No(se,le)},Wo=(c,X)=>{X=X||c.length,X>c.length&&(X=c.length);let O=X-1;for(;O>=0&&(c[O]&192)===128;)O--;return O<0||O===0?X:O+_r[c[O]]>X?O:X},Zn={string2buf:Go,buf2string:Fo,utf8border:Wo};function Ho(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var pl=Ho;const xl=Object.prototype.toString,{Z_NO_FLUSH:yl,Z_SYNC_FLUSH:Vo,Z_FULL_FLUSH:jo,Z_FINISH:Ko,Z_OK:Da,Z_STREAM_END:Yo,Z_DEFAULT_COMPRESSION:Xo,Z_DEFAULT_STRATEGY:Zo,Z_DEFLATED:ko}=Ee;function ta(c){this.options=Ta.assign({level:Xo,method:ko,chunkSize:16384,windowBits:15,memLevel:8,strategy:Zo},c||{});let X=this.options;X.raw&&X.windowBits>0?X.windowBits=-X.windowBits:X.gzip&&X.windowBits>0&&X.windowBits<16&&(X.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new pl,this.strm.avail_out=0;let O=Xn.deflateInit2(this.strm,X.level,X.method,X.windowBits,X.memLevel,X.strategy);if(O!==Da)throw new Error(Ae[O]);if(X.header&&Xn.deflateSetHeader(this.strm,X.header),X.dictionary){let ie;if(typeof X.dictionary=="string"?ie=Zn.string2buf(X.dictionary):xl.call(X.dictionary)==="[object ArrayBuffer]"?ie=new Uint8Array(X.dictionary):ie=X.dictionary,O=Xn.deflateSetDictionary(this.strm,ie),O!==Da)throw new Error(Ae[O]);this._dict_set=!0}}ta.prototype.push=function(c,X){const O=this.strm,ie=this.options.chunkSize;let le,se;if(this.ended)return!1;for(X===~~X?se=X:se=X===!0?Ko:yl,typeof c=="string"?O.input=Zn.string2buf(c):xl.call(c)==="[object ArrayBuffer]"?O.input=new Uint8Array(c):O.input=c,O.next_in=0,O.avail_in=O.input.length;;){if(O.avail_out===0&&(O.output=new Uint8Array(ie),O.next_out=0,O.avail_out=ie),(se===Vo||se===jo)&&O.avail_out<=6){this.onData(O.output.subarray(0,O.next_out)),O.avail_out=0;continue}if(le=Xn.deflate(O,se),le===Yo)return O.next_out>0&&this.onData(O.output.subarray(0,O.next_out)),le=Xn.deflateEnd(this.strm),this.onEnd(le),this.ended=!0,le===Da;if(O.avail_out===0){this.onData(O.output);continue}if(se>0&&O.next_out>0){this.onData(O.output.subarray(0,O.next_out)),O.avail_out=0;continue}if(O.avail_in===0)break}return!0},ta.prototype.onData=function(c){this.chunks.push(c)},ta.prototype.onEnd=function(c){c===Da&&(this.result=Ta.flattenChunks(this.chunks)),this.chunks=[],this.err=c,this.msg=this.strm.msg};function ia(c,X){const O=new ta(X);if(O.push(c,!0),O.err)throw O.msg||Ae[O.err];return O.result}function na(c,X){return X=X||{},X.raw=!0,ia(c,X)}function Qo(c,X){return X=X||{},X.gzip=!0,ia(c,X)}var bl=ta,El=ia,Al=na,Ml=Qo,Sl={Deflate:bl,deflate:El,deflateRaw:Al,gzip:Ml};const pn=16209,Jo=16191;var $o=function(X,O){let ie,le,se,ze,Me,ct,xe,Re,Dt,ft,qe,_t,$t,Ot,Et,Wt,wt,ht,Ut,oi,pt,Yt,Mt,lt;const dt=X.state;ie=X.next_in,Mt=X.input,le=ie+(X.avail_in-5),se=X.next_out,lt=X.output,ze=se-(O-X.avail_out),Me=se+(X.avail_out-257),ct=dt.dmax,xe=dt.wsize,Re=dt.whave,Dt=dt.wnext,ft=dt.window,qe=dt.hold,_t=dt.bits,$t=dt.lencode,Ot=dt.distcode,Et=(1<<dt.lenbits)-1,Wt=(1<<dt.distbits)-1;e:do{_t<15&&(qe+=Mt[ie++]<<_t,_t+=8,qe+=Mt[ie++]<<_t,_t+=8),wt=$t[qe&Et];t:for(;;){if(ht=wt>>>24,qe>>>=ht,_t-=ht,ht=wt>>>16&255,ht===0)lt[se++]=wt&65535;else if(ht&16){Ut=wt&65535,ht&=15,ht&&(_t<ht&&(qe+=Mt[ie++]<<_t,_t+=8),Ut+=qe&(1<<ht)-1,qe>>>=ht,_t-=ht),_t<15&&(qe+=Mt[ie++]<<_t,_t+=8,qe+=Mt[ie++]<<_t,_t+=8),wt=Ot[qe&Wt];i:for(;;){if(ht=wt>>>24,qe>>>=ht,_t-=ht,ht=wt>>>16&255,ht&16){if(oi=wt&65535,ht&=15,_t<ht&&(qe+=Mt[ie++]<<_t,_t+=8,_t<ht&&(qe+=Mt[ie++]<<_t,_t+=8)),oi+=qe&(1<<ht)-1,oi>ct){X.msg="invalid distance too far back",dt.mode=pn;break e}if(qe>>>=ht,_t-=ht,ht=se-ze,oi>ht){if(ht=oi-ht,ht>Re&&dt.sane){X.msg="invalid distance too far back",dt.mode=pn;break e}if(pt=0,Yt=ft,Dt===0){if(pt+=xe-ht,ht<Ut){Ut-=ht;do lt[se++]=ft[pt++];while(--ht);pt=se-oi,Yt=lt}}else if(Dt<ht){if(pt+=xe+Dt-ht,ht-=Dt,ht<Ut){Ut-=ht;do lt[se++]=ft[pt++];while(--ht);if(pt=0,Dt<Ut){ht=Dt,Ut-=ht;do lt[se++]=ft[pt++];while(--ht);pt=se-oi,Yt=lt}}}else if(pt+=Dt-ht,ht<Ut){Ut-=ht;do lt[se++]=ft[pt++];while(--ht);pt=se-oi,Yt=lt}for(;Ut>2;)lt[se++]=Yt[pt++],lt[se++]=Yt[pt++],lt[se++]=Yt[pt++],Ut-=3;Ut&&(lt[se++]=Yt[pt++],Ut>1&&(lt[se++]=Yt[pt++]))}else{pt=se-oi;do lt[se++]=lt[pt++],lt[se++]=lt[pt++],lt[se++]=lt[pt++],Ut-=3;while(Ut>2);Ut&&(lt[se++]=lt[pt++],Ut>1&&(lt[se++]=lt[pt++]))}}else if((ht&64)===0){wt=Ot[(wt&65535)+(qe&(1<<ht)-1)];continue i}else{X.msg="invalid distance code",dt.mode=pn;break e}break}}else if((ht&64)===0){wt=$t[(wt&65535)+(qe&(1<<ht)-1)];continue t}else if(ht&32){dt.mode=Jo;break e}else{X.msg="invalid literal/length code",dt.mode=pn;break e}break}}while(ie<le&&se<Me);Ut=_t>>3,ie-=Ut,_t-=Ut<<3,qe&=(1<<_t)-1,X.next_in=ie,X.next_out=se,X.avail_in=ie<le?5+(le-ie):5-(ie-le),X.avail_out=se<Me?257+(Me-se):257-(se-Me),dt.hold=qe,dt.bits=_t};const pr=15,gs=852,vs=592,xr=0,kn=1,Tl=2,Oa=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Dl=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Ol=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),ms=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var yr=(c,X,O,ie,le,se,ze,Me)=>{const ct=Me.bits;let xe=0,Re=0,Dt=0,ft=0,qe=0,_t=0,$t=0,Ot=0,Et=0,Wt=0,wt,ht,Ut,oi,pt,Yt=null,Mt;const lt=new Uint16Array(pr+1),dt=new Uint16Array(pr+1);let kt=null,ga,An,fn;for(xe=0;xe<=pr;xe++)lt[xe]=0;for(Re=0;Re<ie;Re++)lt[X[O+Re]]++;for(qe=ct,ft=pr;ft>=1&&lt[ft]===0;ft--);if(qe>ft&&(qe=ft),ft===0)return le[se++]=1<<24|64<<16|0,le[se++]=1<<24|64<<16|0,Me.bits=1,0;for(Dt=1;Dt<ft&&lt[Dt]===0;Dt++);for(qe<Dt&&(qe=Dt),Ot=1,xe=1;xe<=pr;xe++)if(Ot<<=1,Ot-=lt[xe],Ot<0)return-1;if(Ot>0&&(c===xr||ft!==1))return-1;for(dt[1]=0,xe=1;xe<pr;xe++)dt[xe+1]=dt[xe]+lt[xe];for(Re=0;Re<ie;Re++)X[O+Re]!==0&&(ze[dt[X[O+Re]]++]=Re);if(c===xr?(Yt=kt=ze,Mt=20):c===kn?(Yt=Oa,kt=Dl,Mt=257):(Yt=Ol,kt=ms,Mt=0),Wt=0,Re=0,xe=Dt,pt=se,_t=qe,$t=0,Ut=-1,Et=1<<qe,oi=Et-1,c===kn&&Et>gs||c===Tl&&Et>vs)return 1;for(;;){ga=xe-$t,ze[Re]+1<Mt?(An=0,fn=ze[Re]):ze[Re]>=Mt?(An=kt[ze[Re]-Mt],fn=Yt[ze[Re]-Mt]):(An=96,fn=0),wt=1<<xe-$t,ht=1<<_t,Dt=ht;do ht-=wt,le[pt+(Wt>>$t)+ht]=ga<<24|An<<16|fn|0;while(ht!==0);for(wt=1<<xe-1;Wt&wt;)wt>>=1;if(wt!==0?(Wt&=wt-1,Wt+=wt):Wt=0,Re++,--lt[xe]===0){if(xe===ft)break;xe=X[O+ze[Re]]}if(xe>qe&&(Wt&oi)!==Ut){for($t===0&&($t=qe),pt+=Dt,_t=xe-$t,Ot=1<<_t;_t+$t<ft&&(Ot-=lt[_t+$t],!(Ot<=0));)_t++,Ot<<=1;if(Et+=1<<_t,c===kn&&Et>gs||c===Tl&&Et>vs)return 1;Ut=Wt&oi,le[Ut]=qe<<24|_t<<16|pt-se|0}}return Wt!==0&&(le[pt+Wt]=xe-$t<<24|64<<16|0),Me.bits=qe,0};const wl=0,_s=1,Ll=2,{Z_FINISH:Rl,Z_BLOCK:qo,Z_TREES:Ca,Z_OK:Qn,Z_STREAM_END:Li,Z_NEED_DICT:ra,Z_STREAM_ERROR:Ri,Z_DATA_ERROR:ps,Z_MEM_ERROR:xs,Z_BUF_ERROR:zl,Z_DEFLATED:wa}=Ee,La=16180,Jn=16181,Ra=16182,br=16183,za=16184,ys=16185,Ln=16186,$n=16187,Ba=16188,bs=16189,nn=16190,rn=16191,Ua=16192,Es=16193,As=16194,Bl=16195,Ul=16196,Ms=16197,Ss=16198,Er=16199,Di=16200,Ts=16201,zi=16202,Bi=16203,qn=16204,Pa=16205,Ar=16206,aa=16207,Ia=16208,Kt=16209,Ds=16210,sa=16211,Mr=852,eu=592,Os=15,an=c=>(c>>>24&255)+(c>>>8&65280)+((c&65280)<<8)+((c&255)<<24);function Pl(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const sn=c=>{if(!c)return 1;const X=c.state;return!X||X.strm!==c||X.mode<La||X.mode>sa?1:0},Rn=c=>{if(sn(c))return Ri;const X=c.state;return c.total_in=c.total_out=X.total=0,c.msg="",X.wrap&&(c.adler=X.wrap&1),X.mode=La,X.last=0,X.havedict=0,X.flags=-1,X.dmax=32768,X.head=null,X.hold=0,X.bits=0,X.lencode=X.lendyn=new Int32Array(Mr),X.distcode=X.distdyn=new Int32Array(eu),X.sane=1,X.back=-1,Qn},Ga=c=>{if(sn(c))return Ri;const X=c.state;return X.wsize=0,X.whave=0,X.wnext=0,Rn(c)},Na=(c,X)=>{let O;if(sn(c))return Ri;const ie=c.state;return X<0?(O=0,X=-X):(O=(X>>4)+5,X<48&&(X&=15)),X&&(X<8||X>15)?Ri:(ie.window!==null&&ie.wbits!==X&&(ie.window=null),ie.wrap=O,ie.wbits=X,Ga(c))},er=(c,X)=>{if(!c)return Ri;const O=new Pl;c.state=O,O.strm=c,O.window=null,O.mode=La;const ie=Na(c,X);return ie!==Qn&&(c.state=null),ie},Sr=c=>er(c,Os);let la=!0,Tr,Oi;const Gi=c=>{if(la){Tr=new Int32Array(512),Oi=new Int32Array(32);let X=0;for(;X<144;)c.lens[X++]=8;for(;X<256;)c.lens[X++]=9;for(;X<280;)c.lens[X++]=7;for(;X<288;)c.lens[X++]=8;for(yr(_s,c.lens,0,288,Tr,0,c.work,{bits:9}),X=0;X<32;)c.lens[X++]=5;yr(Ll,c.lens,0,32,Oi,0,c.work,{bits:5}),la=!1}c.lencode=Tr,c.lenbits=9,c.distcode=Oi,c.distbits=5},zn=(c,X,O,ie)=>{let le;const se=c.state;return se.window===null&&(se.wsize=1<<se.wbits,se.wnext=0,se.whave=0,se.window=new Uint8Array(se.wsize)),ie>=se.wsize?(se.window.set(X.subarray(O-se.wsize,O),0),se.wnext=0,se.whave=se.wsize):(le=se.wsize-se.wnext,le>ie&&(le=ie),se.window.set(X.subarray(O-ie,O-ie+le),se.wnext),ie-=le,ie?(se.window.set(X.subarray(O-ie,O),0),se.wnext=ie,se.whave=se.wsize):(se.wnext+=le,se.wnext===se.wsize&&(se.wnext=0),se.whave<se.wsize&&(se.whave+=le))),0},xn=(c,X)=>{let O,ie,le,se,ze,Me,ct,xe,Re,Dt,ft,qe,_t,$t,Ot=0,Et,Wt,wt,ht,Ut,oi,pt,Yt;const Mt=new Uint8Array(4);let lt,dt;const kt=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(sn(c)||!c.output||!c.input&&c.avail_in!==0)return Ri;O=c.state,O.mode===rn&&(O.mode=Ua),ze=c.next_out,le=c.output,ct=c.avail_out,se=c.next_in,ie=c.input,Me=c.avail_in,xe=O.hold,Re=O.bits,Dt=Me,ft=ct,Yt=Qn;e:for(;;)switch(O.mode){case La:if(O.wrap===0){O.mode=Ua;break}for(;Re<16;){if(Me===0)break e;Me--,xe+=ie[se++]<<Re,Re+=8}if(O.wrap&2&&xe===35615){O.wbits===0&&(O.wbits=15),O.check=0,Mt[0]=xe&255,Mt[1]=xe>>>8&255,O.check=I(O.check,Mt,2,0),xe=0,Re=0,O.mode=Jn;break}if(O.head&&(O.head.done=!1),!(O.wrap&1)||(((xe&255)<<8)+(xe>>8))%31){c.msg="incorrect header check",O.mode=Kt;break}if((xe&15)!==wa){c.msg="unknown compression method",O.mode=Kt;break}if(xe>>>=4,Re-=4,pt=(xe&15)+8,O.wbits===0&&(O.wbits=pt),pt>15||pt>O.wbits){c.msg="invalid window size",O.mode=Kt;break}O.dmax=1<<O.wbits,O.flags=0,c.adler=O.check=1,O.mode=xe&512?bs:rn,xe=0,Re=0;break;case Jn:for(;Re<16;){if(Me===0)break e;Me--,xe+=ie[se++]<<Re,Re+=8}if(O.flags=xe,(O.flags&255)!==wa){c.msg="unknown compression method",O.mode=Kt;break}if(O.flags&57344){c.msg="unknown header flags set",O.mode=Kt;break}O.head&&(O.head.text=xe>>8&1),O.flags&512&&O.wrap&4&&(Mt[0]=xe&255,Mt[1]=xe>>>8&255,O.check=I(O.check,Mt,2,0)),xe=0,Re=0,O.mode=Ra;case Ra:for(;Re<32;){if(Me===0)break e;Me--,xe+=ie[se++]<<Re,Re+=8}O.head&&(O.head.time=xe),O.flags&512&&O.wrap&4&&(Mt[0]=xe&255,Mt[1]=xe>>>8&255,Mt[2]=xe>>>16&255,Mt[3]=xe>>>24&255,O.check=I(O.check,Mt,4,0)),xe=0,Re=0,O.mode=br;case br:for(;Re<16;){if(Me===0)break e;Me--,xe+=ie[se++]<<Re,Re+=8}O.head&&(O.head.xflags=xe&255,O.head.os=xe>>8),O.flags&512&&O.wrap&4&&(Mt[0]=xe&255,Mt[1]=xe>>>8&255,O.check=I(O.check,Mt,2,0)),xe=0,Re=0,O.mode=za;case za:if(O.flags&1024){for(;Re<16;){if(Me===0)break e;Me--,xe+=ie[se++]<<Re,Re+=8}O.length=xe,O.head&&(O.head.extra_len=xe),O.flags&512&&O.wrap&4&&(Mt[0]=xe&255,Mt[1]=xe>>>8&255,O.check=I(O.check,Mt,2,0)),xe=0,Re=0}else O.head&&(O.head.extra=null);O.mode=ys;case ys:if(O.flags&1024&&(qe=O.length,qe>Me&&(qe=Me),qe&&(O.head&&(pt=O.head.extra_len-O.length,O.head.extra||(O.head.extra=new Uint8Array(O.head.extra_len)),O.head.extra.set(ie.subarray(se,se+qe),pt)),O.flags&512&&O.wrap&4&&(O.check=I(O.check,ie,qe,se)),Me-=qe,se+=qe,O.length-=qe),O.length))break e;O.length=0,O.mode=Ln;case Ln:if(O.flags&2048){if(Me===0)break e;qe=0;do pt=ie[se+qe++],O.head&&pt&&O.length<65536&&(O.head.name+=String.fromCharCode(pt));while(pt&&qe<Me);if(O.flags&512&&O.wrap&4&&(O.check=I(O.check,ie,qe,se)),Me-=qe,se+=qe,pt)break e}else O.head&&(O.head.name=null);O.length=0,O.mode=$n;case $n:if(O.flags&4096){if(Me===0)break e;qe=0;do pt=ie[se+qe++],O.head&&pt&&O.length<65536&&(O.head.comment+=String.fromCharCode(pt));while(pt&&qe<Me);if(O.flags&512&&O.wrap&4&&(O.check=I(O.check,ie,qe,se)),Me-=qe,se+=qe,pt)break e}else O.head&&(O.head.comment=null);O.mode=Ba;case Ba:if(O.flags&512){for(;Re<16;){if(Me===0)break e;Me--,xe+=ie[se++]<<Re,Re+=8}if(O.wrap&4&&xe!==(O.check&65535)){c.msg="header crc mismatch",O.mode=Kt;break}xe=0,Re=0}O.head&&(O.head.hcrc=O.flags>>9&1,O.head.done=!0),c.adler=O.check=0,O.mode=rn;break;case bs:for(;Re<32;){if(Me===0)break e;Me--,xe+=ie[se++]<<Re,Re+=8}c.adler=O.check=an(xe),xe=0,Re=0,O.mode=nn;case nn:if(O.havedict===0)return c.next_out=ze,c.avail_out=ct,c.next_in=se,c.avail_in=Me,O.hold=xe,O.bits=Re,ra;c.adler=O.check=1,O.mode=rn;case rn:if(X===qo||X===Ca)break e;case Ua:if(O.last){xe>>>=Re&7,Re-=Re&7,O.mode=Ar;break}for(;Re<3;){if(Me===0)break e;Me--,xe+=ie[se++]<<Re,Re+=8}switch(O.last=xe&1,xe>>>=1,Re-=1,xe&3){case 0:O.mode=Es;break;case 1:if(Gi(O),O.mode=Er,X===Ca){xe>>>=2,Re-=2;break e}break;case 2:O.mode=Ul;break;case 3:c.msg="invalid block type",O.mode=Kt}xe>>>=2,Re-=2;break;case Es:for(xe>>>=Re&7,Re-=Re&7;Re<32;){if(Me===0)break e;Me--,xe+=ie[se++]<<Re,Re+=8}if((xe&65535)!==(xe>>>16^65535)){c.msg="invalid stored block lengths",O.mode=Kt;break}if(O.length=xe&65535,xe=0,Re=0,O.mode=As,X===Ca)break e;case As:O.mode=Bl;case Bl:if(qe=O.length,qe){if(qe>Me&&(qe=Me),qe>ct&&(qe=ct),qe===0)break e;le.set(ie.subarray(se,se+qe),ze),Me-=qe,se+=qe,ct-=qe,ze+=qe,O.length-=qe;break}O.mode=rn;break;case Ul:for(;Re<14;){if(Me===0)break e;Me--,xe+=ie[se++]<<Re,Re+=8}if(O.nlen=(xe&31)+257,xe>>>=5,Re-=5,O.ndist=(xe&31)+1,xe>>>=5,Re-=5,O.ncode=(xe&15)+4,xe>>>=4,Re-=4,O.nlen>286||O.ndist>30){c.msg="too many length or distance symbols",O.mode=Kt;break}O.have=0,O.mode=Ms;case Ms:for(;O.have<O.ncode;){for(;Re<3;){if(Me===0)break e;Me--,xe+=ie[se++]<<Re,Re+=8}O.lens[kt[O.have++]]=xe&7,xe>>>=3,Re-=3}for(;O.have<19;)O.lens[kt[O.have++]]=0;if(O.lencode=O.lendyn,O.lenbits=7,lt={bits:O.lenbits},Yt=yr(wl,O.lens,0,19,O.lencode,0,O.work,lt),O.lenbits=lt.bits,Yt){c.msg="invalid code lengths set",O.mode=Kt;break}O.have=0,O.mode=Ss;case Ss:for(;O.have<O.nlen+O.ndist;){for(;Ot=O.lencode[xe&(1<<O.lenbits)-1],Et=Ot>>>24,Wt=Ot>>>16&255,wt=Ot&65535,!(Et<=Re);){if(Me===0)break e;Me--,xe+=ie[se++]<<Re,Re+=8}if(wt<16)xe>>>=Et,Re-=Et,O.lens[O.have++]=wt;else{if(wt===16){for(dt=Et+2;Re<dt;){if(Me===0)break e;Me--,xe+=ie[se++]<<Re,Re+=8}if(xe>>>=Et,Re-=Et,O.have===0){c.msg="invalid bit length repeat",O.mode=Kt;break}pt=O.lens[O.have-1],qe=3+(xe&3),xe>>>=2,Re-=2}else if(wt===17){for(dt=Et+3;Re<dt;){if(Me===0)break e;Me--,xe+=ie[se++]<<Re,Re+=8}xe>>>=Et,Re-=Et,pt=0,qe=3+(xe&7),xe>>>=3,Re-=3}else{for(dt=Et+7;Re<dt;){if(Me===0)break e;Me--,xe+=ie[se++]<<Re,Re+=8}xe>>>=Et,Re-=Et,pt=0,qe=11+(xe&127),xe>>>=7,Re-=7}if(O.have+qe>O.nlen+O.ndist){c.msg="invalid bit length repeat",O.mode=Kt;break}for(;qe--;)O.lens[O.have++]=pt}}if(O.mode===Kt)break;if(O.lens[256]===0){c.msg="invalid code -- missing end-of-block",O.mode=Kt;break}if(O.lenbits=9,lt={bits:O.lenbits},Yt=yr(_s,O.lens,0,O.nlen,O.lencode,0,O.work,lt),O.lenbits=lt.bits,Yt){c.msg="invalid literal/lengths set",O.mode=Kt;break}if(O.distbits=6,O.distcode=O.distdyn,lt={bits:O.distbits},Yt=yr(Ll,O.lens,O.nlen,O.ndist,O.distcode,0,O.work,lt),O.distbits=lt.bits,Yt){c.msg="invalid distances set",O.mode=Kt;break}if(O.mode=Er,X===Ca)break e;case Er:O.mode=Di;case Di:if(Me>=6&&ct>=258){c.next_out=ze,c.avail_out=ct,c.next_in=se,c.avail_in=Me,O.hold=xe,O.bits=Re,$o(c,ft),ze=c.next_out,le=c.output,ct=c.avail_out,se=c.next_in,ie=c.input,Me=c.avail_in,xe=O.hold,Re=O.bits,O.mode===rn&&(O.back=-1);break}for(O.back=0;Ot=O.lencode[xe&(1<<O.lenbits)-1],Et=Ot>>>24,Wt=Ot>>>16&255,wt=Ot&65535,!(Et<=Re);){if(Me===0)break e;Me--,xe+=ie[se++]<<Re,Re+=8}if(Wt&&(Wt&240)===0){for(ht=Et,Ut=Wt,oi=wt;Ot=O.lencode[oi+((xe&(1<<ht+Ut)-1)>>ht)],Et=Ot>>>24,Wt=Ot>>>16&255,wt=Ot&65535,!(ht+Et<=Re);){if(Me===0)break e;Me--,xe+=ie[se++]<<Re,Re+=8}xe>>>=ht,Re-=ht,O.back+=ht}if(xe>>>=Et,Re-=Et,O.back+=Et,O.length=wt,Wt===0){O.mode=Pa;break}if(Wt&32){O.back=-1,O.mode=rn;break}if(Wt&64){c.msg="invalid literal/length code",O.mode=Kt;break}O.extra=Wt&15,O.mode=Ts;case Ts:if(O.extra){for(dt=O.extra;Re<dt;){if(Me===0)break e;Me--,xe+=ie[se++]<<Re,Re+=8}O.length+=xe&(1<<O.extra)-1,xe>>>=O.extra,Re-=O.extra,O.back+=O.extra}O.was=O.length,O.mode=zi;case zi:for(;Ot=O.distcode[xe&(1<<O.distbits)-1],Et=Ot>>>24,Wt=Ot>>>16&255,wt=Ot&65535,!(Et<=Re);){if(Me===0)break e;Me--,xe+=ie[se++]<<Re,Re+=8}if((Wt&240)===0){for(ht=Et,Ut=Wt,oi=wt;Ot=O.distcode[oi+((xe&(1<<ht+Ut)-1)>>ht)],Et=Ot>>>24,Wt=Ot>>>16&255,wt=Ot&65535,!(ht+Et<=Re);){if(Me===0)break e;Me--,xe+=ie[se++]<<Re,Re+=8}xe>>>=ht,Re-=ht,O.back+=ht}if(xe>>>=Et,Re-=Et,O.back+=Et,Wt&64){c.msg="invalid distance code",O.mode=Kt;break}O.offset=wt,O.extra=Wt&15,O.mode=Bi;case Bi:if(O.extra){for(dt=O.extra;Re<dt;){if(Me===0)break e;Me--,xe+=ie[se++]<<Re,Re+=8}O.offset+=xe&(1<<O.extra)-1,xe>>>=O.extra,Re-=O.extra,O.back+=O.extra}if(O.offset>O.dmax){c.msg="invalid distance too far back",O.mode=Kt;break}O.mode=qn;case qn:if(ct===0)break e;if(qe=ft-ct,O.offset>qe){if(qe=O.offset-qe,qe>O.whave&&O.sane){c.msg="invalid distance too far back",O.mode=Kt;break}qe>O.wnext?(qe-=O.wnext,_t=O.wsize-qe):_t=O.wnext-qe,qe>O.length&&(qe=O.length),$t=O.window}else $t=le,_t=ze-O.offset,qe=O.length;qe>ct&&(qe=ct),ct-=qe,O.length-=qe;do le[ze++]=$t[_t++];while(--qe);O.length===0&&(O.mode=Di);break;case Pa:if(ct===0)break e;le[ze++]=O.length,ct--,O.mode=Di;break;case Ar:if(O.wrap){for(;Re<32;){if(Me===0)break e;Me--,xe|=ie[se++]<<Re,Re+=8}if(ft-=ct,c.total_out+=ft,O.total+=ft,O.wrap&4&&ft&&(c.adler=O.check=O.flags?I(O.check,le,ft,ze-ft):Ue(O.check,le,ft,ze-ft)),ft=ct,O.wrap&4&&(O.flags?xe:an(xe))!==O.check){c.msg="incorrect data check",O.mode=Kt;break}xe=0,Re=0}O.mode=aa;case aa:if(O.wrap&&O.flags){for(;Re<32;){if(Me===0)break e;Me--,xe+=ie[se++]<<Re,Re+=8}if(O.wrap&4&&xe!==(O.total&4294967295)){c.msg="incorrect length check",O.mode=Kt;break}xe=0,Re=0}O.mode=Ia;case Ia:Yt=Li;break e;case Kt:Yt=ps;break e;case Ds:return xs;case sa:default:return Ri}return c.next_out=ze,c.avail_out=ct,c.next_in=se,c.avail_in=Me,O.hold=xe,O.bits=Re,(O.wsize||ft!==c.avail_out&&O.mode<Kt&&(O.mode<Ar||X!==Rl))&&zn(c,c.output,c.next_out,ft-c.avail_out),Dt-=c.avail_in,ft-=c.avail_out,c.total_in+=Dt,c.total_out+=ft,O.total+=ft,O.wrap&4&&ft&&(c.adler=O.check=O.flags?I(O.check,le,ft,c.next_out-ft):Ue(O.check,le,ft,c.next_out-ft)),c.data_type=O.bits+(O.last?64:0)+(O.mode===rn?128:0)+(O.mode===Er||O.mode===As?256:0),(Dt===0&&ft===0||X===Rl)&&Yt===Qn&&(Yt=zl),Yt},yn=c=>{if(sn(c))return Ri;let X=c.state;return X.window&&(X.window=null),c.state=null,Qn},tr=(c,X)=>{if(sn(c))return Ri;const O=c.state;return(O.wrap&2)===0?Ri:(O.head=X,X.done=!1,Qn)},Il=(c,X)=>{const O=X.length;let ie,le,se;return sn(c)||(ie=c.state,ie.wrap!==0&&ie.mode!==nn)?Ri:ie.mode===nn&&(le=1,le=Ue(le,X,O,0),le!==ie.check)?ps:(se=zn(c,X,O,O),se?(ie.mode=Ds,xs):(ie.havedict=1,Qn))};var Cs=Ga,ws=Na,Ei=Rn,ni=Sr,Ft=er,ir=xn,ln=yn,Ls=tr,nr=Il,Gl="pako inflate (from Nodeca project)",on={inflateReset:Cs,inflateReset2:ws,inflateResetKeep:Ei,inflateInit:ni,inflateInit2:Ft,inflate:ir,inflateEnd:ln,inflateGetHeader:Ls,inflateSetDictionary:nr,inflateInfo:Gl};function oa(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var ua=oa;const Rs=Object.prototype.toString,{Z_NO_FLUSH:fa,Z_FINISH:zs,Z_OK:Ki,Z_STREAM_END:Yi,Z_NEED_DICT:un,Z_STREAM_ERROR:bn,Z_DATA_ERROR:Fa,Z_MEM_ERROR:Bs}=Ee;function En(c){this.options=Ta.assign({chunkSize:65536,windowBits:15,to:""},c||{});const X=this.options;X.raw&&X.windowBits>=0&&X.windowBits<16&&(X.windowBits=-X.windowBits,X.windowBits===0&&(X.windowBits=-15)),X.windowBits>=0&&X.windowBits<16&&!(c&&c.windowBits)&&(X.windowBits+=32),X.windowBits>15&&X.windowBits<48&&(X.windowBits&15)===0&&(X.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new pl,this.strm.avail_out=0;let O=on.inflateInit2(this.strm,X.windowBits);if(O!==Ki)throw new Error(Ae[O]);if(this.header=new ua,on.inflateGetHeader(this.strm,this.header),X.dictionary&&(typeof X.dictionary=="string"?X.dictionary=Zn.string2buf(X.dictionary):Rs.call(X.dictionary)==="[object ArrayBuffer]"&&(X.dictionary=new Uint8Array(X.dictionary)),X.raw&&(O=on.inflateSetDictionary(this.strm,X.dictionary),O!==Ki)))throw new Error(Ae[O])}En.prototype.push=function(c,X){const O=this.strm,ie=this.options.chunkSize,le=this.options.dictionary;let se,ze,Me;if(this.ended)return!1;for(X===~~X?ze=X:ze=X===!0?zs:fa,Rs.call(c)==="[object ArrayBuffer]"?O.input=new Uint8Array(c):O.input=c,O.next_in=0,O.avail_in=O.input.length;;){for(O.avail_out===0&&(O.output=new Uint8Array(ie),O.next_out=0,O.avail_out=ie),se=on.inflate(O,ze),se===un&&le&&(se=on.inflateSetDictionary(O,le),se===Ki?se=on.inflate(O,ze):se===Fa&&(se=un));O.avail_in>0&&se===Yi&&O.state.wrap>0&&c[O.next_in]!==0;)on.inflateReset(O),se=on.inflate(O,ze);switch(se){case bn:case Fa:case un:case Bs:return this.onEnd(se),this.ended=!0,!1}if(Me=O.avail_out,O.next_out&&(O.avail_out===0||se===Yi))if(this.options.to==="string"){let ct=Zn.utf8border(O.output,O.next_out),xe=O.next_out-ct,Re=Zn.buf2string(O.output,ct);O.next_out=xe,O.avail_out=ie-xe,xe&&O.output.set(O.output.subarray(ct,ct+xe),0),this.onData(Re)}else this.onData(O.output.length===O.next_out?O.output:O.output.subarray(0,O.next_out));if(!(se===Ki&&Me===0)){if(se===Yi)return se=on.inflateEnd(this.strm),this.onEnd(se),this.ended=!0,!0;if(O.avail_in===0)break}}return!0},En.prototype.onData=function(c){this.chunks.push(c)},En.prototype.onEnd=function(c){c===Ki&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Ta.flattenChunks(this.chunks)),this.chunks=[],this.err=c,this.msg=this.strm.msg};function Dr(c,X){const O=new En(X);if(O.push(c),O.err)throw O.msg||Ae[O.err];return O.result}function rr(c,X){return X=X||{},X.raw=!0,Dr(c,X)}var _i=En,Wa=Dr,Nl=rr,tu=Dr,iu={Inflate:_i,inflate:Wa,inflateRaw:Nl,ungzip:tu};const{Deflate:nu,deflate:li,deflateRaw:Us,gzip:ha}=Sl,{Inflate:ca,inflate:Ps,inflateRaw:Or,ungzip:Cr}=iu;var Fl=nu,Is=li,Wl=Us,Gs=ha,Bn=ca,Ha=Ps,da=Or,Ns=Cr,wr=Ee,Hl={Deflate:Fl,deflate:Is,deflateRaw:Wl,gzip:Gs,Inflate:Bn,inflate:Ha,inflateRaw:da,ungzip:Ns,constants:wr}}},__webpack_module_cache__={};function __webpack_require__(k){var R=__webpack_module_cache__[k];if(R!==void 0)return R.exports;var g=__webpack_module_cache__[k]={exports:{}};return __webpack_modules__[k].call(g.exports,g,g.exports,__webpack_require__),g.exports}__webpack_require__.n=k=>{var R=k&&k.__esModule?()=>k.default:()=>k;return __webpack_require__.d(R,{a:R}),R},__webpack_require__.d=(k,R)=>{for(var g in R)__webpack_require__.o(R,g)&&!__webpack_require__.o(k,g)&&Object.defineProperty(k,g,{enumerable:!0,get:R[g]})},__webpack_require__.o=(k,R)=>Object.prototype.hasOwnProperty.call(k,R),__webpack_require__.r=k=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(k,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(k,"__esModule",{value:!0})},__webpack_require__("./src/index.ts"),__webpack_require__("./src/SurfaceWorker.js");var __webpack_exports__=__webpack_require__("./src/exporter.js");return __webpack_exports__})())}(_3Dmol$1)),_3Dmol$1.exports}require_3Dmol();function App(){const[k,R]=reactExports.useState(!0),[g,M]=reactExports.useState("vy"),[z,L]=reactExports.useState(1),B=reactExports.useRef(null),x=S=>{const T=("$3Dmol"in window?window.$3Dmol:null).createViewer(document.getElementById("viewer"),{backgroundColor:"white",width:1e3,height:1e3,antialias:!0,preserveDrawingBuffer:!0});T.zoomTo(),T.addModel(S,"pdb"),T.setStyle({cartoon:{colorscheme:{prop:"b",gradient:"roygb",min:50,max:90}}}),T.zoomTo(),T.render(),T.spin(g,z),B.current=T},b=S=>{var D;const m=(D=S.target.files)==null?void 0:D[0];if(!m)return;const T=new FileReader;T.onload=p=>{var l;const A=(l=p.target)==null?void 0:l.result;x(A)},T.readAsText(m)};return reactExports.useEffect(()=>{const S=B.current;S&&(k?S.spin(g,z):S.spin(!1))},[k,g,z]),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{id:"viewer",style:{position:"relative",width:"640px",height:"480px"}}),jsxRuntimeExports.jsx("input",{type:"file",onChange:b}),jsxRuntimeExports.jsx("button",{onClick:()=>R(S=>!S),children:"Spin"}),jsxRuntimeExports.jsxs("select",{onChange:S=>M(S.target.value),children:[jsxRuntimeExports.jsx("option",{value:"vy",children:"vy"}),jsxRuntimeExports.jsx("option",{value:"vx",children:"vx"}),jsxRuntimeExports.jsx("option",{value:"vz",children:"vz"})]}),jsxRuntimeExports.jsx("input",{type:"range",min:0,max:10,step:.1,onChange:S=>L(+S.target.value)})]})}clientExports.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(reactExports.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));
