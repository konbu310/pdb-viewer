function _mergeNamespaces(o,u){for(var a=0;a<u.length;a++){const c=u[a];if(typeof c!="string"&&!Array.isArray(c)){for(const y in c)if(y!=="default"&&!(y in o)){const S=Object.getOwnPropertyDescriptor(c,y);S&&Object.defineProperty(o,y,S.get?S:{enumerable:!0,get:()=>c[y]})}}}return Object.freeze(Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}))}(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const y of document.querySelectorAll('link[rel="modulepreload"]'))c(y);new MutationObserver(y=>{for(const S of y)if(S.type==="childList")for(const R of S.addedNodes)R.tagName==="LINK"&&R.rel==="modulepreload"&&c(R)}).observe(document,{childList:!0,subtree:!0});function a(y){const S={};return y.integrity&&(S.integrity=y.integrity),y.referrerPolicy&&(S.referrerPolicy=y.referrerPolicy),y.crossOrigin==="use-credentials"?S.credentials="include":y.crossOrigin==="anonymous"?S.credentials="omit":S.credentials="same-origin",S}function c(y){if(y.ep)return;y.ep=!0;const S=a(y);fetch(y.href,S)}})();function getDefaultExportFromCjs(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var jsxRuntime={exports:{}},reactJsxRuntime_production={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production;function requireReactJsxRuntime_production(){if(hasRequiredReactJsxRuntime_production)return reactJsxRuntime_production;hasRequiredReactJsxRuntime_production=1;var o=Symbol.for("react.transitional.element"),u=Symbol.for("react.fragment");function a(c,y,S){var R=null;if(S!==void 0&&(R=""+S),y.key!==void 0&&(R=""+y.key),"key"in y){S={};for(var m in y)m!=="key"&&(S[m]=y[m])}else S=y;return y=S.ref,{$$typeof:o,type:c,key:R,ref:y!==void 0?y:null,props:S}}return reactJsxRuntime_production.Fragment=u,reactJsxRuntime_production.jsx=a,reactJsxRuntime_production.jsxs=a,reactJsxRuntime_production}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),react={exports:{}},react_production={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production;function requireReact_production(){if(hasRequiredReact_production)return react_production;hasRequiredReact_production=1;var o=Symbol.for("react.transitional.element"),u=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),S=Symbol.for("react.consumer"),R=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),A=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),T=Symbol.iterator;function O(j){return j===null||typeof j!="object"?null:(j=T&&j[T]||j["@@iterator"],typeof j=="function"?j:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,f={};function i(j,H,Z){this.props=j,this.context=H,this.refs=f,this.updater=Z||w}i.prototype.isReactComponent={},i.prototype.setState=function(j,H){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,H,"setState")},i.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function l(){}l.prototype=i.prototype;function p(j,H,Z){this.props=j,this.context=H,this.refs=f,this.updater=Z||w}var v=p.prototype=new l;v.constructor=p,M(v,i.prototype),v.isPureReactComponent=!0;var b=Array.isArray,s={H:null,A:null,T:null,S:null,V:null},h=Object.prototype.hasOwnProperty;function E(j,H,Z,ne,se,me){return Z=me.ref,{$$typeof:o,type:j,key:H,ref:Z!==void 0?Z:null,props:me}}function x(j,H){return E(j.type,H,void 0,void 0,void 0,j.props)}function D(j){return typeof j=="object"&&j!==null&&j.$$typeof===o}function z(j){var H={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(Z){return H[Z]})}var P=/\/+/g;function G(j,H){return typeof j=="object"&&j!==null&&j.key!=null?z(""+j.key):H.toString(36)}function B(){}function K(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(B,B):(j.status="pending",j.then(function(H){j.status==="pending"&&(j.status="fulfilled",j.value=H)},function(H){j.status==="pending"&&(j.status="rejected",j.reason=H)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function k(j,H,Z,ne,se){var me=typeof j;(me==="undefined"||me==="boolean")&&(j=null);var de=!1;if(j===null)de=!0;else switch(me){case"bigint":case"string":case"number":de=!0;break;case"object":switch(j.$$typeof){case o:case u:de=!0;break;case g:return de=j._init,k(de(j._payload),H,Z,ne,se)}}if(de)return se=se(j),de=ne===""?"."+G(j,0):ne,b(se)?(Z="",de!=null&&(Z=de.replace(P,"$&/")+"/"),k(se,H,Z,"",function(pe){return pe})):se!=null&&(D(se)&&(se=x(se,Z+(se.key==null||j&&j.key===se.key?"":(""+se.key).replace(P,"$&/")+"/")+de)),H.push(se)),1;de=0;var ue=ne===""?".":ne+":";if(b(j))for(var ce=0;ce<j.length;ce++)ne=j[ce],me=ue+G(ne,ce),de+=k(ne,H,Z,me,se);else if(ce=O(j),typeof ce=="function")for(j=ce.call(j),ce=0;!(ne=j.next()).done;)ne=ne.value,me=ue+G(ne,ce++),de+=k(ne,H,Z,me,se);else if(me==="object"){if(typeof j.then=="function")return k(K(j),H,Z,ne,se);throw H=String(j),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.")}return de}function U(j,H,Z){if(j==null)return j;var ne=[],se=0;return k(j,ne,"","",function(me){return H.call(Z,me,se++)}),ne}function W(j){if(j._status===-1){var H=j._result;H=H(),H.then(function(Z){(j._status===0||j._status===-1)&&(j._status=1,j._result=Z)},function(Z){(j._status===0||j._status===-1)&&(j._status=2,j._result=Z)}),j._status===-1&&(j._status=0,j._result=H)}if(j._status===1)return j._result.default;throw j._result}var F=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var H=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(H))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)};function Y(){}return react_production.Children={map:U,forEach:function(j,H,Z){U(j,function(){H.apply(this,arguments)},Z)},count:function(j){var H=0;return U(j,function(){H++}),H},toArray:function(j){return U(j,function(H){return H})||[]},only:function(j){if(!D(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},react_production.Component=i,react_production.Fragment=a,react_production.Profiler=y,react_production.PureComponent=p,react_production.StrictMode=c,react_production.Suspense=_,react_production.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,react_production.__COMPILER_RUNTIME={__proto__:null,c:function(j){return s.H.useMemoCache(j)}},react_production.cache=function(j){return function(){return j.apply(null,arguments)}},react_production.cloneElement=function(j,H,Z){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var ne=M({},j.props),se=j.key,me=void 0;if(H!=null)for(de in H.ref!==void 0&&(me=void 0),H.key!==void 0&&(se=""+H.key),H)!h.call(H,de)||de==="key"||de==="__self"||de==="__source"||de==="ref"&&H.ref===void 0||(ne[de]=H[de]);var de=arguments.length-2;if(de===1)ne.children=Z;else if(1<de){for(var ue=Array(de),ce=0;ce<de;ce++)ue[ce]=arguments[ce+2];ne.children=ue}return E(j.type,se,void 0,void 0,me,ne)},react_production.createContext=function(j){return j={$$typeof:R,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:S,_context:j},j},react_production.createElement=function(j,H,Z){var ne,se={},me=null;if(H!=null)for(ne in H.key!==void 0&&(me=""+H.key),H)h.call(H,ne)&&ne!=="key"&&ne!=="__self"&&ne!=="__source"&&(se[ne]=H[ne]);var de=arguments.length-2;if(de===1)se.children=Z;else if(1<de){for(var ue=Array(de),ce=0;ce<de;ce++)ue[ce]=arguments[ce+2];se.children=ue}if(j&&j.defaultProps)for(ne in de=j.defaultProps,de)se[ne]===void 0&&(se[ne]=de[ne]);return E(j,me,void 0,void 0,null,se)},react_production.createRef=function(){return{current:null}},react_production.forwardRef=function(j){return{$$typeof:m,render:j}},react_production.isValidElement=D,react_production.lazy=function(j){return{$$typeof:g,_payload:{_status:-1,_result:j},_init:W}},react_production.memo=function(j,H){return{$$typeof:A,type:j,compare:H===void 0?null:H}},react_production.startTransition=function(j){var H=s.T,Z={};s.T=Z;try{var ne=j(),se=s.S;se!==null&&se(Z,ne),typeof ne=="object"&&ne!==null&&typeof ne.then=="function"&&ne.then(Y,F)}catch(me){F(me)}finally{s.T=H}},react_production.unstable_useCacheRefresh=function(){return s.H.useCacheRefresh()},react_production.use=function(j){return s.H.use(j)},react_production.useActionState=function(j,H,Z){return s.H.useActionState(j,H,Z)},react_production.useCallback=function(j,H){return s.H.useCallback(j,H)},react_production.useContext=function(j){return s.H.useContext(j)},react_production.useDebugValue=function(){},react_production.useDeferredValue=function(j,H){return s.H.useDeferredValue(j,H)},react_production.useEffect=function(j,H,Z){var ne=s.H;if(typeof Z=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ne.useEffect(j,H)},react_production.useId=function(){return s.H.useId()},react_production.useImperativeHandle=function(j,H,Z){return s.H.useImperativeHandle(j,H,Z)},react_production.useInsertionEffect=function(j,H){return s.H.useInsertionEffect(j,H)},react_production.useLayoutEffect=function(j,H){return s.H.useLayoutEffect(j,H)},react_production.useMemo=function(j,H){return s.H.useMemo(j,H)},react_production.useOptimistic=function(j,H){return s.H.useOptimistic(j,H)},react_production.useReducer=function(j,H,Z){return s.H.useReducer(j,H,Z)},react_production.useRef=function(j){return s.H.useRef(j)},react_production.useState=function(j){return s.H.useState(j)},react_production.useSyncExternalStore=function(j,H,Z){return s.H.useSyncExternalStore(j,H,Z)},react_production.useTransition=function(){return s.H.useTransition()},react_production.version="19.1.0",react_production}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production()),react.exports}var reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);var client={exports:{}},reactDomClient_production={},scheduler={exports:{}},scheduler_production={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production;function requireScheduler_production(){return hasRequiredScheduler_production||(hasRequiredScheduler_production=1,function(o){function u(U,W){var F=U.length;U.push(W);e:for(;0<F;){var Y=F-1>>>1,j=U[Y];if(0<y(j,W))U[Y]=W,U[F]=j,F=Y;else break e}}function a(U){return U.length===0?null:U[0]}function c(U){if(U.length===0)return null;var W=U[0],F=U.pop();if(F!==W){U[0]=F;e:for(var Y=0,j=U.length,H=j>>>1;Y<H;){var Z=2*(Y+1)-1,ne=U[Z],se=Z+1,me=U[se];if(0>y(ne,F))se<j&&0>y(me,ne)?(U[Y]=me,U[se]=F,Y=se):(U[Y]=ne,U[Z]=F,Y=Z);else if(se<j&&0>y(me,F))U[Y]=me,U[se]=F,Y=se;else break e}}return W}function y(U,W){var F=U.sortIndex-W.sortIndex;return F!==0?F:U.id-W.id}if(o.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var S=performance;o.unstable_now=function(){return S.now()}}else{var R=Date,m=R.now();o.unstable_now=function(){return R.now()-m}}var _=[],A=[],g=1,T=null,O=3,w=!1,M=!1,f=!1,i=!1,l=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;function b(U){for(var W=a(A);W!==null;){if(W.callback===null)c(A);else if(W.startTime<=U)c(A),W.sortIndex=W.expirationTime,u(_,W);else break;W=a(A)}}function s(U){if(f=!1,b(U),!M)if(a(_)!==null)M=!0,h||(h=!0,G());else{var W=a(A);W!==null&&k(s,W.startTime-U)}}var h=!1,E=-1,x=5,D=-1;function z(){return i?!0:!(o.unstable_now()-D<x)}function P(){if(i=!1,h){var U=o.unstable_now();D=U;var W=!0;try{e:{M=!1,f&&(f=!1,p(E),E=-1),w=!0;var F=O;try{t:{for(b(U),T=a(_);T!==null&&!(T.expirationTime>U&&z());){var Y=T.callback;if(typeof Y=="function"){T.callback=null,O=T.priorityLevel;var j=Y(T.expirationTime<=U);if(U=o.unstable_now(),typeof j=="function"){T.callback=j,b(U),W=!0;break t}T===a(_)&&c(_),b(U)}else c(_);T=a(_)}if(T!==null)W=!0;else{var H=a(A);H!==null&&k(s,H.startTime-U),W=!1}}break e}finally{T=null,O=F,w=!1}W=void 0}}finally{W?G():h=!1}}}var G;if(typeof v=="function")G=function(){v(P)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,K=B.port2;B.port1.onmessage=P,G=function(){K.postMessage(null)}}else G=function(){l(P,0)};function k(U,W){E=l(function(){U(o.unstable_now())},W)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(U){U.callback=null},o.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<U?Math.floor(1e3/U):5},o.unstable_getCurrentPriorityLevel=function(){return O},o.unstable_next=function(U){switch(O){case 1:case 2:case 3:var W=3;break;default:W=O}var F=O;O=W;try{return U()}finally{O=F}},o.unstable_requestPaint=function(){i=!0},o.unstable_runWithPriority=function(U,W){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var F=O;O=U;try{return W()}finally{O=F}},o.unstable_scheduleCallback=function(U,W,F){var Y=o.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?Y+F:Y):F=Y,U){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=F+j,U={id:g++,callback:W,priorityLevel:U,startTime:F,expirationTime:j,sortIndex:-1},F>Y?(U.sortIndex=F,u(A,U),a(_)===null&&U===a(A)&&(f?(p(E),E=-1):f=!0,k(s,F-Y))):(U.sortIndex=j,u(_,U),M||w||(M=!0,h||(h=!0,G()))),U},o.unstable_shouldYield=z,o.unstable_wrapCallback=function(U){var W=O;return function(){var F=O;O=W;try{return U.apply(this,arguments)}finally{O=F}}}}(scheduler_production)),scheduler_production}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production()),scheduler.exports}var reactDom={exports:{}},reactDom_production={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production;function requireReactDom_production(){if(hasRequiredReactDom_production)return reactDom_production;hasRequiredReactDom_production=1;var o=requireReact();function u(_){var A="https://react.dev/errors/"+_;if(1<arguments.length){A+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)A+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+_+"; visit "+A+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var c={d:{f:a,r:function(){throw Error(u(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},y=Symbol.for("react.portal");function S(_,A,g){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:y,key:T==null?null:""+T,children:_,containerInfo:A,implementation:g}}var R=o.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(_,A){if(_==="font")return"";if(typeof A=="string")return A==="use-credentials"?A:""}return reactDom_production.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=c,reactDom_production.createPortal=function(_,A){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!A||A.nodeType!==1&&A.nodeType!==9&&A.nodeType!==11)throw Error(u(299));return S(_,A,null,g)},reactDom_production.flushSync=function(_){var A=R.T,g=c.p;try{if(R.T=null,c.p=2,_)return _()}finally{R.T=A,c.p=g,c.d.f()}},reactDom_production.preconnect=function(_,A){typeof _=="string"&&(A?(A=A.crossOrigin,A=typeof A=="string"?A==="use-credentials"?A:"":void 0):A=null,c.d.C(_,A))},reactDom_production.prefetchDNS=function(_){typeof _=="string"&&c.d.D(_)},reactDom_production.preinit=function(_,A){if(typeof _=="string"&&A&&typeof A.as=="string"){var g=A.as,T=m(g,A.crossOrigin),O=typeof A.integrity=="string"?A.integrity:void 0,w=typeof A.fetchPriority=="string"?A.fetchPriority:void 0;g==="style"?c.d.S(_,typeof A.precedence=="string"?A.precedence:void 0,{crossOrigin:T,integrity:O,fetchPriority:w}):g==="script"&&c.d.X(_,{crossOrigin:T,integrity:O,fetchPriority:w,nonce:typeof A.nonce=="string"?A.nonce:void 0})}},reactDom_production.preinitModule=function(_,A){if(typeof _=="string")if(typeof A=="object"&&A!==null){if(A.as==null||A.as==="script"){var g=m(A.as,A.crossOrigin);c.d.M(_,{crossOrigin:g,integrity:typeof A.integrity=="string"?A.integrity:void 0,nonce:typeof A.nonce=="string"?A.nonce:void 0})}}else A==null&&c.d.M(_)},reactDom_production.preload=function(_,A){if(typeof _=="string"&&typeof A=="object"&&A!==null&&typeof A.as=="string"){var g=A.as,T=m(g,A.crossOrigin);c.d.L(_,g,{crossOrigin:T,integrity:typeof A.integrity=="string"?A.integrity:void 0,nonce:typeof A.nonce=="string"?A.nonce:void 0,type:typeof A.type=="string"?A.type:void 0,fetchPriority:typeof A.fetchPriority=="string"?A.fetchPriority:void 0,referrerPolicy:typeof A.referrerPolicy=="string"?A.referrerPolicy:void 0,imageSrcSet:typeof A.imageSrcSet=="string"?A.imageSrcSet:void 0,imageSizes:typeof A.imageSizes=="string"?A.imageSizes:void 0,media:typeof A.media=="string"?A.media:void 0})}},reactDom_production.preloadModule=function(_,A){if(typeof _=="string")if(A){var g=m(A.as,A.crossOrigin);c.d.m(_,{as:typeof A.as=="string"&&A.as!=="script"?A.as:void 0,crossOrigin:g,integrity:typeof A.integrity=="string"?A.integrity:void 0})}else c.d.m(_)},reactDom_production.requestFormReset=function(_){c.d.r(_)},reactDom_production.unstable_batchedUpdates=function(_,A){return _(A)},reactDom_production.useFormState=function(_,A,g){return R.H.useFormState(_,A,g)},reactDom_production.useFormStatus=function(){return R.H.useHostTransitionStatus()},reactDom_production.version="19.1.0",reactDom_production}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(u){console.error(u)}}return o(),reactDom.exports=requireReactDom_production(),reactDom.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDomClient_production;function requireReactDomClient_production(){if(hasRequiredReactDomClient_production)return reactDomClient_production;hasRequiredReactDomClient_production=1;var o=requireScheduler(),u=requireReact(),a=requireReactDom();function c(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function y(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function S(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function R(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function m(e){if(S(e)!==e)throw Error(c(188))}function _(e){var t=e.alternate;if(!t){if(t=S(e),t===null)throw Error(c(188));return t!==e?null:e}for(var n=e,d=t;;){var L=n.return;if(L===null)break;var I=L.alternate;if(I===null){if(d=L.return,d!==null){n=d;continue}break}if(L.child===I.child){for(I=L.child;I;){if(I===n)return m(L),e;if(I===d)return m(L),t;I=I.sibling}throw Error(c(188))}if(n.return!==d.return)n=L,d=I;else{for(var Q=!1,ie=L.child;ie;){if(ie===n){Q=!0,n=L,d=I;break}if(ie===d){Q=!0,d=L,n=I;break}ie=ie.sibling}if(!Q){for(ie=I.child;ie;){if(ie===n){Q=!0,n=I,d=L;break}if(ie===d){Q=!0,d=I,n=L;break}ie=ie.sibling}if(!Q)throw Error(c(189))}}if(n.alternate!==d)throw Error(c(190))}if(n.tag!==3)throw Error(c(188));return n.stateNode.current===n?e:t}function A(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=A(e),t!==null)return t;e=e.sibling}return null}var g=Object.assign,T=Symbol.for("react.element"),O=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),p=Symbol.for("react.consumer"),v=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),s=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),z=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function G(e){return e===null||typeof e!="object"?null:(e=P&&e[P]||e["@@iterator"],typeof e=="function"?e:null)}var B=Symbol.for("react.client.reference");function K(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===B?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case M:return"Fragment";case i:return"Profiler";case f:return"StrictMode";case s:return"Suspense";case h:return"SuspenseList";case D:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case w:return"Portal";case v:return(e.displayName||"Context")+".Provider";case p:return(e._context.displayName||"Context")+".Consumer";case b:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case E:return t=e.displayName||null,t!==null?t:K(e.type)||"Memo";case x:t=e._payload,e=e._init;try{return K(e(t))}catch{}}return null}var k=Array.isArray,U=u.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F={pending:!1,data:null,method:null,action:null},Y=[],j=-1;function H(e){return{current:e}}function Z(e){0>j||(e.current=Y[j],Y[j]=null,j--)}function ne(e,t){j++,Y[j]=e.current,e.current=t}var se=H(null),me=H(null),de=H(null),ue=H(null);function ce(e,t){switch(ne(de,t),ne(me,e),ne(se,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Td(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Td(t),e=Md(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Z(se),ne(se,e)}function pe(){Z(se),Z(me),Z(de)}function De(e){e.memoizedState!==null&&ne(ue,e);var t=se.current,n=Md(t,e.type);t!==n&&(ne(me,e),ne(se,n))}function we(e){me.current===e&&(Z(se),Z(me)),ue.current===e&&(Z(ue),ul._currentValue=F)}var je=Object.prototype.hasOwnProperty,ye=o.unstable_scheduleCallback,he=o.unstable_cancelCallback,Ce=o.unstable_shouldYield,ke=o.unstable_requestPaint,Xe=o.unstable_now,nt=o.unstable_getCurrentPriorityLevel,at=o.unstable_ImmediatePriority,rt=o.unstable_UserBlockingPriority,et=o.unstable_NormalPriority,Je=o.unstable_LowPriority,$e=o.unstable_IdlePriority,We=o.log,ut=o.unstable_setDisableYieldValue,ot=null,J=null;function re(e){if(typeof We=="function"&&ut(e),J&&typeof J.setStrictMode=="function")try{J.setStrictMode(ot,e)}catch{}}var le=Math.clz32?Math.clz32:Ye,Re=Math.log,xe=Math.LN2;function Ye(e){return e>>>=0,e===0?32:31-(Re(e)/xe|0)|0}var Ge=256,q=4194304;function _e(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Oe(e,t,n){var d=e.pendingLanes;if(d===0)return 0;var L=0,I=e.suspendedLanes,Q=e.pingedLanes;e=e.warmLanes;var ie=d&134217727;return ie!==0?(d=ie&~I,d!==0?L=_e(d):(Q&=ie,Q!==0?L=_e(Q):n||(n=ie&~e,n!==0&&(L=_e(n))))):(ie=d&~I,ie!==0?L=_e(ie):Q!==0?L=_e(Q):n||(n=d&~e,n!==0&&(L=_e(n)))),L===0?0:t!==0&&t!==L&&(t&I)===0&&(I=L&-L,n=t&-t,I>=n||I===32&&(n&4194048)!==0)?t:L}function Ke(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function be(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ue(){var e=Ge;return Ge<<=1,(Ge&4194048)===0&&(Ge=256),e}function ee(){var e=q;return q<<=1,(q&62914560)===0&&(q=4194304),e}function He(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function st(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function V(e,t,n,d,L,I){var Q=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var ie=e.entanglements,ge=e.expirationTimes,Ne=e.hiddenUpdates;for(n=Q&~n;0<n;){var Ze=31-le(n),qe=1<<Ze;ie[Ze]=0,ge[Ze]=-1;var Fe=Ne[Ze];if(Fe!==null)for(Ne[Ze]=null,Ze=0;Ze<Fe.length;Ze++){var Ve=Fe[Ze];Ve!==null&&(Ve.lane&=-536870913)}n&=~qe}d!==0&&Te(e,d,0),I!==0&&L===0&&e.tag!==0&&(e.suspendedLanes|=I&~(Q&~t))}function Te(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var d=31-le(t);e.entangledLanes|=t,e.entanglements[d]=e.entanglements[d]|1073741824|n&4194090}function Se(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var d=31-le(n),L=1<<d;L&t|e[d]&t&&(e[d]|=t),n&=~L}}function te(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function ve(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Pe(){var e=W.p;return e!==0?e:(e=window.event,e===void 0?32:Yd(e.type))}function ft(e,t){var n=W.p;try{return W.p=e,t()}finally{W.p=n}}var lt=Math.random().toString(36).slice(2),it="__reactFiber$"+lt,vt="__reactProps$"+lt,ir="__reactContainer$"+lt,Tt="__reactEvents$"+lt,Mt="__reactListeners$"+lt,wt="__reactHandles$"+lt,nr="__reactResources$"+lt,Ut="__reactMarker$"+lt;function Hr(e){delete e[it],delete e[vt],delete e[Tt],delete e[Mt],delete e[wt]}function Ar(e){var t=e[it];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ir]||n[it]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Ld(e);e!==null;){if(n=e[it])return n;e=Ld(e)}return t}e=n,n=e.parentNode}return null}function Ht(e){if(e=e[it]||e[ir]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function Kt(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(c(33))}function Ft(e){var t=e[nr];return t||(t=e[nr]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Gt(e){e[Ut]=!0}var vr=new Set,Ti={};function ei(e,t){Br(e,t),Br(e+"Capture",t)}function Br(e,t){for(Ti[e]=t,e=0;e<t.length;e++)vr.add(t[e])}var Ea=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),$n={},Qn={};function Aa(e){return je.call(Qn,e)?!0:je.call($n,e)?!1:Ea.test(e)?Qn[e]=!0:($n[e]=!0,!1)}function ji(e,t,n){if(Aa(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var d=t.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function gn(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function pi(e,t,n,d){if(d===null)e.removeAttribute(n);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+d)}}var cs,pl;function vn(e){if(cs===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);cs=t&&t[1]||"",pl=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+cs+e+pl}var Dt=!1;function ti(e,t){if(!e||Dt)return"";Dt=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(t){var qe=function(){throw Error()};if(Object.defineProperty(qe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(qe,[])}catch(Ve){var Fe=Ve}Reflect.construct(e,[],qe)}else{try{qe.call()}catch(Ve){Fe=Ve}e.call(qe.prototype)}}else{try{throw Error()}catch(Ve){Fe=Ve}(qe=e())&&typeof qe.catch=="function"&&qe.catch(function(){})}}catch(Ve){if(Ve&&Fe&&typeof Ve.stack=="string")return[Ve.stack,Fe.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var L=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");L&&L.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var I=d.DetermineComponentFrameRoot(),Q=I[0],ie=I[1];if(Q&&ie){var ge=Q.split(`
`),Ne=ie.split(`
`);for(L=d=0;d<ge.length&&!ge[d].includes("DetermineComponentFrameRoot");)d++;for(;L<Ne.length&&!Ne[L].includes("DetermineComponentFrameRoot");)L++;if(d===ge.length||L===Ne.length)for(d=ge.length-1,L=Ne.length-1;1<=d&&0<=L&&ge[d]!==Ne[L];)L--;for(;1<=d&&0<=L;d--,L--)if(ge[d]!==Ne[L]){if(d!==1||L!==1)do if(d--,L--,0>L||ge[d]!==Ne[L]){var Ze=`
`+ge[d].replace(" at new "," at ");return e.displayName&&Ze.includes("<anonymous>")&&(Ze=Ze.replace("<anonymous>",e.displayName)),Ze}while(1<=d&&0<=L);break}}}finally{Dt=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?vn(n):""}function ri(e){switch(e.tag){case 26:case 27:case 5:return vn(e.type);case 16:return vn("Lazy");case 13:return vn("Suspense");case 19:return vn("SuspenseList");case 0:case 15:return ti(e.type,!1);case 11:return ti(e.type.render,!1);case 1:return ti(e.type,!0);case 31:return vn("Activity");default:return""}}function gl(e){try{var t="";do t+=ri(e),e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function mr(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Sa(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function us(e){var t=Sa(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),d=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var L=n.get,I=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return L.call(this)},set:function(Q){d=""+Q,I.call(this,Q)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return d},setValue:function(Q){d=""+Q},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function xn(e){e._valueTracker||(e._valueTracker=us(e))}function wa(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),d="";return e&&(d=Sa(e)?e.checked?"true":"false":e.value),e=d,e!==n?(t.setValue(e),!0):!1}function _n(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Gi=/[\n"\\]/g;function xr(e){return e.replace(Gi,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function pr(e,t,n,d,L,I,Q,ie){e.name="",Q!=null&&typeof Q!="function"&&typeof Q!="symbol"&&typeof Q!="boolean"?e.type=Q:e.removeAttribute("type"),t!=null?Q==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+mr(t)):e.value!==""+mr(t)&&(e.value=""+mr(t)):Q!=="submit"&&Q!=="reset"||e.removeAttribute("value"),t!=null?gi(e,Q,mr(t)):n!=null?gi(e,Q,mr(n)):d!=null&&e.removeAttribute("value"),L==null&&I!=null&&(e.defaultChecked=!!I),L!=null&&(e.checked=L&&typeof L!="function"&&typeof L!="symbol"),ie!=null&&typeof ie!="function"&&typeof ie!="symbol"&&typeof ie!="boolean"?e.name=""+mr(ie):e.removeAttribute("name")}function Wi(e,t,n,d,L,I,Q,ie){if(I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"&&(e.type=I),t!=null||n!=null){if(!(I!=="submit"&&I!=="reset"||t!=null))return;n=n!=null?""+mr(n):"",t=t!=null?""+mr(t):n,ie||t===e.value||(e.value=t),e.defaultValue=t}d=d??L,d=typeof d!="function"&&typeof d!="symbol"&&!!d,e.checked=ie?e.checked:!!d,e.defaultChecked=!!d,Q!=null&&typeof Q!="function"&&typeof Q!="symbol"&&typeof Q!="boolean"&&(e.name=Q)}function gi(e,t,n){t==="number"&&_n(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function kr(e,t,n,d){if(e=e.options,t){t={};for(var L=0;L<n.length;L++)t["$"+n[L]]=!0;for(n=0;n<e.length;n++)L=t.hasOwnProperty("$"+e[n].value),e[n].selected!==L&&(e[n].selected=L),L&&d&&(e[n].defaultSelected=!0)}else{for(n=""+mr(n),t=null,L=0;L<e.length;L++){if(e[L].value===n){e[L].selected=!0,d&&(e[L].defaultSelected=!0);return}t!==null||e[L].disabled||(t=e[L])}t!==null&&(t.selected=!0)}}function vl(e,t,n){if(t!=null&&(t=""+mr(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+mr(n):""}function Mi(e,t,n,d){if(t==null){if(d!=null){if(n!=null)throw Error(c(92));if(k(d)){if(1<d.length)throw Error(c(93));d=d[0]}n=d}n==null&&(n=""),t=n}n=mr(t),e.defaultValue=n,d=e.textContent,d===n&&d!==""&&d!==null&&(e.value=d)}function Vi(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Ri=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function xl(e,t,n){var d=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?d?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":d?e.setProperty(t,n):typeof n!="number"||n===0||Ri.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function zo(e,t,n){if(t!=null&&typeof t!="object")throw Error(c(62));if(e=e.style,n!=null){for(var d in n)!n.hasOwnProperty(d)||t!=null&&t.hasOwnProperty(d)||(d.indexOf("--")===0?e.setProperty(d,""):d==="float"?e.cssFloat="":e[d]="");for(var L in t)d=t[L],t.hasOwnProperty(L)&&n[L]!==d&&xl(e,L,d)}else for(var I in t)t.hasOwnProperty(I)&&xl(e,I,t[I])}function ii(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Dr=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Lr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function It(e){return Lr.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Hi=null;function Jn(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ki=null,Kr=null;function fs(e){var t=Ht(e);if(t&&(e=t.stateNode)){var n=e[vt]||null;e:switch(e=t.stateNode,t.type){case"input":if(pr(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+xr(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var d=n[t];if(d!==e&&d.form===e.form){var L=d[vt]||null;if(!L)throw Error(c(90));pr(d,L.value,L.defaultValue,L.defaultValue,L.checked,L.defaultChecked,L.type,L.name)}}for(t=0;t<n.length;t++)d=n[t],d.form===e.form&&wa(d)}break e;case"textarea":vl(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&kr(e,!!n.multiple,t,!1)}}}var qn=!1;function Ki(e,t,n){if(qn)return e(t,n);qn=!0;try{var d=e(t);return d}finally{if(qn=!1,(ki!==null||Kr!==null)&&(fo(),ki&&(t=ki,e=Kr,Kr=ki=null,fs(t),e)))for(t=0;t<e.length;t++)fs(e[t])}}function ea(e,t){var n=e.stateNode;if(n===null)return null;var d=n[vt]||null;if(d===null)return null;n=d[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(e=e.type,d=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!d;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(c(231,t,typeof n));return n}var vi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ur=!1;if(vi)try{var xi={};Object.defineProperty(xi,"passive",{get:function(){Ur=!0}}),window.addEventListener("test",xi,xi),window.removeEventListener("test",xi,xi)}catch{Ur=!1}var Oi=null,ds=null,Di=null;function hs(){if(Di)return Di;var e,t=ds,n=t.length,d,L="value"in Oi?Oi.value:Oi.textContent,I=L.length;for(e=0;e<n&&t[e]===L[e];e++);var Q=n-e;for(d=1;d<=Q&&t[n-d]===L[I-d];d++);return Di=L.slice(e,1<d?1-d:void 0)}function ta(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ca(){return!0}function ms(){return!1}function Mr(e){function t(n,d,L,I,Q){this._reactName=n,this._targetInst=L,this.type=d,this.nativeEvent=I,this.target=Q,this.currentTarget=null;for(var ie in e)e.hasOwnProperty(ie)&&(n=e[ie],this[ie]=n?n(I):I[ie]);return this.isDefaultPrevented=(I.defaultPrevented!=null?I.defaultPrevented:I.returnValue===!1)?Ca:ms,this.isPropagationStopped=ms,this}return g(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ca)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ca)},persist:function(){},isPersistent:Ca}),t}var Yi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ta=Mr(Yi),ra=g({},Yi,{view:0,detail:0}),Po=Mr(ra),ps,gs,ia,Ma=g({},ra,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zi,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ia&&(ia&&e.type==="mousemove"?(ps=e.screenX-ia.screenX,gs=e.screenY-ia.screenY):gs=ps=0,ia=e),ps)},movementY:function(e){return"movementY"in e?e.movementY:gs}}),_l=Mr(Ma),No=g({},Ma,{dataTransfer:0}),Io=Mr(No),Bo=g({},ra,{relatedTarget:0}),Xi=Mr(Bo),Uo=g({},Yi,{animationName:0,elapsedTime:0,pseudoElement:0}),Fo=Mr(Uo),jo=g({},Yi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ra=Mr(jo),bl=g({},Yi,{data:0}),bn=Mr(bl),Go={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wo={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Vo={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ho(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Vo[e])?!!t[e]:!1}function Zi(){return Ho}var ko=g({},ra,{key:function(e){if(e.key){var t=Go[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ta(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Wo[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zi,charCode:function(e){return e.type==="keypress"?ta(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ta(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),yl=Mr(ko),El=g({},Ma,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Al=Mr(El),Ko=g({},ra,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zi}),Yo=Mr(Ko),Xo=g({},Yi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Oa=Mr(Xo),Zo=g({},Ma,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),$o=Mr(Zo),Qo=g({},Yi,{newState:0,oldState:0}),Jo=Mr(Qo),na=[9,13,27,32],aa=vi&&"CompositionEvent"in window,sa=null;vi&&"documentMode"in document&&(sa=document.documentMode);var qo=vi&&"TextEvent"in window&&!sa,Sl=vi&&(!aa||sa&&8<sa&&11>=sa),wl=" ",Cl=!1;function Tl(e,t){switch(e){case"keyup":return na.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ml(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var _i=!1;function ec(e,t){switch(e){case"compositionend":return Ml(t);case"keypress":return t.which!==32?null:(Cl=!0,wl);case"textInput":return e=t.data,e===wl&&Cl?null:e;default:return null}}function tc(e,t){if(_i)return e==="compositionend"||!aa&&Tl(e,t)?(e=hs(),Di=ds=Oi=null,_i=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Sl&&t.locale!=="ko"?null:t.data;default:return null}}var yn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vs(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!yn[e.type]:t==="textarea"}function xs(e,t,n,d){ki?Kr?Kr.push(d):Kr=[d]:ki=d,t=xo(t,"onChange"),0<t.length&&(n=new Ta("onChange","change",null,n,d),e.push({event:n,listeners:t}))}var En=null,$i=null;function Rl(e){Ed(e,0)}function Da(e){var t=Kt(e);if(wa(t))return e}function Ol(e,t){if(e==="change")return t}var Dl=!1;if(vi){var _s;if(vi){var Ll="oninput"in document;if(!Ll){var An=document.createElement("div");An.setAttribute("oninput","return;"),Ll=typeof An.oninput=="function"}_s=Ll}else _s=!1;Dl=_s&&(!document.documentMode||9<document.documentMode)}function zl(){En&&(En.detachEvent("onpropertychange",bs),$i=En=null)}function bs(e){if(e.propertyName==="value"&&Da($i)){var t=[];xs(t,$i,e,Jn(e)),Ki(Rl,t)}}function Pl(e,t,n){e==="focusin"?(zl(),En=t,$i=n,En.attachEvent("onpropertychange",bs)):e==="focusout"&&zl()}function Nl(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Da($i)}function rc(e,t){if(e==="click")return Da(t)}function La(e,t){if(e==="input"||e==="change")return Da(t)}function Qi(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var zr=typeof Object.is=="function"?Object.is:Qi;function la(e,t){if(zr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),d=Object.keys(t);if(n.length!==d.length)return!1;for(d=0;d<n.length;d++){var L=n[d];if(!je.call(t,L)||!zr(e[L],t[L]))return!1}return!0}function Pr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ys(e,t){var n=Pr(e);e=0;for(var d;n;){if(n.nodeType===3){if(d=e+n.textContent.length,e<=t&&d>=t)return{node:n,offset:t-e};e=d}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Pr(n)}}function Es(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Es(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Il(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=_n(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=_n(e.document)}return t}function za(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Pa=vi&&"documentMode"in document&&11>=document.documentMode,Ji=null,Na=null,Sn=null,Ia=!1;function As(e,t,n){var d=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ia||Ji==null||Ji!==_n(d)||(d=Ji,"selectionStart"in d&&za(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Sn&&la(Sn,d)||(Sn=d,d=xo(Na,"onSelect"),0<d.length&&(t=new Ta("onSelect","select",null,t,n),e.push({event:t,listeners:d}),t.target=Ji)))}function Li(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var qi={animationend:Li("Animation","AnimationEnd"),animationiteration:Li("Animation","AnimationIteration"),animationstart:Li("Animation","AnimationStart"),transitionrun:Li("Transition","TransitionRun"),transitionstart:Li("Transition","TransitionStart"),transitioncancel:Li("Transition","TransitionCancel"),transitionend:Li("Transition","TransitionEnd")},Ba={},Ss={};vi&&(Ss=document.createElement("div").style,"AnimationEvent"in window||(delete qi.animationend.animation,delete qi.animationiteration.animation,delete qi.animationstart.animation),"TransitionEvent"in window||delete qi.transitionend.transition);function ni(e){if(Ba[e])return Ba[e];if(!qi[e])return e;var t=qi[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Ss)return Ba[e]=t[n];return e}var ai=ni("animationend"),Ua=ni("animationiteration"),ws=ni("animationstart"),Cs=ni("transitionrun"),Bl=ni("transitionstart"),Ul=ni("transitioncancel"),Ts=ni("transitionend"),Ms=new Map,wn="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");wn.push("scrollEnd");function Rr(e,t){Ms.set(e,t),ei(t,[e])}var Rs=new WeakMap;function Nr(e,t){if(typeof e=="object"&&e!==null){var n=Rs.get(e);return n!==void 0?n:(t={value:e,source:t,stack:gl(t)},Rs.set(e,t),t)}return{value:e,source:t,stack:gl(t)}}var Ir=[],en=0,Fa=0;function Cn(){for(var e=en,t=Fa=en=0;t<e;){var n=Ir[t];Ir[t++]=null;var d=Ir[t];Ir[t++]=null;var L=Ir[t];Ir[t++]=null;var I=Ir[t];if(Ir[t++]=null,d!==null&&L!==null){var Q=d.pending;Q===null?L.next=L:(L.next=Q.next,Q.next=L),d.pending=L}I!==0&&Os(n,L,I)}}function oa(e,t,n,d){Ir[en++]=e,Ir[en++]=t,Ir[en++]=n,Ir[en++]=d,Fa|=d,e.lanes|=d,e=e.alternate,e!==null&&(e.lanes|=d)}function ja(e,t,n,d){return oa(e,t,n,d),ca(e)}function Yt(e,t){return oa(e,null,null,t),ca(e)}function Os(e,t,n){e.lanes|=n;var d=e.alternate;d!==null&&(d.lanes|=n);for(var L=!1,I=e.return;I!==null;)I.childLanes|=n,d=I.alternate,d!==null&&(d.childLanes|=n),I.tag===22&&(e=I.stateNode,e===null||e._visibility&1||(L=!0)),e=I,I=I.return;return e.tag===3?(I=e.stateNode,L&&t!==null&&(L=31-le(n),e=I.hiddenUpdates,d=e[L],d===null?e[L]=[t]:d.push(t),t.lane=n|536870912),I):null}function ca(e){if(50<rl)throw rl=0,Yc=null,Error(c(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Tn={};function ic(e,t,n,d){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fr(e,t,n,d){return new ic(e,t,n,d)}function Ds(e){return e=e.prototype,!(!e||!e.isReactComponent)}function si(e,t){var n=e.alternate;return n===null?(n=Fr(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Fl(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function li(e,t,n,d,L,I){var Q=0;if(d=e,typeof e=="function")Ds(e)&&(Q=1);else if(typeof e=="string")Q=Zh(e,n,se.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case D:return e=Fr(31,n,t,L),e.elementType=D,e.lanes=I,e;case M:return zi(n.children,L,I,t);case f:Q=8,L|=24;break;case i:return e=Fr(12,n,t,L|2),e.elementType=i,e.lanes=I,e;case s:return e=Fr(13,n,t,L),e.elementType=s,e.lanes=I,e;case h:return e=Fr(19,n,t,L),e.elementType=h,e.lanes=I,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case l:case v:Q=10;break e;case p:Q=9;break e;case b:Q=11;break e;case E:Q=14;break e;case x:Q=16,d=null;break e}Q=29,n=Error(c(130,e===null?"null":typeof e,"")),d=null}return t=Fr(Q,n,t,L),t.elementType=e,t.type=d,t.lanes=I,t}function zi(e,t,n,d){return e=Fr(7,e,d,t),e.lanes=n,e}function Ga(e,t,n){return e=Fr(6,e,null,t),e.lanes=n,e}function Wa(e,t,n){return t=Fr(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var tn=[],Mn=0,ua=null,Rn=0,Or=[],jr=0,Pi=null,bi=1,yi="";function rn(e,t){tn[Mn++]=Rn,tn[Mn++]=ua,ua=e,Rn=t}function jl(e,t,n){Or[jr++]=bi,Or[jr++]=yi,Or[jr++]=Pi,Pi=e;var d=bi;e=yi;var L=32-le(d)-1;d&=~(1<<L),n+=1;var I=32-le(t)+L;if(30<I){var Q=L-L%5;I=(d&(1<<Q)-1).toString(32),d>>=Q,L-=Q,bi=1<<32-le(t)+L|n<<L|d,yi=I+e}else bi=1<<I|n<<L|d,yi=e}function Ls(e){e.return!==null&&(rn(e,1),jl(e,1,0))}function zs(e){for(;e===ua;)ua=tn[--Mn],tn[Mn]=null,Rn=tn[--Mn],tn[Mn]=null;for(;e===Pi;)Pi=Or[--jr],Or[jr]=null,yi=Or[--jr],Or[jr]=null,bi=Or[--jr],Or[jr]=null}var Sr=null,ar=null,Wt=!1,nn=null,oi=!1,Ps=Error(c(519));function an(e){var t=Error(c(418,""));throw ha(Nr(t,e)),Ps}function Gl(e){var t=e.stateNode,n=e.type,d=e.memoizedProps;switch(t[it]=e,t[vt]=d,n){case"dialog":Nt("cancel",t),Nt("close",t);break;case"iframe":case"object":case"embed":Nt("load",t);break;case"video":case"audio":for(n=0;n<nl.length;n++)Nt(nl[n],t);break;case"source":Nt("error",t);break;case"img":case"image":case"link":Nt("error",t),Nt("load",t);break;case"details":Nt("toggle",t);break;case"input":Nt("invalid",t),Wi(t,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0),xn(t);break;case"select":Nt("invalid",t);break;case"textarea":Nt("invalid",t),Mi(t,d.value,d.defaultValue,d.children),xn(t)}n=d.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||d.suppressHydrationWarning===!0||Cd(t.textContent,n)?(d.popover!=null&&(Nt("beforetoggle",t),Nt("toggle",t)),d.onScroll!=null&&Nt("scroll",t),d.onScrollEnd!=null&&Nt("scrollend",t),d.onClick!=null&&(t.onclick=_o),t=!0):t=!1,t||an(e)}function ci(e){for(Sr=e.return;Sr;)switch(Sr.tag){case 5:case 13:oi=!1;return;case 27:case 3:oi=!0;return;default:Sr=Sr.return}}function fa(e){if(e!==Sr)return!1;if(!Wt)return ci(e),Wt=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||cu(e.type,e.memoizedProps)),n=!n),n&&ar&&an(e),ci(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(n=e.data,n==="/$"){if(t===0){ar=Ci(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++;e=e.nextSibling}ar=null}}else t===27?(t=ar,Hn(e.type)?(e=hu,hu=null,ar=e):ar=t):ar=Sr?Ci(e.stateNode.nextSibling):null;return!0}function da(){ar=Sr=null,Wt=!1}function Ns(){var e=nn;return e!==null&&(Vr===null?Vr=e:Vr.push.apply(Vr,e),nn=null),e}function ha(e){nn===null?nn=[e]:nn.push(e)}var Is=H(null),Yr=null,Xr=null;function ui(e,t,n){ne(Is,t._currentValue),t._currentValue=n}function Ei(e){e._currentValue=Is.current,Z(Is)}function Va(e,t,n){for(;e!==null;){var d=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,d!==null&&(d.childLanes|=t)):d!==null&&(d.childLanes&t)!==t&&(d.childLanes|=t),e===n)break;e=e.return}}function Bs(e,t,n,d){var L=e.child;for(L!==null&&(L.return=e);L!==null;){var I=L.dependencies;if(I!==null){var Q=L.child;I=I.firstContext;e:for(;I!==null;){var ie=I;I=L;for(var ge=0;ge<t.length;ge++)if(ie.context===t[ge]){I.lanes|=n,ie=I.alternate,ie!==null&&(ie.lanes|=n),Va(I.return,n,e),d||(Q=null);break e}I=ie.next}}else if(L.tag===18){if(Q=L.return,Q===null)throw Error(c(341));Q.lanes|=n,I=Q.alternate,I!==null&&(I.lanes|=n),Va(Q,n,e),Q=null}else Q=L.child;if(Q!==null)Q.return=L;else for(Q=L;Q!==null;){if(Q===e){Q=null;break}if(L=Q.sibling,L!==null){L.return=Q.return,Q=L;break}Q=Q.return}L=Q}}function Ai(e,t,n,d){e=null;for(var L=t,I=!1;L!==null;){if(!I){if((L.flags&524288)!==0)I=!0;else if((L.flags&262144)!==0)break}if(L.tag===10){var Q=L.alternate;if(Q===null)throw Error(c(387));if(Q=Q.memoizedProps,Q!==null){var ie=L.type;zr(L.pendingProps.value,Q.value)||(e!==null?e.push(ie):e=[ie])}}else if(L===ue.current){if(Q=L.alternate,Q===null)throw Error(c(387));Q.memoizedState.memoizedState!==L.memoizedState.memoizedState&&(e!==null?e.push(ul):e=[ul])}L=L.return}e!==null&&Bs(t,e,n,d),t.flags|=262144}function On(e){for(e=e.firstContext;e!==null;){if(!zr(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function sn(e){Yr=e,Xr=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function _r(e){return Wl(Yr,e)}function Ha(e,t){return Yr===null&&sn(e),Wl(e,t)}function Wl(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},Xr===null){if(e===null)throw Error(c(308));Xr=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Xr=Xr.next=t;return n}var nc=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,d){e.push(d)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},ac=o.unstable_scheduleCallback,sc=o.unstable_NormalPriority,cr={$$typeof:v,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Us(){return{controller:new nc,data:new Map,refCount:0}}function ma(e){e.refCount--,e.refCount===0&&ac(sc,function(){e.controller.abort()})}var pa=null,Fs=0,Dn=0,Ln=null;function Vl(e,t){if(pa===null){var n=pa=[];Fs=0,Dn=eu(),Ln={status:"pending",value:void 0,then:function(d){n.push(d)}}}return Fs++,t.then(js,js),t}function js(){if(--Fs===0&&pa!==null){Ln!==null&&(Ln.status="fulfilled");var e=pa;pa=null,Dn=0,Ln=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Hl(e,t){var n=[],d={status:"pending",value:null,reason:null,then:function(L){n.push(L)}};return e.then(function(){d.status="fulfilled",d.value=t;for(var L=0;L<n.length;L++)(0,n[L])(t)},function(L){for(d.status="rejected",d.reason=L,L=0;L<n.length;L++)(0,n[L])(void 0)}),d}var Gs=U.S;U.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&Vl(e,t),Gs!==null&&Gs(e,t)};var Ni=H(null);function ka(){var e=Ni.current;return e!==null?e:rr.pooledCache}function ga(e,t){t===null?ne(Ni,Ni.current):ne(Ni,t.pool)}function Ws(){var e=ka();return e===null?null:{parent:cr._currentValue,pool:e}}var zn=Error(c(460)),kl=Error(c(474)),C=Error(c(542)),$={then:function(){}};function N(e){return e=e.status,e==="fulfilled"||e==="rejected"}function ae(){}function fe(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(ae,ae),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Me(e),e;default:if(typeof t.status=="string")t.then(ae,ae);else{if(e=rr,e!==null&&100<e.shellSuspendCounter)throw Error(c(482));e=t,e.status="pending",e.then(function(d){if(t.status==="pending"){var L=t;L.status="fulfilled",L.value=d}},function(d){if(t.status==="pending"){var L=t;L.status="rejected",L.reason=d}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Me(e),e}throw oe=t,zn}}var oe=null;function Be(){if(oe===null)throw Error(c(459));var e=oe;return oe=null,e}function Me(e){if(e===zn||e===C)throw Error(c(483))}var mt=!1;function Ee(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ie(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Rt(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function dt(e,t,n){var d=e.updateQueue;if(d===null)return null;if(d=d.shared,(Zt&2)!==0){var L=d.pending;return L===null?t.next=t:(t.next=L.next,L.next=t),d.pending=t,t=ca(e),Os(e,null,n),t}return oa(e,d,t,n),ca(e)}function tt(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var d=t.lanes;d&=e.pendingLanes,n|=d,t.lanes=n,Se(e,n)}}function _t(e,t){var n=e.updateQueue,d=e.alternate;if(d!==null&&(d=d.updateQueue,n===d)){var L=null,I=null;if(n=n.firstBaseUpdate,n!==null){do{var Q={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};I===null?L=I=Q:I=I.next=Q,n=n.next}while(n!==null);I===null?L=I=t:I=I.next=t}else L=I=t;n={baseState:d.baseState,firstBaseUpdate:L,lastBaseUpdate:I,shared:d.shared,callbacks:d.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var er=!1;function Ot(){if(er){var e=Ln;if(e!==null)throw e}}function St(e,t,n,d){er=!1;var L=e.updateQueue;mt=!1;var I=L.firstBaseUpdate,Q=L.lastBaseUpdate,ie=L.shared.pending;if(ie!==null){L.shared.pending=null;var ge=ie,Ne=ge.next;ge.next=null,Q===null?I=Ne:Q.next=Ne,Q=ge;var Ze=e.alternate;Ze!==null&&(Ze=Ze.updateQueue,ie=Ze.lastBaseUpdate,ie!==Q&&(ie===null?Ze.firstBaseUpdate=Ne:ie.next=Ne,Ze.lastBaseUpdate=ge))}if(I!==null){var qe=L.baseState;Q=0,Ze=Ne=ge=null,ie=I;do{var Fe=ie.lane&-536870913,Ve=Fe!==ie.lane;if(Ve?(jt&Fe)===Fe:(d&Fe)===Fe){Fe!==0&&Fe===Dn&&(er=!0),Ze!==null&&(Ze=Ze.next={lane:0,tag:ie.tag,payload:ie.payload,callback:null,next:null});e:{var At=e,yt=ie;Fe=t;var qt=n;switch(yt.tag){case 1:if(At=yt.payload,typeof At=="function"){qe=At.call(qt,qe,Fe);break e}qe=At;break e;case 3:At.flags=At.flags&-65537|128;case 0:if(At=yt.payload,Fe=typeof At=="function"?At.call(qt,qe,Fe):At,Fe==null)break e;qe=g({},qe,Fe);break e;case 2:mt=!0}}Fe=ie.callback,Fe!==null&&(e.flags|=64,Ve&&(e.flags|=8192),Ve=L.callbacks,Ve===null?L.callbacks=[Fe]:Ve.push(Fe))}else Ve={lane:Fe,tag:ie.tag,payload:ie.payload,callback:ie.callback,next:null},Ze===null?(Ne=Ze=Ve,ge=qe):Ze=Ze.next=Ve,Q|=Fe;if(ie=ie.next,ie===null){if(ie=L.shared.pending,ie===null)break;Ve=ie,ie=Ve.next,Ve.next=null,L.lastBaseUpdate=Ve,L.shared.pending=null}}while(!0);Ze===null&&(ge=qe),L.baseState=ge,L.firstBaseUpdate=Ne,L.lastBaseUpdate=Ze,I===null&&(L.shared.lanes=0),jn|=Q,e.lanes=Q,e.memoizedState=qe}}function Vt(e,t){if(typeof e!="function")throw Error(c(191,e));e.call(t)}function Lt(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)Vt(n[e],t)}var ht=H(null),Bt=H(0);function ur(e,t){e=mn,ne(Bt,e),ne(ht,t),mn=e|t.baseLanes}function bt(){ne(Bt,mn),ne(ht,ht.current)}function Xt(){mn=Bt.current,Z(ht),Z(Bt)}var Ct=0,ct=null,pt=null,Qt=null,va=!1,Si=!1,fi=!1,Kl=0,Vs=0,Ka=null,qd=0;function fr(){throw Error(c(321))}function lc(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!zr(e[n],t[n]))return!1;return!0}function oc(e,t,n,d,L,I){return Ct=I,ct=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,U.H=e===null||e.memoizedState===null?sf:lf,fi=!1,I=n(d,L),fi=!1,Si&&(I=Su(t,n,d,L)),Au(e),I}function Au(e){U.H=Jl;var t=pt!==null&&pt.next!==null;if(Ct=0,Qt=pt=ct=null,va=!1,Vs=0,Ka=null,t)throw Error(c(300));e===null||br||(e=e.dependencies,e!==null&&On(e)&&(br=!0))}function Su(e,t,n,d){ct=e;var L=0;do{if(Si&&(Ka=null),Vs=0,Si=!1,25<=L)throw Error(c(301));if(L+=1,Qt=pt=null,e.updateQueue!=null){var I=e.updateQueue;I.lastEffect=null,I.events=null,I.stores=null,I.memoCache!=null&&(I.memoCache.index=0)}U.H=sh,I=t(n,d)}while(Si);return I}function eh(){var e=U.H,t=e.useState()[0];return t=typeof t.then=="function"?Hs(t):t,e=e.useState()[0],(pt!==null?pt.memoizedState:null)!==e&&(ct.flags|=1024),t}function cc(){var e=Kl!==0;return Kl=0,e}function uc(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function fc(e){if(va){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}va=!1}Ct=0,Qt=pt=ct=null,Si=!1,Vs=Kl=0,Ka=null}function Gr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qt===null?ct.memoizedState=Qt=e:Qt=Qt.next=e,Qt}function hr(){if(pt===null){var e=ct.alternate;e=e!==null?e.memoizedState:null}else e=pt.next;var t=Qt===null?ct.memoizedState:Qt.next;if(t!==null)Qt=t,pt=e;else{if(e===null)throw ct.alternate===null?Error(c(467)):Error(c(310));pt=e,e={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},Qt===null?ct.memoizedState=Qt=e:Qt=Qt.next=e}return Qt}function dc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Hs(e){var t=Vs;return Vs+=1,Ka===null&&(Ka=[]),e=fe(Ka,e,t),t=ct,(Qt===null?t.memoizedState:Qt.next)===null&&(t=t.alternate,U.H=t===null||t.memoizedState===null?sf:lf),e}function Yl(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Hs(e);if(e.$$typeof===v)return _r(e)}throw Error(c(438,String(e)))}function hc(e){var t=null,n=ct.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var d=ct.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(t={data:d.data.map(function(L){return L.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=dc(),ct.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),d=0;d<e;d++)n[d]=z;return t.index++,n}function ln(e,t){return typeof t=="function"?t(e):t}function Xl(e){var t=hr();return mc(t,pt,e)}function mc(e,t,n){var d=e.queue;if(d===null)throw Error(c(311));d.lastRenderedReducer=n;var L=e.baseQueue,I=d.pending;if(I!==null){if(L!==null){var Q=L.next;L.next=I.next,I.next=Q}t.baseQueue=L=I,d.pending=null}if(I=e.baseState,L===null)e.memoizedState=I;else{t=L.next;var ie=Q=null,ge=null,Ne=t,Ze=!1;do{var qe=Ne.lane&-536870913;if(qe!==Ne.lane?(jt&qe)===qe:(Ct&qe)===qe){var Fe=Ne.revertLane;if(Fe===0)ge!==null&&(ge=ge.next={lane:0,revertLane:0,action:Ne.action,hasEagerState:Ne.hasEagerState,eagerState:Ne.eagerState,next:null}),qe===Dn&&(Ze=!0);else if((Ct&Fe)===Fe){Ne=Ne.next,Fe===Dn&&(Ze=!0);continue}else qe={lane:0,revertLane:Ne.revertLane,action:Ne.action,hasEagerState:Ne.hasEagerState,eagerState:Ne.eagerState,next:null},ge===null?(ie=ge=qe,Q=I):ge=ge.next=qe,ct.lanes|=Fe,jn|=Fe;qe=Ne.action,fi&&n(I,qe),I=Ne.hasEagerState?Ne.eagerState:n(I,qe)}else Fe={lane:qe,revertLane:Ne.revertLane,action:Ne.action,hasEagerState:Ne.hasEagerState,eagerState:Ne.eagerState,next:null},ge===null?(ie=ge=Fe,Q=I):ge=ge.next=Fe,ct.lanes|=qe,jn|=qe;Ne=Ne.next}while(Ne!==null&&Ne!==t);if(ge===null?Q=I:ge.next=ie,!zr(I,e.memoizedState)&&(br=!0,Ze&&(n=Ln,n!==null)))throw n;e.memoizedState=I,e.baseState=Q,e.baseQueue=ge,d.lastRenderedState=I}return L===null&&(d.lanes=0),[e.memoizedState,d.dispatch]}function pc(e){var t=hr(),n=t.queue;if(n===null)throw Error(c(311));n.lastRenderedReducer=e;var d=n.dispatch,L=n.pending,I=t.memoizedState;if(L!==null){n.pending=null;var Q=L=L.next;do I=e(I,Q.action),Q=Q.next;while(Q!==L);zr(I,t.memoizedState)||(br=!0),t.memoizedState=I,t.baseQueue===null&&(t.baseState=I),n.lastRenderedState=I}return[I,d]}function wu(e,t,n){var d=ct,L=hr(),I=Wt;if(I){if(n===void 0)throw Error(c(407));n=n()}else n=t();var Q=!zr((pt||L).memoizedState,n);Q&&(L.memoizedState=n,br=!0),L=L.queue;var ie=Mu.bind(null,d,L,e);if(ks(2048,8,ie,[e]),L.getSnapshot!==t||Q||Qt!==null&&Qt.memoizedState.tag&1){if(d.flags|=2048,Ya(9,Zl(),Tu.bind(null,d,L,n,t),null),rr===null)throw Error(c(349));I||(Ct&124)!==0||Cu(d,t,n)}return n}function Cu(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ct.updateQueue,t===null?(t=dc(),ct.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Tu(e,t,n,d){t.value=n,t.getSnapshot=d,Ru(t)&&Ou(e)}function Mu(e,t,n){return n(function(){Ru(t)&&Ou(e)})}function Ru(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!zr(e,n)}catch{return!0}}function Ou(e){var t=Yt(e,2);t!==null&&qr(t,e,2)}function gc(e){var t=Gr();if(typeof e=="function"){var n=e;if(e=n(),fi){re(!0);try{n()}finally{re(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ln,lastRenderedState:e},t}function Du(e,t,n,d){return e.baseState=n,mc(e,pt,typeof d=="function"?d:ln)}function th(e,t,n,d,L){if(Ql(e))throw Error(c(485));if(e=t.action,e!==null){var I={payload:L,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Q){I.listeners.push(Q)}};U.T!==null?n(!0):I.isTransition=!1,d(I),n=t.pending,n===null?(I.next=t.pending=I,Lu(t,I)):(I.next=n.next,t.pending=n.next=I)}}function Lu(e,t){var n=t.action,d=t.payload,L=e.state;if(t.isTransition){var I=U.T,Q={};U.T=Q;try{var ie=n(L,d),ge=U.S;ge!==null&&ge(Q,ie),zu(e,t,ie)}catch(Ne){vc(e,t,Ne)}finally{U.T=I}}else try{I=n(L,d),zu(e,t,I)}catch(Ne){vc(e,t,Ne)}}function zu(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(d){Pu(e,t,d)},function(d){return vc(e,t,d)}):Pu(e,t,n)}function Pu(e,t,n){t.status="fulfilled",t.value=n,Nu(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,Lu(e,n)))}function vc(e,t,n){var d=e.pending;if(e.pending=null,d!==null){d=d.next;do t.status="rejected",t.reason=n,Nu(t),t=t.next;while(t!==d)}e.action=null}function Nu(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Iu(e,t){return t}function Bu(e,t){if(Wt){var n=rr.formState;if(n!==null){e:{var d=ct;if(Wt){if(ar){t:{for(var L=ar,I=oi;L.nodeType!==8;){if(!I){L=null;break t}if(L=Ci(L.nextSibling),L===null){L=null;break t}}I=L.data,L=I==="F!"||I==="F"?L:null}if(L){ar=Ci(L.nextSibling),d=L.data==="F!";break e}}an(d)}d=!1}d&&(t=n[0])}}return n=Gr(),n.memoizedState=n.baseState=t,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Iu,lastRenderedState:t},n.queue=d,n=rf.bind(null,ct,d),d.dispatch=n,d=gc(!1),I=Ec.bind(null,ct,!1,d.queue),d=Gr(),L={state:t,dispatch:null,action:e,pending:null},d.queue=L,n=th.bind(null,ct,L,I,n),L.dispatch=n,d.memoizedState=e,[t,n,!1]}function Uu(e){var t=hr();return Fu(t,pt,e)}function Fu(e,t,n){if(t=mc(e,t,Iu)[0],e=Xl(ln)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var d=Hs(t)}catch(Q){throw Q===zn?C:Q}else d=t;t=hr();var L=t.queue,I=L.dispatch;return n!==t.memoizedState&&(ct.flags|=2048,Ya(9,Zl(),rh.bind(null,L,n),null)),[d,I,e]}function rh(e,t){e.action=t}function ju(e){var t=hr(),n=pt;if(n!==null)return Fu(t,n,e);hr(),t=t.memoizedState,n=hr();var d=n.queue.dispatch;return n.memoizedState=e,[t,d,!1]}function Ya(e,t,n,d){return e={tag:e,create:n,deps:d,inst:t,next:null},t=ct.updateQueue,t===null&&(t=dc(),ct.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(d=n.next,n.next=e,e.next=d,t.lastEffect=e),e}function Zl(){return{destroy:void 0,resource:void 0}}function Gu(){return hr().memoizedState}function $l(e,t,n,d){var L=Gr();d=d===void 0?null:d,ct.flags|=e,L.memoizedState=Ya(1|t,Zl(),n,d)}function ks(e,t,n,d){var L=hr();d=d===void 0?null:d;var I=L.memoizedState.inst;pt!==null&&d!==null&&lc(d,pt.memoizedState.deps)?L.memoizedState=Ya(t,I,n,d):(ct.flags|=e,L.memoizedState=Ya(1|t,I,n,d))}function Wu(e,t){$l(8390656,8,e,t)}function Vu(e,t){ks(2048,8,e,t)}function Hu(e,t){return ks(4,2,e,t)}function ku(e,t){return ks(4,4,e,t)}function Ku(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Yu(e,t,n){n=n!=null?n.concat([e]):null,ks(4,4,Ku.bind(null,t,e),n)}function xc(){}function Xu(e,t){var n=hr();t=t===void 0?null:t;var d=n.memoizedState;return t!==null&&lc(t,d[1])?d[0]:(n.memoizedState=[e,t],e)}function Zu(e,t){var n=hr();t=t===void 0?null:t;var d=n.memoizedState;if(t!==null&&lc(t,d[1]))return d[0];if(d=e(),fi){re(!0);try{e()}finally{re(!1)}}return n.memoizedState=[d,t],d}function _c(e,t,n){return n===void 0||(Ct&1073741824)!==0?e.memoizedState=t:(e.memoizedState=n,e=qf(),ct.lanes|=e,jn|=e,n)}function $u(e,t,n,d){return zr(n,t)?n:ht.current!==null?(e=_c(e,n,d),zr(e,t)||(br=!0),e):(Ct&42)===0?(br=!0,e.memoizedState=n):(e=qf(),ct.lanes|=e,jn|=e,t)}function Qu(e,t,n,d,L){var I=W.p;W.p=I!==0&&8>I?I:8;var Q=U.T,ie={};U.T=ie,Ec(e,!1,t,n);try{var ge=L(),Ne=U.S;if(Ne!==null&&Ne(ie,ge),ge!==null&&typeof ge=="object"&&typeof ge.then=="function"){var Ze=Hl(ge,d);Ks(e,t,Ze,Jr(e))}else Ks(e,t,d,Jr(e))}catch(qe){Ks(e,t,{then:function(){},status:"rejected",reason:qe},Jr())}finally{W.p=I,U.T=Q}}function ih(){}function bc(e,t,n,d){if(e.tag!==5)throw Error(c(476));var L=Ju(e).queue;Qu(e,L,t,F,n===null?ih:function(){return qu(e),n(d)})}function Ju(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:F,baseState:F,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ln,lastRenderedState:F},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ln,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function qu(e){var t=Ju(e).next.queue;Ks(e,t,{},Jr())}function yc(){return _r(ul)}function ef(){return hr().memoizedState}function tf(){return hr().memoizedState}function nh(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=Jr();e=Rt(n);var d=dt(t,e,n);d!==null&&(qr(d,t,n),tt(d,t,n)),t={cache:Us()},e.payload=t;return}t=t.return}}function ah(e,t,n){var d=Jr();n={lane:d,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Ql(e)?nf(t,n):(n=ja(e,t,n,d),n!==null&&(qr(n,e,d),af(n,t,d)))}function rf(e,t,n){var d=Jr();Ks(e,t,n,d)}function Ks(e,t,n,d){var L={lane:d,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ql(e))nf(t,L);else{var I=e.alternate;if(e.lanes===0&&(I===null||I.lanes===0)&&(I=t.lastRenderedReducer,I!==null))try{var Q=t.lastRenderedState,ie=I(Q,n);if(L.hasEagerState=!0,L.eagerState=ie,zr(ie,Q))return oa(e,t,L,0),rr===null&&Cn(),!1}catch{}finally{}if(n=ja(e,t,L,d),n!==null)return qr(n,e,d),af(n,t,d),!0}return!1}function Ec(e,t,n,d){if(d={lane:2,revertLane:eu(),action:d,hasEagerState:!1,eagerState:null,next:null},Ql(e)){if(t)throw Error(c(479))}else t=ja(e,n,d,2),t!==null&&qr(t,e,2)}function Ql(e){var t=e.alternate;return e===ct||t!==null&&t===ct}function nf(e,t){Si=va=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function af(e,t,n){if((n&4194048)!==0){var d=t.lanes;d&=e.pendingLanes,n|=d,t.lanes=n,Se(e,n)}}var Jl={readContext:_r,use:Yl,useCallback:fr,useContext:fr,useEffect:fr,useImperativeHandle:fr,useLayoutEffect:fr,useInsertionEffect:fr,useMemo:fr,useReducer:fr,useRef:fr,useState:fr,useDebugValue:fr,useDeferredValue:fr,useTransition:fr,useSyncExternalStore:fr,useId:fr,useHostTransitionStatus:fr,useFormState:fr,useActionState:fr,useOptimistic:fr,useMemoCache:fr,useCacheRefresh:fr},sf={readContext:_r,use:Yl,useCallback:function(e,t){return Gr().memoizedState=[e,t===void 0?null:t],e},useContext:_r,useEffect:Wu,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,$l(4194308,4,Ku.bind(null,t,e),n)},useLayoutEffect:function(e,t){return $l(4194308,4,e,t)},useInsertionEffect:function(e,t){$l(4,2,e,t)},useMemo:function(e,t){var n=Gr();t=t===void 0?null:t;var d=e();if(fi){re(!0);try{e()}finally{re(!1)}}return n.memoizedState=[d,t],d},useReducer:function(e,t,n){var d=Gr();if(n!==void 0){var L=n(t);if(fi){re(!0);try{n(t)}finally{re(!1)}}}else L=t;return d.memoizedState=d.baseState=L,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:L},d.queue=e,e=e.dispatch=ah.bind(null,ct,e),[d.memoizedState,e]},useRef:function(e){var t=Gr();return e={current:e},t.memoizedState=e},useState:function(e){e=gc(e);var t=e.queue,n=rf.bind(null,ct,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:xc,useDeferredValue:function(e,t){var n=Gr();return _c(n,e,t)},useTransition:function(){var e=gc(!1);return e=Qu.bind(null,ct,e.queue,!0,!1),Gr().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var d=ct,L=Gr();if(Wt){if(n===void 0)throw Error(c(407));n=n()}else{if(n=t(),rr===null)throw Error(c(349));(jt&124)!==0||Cu(d,t,n)}L.memoizedState=n;var I={value:n,getSnapshot:t};return L.queue=I,Wu(Mu.bind(null,d,I,e),[e]),d.flags|=2048,Ya(9,Zl(),Tu.bind(null,d,I,n,t),null),n},useId:function(){var e=Gr(),t=rr.identifierPrefix;if(Wt){var n=yi,d=bi;n=(d&~(1<<32-le(d)-1)).toString(32)+n,t=""+t+"R"+n,n=Kl++,0<n&&(t+="H"+n.toString(32)),t+=""}else n=qd++,t=""+t+"r"+n.toString(32)+"";return e.memoizedState=t},useHostTransitionStatus:yc,useFormState:Bu,useActionState:Bu,useOptimistic:function(e){var t=Gr();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Ec.bind(null,ct,!0,n),n.dispatch=t,[e,t]},useMemoCache:hc,useCacheRefresh:function(){return Gr().memoizedState=nh.bind(null,ct)}},lf={readContext:_r,use:Yl,useCallback:Xu,useContext:_r,useEffect:Vu,useImperativeHandle:Yu,useInsertionEffect:Hu,useLayoutEffect:ku,useMemo:Zu,useReducer:Xl,useRef:Gu,useState:function(){return Xl(ln)},useDebugValue:xc,useDeferredValue:function(e,t){var n=hr();return $u(n,pt.memoizedState,e,t)},useTransition:function(){var e=Xl(ln)[0],t=hr().memoizedState;return[typeof e=="boolean"?e:Hs(e),t]},useSyncExternalStore:wu,useId:ef,useHostTransitionStatus:yc,useFormState:Uu,useActionState:Uu,useOptimistic:function(e,t){var n=hr();return Du(n,pt,e,t)},useMemoCache:hc,useCacheRefresh:tf},sh={readContext:_r,use:Yl,useCallback:Xu,useContext:_r,useEffect:Vu,useImperativeHandle:Yu,useInsertionEffect:Hu,useLayoutEffect:ku,useMemo:Zu,useReducer:pc,useRef:Gu,useState:function(){return pc(ln)},useDebugValue:xc,useDeferredValue:function(e,t){var n=hr();return pt===null?_c(n,e,t):$u(n,pt.memoizedState,e,t)},useTransition:function(){var e=pc(ln)[0],t=hr().memoizedState;return[typeof e=="boolean"?e:Hs(e),t]},useSyncExternalStore:wu,useId:ef,useHostTransitionStatus:yc,useFormState:ju,useActionState:ju,useOptimistic:function(e,t){var n=hr();return pt!==null?Du(n,pt,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:hc,useCacheRefresh:tf},Xa=null,Ys=0;function ql(e){var t=Ys;return Ys+=1,Xa===null&&(Xa=[]),fe(Xa,e,t)}function Xs(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function eo(e,t){throw t.$$typeof===T?Error(c(525)):(e=Object.prototype.toString.call(t),Error(c(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function of(e){var t=e._init;return t(e._payload)}function cf(e){function t(Le,Ae){if(e){var ze=Le.deletions;ze===null?(Le.deletions=[Ae],Le.flags|=16):ze.push(Ae)}}function n(Le,Ae){if(!e)return null;for(;Ae!==null;)t(Le,Ae),Ae=Ae.sibling;return null}function d(Le){for(var Ae=new Map;Le!==null;)Le.key!==null?Ae.set(Le.key,Le):Ae.set(Le.index,Le),Le=Le.sibling;return Ae}function L(Le,Ae){return Le=si(Le,Ae),Le.index=0,Le.sibling=null,Le}function I(Le,Ae,ze){return Le.index=ze,e?(ze=Le.alternate,ze!==null?(ze=ze.index,ze<Ae?(Le.flags|=67108866,Ae):ze):(Le.flags|=67108866,Ae)):(Le.flags|=1048576,Ae)}function Q(Le){return e&&Le.alternate===null&&(Le.flags|=67108866),Le}function ie(Le,Ae,ze,Qe){return Ae===null||Ae.tag!==6?(Ae=Ga(ze,Le.mode,Qe),Ae.return=Le,Ae):(Ae=L(Ae,ze),Ae.return=Le,Ae)}function ge(Le,Ae,ze,Qe){var gt=ze.type;return gt===M?Ze(Le,Ae,ze.props.children,Qe,ze.key):Ae!==null&&(Ae.elementType===gt||typeof gt=="object"&&gt!==null&&gt.$$typeof===x&&of(gt)===Ae.type)?(Ae=L(Ae,ze.props),Xs(Ae,ze),Ae.return=Le,Ae):(Ae=li(ze.type,ze.key,ze.props,null,Le.mode,Qe),Xs(Ae,ze),Ae.return=Le,Ae)}function Ne(Le,Ae,ze,Qe){return Ae===null||Ae.tag!==4||Ae.stateNode.containerInfo!==ze.containerInfo||Ae.stateNode.implementation!==ze.implementation?(Ae=Wa(ze,Le.mode,Qe),Ae.return=Le,Ae):(Ae=L(Ae,ze.children||[]),Ae.return=Le,Ae)}function Ze(Le,Ae,ze,Qe,gt){return Ae===null||Ae.tag!==7?(Ae=zi(ze,Le.mode,Qe,gt),Ae.return=Le,Ae):(Ae=L(Ae,ze),Ae.return=Le,Ae)}function qe(Le,Ae,ze){if(typeof Ae=="string"&&Ae!==""||typeof Ae=="number"||typeof Ae=="bigint")return Ae=Ga(""+Ae,Le.mode,ze),Ae.return=Le,Ae;if(typeof Ae=="object"&&Ae!==null){switch(Ae.$$typeof){case O:return ze=li(Ae.type,Ae.key,Ae.props,null,Le.mode,ze),Xs(ze,Ae),ze.return=Le,ze;case w:return Ae=Wa(Ae,Le.mode,ze),Ae.return=Le,Ae;case x:var Qe=Ae._init;return Ae=Qe(Ae._payload),qe(Le,Ae,ze)}if(k(Ae)||G(Ae))return Ae=zi(Ae,Le.mode,ze,null),Ae.return=Le,Ae;if(typeof Ae.then=="function")return qe(Le,ql(Ae),ze);if(Ae.$$typeof===v)return qe(Le,Ha(Le,Ae),ze);eo(Le,Ae)}return null}function Fe(Le,Ae,ze,Qe){var gt=Ae!==null?Ae.key:null;if(typeof ze=="string"&&ze!==""||typeof ze=="number"||typeof ze=="bigint")return gt!==null?null:ie(Le,Ae,""+ze,Qe);if(typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case O:return ze.key===gt?ge(Le,Ae,ze,Qe):null;case w:return ze.key===gt?Ne(Le,Ae,ze,Qe):null;case x:return gt=ze._init,ze=gt(ze._payload),Fe(Le,Ae,ze,Qe)}if(k(ze)||G(ze))return gt!==null?null:Ze(Le,Ae,ze,Qe,null);if(typeof ze.then=="function")return Fe(Le,Ae,ql(ze),Qe);if(ze.$$typeof===v)return Fe(Le,Ae,Ha(Le,ze),Qe);eo(Le,ze)}return null}function Ve(Le,Ae,ze,Qe,gt){if(typeof Qe=="string"&&Qe!==""||typeof Qe=="number"||typeof Qe=="bigint")return Le=Le.get(ze)||null,ie(Ae,Le,""+Qe,gt);if(typeof Qe=="object"&&Qe!==null){switch(Qe.$$typeof){case O:return Le=Le.get(Qe.key===null?ze:Qe.key)||null,ge(Ae,Le,Qe,gt);case w:return Le=Le.get(Qe.key===null?ze:Qe.key)||null,Ne(Ae,Le,Qe,gt);case x:var zt=Qe._init;return Qe=zt(Qe._payload),Ve(Le,Ae,ze,Qe,gt)}if(k(Qe)||G(Qe))return Le=Le.get(ze)||null,Ze(Ae,Le,Qe,gt,null);if(typeof Qe.then=="function")return Ve(Le,Ae,ze,ql(Qe),gt);if(Qe.$$typeof===v)return Ve(Le,Ae,ze,Ha(Ae,Qe),gt);eo(Ae,Qe)}return null}function At(Le,Ae,ze,Qe){for(var gt=null,zt=null,xt=Ae,Et=Ae=0,Er=null;xt!==null&&Et<ze.length;Et++){xt.index>Et?(Er=xt,xt=null):Er=xt.sibling;var kt=Fe(Le,xt,ze[Et],Qe);if(kt===null){xt===null&&(xt=Er);break}e&&xt&&kt.alternate===null&&t(Le,xt),Ae=I(kt,Ae,Et),zt===null?gt=kt:zt.sibling=kt,zt=kt,xt=Er}if(Et===ze.length)return n(Le,xt),Wt&&rn(Le,Et),gt;if(xt===null){for(;Et<ze.length;Et++)xt=qe(Le,ze[Et],Qe),xt!==null&&(Ae=I(xt,Ae,Et),zt===null?gt=xt:zt.sibling=xt,zt=xt);return Wt&&rn(Le,Et),gt}for(xt=d(xt);Et<ze.length;Et++)Er=Ve(xt,Le,Et,ze[Et],Qe),Er!==null&&(e&&Er.alternate!==null&&xt.delete(Er.key===null?Et:Er.key),Ae=I(Er,Ae,Et),zt===null?gt=Er:zt.sibling=Er,zt=Er);return e&&xt.forEach(function(Zn){return t(Le,Zn)}),Wt&&rn(Le,Et),gt}function yt(Le,Ae,ze,Qe){if(ze==null)throw Error(c(151));for(var gt=null,zt=null,xt=Ae,Et=Ae=0,Er=null,kt=ze.next();xt!==null&&!kt.done;Et++,kt=ze.next()){xt.index>Et?(Er=xt,xt=null):Er=xt.sibling;var Zn=Fe(Le,xt,kt.value,Qe);if(Zn===null){xt===null&&(xt=Er);break}e&&xt&&Zn.alternate===null&&t(Le,xt),Ae=I(Zn,Ae,Et),zt===null?gt=Zn:zt.sibling=Zn,zt=Zn,xt=Er}if(kt.done)return n(Le,xt),Wt&&rn(Le,Et),gt;if(xt===null){for(;!kt.done;Et++,kt=ze.next())kt=qe(Le,kt.value,Qe),kt!==null&&(Ae=I(kt,Ae,Et),zt===null?gt=kt:zt.sibling=kt,zt=kt);return Wt&&rn(Le,Et),gt}for(xt=d(xt);!kt.done;Et++,kt=ze.next())kt=Ve(xt,Le,Et,kt.value,Qe),kt!==null&&(e&&kt.alternate!==null&&xt.delete(kt.key===null?Et:kt.key),Ae=I(kt,Ae,Et),zt===null?gt=kt:zt.sibling=kt,zt=kt);return e&&xt.forEach(function(l0){return t(Le,l0)}),Wt&&rn(Le,Et),gt}function qt(Le,Ae,ze,Qe){if(typeof ze=="object"&&ze!==null&&ze.type===M&&ze.key===null&&(ze=ze.props.children),typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case O:e:{for(var gt=ze.key;Ae!==null;){if(Ae.key===gt){if(gt=ze.type,gt===M){if(Ae.tag===7){n(Le,Ae.sibling),Qe=L(Ae,ze.props.children),Qe.return=Le,Le=Qe;break e}}else if(Ae.elementType===gt||typeof gt=="object"&&gt!==null&&gt.$$typeof===x&&of(gt)===Ae.type){n(Le,Ae.sibling),Qe=L(Ae,ze.props),Xs(Qe,ze),Qe.return=Le,Le=Qe;break e}n(Le,Ae);break}else t(Le,Ae);Ae=Ae.sibling}ze.type===M?(Qe=zi(ze.props.children,Le.mode,Qe,ze.key),Qe.return=Le,Le=Qe):(Qe=li(ze.type,ze.key,ze.props,null,Le.mode,Qe),Xs(Qe,ze),Qe.return=Le,Le=Qe)}return Q(Le);case w:e:{for(gt=ze.key;Ae!==null;){if(Ae.key===gt)if(Ae.tag===4&&Ae.stateNode.containerInfo===ze.containerInfo&&Ae.stateNode.implementation===ze.implementation){n(Le,Ae.sibling),Qe=L(Ae,ze.children||[]),Qe.return=Le,Le=Qe;break e}else{n(Le,Ae);break}else t(Le,Ae);Ae=Ae.sibling}Qe=Wa(ze,Le.mode,Qe),Qe.return=Le,Le=Qe}return Q(Le);case x:return gt=ze._init,ze=gt(ze._payload),qt(Le,Ae,ze,Qe)}if(k(ze))return At(Le,Ae,ze,Qe);if(G(ze)){if(gt=G(ze),typeof gt!="function")throw Error(c(150));return ze=gt.call(ze),yt(Le,Ae,ze,Qe)}if(typeof ze.then=="function")return qt(Le,Ae,ql(ze),Qe);if(ze.$$typeof===v)return qt(Le,Ae,Ha(Le,ze),Qe);eo(Le,ze)}return typeof ze=="string"&&ze!==""||typeof ze=="number"||typeof ze=="bigint"?(ze=""+ze,Ae!==null&&Ae.tag===6?(n(Le,Ae.sibling),Qe=L(Ae,ze),Qe.return=Le,Le=Qe):(n(Le,Ae),Qe=Ga(ze,Le.mode,Qe),Qe.return=Le,Le=Qe),Q(Le)):n(Le,Ae)}return function(Le,Ae,ze,Qe){try{Ys=0;var gt=qt(Le,Ae,ze,Qe);return Xa=null,gt}catch(xt){if(xt===zn||xt===C)throw xt;var zt=Fr(29,xt,null,Le.mode);return zt.lanes=Qe,zt.return=Le,zt}finally{}}}var Za=cf(!0),uf=cf(!1),di=H(null),Ii=null;function Pn(e){var t=e.alternate;ne(gr,gr.current&1),ne(di,e),Ii===null&&(t===null||ht.current!==null||t.memoizedState!==null)&&(Ii=e)}function ff(e){if(e.tag===22){if(ne(gr,gr.current),ne(di,e),Ii===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(Ii=e)}}else Nn()}function Nn(){ne(gr,gr.current),ne(di,di.current)}function on(e){Z(di),Ii===e&&(Ii=null),Z(gr)}var gr=H(0);function to(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||du(n)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Ac(e,t,n,d){t=e.memoizedState,n=n(d,t),n=n==null?t:g({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Sc={enqueueSetState:function(e,t,n){e=e._reactInternals;var d=Jr(),L=Rt(d);L.payload=t,n!=null&&(L.callback=n),t=dt(e,L,d),t!==null&&(qr(t,e,d),tt(t,e,d))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var d=Jr(),L=Rt(d);L.tag=1,L.payload=t,n!=null&&(L.callback=n),t=dt(e,L,d),t!==null&&(qr(t,e,d),tt(t,e,d))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Jr(),d=Rt(n);d.tag=2,t!=null&&(d.callback=t),t=dt(e,d,n),t!==null&&(qr(t,e,n),tt(t,e,n))}};function df(e,t,n,d,L,I,Q){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(d,I,Q):t.prototype&&t.prototype.isPureReactComponent?!la(n,d)||!la(L,I):!0}function hf(e,t,n,d){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,d),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,d),t.state!==e&&Sc.enqueueReplaceState(t,t.state,null)}function xa(e,t){var n=t;if("ref"in t){n={};for(var d in t)d!=="ref"&&(n[d]=t[d])}if(e=e.defaultProps){n===t&&(n=g({},n));for(var L in e)n[L]===void 0&&(n[L]=e[L])}return n}var ro=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function mf(e){ro(e)}function pf(e){console.error(e)}function gf(e){ro(e)}function io(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(d){setTimeout(function(){throw d})}}function vf(e,t,n){try{var d=e.onCaughtError;d(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(L){setTimeout(function(){throw L})}}function wc(e,t,n){return n=Rt(n),n.tag=3,n.payload={element:null},n.callback=function(){io(e,t)},n}function xf(e){return e=Rt(e),e.tag=3,e}function _f(e,t,n,d){var L=n.type.getDerivedStateFromError;if(typeof L=="function"){var I=d.value;e.payload=function(){return L(I)},e.callback=function(){vf(t,n,d)}}var Q=n.stateNode;Q!==null&&typeof Q.componentDidCatch=="function"&&(e.callback=function(){vf(t,n,d),typeof L!="function"&&(Gn===null?Gn=new Set([this]):Gn.add(this));var ie=d.stack;this.componentDidCatch(d.value,{componentStack:ie!==null?ie:""})})}function lh(e,t,n,d,L){if(n.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(t=n.alternate,t!==null&&Ai(t,n,L,!0),n=di.current,n!==null){switch(n.tag){case 13:return Ii===null?Zc():n.alternate===null&&or===0&&(or=3),n.flags&=-257,n.flags|=65536,n.lanes=L,d===$?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([d]):t.add(d),Qc(e,d,L)),!1;case 22:return n.flags|=65536,d===$?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([d])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([d]):n.add(d)),Qc(e,d,L)),!1}throw Error(c(435,n.tag))}return Qc(e,d,L),Zc(),!1}if(Wt)return t=di.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=L,d!==Ps&&(e=Error(c(422),{cause:d}),ha(Nr(e,n)))):(d!==Ps&&(t=Error(c(423),{cause:d}),ha(Nr(t,n))),e=e.current.alternate,e.flags|=65536,L&=-L,e.lanes|=L,d=Nr(d,n),L=wc(e.stateNode,d,L),_t(e,L),or!==4&&(or=2)),!1;var I=Error(c(520),{cause:d});if(I=Nr(I,n),tl===null?tl=[I]:tl.push(I),or!==4&&(or=2),t===null)return!0;d=Nr(d,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=L&-L,n.lanes|=e,e=wc(n.stateNode,d,e),_t(n,e),!1;case 1:if(t=n.type,I=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(Gn===null||!Gn.has(I))))return n.flags|=65536,L&=-L,n.lanes|=L,L=xf(L),_f(L,e,n,d),_t(n,L),!1}n=n.return}while(n!==null);return!1}var bf=Error(c(461)),br=!1;function wr(e,t,n,d){t.child=e===null?uf(t,null,n,d):Za(t,e.child,n,d)}function yf(e,t,n,d,L){n=n.render;var I=t.ref;if("ref"in d){var Q={};for(var ie in d)ie!=="ref"&&(Q[ie]=d[ie])}else Q=d;return sn(t),d=oc(e,t,n,Q,I,L),ie=cc(),e!==null&&!br?(uc(e,t,L),un(e,t,L)):(Wt&&ie&&Ls(t),t.flags|=1,wr(e,t,d,L),t.child)}function Ef(e,t,n,d,L){if(e===null){var I=n.type;return typeof I=="function"&&!Ds(I)&&I.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=I,Af(e,t,I,d,L)):(e=li(n.type,null,d,t,t.mode,L),e.ref=t.ref,e.return=t,t.child=e)}if(I=e.child,!zc(e,L)){var Q=I.memoizedProps;if(n=n.compare,n=n!==null?n:la,n(Q,d)&&e.ref===t.ref)return un(e,t,L)}return t.flags|=1,e=si(I,d),e.ref=t.ref,e.return=t,t.child=e}function Af(e,t,n,d,L){if(e!==null){var I=e.memoizedProps;if(la(I,d)&&e.ref===t.ref)if(br=!1,t.pendingProps=d=I,zc(e,L))(e.flags&131072)!==0&&(br=!0);else return t.lanes=e.lanes,un(e,t,L)}return Cc(e,t,n,d,L)}function Sf(e,t,n){var d=t.pendingProps,L=d.children,I=e!==null?e.memoizedState:null;if(d.mode==="hidden"){if((t.flags&128)!==0){if(d=I!==null?I.baseLanes|n:n,e!==null){for(L=t.child=e.child,I=0;L!==null;)I=I|L.lanes|L.childLanes,L=L.sibling;t.childLanes=I&~d}else t.childLanes=0,t.child=null;return wf(e,t,d,n)}if((n&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&ga(t,I!==null?I.cachePool:null),I!==null?ur(t,I):bt(),ff(t);else return t.lanes=t.childLanes=536870912,wf(e,t,I!==null?I.baseLanes|n:n,n)}else I!==null?(ga(t,I.cachePool),ur(t,I),Nn(),t.memoizedState=null):(e!==null&&ga(t,null),bt(),Nn());return wr(e,t,L,n),t.child}function wf(e,t,n,d){var L=ka();return L=L===null?null:{parent:cr._currentValue,pool:L},t.memoizedState={baseLanes:n,cachePool:L},e!==null&&ga(t,null),bt(),ff(t),e!==null&&Ai(e,t,d,!0),null}function no(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(c(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function Cc(e,t,n,d,L){return sn(t),n=oc(e,t,n,d,void 0,L),d=cc(),e!==null&&!br?(uc(e,t,L),un(e,t,L)):(Wt&&d&&Ls(t),t.flags|=1,wr(e,t,n,L),t.child)}function Cf(e,t,n,d,L,I){return sn(t),t.updateQueue=null,n=Su(t,d,n,L),Au(e),d=cc(),e!==null&&!br?(uc(e,t,I),un(e,t,I)):(Wt&&d&&Ls(t),t.flags|=1,wr(e,t,n,I),t.child)}function Tf(e,t,n,d,L){if(sn(t),t.stateNode===null){var I=Tn,Q=n.contextType;typeof Q=="object"&&Q!==null&&(I=_r(Q)),I=new n(d,I),t.memoizedState=I.state!==null&&I.state!==void 0?I.state:null,I.updater=Sc,t.stateNode=I,I._reactInternals=t,I=t.stateNode,I.props=d,I.state=t.memoizedState,I.refs={},Ee(t),Q=n.contextType,I.context=typeof Q=="object"&&Q!==null?_r(Q):Tn,I.state=t.memoizedState,Q=n.getDerivedStateFromProps,typeof Q=="function"&&(Ac(t,n,Q,d),I.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof I.getSnapshotBeforeUpdate=="function"||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(Q=I.state,typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount(),Q!==I.state&&Sc.enqueueReplaceState(I,I.state,null),St(t,d,I,L),Ot(),I.state=t.memoizedState),typeof I.componentDidMount=="function"&&(t.flags|=4194308),d=!0}else if(e===null){I=t.stateNode;var ie=t.memoizedProps,ge=xa(n,ie);I.props=ge;var Ne=I.context,Ze=n.contextType;Q=Tn,typeof Ze=="object"&&Ze!==null&&(Q=_r(Ze));var qe=n.getDerivedStateFromProps;Ze=typeof qe=="function"||typeof I.getSnapshotBeforeUpdate=="function",ie=t.pendingProps!==ie,Ze||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(ie||Ne!==Q)&&hf(t,I,d,Q),mt=!1;var Fe=t.memoizedState;I.state=Fe,St(t,d,I,L),Ot(),Ne=t.memoizedState,ie||Fe!==Ne||mt?(typeof qe=="function"&&(Ac(t,n,qe,d),Ne=t.memoizedState),(ge=mt||df(t,n,ge,d,Fe,Ne,Q))?(Ze||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount()),typeof I.componentDidMount=="function"&&(t.flags|=4194308)):(typeof I.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=d,t.memoizedState=Ne),I.props=d,I.state=Ne,I.context=Q,d=ge):(typeof I.componentDidMount=="function"&&(t.flags|=4194308),d=!1)}else{I=t.stateNode,Ie(e,t),Q=t.memoizedProps,Ze=xa(n,Q),I.props=Ze,qe=t.pendingProps,Fe=I.context,Ne=n.contextType,ge=Tn,typeof Ne=="object"&&Ne!==null&&(ge=_r(Ne)),ie=n.getDerivedStateFromProps,(Ne=typeof ie=="function"||typeof I.getSnapshotBeforeUpdate=="function")||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(Q!==qe||Fe!==ge)&&hf(t,I,d,ge),mt=!1,Fe=t.memoizedState,I.state=Fe,St(t,d,I,L),Ot();var Ve=t.memoizedState;Q!==qe||Fe!==Ve||mt||e!==null&&e.dependencies!==null&&On(e.dependencies)?(typeof ie=="function"&&(Ac(t,n,ie,d),Ve=t.memoizedState),(Ze=mt||df(t,n,Ze,d,Fe,Ve,ge)||e!==null&&e.dependencies!==null&&On(e.dependencies))?(Ne||typeof I.UNSAFE_componentWillUpdate!="function"&&typeof I.componentWillUpdate!="function"||(typeof I.componentWillUpdate=="function"&&I.componentWillUpdate(d,Ve,ge),typeof I.UNSAFE_componentWillUpdate=="function"&&I.UNSAFE_componentWillUpdate(d,Ve,ge)),typeof I.componentDidUpdate=="function"&&(t.flags|=4),typeof I.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof I.componentDidUpdate!="function"||Q===e.memoizedProps&&Fe===e.memoizedState||(t.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||Q===e.memoizedProps&&Fe===e.memoizedState||(t.flags|=1024),t.memoizedProps=d,t.memoizedState=Ve),I.props=d,I.state=Ve,I.context=ge,d=Ze):(typeof I.componentDidUpdate!="function"||Q===e.memoizedProps&&Fe===e.memoizedState||(t.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||Q===e.memoizedProps&&Fe===e.memoizedState||(t.flags|=1024),d=!1)}return I=d,no(e,t),d=(t.flags&128)!==0,I||d?(I=t.stateNode,n=d&&typeof n.getDerivedStateFromError!="function"?null:I.render(),t.flags|=1,e!==null&&d?(t.child=Za(t,e.child,null,L),t.child=Za(t,null,n,L)):wr(e,t,n,L),t.memoizedState=I.state,e=t.child):e=un(e,t,L),e}function Mf(e,t,n,d){return da(),t.flags|=256,wr(e,t,n,d),t.child}var Tc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Mc(e){return{baseLanes:e,cachePool:Ws()}}function Rc(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=hi),e}function Rf(e,t,n){var d=t.pendingProps,L=!1,I=(t.flags&128)!==0,Q;if((Q=I)||(Q=e!==null&&e.memoizedState===null?!1:(gr.current&2)!==0),Q&&(L=!0,t.flags&=-129),Q=(t.flags&32)!==0,t.flags&=-33,e===null){if(Wt){if(L?Pn(t):Nn(),Wt){var ie=ar,ge;if(ge=ie){e:{for(ge=ie,ie=oi;ge.nodeType!==8;){if(!ie){ie=null;break e}if(ge=Ci(ge.nextSibling),ge===null){ie=null;break e}}ie=ge}ie!==null?(t.memoizedState={dehydrated:ie,treeContext:Pi!==null?{id:bi,overflow:yi}:null,retryLane:536870912,hydrationErrors:null},ge=Fr(18,null,null,0),ge.stateNode=ie,ge.return=t,t.child=ge,Sr=t,ar=null,ge=!0):ge=!1}ge||an(t)}if(ie=t.memoizedState,ie!==null&&(ie=ie.dehydrated,ie!==null))return du(ie)?t.lanes=32:t.lanes=536870912,null;on(t)}return ie=d.children,d=d.fallback,L?(Nn(),L=t.mode,ie=ao({mode:"hidden",children:ie},L),d=zi(d,L,n,null),ie.return=t,d.return=t,ie.sibling=d,t.child=ie,L=t.child,L.memoizedState=Mc(n),L.childLanes=Rc(e,Q,n),t.memoizedState=Tc,d):(Pn(t),Oc(t,ie))}if(ge=e.memoizedState,ge!==null&&(ie=ge.dehydrated,ie!==null)){if(I)t.flags&256?(Pn(t),t.flags&=-257,t=Dc(e,t,n)):t.memoizedState!==null?(Nn(),t.child=e.child,t.flags|=128,t=null):(Nn(),L=d.fallback,ie=t.mode,d=ao({mode:"visible",children:d.children},ie),L=zi(L,ie,n,null),L.flags|=2,d.return=t,L.return=t,d.sibling=L,t.child=d,Za(t,e.child,null,n),d=t.child,d.memoizedState=Mc(n),d.childLanes=Rc(e,Q,n),t.memoizedState=Tc,t=L);else if(Pn(t),du(ie)){if(Q=ie.nextSibling&&ie.nextSibling.dataset,Q)var Ne=Q.dgst;Q=Ne,d=Error(c(419)),d.stack="",d.digest=Q,ha({value:d,source:null,stack:null}),t=Dc(e,t,n)}else if(br||Ai(e,t,n,!1),Q=(n&e.childLanes)!==0,br||Q){if(Q=rr,Q!==null&&(d=n&-n,d=(d&42)!==0?1:te(d),d=(d&(Q.suspendedLanes|n))!==0?0:d,d!==0&&d!==ge.retryLane))throw ge.retryLane=d,Yt(e,d),qr(Q,e,d),bf;ie.data==="$?"||Zc(),t=Dc(e,t,n)}else ie.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=ge.treeContext,ar=Ci(ie.nextSibling),Sr=t,Wt=!0,nn=null,oi=!1,e!==null&&(Or[jr++]=bi,Or[jr++]=yi,Or[jr++]=Pi,bi=e.id,yi=e.overflow,Pi=t),t=Oc(t,d.children),t.flags|=4096);return t}return L?(Nn(),L=d.fallback,ie=t.mode,ge=e.child,Ne=ge.sibling,d=si(ge,{mode:"hidden",children:d.children}),d.subtreeFlags=ge.subtreeFlags&65011712,Ne!==null?L=si(Ne,L):(L=zi(L,ie,n,null),L.flags|=2),L.return=t,d.return=t,d.sibling=L,t.child=d,d=L,L=t.child,ie=e.child.memoizedState,ie===null?ie=Mc(n):(ge=ie.cachePool,ge!==null?(Ne=cr._currentValue,ge=ge.parent!==Ne?{parent:Ne,pool:Ne}:ge):ge=Ws(),ie={baseLanes:ie.baseLanes|n,cachePool:ge}),L.memoizedState=ie,L.childLanes=Rc(e,Q,n),t.memoizedState=Tc,d):(Pn(t),n=e.child,e=n.sibling,n=si(n,{mode:"visible",children:d.children}),n.return=t,n.sibling=null,e!==null&&(Q=t.deletions,Q===null?(t.deletions=[e],t.flags|=16):Q.push(e)),t.child=n,t.memoizedState=null,n)}function Oc(e,t){return t=ao({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function ao(e,t){return e=Fr(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Dc(e,t,n){return Za(t,e.child,null,n),e=Oc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Of(e,t,n){e.lanes|=t;var d=e.alternate;d!==null&&(d.lanes|=t),Va(e.return,t,n)}function Lc(e,t,n,d,L){var I=e.memoizedState;I===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:d,tail:n,tailMode:L}:(I.isBackwards=t,I.rendering=null,I.renderingStartTime=0,I.last=d,I.tail=n,I.tailMode=L)}function Df(e,t,n){var d=t.pendingProps,L=d.revealOrder,I=d.tail;if(wr(e,t,d.children,n),d=gr.current,(d&2)!==0)d=d&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Of(e,n,t);else if(e.tag===19)Of(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}d&=1}switch(ne(gr,d),L){case"forwards":for(n=t.child,L=null;n!==null;)e=n.alternate,e!==null&&to(e)===null&&(L=n),n=n.sibling;n=L,n===null?(L=t.child,t.child=null):(L=n.sibling,n.sibling=null),Lc(t,!1,L,n,I);break;case"backwards":for(n=null,L=t.child,t.child=null;L!==null;){if(e=L.alternate,e!==null&&to(e)===null){t.child=L;break}e=L.sibling,L.sibling=n,n=L,L=e}Lc(t,!0,n,null,I);break;case"together":Lc(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function un(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),jn|=t.lanes,(n&t.childLanes)===0)if(e!==null){if(Ai(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(c(153));if(t.child!==null){for(e=t.child,n=si(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=si(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function zc(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&On(e)))}function oh(e,t,n){switch(t.tag){case 3:ce(t,t.stateNode.containerInfo),ui(t,cr,e.memoizedState.cache),da();break;case 27:case 5:De(t);break;case 4:ce(t,t.stateNode.containerInfo);break;case 10:ui(t,t.type,t.memoizedProps.value);break;case 13:var d=t.memoizedState;if(d!==null)return d.dehydrated!==null?(Pn(t),t.flags|=128,null):(n&t.child.childLanes)!==0?Rf(e,t,n):(Pn(t),e=un(e,t,n),e!==null?e.sibling:null);Pn(t);break;case 19:var L=(e.flags&128)!==0;if(d=(n&t.childLanes)!==0,d||(Ai(e,t,n,!1),d=(n&t.childLanes)!==0),L){if(d)return Df(e,t,n);t.flags|=128}if(L=t.memoizedState,L!==null&&(L.rendering=null,L.tail=null,L.lastEffect=null),ne(gr,gr.current),d)break;return null;case 22:case 23:return t.lanes=0,Sf(e,t,n);case 24:ui(t,cr,e.memoizedState.cache)}return un(e,t,n)}function Lf(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)br=!0;else{if(!zc(e,n)&&(t.flags&128)===0)return br=!1,oh(e,t,n);br=(e.flags&131072)!==0}else br=!1,Wt&&(t.flags&1048576)!==0&&jl(t,Rn,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var d=t.elementType,L=d._init;if(d=L(d._payload),t.type=d,typeof d=="function")Ds(d)?(e=xa(d,e),t.tag=1,t=Tf(null,t,d,e,n)):(t.tag=0,t=Cc(null,t,d,e,n));else{if(d!=null){if(L=d.$$typeof,L===b){t.tag=11,t=yf(null,t,d,e,n);break e}else if(L===E){t.tag=14,t=Ef(null,t,d,e,n);break e}}throw t=K(d)||d,Error(c(306,t,""))}}return t;case 0:return Cc(e,t,t.type,t.pendingProps,n);case 1:return d=t.type,L=xa(d,t.pendingProps),Tf(e,t,d,L,n);case 3:e:{if(ce(t,t.stateNode.containerInfo),e===null)throw Error(c(387));d=t.pendingProps;var I=t.memoizedState;L=I.element,Ie(e,t),St(t,d,null,n);var Q=t.memoizedState;if(d=Q.cache,ui(t,cr,d),d!==I.cache&&Bs(t,[cr],n,!0),Ot(),d=Q.element,I.isDehydrated)if(I={element:d,isDehydrated:!1,cache:Q.cache},t.updateQueue.baseState=I,t.memoizedState=I,t.flags&256){t=Mf(e,t,d,n);break e}else if(d!==L){L=Nr(Error(c(424)),t),ha(L),t=Mf(e,t,d,n);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(ar=Ci(e.firstChild),Sr=t,Wt=!0,nn=null,oi=!0,n=uf(t,null,d,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(da(),d===L){t=un(e,t,n);break e}wr(e,t,d,n)}t=t.child}return t;case 26:return no(e,t),e===null?(n=Id(t.type,null,t.pendingProps,null))?t.memoizedState=n:Wt||(n=t.type,e=t.pendingProps,d=bo(de.current).createElement(n),d[it]=t,d[vt]=e,Tr(d,n,e),Gt(d),t.stateNode=d):t.memoizedState=Id(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return De(t),e===null&&Wt&&(d=t.stateNode=zd(t.type,t.pendingProps,de.current),Sr=t,oi=!0,L=ar,Hn(t.type)?(hu=L,ar=Ci(d.firstChild)):ar=L),wr(e,t,t.pendingProps.children,n),no(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Wt&&((L=d=ar)&&(d=Ih(d,t.type,t.pendingProps,oi),d!==null?(t.stateNode=d,Sr=t,ar=Ci(d.firstChild),oi=!1,L=!0):L=!1),L||an(t)),De(t),L=t.type,I=t.pendingProps,Q=e!==null?e.memoizedProps:null,d=I.children,cu(L,I)?d=null:Q!==null&&cu(L,Q)&&(t.flags|=32),t.memoizedState!==null&&(L=oc(e,t,eh,null,null,n),ul._currentValue=L),no(e,t),wr(e,t,d,n),t.child;case 6:return e===null&&Wt&&((e=n=ar)&&(n=Bh(n,t.pendingProps,oi),n!==null?(t.stateNode=n,Sr=t,ar=null,e=!0):e=!1),e||an(t)),null;case 13:return Rf(e,t,n);case 4:return ce(t,t.stateNode.containerInfo),d=t.pendingProps,e===null?t.child=Za(t,null,d,n):wr(e,t,d,n),t.child;case 11:return yf(e,t,t.type,t.pendingProps,n);case 7:return wr(e,t,t.pendingProps,n),t.child;case 8:return wr(e,t,t.pendingProps.children,n),t.child;case 12:return wr(e,t,t.pendingProps.children,n),t.child;case 10:return d=t.pendingProps,ui(t,t.type,d.value),wr(e,t,d.children,n),t.child;case 9:return L=t.type._context,d=t.pendingProps.children,sn(t),L=_r(L),d=d(L),t.flags|=1,wr(e,t,d,n),t.child;case 14:return Ef(e,t,t.type,t.pendingProps,n);case 15:return Af(e,t,t.type,t.pendingProps,n);case 19:return Df(e,t,n);case 31:return d=t.pendingProps,n=t.mode,d={mode:d.mode,children:d.children},e===null?(n=ao(d,n),n.ref=t.ref,t.child=n,n.return=t,t=n):(n=si(e.child,d),n.ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return Sf(e,t,n);case 24:return sn(t),d=_r(cr),e===null?(L=ka(),L===null&&(L=rr,I=Us(),L.pooledCache=I,I.refCount++,I!==null&&(L.pooledCacheLanes|=n),L=I),t.memoizedState={parent:d,cache:L},Ee(t),ui(t,cr,L)):((e.lanes&n)!==0&&(Ie(e,t),St(t,null,null,n),Ot()),L=e.memoizedState,I=t.memoizedState,L.parent!==d?(L={parent:d,cache:d},t.memoizedState=L,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=L),ui(t,cr,d)):(d=I.cache,ui(t,cr,d),d!==L.cache&&Bs(t,[cr],n,!0))),wr(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(c(156,t.tag))}function fn(e){e.flags|=4}function zf(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Gd(t)){if(t=di.current,t!==null&&((jt&4194048)===jt?Ii!==null:(jt&62914560)!==jt&&(jt&536870912)===0||t!==Ii))throw oe=$,kl;e.flags|=8192}}function so(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?ee():536870912,e.lanes|=t,qa|=t)}function Zs(e,t){if(!Wt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var d=null;n!==null;)n.alternate!==null&&(d=n),n=n.sibling;d===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:d.sibling=null}}function lr(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,d=0;if(t)for(var L=e.child;L!==null;)n|=L.lanes|L.childLanes,d|=L.subtreeFlags&65011712,d|=L.flags&65011712,L.return=e,L=L.sibling;else for(L=e.child;L!==null;)n|=L.lanes|L.childLanes,d|=L.subtreeFlags,d|=L.flags,L.return=e,L=L.sibling;return e.subtreeFlags|=d,e.childLanes=n,t}function ch(e,t,n){var d=t.pendingProps;switch(zs(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lr(t),null;case 1:return lr(t),null;case 3:return n=t.stateNode,d=null,e!==null&&(d=e.memoizedState.cache),t.memoizedState.cache!==d&&(t.flags|=2048),Ei(cr),pe(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(fa(t)?fn(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Ns())),lr(t),null;case 26:return n=t.memoizedState,e===null?(fn(t),n!==null?(lr(t),zf(t,n)):(lr(t),t.flags&=-16777217)):n?n!==e.memoizedState?(fn(t),lr(t),zf(t,n)):(lr(t),t.flags&=-16777217):(e.memoizedProps!==d&&fn(t),lr(t),t.flags&=-16777217),null;case 27:we(t),n=de.current;var L=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==d&&fn(t);else{if(!d){if(t.stateNode===null)throw Error(c(166));return lr(t),null}e=se.current,fa(t)?Gl(t):(e=zd(L,d,n),t.stateNode=e,fn(t))}return lr(t),null;case 5:if(we(t),n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==d&&fn(t);else{if(!d){if(t.stateNode===null)throw Error(c(166));return lr(t),null}if(e=se.current,fa(t))Gl(t);else{switch(L=bo(de.current),e){case 1:e=L.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=L.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=L.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=L.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":e=L.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof d.is=="string"?L.createElement("select",{is:d.is}):L.createElement("select"),d.multiple?e.multiple=!0:d.size&&(e.size=d.size);break;default:e=typeof d.is=="string"?L.createElement(n,{is:d.is}):L.createElement(n)}}e[it]=t,e[vt]=d;e:for(L=t.child;L!==null;){if(L.tag===5||L.tag===6)e.appendChild(L.stateNode);else if(L.tag!==4&&L.tag!==27&&L.child!==null){L.child.return=L,L=L.child;continue}if(L===t)break e;for(;L.sibling===null;){if(L.return===null||L.return===t)break e;L=L.return}L.sibling.return=L.return,L=L.sibling}t.stateNode=e;e:switch(Tr(e,n,d),n){case"button":case"input":case"select":case"textarea":e=!!d.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&fn(t)}}return lr(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==d&&fn(t);else{if(typeof d!="string"&&t.stateNode===null)throw Error(c(166));if(e=de.current,fa(t)){if(e=t.stateNode,n=t.memoizedProps,d=null,L=Sr,L!==null)switch(L.tag){case 27:case 5:d=L.memoizedProps}e[it]=t,e=!!(e.nodeValue===n||d!==null&&d.suppressHydrationWarning===!0||Cd(e.nodeValue,n)),e||an(t)}else e=bo(e).createTextNode(d),e[it]=t,t.stateNode=e}return lr(t),null;case 13:if(d=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(L=fa(t),d!==null&&d.dehydrated!==null){if(e===null){if(!L)throw Error(c(318));if(L=t.memoizedState,L=L!==null?L.dehydrated:null,!L)throw Error(c(317));L[it]=t}else da(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;lr(t),L=!1}else L=Ns(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=L),L=!0;if(!L)return t.flags&256?(on(t),t):(on(t),null)}if(on(t),(t.flags&128)!==0)return t.lanes=n,t;if(n=d!==null,e=e!==null&&e.memoizedState!==null,n){d=t.child,L=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(L=d.alternate.memoizedState.cachePool.pool);var I=null;d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(I=d.memoizedState.cachePool.pool),I!==L&&(d.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),so(t,t.updateQueue),lr(t),null;case 4:return pe(),e===null&&nu(t.stateNode.containerInfo),lr(t),null;case 10:return Ei(t.type),lr(t),null;case 19:if(Z(gr),L=t.memoizedState,L===null)return lr(t),null;if(d=(t.flags&128)!==0,I=L.rendering,I===null)if(d)Zs(L,!1);else{if(or!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(I=to(e),I!==null){for(t.flags|=128,Zs(L,!1),e=I.updateQueue,t.updateQueue=e,so(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)Fl(n,e),n=n.sibling;return ne(gr,gr.current&1|2),t.child}e=e.sibling}L.tail!==null&&Xe()>co&&(t.flags|=128,d=!0,Zs(L,!1),t.lanes=4194304)}else{if(!d)if(e=to(I),e!==null){if(t.flags|=128,d=!0,e=e.updateQueue,t.updateQueue=e,so(t,e),Zs(L,!0),L.tail===null&&L.tailMode==="hidden"&&!I.alternate&&!Wt)return lr(t),null}else 2*Xe()-L.renderingStartTime>co&&n!==536870912&&(t.flags|=128,d=!0,Zs(L,!1),t.lanes=4194304);L.isBackwards?(I.sibling=t.child,t.child=I):(e=L.last,e!==null?e.sibling=I:t.child=I,L.last=I)}return L.tail!==null?(t=L.tail,L.rendering=t,L.tail=t.sibling,L.renderingStartTime=Xe(),t.sibling=null,e=gr.current,ne(gr,d?e&1|2:e&1),t):(lr(t),null);case 22:case 23:return on(t),Xt(),d=t.memoizedState!==null,e!==null?e.memoizedState!==null!==d&&(t.flags|=8192):d&&(t.flags|=8192),d?(n&536870912)!==0&&(t.flags&128)===0&&(lr(t),t.subtreeFlags&6&&(t.flags|=8192)):lr(t),n=t.updateQueue,n!==null&&so(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),d=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(d=t.memoizedState.cachePool.pool),d!==n&&(t.flags|=2048),e!==null&&Z(Ni),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Ei(cr),lr(t),null;case 25:return null;case 30:return null}throw Error(c(156,t.tag))}function uh(e,t){switch(zs(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ei(cr),pe(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return we(t),null;case 13:if(on(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(c(340));da()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Z(gr),null;case 4:return pe(),null;case 10:return Ei(t.type),null;case 22:case 23:return on(t),Xt(),e!==null&&Z(Ni),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Ei(cr),null;case 25:return null;default:return null}}function Pf(e,t){switch(zs(t),t.tag){case 3:Ei(cr),pe();break;case 26:case 27:case 5:we(t);break;case 4:pe();break;case 13:on(t);break;case 19:Z(gr);break;case 10:Ei(t.type);break;case 22:case 23:on(t),Xt(),e!==null&&Z(Ni);break;case 24:Ei(cr)}}function $s(e,t){try{var n=t.updateQueue,d=n!==null?n.lastEffect:null;if(d!==null){var L=d.next;n=L;do{if((n.tag&e)===e){d=void 0;var I=n.create,Q=n.inst;d=I(),Q.destroy=d}n=n.next}while(n!==L)}}catch(ie){tr(t,t.return,ie)}}function In(e,t,n){try{var d=t.updateQueue,L=d!==null?d.lastEffect:null;if(L!==null){var I=L.next;d=I;do{if((d.tag&e)===e){var Q=d.inst,ie=Q.destroy;if(ie!==void 0){Q.destroy=void 0,L=t;var ge=n,Ne=ie;try{Ne()}catch(Ze){tr(L,ge,Ze)}}}d=d.next}while(d!==I)}}catch(Ze){tr(t,t.return,Ze)}}function Nf(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{Lt(t,n)}catch(d){tr(e,e.return,d)}}}function If(e,t,n){n.props=xa(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(d){tr(e,t,d)}}function Qs(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var d=e.stateNode;break;case 30:d=e.stateNode;break;default:d=e.stateNode}typeof n=="function"?e.refCleanup=n(d):n.current=d}}catch(L){tr(e,t,L)}}function Bi(e,t){var n=e.ref,d=e.refCleanup;if(n!==null)if(typeof d=="function")try{d()}catch(L){tr(e,t,L)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(L){tr(e,t,L)}else n.current=null}function Bf(e){var t=e.type,n=e.memoizedProps,d=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&d.focus();break e;case"img":n.src?d.src=n.src:n.srcSet&&(d.srcset=n.srcSet)}}catch(L){tr(e,e.return,L)}}function Pc(e,t,n){try{var d=e.stateNode;Dh(d,e.type,n,t),d[vt]=t}catch(L){tr(e,e.return,L)}}function Uf(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Hn(e.type)||e.tag===4}function Nc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Uf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Hn(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ic(e,t,n){var d=e.tag;if(d===5||d===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=_o));else if(d!==4&&(d===27&&Hn(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(Ic(e,t,n),e=e.sibling;e!==null;)Ic(e,t,n),e=e.sibling}function lo(e,t,n){var d=e.tag;if(d===5||d===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(d!==4&&(d===27&&Hn(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(lo(e,t,n),e=e.sibling;e!==null;)lo(e,t,n),e=e.sibling}function Ff(e){var t=e.stateNode,n=e.memoizedProps;try{for(var d=e.type,L=t.attributes;L.length;)t.removeAttributeNode(L[0]);Tr(t,d,n),t[it]=e,t[vt]=n}catch(I){tr(e,e.return,I)}}var dn=!1,dr=!1,Bc=!1,jf=typeof WeakSet=="function"?WeakSet:Set,yr=null;function fh(e,t){if(e=e.containerInfo,lu=Co,e=Il(e),za(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var d=n.getSelection&&n.getSelection();if(d&&d.rangeCount!==0){n=d.anchorNode;var L=d.anchorOffset,I=d.focusNode;d=d.focusOffset;try{n.nodeType,I.nodeType}catch{n=null;break e}var Q=0,ie=-1,ge=-1,Ne=0,Ze=0,qe=e,Fe=null;t:for(;;){for(var Ve;qe!==n||L!==0&&qe.nodeType!==3||(ie=Q+L),qe!==I||d!==0&&qe.nodeType!==3||(ge=Q+d),qe.nodeType===3&&(Q+=qe.nodeValue.length),(Ve=qe.firstChild)!==null;)Fe=qe,qe=Ve;for(;;){if(qe===e)break t;if(Fe===n&&++Ne===L&&(ie=Q),Fe===I&&++Ze===d&&(ge=Q),(Ve=qe.nextSibling)!==null)break;qe=Fe,Fe=qe.parentNode}qe=Ve}n=ie===-1||ge===-1?null:{start:ie,end:ge}}else n=null}n=n||{start:0,end:0}}else n=null;for(ou={focusedElem:e,selectionRange:n},Co=!1,yr=t;yr!==null;)if(t=yr,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,yr=e;else for(;yr!==null;){switch(t=yr,I=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&I!==null){e=void 0,n=t,L=I.memoizedProps,I=I.memoizedState,d=n.stateNode;try{var At=xa(n.type,L,n.elementType===n.type);e=d.getSnapshotBeforeUpdate(At,I),d.__reactInternalSnapshotBeforeUpdate=e}catch(yt){tr(n,n.return,yt)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)fu(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":fu(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(c(163))}if(e=t.sibling,e!==null){e.return=t.return,yr=e;break}yr=t.return}}function Gf(e,t,n){var d=n.flags;switch(n.tag){case 0:case 11:case 15:Bn(e,n),d&4&&$s(5,n);break;case 1:if(Bn(e,n),d&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(Q){tr(n,n.return,Q)}else{var L=xa(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(L,t,e.__reactInternalSnapshotBeforeUpdate)}catch(Q){tr(n,n.return,Q)}}d&64&&Nf(n),d&512&&Qs(n,n.return);break;case 3:if(Bn(e,n),d&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{Lt(e,t)}catch(Q){tr(n,n.return,Q)}}break;case 27:t===null&&d&4&&Ff(n);case 26:case 5:Bn(e,n),t===null&&d&4&&Bf(n),d&512&&Qs(n,n.return);break;case 12:Bn(e,n);break;case 13:Bn(e,n),d&4&&Hf(e,n),d&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=bh.bind(null,n),Uh(e,n))));break;case 22:if(d=n.memoizedState!==null||dn,!d){t=t!==null&&t.memoizedState!==null||dr,L=dn;var I=dr;dn=d,(dr=t)&&!I?Un(e,n,(n.subtreeFlags&8772)!==0):Bn(e,n),dn=L,dr=I}break;case 30:break;default:Bn(e,n)}}function Wf(e){var t=e.alternate;t!==null&&(e.alternate=null,Wf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Hr(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var sr=null,Wr=!1;function hn(e,t,n){for(n=n.child;n!==null;)Vf(e,t,n),n=n.sibling}function Vf(e,t,n){if(J&&typeof J.onCommitFiberUnmount=="function")try{J.onCommitFiberUnmount(ot,n)}catch{}switch(n.tag){case 26:dr||Bi(n,t),hn(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:dr||Bi(n,t);var d=sr,L=Wr;Hn(n.type)&&(sr=n.stateNode,Wr=!1),hn(e,t,n),sl(n.stateNode),sr=d,Wr=L;break;case 5:dr||Bi(n,t);case 6:if(d=sr,L=Wr,sr=null,hn(e,t,n),sr=d,Wr=L,sr!==null)if(Wr)try{(sr.nodeType===9?sr.body:sr.nodeName==="HTML"?sr.ownerDocument.body:sr).removeChild(n.stateNode)}catch(I){tr(n,t,I)}else try{sr.removeChild(n.stateNode)}catch(I){tr(n,t,I)}break;case 18:sr!==null&&(Wr?(e=sr,Dd(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),ml(e)):Dd(sr,n.stateNode));break;case 4:d=sr,L=Wr,sr=n.stateNode.containerInfo,Wr=!0,hn(e,t,n),sr=d,Wr=L;break;case 0:case 11:case 14:case 15:dr||In(2,n,t),dr||In(4,n,t),hn(e,t,n);break;case 1:dr||(Bi(n,t),d=n.stateNode,typeof d.componentWillUnmount=="function"&&If(n,t,d)),hn(e,t,n);break;case 21:hn(e,t,n);break;case 22:dr=(d=dr)||n.memoizedState!==null,hn(e,t,n),dr=d;break;default:hn(e,t,n)}}function Hf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{ml(e)}catch(n){tr(t,t.return,n)}}function dh(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new jf),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new jf),t;default:throw Error(c(435,e.tag))}}function Uc(e,t){var n=dh(e);t.forEach(function(d){var L=yh.bind(null,e,d);n.has(d)||(n.add(d),d.then(L,L))})}function Zr(e,t){var n=t.deletions;if(n!==null)for(var d=0;d<n.length;d++){var L=n[d],I=e,Q=t,ie=Q;e:for(;ie!==null;){switch(ie.tag){case 27:if(Hn(ie.type)){sr=ie.stateNode,Wr=!1;break e}break;case 5:sr=ie.stateNode,Wr=!1;break e;case 3:case 4:sr=ie.stateNode.containerInfo,Wr=!0;break e}ie=ie.return}if(sr===null)throw Error(c(160));Vf(I,Q,L),sr=null,Wr=!1,I=L.alternate,I!==null&&(I.return=null),L.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)kf(t,e),t=t.sibling}var wi=null;function kf(e,t){var n=e.alternate,d=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Zr(t,e),$r(e),d&4&&(In(3,e,e.return),$s(3,e),In(5,e,e.return));break;case 1:Zr(t,e),$r(e),d&512&&(dr||n===null||Bi(n,n.return)),d&64&&dn&&(e=e.updateQueue,e!==null&&(d=e.callbacks,d!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?d:n.concat(d))));break;case 26:var L=wi;if(Zr(t,e),$r(e),d&512&&(dr||n===null||Bi(n,n.return)),d&4){var I=n!==null?n.memoizedState:null;if(d=e.memoizedState,n===null)if(d===null)if(e.stateNode===null){e:{d=e.type,n=e.memoizedProps,L=L.ownerDocument||L;t:switch(d){case"title":I=L.getElementsByTagName("title")[0],(!I||I[Ut]||I[it]||I.namespaceURI==="http://www.w3.org/2000/svg"||I.hasAttribute("itemprop"))&&(I=L.createElement(d),L.head.insertBefore(I,L.querySelector("head > title"))),Tr(I,d,n),I[it]=e,Gt(I),d=I;break e;case"link":var Q=Fd("link","href",L).get(d+(n.href||""));if(Q){for(var ie=0;ie<Q.length;ie++)if(I=Q[ie],I.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&I.getAttribute("rel")===(n.rel==null?null:n.rel)&&I.getAttribute("title")===(n.title==null?null:n.title)&&I.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){Q.splice(ie,1);break t}}I=L.createElement(d),Tr(I,d,n),L.head.appendChild(I);break;case"meta":if(Q=Fd("meta","content",L).get(d+(n.content||""))){for(ie=0;ie<Q.length;ie++)if(I=Q[ie],I.getAttribute("content")===(n.content==null?null:""+n.content)&&I.getAttribute("name")===(n.name==null?null:n.name)&&I.getAttribute("property")===(n.property==null?null:n.property)&&I.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&I.getAttribute("charset")===(n.charSet==null?null:n.charSet)){Q.splice(ie,1);break t}}I=L.createElement(d),Tr(I,d,n),L.head.appendChild(I);break;default:throw Error(c(468,d))}I[it]=e,Gt(I),d=I}e.stateNode=d}else jd(L,e.type,e.stateNode);else e.stateNode=Ud(L,d,e.memoizedProps);else I!==d?(I===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):I.count--,d===null?jd(L,e.type,e.stateNode):Ud(L,d,e.memoizedProps)):d===null&&e.stateNode!==null&&Pc(e,e.memoizedProps,n.memoizedProps)}break;case 27:Zr(t,e),$r(e),d&512&&(dr||n===null||Bi(n,n.return)),n!==null&&d&4&&Pc(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Zr(t,e),$r(e),d&512&&(dr||n===null||Bi(n,n.return)),e.flags&32){L=e.stateNode;try{Vi(L,"")}catch(Ve){tr(e,e.return,Ve)}}d&4&&e.stateNode!=null&&(L=e.memoizedProps,Pc(e,L,n!==null?n.memoizedProps:L)),d&1024&&(Bc=!0);break;case 6:if(Zr(t,e),$r(e),d&4){if(e.stateNode===null)throw Error(c(162));d=e.memoizedProps,n=e.stateNode;try{n.nodeValue=d}catch(Ve){tr(e,e.return,Ve)}}break;case 3:if(Ao=null,L=wi,wi=yo(t.containerInfo),Zr(t,e),wi=L,$r(e),d&4&&n!==null&&n.memoizedState.isDehydrated)try{ml(t.containerInfo)}catch(Ve){tr(e,e.return,Ve)}Bc&&(Bc=!1,Kf(e));break;case 4:d=wi,wi=yo(e.stateNode.containerInfo),Zr(t,e),$r(e),wi=d;break;case 12:Zr(t,e),$r(e);break;case 13:Zr(t,e),$r(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Hc=Xe()),d&4&&(d=e.updateQueue,d!==null&&(e.updateQueue=null,Uc(e,d)));break;case 22:L=e.memoizedState!==null;var ge=n!==null&&n.memoizedState!==null,Ne=dn,Ze=dr;if(dn=Ne||L,dr=Ze||ge,Zr(t,e),dr=Ze,dn=Ne,$r(e),d&8192)e:for(t=e.stateNode,t._visibility=L?t._visibility&-2:t._visibility|1,L&&(n===null||ge||dn||dr||_a(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){ge=n=t;try{if(I=ge.stateNode,L)Q=I.style,typeof Q.setProperty=="function"?Q.setProperty("display","none","important"):Q.display="none";else{ie=ge.stateNode;var qe=ge.memoizedProps.style,Fe=qe!=null&&qe.hasOwnProperty("display")?qe.display:null;ie.style.display=Fe==null||typeof Fe=="boolean"?"":(""+Fe).trim()}}catch(Ve){tr(ge,ge.return,Ve)}}}else if(t.tag===6){if(n===null){ge=t;try{ge.stateNode.nodeValue=L?"":ge.memoizedProps}catch(Ve){tr(ge,ge.return,Ve)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}d&4&&(d=e.updateQueue,d!==null&&(n=d.retryQueue,n!==null&&(d.retryQueue=null,Uc(e,n))));break;case 19:Zr(t,e),$r(e),d&4&&(d=e.updateQueue,d!==null&&(e.updateQueue=null,Uc(e,d)));break;case 30:break;case 21:break;default:Zr(t,e),$r(e)}}function $r(e){var t=e.flags;if(t&2){try{for(var n,d=e.return;d!==null;){if(Uf(d)){n=d;break}d=d.return}if(n==null)throw Error(c(160));switch(n.tag){case 27:var L=n.stateNode,I=Nc(e);lo(e,I,L);break;case 5:var Q=n.stateNode;n.flags&32&&(Vi(Q,""),n.flags&=-33);var ie=Nc(e);lo(e,ie,Q);break;case 3:case 4:var ge=n.stateNode.containerInfo,Ne=Nc(e);Ic(e,Ne,ge);break;default:throw Error(c(161))}}catch(Ze){tr(e,e.return,Ze)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Kf(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Kf(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Bn(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Gf(e,t.alternate,t),t=t.sibling}function _a(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:In(4,t,t.return),_a(t);break;case 1:Bi(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&If(t,t.return,n),_a(t);break;case 27:sl(t.stateNode);case 26:case 5:Bi(t,t.return),_a(t);break;case 22:t.memoizedState===null&&_a(t);break;case 30:_a(t);break;default:_a(t)}e=e.sibling}}function Un(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var d=t.alternate,L=e,I=t,Q=I.flags;switch(I.tag){case 0:case 11:case 15:Un(L,I,n),$s(4,I);break;case 1:if(Un(L,I,n),d=I,L=d.stateNode,typeof L.componentDidMount=="function")try{L.componentDidMount()}catch(Ne){tr(d,d.return,Ne)}if(d=I,L=d.updateQueue,L!==null){var ie=d.stateNode;try{var ge=L.shared.hiddenCallbacks;if(ge!==null)for(L.shared.hiddenCallbacks=null,L=0;L<ge.length;L++)Vt(ge[L],ie)}catch(Ne){tr(d,d.return,Ne)}}n&&Q&64&&Nf(I),Qs(I,I.return);break;case 27:Ff(I);case 26:case 5:Un(L,I,n),n&&d===null&&Q&4&&Bf(I),Qs(I,I.return);break;case 12:Un(L,I,n);break;case 13:Un(L,I,n),n&&Q&4&&Hf(L,I);break;case 22:I.memoizedState===null&&Un(L,I,n),Qs(I,I.return);break;case 30:break;default:Un(L,I,n)}t=t.sibling}}function Fc(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&ma(n))}function jc(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ma(e))}function Ui(e,t,n,d){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Yf(e,t,n,d),t=t.sibling}function Yf(e,t,n,d){var L=t.flags;switch(t.tag){case 0:case 11:case 15:Ui(e,t,n,d),L&2048&&$s(9,t);break;case 1:Ui(e,t,n,d);break;case 3:Ui(e,t,n,d),L&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ma(e)));break;case 12:if(L&2048){Ui(e,t,n,d),e=t.stateNode;try{var I=t.memoizedProps,Q=I.id,ie=I.onPostCommit;typeof ie=="function"&&ie(Q,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(ge){tr(t,t.return,ge)}}else Ui(e,t,n,d);break;case 13:Ui(e,t,n,d);break;case 23:break;case 22:I=t.stateNode,Q=t.alternate,t.memoizedState!==null?I._visibility&2?Ui(e,t,n,d):Js(e,t):I._visibility&2?Ui(e,t,n,d):(I._visibility|=2,$a(e,t,n,d,(t.subtreeFlags&10256)!==0)),L&2048&&Fc(Q,t);break;case 24:Ui(e,t,n,d),L&2048&&jc(t.alternate,t);break;default:Ui(e,t,n,d)}}function $a(e,t,n,d,L){for(L=L&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var I=e,Q=t,ie=n,ge=d,Ne=Q.flags;switch(Q.tag){case 0:case 11:case 15:$a(I,Q,ie,ge,L),$s(8,Q);break;case 23:break;case 22:var Ze=Q.stateNode;Q.memoizedState!==null?Ze._visibility&2?$a(I,Q,ie,ge,L):Js(I,Q):(Ze._visibility|=2,$a(I,Q,ie,ge,L)),L&&Ne&2048&&Fc(Q.alternate,Q);break;case 24:$a(I,Q,ie,ge,L),L&&Ne&2048&&jc(Q.alternate,Q);break;default:$a(I,Q,ie,ge,L)}t=t.sibling}}function Js(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,d=t,L=d.flags;switch(d.tag){case 22:Js(n,d),L&2048&&Fc(d.alternate,d);break;case 24:Js(n,d),L&2048&&jc(d.alternate,d);break;default:Js(n,d)}t=t.sibling}}var qs=8192;function Qa(e){if(e.subtreeFlags&qs)for(e=e.child;e!==null;)Xf(e),e=e.sibling}function Xf(e){switch(e.tag){case 26:Qa(e),e.flags&qs&&e.memoizedState!==null&&Qh(wi,e.memoizedState,e.memoizedProps);break;case 5:Qa(e);break;case 3:case 4:var t=wi;wi=yo(e.stateNode.containerInfo),Qa(e),wi=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=qs,qs=16777216,Qa(e),qs=t):Qa(e));break;default:Qa(e)}}function Zf(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function el(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var d=t[n];yr=d,Qf(d,e)}Zf(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)$f(e),e=e.sibling}function $f(e){switch(e.tag){case 0:case 11:case 15:el(e),e.flags&2048&&In(9,e,e.return);break;case 3:el(e);break;case 12:el(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,oo(e)):el(e);break;default:el(e)}}function oo(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var n=0;n<t.length;n++){var d=t[n];yr=d,Qf(d,e)}Zf(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:In(8,t,t.return),oo(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,oo(t));break;default:oo(t)}e=e.sibling}}function Qf(e,t){for(;yr!==null;){var n=yr;switch(n.tag){case 0:case 11:case 15:In(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var d=n.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:ma(n.memoizedState.cache)}if(d=n.child,d!==null)d.return=n,yr=d;else e:for(n=e;yr!==null;){d=yr;var L=d.sibling,I=d.return;if(Wf(d),d===n){yr=null;break e}if(L!==null){L.return=I,yr=L;break e}yr=I}}}var hh={getCacheForType:function(e){var t=_r(cr),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n}},mh=typeof WeakMap=="function"?WeakMap:Map,Zt=0,rr=null,Pt=null,jt=0,$t=0,Qr=null,Fn=!1,Ja=!1,Gc=!1,mn=0,or=0,jn=0,ba=0,Wc=0,hi=0,qa=0,tl=null,Vr=null,Vc=!1,Hc=0,co=1/0,uo=null,Gn=null,Cr=0,Wn=null,es=null,ts=0,kc=0,Kc=null,Jf=null,rl=0,Yc=null;function Jr(){if((Zt&2)!==0&&jt!==0)return jt&-jt;if(U.T!==null){var e=Dn;return e!==0?e:eu()}return Pe()}function qf(){hi===0&&(hi=(jt&536870912)===0||Wt?Ue():536870912);var e=di.current;return e!==null&&(e.flags|=32),hi}function qr(e,t,n){(e===rr&&($t===2||$t===9)||e.cancelPendingCommit!==null)&&(rs(e,0),Vn(e,jt,hi,!1)),st(e,n),((Zt&2)===0||e!==rr)&&(e===rr&&((Zt&2)===0&&(ba|=n),or===4&&Vn(e,jt,hi,!1)),Fi(e))}function ed(e,t,n){if((Zt&6)!==0)throw Error(c(327));var d=!n&&(t&124)===0&&(t&e.expiredLanes)===0||Ke(e,t),L=d?vh(e,t):$c(e,t,!0),I=d;do{if(L===0){Ja&&!d&&Vn(e,t,0,!1);break}else{if(n=e.current.alternate,I&&!ph(n)){L=$c(e,t,!1),I=!1;continue}if(L===2){if(I=t,e.errorRecoveryDisabledLanes&I)var Q=0;else Q=e.pendingLanes&-536870913,Q=Q!==0?Q:Q&536870912?536870912:0;if(Q!==0){t=Q;e:{var ie=e;L=tl;var ge=ie.current.memoizedState.isDehydrated;if(ge&&(rs(ie,Q).flags|=256),Q=$c(ie,Q,!1),Q!==2){if(Gc&&!ge){ie.errorRecoveryDisabledLanes|=I,ba|=I,L=4;break e}I=Vr,Vr=L,I!==null&&(Vr===null?Vr=I:Vr.push.apply(Vr,I))}L=Q}if(I=!1,L!==2)continue}}if(L===1){rs(e,0),Vn(e,t,0,!0);break}e:{switch(d=e,I=L,I){case 0:case 1:throw Error(c(345));case 4:if((t&4194048)!==t)break;case 6:Vn(d,t,hi,!Fn);break e;case 2:Vr=null;break;case 3:case 5:break;default:throw Error(c(329))}if((t&62914560)===t&&(L=Hc+300-Xe(),10<L)){if(Vn(d,t,hi,!Fn),Oe(d,0,!0)!==0)break e;d.timeoutHandle=Rd(td.bind(null,d,n,Vr,uo,Vc,t,hi,ba,qa,Fn,I,2,-0,0),L);break e}td(d,n,Vr,uo,Vc,t,hi,ba,qa,Fn,I,0,-0,0)}}break}while(!0);Fi(e)}function td(e,t,n,d,L,I,Q,ie,ge,Ne,Ze,qe,Fe,Ve){if(e.timeoutHandle=-1,qe=t.subtreeFlags,(qe&8192||(qe&16785408)===16785408)&&(cl={stylesheets:null,count:0,unsuspend:$h},Xf(t),qe=Jh(),qe!==null)){e.cancelPendingCommit=qe(od.bind(null,e,t,I,n,d,L,Q,ie,ge,Ze,1,Fe,Ve)),Vn(e,I,Q,!Ne);return}od(e,t,I,n,d,L,Q,ie,ge)}function ph(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var d=0;d<n.length;d++){var L=n[d],I=L.getSnapshot;L=L.value;try{if(!zr(I(),L))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Vn(e,t,n,d){t&=~Wc,t&=~ba,e.suspendedLanes|=t,e.pingedLanes&=~t,d&&(e.warmLanes|=t),d=e.expirationTimes;for(var L=t;0<L;){var I=31-le(L),Q=1<<I;d[I]=-1,L&=~Q}n!==0&&Te(e,n,t)}function fo(){return(Zt&6)===0?(il(0),!1):!0}function Xc(){if(Pt!==null){if($t===0)var e=Pt.return;else e=Pt,Xr=Yr=null,fc(e),Xa=null,Ys=0,e=Pt;for(;e!==null;)Pf(e.alternate,e),e=e.return;Pt=null}}function rs(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,zh(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Xc(),rr=e,Pt=n=si(e.current,null),jt=t,$t=0,Qr=null,Fn=!1,Ja=Ke(e,t),Gc=!1,qa=hi=Wc=ba=jn=or=0,Vr=tl=null,Vc=!1,(t&8)!==0&&(t|=t&32);var d=e.entangledLanes;if(d!==0)for(e=e.entanglements,d&=t;0<d;){var L=31-le(d),I=1<<L;t|=e[L],d&=~I}return mn=t,Cn(),n}function rd(e,t){ct=null,U.H=Jl,t===zn||t===C?(t=Be(),$t=3):t===kl?(t=Be(),$t=4):$t=t===bf?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Qr=t,Pt===null&&(or=1,io(e,Nr(t,e.current)))}function id(){var e=U.H;return U.H=Jl,e===null?Jl:e}function nd(){var e=U.A;return U.A=hh,e}function Zc(){or=4,Fn||(jt&4194048)!==jt&&di.current!==null||(Ja=!0),(jn&134217727)===0&&(ba&134217727)===0||rr===null||Vn(rr,jt,hi,!1)}function $c(e,t,n){var d=Zt;Zt|=2;var L=id(),I=nd();(rr!==e||jt!==t)&&(uo=null,rs(e,t)),t=!1;var Q=or;e:do try{if($t!==0&&Pt!==null){var ie=Pt,ge=Qr;switch($t){case 8:Xc(),Q=6;break e;case 3:case 2:case 9:case 6:di.current===null&&(t=!0);var Ne=$t;if($t=0,Qr=null,is(e,ie,ge,Ne),n&&Ja){Q=0;break e}break;default:Ne=$t,$t=0,Qr=null,is(e,ie,ge,Ne)}}gh(),Q=or;break}catch(Ze){rd(e,Ze)}while(!0);return t&&e.shellSuspendCounter++,Xr=Yr=null,Zt=d,U.H=L,U.A=I,Pt===null&&(rr=null,jt=0,Cn()),Q}function gh(){for(;Pt!==null;)ad(Pt)}function vh(e,t){var n=Zt;Zt|=2;var d=id(),L=nd();rr!==e||jt!==t?(uo=null,co=Xe()+500,rs(e,t)):Ja=Ke(e,t);e:do try{if($t!==0&&Pt!==null){t=Pt;var I=Qr;t:switch($t){case 1:$t=0,Qr=null,is(e,t,I,1);break;case 2:case 9:if(N(I)){$t=0,Qr=null,sd(t);break}t=function(){$t!==2&&$t!==9||rr!==e||($t=7),Fi(e)},I.then(t,t);break e;case 3:$t=7;break e;case 4:$t=5;break e;case 7:N(I)?($t=0,Qr=null,sd(t)):($t=0,Qr=null,is(e,t,I,7));break;case 5:var Q=null;switch(Pt.tag){case 26:Q=Pt.memoizedState;case 5:case 27:var ie=Pt;if(!Q||Gd(Q)){$t=0,Qr=null;var ge=ie.sibling;if(ge!==null)Pt=ge;else{var Ne=ie.return;Ne!==null?(Pt=Ne,ho(Ne)):Pt=null}break t}}$t=0,Qr=null,is(e,t,I,5);break;case 6:$t=0,Qr=null,is(e,t,I,6);break;case 8:Xc(),or=6;break e;default:throw Error(c(462))}}xh();break}catch(Ze){rd(e,Ze)}while(!0);return Xr=Yr=null,U.H=d,U.A=L,Zt=n,Pt!==null?0:(rr=null,jt=0,Cn(),or)}function xh(){for(;Pt!==null&&!Ce();)ad(Pt)}function ad(e){var t=Lf(e.alternate,e,mn);e.memoizedProps=e.pendingProps,t===null?ho(e):Pt=t}function sd(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Cf(n,t,t.pendingProps,t.type,void 0,jt);break;case 11:t=Cf(n,t,t.pendingProps,t.type.render,t.ref,jt);break;case 5:fc(t);default:Pf(n,t),t=Pt=Fl(t,mn),t=Lf(n,t,mn)}e.memoizedProps=e.pendingProps,t===null?ho(e):Pt=t}function is(e,t,n,d){Xr=Yr=null,fc(t),Xa=null,Ys=0;var L=t.return;try{if(lh(e,L,t,n,jt)){or=1,io(e,Nr(n,e.current)),Pt=null;return}}catch(I){if(L!==null)throw Pt=L,I;or=1,io(e,Nr(n,e.current)),Pt=null;return}t.flags&32768?(Wt||d===1?e=!0:Ja||(jt&536870912)!==0?e=!1:(Fn=e=!0,(d===2||d===9||d===3||d===6)&&(d=di.current,d!==null&&d.tag===13&&(d.flags|=16384))),ld(t,e)):ho(t)}function ho(e){var t=e;do{if((t.flags&32768)!==0){ld(t,Fn);return}e=t.return;var n=ch(t.alternate,t,mn);if(n!==null){Pt=n;return}if(t=t.sibling,t!==null){Pt=t;return}Pt=t=e}while(t!==null);or===0&&(or=5)}function ld(e,t){do{var n=uh(e.alternate,e);if(n!==null){n.flags&=32767,Pt=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){Pt=e;return}Pt=e=n}while(e!==null);or=6,Pt=null}function od(e,t,n,d,L,I,Q,ie,ge){e.cancelPendingCommit=null;do mo();while(Cr!==0);if((Zt&6)!==0)throw Error(c(327));if(t!==null){if(t===e.current)throw Error(c(177));if(I=t.lanes|t.childLanes,I|=Fa,V(e,n,I,Q,ie,ge),e===rr&&(Pt=rr=null,jt=0),es=t,Wn=e,ts=n,kc=I,Kc=L,Jf=d,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Eh(et,function(){return hd(),null})):(e.callbackNode=null,e.callbackPriority=0),d=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||d){d=U.T,U.T=null,L=W.p,W.p=2,Q=Zt,Zt|=4;try{fh(e,t,n)}finally{Zt=Q,W.p=L,U.T=d}}Cr=1,cd(),ud(),fd()}}function cd(){if(Cr===1){Cr=0;var e=Wn,t=es,n=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||n){n=U.T,U.T=null;var d=W.p;W.p=2;var L=Zt;Zt|=4;try{kf(t,e);var I=ou,Q=Il(e.containerInfo),ie=I.focusedElem,ge=I.selectionRange;if(Q!==ie&&ie&&ie.ownerDocument&&Es(ie.ownerDocument.documentElement,ie)){if(ge!==null&&za(ie)){var Ne=ge.start,Ze=ge.end;if(Ze===void 0&&(Ze=Ne),"selectionStart"in ie)ie.selectionStart=Ne,ie.selectionEnd=Math.min(Ze,ie.value.length);else{var qe=ie.ownerDocument||document,Fe=qe&&qe.defaultView||window;if(Fe.getSelection){var Ve=Fe.getSelection(),At=ie.textContent.length,yt=Math.min(ge.start,At),qt=ge.end===void 0?yt:Math.min(ge.end,At);!Ve.extend&&yt>qt&&(Q=qt,qt=yt,yt=Q);var Le=ys(ie,yt),Ae=ys(ie,qt);if(Le&&Ae&&(Ve.rangeCount!==1||Ve.anchorNode!==Le.node||Ve.anchorOffset!==Le.offset||Ve.focusNode!==Ae.node||Ve.focusOffset!==Ae.offset)){var ze=qe.createRange();ze.setStart(Le.node,Le.offset),Ve.removeAllRanges(),yt>qt?(Ve.addRange(ze),Ve.extend(Ae.node,Ae.offset)):(ze.setEnd(Ae.node,Ae.offset),Ve.addRange(ze))}}}}for(qe=[],Ve=ie;Ve=Ve.parentNode;)Ve.nodeType===1&&qe.push({element:Ve,left:Ve.scrollLeft,top:Ve.scrollTop});for(typeof ie.focus=="function"&&ie.focus(),ie=0;ie<qe.length;ie++){var Qe=qe[ie];Qe.element.scrollLeft=Qe.left,Qe.element.scrollTop=Qe.top}}Co=!!lu,ou=lu=null}finally{Zt=L,W.p=d,U.T=n}}e.current=t,Cr=2}}function ud(){if(Cr===2){Cr=0;var e=Wn,t=es,n=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||n){n=U.T,U.T=null;var d=W.p;W.p=2;var L=Zt;Zt|=4;try{Gf(e,t.alternate,t)}finally{Zt=L,W.p=d,U.T=n}}Cr=3}}function fd(){if(Cr===4||Cr===3){Cr=0,ke();var e=Wn,t=es,n=ts,d=Jf;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Cr=5:(Cr=0,es=Wn=null,dd(e,e.pendingLanes));var L=e.pendingLanes;if(L===0&&(Gn=null),ve(n),t=t.stateNode,J&&typeof J.onCommitFiberRoot=="function")try{J.onCommitFiberRoot(ot,t,void 0,(t.current.flags&128)===128)}catch{}if(d!==null){t=U.T,L=W.p,W.p=2,U.T=null;try{for(var I=e.onRecoverableError,Q=0;Q<d.length;Q++){var ie=d[Q];I(ie.value,{componentStack:ie.stack})}}finally{U.T=t,W.p=L}}(ts&3)!==0&&mo(),Fi(e),L=e.pendingLanes,(n&4194090)!==0&&(L&42)!==0?e===Yc?rl++:(rl=0,Yc=e):rl=0,il(0)}}function dd(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,ma(t)))}function mo(e){return cd(),ud(),fd(),hd()}function hd(){if(Cr!==5)return!1;var e=Wn,t=kc;kc=0;var n=ve(ts),d=U.T,L=W.p;try{W.p=32>n?32:n,U.T=null,n=Kc,Kc=null;var I=Wn,Q=ts;if(Cr=0,es=Wn=null,ts=0,(Zt&6)!==0)throw Error(c(331));var ie=Zt;if(Zt|=4,$f(I.current),Yf(I,I.current,Q,n),Zt=ie,il(0,!1),J&&typeof J.onPostCommitFiberRoot=="function")try{J.onPostCommitFiberRoot(ot,I)}catch{}return!0}finally{W.p=L,U.T=d,dd(e,t)}}function md(e,t,n){t=Nr(n,t),t=wc(e.stateNode,t,2),e=dt(e,t,2),e!==null&&(st(e,2),Fi(e))}function tr(e,t,n){if(e.tag===3)md(e,e,n);else for(;t!==null;){if(t.tag===3){md(t,e,n);break}else if(t.tag===1){var d=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Gn===null||!Gn.has(d))){e=Nr(n,e),n=xf(2),d=dt(t,n,2),d!==null&&(_f(n,d,t,e),st(d,2),Fi(d));break}}t=t.return}}function Qc(e,t,n){var d=e.pingCache;if(d===null){d=e.pingCache=new mh;var L=new Set;d.set(t,L)}else L=d.get(t),L===void 0&&(L=new Set,d.set(t,L));L.has(n)||(Gc=!0,L.add(n),e=_h.bind(null,e,t,n),t.then(e,e))}function _h(e,t,n){var d=e.pingCache;d!==null&&d.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,rr===e&&(jt&n)===n&&(or===4||or===3&&(jt&62914560)===jt&&300>Xe()-Hc?(Zt&2)===0&&rs(e,0):Wc|=n,qa===jt&&(qa=0)),Fi(e)}function pd(e,t){t===0&&(t=ee()),e=Yt(e,t),e!==null&&(st(e,t),Fi(e))}function bh(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),pd(e,n)}function yh(e,t){var n=0;switch(e.tag){case 13:var d=e.stateNode,L=e.memoizedState;L!==null&&(n=L.retryLane);break;case 19:d=e.stateNode;break;case 22:d=e.stateNode._retryCache;break;default:throw Error(c(314))}d!==null&&d.delete(t),pd(e,n)}function Eh(e,t){return ye(e,t)}var po=null,ns=null,Jc=!1,go=!1,qc=!1,ya=0;function Fi(e){e!==ns&&e.next===null&&(ns===null?po=ns=e:ns=ns.next=e),go=!0,Jc||(Jc=!0,Sh())}function il(e,t){if(!qc&&go){qc=!0;do for(var n=!1,d=po;d!==null;){if(e!==0){var L=d.pendingLanes;if(L===0)var I=0;else{var Q=d.suspendedLanes,ie=d.pingedLanes;I=(1<<31-le(42|e)+1)-1,I&=L&~(Q&~ie),I=I&201326741?I&201326741|1:I?I|2:0}I!==0&&(n=!0,_d(d,I))}else I=jt,I=Oe(d,d===rr?I:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(I&3)===0||Ke(d,I)||(n=!0,_d(d,I));d=d.next}while(n);qc=!1}}function Ah(){gd()}function gd(){go=Jc=!1;var e=0;ya!==0&&(Lh()&&(e=ya),ya=0);for(var t=Xe(),n=null,d=po;d!==null;){var L=d.next,I=vd(d,t);I===0?(d.next=null,n===null?po=L:n.next=L,L===null&&(ns=n)):(n=d,(e!==0||(I&3)!==0)&&(go=!0)),d=L}il(e)}function vd(e,t){for(var n=e.suspendedLanes,d=e.pingedLanes,L=e.expirationTimes,I=e.pendingLanes&-62914561;0<I;){var Q=31-le(I),ie=1<<Q,ge=L[Q];ge===-1?((ie&n)===0||(ie&d)!==0)&&(L[Q]=be(ie,t)):ge<=t&&(e.expiredLanes|=ie),I&=~ie}if(t=rr,n=jt,n=Oe(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),d=e.callbackNode,n===0||e===t&&($t===2||$t===9)||e.cancelPendingCommit!==null)return d!==null&&d!==null&&he(d),e.callbackNode=null,e.callbackPriority=0;if((n&3)===0||Ke(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(d!==null&&he(d),ve(n)){case 2:case 8:n=rt;break;case 32:n=et;break;case 268435456:n=$e;break;default:n=et}return d=xd.bind(null,e),n=ye(n,d),e.callbackPriority=t,e.callbackNode=n,t}return d!==null&&d!==null&&he(d),e.callbackPriority=2,e.callbackNode=null,2}function xd(e,t){if(Cr!==0&&Cr!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(mo()&&e.callbackNode!==n)return null;var d=jt;return d=Oe(e,e===rr?d:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),d===0?null:(ed(e,d,t),vd(e,Xe()),e.callbackNode!=null&&e.callbackNode===n?xd.bind(null,e):null)}function _d(e,t){if(mo())return null;ed(e,t,!0)}function Sh(){Ph(function(){(Zt&6)!==0?ye(at,Ah):gd()})}function eu(){return ya===0&&(ya=Ue()),ya}function bd(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:It(""+e)}function yd(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function wh(e,t,n,d,L){if(t==="submit"&&n&&n.stateNode===L){var I=bd((L[vt]||null).action),Q=d.submitter;Q&&(t=(t=Q[vt]||null)?bd(t.formAction):Q.getAttribute("formAction"),t!==null&&(I=t,Q=null));var ie=new Ta("action","action",null,d,L);e.push({event:ie,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(ya!==0){var ge=Q?yd(L,Q):new FormData(L);bc(n,{pending:!0,data:ge,method:L.method,action:I},null,ge)}}else typeof I=="function"&&(ie.preventDefault(),ge=Q?yd(L,Q):new FormData(L),bc(n,{pending:!0,data:ge,method:L.method,action:I},I,ge))},currentTarget:L}]})}}for(var tu=0;tu<wn.length;tu++){var ru=wn[tu],Ch=ru.toLowerCase(),Th=ru[0].toUpperCase()+ru.slice(1);Rr(Ch,"on"+Th)}Rr(ai,"onAnimationEnd"),Rr(Ua,"onAnimationIteration"),Rr(ws,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Cs,"onTransitionRun"),Rr(Bl,"onTransitionStart"),Rr(Ul,"onTransitionCancel"),Rr(Ts,"onTransitionEnd"),Br("onMouseEnter",["mouseout","mouseover"]),Br("onMouseLeave",["mouseout","mouseover"]),Br("onPointerEnter",["pointerout","pointerover"]),Br("onPointerLeave",["pointerout","pointerover"]),ei("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ei("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ei("onBeforeInput",["compositionend","keypress","textInput","paste"]),ei("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ei("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ei("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mh=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(nl));function Ed(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var d=e[n],L=d.event;d=d.listeners;e:{var I=void 0;if(t)for(var Q=d.length-1;0<=Q;Q--){var ie=d[Q],ge=ie.instance,Ne=ie.currentTarget;if(ie=ie.listener,ge!==I&&L.isPropagationStopped())break e;I=ie,L.currentTarget=Ne;try{I(L)}catch(Ze){ro(Ze)}L.currentTarget=null,I=ge}else for(Q=0;Q<d.length;Q++){if(ie=d[Q],ge=ie.instance,Ne=ie.currentTarget,ie=ie.listener,ge!==I&&L.isPropagationStopped())break e;I=ie,L.currentTarget=Ne;try{I(L)}catch(Ze){ro(Ze)}L.currentTarget=null,I=ge}}}}function Nt(e,t){var n=t[Tt];n===void 0&&(n=t[Tt]=new Set);var d=e+"__bubble";n.has(d)||(Ad(t,e,2,!1),n.add(d))}function iu(e,t,n){var d=0;t&&(d|=4),Ad(n,e,d,t)}var vo="_reactListening"+Math.random().toString(36).slice(2);function nu(e){if(!e[vo]){e[vo]=!0,vr.forEach(function(n){n!=="selectionchange"&&(Mh.has(n)||iu(n,!1,e),iu(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[vo]||(t[vo]=!0,iu("selectionchange",!1,t))}}function Ad(e,t,n,d){switch(Yd(t)){case 2:var L=t0;break;case 8:L=r0;break;default:L=xu}n=L.bind(null,t,n,e),L=void 0,!Ur||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(L=!0),d?L!==void 0?e.addEventListener(t,n,{capture:!0,passive:L}):e.addEventListener(t,n,!0):L!==void 0?e.addEventListener(t,n,{passive:L}):e.addEventListener(t,n,!1)}function au(e,t,n,d,L){var I=d;if((t&1)===0&&(t&2)===0&&d!==null)e:for(;;){if(d===null)return;var Q=d.tag;if(Q===3||Q===4){var ie=d.stateNode.containerInfo;if(ie===L)break;if(Q===4)for(Q=d.return;Q!==null;){var ge=Q.tag;if((ge===3||ge===4)&&Q.stateNode.containerInfo===L)return;Q=Q.return}for(;ie!==null;){if(Q=Ar(ie),Q===null)return;if(ge=Q.tag,ge===5||ge===6||ge===26||ge===27){d=I=Q;continue e}ie=ie.parentNode}}d=d.return}Ki(function(){var Ne=I,Ze=Jn(n),qe=[];e:{var Fe=Ms.get(e);if(Fe!==void 0){var Ve=Ta,At=e;switch(e){case"keypress":if(ta(n)===0)break e;case"keydown":case"keyup":Ve=yl;break;case"focusin":At="focus",Ve=Xi;break;case"focusout":At="blur",Ve=Xi;break;case"beforeblur":case"afterblur":Ve=Xi;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ve=_l;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ve=Io;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ve=Yo;break;case ai:case Ua:case ws:Ve=Fo;break;case Ts:Ve=Oa;break;case"scroll":case"scrollend":Ve=Po;break;case"wheel":Ve=$o;break;case"copy":case"cut":case"paste":Ve=Ra;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ve=Al;break;case"toggle":case"beforetoggle":Ve=Jo}var yt=(t&4)!==0,qt=!yt&&(e==="scroll"||e==="scrollend"),Le=yt?Fe!==null?Fe+"Capture":null:Fe;yt=[];for(var Ae=Ne,ze;Ae!==null;){var Qe=Ae;if(ze=Qe.stateNode,Qe=Qe.tag,Qe!==5&&Qe!==26&&Qe!==27||ze===null||Le===null||(Qe=ea(Ae,Le),Qe!=null&&yt.push(al(Ae,Qe,ze))),qt)break;Ae=Ae.return}0<yt.length&&(Fe=new Ve(Fe,At,null,n,Ze),qe.push({event:Fe,listeners:yt}))}}if((t&7)===0){e:{if(Fe=e==="mouseover"||e==="pointerover",Ve=e==="mouseout"||e==="pointerout",Fe&&n!==Hi&&(At=n.relatedTarget||n.fromElement)&&(Ar(At)||At[ir]))break e;if((Ve||Fe)&&(Fe=Ze.window===Ze?Ze:(Fe=Ze.ownerDocument)?Fe.defaultView||Fe.parentWindow:window,Ve?(At=n.relatedTarget||n.toElement,Ve=Ne,At=At?Ar(At):null,At!==null&&(qt=S(At),yt=At.tag,At!==qt||yt!==5&&yt!==27&&yt!==6)&&(At=null)):(Ve=null,At=Ne),Ve!==At)){if(yt=_l,Qe="onMouseLeave",Le="onMouseEnter",Ae="mouse",(e==="pointerout"||e==="pointerover")&&(yt=Al,Qe="onPointerLeave",Le="onPointerEnter",Ae="pointer"),qt=Ve==null?Fe:Kt(Ve),ze=At==null?Fe:Kt(At),Fe=new yt(Qe,Ae+"leave",Ve,n,Ze),Fe.target=qt,Fe.relatedTarget=ze,Qe=null,Ar(Ze)===Ne&&(yt=new yt(Le,Ae+"enter",At,n,Ze),yt.target=ze,yt.relatedTarget=qt,Qe=yt),qt=Qe,Ve&&At)t:{for(yt=Ve,Le=At,Ae=0,ze=yt;ze;ze=as(ze))Ae++;for(ze=0,Qe=Le;Qe;Qe=as(Qe))ze++;for(;0<Ae-ze;)yt=as(yt),Ae--;for(;0<ze-Ae;)Le=as(Le),ze--;for(;Ae--;){if(yt===Le||Le!==null&&yt===Le.alternate)break t;yt=as(yt),Le=as(Le)}yt=null}else yt=null;Ve!==null&&Sd(qe,Fe,Ve,yt,!1),At!==null&&qt!==null&&Sd(qe,qt,At,yt,!0)}}e:{if(Fe=Ne?Kt(Ne):window,Ve=Fe.nodeName&&Fe.nodeName.toLowerCase(),Ve==="select"||Ve==="input"&&Fe.type==="file")var gt=Ol;else if(vs(Fe))if(Dl)gt=La;else{gt=Nl;var zt=Pl}else Ve=Fe.nodeName,!Ve||Ve.toLowerCase()!=="input"||Fe.type!=="checkbox"&&Fe.type!=="radio"?Ne&&ii(Ne.elementType)&&(gt=Ol):gt=rc;if(gt&&(gt=gt(e,Ne))){xs(qe,gt,n,Ze);break e}zt&&zt(e,Fe,Ne),e==="focusout"&&Ne&&Fe.type==="number"&&Ne.memoizedProps.value!=null&&gi(Fe,"number",Fe.value)}switch(zt=Ne?Kt(Ne):window,e){case"focusin":(vs(zt)||zt.contentEditable==="true")&&(Ji=zt,Na=Ne,Sn=null);break;case"focusout":Sn=Na=Ji=null;break;case"mousedown":Ia=!0;break;case"contextmenu":case"mouseup":case"dragend":Ia=!1,As(qe,n,Ze);break;case"selectionchange":if(Pa)break;case"keydown":case"keyup":As(qe,n,Ze)}var xt;if(aa)e:{switch(e){case"compositionstart":var Et="onCompositionStart";break e;case"compositionend":Et="onCompositionEnd";break e;case"compositionupdate":Et="onCompositionUpdate";break e}Et=void 0}else _i?Tl(e,n)&&(Et="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(Et="onCompositionStart");Et&&(Sl&&n.locale!=="ko"&&(_i||Et!=="onCompositionStart"?Et==="onCompositionEnd"&&_i&&(xt=hs()):(Oi=Ze,ds="value"in Oi?Oi.value:Oi.textContent,_i=!0)),zt=xo(Ne,Et),0<zt.length&&(Et=new bn(Et,e,null,n,Ze),qe.push({event:Et,listeners:zt}),xt?Et.data=xt:(xt=Ml(n),xt!==null&&(Et.data=xt)))),(xt=qo?ec(e,n):tc(e,n))&&(Et=xo(Ne,"onBeforeInput"),0<Et.length&&(zt=new bn("onBeforeInput","beforeinput",null,n,Ze),qe.push({event:zt,listeners:Et}),zt.data=xt)),wh(qe,e,Ne,n,Ze)}Ed(qe,t)})}function al(e,t,n){return{instance:e,listener:t,currentTarget:n}}function xo(e,t){for(var n=t+"Capture",d=[];e!==null;){var L=e,I=L.stateNode;if(L=L.tag,L!==5&&L!==26&&L!==27||I===null||(L=ea(e,n),L!=null&&d.unshift(al(e,L,I)),L=ea(e,t),L!=null&&d.push(al(e,L,I))),e.tag===3)return d;e=e.return}return[]}function as(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Sd(e,t,n,d,L){for(var I=t._reactName,Q=[];n!==null&&n!==d;){var ie=n,ge=ie.alternate,Ne=ie.stateNode;if(ie=ie.tag,ge!==null&&ge===d)break;ie!==5&&ie!==26&&ie!==27||Ne===null||(ge=Ne,L?(Ne=ea(n,I),Ne!=null&&Q.unshift(al(n,Ne,ge))):L||(Ne=ea(n,I),Ne!=null&&Q.push(al(n,Ne,ge)))),n=n.return}Q.length!==0&&e.push({event:t,listeners:Q})}var Rh=/\r\n?/g,Oh=/\u0000|\uFFFD/g;function wd(e){return(typeof e=="string"?e:""+e).replace(Rh,`
`).replace(Oh,"")}function Cd(e,t){return t=wd(t),wd(e)===t}function _o(){}function Jt(e,t,n,d,L,I){switch(n){case"children":typeof d=="string"?t==="body"||t==="textarea"&&d===""||Vi(e,d):(typeof d=="number"||typeof d=="bigint")&&t!=="body"&&Vi(e,""+d);break;case"className":gn(e,"class",d);break;case"tabIndex":gn(e,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":gn(e,n,d);break;case"style":zo(e,d,I);break;case"data":if(t!=="object"){gn(e,"data",d);break}case"src":case"href":if(d===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){e.removeAttribute(n);break}d=It(""+d),e.setAttribute(n,d);break;case"action":case"formAction":if(typeof d=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof I=="function"&&(n==="formAction"?(t!=="input"&&Jt(e,t,"name",L.name,L,null),Jt(e,t,"formEncType",L.formEncType,L,null),Jt(e,t,"formMethod",L.formMethod,L,null),Jt(e,t,"formTarget",L.formTarget,L,null)):(Jt(e,t,"encType",L.encType,L,null),Jt(e,t,"method",L.method,L,null),Jt(e,t,"target",L.target,L,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){e.removeAttribute(n);break}d=It(""+d),e.setAttribute(n,d);break;case"onClick":d!=null&&(e.onclick=_o);break;case"onScroll":d!=null&&Nt("scroll",e);break;case"onScrollEnd":d!=null&&Nt("scrollend",e);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(c(61));if(n=d.__html,n!=null){if(L.children!=null)throw Error(c(60));e.innerHTML=n}}break;case"multiple":e.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":e.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){e.removeAttribute("xlink:href");break}n=It(""+d),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?e.setAttribute(n,""+d):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":d===!0?e.setAttribute(n,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?e.setAttribute(n,d):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?e.setAttribute(n,d):e.removeAttribute(n);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?e.removeAttribute(n):e.setAttribute(n,d);break;case"popover":Nt("beforetoggle",e),Nt("toggle",e),ji(e,"popover",d);break;case"xlinkActuate":pi(e,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":pi(e,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":pi(e,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":pi(e,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":pi(e,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":pi(e,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":pi(e,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":pi(e,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":pi(e,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":ji(e,"is",d);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=Dr.get(n)||n,ji(e,n,d))}}function su(e,t,n,d,L,I){switch(n){case"style":zo(e,d,I);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(c(61));if(n=d.__html,n!=null){if(L.children!=null)throw Error(c(60));e.innerHTML=n}}break;case"children":typeof d=="string"?Vi(e,d):(typeof d=="number"||typeof d=="bigint")&&Vi(e,""+d);break;case"onScroll":d!=null&&Nt("scroll",e);break;case"onScrollEnd":d!=null&&Nt("scrollend",e);break;case"onClick":d!=null&&(e.onclick=_o);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ti.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(L=n.endsWith("Capture"),t=n.slice(2,L?n.length-7:void 0),I=e[vt]||null,I=I!=null?I[n]:null,typeof I=="function"&&e.removeEventListener(t,I,L),typeof d=="function")){typeof I!="function"&&I!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,d,L);break e}n in e?e[n]=d:d===!0?e.setAttribute(n,""):ji(e,n,d)}}}function Tr(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Nt("error",e),Nt("load",e);var d=!1,L=!1,I;for(I in n)if(n.hasOwnProperty(I)){var Q=n[I];if(Q!=null)switch(I){case"src":d=!0;break;case"srcSet":L=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(c(137,t));default:Jt(e,t,I,Q,n,null)}}L&&Jt(e,t,"srcSet",n.srcSet,n,null),d&&Jt(e,t,"src",n.src,n,null);return;case"input":Nt("invalid",e);var ie=I=Q=L=null,ge=null,Ne=null;for(d in n)if(n.hasOwnProperty(d)){var Ze=n[d];if(Ze!=null)switch(d){case"name":L=Ze;break;case"type":Q=Ze;break;case"checked":ge=Ze;break;case"defaultChecked":Ne=Ze;break;case"value":I=Ze;break;case"defaultValue":ie=Ze;break;case"children":case"dangerouslySetInnerHTML":if(Ze!=null)throw Error(c(137,t));break;default:Jt(e,t,d,Ze,n,null)}}Wi(e,I,ie,ge,Ne,Q,L,!1),xn(e);return;case"select":Nt("invalid",e),d=Q=I=null;for(L in n)if(n.hasOwnProperty(L)&&(ie=n[L],ie!=null))switch(L){case"value":I=ie;break;case"defaultValue":Q=ie;break;case"multiple":d=ie;default:Jt(e,t,L,ie,n,null)}t=I,n=Q,e.multiple=!!d,t!=null?kr(e,!!d,t,!1):n!=null&&kr(e,!!d,n,!0);return;case"textarea":Nt("invalid",e),I=L=d=null;for(Q in n)if(n.hasOwnProperty(Q)&&(ie=n[Q],ie!=null))switch(Q){case"value":d=ie;break;case"defaultValue":L=ie;break;case"children":I=ie;break;case"dangerouslySetInnerHTML":if(ie!=null)throw Error(c(91));break;default:Jt(e,t,Q,ie,n,null)}Mi(e,d,L,I),xn(e);return;case"option":for(ge in n)if(n.hasOwnProperty(ge)&&(d=n[ge],d!=null))switch(ge){case"selected":e.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:Jt(e,t,ge,d,n,null)}return;case"dialog":Nt("beforetoggle",e),Nt("toggle",e),Nt("cancel",e),Nt("close",e);break;case"iframe":case"object":Nt("load",e);break;case"video":case"audio":for(d=0;d<nl.length;d++)Nt(nl[d],e);break;case"image":Nt("error",e),Nt("load",e);break;case"details":Nt("toggle",e);break;case"embed":case"source":case"link":Nt("error",e),Nt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ne in n)if(n.hasOwnProperty(Ne)&&(d=n[Ne],d!=null))switch(Ne){case"children":case"dangerouslySetInnerHTML":throw Error(c(137,t));default:Jt(e,t,Ne,d,n,null)}return;default:if(ii(t)){for(Ze in n)n.hasOwnProperty(Ze)&&(d=n[Ze],d!==void 0&&su(e,t,Ze,d,n,void 0));return}}for(ie in n)n.hasOwnProperty(ie)&&(d=n[ie],d!=null&&Jt(e,t,ie,d,n,null))}function Dh(e,t,n,d){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var L=null,I=null,Q=null,ie=null,ge=null,Ne=null,Ze=null;for(Ve in n){var qe=n[Ve];if(n.hasOwnProperty(Ve)&&qe!=null)switch(Ve){case"checked":break;case"value":break;case"defaultValue":ge=qe;default:d.hasOwnProperty(Ve)||Jt(e,t,Ve,null,d,qe)}}for(var Fe in d){var Ve=d[Fe];if(qe=n[Fe],d.hasOwnProperty(Fe)&&(Ve!=null||qe!=null))switch(Fe){case"type":I=Ve;break;case"name":L=Ve;break;case"checked":Ne=Ve;break;case"defaultChecked":Ze=Ve;break;case"value":Q=Ve;break;case"defaultValue":ie=Ve;break;case"children":case"dangerouslySetInnerHTML":if(Ve!=null)throw Error(c(137,t));break;default:Ve!==qe&&Jt(e,t,Fe,Ve,d,qe)}}pr(e,Q,ie,ge,Ne,Ze,I,L);return;case"select":Ve=Q=ie=Fe=null;for(I in n)if(ge=n[I],n.hasOwnProperty(I)&&ge!=null)switch(I){case"value":break;case"multiple":Ve=ge;default:d.hasOwnProperty(I)||Jt(e,t,I,null,d,ge)}for(L in d)if(I=d[L],ge=n[L],d.hasOwnProperty(L)&&(I!=null||ge!=null))switch(L){case"value":Fe=I;break;case"defaultValue":ie=I;break;case"multiple":Q=I;default:I!==ge&&Jt(e,t,L,I,d,ge)}t=ie,n=Q,d=Ve,Fe!=null?kr(e,!!n,Fe,!1):!!d!=!!n&&(t!=null?kr(e,!!n,t,!0):kr(e,!!n,n?[]:"",!1));return;case"textarea":Ve=Fe=null;for(ie in n)if(L=n[ie],n.hasOwnProperty(ie)&&L!=null&&!d.hasOwnProperty(ie))switch(ie){case"value":break;case"children":break;default:Jt(e,t,ie,null,d,L)}for(Q in d)if(L=d[Q],I=n[Q],d.hasOwnProperty(Q)&&(L!=null||I!=null))switch(Q){case"value":Fe=L;break;case"defaultValue":Ve=L;break;case"children":break;case"dangerouslySetInnerHTML":if(L!=null)throw Error(c(91));break;default:L!==I&&Jt(e,t,Q,L,d,I)}vl(e,Fe,Ve);return;case"option":for(var At in n)if(Fe=n[At],n.hasOwnProperty(At)&&Fe!=null&&!d.hasOwnProperty(At))switch(At){case"selected":e.selected=!1;break;default:Jt(e,t,At,null,d,Fe)}for(ge in d)if(Fe=d[ge],Ve=n[ge],d.hasOwnProperty(ge)&&Fe!==Ve&&(Fe!=null||Ve!=null))switch(ge){case"selected":e.selected=Fe&&typeof Fe!="function"&&typeof Fe!="symbol";break;default:Jt(e,t,ge,Fe,d,Ve)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var yt in n)Fe=n[yt],n.hasOwnProperty(yt)&&Fe!=null&&!d.hasOwnProperty(yt)&&Jt(e,t,yt,null,d,Fe);for(Ne in d)if(Fe=d[Ne],Ve=n[Ne],d.hasOwnProperty(Ne)&&Fe!==Ve&&(Fe!=null||Ve!=null))switch(Ne){case"children":case"dangerouslySetInnerHTML":if(Fe!=null)throw Error(c(137,t));break;default:Jt(e,t,Ne,Fe,d,Ve)}return;default:if(ii(t)){for(var qt in n)Fe=n[qt],n.hasOwnProperty(qt)&&Fe!==void 0&&!d.hasOwnProperty(qt)&&su(e,t,qt,void 0,d,Fe);for(Ze in d)Fe=d[Ze],Ve=n[Ze],!d.hasOwnProperty(Ze)||Fe===Ve||Fe===void 0&&Ve===void 0||su(e,t,Ze,Fe,d,Ve);return}}for(var Le in n)Fe=n[Le],n.hasOwnProperty(Le)&&Fe!=null&&!d.hasOwnProperty(Le)&&Jt(e,t,Le,null,d,Fe);for(qe in d)Fe=d[qe],Ve=n[qe],!d.hasOwnProperty(qe)||Fe===Ve||Fe==null&&Ve==null||Jt(e,t,qe,Fe,d,Ve)}var lu=null,ou=null;function bo(e){return e.nodeType===9?e:e.ownerDocument}function Td(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Md(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function cu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var uu=null;function Lh(){var e=window.event;return e&&e.type==="popstate"?e===uu?!1:(uu=e,!0):(uu=null,!1)}var Rd=typeof setTimeout=="function"?setTimeout:void 0,zh=typeof clearTimeout=="function"?clearTimeout:void 0,Od=typeof Promise=="function"?Promise:void 0,Ph=typeof queueMicrotask=="function"?queueMicrotask:typeof Od<"u"?function(e){return Od.resolve(null).then(e).catch(Nh)}:Rd;function Nh(e){setTimeout(function(){throw e})}function Hn(e){return e==="head"}function Dd(e,t){var n=t,d=0,L=0;do{var I=n.nextSibling;if(e.removeChild(n),I&&I.nodeType===8)if(n=I.data,n==="/$"){if(0<d&&8>d){n=d;var Q=e.ownerDocument;if(n&1&&sl(Q.documentElement),n&2&&sl(Q.body),n&4)for(n=Q.head,sl(n),Q=n.firstChild;Q;){var ie=Q.nextSibling,ge=Q.nodeName;Q[Ut]||ge==="SCRIPT"||ge==="STYLE"||ge==="LINK"&&Q.rel.toLowerCase()==="stylesheet"||n.removeChild(Q),Q=ie}}if(L===0){e.removeChild(I),ml(t);return}L--}else n==="$"||n==="$?"||n==="$!"?L++:d=n.charCodeAt(0)-48;else d=0;n=I}while(n);ml(t)}function fu(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":fu(n),Hr(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function Ih(e,t,n,d){for(;e.nodeType===1;){var L=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!d&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(d){if(!e[Ut])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(I=e.getAttribute("rel"),I==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(I!==L.rel||e.getAttribute("href")!==(L.href==null||L.href===""?null:L.href)||e.getAttribute("crossorigin")!==(L.crossOrigin==null?null:L.crossOrigin)||e.getAttribute("title")!==(L.title==null?null:L.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(I=e.getAttribute("src"),(I!==(L.src==null?null:L.src)||e.getAttribute("type")!==(L.type==null?null:L.type)||e.getAttribute("crossorigin")!==(L.crossOrigin==null?null:L.crossOrigin))&&I&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var I=L.name==null?null:""+L.name;if(L.type==="hidden"&&e.getAttribute("name")===I)return e}else return e;if(e=Ci(e.nextSibling),e===null)break}return null}function Bh(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Ci(e.nextSibling),e===null))return null;return e}function du(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function Uh(e,t){var n=e.ownerDocument;if(e.data!=="$?"||n.readyState==="complete")t();else{var d=function(){t(),n.removeEventListener("DOMContentLoaded",d)};n.addEventListener("DOMContentLoaded",d),e._reactRetry=d}}function Ci(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var hu=null;function Ld(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}function zd(e,t,n){switch(t=bo(n),e){case"html":if(e=t.documentElement,!e)throw Error(c(452));return e;case"head":if(e=t.head,!e)throw Error(c(453));return e;case"body":if(e=t.body,!e)throw Error(c(454));return e;default:throw Error(c(451))}}function sl(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Hr(e)}var mi=new Map,Pd=new Set;function yo(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var pn=W.d;W.d={f:Fh,r:jh,D:Gh,C:Wh,L:Vh,m:Hh,X:Kh,S:kh,M:Yh};function Fh(){var e=pn.f(),t=fo();return e||t}function jh(e){var t=Ht(e);t!==null&&t.tag===5&&t.type==="form"?qu(t):pn.r(e)}var ss=typeof document>"u"?null:document;function Nd(e,t,n){var d=ss;if(d&&typeof t=="string"&&t){var L=xr(t);L='link[rel="'+e+'"][href="'+L+'"]',typeof n=="string"&&(L+='[crossorigin="'+n+'"]'),Pd.has(L)||(Pd.add(L),e={rel:e,crossOrigin:n,href:t},d.querySelector(L)===null&&(t=d.createElement("link"),Tr(t,"link",e),Gt(t),d.head.appendChild(t)))}}function Gh(e){pn.D(e),Nd("dns-prefetch",e,null)}function Wh(e,t){pn.C(e,t),Nd("preconnect",e,t)}function Vh(e,t,n){pn.L(e,t,n);var d=ss;if(d&&e&&t){var L='link[rel="preload"][as="'+xr(t)+'"]';t==="image"&&n&&n.imageSrcSet?(L+='[imagesrcset="'+xr(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(L+='[imagesizes="'+xr(n.imageSizes)+'"]')):L+='[href="'+xr(e)+'"]';var I=L;switch(t){case"style":I=ls(e);break;case"script":I=os(e)}mi.has(I)||(e=g({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),mi.set(I,e),d.querySelector(L)!==null||t==="style"&&d.querySelector(ll(I))||t==="script"&&d.querySelector(ol(I))||(t=d.createElement("link"),Tr(t,"link",e),Gt(t),d.head.appendChild(t)))}}function Hh(e,t){pn.m(e,t);var n=ss;if(n&&e){var d=t&&typeof t.as=="string"?t.as:"script",L='link[rel="modulepreload"][as="'+xr(d)+'"][href="'+xr(e)+'"]',I=L;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":I=os(e)}if(!mi.has(I)&&(e=g({rel:"modulepreload",href:e},t),mi.set(I,e),n.querySelector(L)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(ol(I)))return}d=n.createElement("link"),Tr(d,"link",e),Gt(d),n.head.appendChild(d)}}}function kh(e,t,n){pn.S(e,t,n);var d=ss;if(d&&e){var L=Ft(d).hoistableStyles,I=ls(e);t=t||"default";var Q=L.get(I);if(!Q){var ie={loading:0,preload:null};if(Q=d.querySelector(ll(I)))ie.loading=5;else{e=g({rel:"stylesheet",href:e,"data-precedence":t},n),(n=mi.get(I))&&mu(e,n);var ge=Q=d.createElement("link");Gt(ge),Tr(ge,"link",e),ge._p=new Promise(function(Ne,Ze){ge.onload=Ne,ge.onerror=Ze}),ge.addEventListener("load",function(){ie.loading|=1}),ge.addEventListener("error",function(){ie.loading|=2}),ie.loading|=4,Eo(Q,t,d)}Q={type:"stylesheet",instance:Q,count:1,state:ie},L.set(I,Q)}}}function Kh(e,t){pn.X(e,t);var n=ss;if(n&&e){var d=Ft(n).hoistableScripts,L=os(e),I=d.get(L);I||(I=n.querySelector(ol(L)),I||(e=g({src:e,async:!0},t),(t=mi.get(L))&&pu(e,t),I=n.createElement("script"),Gt(I),Tr(I,"link",e),n.head.appendChild(I)),I={type:"script",instance:I,count:1,state:null},d.set(L,I))}}function Yh(e,t){pn.M(e,t);var n=ss;if(n&&e){var d=Ft(n).hoistableScripts,L=os(e),I=d.get(L);I||(I=n.querySelector(ol(L)),I||(e=g({src:e,async:!0,type:"module"},t),(t=mi.get(L))&&pu(e,t),I=n.createElement("script"),Gt(I),Tr(I,"link",e),n.head.appendChild(I)),I={type:"script",instance:I,count:1,state:null},d.set(L,I))}}function Id(e,t,n,d){var L=(L=de.current)?yo(L):null;if(!L)throw Error(c(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=ls(n.href),n=Ft(L).hoistableStyles,d=n.get(t),d||(d={type:"style",instance:null,count:0,state:null},n.set(t,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=ls(n.href);var I=Ft(L).hoistableStyles,Q=I.get(e);if(Q||(L=L.ownerDocument||L,Q={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},I.set(e,Q),(I=L.querySelector(ll(e)))&&!I._p&&(Q.instance=I,Q.state.loading=5),mi.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},mi.set(e,n),I||Xh(L,e,n,Q.state))),t&&d===null)throw Error(c(528,""));return Q}if(t&&d!==null)throw Error(c(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=os(n),n=Ft(L).hoistableScripts,d=n.get(t),d||(d={type:"script",instance:null,count:0,state:null},n.set(t,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(c(444,e))}}function ls(e){return'href="'+xr(e)+'"'}function ll(e){return'link[rel="stylesheet"]['+e+"]"}function Bd(e){return g({},e,{"data-precedence":e.precedence,precedence:null})}function Xh(e,t,n,d){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?d.loading=1:(t=e.createElement("link"),d.preload=t,t.addEventListener("load",function(){return d.loading|=1}),t.addEventListener("error",function(){return d.loading|=2}),Tr(t,"link",n),Gt(t),e.head.appendChild(t))}function os(e){return'[src="'+xr(e)+'"]'}function ol(e){return"script[async]"+e}function Ud(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var d=e.querySelector('style[data-href~="'+xr(n.href)+'"]');if(d)return t.instance=d,Gt(d),d;var L=g({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return d=(e.ownerDocument||e).createElement("style"),Gt(d),Tr(d,"style",L),Eo(d,n.precedence,e),t.instance=d;case"stylesheet":L=ls(n.href);var I=e.querySelector(ll(L));if(I)return t.state.loading|=4,t.instance=I,Gt(I),I;d=Bd(n),(L=mi.get(L))&&mu(d,L),I=(e.ownerDocument||e).createElement("link"),Gt(I);var Q=I;return Q._p=new Promise(function(ie,ge){Q.onload=ie,Q.onerror=ge}),Tr(I,"link",d),t.state.loading|=4,Eo(I,n.precedence,e),t.instance=I;case"script":return I=os(n.src),(L=e.querySelector(ol(I)))?(t.instance=L,Gt(L),L):(d=n,(L=mi.get(I))&&(d=g({},n),pu(d,L)),e=e.ownerDocument||e,L=e.createElement("script"),Gt(L),Tr(L,"link",d),e.head.appendChild(L),t.instance=L);case"void":return null;default:throw Error(c(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(d=t.instance,t.state.loading|=4,Eo(d,n.precedence,e));return t.instance}function Eo(e,t,n){for(var d=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),L=d.length?d[d.length-1]:null,I=L,Q=0;Q<d.length;Q++){var ie=d[Q];if(ie.dataset.precedence===t)I=ie;else if(I!==L)break}I?I.parentNode.insertBefore(e,I.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function mu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function pu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Ao=null;function Fd(e,t,n){if(Ao===null){var d=new Map,L=Ao=new Map;L.set(n,d)}else L=Ao,d=L.get(n),d||(d=new Map,L.set(n,d));if(d.has(e))return d;for(d.set(e,null),n=n.getElementsByTagName(e),L=0;L<n.length;L++){var I=n[L];if(!(I[Ut]||I[it]||e==="link"&&I.getAttribute("rel")==="stylesheet")&&I.namespaceURI!=="http://www.w3.org/2000/svg"){var Q=I.getAttribute(t)||"";Q=e+Q;var ie=d.get(Q);ie?ie.push(I):d.set(Q,[I])}}return d}function jd(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function Zh(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Gd(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var cl=null;function $h(){}function Qh(e,t,n){if(cl===null)throw Error(c(475));var d=cl;if(t.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&(t.state.loading&4)===0){if(t.instance===null){var L=ls(n.href),I=e.querySelector(ll(L));if(I){e=I._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(d.count++,d=So.bind(d),e.then(d,d)),t.state.loading|=4,t.instance=I,Gt(I);return}I=e.ownerDocument||e,n=Bd(n),(L=mi.get(L))&&mu(n,L),I=I.createElement("link"),Gt(I);var Q=I;Q._p=new Promise(function(ie,ge){Q.onload=ie,Q.onerror=ge}),Tr(I,"link",n),t.instance=I}d.stylesheets===null&&(d.stylesheets=new Map),d.stylesheets.set(t,e),(e=t.state.preload)&&(t.state.loading&3)===0&&(d.count++,t=So.bind(d),e.addEventListener("load",t),e.addEventListener("error",t))}}function Jh(){if(cl===null)throw Error(c(475));var e=cl;return e.stylesheets&&e.count===0&&gu(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&gu(e,e.stylesheets),e.unsuspend){var d=e.unsuspend;e.unsuspend=null,d()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}function So(){if(this.count--,this.count===0){if(this.stylesheets)gu(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var wo=null;function gu(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,wo=new Map,t.forEach(qh,e),wo=null,So.call(e))}function qh(e,t){if(!(t.state.loading&4)){var n=wo.get(e);if(n)var d=n.get(null);else{n=new Map,wo.set(e,n);for(var L=e.querySelectorAll("link[data-precedence],style[data-precedence]"),I=0;I<L.length;I++){var Q=L[I];(Q.nodeName==="LINK"||Q.getAttribute("media")!=="not all")&&(n.set(Q.dataset.precedence,Q),d=Q)}d&&n.set(null,d)}L=t.instance,Q=L.getAttribute("data-precedence"),I=n.get(Q)||d,I===d&&n.set(null,L),n.set(Q,L),this.count++,d=So.bind(this),L.addEventListener("load",d),L.addEventListener("error",d),I?I.parentNode.insertBefore(L,I.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(L,e.firstChild)),t.state.loading|=4}}var ul={$$typeof:v,Provider:null,Consumer:null,_currentValue:F,_currentValue2:F,_threadCount:0};function e0(e,t,n,d,L,I,Q,ie){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=He(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=He(0),this.hiddenUpdates=He(null),this.identifierPrefix=d,this.onUncaughtError=L,this.onCaughtError=I,this.onRecoverableError=Q,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ie,this.incompleteTransitions=new Map}function Wd(e,t,n,d,L,I,Q,ie,ge,Ne,Ze,qe){return e=new e0(e,t,n,Q,ie,ge,Ne,qe),t=1,I===!0&&(t|=24),I=Fr(3,null,null,t),e.current=I,I.stateNode=e,t=Us(),t.refCount++,e.pooledCache=t,t.refCount++,I.memoizedState={element:d,isDehydrated:n,cache:t},Ee(I),e}function Vd(e){return e?(e=Tn,e):Tn}function Hd(e,t,n,d,L,I){L=Vd(L),d.context===null?d.context=L:d.pendingContext=L,d=Rt(t),d.payload={element:n},I=I===void 0?null:I,I!==null&&(d.callback=I),n=dt(e,d,t),n!==null&&(qr(n,e,t),tt(n,e,t))}function kd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function vu(e,t){kd(e,t),(e=e.alternate)&&kd(e,t)}function Kd(e){if(e.tag===13){var t=Yt(e,67108864);t!==null&&qr(t,e,67108864),vu(e,67108864)}}var Co=!0;function t0(e,t,n,d){var L=U.T;U.T=null;var I=W.p;try{W.p=2,xu(e,t,n,d)}finally{W.p=I,U.T=L}}function r0(e,t,n,d){var L=U.T;U.T=null;var I=W.p;try{W.p=8,xu(e,t,n,d)}finally{W.p=I,U.T=L}}function xu(e,t,n,d){if(Co){var L=_u(d);if(L===null)au(e,t,d,To,n),Xd(e,d);else if(n0(L,e,t,n,d))d.stopPropagation();else if(Xd(e,d),t&4&&-1<i0.indexOf(e)){for(;L!==null;){var I=Ht(L);if(I!==null)switch(I.tag){case 3:if(I=I.stateNode,I.current.memoizedState.isDehydrated){var Q=_e(I.pendingLanes);if(Q!==0){var ie=I;for(ie.pendingLanes|=2,ie.entangledLanes|=2;Q;){var ge=1<<31-le(Q);ie.entanglements[1]|=ge,Q&=~ge}Fi(I),(Zt&6)===0&&(co=Xe()+500,il(0))}}break;case 13:ie=Yt(I,2),ie!==null&&qr(ie,I,2),fo(),vu(I,2)}if(I=_u(d),I===null&&au(e,t,d,To,n),I===L)break;L=I}L!==null&&d.stopPropagation()}else au(e,t,d,null,n)}}function _u(e){return e=Jn(e),bu(e)}var To=null;function bu(e){if(To=null,e=Ar(e),e!==null){var t=S(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=R(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return To=e,null}function Yd(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(nt()){case at:return 2;case rt:return 8;case et:case Je:return 32;case $e:return 268435456;default:return 32}default:return 32}}var yu=!1,kn=null,Kn=null,Yn=null,fl=new Map,dl=new Map,Xn=[],i0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Xd(e,t){switch(e){case"focusin":case"focusout":kn=null;break;case"dragenter":case"dragleave":Kn=null;break;case"mouseover":case"mouseout":Yn=null;break;case"pointerover":case"pointerout":fl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":dl.delete(t.pointerId)}}function hl(e,t,n,d,L,I){return e===null||e.nativeEvent!==I?(e={blockedOn:t,domEventName:n,eventSystemFlags:d,nativeEvent:I,targetContainers:[L]},t!==null&&(t=Ht(t),t!==null&&Kd(t)),e):(e.eventSystemFlags|=d,t=e.targetContainers,L!==null&&t.indexOf(L)===-1&&t.push(L),e)}function n0(e,t,n,d,L){switch(t){case"focusin":return kn=hl(kn,e,t,n,d,L),!0;case"dragenter":return Kn=hl(Kn,e,t,n,d,L),!0;case"mouseover":return Yn=hl(Yn,e,t,n,d,L),!0;case"pointerover":var I=L.pointerId;return fl.set(I,hl(fl.get(I)||null,e,t,n,d,L)),!0;case"gotpointercapture":return I=L.pointerId,dl.set(I,hl(dl.get(I)||null,e,t,n,d,L)),!0}return!1}function Zd(e){var t=Ar(e.target);if(t!==null){var n=S(t);if(n!==null){if(t=n.tag,t===13){if(t=R(n),t!==null){e.blockedOn=t,ft(e.priority,function(){if(n.tag===13){var d=Jr();d=te(d);var L=Yt(n,d);L!==null&&qr(L,n,d),vu(n,d)}});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Mo(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=_u(e.nativeEvent);if(n===null){n=e.nativeEvent;var d=new n.constructor(n.type,n);Hi=d,n.target.dispatchEvent(d),Hi=null}else return t=Ht(n),t!==null&&Kd(t),e.blockedOn=n,!1;t.shift()}return!0}function $d(e,t,n){Mo(e)&&n.delete(t)}function a0(){yu=!1,kn!==null&&Mo(kn)&&(kn=null),Kn!==null&&Mo(Kn)&&(Kn=null),Yn!==null&&Mo(Yn)&&(Yn=null),fl.forEach($d),dl.forEach($d)}function Ro(e,t){e.blockedOn===t&&(e.blockedOn=null,yu||(yu=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,a0)))}var Oo=null;function Qd(e){Oo!==e&&(Oo=e,o.unstable_scheduleCallback(o.unstable_NormalPriority,function(){Oo===e&&(Oo=null);for(var t=0;t<e.length;t+=3){var n=e[t],d=e[t+1],L=e[t+2];if(typeof d!="function"){if(bu(d||n)===null)continue;break}var I=Ht(n);I!==null&&(e.splice(t,3),t-=3,bc(I,{pending:!0,data:L,method:n.method,action:d},d,L))}}))}function ml(e){function t(ge){return Ro(ge,e)}kn!==null&&Ro(kn,e),Kn!==null&&Ro(Kn,e),Yn!==null&&Ro(Yn,e),fl.forEach(t),dl.forEach(t);for(var n=0;n<Xn.length;n++){var d=Xn[n];d.blockedOn===e&&(d.blockedOn=null)}for(;0<Xn.length&&(n=Xn[0],n.blockedOn===null);)Zd(n),n.blockedOn===null&&Xn.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(d=0;d<n.length;d+=3){var L=n[d],I=n[d+1],Q=L[vt]||null;if(typeof I=="function")Q||Qd(n);else if(Q){var ie=null;if(I&&I.hasAttribute("formAction")){if(L=I,Q=I[vt]||null)ie=Q.formAction;else if(bu(L)!==null)continue}else ie=Q.action;typeof ie=="function"?n[d+1]=ie:(n.splice(d,3),d-=3),Qd(n)}}}function Eu(e){this._internalRoot=e}Do.prototype.render=Eu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(c(409));var n=t.current,d=Jr();Hd(n,d,e,t,null,null)},Do.prototype.unmount=Eu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Hd(e.current,2,null,e,null,null),fo(),t[ir]=null}};function Do(e){this._internalRoot=e}Do.prototype.unstable_scheduleHydration=function(e){if(e){var t=Pe();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Xn.length&&t!==0&&t<Xn[n].priority;n++);Xn.splice(n,0,e),n===0&&Zd(e)}};var Jd=u.version;if(Jd!=="19.1.0")throw Error(c(527,Jd,"19.1.0"));W.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(c(188)):(e=Object.keys(e).join(","),Error(c(268,e)));return e=_(t),e=e!==null?A(e):null,e=e===null?null:e.stateNode,e};var s0={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:U,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lo.isDisabled&&Lo.supportsFiber)try{ot=Lo.inject(s0),J=Lo}catch{}}return reactDomClient_production.createRoot=function(e,t){if(!y(e))throw Error(c(299));var n=!1,d="",L=mf,I=pf,Q=gf,ie=null;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(d=t.identifierPrefix),t.onUncaughtError!==void 0&&(L=t.onUncaughtError),t.onCaughtError!==void 0&&(I=t.onCaughtError),t.onRecoverableError!==void 0&&(Q=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(ie=t.unstable_transitionCallbacks)),t=Wd(e,1,!1,null,null,n,d,L,I,Q,ie,null),e[ir]=t.current,nu(e),new Eu(t)},reactDomClient_production.hydrateRoot=function(e,t,n){if(!y(e))throw Error(c(299));var d=!1,L="",I=mf,Q=pf,ie=gf,ge=null,Ne=null;return n!=null&&(n.unstable_strictMode===!0&&(d=!0),n.identifierPrefix!==void 0&&(L=n.identifierPrefix),n.onUncaughtError!==void 0&&(I=n.onUncaughtError),n.onCaughtError!==void 0&&(Q=n.onCaughtError),n.onRecoverableError!==void 0&&(ie=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(ge=n.unstable_transitionCallbacks),n.formState!==void 0&&(Ne=n.formState)),t=Wd(e,1,!0,t,n??null,d,L,I,Q,ie,ge,Ne),t.context=Vd(null),n=t.current,d=Jr(),d=te(d),L=Rt(d),L.callback=null,dt(n,L,d),n=d,t.current.lanes=n,st(t,n),Fi(t),e[ir]=t.current,nu(e),new Do(t)},reactDomClient_production.version="19.1.0",reactDomClient_production}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client.exports;hasRequiredClient=1;function o(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o)}catch(u){console.error(u)}}return o(),client.exports=requireReactDomClient_production(),client.exports}var clientExports=requireClient();function composeEventHandlers(o,u,{checkForDefaultPrevented:a=!0}={}){return function(y){if(o==null||o(y),a===!1||!y.defaultPrevented)return u==null?void 0:u(y)}}function createContextScope(o,u=[]){let a=[];function c(S,R){const m=reactExports.createContext(R),_=a.length;a=[...a,R];const A=T=>{var l;const{scope:O,children:w,...M}=T,f=((l=O==null?void 0:O[o])==null?void 0:l[_])||m,i=reactExports.useMemo(()=>M,Object.values(M));return jsxRuntimeExports.jsx(f.Provider,{value:i,children:w})};A.displayName=S+"Provider";function g(T,O){var f;const w=((f=O==null?void 0:O[o])==null?void 0:f[_])||m,M=reactExports.useContext(w);if(M)return M;if(R!==void 0)return R;throw new Error(`\`${T}\` must be used within \`${S}\``)}return[A,g]}const y=()=>{const S=a.map(R=>reactExports.createContext(R));return function(m){const _=(m==null?void 0:m[o])||S;return reactExports.useMemo(()=>({[`__scope${o}`]:{...m,[o]:_}}),[m,_])}};return y.scopeName=o,[c,composeContextScopes(y,...u)]}function composeContextScopes(...o){const u=o[0];if(o.length===1)return u;const a=()=>{const c=o.map(y=>({useScope:y(),scopeName:y.scopeName}));return function(S){const R=c.reduce((m,{useScope:_,scopeName:A})=>{const T=_(S)[`__scope${A}`];return{...m,...T}},{});return reactExports.useMemo(()=>({[`__scope${u.scopeName}`]:R}),[R])}};return a.scopeName=u.scopeName,a}function setRef(o,u){if(typeof o=="function")return o(u);o!=null&&(o.current=u)}function composeRefs(...o){return u=>{let a=!1;const c=o.map(y=>{const S=setRef(y,u);return!a&&typeof S=="function"&&(a=!0),S});if(a)return()=>{for(let y=0;y<c.length;y++){const S=c[y];typeof S=="function"?S():setRef(o[y],null)}}}}function useComposedRefs(...o){return reactExports.useCallback(composeRefs(...o),o)}function createSlot(o){const u=createSlotClone(o),a=reactExports.forwardRef((c,y)=>{const{children:S,...R}=c,m=reactExports.Children.toArray(S),_=m.find(isSlottable);if(_){const A=_.props.children,g=m.map(T=>T===_?reactExports.Children.count(A)>1?reactExports.Children.only(null):reactExports.isValidElement(A)?A.props.children:null:T);return jsxRuntimeExports.jsx(u,{...R,ref:y,children:reactExports.isValidElement(A)?reactExports.cloneElement(A,void 0,g):null})}return jsxRuntimeExports.jsx(u,{...R,ref:y,children:S})});return a.displayName=`${o}.Slot`,a}var Slot$1=createSlot("Slot");function createSlotClone(o){const u=reactExports.forwardRef((a,c)=>{const{children:y,...S}=a,R=reactExports.isValidElement(y)?getElementRef$1(y):void 0,m=useComposedRefs(R,c);if(reactExports.isValidElement(y)){const _=mergeProps(S,y.props);return y.type!==reactExports.Fragment&&(_.ref=m),reactExports.cloneElement(y,_)}return reactExports.Children.count(y)>1?reactExports.Children.only(null):null});return u.displayName=`${o}.SlotClone`,u}var SLOTTABLE_IDENTIFIER=Symbol("radix.slottable");function isSlottable(o){return reactExports.isValidElement(o)&&typeof o.type=="function"&&"__radixId"in o.type&&o.type.__radixId===SLOTTABLE_IDENTIFIER}function mergeProps(o,u){const a={...u};for(const c in u){const y=o[c],S=u[c];/^on[A-Z]/.test(c)?y&&S?a[c]=(...m)=>{const _=S(...m);return y(...m),_}:y&&(a[c]=y):c==="style"?a[c]={...y,...S}:c==="className"&&(a[c]=[y,S].filter(Boolean).join(" "))}return{...o,...a}}function getElementRef$1(o){var c,y;let u=(c=Object.getOwnPropertyDescriptor(o.props,"ref"))==null?void 0:c.get,a=u&&"isReactWarning"in u&&u.isReactWarning;return a?o.ref:(u=(y=Object.getOwnPropertyDescriptor(o,"ref"))==null?void 0:y.get,a=u&&"isReactWarning"in u&&u.isReactWarning,a?o.props.ref:o.props.ref||o.ref)}function createCollection(o){const u=o+"CollectionProvider",[a,c]=createContextScope(u),[y,S]=a(u,{collectionRef:{current:null},itemMap:new Map}),R=f=>{const{scope:i,children:l}=f,p=React.useRef(null),v=React.useRef(new Map).current;return jsxRuntimeExports.jsx(y,{scope:i,itemMap:v,collectionRef:p,children:l})};R.displayName=u;const m=o+"CollectionSlot",_=createSlot(m),A=React.forwardRef((f,i)=>{const{scope:l,children:p}=f,v=S(m,l),b=useComposedRefs(i,v.collectionRef);return jsxRuntimeExports.jsx(_,{ref:b,children:p})});A.displayName=m;const g=o+"CollectionItemSlot",T="data-radix-collection-item",O=createSlot(g),w=React.forwardRef((f,i)=>{const{scope:l,children:p,...v}=f,b=React.useRef(null),s=useComposedRefs(i,b),h=S(g,l);return React.useEffect(()=>(h.itemMap.set(b,{ref:b,...v}),()=>void h.itemMap.delete(b))),jsxRuntimeExports.jsx(O,{[T]:"",ref:s,children:p})});w.displayName=g;function M(f){const i=S(o+"CollectionConsumer",f);return React.useCallback(()=>{const p=i.collectionRef.current;if(!p)return[];const v=Array.from(p.querySelectorAll(`[${T}]`));return Array.from(i.itemMap.values()).sort((h,E)=>v.indexOf(h.ref.current)-v.indexOf(E.ref.current))},[i.collectionRef,i.itemMap])}return[{Provider:R,Slot:A,ItemSlot:w},M,c]}var useLayoutEffect2=globalThis!=null&&globalThis.document?reactExports.useLayoutEffect:()=>{},useReactId=React$1[" useId ".trim().toString()]||(()=>{}),count$1=0;function useId(o){const[u,a]=reactExports.useState(useReactId());return useLayoutEffect2(()=>{a(c=>c??String(count$1++))},[o]),o||(u?`radix-${u}`:"")}var reactDomExports=requireReactDom();const ReactDOM=getDefaultExportFromCjs(reactDomExports);var NODES=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Primitive=NODES.reduce((o,u)=>{const a=createSlot(`Primitive.${u}`),c=reactExports.forwardRef((y,S)=>{const{asChild:R,...m}=y,_=R?a:u;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),jsxRuntimeExports.jsx(_,{...m,ref:S})});return c.displayName=`Primitive.${u}`,{...o,[u]:c}},{});function dispatchDiscreteCustomEvent(o,u){o&&reactDomExports.flushSync(()=>o.dispatchEvent(u))}function useCallbackRef$1(o){const u=reactExports.useRef(o);return reactExports.useEffect(()=>{u.current=o}),reactExports.useMemo(()=>(...a)=>{var c;return(c=u.current)==null?void 0:c.call(u,...a)},[])}var useInsertionEffect=React$1[" useInsertionEffect ".trim().toString()]||useLayoutEffect2;function useControllableState({prop:o,defaultProp:u,onChange:a=()=>{},caller:c}){const[y,S,R]=useUncontrolledState({defaultProp:u,onChange:a}),m=o!==void 0,_=m?o:y;{const g=reactExports.useRef(o!==void 0);reactExports.useEffect(()=>{const T=g.current;T!==m&&console.warn(`${c} is changing from ${T?"controlled":"uncontrolled"} to ${m?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),g.current=m},[m,c])}const A=reactExports.useCallback(g=>{var T;if(m){const O=isFunction(g)?g(o):g;O!==o&&((T=R.current)==null||T.call(R,O))}else S(g)},[m,o,S,R]);return[_,A]}function useUncontrolledState({defaultProp:o,onChange:u}){const[a,c]=reactExports.useState(o),y=reactExports.useRef(a),S=reactExports.useRef(u);return useInsertionEffect(()=>{S.current=u},[u]),reactExports.useEffect(()=>{var R;y.current!==a&&((R=S.current)==null||R.call(S,a),y.current=a)},[a,y]),[a,c,S]}function isFunction(o){return typeof o=="function"}var DirectionContext=reactExports.createContext(void 0);function useDirection(o){const u=reactExports.useContext(DirectionContext);return o||u||"ltr"}var ENTRY_FOCUS="rovingFocusGroup.onEntryFocus",EVENT_OPTIONS$1={bubbles:!1,cancelable:!0},GROUP_NAME$1="RovingFocusGroup",[Collection$1,useCollection$1,createCollectionScope$1]=createCollection(GROUP_NAME$1),[createRovingFocusGroupContext,createRovingFocusGroupScope]=createContextScope(GROUP_NAME$1,[createCollectionScope$1]),[RovingFocusProvider,useRovingFocusContext]=createRovingFocusGroupContext(GROUP_NAME$1),RovingFocusGroup=reactExports.forwardRef((o,u)=>jsxRuntimeExports.jsx(Collection$1.Provider,{scope:o.__scopeRovingFocusGroup,children:jsxRuntimeExports.jsx(Collection$1.Slot,{scope:o.__scopeRovingFocusGroup,children:jsxRuntimeExports.jsx(RovingFocusGroupImpl,{...o,ref:u})})}));RovingFocusGroup.displayName=GROUP_NAME$1;var RovingFocusGroupImpl=reactExports.forwardRef((o,u)=>{const{__scopeRovingFocusGroup:a,orientation:c,loop:y=!1,dir:S,currentTabStopId:R,defaultCurrentTabStopId:m,onCurrentTabStopIdChange:_,onEntryFocus:A,preventScrollOnEntryFocus:g=!1,...T}=o,O=reactExports.useRef(null),w=useComposedRefs(u,O),M=useDirection(S),[f,i]=useControllableState({prop:R,defaultProp:m??null,onChange:_,caller:GROUP_NAME$1}),[l,p]=reactExports.useState(!1),v=useCallbackRef$1(A),b=useCollection$1(a),s=reactExports.useRef(!1),[h,E]=reactExports.useState(0);return reactExports.useEffect(()=>{const x=O.current;if(x)return x.addEventListener(ENTRY_FOCUS,v),()=>x.removeEventListener(ENTRY_FOCUS,v)},[v]),jsxRuntimeExports.jsx(RovingFocusProvider,{scope:a,orientation:c,dir:M,loop:y,currentTabStopId:f,onItemFocus:reactExports.useCallback(x=>i(x),[i]),onItemShiftTab:reactExports.useCallback(()=>p(!0),[]),onFocusableItemAdd:reactExports.useCallback(()=>E(x=>x+1),[]),onFocusableItemRemove:reactExports.useCallback(()=>E(x=>x-1),[]),children:jsxRuntimeExports.jsx(Primitive.div,{tabIndex:l||h===0?-1:0,"data-orientation":c,...T,ref:w,style:{outline:"none",...o.style},onMouseDown:composeEventHandlers(o.onMouseDown,()=>{s.current=!0}),onFocus:composeEventHandlers(o.onFocus,x=>{const D=!s.current;if(x.target===x.currentTarget&&D&&!l){const z=new CustomEvent(ENTRY_FOCUS,EVENT_OPTIONS$1);if(x.currentTarget.dispatchEvent(z),!z.defaultPrevented){const P=b().filter(U=>U.focusable),G=P.find(U=>U.active),B=P.find(U=>U.id===f),k=[G,B,...P].filter(Boolean).map(U=>U.ref.current);focusFirst$1(k,g)}}s.current=!1}),onBlur:composeEventHandlers(o.onBlur,()=>p(!1))})})}),ITEM_NAME$1="RovingFocusGroupItem",RovingFocusGroupItem=reactExports.forwardRef((o,u)=>{const{__scopeRovingFocusGroup:a,focusable:c=!0,active:y=!1,tabStopId:S,children:R,...m}=o,_=useId(),A=S||_,g=useRovingFocusContext(ITEM_NAME$1,a),T=g.currentTabStopId===A,O=useCollection$1(a),{onFocusableItemAdd:w,onFocusableItemRemove:M,currentTabStopId:f}=g;return reactExports.useEffect(()=>{if(c)return w(),()=>M()},[c,w,M]),jsxRuntimeExports.jsx(Collection$1.ItemSlot,{scope:a,id:A,focusable:c,active:y,children:jsxRuntimeExports.jsx(Primitive.span,{tabIndex:T?0:-1,"data-orientation":g.orientation,...m,ref:u,onMouseDown:composeEventHandlers(o.onMouseDown,i=>{c?g.onItemFocus(A):i.preventDefault()}),onFocus:composeEventHandlers(o.onFocus,()=>g.onItemFocus(A)),onKeyDown:composeEventHandlers(o.onKeyDown,i=>{if(i.key==="Tab"&&i.shiftKey){g.onItemShiftTab();return}if(i.target!==i.currentTarget)return;const l=getFocusIntent(i,g.orientation,g.dir);if(l!==void 0){if(i.metaKey||i.ctrlKey||i.altKey||i.shiftKey)return;i.preventDefault();let v=O().filter(b=>b.focusable).map(b=>b.ref.current);if(l==="last")v.reverse();else if(l==="prev"||l==="next"){l==="prev"&&v.reverse();const b=v.indexOf(i.currentTarget);v=g.loop?wrapArray$1(v,b+1):v.slice(b+1)}setTimeout(()=>focusFirst$1(v))}}),children:typeof R=="function"?R({isCurrentTabStop:T,hasTabStop:f!=null}):R})})});RovingFocusGroupItem.displayName=ITEM_NAME$1;var MAP_KEY_TO_FOCUS_INTENT={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function getDirectionAwareKey(o,u){return u!=="rtl"?o:o==="ArrowLeft"?"ArrowRight":o==="ArrowRight"?"ArrowLeft":o}function getFocusIntent(o,u,a){const c=getDirectionAwareKey(o.key,a);if(!(u==="vertical"&&["ArrowLeft","ArrowRight"].includes(c))&&!(u==="horizontal"&&["ArrowUp","ArrowDown"].includes(c)))return MAP_KEY_TO_FOCUS_INTENT[c]}function focusFirst$1(o,u=!1){const a=document.activeElement;for(const c of o)if(c===a||(c.focus({preventScroll:u}),document.activeElement!==a))return}function wrapArray$1(o,u){return o.map((a,c)=>o[(u+c)%o.length])}var Root$2=RovingFocusGroup,Item$1=RovingFocusGroupItem;function useStateMachine$1(o,u){return reactExports.useReducer((a,c)=>u[a][c]??a,o)}var Presence=o=>{const{present:u,children:a}=o,c=usePresence(u),y=typeof a=="function"?a({present:c.isPresent}):reactExports.Children.only(a),S=useComposedRefs(c.ref,getElementRef(y));return typeof a=="function"||c.isPresent?reactExports.cloneElement(y,{ref:S}):null};Presence.displayName="Presence";function usePresence(o){const[u,a]=reactExports.useState(),c=reactExports.useRef(null),y=reactExports.useRef(o),S=reactExports.useRef("none"),R=o?"mounted":"unmounted",[m,_]=useStateMachine$1(R,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return reactExports.useEffect(()=>{const A=getAnimationName(c.current);S.current=m==="mounted"?A:"none"},[m]),useLayoutEffect2(()=>{const A=c.current,g=y.current;if(g!==o){const O=S.current,w=getAnimationName(A);o?_("MOUNT"):w==="none"||(A==null?void 0:A.display)==="none"?_("UNMOUNT"):_(g&&O!==w?"ANIMATION_OUT":"UNMOUNT"),y.current=o}},[o,_]),useLayoutEffect2(()=>{if(u){let A;const g=u.ownerDocument.defaultView??window,T=w=>{const f=getAnimationName(c.current).includes(w.animationName);if(w.target===u&&f&&(_("ANIMATION_END"),!y.current)){const i=u.style.animationFillMode;u.style.animationFillMode="forwards",A=g.setTimeout(()=>{u.style.animationFillMode==="forwards"&&(u.style.animationFillMode=i)})}},O=w=>{w.target===u&&(S.current=getAnimationName(c.current))};return u.addEventListener("animationstart",O),u.addEventListener("animationcancel",T),u.addEventListener("animationend",T),()=>{g.clearTimeout(A),u.removeEventListener("animationstart",O),u.removeEventListener("animationcancel",T),u.removeEventListener("animationend",T)}}else _("ANIMATION_END")},[u,_]),{isPresent:["mounted","unmountSuspended"].includes(m),ref:reactExports.useCallback(A=>{c.current=A?getComputedStyle(A):null,a(A)},[])}}function getAnimationName(o){return(o==null?void 0:o.animationName)||"none"}function getElementRef(o){var c,y;let u=(c=Object.getOwnPropertyDescriptor(o.props,"ref"))==null?void 0:c.get,a=u&&"isReactWarning"in u&&u.isReactWarning;return a?o.ref:(u=(y=Object.getOwnPropertyDescriptor(o,"ref"))==null?void 0:y.get,a=u&&"isReactWarning"in u&&u.isReactWarning,a?o.props.ref:o.props.ref||o.ref)}var TABS_NAME="Tabs",[createTabsContext,createTabsScope]=createContextScope(TABS_NAME,[createRovingFocusGroupScope]),useRovingFocusGroupScope=createRovingFocusGroupScope(),[TabsProvider,useTabsContext]=createTabsContext(TABS_NAME),Tabs$1=reactExports.forwardRef((o,u)=>{const{__scopeTabs:a,value:c,onValueChange:y,defaultValue:S,orientation:R="horizontal",dir:m,activationMode:_="automatic",...A}=o,g=useDirection(m),[T,O]=useControllableState({prop:c,onChange:y,defaultProp:S??"",caller:TABS_NAME});return jsxRuntimeExports.jsx(TabsProvider,{scope:a,baseId:useId(),value:T,onValueChange:O,orientation:R,dir:g,activationMode:_,children:jsxRuntimeExports.jsx(Primitive.div,{dir:g,"data-orientation":R,...A,ref:u})})});Tabs$1.displayName=TABS_NAME;var TAB_LIST_NAME="TabsList",TabsList$1=reactExports.forwardRef((o,u)=>{const{__scopeTabs:a,loop:c=!0,...y}=o,S=useTabsContext(TAB_LIST_NAME,a),R=useRovingFocusGroupScope(a);return jsxRuntimeExports.jsx(Root$2,{asChild:!0,...R,orientation:S.orientation,dir:S.dir,loop:c,children:jsxRuntimeExports.jsx(Primitive.div,{role:"tablist","aria-orientation":S.orientation,...y,ref:u})})});TabsList$1.displayName=TAB_LIST_NAME;var TRIGGER_NAME$1="TabsTrigger",TabsTrigger$1=reactExports.forwardRef((o,u)=>{const{__scopeTabs:a,value:c,disabled:y=!1,...S}=o,R=useTabsContext(TRIGGER_NAME$1,a),m=useRovingFocusGroupScope(a),_=makeTriggerId(R.baseId,c),A=makeContentId(R.baseId,c),g=c===R.value;return jsxRuntimeExports.jsx(Item$1,{asChild:!0,...m,focusable:!y,active:g,children:jsxRuntimeExports.jsx(Primitive.button,{type:"button",role:"tab","aria-selected":g,"aria-controls":A,"data-state":g?"active":"inactive","data-disabled":y?"":void 0,disabled:y,id:_,...S,ref:u,onMouseDown:composeEventHandlers(o.onMouseDown,T=>{!y&&T.button===0&&T.ctrlKey===!1?R.onValueChange(c):T.preventDefault()}),onKeyDown:composeEventHandlers(o.onKeyDown,T=>{[" ","Enter"].includes(T.key)&&R.onValueChange(c)}),onFocus:composeEventHandlers(o.onFocus,()=>{const T=R.activationMode!=="manual";!g&&!y&&T&&R.onValueChange(c)})})})});TabsTrigger$1.displayName=TRIGGER_NAME$1;var CONTENT_NAME$2="TabsContent",TabsContent$1=reactExports.forwardRef((o,u)=>{const{__scopeTabs:a,value:c,forceMount:y,children:S,...R}=o,m=useTabsContext(CONTENT_NAME$2,a),_=makeTriggerId(m.baseId,c),A=makeContentId(m.baseId,c),g=c===m.value,T=reactExports.useRef(g);return reactExports.useEffect(()=>{const O=requestAnimationFrame(()=>T.current=!1);return()=>cancelAnimationFrame(O)},[]),jsxRuntimeExports.jsx(Presence,{present:y||g,children:({present:O})=>jsxRuntimeExports.jsx(Primitive.div,{"data-state":g?"active":"inactive","data-orientation":m.orientation,role:"tabpanel","aria-labelledby":_,hidden:!O,id:A,tabIndex:0,...R,ref:u,style:{...o.style,animationDuration:T.current?"0s":void 0},children:O&&S})})});TabsContent$1.displayName=CONTENT_NAME$2;function makeTriggerId(o,u){return`${o}-trigger-${u}`}function makeContentId(o,u){return`${o}-content-${u}`}var Root2$2=Tabs$1,List=TabsList$1,Trigger$1=TabsTrigger$1,Content$1=TabsContent$1;function r(o){var u,a,c="";if(typeof o=="string"||typeof o=="number")c+=o;else if(typeof o=="object")if(Array.isArray(o)){var y=o.length;for(u=0;u<y;u++)o[u]&&(a=r(o[u]))&&(c&&(c+=" "),c+=a)}else for(a in o)o[a]&&(c&&(c+=" "),c+=a);return c}function clsx(){for(var o,u,a=0,c="",y=arguments.length;a<y;a++)(o=arguments[a])&&(u=r(o))&&(c&&(c+=" "),c+=u);return c}const CLASS_PART_SEPARATOR="-",createClassGroupUtils=o=>{const u=createClassMap(o),{conflictingClassGroups:a,conflictingClassGroupModifiers:c}=o;return{getClassGroupId:R=>{const m=R.split(CLASS_PART_SEPARATOR);return m[0]===""&&m.length!==1&&m.shift(),getGroupRecursive(m,u)||getGroupIdForArbitraryProperty(R)},getConflictingClassGroupIds:(R,m)=>{const _=a[R]||[];return m&&c[R]?[..._,...c[R]]:_}}},getGroupRecursive=(o,u)=>{var R;if(o.length===0)return u.classGroupId;const a=o[0],c=u.nextPart.get(a),y=c?getGroupRecursive(o.slice(1),c):void 0;if(y)return y;if(u.validators.length===0)return;const S=o.join(CLASS_PART_SEPARATOR);return(R=u.validators.find(({validator:m})=>m(S)))==null?void 0:R.classGroupId},arbitraryPropertyRegex=/^\[(.+)\]$/,getGroupIdForArbitraryProperty=o=>{if(arbitraryPropertyRegex.test(o)){const u=arbitraryPropertyRegex.exec(o)[1],a=u==null?void 0:u.substring(0,u.indexOf(":"));if(a)return"arbitrary.."+a}},createClassMap=o=>{const{theme:u,classGroups:a}=o,c={nextPart:new Map,validators:[]};for(const y in a)processClassesRecursively(a[y],c,y,u);return c},processClassesRecursively=(o,u,a,c)=>{o.forEach(y=>{if(typeof y=="string"){const S=y===""?u:getPart(u,y);S.classGroupId=a;return}if(typeof y=="function"){if(isThemeGetter(y)){processClassesRecursively(y(c),u,a,c);return}u.validators.push({validator:y,classGroupId:a});return}Object.entries(y).forEach(([S,R])=>{processClassesRecursively(R,getPart(u,S),a,c)})})},getPart=(o,u)=>{let a=o;return u.split(CLASS_PART_SEPARATOR).forEach(c=>{a.nextPart.has(c)||a.nextPart.set(c,{nextPart:new Map,validators:[]}),a=a.nextPart.get(c)}),a},isThemeGetter=o=>o.isThemeGetter,createLruCache=o=>{if(o<1)return{get:()=>{},set:()=>{}};let u=0,a=new Map,c=new Map;const y=(S,R)=>{a.set(S,R),u++,u>o&&(u=0,c=a,a=new Map)};return{get(S){let R=a.get(S);if(R!==void 0)return R;if((R=c.get(S))!==void 0)return y(S,R),R},set(S,R){a.has(S)?a.set(S,R):y(S,R)}}},IMPORTANT_MODIFIER="!",MODIFIER_SEPARATOR=":",MODIFIER_SEPARATOR_LENGTH=MODIFIER_SEPARATOR.length,createParseClassName=o=>{const{prefix:u,experimentalParseClassName:a}=o;let c=y=>{const S=[];let R=0,m=0,_=0,A;for(let M=0;M<y.length;M++){let f=y[M];if(R===0&&m===0){if(f===MODIFIER_SEPARATOR){S.push(y.slice(_,M)),_=M+MODIFIER_SEPARATOR_LENGTH;continue}if(f==="/"){A=M;continue}}f==="["?R++:f==="]"?R--:f==="("?m++:f===")"&&m--}const g=S.length===0?y:y.substring(_),T=stripImportantModifier(g),O=T!==g,w=A&&A>_?A-_:void 0;return{modifiers:S,hasImportantModifier:O,baseClassName:T,maybePostfixModifierPosition:w}};if(u){const y=u+MODIFIER_SEPARATOR,S=c;c=R=>R.startsWith(y)?S(R.substring(y.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:R,maybePostfixModifierPosition:void 0}}if(a){const y=c;c=S=>a({className:S,parseClassName:y})}return c},stripImportantModifier=o=>o.endsWith(IMPORTANT_MODIFIER)?o.substring(0,o.length-1):o.startsWith(IMPORTANT_MODIFIER)?o.substring(1):o,createSortModifiers=o=>{const u=Object.fromEntries(o.orderSensitiveModifiers.map(c=>[c,!0]));return c=>{if(c.length<=1)return c;const y=[];let S=[];return c.forEach(R=>{R[0]==="["||u[R]?(y.push(...S.sort(),R),S=[]):S.push(R)}),y.push(...S.sort()),y}},createConfigUtils=o=>({cache:createLruCache(o.cacheSize),parseClassName:createParseClassName(o),sortModifiers:createSortModifiers(o),...createClassGroupUtils(o)}),SPLIT_CLASSES_REGEX=/\s+/,mergeClassList=(o,u)=>{const{parseClassName:a,getClassGroupId:c,getConflictingClassGroupIds:y,sortModifiers:S}=u,R=[],m=o.trim().split(SPLIT_CLASSES_REGEX);let _="";for(let A=m.length-1;A>=0;A-=1){const g=m[A],{isExternal:T,modifiers:O,hasImportantModifier:w,baseClassName:M,maybePostfixModifierPosition:f}=a(g);if(T){_=g+(_.length>0?" "+_:_);continue}let i=!!f,l=c(i?M.substring(0,f):M);if(!l){if(!i){_=g+(_.length>0?" "+_:_);continue}if(l=c(M),!l){_=g+(_.length>0?" "+_:_);continue}i=!1}const p=S(O).join(":"),v=w?p+IMPORTANT_MODIFIER:p,b=v+l;if(R.includes(b))continue;R.push(b);const s=y(l,i);for(let h=0;h<s.length;++h){const E=s[h];R.push(v+E)}_=g+(_.length>0?" "+_:_)}return _};function twJoin(){let o=0,u,a,c="";for(;o<arguments.length;)(u=arguments[o++])&&(a=toValue(u))&&(c&&(c+=" "),c+=a);return c}const toValue=o=>{if(typeof o=="string")return o;let u,a="";for(let c=0;c<o.length;c++)o[c]&&(u=toValue(o[c]))&&(a&&(a+=" "),a+=u);return a};function createTailwindMerge(o,...u){let a,c,y,S=R;function R(_){const A=u.reduce((g,T)=>T(g),o());return a=createConfigUtils(A),c=a.cache.get,y=a.cache.set,S=m,m(_)}function m(_){const A=c(_);if(A)return A;const g=mergeClassList(_,a);return y(_,g),g}return function(){return S(twJoin.apply(null,arguments))}}const fromTheme=o=>{const u=a=>a[o]||[];return u.isThemeGetter=!0,u},arbitraryValueRegex=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,arbitraryVariableRegex=/^\((?:(\w[\w-]*):)?(.+)\)$/i,fractionRegex=/^\d+\/\d+$/,tshirtUnitRegex=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,lengthUnitRegex=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,colorFunctionRegex=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,shadowRegex=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,imageRegex=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,isFraction=o=>fractionRegex.test(o),isNumber=o=>!!o&&!Number.isNaN(Number(o)),isInteger=o=>!!o&&Number.isInteger(Number(o)),isPercent=o=>o.endsWith("%")&&isNumber(o.slice(0,-1)),isTshirtSize=o=>tshirtUnitRegex.test(o),isAny=()=>!0,isLengthOnly=o=>lengthUnitRegex.test(o)&&!colorFunctionRegex.test(o),isNever=()=>!1,isShadow=o=>shadowRegex.test(o),isImage=o=>imageRegex.test(o),isAnyNonArbitrary=o=>!isArbitraryValue(o)&&!isArbitraryVariable(o),isArbitrarySize=o=>getIsArbitraryValue(o,isLabelSize,isNever),isArbitraryValue=o=>arbitraryValueRegex.test(o),isArbitraryLength=o=>getIsArbitraryValue(o,isLabelLength,isLengthOnly),isArbitraryNumber=o=>getIsArbitraryValue(o,isLabelNumber,isNumber),isArbitraryPosition=o=>getIsArbitraryValue(o,isLabelPosition,isNever),isArbitraryImage=o=>getIsArbitraryValue(o,isLabelImage,isImage),isArbitraryShadow=o=>getIsArbitraryValue(o,isLabelShadow,isShadow),isArbitraryVariable=o=>arbitraryVariableRegex.test(o),isArbitraryVariableLength=o=>getIsArbitraryVariable(o,isLabelLength),isArbitraryVariableFamilyName=o=>getIsArbitraryVariable(o,isLabelFamilyName),isArbitraryVariablePosition=o=>getIsArbitraryVariable(o,isLabelPosition),isArbitraryVariableSize=o=>getIsArbitraryVariable(o,isLabelSize),isArbitraryVariableImage=o=>getIsArbitraryVariable(o,isLabelImage),isArbitraryVariableShadow=o=>getIsArbitraryVariable(o,isLabelShadow,!0),getIsArbitraryValue=(o,u,a)=>{const c=arbitraryValueRegex.exec(o);return c?c[1]?u(c[1]):a(c[2]):!1},getIsArbitraryVariable=(o,u,a=!1)=>{const c=arbitraryVariableRegex.exec(o);return c?c[1]?u(c[1]):a:!1},isLabelPosition=o=>o==="position"||o==="percentage",isLabelImage=o=>o==="image"||o==="url",isLabelSize=o=>o==="length"||o==="size"||o==="bg-size",isLabelLength=o=>o==="length",isLabelNumber=o=>o==="number",isLabelFamilyName=o=>o==="family-name",isLabelShadow=o=>o==="shadow",getDefaultConfig=()=>{const o=fromTheme("color"),u=fromTheme("font"),a=fromTheme("text"),c=fromTheme("font-weight"),y=fromTheme("tracking"),S=fromTheme("leading"),R=fromTheme("breakpoint"),m=fromTheme("container"),_=fromTheme("spacing"),A=fromTheme("radius"),g=fromTheme("shadow"),T=fromTheme("inset-shadow"),O=fromTheme("text-shadow"),w=fromTheme("drop-shadow"),M=fromTheme("blur"),f=fromTheme("perspective"),i=fromTheme("aspect"),l=fromTheme("ease"),p=fromTheme("animate"),v=()=>["auto","avoid","all","avoid-page","page","left","right","column"],b=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],s=()=>[...b(),isArbitraryVariable,isArbitraryValue],h=()=>["auto","hidden","clip","visible","scroll"],E=()=>["auto","contain","none"],x=()=>[isArbitraryVariable,isArbitraryValue,_],D=()=>[isFraction,"full","auto",...x()],z=()=>[isInteger,"none","subgrid",isArbitraryVariable,isArbitraryValue],P=()=>["auto",{span:["full",isInteger,isArbitraryVariable,isArbitraryValue]},isInteger,isArbitraryVariable,isArbitraryValue],G=()=>[isInteger,"auto",isArbitraryVariable,isArbitraryValue],B=()=>["auto","min","max","fr",isArbitraryVariable,isArbitraryValue],K=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],k=()=>["start","end","center","stretch","center-safe","end-safe"],U=()=>["auto",...x()],W=()=>[isFraction,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...x()],F=()=>[o,isArbitraryVariable,isArbitraryValue],Y=()=>[...b(),isArbitraryVariablePosition,isArbitraryPosition,{position:[isArbitraryVariable,isArbitraryValue]}],j=()=>["no-repeat",{repeat:["","x","y","space","round"]}],H=()=>["auto","cover","contain",isArbitraryVariableSize,isArbitrarySize,{size:[isArbitraryVariable,isArbitraryValue]}],Z=()=>[isPercent,isArbitraryVariableLength,isArbitraryLength],ne=()=>["","none","full",A,isArbitraryVariable,isArbitraryValue],se=()=>["",isNumber,isArbitraryVariableLength,isArbitraryLength],me=()=>["solid","dashed","dotted","double"],de=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ue=()=>[isNumber,isPercent,isArbitraryVariablePosition,isArbitraryPosition],ce=()=>["","none",M,isArbitraryVariable,isArbitraryValue],pe=()=>["none",isNumber,isArbitraryVariable,isArbitraryValue],De=()=>["none",isNumber,isArbitraryVariable,isArbitraryValue],we=()=>[isNumber,isArbitraryVariable,isArbitraryValue],je=()=>[isFraction,"full",...x()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[isTshirtSize],breakpoint:[isTshirtSize],color:[isAny],container:[isTshirtSize],"drop-shadow":[isTshirtSize],ease:["in","out","in-out"],font:[isAnyNonArbitrary],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[isTshirtSize],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[isTshirtSize],shadow:[isTshirtSize],spacing:["px",isNumber],text:[isTshirtSize],"text-shadow":[isTshirtSize],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",isFraction,isArbitraryValue,isArbitraryVariable,i]}],container:["container"],columns:[{columns:[isNumber,isArbitraryValue,isArbitraryVariable,m]}],"break-after":[{"break-after":v()}],"break-before":[{"break-before":v()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:s()}],overflow:[{overflow:h()}],"overflow-x":[{"overflow-x":h()}],"overflow-y":[{"overflow-y":h()}],overscroll:[{overscroll:E()}],"overscroll-x":[{"overscroll-x":E()}],"overscroll-y":[{"overscroll-y":E()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:D()}],"inset-x":[{"inset-x":D()}],"inset-y":[{"inset-y":D()}],start:[{start:D()}],end:[{end:D()}],top:[{top:D()}],right:[{right:D()}],bottom:[{bottom:D()}],left:[{left:D()}],visibility:["visible","invisible","collapse"],z:[{z:[isInteger,"auto",isArbitraryVariable,isArbitraryValue]}],basis:[{basis:[isFraction,"full","auto",m,...x()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[isNumber,isFraction,"auto","initial","none",isArbitraryValue]}],grow:[{grow:["",isNumber,isArbitraryVariable,isArbitraryValue]}],shrink:[{shrink:["",isNumber,isArbitraryVariable,isArbitraryValue]}],order:[{order:[isInteger,"first","last","none",isArbitraryVariable,isArbitraryValue]}],"grid-cols":[{"grid-cols":z()}],"col-start-end":[{col:P()}],"col-start":[{"col-start":G()}],"col-end":[{"col-end":G()}],"grid-rows":[{"grid-rows":z()}],"row-start-end":[{row:P()}],"row-start":[{"row-start":G()}],"row-end":[{"row-end":G()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":B()}],"auto-rows":[{"auto-rows":B()}],gap:[{gap:x()}],"gap-x":[{"gap-x":x()}],"gap-y":[{"gap-y":x()}],"justify-content":[{justify:[...K(),"normal"]}],"justify-items":[{"justify-items":[...k(),"normal"]}],"justify-self":[{"justify-self":["auto",...k()]}],"align-content":[{content:["normal",...K()]}],"align-items":[{items:[...k(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...k(),{baseline:["","last"]}]}],"place-content":[{"place-content":K()}],"place-items":[{"place-items":[...k(),"baseline"]}],"place-self":[{"place-self":["auto",...k()]}],p:[{p:x()}],px:[{px:x()}],py:[{py:x()}],ps:[{ps:x()}],pe:[{pe:x()}],pt:[{pt:x()}],pr:[{pr:x()}],pb:[{pb:x()}],pl:[{pl:x()}],m:[{m:U()}],mx:[{mx:U()}],my:[{my:U()}],ms:[{ms:U()}],me:[{me:U()}],mt:[{mt:U()}],mr:[{mr:U()}],mb:[{mb:U()}],ml:[{ml:U()}],"space-x":[{"space-x":x()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":x()}],"space-y-reverse":["space-y-reverse"],size:[{size:W()}],w:[{w:[m,"screen",...W()]}],"min-w":[{"min-w":[m,"screen","none",...W()]}],"max-w":[{"max-w":[m,"screen","none","prose",{screen:[R]},...W()]}],h:[{h:["screen",...W()]}],"min-h":[{"min-h":["screen","none",...W()]}],"max-h":[{"max-h":["screen",...W()]}],"font-size":[{text:["base",a,isArbitraryVariableLength,isArbitraryLength]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[c,isArbitraryVariable,isArbitraryNumber]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",isPercent,isArbitraryValue]}],"font-family":[{font:[isArbitraryVariableFamilyName,isArbitraryValue,u]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[y,isArbitraryVariable,isArbitraryValue]}],"line-clamp":[{"line-clamp":[isNumber,"none",isArbitraryVariable,isArbitraryNumber]}],leading:[{leading:[S,...x()]}],"list-image":[{"list-image":["none",isArbitraryVariable,isArbitraryValue]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",isArbitraryVariable,isArbitraryValue]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:F()}],"text-color":[{text:F()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...me(),"wavy"]}],"text-decoration-thickness":[{decoration:[isNumber,"from-font","auto",isArbitraryVariable,isArbitraryLength]}],"text-decoration-color":[{decoration:F()}],"underline-offset":[{"underline-offset":[isNumber,"auto",isArbitraryVariable,isArbitraryValue]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:x()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",isArbitraryVariable,isArbitraryValue]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",isArbitraryVariable,isArbitraryValue]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Y()}],"bg-repeat":[{bg:j()}],"bg-size":[{bg:H()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},isInteger,isArbitraryVariable,isArbitraryValue],radial:["",isArbitraryVariable,isArbitraryValue],conic:[isInteger,isArbitraryVariable,isArbitraryValue]},isArbitraryVariableImage,isArbitraryImage]}],"bg-color":[{bg:F()}],"gradient-from-pos":[{from:Z()}],"gradient-via-pos":[{via:Z()}],"gradient-to-pos":[{to:Z()}],"gradient-from":[{from:F()}],"gradient-via":[{via:F()}],"gradient-to":[{to:F()}],rounded:[{rounded:ne()}],"rounded-s":[{"rounded-s":ne()}],"rounded-e":[{"rounded-e":ne()}],"rounded-t":[{"rounded-t":ne()}],"rounded-r":[{"rounded-r":ne()}],"rounded-b":[{"rounded-b":ne()}],"rounded-l":[{"rounded-l":ne()}],"rounded-ss":[{"rounded-ss":ne()}],"rounded-se":[{"rounded-se":ne()}],"rounded-ee":[{"rounded-ee":ne()}],"rounded-es":[{"rounded-es":ne()}],"rounded-tl":[{"rounded-tl":ne()}],"rounded-tr":[{"rounded-tr":ne()}],"rounded-br":[{"rounded-br":ne()}],"rounded-bl":[{"rounded-bl":ne()}],"border-w":[{border:se()}],"border-w-x":[{"border-x":se()}],"border-w-y":[{"border-y":se()}],"border-w-s":[{"border-s":se()}],"border-w-e":[{"border-e":se()}],"border-w-t":[{"border-t":se()}],"border-w-r":[{"border-r":se()}],"border-w-b":[{"border-b":se()}],"border-w-l":[{"border-l":se()}],"divide-x":[{"divide-x":se()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":se()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...me(),"hidden","none"]}],"divide-style":[{divide:[...me(),"hidden","none"]}],"border-color":[{border:F()}],"border-color-x":[{"border-x":F()}],"border-color-y":[{"border-y":F()}],"border-color-s":[{"border-s":F()}],"border-color-e":[{"border-e":F()}],"border-color-t":[{"border-t":F()}],"border-color-r":[{"border-r":F()}],"border-color-b":[{"border-b":F()}],"border-color-l":[{"border-l":F()}],"divide-color":[{divide:F()}],"outline-style":[{outline:[...me(),"none","hidden"]}],"outline-offset":[{"outline-offset":[isNumber,isArbitraryVariable,isArbitraryValue]}],"outline-w":[{outline:["",isNumber,isArbitraryVariableLength,isArbitraryLength]}],"outline-color":[{outline:F()}],shadow:[{shadow:["","none",g,isArbitraryVariableShadow,isArbitraryShadow]}],"shadow-color":[{shadow:F()}],"inset-shadow":[{"inset-shadow":["none",T,isArbitraryVariableShadow,isArbitraryShadow]}],"inset-shadow-color":[{"inset-shadow":F()}],"ring-w":[{ring:se()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:F()}],"ring-offset-w":[{"ring-offset":[isNumber,isArbitraryLength]}],"ring-offset-color":[{"ring-offset":F()}],"inset-ring-w":[{"inset-ring":se()}],"inset-ring-color":[{"inset-ring":F()}],"text-shadow":[{"text-shadow":["none",O,isArbitraryVariableShadow,isArbitraryShadow]}],"text-shadow-color":[{"text-shadow":F()}],opacity:[{opacity:[isNumber,isArbitraryVariable,isArbitraryValue]}],"mix-blend":[{"mix-blend":[...de(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":de()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[isNumber]}],"mask-image-linear-from-pos":[{"mask-linear-from":ue()}],"mask-image-linear-to-pos":[{"mask-linear-to":ue()}],"mask-image-linear-from-color":[{"mask-linear-from":F()}],"mask-image-linear-to-color":[{"mask-linear-to":F()}],"mask-image-t-from-pos":[{"mask-t-from":ue()}],"mask-image-t-to-pos":[{"mask-t-to":ue()}],"mask-image-t-from-color":[{"mask-t-from":F()}],"mask-image-t-to-color":[{"mask-t-to":F()}],"mask-image-r-from-pos":[{"mask-r-from":ue()}],"mask-image-r-to-pos":[{"mask-r-to":ue()}],"mask-image-r-from-color":[{"mask-r-from":F()}],"mask-image-r-to-color":[{"mask-r-to":F()}],"mask-image-b-from-pos":[{"mask-b-from":ue()}],"mask-image-b-to-pos":[{"mask-b-to":ue()}],"mask-image-b-from-color":[{"mask-b-from":F()}],"mask-image-b-to-color":[{"mask-b-to":F()}],"mask-image-l-from-pos":[{"mask-l-from":ue()}],"mask-image-l-to-pos":[{"mask-l-to":ue()}],"mask-image-l-from-color":[{"mask-l-from":F()}],"mask-image-l-to-color":[{"mask-l-to":F()}],"mask-image-x-from-pos":[{"mask-x-from":ue()}],"mask-image-x-to-pos":[{"mask-x-to":ue()}],"mask-image-x-from-color":[{"mask-x-from":F()}],"mask-image-x-to-color":[{"mask-x-to":F()}],"mask-image-y-from-pos":[{"mask-y-from":ue()}],"mask-image-y-to-pos":[{"mask-y-to":ue()}],"mask-image-y-from-color":[{"mask-y-from":F()}],"mask-image-y-to-color":[{"mask-y-to":F()}],"mask-image-radial":[{"mask-radial":[isArbitraryVariable,isArbitraryValue]}],"mask-image-radial-from-pos":[{"mask-radial-from":ue()}],"mask-image-radial-to-pos":[{"mask-radial-to":ue()}],"mask-image-radial-from-color":[{"mask-radial-from":F()}],"mask-image-radial-to-color":[{"mask-radial-to":F()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":b()}],"mask-image-conic-pos":[{"mask-conic":[isNumber]}],"mask-image-conic-from-pos":[{"mask-conic-from":ue()}],"mask-image-conic-to-pos":[{"mask-conic-to":ue()}],"mask-image-conic-from-color":[{"mask-conic-from":F()}],"mask-image-conic-to-color":[{"mask-conic-to":F()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Y()}],"mask-repeat":[{mask:j()}],"mask-size":[{mask:H()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",isArbitraryVariable,isArbitraryValue]}],filter:[{filter:["","none",isArbitraryVariable,isArbitraryValue]}],blur:[{blur:ce()}],brightness:[{brightness:[isNumber,isArbitraryVariable,isArbitraryValue]}],contrast:[{contrast:[isNumber,isArbitraryVariable,isArbitraryValue]}],"drop-shadow":[{"drop-shadow":["","none",w,isArbitraryVariableShadow,isArbitraryShadow]}],"drop-shadow-color":[{"drop-shadow":F()}],grayscale:[{grayscale:["",isNumber,isArbitraryVariable,isArbitraryValue]}],"hue-rotate":[{"hue-rotate":[isNumber,isArbitraryVariable,isArbitraryValue]}],invert:[{invert:["",isNumber,isArbitraryVariable,isArbitraryValue]}],saturate:[{saturate:[isNumber,isArbitraryVariable,isArbitraryValue]}],sepia:[{sepia:["",isNumber,isArbitraryVariable,isArbitraryValue]}],"backdrop-filter":[{"backdrop-filter":["","none",isArbitraryVariable,isArbitraryValue]}],"backdrop-blur":[{"backdrop-blur":ce()}],"backdrop-brightness":[{"backdrop-brightness":[isNumber,isArbitraryVariable,isArbitraryValue]}],"backdrop-contrast":[{"backdrop-contrast":[isNumber,isArbitraryVariable,isArbitraryValue]}],"backdrop-grayscale":[{"backdrop-grayscale":["",isNumber,isArbitraryVariable,isArbitraryValue]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[isNumber,isArbitraryVariable,isArbitraryValue]}],"backdrop-invert":[{"backdrop-invert":["",isNumber,isArbitraryVariable,isArbitraryValue]}],"backdrop-opacity":[{"backdrop-opacity":[isNumber,isArbitraryVariable,isArbitraryValue]}],"backdrop-saturate":[{"backdrop-saturate":[isNumber,isArbitraryVariable,isArbitraryValue]}],"backdrop-sepia":[{"backdrop-sepia":["",isNumber,isArbitraryVariable,isArbitraryValue]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":x()}],"border-spacing-x":[{"border-spacing-x":x()}],"border-spacing-y":[{"border-spacing-y":x()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",isArbitraryVariable,isArbitraryValue]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[isNumber,"initial",isArbitraryVariable,isArbitraryValue]}],ease:[{ease:["linear","initial",l,isArbitraryVariable,isArbitraryValue]}],delay:[{delay:[isNumber,isArbitraryVariable,isArbitraryValue]}],animate:[{animate:["none",p,isArbitraryVariable,isArbitraryValue]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[f,isArbitraryVariable,isArbitraryValue]}],"perspective-origin":[{"perspective-origin":s()}],rotate:[{rotate:pe()}],"rotate-x":[{"rotate-x":pe()}],"rotate-y":[{"rotate-y":pe()}],"rotate-z":[{"rotate-z":pe()}],scale:[{scale:De()}],"scale-x":[{"scale-x":De()}],"scale-y":[{"scale-y":De()}],"scale-z":[{"scale-z":De()}],"scale-3d":["scale-3d"],skew:[{skew:we()}],"skew-x":[{"skew-x":we()}],"skew-y":[{"skew-y":we()}],transform:[{transform:[isArbitraryVariable,isArbitraryValue,"","none","gpu","cpu"]}],"transform-origin":[{origin:s()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:je()}],"translate-x":[{"translate-x":je()}],"translate-y":[{"translate-y":je()}],"translate-z":[{"translate-z":je()}],"translate-none":["translate-none"],accent:[{accent:F()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:F()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",isArbitraryVariable,isArbitraryValue]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":x()}],"scroll-mx":[{"scroll-mx":x()}],"scroll-my":[{"scroll-my":x()}],"scroll-ms":[{"scroll-ms":x()}],"scroll-me":[{"scroll-me":x()}],"scroll-mt":[{"scroll-mt":x()}],"scroll-mr":[{"scroll-mr":x()}],"scroll-mb":[{"scroll-mb":x()}],"scroll-ml":[{"scroll-ml":x()}],"scroll-p":[{"scroll-p":x()}],"scroll-px":[{"scroll-px":x()}],"scroll-py":[{"scroll-py":x()}],"scroll-ps":[{"scroll-ps":x()}],"scroll-pe":[{"scroll-pe":x()}],"scroll-pt":[{"scroll-pt":x()}],"scroll-pr":[{"scroll-pr":x()}],"scroll-pb":[{"scroll-pb":x()}],"scroll-pl":[{"scroll-pl":x()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",isArbitraryVariable,isArbitraryValue]}],fill:[{fill:["none",...F()]}],"stroke-w":[{stroke:[isNumber,isArbitraryVariableLength,isArbitraryLength,isArbitraryNumber]}],stroke:[{stroke:["none",...F()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},twMerge=createTailwindMerge(getDefaultConfig);function cn(...o){return twMerge(clsx(o))}function Tabs({className:o,...u}){return jsxRuntimeExports.jsx(Root2$2,{"data-slot":"tabs",className:cn("flex flex-col gap-2",o),...u})}function TabsList({className:o,...u}){return jsxRuntimeExports.jsx(List,{"data-slot":"tabs-list",className:cn("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",o),...u})}function TabsTrigger({className:o,...u}){return jsxRuntimeExports.jsx(Trigger$1,{"data-slot":"tabs-trigger",className:cn("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",o),...u})}function TabsContent({className:o,...u}){return jsxRuntimeExports.jsx(Content$1,{"data-slot":"tabs-content",className:cn("flex-1 outline-none",o),...u})}const __vite_import_meta_env__$3={},isSelfAtom=(o,u)=>o.unstable_is?o.unstable_is(u):u===o,hasInitialValue=o=>"init"in o,isActuallyWritableAtom=o=>!!o.write,isAtomStateInitialized=o=>"v"in o||"e"in o,returnAtomValue=o=>{if("e"in o)throw o.e;if((__vite_import_meta_env__$3?"production":void 0)!=="production"&&!("v"in o))throw new Error("[Bug] atom state is not initialized");return o.v},promiseStateMap=new WeakMap,isPendingPromise=o=>{var u;return isPromiseLike$2(o)&&!!((u=promiseStateMap.get(o))!=null&&u[0])},abortPromise=o=>{const u=promiseStateMap.get(o);u!=null&&u[0]&&(u[0]=!1,u[1].forEach(a=>a()))},registerAbortHandler=(o,u)=>{let a=promiseStateMap.get(o);if(!a){a=[!0,new Set],promiseStateMap.set(o,a);const c=()=>{a[0]=!1};o.then(c,c)}a[1].add(u)},isPromiseLike$2=o=>typeof(o==null?void 0:o.then)=="function",addPendingPromiseToDependency=(o,u,a)=>{a.p.has(o)||(a.p.add(o),u.then(()=>{a.p.delete(o)},()=>{a.p.delete(o)}))},setAtomStateValueOrPromise=(o,u,a)=>{const c=a(o),y="v"in c,S=c.v;if(isPromiseLike$2(u))for(const R of c.d.keys())addPendingPromiseToDependency(o,u,a(R));c.v=u,delete c.e,(!y||!Object.is(S,c.v))&&(++c.n,isPromiseLike$2(S)&&abortPromise(S))},getMountedOrPendingDependents=(o,u,a)=>{var c;const y=new Set;for(const S of((c=a.get(o))==null?void 0:c.t)||[])a.has(S)&&y.add(S);for(const S of u.p)y.add(S);return y},createStoreHook=()=>{const o=new Set,u=()=>{o.forEach(a=>a())};return u.add=a=>(o.add(a),()=>{o.delete(a)}),u},createStoreHookForAtoms=()=>{const o={},u=new WeakMap,a=c=>{var y,S;(y=u.get(o))==null||y.forEach(R=>R(c)),(S=u.get(c))==null||S.forEach(R=>R())};return a.add=(c,y)=>{const S=c||o,R=(u.has(S)?u:u.set(S,new Set)).get(S);return R.add(y),()=>{R==null||R.delete(y),R.size||u.delete(S)}},a},initializeStoreHooks=o=>(o.c||(o.c=createStoreHookForAtoms()),o.m||(o.m=createStoreHookForAtoms()),o.u||(o.u=createStoreHookForAtoms()),o.f||(o.f=createStoreHook()),o),BUILDING_BLOCKS=Symbol(),buildStore=(o=new WeakMap,u=new WeakMap,a=new WeakMap,c=new Set,y=new Set,S=new Set,R={},m=(O,...w)=>O.read(...w),_=(O,...w)=>O.write(...w),A=(O,w)=>{var M;return(M=O.unstable_onInit)==null?void 0:M.call(O,w)},g=(O,w)=>{var M;return(M=O.onMount)==null?void 0:M.call(O,w)},...T)=>{const O=T[0]||(E=>{if((__vite_import_meta_env__$3?"production":void 0)!=="production"&&!E)throw new Error("Atom is undefined or null");let x=o.get(E);return x||(x={d:new Map,p:new Set,n:0},o.set(E,x),A==null||A(E,h)),x}),w=T[1]||(()=>{const E=[],x=D=>{try{D()}catch(z){E.push(z)}};do{R.f&&x(R.f);const D=new Set,z=D.add.bind(D);c.forEach(P=>{var G;return(G=u.get(P))==null?void 0:G.l.forEach(z)}),c.clear(),S.forEach(z),S.clear(),y.forEach(z),y.clear(),D.forEach(x),c.size&&M()}while(c.size||S.size||y.size);if(E.length)throw new AggregateError(E)}),M=T[2]||(()=>{const E=[],x=new WeakSet,D=new WeakSet,z=Array.from(c);for(;z.length;){const P=z[z.length-1],G=O(P);if(D.has(P)){z.pop();continue}if(x.has(P)){if(a.get(P)===G.n)E.push([P,G]);else if((__vite_import_meta_env__$3?"production":void 0)!=="production"&&a.has(P))throw new Error("[Bug] invalidated atom exists");D.add(P),z.pop();continue}x.add(P);for(const B of getMountedOrPendingDependents(P,G,u))x.has(B)||z.push(B)}for(let P=E.length-1;P>=0;--P){const[G,B]=E[P];let K=!1;for(const k of B.d.keys())if(k!==G&&c.has(k)){K=!0;break}K&&(f(G),p(G)),a.delete(G)}}),f=T[3]||(E=>{var x;const D=O(E);if(isAtomStateInitialized(D)&&(u.has(E)&&a.get(E)!==D.n||Array.from(D.d).every(([W,F])=>f(W).n===F)))return D;D.d.clear();let z=!0;const P=()=>{u.has(E)&&(p(E),M(),w())},G=W=>{var F;if(isSelfAtom(E,W)){const j=O(W);if(!isAtomStateInitialized(j))if(hasInitialValue(W))setAtomStateValueOrPromise(W,W.init,O);else throw new Error("no atom init");return returnAtomValue(j)}const Y=f(W);try{return returnAtomValue(Y)}finally{D.d.set(W,Y.n),isPendingPromise(D.v)&&addPendingPromiseToDependency(E,D.v,Y),(F=u.get(W))==null||F.t.add(E),z||P()}};let B,K;const k={get signal(){return B||(B=new AbortController),B.signal},get setSelf(){return(__vite_import_meta_env__$3?"production":void 0)!=="production"&&!isActuallyWritableAtom(E)&&console.warn("setSelf function cannot be used with read-only atom"),!K&&isActuallyWritableAtom(E)&&(K=(...W)=>{if((__vite_import_meta_env__$3?"production":void 0)!=="production"&&z&&console.warn("setSelf function cannot be called in sync"),!z)try{return l(E,...W)}finally{M(),w()}}),K}},U=D.n;try{const W=m(E,G,k);return setAtomStateValueOrPromise(E,W,O),isPromiseLike$2(W)&&(registerAbortHandler(W,()=>B==null?void 0:B.abort()),W.then(P,P)),D}catch(W){return delete D.v,D.e=W,++D.n,D}finally{z=!1,U!==D.n&&a.get(E)===U&&(a.set(E,D.n),c.add(E),(x=R.c)==null||x.call(R,E))}}),i=T[4]||(E=>{const x=[E];for(;x.length;){const D=x.pop(),z=O(D);for(const P of getMountedOrPendingDependents(D,z,u)){const G=O(P);a.set(P,G.n),x.push(P)}}}),l=T[5]||((E,...x)=>{let D=!0;const z=G=>returnAtomValue(f(G)),P=(G,...B)=>{var K;const k=O(G);try{if(isSelfAtom(E,G)){if(!hasInitialValue(G))throw new Error("atom not writable");const U=k.n,W=B[0];setAtomStateValueOrPromise(G,W,O),p(G),U!==k.n&&(c.add(G),(K=R.c)==null||K.call(R,G),i(G));return}else return l(G,...B)}finally{D||(M(),w())}};try{return _(E,z,P,...x)}finally{D=!1}}),p=T[6]||(E=>{var x;const D=O(E),z=u.get(E);if(z&&!isPendingPromise(D.v)){for(const[P,G]of D.d)if(!z.d.has(P)){const B=O(P);v(P).t.add(E),z.d.add(P),G!==B.n&&(c.add(P),(x=R.c)==null||x.call(R,P),i(P))}for(const P of z.d||[])if(!D.d.has(P)){z.d.delete(P);const G=b(P);G==null||G.t.delete(E)}}}),v=T[7]||(E=>{var x;const D=O(E);let z=u.get(E);if(!z){f(E);for(const P of D.d.keys())v(P).t.add(E);if(z={l:new Set,d:new Set(D.d.keys()),t:new Set},u.set(E,z),(x=R.m)==null||x.call(R,E),isActuallyWritableAtom(E)){const P=()=>{let G=!0;const B=(...K)=>{try{return l(E,...K)}finally{G||(M(),w())}};try{const K=g(E,B);K&&(z.u=()=>{G=!0;try{K()}finally{G=!1}})}finally{G=!1}};y.add(P)}}return z}),b=T[8]||(E=>{var x;const D=O(E);let z=u.get(E);if(z&&!z.l.size&&!Array.from(z.t).some(P=>{var G;return(G=u.get(P))==null?void 0:G.d.has(E)})){z.u&&S.add(z.u),z=void 0,u.delete(E),(x=R.u)==null||x.call(R,E);for(const P of D.d.keys()){const G=b(P);G==null||G.t.delete(E)}return}return z}),s=[o,u,a,c,y,S,R,m,_,A,g,O,w,M,f,i,l,p,v,b],h={get:E=>returnAtomValue(f(E)),set:(E,...x)=>{try{return l(E,...x)}finally{M(),w()}},sub:(E,x)=>{const z=v(E).l;return z.add(x),w(),()=>{z.delete(x),b(E),w()}}};return Object.defineProperty(h,BUILDING_BLOCKS,{value:s}),h},INTERNAL_buildStoreRev1=buildStore,INTERNAL_initializeStoreHooks=initializeStoreHooks,INTERNAL_registerAbortHandler=registerAbortHandler,__vite_import_meta_env__$2={};let keyCount=0;function atom(o,u){const a=`atom${++keyCount}`,c={toString(){return(__vite_import_meta_env__$2?"production":void 0)!=="production"&&this.debugLabel?a+":"+this.debugLabel:a}};return typeof o=="function"?c.read=o:(c.init=o,c.read=defaultRead,c.write=defaultWrite),u&&(c.write=u),c}function defaultRead(o){return o(this)}function defaultWrite(o,u,a){return u(this,typeof a=="function"?a(o(this)):a)}const createDevStoreRev4=()=>{let o=0;const u=INTERNAL_initializeStoreHooks({}),a=new WeakMap,c=new WeakMap,y=INTERNAL_buildStoreRev1(a,c,void 0,void 0,void 0,void 0,u,void 0,(m,_,A,...g)=>o?A(m,...g):m.write(_,A,...g)),S=new Set;return u.m.add(void 0,m=>{S.add(m);const _=a.get(m);_.m=c.get(m)}),u.u.add(void 0,m=>{S.delete(m);const _=a.get(m);delete _.m}),Object.assign(y,{dev4_get_internal_weak_map:()=>a,dev4_get_mounted_atoms:()=>S,dev4_restore_atoms:m=>{const _={read:()=>null,write:(A,g)=>{++o;try{for(const[T,O]of m)"init"in T&&g(T,O)}finally{--o}}};y.set(_)}})};function createStore(){return(__vite_import_meta_env__$2?"production":void 0)!=="production"?createDevStoreRev4():INTERNAL_buildStoreRev1()}let defaultStore;function getDefaultStore(){return defaultStore||(defaultStore=createStore(),(__vite_import_meta_env__$2?"production":void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=defaultStore),globalThis.__JOTAI_DEFAULT_STORE__!==defaultStore&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),defaultStore}const __vite_import_meta_env__$1={},StoreContext=reactExports.createContext(void 0);function useStore(o){return reactExports.useContext(StoreContext)||getDefaultStore()}const isPromiseLike$1=o=>typeof(o==null?void 0:o.then)=="function",attachPromiseStatus=o=>{o.status||(o.status="pending",o.then(u=>{o.status="fulfilled",o.value=u},u=>{o.status="rejected",o.reason=u}))},use=React.use||(o=>{if(o.status==="pending")throw o;if(o.status==="fulfilled")return o.value;throw o.status==="rejected"?o.reason:(attachPromiseStatus(o),o)}),continuablePromiseMap=new WeakMap,createContinuablePromise=(o,u)=>{let a=continuablePromiseMap.get(o);return a||(a=new Promise((c,y)=>{let S=o;const R=A=>g=>{S===A&&c(g)},m=A=>g=>{S===A&&y(g)},_=()=>{try{const A=u();isPromiseLike$1(A)?(continuablePromiseMap.set(A,a),S=A,A.then(R(A),m(A)),INTERNAL_registerAbortHandler(A,_)):c(A)}catch(A){y(A)}};o.then(R(o),m(o)),INTERNAL_registerAbortHandler(o,_)}),continuablePromiseMap.set(o,a)),a};function useAtomValue(o,u){const{delay:a,unstable_promiseStatus:c=!React.use}={},y=useStore(),[[S,R,m],_]=reactExports.useReducer(g=>{const T=y.get(o);return Object.is(g[0],T)&&g[1]===y&&g[2]===o?g:[T,y,o]},void 0,()=>[y.get(o),y,o]);let A=S;if((R!==y||m!==o)&&(_(),A=y.get(o)),reactExports.useEffect(()=>{const g=y.sub(o,()=>{if(c)try{const T=y.get(o);isPromiseLike$1(T)&&attachPromiseStatus(createContinuablePromise(T,()=>y.get(o)))}catch{}if(typeof a=="number"){setTimeout(_,a);return}_()});return _(),g},[y,o,a,c]),reactExports.useDebugValue(A),isPromiseLike$1(A)){const g=createContinuablePromise(A,()=>y.get(o));return c&&attachPromiseStatus(g),use(g)}return A}function useSetAtom(o,u){const a=useStore();return reactExports.useCallback((...y)=>{if((__vite_import_meta_env__$1?"production":void 0)!=="production"&&!("write"in o))throw new Error("not writable atom");return a.set(o,...y)},[a,o])}function useAtom(o,u){return[useAtomValue(o),useSetAtom(o)]}const __vite_import_meta_env__={},RESET=Symbol((__vite_import_meta_env__?"production":void 0)!=="production"?"RESET":""),isPromiseLike=o=>typeof(o==null?void 0:o.then)=="function";function createJSONStorage(o=()=>{try{return window.localStorage}catch(a){(__vite_import_meta_env__?"production":void 0)!=="production"&&typeof window<"u"&&console.warn(a);return}},u){var a;let c,y;const S={getItem:(_,A)=>{var g,T;const O=M=>{if(M=M||"",c!==M){try{y=JSON.parse(M,u==null?void 0:u.reviver)}catch{return A}c=M}return y},w=(T=(g=o())==null?void 0:g.getItem(_))!=null?T:null;return isPromiseLike(w)?w.then(O):O(w)},setItem:(_,A)=>{var g;return(g=o())==null?void 0:g.setItem(_,JSON.stringify(A,void 0))},removeItem:_=>{var A;return(A=o())==null?void 0:A.removeItem(_)}},R=_=>(A,g,T)=>_(A,O=>{let w;try{w=JSON.parse(O||"")}catch{w=T}g(w)});let m;try{m=(a=o())==null?void 0:a.subscribe}catch{}return!m&&typeof window<"u"&&typeof window.addEventListener=="function"&&window.Storage&&(m=(_,A)=>{if(!(o()instanceof window.Storage))return()=>{};const g=T=>{T.storageArea===o()&&T.key===_&&A(T.newValue)};return window.addEventListener("storage",g),()=>{window.removeEventListener("storage",g)}}),m&&(S.subscribe=R(m)),S}const defaultStorage=createJSONStorage();function atomWithStorage(o,u,a=defaultStorage,c){const y=atom(u);return(__vite_import_meta_env__?"production":void 0)!=="production"&&(y.debugPrivate=!0),y.onMount=R=>{R(a.getItem(o,u));let m;return a.subscribe&&(m=a.subscribe(o,R,u)),m},atom(R=>R(y),(R,m,_)=>{const A=typeof _=="function"?_(R(y)):_;return A===RESET?(m(y,u),a.removeItem(o)):A instanceof Promise?A.then(g=>(m(y,g),a.setItem(o,g))):(m(y,A),a.setItem(o,A))})}const falsyToString=o=>typeof o=="boolean"?`${o}`:o===0?"0":o,cx=clsx,cva=(o,u)=>a=>{var c;if((u==null?void 0:u.variants)==null)return cx(o,a==null?void 0:a.class,a==null?void 0:a.className);const{variants:y,defaultVariants:S}=u,R=Object.keys(y).map(A=>{const g=a==null?void 0:a[A],T=S==null?void 0:S[A];if(g===null)return null;const O=falsyToString(g)||falsyToString(T);return y[A][O]}),m=a&&Object.entries(a).reduce((A,g)=>{let[T,O]=g;return O===void 0||(A[T]=O),A},{}),_=u==null||(c=u.compoundVariants)===null||c===void 0?void 0:c.reduce((A,g)=>{let{class:T,className:O,...w}=g;return Object.entries(w).every(M=>{let[f,i]=M;return Array.isArray(i)?i.includes({...S,...m}[f]):{...S,...m}[f]===i})?[...A,T,O]:A},[]);return cx(o,R,_,a==null?void 0:a.class,a==null?void 0:a.className)},buttonVariants=cva("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function Button({className:o,variant:u,size:a,asChild:c=!1,...y}){const S=c?Slot$1:"button";return jsxRuntimeExports.jsx(S,{"data-slot":"button",className:cn(buttonVariants({variant:u,size:a,className:o})),...y})}/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const toKebabCase=o=>o.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),toCamelCase=o=>o.replace(/^([A-Z])|[\s-_]+(\w)/g,(u,a,c)=>c?c.toUpperCase():a.toLowerCase()),toPascalCase=o=>{const u=toCamelCase(o);return u.charAt(0).toUpperCase()+u.slice(1)},mergeClasses=(...o)=>o.filter((u,a,c)=>!!u&&u.trim()!==""&&c.indexOf(u)===a).join(" ").trim(),hasA11yProp=o=>{for(const u in o)if(u.startsWith("aria-")||u==="role"||u==="title")return!0};/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Icon$1=reactExports.forwardRef(({color:o="currentColor",size:u=24,strokeWidth:a=2,absoluteStrokeWidth:c,className:y="",children:S,iconNode:R,...m},_)=>reactExports.createElement("svg",{ref:_,...defaultAttributes,width:u,height:u,stroke:o,strokeWidth:c?Number(a)*24/Number(u):a,className:mergeClasses("lucide",y),...!S&&!hasA11yProp(m)&&{"aria-hidden":"true"},...m},[...R.map(([A,g])=>reactExports.createElement(A,g)),...Array.isArray(S)?S:[S]]));/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const createLucideIcon=(o,u)=>{const a=reactExports.forwardRef(({className:c,...y},S)=>reactExports.createElement(Icon$1,{ref:S,iconNode:u,className:mergeClasses(`lucide-${toKebabCase(toPascalCase(o))}`,`lucide-${o}`,c),...y}));return a.displayName=toPascalCase(o),a};/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$b=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Check=createLucideIcon("check",__iconNode$b);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$a=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ChevronDown=createLucideIcon("chevron-down",__iconNode$a);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$9=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],ChevronUp=createLucideIcon("chevron-up",__iconNode$9);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Clock=createLucideIcon("clock",__iconNode$8);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$7=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],FileText=createLucideIcon("file-text",__iconNode$7);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$6=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],LoaderCircle=createLucideIcon("loader-circle",__iconNode$6);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$5=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Pencil=createLucideIcon("pencil",__iconNode$5);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$4=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],SquareCheck=createLucideIcon("square-check",__iconNode$4);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$3=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Square=createLucideIcon("square",__iconNode$3);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$2=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Trash2=createLucideIcon("trash-2",__iconNode$2);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode$1=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],Upload=createLucideIcon("upload",__iconNode$1);/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __iconNode=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],X=createLucideIcon("x",__iconNode),urlAlphabet="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let nanoid=(o=21)=>{let u="",a=crypto.getRandomValues(new Uint8Array(o|=0));for(;o--;)u+=urlAlphabet[a[o]&63];return u};const FileUploader=({onFileUpload:o})=>{const[u,a]=reactExports.useState(!1),[c,y]=reactExports.useState(!1),S=reactExports.useRef(null),R=T=>{T.preventDefault(),a(!0)},m=()=>{a(!1)},_=T=>{T.preventDefault(),a(!1),T.dataTransfer.files&&T.dataTransfer.files.length>0&&g(T.dataTransfer.files[0])},A=T=>{T.target.files&&T.target.files.length>0&&g(T.target.files[0])},g=T=>{if(!T.name.toLowerCase().endsWith(".pdb")){alert("Please upload a PDB file (.pdb extension)");return}y(!0);const O=new FileReader;O.onload=w=>{if(w.target&&typeof w.target.result=="string"){const M={id:nanoid(),name:T.name,content:w.target.result,size:T.size,storedAt:new Date().toISOString()};o(M),y(!1)}},O.onerror=()=>{alert("Error reading file"),y(!1)},O.readAsText(T)};return jsxRuntimeExports.jsx("div",{className:`border-2 border-dashed rounded-lg p-10 text-center transition-colors ${u?"border-primary bg-primary/5":"border-gray-300"}`,onDragOver:R,onDragLeave:m,onDrop:_,children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center space-y-4",children:[jsxRuntimeExports.jsx("div",{className:"rounded-full bg-primary/10 p-4",children:jsxRuntimeExports.jsx(FileText,{className:"h-10 w-10 text-primary"})}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold",children:"Upload PDB File"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground",children:"Drag and drop your PDB file here, or click to browse"})]}),jsxRuntimeExports.jsx("input",{ref:S,type:"file",accept:".pdb",className:"hidden",onChange:A}),jsxRuntimeExports.jsxs(Button,{onClick:()=>{var T;return(T=S.current)==null?void 0:T.click()},disabled:c,className:"flex items-center gap-2",children:[c?jsxRuntimeExports.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}):jsxRuntimeExports.jsx(Upload,{className:"h-4 w-4"}),"Browse Files"]})]})})};function Card({className:o,...u}){return jsxRuntimeExports.jsx("div",{"data-slot":"card",className:cn("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",o),...u})}function CardContent({className:o,...u}){return jsxRuntimeExports.jsx("div",{"data-slot":"card-content",className:cn("px-6",o),...u})}const UploadPage=({})=>{const o=useSetAtom(tabIdAtom),u=useSetAtom(activeFileIdAtom),a=useSetAtom(filesDataAtom),c=async y=>{a(S=>[...S,y]),u(y.id),o(TabId.viewer)};return jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsx(FileUploader,{onFileUpload:c})})})};function clamp$1(o,[u,a]){return Math.min(a,Math.max(u,o))}function useEscapeKeydown(o,u=globalThis==null?void 0:globalThis.document){const a=useCallbackRef$1(o);reactExports.useEffect(()=>{const c=y=>{y.key==="Escape"&&a(y)};return u.addEventListener("keydown",c,{capture:!0}),()=>u.removeEventListener("keydown",c,{capture:!0})},[a,u])}var DISMISSABLE_LAYER_NAME="DismissableLayer",CONTEXT_UPDATE="dismissableLayer.update",POINTER_DOWN_OUTSIDE="dismissableLayer.pointerDownOutside",FOCUS_OUTSIDE="dismissableLayer.focusOutside",originalBodyPointerEvents,DismissableLayerContext=reactExports.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),DismissableLayer=reactExports.forwardRef((o,u)=>{const{disableOutsidePointerEvents:a=!1,onEscapeKeyDown:c,onPointerDownOutside:y,onFocusOutside:S,onInteractOutside:R,onDismiss:m,..._}=o,A=reactExports.useContext(DismissableLayerContext),[g,T]=reactExports.useState(null),O=(g==null?void 0:g.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,w]=reactExports.useState({}),M=useComposedRefs(u,E=>T(E)),f=Array.from(A.layers),[i]=[...A.layersWithOutsidePointerEventsDisabled].slice(-1),l=f.indexOf(i),p=g?f.indexOf(g):-1,v=A.layersWithOutsidePointerEventsDisabled.size>0,b=p>=l,s=usePointerDownOutside(E=>{const x=E.target,D=[...A.branches].some(z=>z.contains(x));!b||D||(y==null||y(E),R==null||R(E),E.defaultPrevented||m==null||m())},O),h=useFocusOutside(E=>{const x=E.target;[...A.branches].some(z=>z.contains(x))||(S==null||S(E),R==null||R(E),E.defaultPrevented||m==null||m())},O);return useEscapeKeydown(E=>{p===A.layers.size-1&&(c==null||c(E),!E.defaultPrevented&&m&&(E.preventDefault(),m()))},O),reactExports.useEffect(()=>{if(g)return a&&(A.layersWithOutsidePointerEventsDisabled.size===0&&(originalBodyPointerEvents=O.body.style.pointerEvents,O.body.style.pointerEvents="none"),A.layersWithOutsidePointerEventsDisabled.add(g)),A.layers.add(g),dispatchUpdate(),()=>{a&&A.layersWithOutsidePointerEventsDisabled.size===1&&(O.body.style.pointerEvents=originalBodyPointerEvents)}},[g,O,a,A]),reactExports.useEffect(()=>()=>{g&&(A.layers.delete(g),A.layersWithOutsidePointerEventsDisabled.delete(g),dispatchUpdate())},[g,A]),reactExports.useEffect(()=>{const E=()=>w({});return document.addEventListener(CONTEXT_UPDATE,E),()=>document.removeEventListener(CONTEXT_UPDATE,E)},[]),jsxRuntimeExports.jsx(Primitive.div,{..._,ref:M,style:{pointerEvents:v?b?"auto":"none":void 0,...o.style},onFocusCapture:composeEventHandlers(o.onFocusCapture,h.onFocusCapture),onBlurCapture:composeEventHandlers(o.onBlurCapture,h.onBlurCapture),onPointerDownCapture:composeEventHandlers(o.onPointerDownCapture,s.onPointerDownCapture)})});DismissableLayer.displayName=DISMISSABLE_LAYER_NAME;var BRANCH_NAME="DismissableLayerBranch",DismissableLayerBranch=reactExports.forwardRef((o,u)=>{const a=reactExports.useContext(DismissableLayerContext),c=reactExports.useRef(null),y=useComposedRefs(u,c);return reactExports.useEffect(()=>{const S=c.current;if(S)return a.branches.add(S),()=>{a.branches.delete(S)}},[a.branches]),jsxRuntimeExports.jsx(Primitive.div,{...o,ref:y})});DismissableLayerBranch.displayName=BRANCH_NAME;function usePointerDownOutside(o,u=globalThis==null?void 0:globalThis.document){const a=useCallbackRef$1(o),c=reactExports.useRef(!1),y=reactExports.useRef(()=>{});return reactExports.useEffect(()=>{const S=m=>{if(m.target&&!c.current){let _=function(){handleAndDispatchCustomEvent(POINTER_DOWN_OUTSIDE,a,A,{discrete:!0})};const A={originalEvent:m};m.pointerType==="touch"?(u.removeEventListener("click",y.current),y.current=_,u.addEventListener("click",y.current,{once:!0})):_()}else u.removeEventListener("click",y.current);c.current=!1},R=window.setTimeout(()=>{u.addEventListener("pointerdown",S)},0);return()=>{window.clearTimeout(R),u.removeEventListener("pointerdown",S),u.removeEventListener("click",y.current)}},[u,a]),{onPointerDownCapture:()=>c.current=!0}}function useFocusOutside(o,u=globalThis==null?void 0:globalThis.document){const a=useCallbackRef$1(o),c=reactExports.useRef(!1);return reactExports.useEffect(()=>{const y=S=>{S.target&&!c.current&&handleAndDispatchCustomEvent(FOCUS_OUTSIDE,a,{originalEvent:S},{discrete:!1})};return u.addEventListener("focusin",y),()=>u.removeEventListener("focusin",y)},[u,a]),{onFocusCapture:()=>c.current=!0,onBlurCapture:()=>c.current=!1}}function dispatchUpdate(){const o=new CustomEvent(CONTEXT_UPDATE);document.dispatchEvent(o)}function handleAndDispatchCustomEvent(o,u,a,{discrete:c}){const y=a.originalEvent.target,S=new CustomEvent(o,{bubbles:!1,cancelable:!0,detail:a});u&&y.addEventListener(o,u,{once:!0}),c?dispatchDiscreteCustomEvent(y,S):y.dispatchEvent(S)}var count=0;function useFocusGuards(){reactExports.useEffect(()=>{const o=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",o[0]??createFocusGuard()),document.body.insertAdjacentElement("beforeend",o[1]??createFocusGuard()),count++,()=>{count===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(u=>u.remove()),count--}},[])}function createFocusGuard(){const o=document.createElement("span");return o.setAttribute("data-radix-focus-guard",""),o.tabIndex=0,o.style.outline="none",o.style.opacity="0",o.style.position="fixed",o.style.pointerEvents="none",o}var AUTOFOCUS_ON_MOUNT="focusScope.autoFocusOnMount",AUTOFOCUS_ON_UNMOUNT="focusScope.autoFocusOnUnmount",EVENT_OPTIONS={bubbles:!1,cancelable:!0},FOCUS_SCOPE_NAME="FocusScope",FocusScope=reactExports.forwardRef((o,u)=>{const{loop:a=!1,trapped:c=!1,onMountAutoFocus:y,onUnmountAutoFocus:S,...R}=o,[m,_]=reactExports.useState(null),A=useCallbackRef$1(y),g=useCallbackRef$1(S),T=reactExports.useRef(null),O=useComposedRefs(u,f=>_(f)),w=reactExports.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;reactExports.useEffect(()=>{if(c){let f=function(v){if(w.paused||!m)return;const b=v.target;m.contains(b)?T.current=b:focus(T.current,{select:!0})},i=function(v){if(w.paused||!m)return;const b=v.relatedTarget;b!==null&&(m.contains(b)||focus(T.current,{select:!0}))},l=function(v){if(document.activeElement===document.body)for(const s of v)s.removedNodes.length>0&&focus(m)};document.addEventListener("focusin",f),document.addEventListener("focusout",i);const p=new MutationObserver(l);return m&&p.observe(m,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",f),document.removeEventListener("focusout",i),p.disconnect()}}},[c,m,w.paused]),reactExports.useEffect(()=>{if(m){focusScopesStack.add(w);const f=document.activeElement;if(!m.contains(f)){const l=new CustomEvent(AUTOFOCUS_ON_MOUNT,EVENT_OPTIONS);m.addEventListener(AUTOFOCUS_ON_MOUNT,A),m.dispatchEvent(l),l.defaultPrevented||(focusFirst(removeLinks(getTabbableCandidates(m)),{select:!0}),document.activeElement===f&&focus(m))}return()=>{m.removeEventListener(AUTOFOCUS_ON_MOUNT,A),setTimeout(()=>{const l=new CustomEvent(AUTOFOCUS_ON_UNMOUNT,EVENT_OPTIONS);m.addEventListener(AUTOFOCUS_ON_UNMOUNT,g),m.dispatchEvent(l),l.defaultPrevented||focus(f??document.body,{select:!0}),m.removeEventListener(AUTOFOCUS_ON_UNMOUNT,g),focusScopesStack.remove(w)},0)}}},[m,A,g,w]);const M=reactExports.useCallback(f=>{if(!a&&!c||w.paused)return;const i=f.key==="Tab"&&!f.altKey&&!f.ctrlKey&&!f.metaKey,l=document.activeElement;if(i&&l){const p=f.currentTarget,[v,b]=getTabbableEdges(p);v&&b?!f.shiftKey&&l===b?(f.preventDefault(),a&&focus(v,{select:!0})):f.shiftKey&&l===v&&(f.preventDefault(),a&&focus(b,{select:!0})):l===p&&f.preventDefault()}},[a,c,w.paused]);return jsxRuntimeExports.jsx(Primitive.div,{tabIndex:-1,...R,ref:O,onKeyDown:M})});FocusScope.displayName=FOCUS_SCOPE_NAME;function focusFirst(o,{select:u=!1}={}){const a=document.activeElement;for(const c of o)if(focus(c,{select:u}),document.activeElement!==a)return}function getTabbableEdges(o){const u=getTabbableCandidates(o),a=findVisible(u,o),c=findVisible(u.reverse(),o);return[a,c]}function getTabbableCandidates(o){const u=[],a=document.createTreeWalker(o,NodeFilter.SHOW_ELEMENT,{acceptNode:c=>{const y=c.tagName==="INPUT"&&c.type==="hidden";return c.disabled||c.hidden||y?NodeFilter.FILTER_SKIP:c.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;a.nextNode();)u.push(a.currentNode);return u}function findVisible(o,u){for(const a of o)if(!isHidden(a,{upTo:u}))return a}function isHidden(o,{upTo:u}){if(getComputedStyle(o).visibility==="hidden")return!0;for(;o;){if(u!==void 0&&o===u)return!1;if(getComputedStyle(o).display==="none")return!0;o=o.parentElement}return!1}function isSelectableInput(o){return o instanceof HTMLInputElement&&"select"in o}function focus(o,{select:u=!1}={}){if(o&&o.focus){const a=document.activeElement;o.focus({preventScroll:!0}),o!==a&&isSelectableInput(o)&&u&&o.select()}}var focusScopesStack=createFocusScopesStack();function createFocusScopesStack(){let o=[];return{add(u){const a=o[0];u!==a&&(a==null||a.pause()),o=arrayRemove(o,u),o.unshift(u)},remove(u){var a;o=arrayRemove(o,u),(a=o[0])==null||a.resume()}}}function arrayRemove(o,u){const a=[...o],c=a.indexOf(u);return c!==-1&&a.splice(c,1),a}function removeLinks(o){return o.filter(u=>u.tagName!=="A")}const sides=["top","right","bottom","left"],min=Math.min,max=Math.max,round=Math.round,floor=Math.floor,createCoords=o=>({x:o,y:o}),oppositeSideMap={left:"right",right:"left",bottom:"top",top:"bottom"},oppositeAlignmentMap={start:"end",end:"start"};function clamp(o,u,a){return max(o,min(u,a))}function evaluate(o,u){return typeof o=="function"?o(u):o}function getSide(o){return o.split("-")[0]}function getAlignment(o){return o.split("-")[1]}function getOppositeAxis(o){return o==="x"?"y":"x"}function getAxisLength(o){return o==="y"?"height":"width"}function getSideAxis(o){return["top","bottom"].includes(getSide(o))?"y":"x"}function getAlignmentAxis(o){return getOppositeAxis(getSideAxis(o))}function getAlignmentSides(o,u,a){a===void 0&&(a=!1);const c=getAlignment(o),y=getAlignmentAxis(o),S=getAxisLength(y);let R=y==="x"?c===(a?"end":"start")?"right":"left":c==="start"?"bottom":"top";return u.reference[S]>u.floating[S]&&(R=getOppositePlacement(R)),[R,getOppositePlacement(R)]}function getExpandedPlacements(o){const u=getOppositePlacement(o);return[getOppositeAlignmentPlacement(o),u,getOppositeAlignmentPlacement(u)]}function getOppositeAlignmentPlacement(o){return o.replace(/start|end/g,u=>oppositeAlignmentMap[u])}function getSideList(o,u,a){const c=["left","right"],y=["right","left"],S=["top","bottom"],R=["bottom","top"];switch(o){case"top":case"bottom":return a?u?y:c:u?c:y;case"left":case"right":return u?S:R;default:return[]}}function getOppositeAxisPlacements(o,u,a,c){const y=getAlignment(o);let S=getSideList(getSide(o),a==="start",c);return y&&(S=S.map(R=>R+"-"+y),u&&(S=S.concat(S.map(getOppositeAlignmentPlacement)))),S}function getOppositePlacement(o){return o.replace(/left|right|bottom|top/g,u=>oppositeSideMap[u])}function expandPaddingObject(o){return{top:0,right:0,bottom:0,left:0,...o}}function getPaddingObject(o){return typeof o!="number"?expandPaddingObject(o):{top:o,right:o,bottom:o,left:o}}function rectToClientRect(o){const{x:u,y:a,width:c,height:y}=o;return{width:c,height:y,top:a,left:u,right:u+c,bottom:a+y,x:u,y:a}}function computeCoordsFromPlacement(o,u,a){let{reference:c,floating:y}=o;const S=getSideAxis(u),R=getAlignmentAxis(u),m=getAxisLength(R),_=getSide(u),A=S==="y",g=c.x+c.width/2-y.width/2,T=c.y+c.height/2-y.height/2,O=c[m]/2-y[m]/2;let w;switch(_){case"top":w={x:g,y:c.y-y.height};break;case"bottom":w={x:g,y:c.y+c.height};break;case"right":w={x:c.x+c.width,y:T};break;case"left":w={x:c.x-y.width,y:T};break;default:w={x:c.x,y:c.y}}switch(getAlignment(u)){case"start":w[R]-=O*(a&&A?-1:1);break;case"end":w[R]+=O*(a&&A?-1:1);break}return w}const computePosition$1=async(o,u,a)=>{const{placement:c="bottom",strategy:y="absolute",middleware:S=[],platform:R}=a,m=S.filter(Boolean),_=await(R.isRTL==null?void 0:R.isRTL(u));let A=await R.getElementRects({reference:o,floating:u,strategy:y}),{x:g,y:T}=computeCoordsFromPlacement(A,c,_),O=c,w={},M=0;for(let f=0;f<m.length;f++){const{name:i,fn:l}=m[f],{x:p,y:v,data:b,reset:s}=await l({x:g,y:T,initialPlacement:c,placement:O,strategy:y,middlewareData:w,rects:A,platform:R,elements:{reference:o,floating:u}});g=p??g,T=v??T,w={...w,[i]:{...w[i],...b}},s&&M<=50&&(M++,typeof s=="object"&&(s.placement&&(O=s.placement),s.rects&&(A=s.rects===!0?await R.getElementRects({reference:o,floating:u,strategy:y}):s.rects),{x:g,y:T}=computeCoordsFromPlacement(A,O,_)),f=-1)}return{x:g,y:T,placement:O,strategy:y,middlewareData:w}};async function detectOverflow(o,u){var a;u===void 0&&(u={});const{x:c,y,platform:S,rects:R,elements:m,strategy:_}=o,{boundary:A="clippingAncestors",rootBoundary:g="viewport",elementContext:T="floating",altBoundary:O=!1,padding:w=0}=evaluate(u,o),M=getPaddingObject(w),i=m[O?T==="floating"?"reference":"floating":T],l=rectToClientRect(await S.getClippingRect({element:(a=await(S.isElement==null?void 0:S.isElement(i)))==null||a?i:i.contextElement||await(S.getDocumentElement==null?void 0:S.getDocumentElement(m.floating)),boundary:A,rootBoundary:g,strategy:_})),p=T==="floating"?{x:c,y,width:R.floating.width,height:R.floating.height}:R.reference,v=await(S.getOffsetParent==null?void 0:S.getOffsetParent(m.floating)),b=await(S.isElement==null?void 0:S.isElement(v))?await(S.getScale==null?void 0:S.getScale(v))||{x:1,y:1}:{x:1,y:1},s=rectToClientRect(S.convertOffsetParentRelativeRectToViewportRelativeRect?await S.convertOffsetParentRelativeRectToViewportRelativeRect({elements:m,rect:p,offsetParent:v,strategy:_}):p);return{top:(l.top-s.top+M.top)/b.y,bottom:(s.bottom-l.bottom+M.bottom)/b.y,left:(l.left-s.left+M.left)/b.x,right:(s.right-l.right+M.right)/b.x}}const arrow$3=o=>({name:"arrow",options:o,async fn(u){const{x:a,y:c,placement:y,rects:S,platform:R,elements:m,middlewareData:_}=u,{element:A,padding:g=0}=evaluate(o,u)||{};if(A==null)return{};const T=getPaddingObject(g),O={x:a,y:c},w=getAlignmentAxis(y),M=getAxisLength(w),f=await R.getDimensions(A),i=w==="y",l=i?"top":"left",p=i?"bottom":"right",v=i?"clientHeight":"clientWidth",b=S.reference[M]+S.reference[w]-O[w]-S.floating[M],s=O[w]-S.reference[w],h=await(R.getOffsetParent==null?void 0:R.getOffsetParent(A));let E=h?h[v]:0;(!E||!await(R.isElement==null?void 0:R.isElement(h)))&&(E=m.floating[v]||S.floating[M]);const x=b/2-s/2,D=E/2-f[M]/2-1,z=min(T[l],D),P=min(T[p],D),G=z,B=E-f[M]-P,K=E/2-f[M]/2+x,k=clamp(G,K,B),U=!_.arrow&&getAlignment(y)!=null&&K!==k&&S.reference[M]/2-(K<G?z:P)-f[M]/2<0,W=U?K<G?K-G:K-B:0;return{[w]:O[w]+W,data:{[w]:k,centerOffset:K-k-W,...U&&{alignmentOffset:W}},reset:U}}}),flip$2=function(o){return o===void 0&&(o={}),{name:"flip",options:o,async fn(u){var a,c;const{placement:y,middlewareData:S,rects:R,initialPlacement:m,platform:_,elements:A}=u,{mainAxis:g=!0,crossAxis:T=!0,fallbackPlacements:O,fallbackStrategy:w="bestFit",fallbackAxisSideDirection:M="none",flipAlignment:f=!0,...i}=evaluate(o,u);if((a=S.arrow)!=null&&a.alignmentOffset)return{};const l=getSide(y),p=getSideAxis(m),v=getSide(m)===m,b=await(_.isRTL==null?void 0:_.isRTL(A.floating)),s=O||(v||!f?[getOppositePlacement(m)]:getExpandedPlacements(m)),h=M!=="none";!O&&h&&s.push(...getOppositeAxisPlacements(m,f,M,b));const E=[m,...s],x=await detectOverflow(u,i),D=[];let z=((c=S.flip)==null?void 0:c.overflows)||[];if(g&&D.push(x[l]),T){const k=getAlignmentSides(y,R,b);D.push(x[k[0]],x[k[1]])}if(z=[...z,{placement:y,overflows:D}],!D.every(k=>k<=0)){var P,G;const k=(((P=S.flip)==null?void 0:P.index)||0)+1,U=E[k];if(U){var B;const F=T==="alignment"?p!==getSideAxis(U):!1,Y=((B=z[0])==null?void 0:B.overflows[0])>0;if(!F||Y)return{data:{index:k,overflows:z},reset:{placement:U}}}let W=(G=z.filter(F=>F.overflows[0]<=0).sort((F,Y)=>F.overflows[1]-Y.overflows[1])[0])==null?void 0:G.placement;if(!W)switch(w){case"bestFit":{var K;const F=(K=z.filter(Y=>{if(h){const j=getSideAxis(Y.placement);return j===p||j==="y"}return!0}).map(Y=>[Y.placement,Y.overflows.filter(j=>j>0).reduce((j,H)=>j+H,0)]).sort((Y,j)=>Y[1]-j[1])[0])==null?void 0:K[0];F&&(W=F);break}case"initialPlacement":W=m;break}if(y!==W)return{reset:{placement:W}}}return{}}}};function getSideOffsets(o,u){return{top:o.top-u.height,right:o.right-u.width,bottom:o.bottom-u.height,left:o.left-u.width}}function isAnySideFullyClipped(o){return sides.some(u=>o[u]>=0)}const hide$2=function(o){return o===void 0&&(o={}),{name:"hide",options:o,async fn(u){const{rects:a}=u,{strategy:c="referenceHidden",...y}=evaluate(o,u);switch(c){case"referenceHidden":{const S=await detectOverflow(u,{...y,elementContext:"reference"}),R=getSideOffsets(S,a.reference);return{data:{referenceHiddenOffsets:R,referenceHidden:isAnySideFullyClipped(R)}}}case"escaped":{const S=await detectOverflow(u,{...y,altBoundary:!0}),R=getSideOffsets(S,a.floating);return{data:{escapedOffsets:R,escaped:isAnySideFullyClipped(R)}}}default:return{}}}}};async function convertValueToCoords(o,u){const{placement:a,platform:c,elements:y}=o,S=await(c.isRTL==null?void 0:c.isRTL(y.floating)),R=getSide(a),m=getAlignment(a),_=getSideAxis(a)==="y",A=["left","top"].includes(R)?-1:1,g=S&&_?-1:1,T=evaluate(u,o);let{mainAxis:O,crossAxis:w,alignmentAxis:M}=typeof T=="number"?{mainAxis:T,crossAxis:0,alignmentAxis:null}:{mainAxis:T.mainAxis||0,crossAxis:T.crossAxis||0,alignmentAxis:T.alignmentAxis};return m&&typeof M=="number"&&(w=m==="end"?M*-1:M),_?{x:w*g,y:O*A}:{x:O*A,y:w*g}}const offset$2=function(o){return o===void 0&&(o=0),{name:"offset",options:o,async fn(u){var a,c;const{x:y,y:S,placement:R,middlewareData:m}=u,_=await convertValueToCoords(u,o);return R===((a=m.offset)==null?void 0:a.placement)&&(c=m.arrow)!=null&&c.alignmentOffset?{}:{x:y+_.x,y:S+_.y,data:{..._,placement:R}}}}},shift$2=function(o){return o===void 0&&(o={}),{name:"shift",options:o,async fn(u){const{x:a,y:c,placement:y}=u,{mainAxis:S=!0,crossAxis:R=!1,limiter:m={fn:i=>{let{x:l,y:p}=i;return{x:l,y:p}}},..._}=evaluate(o,u),A={x:a,y:c},g=await detectOverflow(u,_),T=getSideAxis(getSide(y)),O=getOppositeAxis(T);let w=A[O],M=A[T];if(S){const i=O==="y"?"top":"left",l=O==="y"?"bottom":"right",p=w+g[i],v=w-g[l];w=clamp(p,w,v)}if(R){const i=T==="y"?"top":"left",l=T==="y"?"bottom":"right",p=M+g[i],v=M-g[l];M=clamp(p,M,v)}const f=m.fn({...u,[O]:w,[T]:M});return{...f,data:{x:f.x-a,y:f.y-c,enabled:{[O]:S,[T]:R}}}}}},limitShift$2=function(o){return o===void 0&&(o={}),{options:o,fn(u){const{x:a,y:c,placement:y,rects:S,middlewareData:R}=u,{offset:m=0,mainAxis:_=!0,crossAxis:A=!0}=evaluate(o,u),g={x:a,y:c},T=getSideAxis(y),O=getOppositeAxis(T);let w=g[O],M=g[T];const f=evaluate(m,u),i=typeof f=="number"?{mainAxis:f,crossAxis:0}:{mainAxis:0,crossAxis:0,...f};if(_){const v=O==="y"?"height":"width",b=S.reference[O]-S.floating[v]+i.mainAxis,s=S.reference[O]+S.reference[v]-i.mainAxis;w<b?w=b:w>s&&(w=s)}if(A){var l,p;const v=O==="y"?"width":"height",b=["top","left"].includes(getSide(y)),s=S.reference[T]-S.floating[v]+(b&&((l=R.offset)==null?void 0:l[T])||0)+(b?0:i.crossAxis),h=S.reference[T]+S.reference[v]+(b?0:((p=R.offset)==null?void 0:p[T])||0)-(b?i.crossAxis:0);M<s?M=s:M>h&&(M=h)}return{[O]:w,[T]:M}}}},size$2=function(o){return o===void 0&&(o={}),{name:"size",options:o,async fn(u){var a,c;const{placement:y,rects:S,platform:R,elements:m}=u,{apply:_=()=>{},...A}=evaluate(o,u),g=await detectOverflow(u,A),T=getSide(y),O=getAlignment(y),w=getSideAxis(y)==="y",{width:M,height:f}=S.floating;let i,l;T==="top"||T==="bottom"?(i=T,l=O===(await(R.isRTL==null?void 0:R.isRTL(m.floating))?"start":"end")?"left":"right"):(l=T,i=O==="end"?"top":"bottom");const p=f-g.top-g.bottom,v=M-g.left-g.right,b=min(f-g[i],p),s=min(M-g[l],v),h=!u.middlewareData.shift;let E=b,x=s;if((a=u.middlewareData.shift)!=null&&a.enabled.x&&(x=v),(c=u.middlewareData.shift)!=null&&c.enabled.y&&(E=p),h&&!O){const z=max(g.left,0),P=max(g.right,0),G=max(g.top,0),B=max(g.bottom,0);w?x=M-2*(z!==0||P!==0?z+P:max(g.left,g.right)):E=f-2*(G!==0||B!==0?G+B:max(g.top,g.bottom))}await _({...u,availableWidth:x,availableHeight:E});const D=await R.getDimensions(m.floating);return M!==D.width||f!==D.height?{reset:{rects:!0}}:{}}}};function hasWindow(){return typeof window<"u"}function getNodeName(o){return isNode(o)?(o.nodeName||"").toLowerCase():"#document"}function getWindow(o){var u;return(o==null||(u=o.ownerDocument)==null?void 0:u.defaultView)||window}function getDocumentElement(o){var u;return(u=(isNode(o)?o.ownerDocument:o.document)||window.document)==null?void 0:u.documentElement}function isNode(o){return hasWindow()?o instanceof Node||o instanceof getWindow(o).Node:!1}function isElement(o){return hasWindow()?o instanceof Element||o instanceof getWindow(o).Element:!1}function isHTMLElement(o){return hasWindow()?o instanceof HTMLElement||o instanceof getWindow(o).HTMLElement:!1}function isShadowRoot(o){return!hasWindow()||typeof ShadowRoot>"u"?!1:o instanceof ShadowRoot||o instanceof getWindow(o).ShadowRoot}function isOverflowElement(o){const{overflow:u,overflowX:a,overflowY:c,display:y}=getComputedStyle$1(o);return/auto|scroll|overlay|hidden|clip/.test(u+c+a)&&!["inline","contents"].includes(y)}function isTableElement(o){return["table","td","th"].includes(getNodeName(o))}function isTopLayer(o){return[":popover-open",":modal"].some(u=>{try{return o.matches(u)}catch{return!1}})}function isContainingBlock(o){const u=isWebKit(),a=isElement(o)?getComputedStyle$1(o):o;return["transform","translate","scale","rotate","perspective"].some(c=>a[c]?a[c]!=="none":!1)||(a.containerType?a.containerType!=="normal":!1)||!u&&(a.backdropFilter?a.backdropFilter!=="none":!1)||!u&&(a.filter?a.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(c=>(a.willChange||"").includes(c))||["paint","layout","strict","content"].some(c=>(a.contain||"").includes(c))}function getContainingBlock(o){let u=getParentNode(o);for(;isHTMLElement(u)&&!isLastTraversableNode(u);){if(isContainingBlock(u))return u;if(isTopLayer(u))return null;u=getParentNode(u)}return null}function isWebKit(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function isLastTraversableNode(o){return["html","body","#document"].includes(getNodeName(o))}function getComputedStyle$1(o){return getWindow(o).getComputedStyle(o)}function getNodeScroll(o){return isElement(o)?{scrollLeft:o.scrollLeft,scrollTop:o.scrollTop}:{scrollLeft:o.scrollX,scrollTop:o.scrollY}}function getParentNode(o){if(getNodeName(o)==="html")return o;const u=o.assignedSlot||o.parentNode||isShadowRoot(o)&&o.host||getDocumentElement(o);return isShadowRoot(u)?u.host:u}function getNearestOverflowAncestor(o){const u=getParentNode(o);return isLastTraversableNode(u)?o.ownerDocument?o.ownerDocument.body:o.body:isHTMLElement(u)&&isOverflowElement(u)?u:getNearestOverflowAncestor(u)}function getOverflowAncestors(o,u,a){var c;u===void 0&&(u=[]),a===void 0&&(a=!0);const y=getNearestOverflowAncestor(o),S=y===((c=o.ownerDocument)==null?void 0:c.body),R=getWindow(y);if(S){const m=getFrameElement(R);return u.concat(R,R.visualViewport||[],isOverflowElement(y)?y:[],m&&a?getOverflowAncestors(m):[])}return u.concat(y,getOverflowAncestors(y,[],a))}function getFrameElement(o){return o.parent&&Object.getPrototypeOf(o.parent)?o.frameElement:null}function getCssDimensions(o){const u=getComputedStyle$1(o);let a=parseFloat(u.width)||0,c=parseFloat(u.height)||0;const y=isHTMLElement(o),S=y?o.offsetWidth:a,R=y?o.offsetHeight:c,m=round(a)!==S||round(c)!==R;return m&&(a=S,c=R),{width:a,height:c,$:m}}function unwrapElement(o){return isElement(o)?o:o.contextElement}function getScale(o){const u=unwrapElement(o);if(!isHTMLElement(u))return createCoords(1);const a=u.getBoundingClientRect(),{width:c,height:y,$:S}=getCssDimensions(u);let R=(S?round(a.width):a.width)/c,m=(S?round(a.height):a.height)/y;return(!R||!Number.isFinite(R))&&(R=1),(!m||!Number.isFinite(m))&&(m=1),{x:R,y:m}}const noOffsets=createCoords(0);function getVisualOffsets(o){const u=getWindow(o);return!isWebKit()||!u.visualViewport?noOffsets:{x:u.visualViewport.offsetLeft,y:u.visualViewport.offsetTop}}function shouldAddVisualOffsets(o,u,a){return u===void 0&&(u=!1),!a||u&&a!==getWindow(o)?!1:u}function getBoundingClientRect(o,u,a,c){u===void 0&&(u=!1),a===void 0&&(a=!1);const y=o.getBoundingClientRect(),S=unwrapElement(o);let R=createCoords(1);u&&(c?isElement(c)&&(R=getScale(c)):R=getScale(o));const m=shouldAddVisualOffsets(S,a,c)?getVisualOffsets(S):createCoords(0);let _=(y.left+m.x)/R.x,A=(y.top+m.y)/R.y,g=y.width/R.x,T=y.height/R.y;if(S){const O=getWindow(S),w=c&&isElement(c)?getWindow(c):c;let M=O,f=getFrameElement(M);for(;f&&c&&w!==M;){const i=getScale(f),l=f.getBoundingClientRect(),p=getComputedStyle$1(f),v=l.left+(f.clientLeft+parseFloat(p.paddingLeft))*i.x,b=l.top+(f.clientTop+parseFloat(p.paddingTop))*i.y;_*=i.x,A*=i.y,g*=i.x,T*=i.y,_+=v,A+=b,M=getWindow(f),f=getFrameElement(M)}}return rectToClientRect({width:g,height:T,x:_,y:A})}function getWindowScrollBarX(o,u){const a=getNodeScroll(o).scrollLeft;return u?u.left+a:getBoundingClientRect(getDocumentElement(o)).left+a}function getHTMLOffset(o,u,a){a===void 0&&(a=!1);const c=o.getBoundingClientRect(),y=c.left+u.scrollLeft-(a?0:getWindowScrollBarX(o,c)),S=c.top+u.scrollTop;return{x:y,y:S}}function convertOffsetParentRelativeRectToViewportRelativeRect(o){let{elements:u,rect:a,offsetParent:c,strategy:y}=o;const S=y==="fixed",R=getDocumentElement(c),m=u?isTopLayer(u.floating):!1;if(c===R||m&&S)return a;let _={scrollLeft:0,scrollTop:0},A=createCoords(1);const g=createCoords(0),T=isHTMLElement(c);if((T||!T&&!S)&&((getNodeName(c)!=="body"||isOverflowElement(R))&&(_=getNodeScroll(c)),isHTMLElement(c))){const w=getBoundingClientRect(c);A=getScale(c),g.x=w.x+c.clientLeft,g.y=w.y+c.clientTop}const O=R&&!T&&!S?getHTMLOffset(R,_,!0):createCoords(0);return{width:a.width*A.x,height:a.height*A.y,x:a.x*A.x-_.scrollLeft*A.x+g.x+O.x,y:a.y*A.y-_.scrollTop*A.y+g.y+O.y}}function getClientRects(o){return Array.from(o.getClientRects())}function getDocumentRect(o){const u=getDocumentElement(o),a=getNodeScroll(o),c=o.ownerDocument.body,y=max(u.scrollWidth,u.clientWidth,c.scrollWidth,c.clientWidth),S=max(u.scrollHeight,u.clientHeight,c.scrollHeight,c.clientHeight);let R=-a.scrollLeft+getWindowScrollBarX(o);const m=-a.scrollTop;return getComputedStyle$1(c).direction==="rtl"&&(R+=max(u.clientWidth,c.clientWidth)-y),{width:y,height:S,x:R,y:m}}function getViewportRect(o,u){const a=getWindow(o),c=getDocumentElement(o),y=a.visualViewport;let S=c.clientWidth,R=c.clientHeight,m=0,_=0;if(y){S=y.width,R=y.height;const A=isWebKit();(!A||A&&u==="fixed")&&(m=y.offsetLeft,_=y.offsetTop)}return{width:S,height:R,x:m,y:_}}function getInnerBoundingClientRect(o,u){const a=getBoundingClientRect(o,!0,u==="fixed"),c=a.top+o.clientTop,y=a.left+o.clientLeft,S=isHTMLElement(o)?getScale(o):createCoords(1),R=o.clientWidth*S.x,m=o.clientHeight*S.y,_=y*S.x,A=c*S.y;return{width:R,height:m,x:_,y:A}}function getClientRectFromClippingAncestor(o,u,a){let c;if(u==="viewport")c=getViewportRect(o,a);else if(u==="document")c=getDocumentRect(getDocumentElement(o));else if(isElement(u))c=getInnerBoundingClientRect(u,a);else{const y=getVisualOffsets(o);c={x:u.x-y.x,y:u.y-y.y,width:u.width,height:u.height}}return rectToClientRect(c)}function hasFixedPositionAncestor(o,u){const a=getParentNode(o);return a===u||!isElement(a)||isLastTraversableNode(a)?!1:getComputedStyle$1(a).position==="fixed"||hasFixedPositionAncestor(a,u)}function getClippingElementAncestors(o,u){const a=u.get(o);if(a)return a;let c=getOverflowAncestors(o,[],!1).filter(m=>isElement(m)&&getNodeName(m)!=="body"),y=null;const S=getComputedStyle$1(o).position==="fixed";let R=S?getParentNode(o):o;for(;isElement(R)&&!isLastTraversableNode(R);){const m=getComputedStyle$1(R),_=isContainingBlock(R);!_&&m.position==="fixed"&&(y=null),(S?!_&&!y:!_&&m.position==="static"&&!!y&&["absolute","fixed"].includes(y.position)||isOverflowElement(R)&&!_&&hasFixedPositionAncestor(o,R))?c=c.filter(g=>g!==R):y=m,R=getParentNode(R)}return u.set(o,c),c}function getClippingRect(o){let{element:u,boundary:a,rootBoundary:c,strategy:y}=o;const R=[...a==="clippingAncestors"?isTopLayer(u)?[]:getClippingElementAncestors(u,this._c):[].concat(a),c],m=R[0],_=R.reduce((A,g)=>{const T=getClientRectFromClippingAncestor(u,g,y);return A.top=max(T.top,A.top),A.right=min(T.right,A.right),A.bottom=min(T.bottom,A.bottom),A.left=max(T.left,A.left),A},getClientRectFromClippingAncestor(u,m,y));return{width:_.right-_.left,height:_.bottom-_.top,x:_.left,y:_.top}}function getDimensions(o){const{width:u,height:a}=getCssDimensions(o);return{width:u,height:a}}function getRectRelativeToOffsetParent(o,u,a){const c=isHTMLElement(u),y=getDocumentElement(u),S=a==="fixed",R=getBoundingClientRect(o,!0,S,u);let m={scrollLeft:0,scrollTop:0};const _=createCoords(0);function A(){_.x=getWindowScrollBarX(y)}if(c||!c&&!S)if((getNodeName(u)!=="body"||isOverflowElement(y))&&(m=getNodeScroll(u)),c){const w=getBoundingClientRect(u,!0,S,u);_.x=w.x+u.clientLeft,_.y=w.y+u.clientTop}else y&&A();S&&!c&&y&&A();const g=y&&!c&&!S?getHTMLOffset(y,m):createCoords(0),T=R.left+m.scrollLeft-_.x-g.x,O=R.top+m.scrollTop-_.y-g.y;return{x:T,y:O,width:R.width,height:R.height}}function isStaticPositioned(o){return getComputedStyle$1(o).position==="static"}function getTrueOffsetParent(o,u){if(!isHTMLElement(o)||getComputedStyle$1(o).position==="fixed")return null;if(u)return u(o);let a=o.offsetParent;return getDocumentElement(o)===a&&(a=a.ownerDocument.body),a}function getOffsetParent(o,u){const a=getWindow(o);if(isTopLayer(o))return a;if(!isHTMLElement(o)){let y=getParentNode(o);for(;y&&!isLastTraversableNode(y);){if(isElement(y)&&!isStaticPositioned(y))return y;y=getParentNode(y)}return a}let c=getTrueOffsetParent(o,u);for(;c&&isTableElement(c)&&isStaticPositioned(c);)c=getTrueOffsetParent(c,u);return c&&isLastTraversableNode(c)&&isStaticPositioned(c)&&!isContainingBlock(c)?a:c||getContainingBlock(o)||a}const getElementRects=async function(o){const u=this.getOffsetParent||getOffsetParent,a=this.getDimensions,c=await a(o.floating);return{reference:getRectRelativeToOffsetParent(o.reference,await u(o.floating),o.strategy),floating:{x:0,y:0,width:c.width,height:c.height}}};function isRTL(o){return getComputedStyle$1(o).direction==="rtl"}const platform={convertOffsetParentRelativeRectToViewportRelativeRect,getDocumentElement,getClippingRect,getOffsetParent,getElementRects,getClientRects,getDimensions,getScale,isElement,isRTL};function rectsAreEqual(o,u){return o.x===u.x&&o.y===u.y&&o.width===u.width&&o.height===u.height}function observeMove(o,u){let a=null,c;const y=getDocumentElement(o);function S(){var m;clearTimeout(c),(m=a)==null||m.disconnect(),a=null}function R(m,_){m===void 0&&(m=!1),_===void 0&&(_=1),S();const A=o.getBoundingClientRect(),{left:g,top:T,width:O,height:w}=A;if(m||u(),!O||!w)return;const M=floor(T),f=floor(y.clientWidth-(g+O)),i=floor(y.clientHeight-(T+w)),l=floor(g),v={rootMargin:-M+"px "+-f+"px "+-i+"px "+-l+"px",threshold:max(0,min(1,_))||1};let b=!0;function s(h){const E=h[0].intersectionRatio;if(E!==_){if(!b)return R();E?R(!1,E):c=setTimeout(()=>{R(!1,1e-7)},1e3)}E===1&&!rectsAreEqual(A,o.getBoundingClientRect())&&R(),b=!1}try{a=new IntersectionObserver(s,{...v,root:y.ownerDocument})}catch{a=new IntersectionObserver(s,v)}a.observe(o)}return R(!0),S}function autoUpdate(o,u,a,c){c===void 0&&(c={});const{ancestorScroll:y=!0,ancestorResize:S=!0,elementResize:R=typeof ResizeObserver=="function",layoutShift:m=typeof IntersectionObserver=="function",animationFrame:_=!1}=c,A=unwrapElement(o),g=y||S?[...A?getOverflowAncestors(A):[],...getOverflowAncestors(u)]:[];g.forEach(l=>{y&&l.addEventListener("scroll",a,{passive:!0}),S&&l.addEventListener("resize",a)});const T=A&&m?observeMove(A,a):null;let O=-1,w=null;R&&(w=new ResizeObserver(l=>{let[p]=l;p&&p.target===A&&w&&(w.unobserve(u),cancelAnimationFrame(O),O=requestAnimationFrame(()=>{var v;(v=w)==null||v.observe(u)})),a()}),A&&!_&&w.observe(A),w.observe(u));let M,f=_?getBoundingClientRect(o):null;_&&i();function i(){const l=getBoundingClientRect(o);f&&!rectsAreEqual(f,l)&&a(),f=l,M=requestAnimationFrame(i)}return a(),()=>{var l;g.forEach(p=>{y&&p.removeEventListener("scroll",a),S&&p.removeEventListener("resize",a)}),T==null||T(),(l=w)==null||l.disconnect(),w=null,_&&cancelAnimationFrame(M)}}const offset$1=offset$2,shift$1=shift$2,flip$1=flip$2,size$1=size$2,hide$1=hide$2,arrow$2=arrow$3,limitShift$1=limitShift$2,computePosition=(o,u,a)=>{const c=new Map,y={platform,...a},S={...y.platform,_c:c};return computePosition$1(o,u,{...y,platform:S})};var index=typeof document<"u"?reactExports.useLayoutEffect:reactExports.useEffect;function deepEqual(o,u){if(o===u)return!0;if(typeof o!=typeof u)return!1;if(typeof o=="function"&&o.toString()===u.toString())return!0;let a,c,y;if(o&&u&&typeof o=="object"){if(Array.isArray(o)){if(a=o.length,a!==u.length)return!1;for(c=a;c--!==0;)if(!deepEqual(o[c],u[c]))return!1;return!0}if(y=Object.keys(o),a=y.length,a!==Object.keys(u).length)return!1;for(c=a;c--!==0;)if(!{}.hasOwnProperty.call(u,y[c]))return!1;for(c=a;c--!==0;){const S=y[c];if(!(S==="_owner"&&o.$$typeof)&&!deepEqual(o[S],u[S]))return!1}return!0}return o!==o&&u!==u}function getDPR(o){return typeof window>"u"?1:(o.ownerDocument.defaultView||window).devicePixelRatio||1}function roundByDPR(o,u){const a=getDPR(o);return Math.round(u*a)/a}function useLatestRef(o){const u=reactExports.useRef(o);return index(()=>{u.current=o}),u}function useFloating(o){o===void 0&&(o={});const{placement:u="bottom",strategy:a="absolute",middleware:c=[],platform:y,elements:{reference:S,floating:R}={},transform:m=!0,whileElementsMounted:_,open:A}=o,[g,T]=reactExports.useState({x:0,y:0,strategy:a,placement:u,middlewareData:{},isPositioned:!1}),[O,w]=reactExports.useState(c);deepEqual(O,c)||w(c);const[M,f]=reactExports.useState(null),[i,l]=reactExports.useState(null),p=reactExports.useCallback(F=>{F!==h.current&&(h.current=F,f(F))},[]),v=reactExports.useCallback(F=>{F!==E.current&&(E.current=F,l(F))},[]),b=S||M,s=R||i,h=reactExports.useRef(null),E=reactExports.useRef(null),x=reactExports.useRef(g),D=_!=null,z=useLatestRef(_),P=useLatestRef(y),G=useLatestRef(A),B=reactExports.useCallback(()=>{if(!h.current||!E.current)return;const F={placement:u,strategy:a,middleware:O};P.current&&(F.platform=P.current),computePosition(h.current,E.current,F).then(Y=>{const j={...Y,isPositioned:G.current!==!1};K.current&&!deepEqual(x.current,j)&&(x.current=j,reactDomExports.flushSync(()=>{T(j)}))})},[O,u,a,P,G]);index(()=>{A===!1&&x.current.isPositioned&&(x.current.isPositioned=!1,T(F=>({...F,isPositioned:!1})))},[A]);const K=reactExports.useRef(!1);index(()=>(K.current=!0,()=>{K.current=!1}),[]),index(()=>{if(b&&(h.current=b),s&&(E.current=s),b&&s){if(z.current)return z.current(b,s,B);B()}},[b,s,B,z,D]);const k=reactExports.useMemo(()=>({reference:h,floating:E,setReference:p,setFloating:v}),[p,v]),U=reactExports.useMemo(()=>({reference:b,floating:s}),[b,s]),W=reactExports.useMemo(()=>{const F={position:a,left:0,top:0};if(!U.floating)return F;const Y=roundByDPR(U.floating,g.x),j=roundByDPR(U.floating,g.y);return m?{...F,transform:"translate("+Y+"px, "+j+"px)",...getDPR(U.floating)>=1.5&&{willChange:"transform"}}:{position:a,left:Y,top:j}},[a,m,U.floating,g.x,g.y]);return reactExports.useMemo(()=>({...g,update:B,refs:k,elements:U,floatingStyles:W}),[g,B,k,U,W])}const arrow$1=o=>{function u(a){return{}.hasOwnProperty.call(a,"current")}return{name:"arrow",options:o,fn(a){const{element:c,padding:y}=typeof o=="function"?o(a):o;return c&&u(c)?c.current!=null?arrow$2({element:c.current,padding:y}).fn(a):{}:c?arrow$2({element:c,padding:y}).fn(a):{}}}},offset=(o,u)=>({...offset$1(o),options:[o,u]}),shift=(o,u)=>({...shift$1(o),options:[o,u]}),limitShift=(o,u)=>({...limitShift$1(o),options:[o,u]}),flip=(o,u)=>({...flip$1(o),options:[o,u]}),size=(o,u)=>({...size$1(o),options:[o,u]}),hide=(o,u)=>({...hide$1(o),options:[o,u]}),arrow=(o,u)=>({...arrow$1(o),options:[o,u]});var NAME$1="Arrow",Arrow$1=reactExports.forwardRef((o,u)=>{const{children:a,width:c=10,height:y=5,...S}=o;return jsxRuntimeExports.jsx(Primitive.svg,{...S,ref:u,width:c,height:y,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:o.asChild?a:jsxRuntimeExports.jsx("polygon",{points:"0,0 30,0 15,10"})})});Arrow$1.displayName=NAME$1;var Root$1=Arrow$1;function useSize(o){const[u,a]=reactExports.useState(void 0);return useLayoutEffect2(()=>{if(o){a({width:o.offsetWidth,height:o.offsetHeight});const c=new ResizeObserver(y=>{if(!Array.isArray(y)||!y.length)return;const S=y[0];let R,m;if("borderBoxSize"in S){const _=S.borderBoxSize,A=Array.isArray(_)?_[0]:_;R=A.inlineSize,m=A.blockSize}else R=o.offsetWidth,m=o.offsetHeight;a({width:R,height:m})});return c.observe(o,{box:"border-box"}),()=>c.unobserve(o)}else a(void 0)},[o]),u}var POPPER_NAME="Popper",[createPopperContext,createPopperScope]=createContextScope(POPPER_NAME),[PopperProvider,usePopperContext]=createPopperContext(POPPER_NAME),Popper=o=>{const{__scopePopper:u,children:a}=o,[c,y]=reactExports.useState(null);return jsxRuntimeExports.jsx(PopperProvider,{scope:u,anchor:c,onAnchorChange:y,children:a})};Popper.displayName=POPPER_NAME;var ANCHOR_NAME="PopperAnchor",PopperAnchor=reactExports.forwardRef((o,u)=>{const{__scopePopper:a,virtualRef:c,...y}=o,S=usePopperContext(ANCHOR_NAME,a),R=reactExports.useRef(null),m=useComposedRefs(u,R);return reactExports.useEffect(()=>{S.onAnchorChange((c==null?void 0:c.current)||R.current)}),c?null:jsxRuntimeExports.jsx(Primitive.div,{...y,ref:m})});PopperAnchor.displayName=ANCHOR_NAME;var CONTENT_NAME$1="PopperContent",[PopperContentProvider,useContentContext]=createPopperContext(CONTENT_NAME$1),PopperContent=reactExports.forwardRef((o,u)=>{var ue,ce,pe,De,we,je;const{__scopePopper:a,side:c="bottom",sideOffset:y=0,align:S="center",alignOffset:R=0,arrowPadding:m=0,avoidCollisions:_=!0,collisionBoundary:A=[],collisionPadding:g=0,sticky:T="partial",hideWhenDetached:O=!1,updatePositionStrategy:w="optimized",onPlaced:M,...f}=o,i=usePopperContext(CONTENT_NAME$1,a),[l,p]=reactExports.useState(null),v=useComposedRefs(u,ye=>p(ye)),[b,s]=reactExports.useState(null),h=useSize(b),E=(h==null?void 0:h.width)??0,x=(h==null?void 0:h.height)??0,D=c+(S!=="center"?"-"+S:""),z=typeof g=="number"?g:{top:0,right:0,bottom:0,left:0,...g},P=Array.isArray(A)?A:[A],G=P.length>0,B={padding:z,boundary:P.filter(isNotNull),altBoundary:G},{refs:K,floatingStyles:k,placement:U,isPositioned:W,middlewareData:F}=useFloating({strategy:"fixed",placement:D,whileElementsMounted:(...ye)=>autoUpdate(...ye,{animationFrame:w==="always"}),elements:{reference:i.anchor},middleware:[offset({mainAxis:y+x,alignmentAxis:R}),_&&shift({mainAxis:!0,crossAxis:!1,limiter:T==="partial"?limitShift():void 0,...B}),_&&flip({...B}),size({...B,apply:({elements:ye,rects:he,availableWidth:Ce,availableHeight:ke})=>{const{width:Xe,height:nt}=he.reference,at=ye.floating.style;at.setProperty("--radix-popper-available-width",`${Ce}px`),at.setProperty("--radix-popper-available-height",`${ke}px`),at.setProperty("--radix-popper-anchor-width",`${Xe}px`),at.setProperty("--radix-popper-anchor-height",`${nt}px`)}}),b&&arrow({element:b,padding:m}),transformOrigin({arrowWidth:E,arrowHeight:x}),O&&hide({strategy:"referenceHidden",...B})]}),[Y,j]=getSideAndAlignFromPlacement(U),H=useCallbackRef$1(M);useLayoutEffect2(()=>{W&&(H==null||H())},[W,H]);const Z=(ue=F.arrow)==null?void 0:ue.x,ne=(ce=F.arrow)==null?void 0:ce.y,se=((pe=F.arrow)==null?void 0:pe.centerOffset)!==0,[me,de]=reactExports.useState();return useLayoutEffect2(()=>{l&&de(window.getComputedStyle(l).zIndex)},[l]),jsxRuntimeExports.jsx("div",{ref:K.setFloating,"data-radix-popper-content-wrapper":"",style:{...k,transform:W?k.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:me,"--radix-popper-transform-origin":[(De=F.transformOrigin)==null?void 0:De.x,(we=F.transformOrigin)==null?void 0:we.y].join(" "),...((je=F.hide)==null?void 0:je.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:o.dir,children:jsxRuntimeExports.jsx(PopperContentProvider,{scope:a,placedSide:Y,onArrowChange:s,arrowX:Z,arrowY:ne,shouldHideArrow:se,children:jsxRuntimeExports.jsx(Primitive.div,{"data-side":Y,"data-align":j,...f,ref:v,style:{...f.style,animation:W?void 0:"none"}})})})});PopperContent.displayName=CONTENT_NAME$1;var ARROW_NAME$1="PopperArrow",OPPOSITE_SIDE={top:"bottom",right:"left",bottom:"top",left:"right"},PopperArrow=reactExports.forwardRef(function(u,a){const{__scopePopper:c,...y}=u,S=useContentContext(ARROW_NAME$1,c),R=OPPOSITE_SIDE[S.placedSide];return jsxRuntimeExports.jsx("span",{ref:S.onArrowChange,style:{position:"absolute",left:S.arrowX,top:S.arrowY,[R]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[S.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[S.placedSide],visibility:S.shouldHideArrow?"hidden":void 0},children:jsxRuntimeExports.jsx(Root$1,{...y,ref:a,style:{...y.style,display:"block"}})})});PopperArrow.displayName=ARROW_NAME$1;function isNotNull(o){return o!==null}var transformOrigin=o=>({name:"transformOrigin",options:o,fn(u){var i,l,p;const{placement:a,rects:c,middlewareData:y}=u,R=((i=y.arrow)==null?void 0:i.centerOffset)!==0,m=R?0:o.arrowWidth,_=R?0:o.arrowHeight,[A,g]=getSideAndAlignFromPlacement(a),T={start:"0%",center:"50%",end:"100%"}[g],O=(((l=y.arrow)==null?void 0:l.x)??0)+m/2,w=(((p=y.arrow)==null?void 0:p.y)??0)+_/2;let M="",f="";return A==="bottom"?(M=R?T:`${O}px`,f=`${-_}px`):A==="top"?(M=R?T:`${O}px`,f=`${c.floating.height+_}px`):A==="right"?(M=`${-_}px`,f=R?T:`${w}px`):A==="left"&&(M=`${c.floating.width+_}px`,f=R?T:`${w}px`),{data:{x:M,y:f}}}});function getSideAndAlignFromPlacement(o){const[u,a="center"]=o.split("-");return[u,a]}var Root2$1=Popper,Anchor=PopperAnchor,Content=PopperContent,Arrow=PopperArrow,PORTAL_NAME$1="Portal",Portal$1=reactExports.forwardRef((o,u)=>{var m;const{container:a,...c}=o,[y,S]=reactExports.useState(!1);useLayoutEffect2(()=>S(!0),[]);const R=a||y&&((m=globalThis==null?void 0:globalThis.document)==null?void 0:m.body);return R?ReactDOM.createPortal(jsxRuntimeExports.jsx(Primitive.div,{...c,ref:u}),R):null});Portal$1.displayName=PORTAL_NAME$1;function usePrevious(o){const u=reactExports.useRef({value:o,previous:o});return reactExports.useMemo(()=>(u.current.value!==o&&(u.current.previous=u.current.value,u.current.value=o),u.current.previous),[o])}var VISUALLY_HIDDEN_STYLES=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),NAME="VisuallyHidden",VisuallyHidden=reactExports.forwardRef((o,u)=>jsxRuntimeExports.jsx(Primitive.span,{...o,ref:u,style:{...VISUALLY_HIDDEN_STYLES,...o.style}}));VisuallyHidden.displayName=NAME;var getDefaultParent=function(o){if(typeof document>"u")return null;var u=Array.isArray(o)?o[0]:o;return u.ownerDocument.body},counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={},lockCount=0,unwrapHost=function(o){return o&&(o.host||unwrapHost(o.parentNode))},correctTargets=function(o,u){return u.map(function(a){if(o.contains(a))return a;var c=unwrapHost(a);return c&&o.contains(c)?c:(console.error("aria-hidden",a,"in not contained inside",o,". Doing nothing"),null)}).filter(function(a){return!!a})},applyAttributeToOthers=function(o,u,a,c){var y=correctTargets(u,Array.isArray(o)?o:[o]);markerMap[a]||(markerMap[a]=new WeakMap);var S=markerMap[a],R=[],m=new Set,_=new Set(y),A=function(T){!T||m.has(T)||(m.add(T),A(T.parentNode))};y.forEach(A);var g=function(T){!T||_.has(T)||Array.prototype.forEach.call(T.children,function(O){if(m.has(O))g(O);else try{var w=O.getAttribute(c),M=w!==null&&w!=="false",f=(counterMap.get(O)||0)+1,i=(S.get(O)||0)+1;counterMap.set(O,f),S.set(O,i),R.push(O),f===1&&M&&uncontrolledNodes.set(O,!0),i===1&&O.setAttribute(a,"true"),M||O.setAttribute(c,"true")}catch(l){console.error("aria-hidden: cannot operate on ",O,l)}})};return g(u),m.clear(),lockCount++,function(){R.forEach(function(T){var O=counterMap.get(T)-1,w=S.get(T)-1;counterMap.set(T,O),S.set(T,w),O||(uncontrolledNodes.has(T)||T.removeAttribute(c),uncontrolledNodes.delete(T)),w||T.removeAttribute(a)}),lockCount--,lockCount||(counterMap=new WeakMap,counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={})}},hideOthers=function(o,u,a){a===void 0&&(a="data-aria-hidden");var c=Array.from(Array.isArray(o)?o:[o]),y=getDefaultParent(o);return y?(c.push.apply(c,Array.from(y.querySelectorAll("[aria-live]"))),applyAttributeToOthers(c,y,a,"aria-hidden")):function(){return null}},__assign=function(){return __assign=Object.assign||function(u){for(var a,c=1,y=arguments.length;c<y;c++){a=arguments[c];for(var S in a)Object.prototype.hasOwnProperty.call(a,S)&&(u[S]=a[S])}return u},__assign.apply(this,arguments)};function __rest(o,u){var a={};for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&u.indexOf(c)<0&&(a[c]=o[c]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var y=0,c=Object.getOwnPropertySymbols(o);y<c.length;y++)u.indexOf(c[y])<0&&Object.prototype.propertyIsEnumerable.call(o,c[y])&&(a[c[y]]=o[c[y]]);return a}function __spreadArray(o,u,a){if(a||arguments.length===2)for(var c=0,y=u.length,S;c<y;c++)(S||!(c in u))&&(S||(S=Array.prototype.slice.call(u,0,c)),S[c]=u[c]);return o.concat(S||Array.prototype.slice.call(u))}typeof SuppressedError=="function"&&SuppressedError;var zeroRightClassName="right-scroll-bar-position",fullWidthClassName="width-before-scroll-bar",noScrollbarsClassName="with-scroll-bars-hidden",removedBarSizeVariable="--removed-body-scroll-bar-size";function assignRef(o,u){return typeof o=="function"?o(u):o&&(o.current=u),o}function useCallbackRef(o,u){var a=reactExports.useState(function(){return{value:o,callback:u,facade:{get current(){return a.value},set current(c){var y=a.value;y!==c&&(a.value=c,a.callback(c,y))}}}})[0];return a.callback=u,a.facade}var useIsomorphicLayoutEffect=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect,currentValues=new WeakMap;function useMergeRefs(o,u){var a=useCallbackRef(null,function(c){return o.forEach(function(y){return assignRef(y,c)})});return useIsomorphicLayoutEffect(function(){var c=currentValues.get(a);if(c){var y=new Set(c),S=new Set(o),R=a.current;y.forEach(function(m){S.has(m)||assignRef(m,null)}),S.forEach(function(m){y.has(m)||assignRef(m,R)})}currentValues.set(a,o)},[o]),a}function ItoI(o){return o}function innerCreateMedium(o,u){u===void 0&&(u=ItoI);var a=[],c=!1,y={read:function(){if(c)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return a.length?a[a.length-1]:o},useMedium:function(S){var R=u(S,c);return a.push(R),function(){a=a.filter(function(m){return m!==R})}},assignSyncMedium:function(S){for(c=!0;a.length;){var R=a;a=[],R.forEach(S)}a={push:function(m){return S(m)},filter:function(){return a}}},assignMedium:function(S){c=!0;var R=[];if(a.length){var m=a;a=[],m.forEach(S),R=a}var _=function(){var g=R;R=[],g.forEach(S)},A=function(){return Promise.resolve().then(_)};A(),a={push:function(g){R.push(g),A()},filter:function(g){return R=R.filter(g),a}}}};return y}function createSidecarMedium(o){o===void 0&&(o={});var u=innerCreateMedium(null);return u.options=__assign({async:!0,ssr:!1},o),u}var SideCar$1=function(o){var u=o.sideCar,a=__rest(o,["sideCar"]);if(!u)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var c=u.read();if(!c)throw new Error("Sidecar medium not found");return reactExports.createElement(c,__assign({},a))};SideCar$1.isSideCarExport=!0;function exportSidecar(o,u){return o.useMedium(u),SideCar$1}var effectCar=createSidecarMedium(),nothing=function(){},RemoveScroll=reactExports.forwardRef(function(o,u){var a=reactExports.useRef(null),c=reactExports.useState({onScrollCapture:nothing,onWheelCapture:nothing,onTouchMoveCapture:nothing}),y=c[0],S=c[1],R=o.forwardProps,m=o.children,_=o.className,A=o.removeScrollBar,g=o.enabled,T=o.shards,O=o.sideCar,w=o.noIsolation,M=o.inert,f=o.allowPinchZoom,i=o.as,l=i===void 0?"div":i,p=o.gapMode,v=__rest(o,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),b=O,s=useMergeRefs([a,u]),h=__assign(__assign({},v),y);return reactExports.createElement(reactExports.Fragment,null,g&&reactExports.createElement(b,{sideCar:effectCar,removeScrollBar:A,shards:T,noIsolation:w,inert:M,setCallbacks:S,allowPinchZoom:!!f,lockRef:a,gapMode:p}),R?reactExports.cloneElement(reactExports.Children.only(m),__assign(__assign({},h),{ref:s})):reactExports.createElement(l,__assign({},h,{className:_,ref:s}),m))});RemoveScroll.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};RemoveScroll.classNames={fullWidth:fullWidthClassName,zeroRight:zeroRightClassName};var getNonce=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function makeStyleTag(){if(!document)return null;var o=document.createElement("style");o.type="text/css";var u=getNonce();return u&&o.setAttribute("nonce",u),o}function injectStyles(o,u){o.styleSheet?o.styleSheet.cssText=u:o.appendChild(document.createTextNode(u))}function insertStyleTag(o){var u=document.head||document.getElementsByTagName("head")[0];u.appendChild(o)}var stylesheetSingleton=function(){var o=0,u=null;return{add:function(a){o==0&&(u=makeStyleTag())&&(injectStyles(u,a),insertStyleTag(u)),o++},remove:function(){o--,!o&&u&&(u.parentNode&&u.parentNode.removeChild(u),u=null)}}},styleHookSingleton=function(){var o=stylesheetSingleton();return function(u,a){reactExports.useEffect(function(){return o.add(u),function(){o.remove()}},[u&&a])}},styleSingleton=function(){var o=styleHookSingleton(),u=function(a){var c=a.styles,y=a.dynamic;return o(c,y),null};return u},zeroGap={left:0,top:0,right:0,gap:0},parse=function(o){return parseInt(o||"",10)||0},getOffset=function(o){var u=window.getComputedStyle(document.body),a=u[o==="padding"?"paddingLeft":"marginLeft"],c=u[o==="padding"?"paddingTop":"marginTop"],y=u[o==="padding"?"paddingRight":"marginRight"];return[parse(a),parse(c),parse(y)]},getGapWidth=function(o){if(o===void 0&&(o="margin"),typeof window>"u")return zeroGap;var u=getOffset(o),a=document.documentElement.clientWidth,c=window.innerWidth;return{left:u[0],top:u[1],right:u[2],gap:Math.max(0,c-a+u[2]-u[0])}},Style=styleSingleton(),lockAttribute="data-scroll-locked",getStyles=function(o,u,a,c){var y=o.left,S=o.top,R=o.right,m=o.gap;return a===void 0&&(a="margin"),`
  .`.concat(noScrollbarsClassName,` {
   overflow: hidden `).concat(c,`;
   padding-right: `).concat(m,"px ").concat(c,`;
  }
  body[`).concat(lockAttribute,`] {
    overflow: hidden `).concat(c,`;
    overscroll-behavior: contain;
    `).concat([u&&"position: relative ".concat(c,";"),a==="margin"&&`
    padding-left: `.concat(y,`px;
    padding-top: `).concat(S,`px;
    padding-right: `).concat(R,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(m,"px ").concat(c,`;
    `),a==="padding"&&"padding-right: ".concat(m,"px ").concat(c,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(zeroRightClassName,` {
    right: `).concat(m,"px ").concat(c,`;
  }
  
  .`).concat(fullWidthClassName,` {
    margin-right: `).concat(m,"px ").concat(c,`;
  }
  
  .`).concat(zeroRightClassName," .").concat(zeroRightClassName,` {
    right: 0 `).concat(c,`;
  }
  
  .`).concat(fullWidthClassName," .").concat(fullWidthClassName,` {
    margin-right: 0 `).concat(c,`;
  }
  
  body[`).concat(lockAttribute,`] {
    `).concat(removedBarSizeVariable,": ").concat(m,`px;
  }
`)},getCurrentUseCounter=function(){var o=parseInt(document.body.getAttribute(lockAttribute)||"0",10);return isFinite(o)?o:0},useLockAttribute=function(){reactExports.useEffect(function(){return document.body.setAttribute(lockAttribute,(getCurrentUseCounter()+1).toString()),function(){var o=getCurrentUseCounter()-1;o<=0?document.body.removeAttribute(lockAttribute):document.body.setAttribute(lockAttribute,o.toString())}},[])},RemoveScrollBar=function(o){var u=o.noRelative,a=o.noImportant,c=o.gapMode,y=c===void 0?"margin":c;useLockAttribute();var S=reactExports.useMemo(function(){return getGapWidth(y)},[y]);return reactExports.createElement(Style,{styles:getStyles(S,!u,y,a?"":"!important")})},passiveSupported=!1;if(typeof window<"u")try{var options=Object.defineProperty({},"passive",{get:function(){return passiveSupported=!0,!0}});window.addEventListener("test",options,options),window.removeEventListener("test",options,options)}catch{passiveSupported=!1}var nonPassive=passiveSupported?{passive:!1}:!1,alwaysContainsScroll=function(o){return o.tagName==="TEXTAREA"},elementCanBeScrolled=function(o,u){if(!(o instanceof Element))return!1;var a=window.getComputedStyle(o);return a[u]!=="hidden"&&!(a.overflowY===a.overflowX&&!alwaysContainsScroll(o)&&a[u]==="visible")},elementCouldBeVScrolled=function(o){return elementCanBeScrolled(o,"overflowY")},elementCouldBeHScrolled=function(o){return elementCanBeScrolled(o,"overflowX")},locationCouldBeScrolled=function(o,u){var a=u.ownerDocument,c=u;do{typeof ShadowRoot<"u"&&c instanceof ShadowRoot&&(c=c.host);var y=elementCouldBeScrolled(o,c);if(y){var S=getScrollVariables(o,c),R=S[1],m=S[2];if(R>m)return!0}c=c.parentNode}while(c&&c!==a.body);return!1},getVScrollVariables=function(o){var u=o.scrollTop,a=o.scrollHeight,c=o.clientHeight;return[u,a,c]},getHScrollVariables=function(o){var u=o.scrollLeft,a=o.scrollWidth,c=o.clientWidth;return[u,a,c]},elementCouldBeScrolled=function(o,u){return o==="v"?elementCouldBeVScrolled(u):elementCouldBeHScrolled(u)},getScrollVariables=function(o,u){return o==="v"?getVScrollVariables(u):getHScrollVariables(u)},getDirectionFactor=function(o,u){return o==="h"&&u==="rtl"?-1:1},handleScroll=function(o,u,a,c,y){var S=getDirectionFactor(o,window.getComputedStyle(u).direction),R=S*c,m=a.target,_=u.contains(m),A=!1,g=R>0,T=0,O=0;do{var w=getScrollVariables(o,m),M=w[0],f=w[1],i=w[2],l=f-i-S*M;(M||l)&&elementCouldBeScrolled(o,m)&&(T+=l,O+=M),m instanceof ShadowRoot?m=m.host:m=m.parentNode}while(!_&&m!==document.body||_&&(u.contains(m)||u===m));return(g&&Math.abs(T)<1||!g&&Math.abs(O)<1)&&(A=!0),A},getTouchXY=function(o){return"changedTouches"in o?[o.changedTouches[0].clientX,o.changedTouches[0].clientY]:[0,0]},getDeltaXY=function(o){return[o.deltaX,o.deltaY]},extractRef=function(o){return o&&"current"in o?o.current:o},deltaCompare=function(o,u){return o[0]===u[0]&&o[1]===u[1]},generateStyle=function(o){return`
  .block-interactivity-`.concat(o,` {pointer-events: none;}
  .allow-interactivity-`).concat(o,` {pointer-events: all;}
`)},idCounter=0,lockStack=[];function RemoveScrollSideCar(o){var u=reactExports.useRef([]),a=reactExports.useRef([0,0]),c=reactExports.useRef(),y=reactExports.useState(idCounter++)[0],S=reactExports.useState(styleSingleton)[0],R=reactExports.useRef(o);reactExports.useEffect(function(){R.current=o},[o]),reactExports.useEffect(function(){if(o.inert){document.body.classList.add("block-interactivity-".concat(y));var f=__spreadArray([o.lockRef.current],(o.shards||[]).map(extractRef),!0).filter(Boolean);return f.forEach(function(i){return i.classList.add("allow-interactivity-".concat(y))}),function(){document.body.classList.remove("block-interactivity-".concat(y)),f.forEach(function(i){return i.classList.remove("allow-interactivity-".concat(y))})}}},[o.inert,o.lockRef.current,o.shards]);var m=reactExports.useCallback(function(f,i){if("touches"in f&&f.touches.length===2||f.type==="wheel"&&f.ctrlKey)return!R.current.allowPinchZoom;var l=getTouchXY(f),p=a.current,v="deltaX"in f?f.deltaX:p[0]-l[0],b="deltaY"in f?f.deltaY:p[1]-l[1],s,h=f.target,E=Math.abs(v)>Math.abs(b)?"h":"v";if("touches"in f&&E==="h"&&h.type==="range")return!1;var x=locationCouldBeScrolled(E,h);if(!x)return!0;if(x?s=E:(s=E==="v"?"h":"v",x=locationCouldBeScrolled(E,h)),!x)return!1;if(!c.current&&"changedTouches"in f&&(v||b)&&(c.current=s),!s)return!0;var D=c.current||s;return handleScroll(D,i,f,D==="h"?v:b)},[]),_=reactExports.useCallback(function(f){var i=f;if(!(!lockStack.length||lockStack[lockStack.length-1]!==S)){var l="deltaY"in i?getDeltaXY(i):getTouchXY(i),p=u.current.filter(function(s){return s.name===i.type&&(s.target===i.target||i.target===s.shadowParent)&&deltaCompare(s.delta,l)})[0];if(p&&p.should){i.cancelable&&i.preventDefault();return}if(!p){var v=(R.current.shards||[]).map(extractRef).filter(Boolean).filter(function(s){return s.contains(i.target)}),b=v.length>0?m(i,v[0]):!R.current.noIsolation;b&&i.cancelable&&i.preventDefault()}}},[]),A=reactExports.useCallback(function(f,i,l,p){var v={name:f,delta:i,target:l,should:p,shadowParent:getOutermostShadowParent(l)};u.current.push(v),setTimeout(function(){u.current=u.current.filter(function(b){return b!==v})},1)},[]),g=reactExports.useCallback(function(f){a.current=getTouchXY(f),c.current=void 0},[]),T=reactExports.useCallback(function(f){A(f.type,getDeltaXY(f),f.target,m(f,o.lockRef.current))},[]),O=reactExports.useCallback(function(f){A(f.type,getTouchXY(f),f.target,m(f,o.lockRef.current))},[]);reactExports.useEffect(function(){return lockStack.push(S),o.setCallbacks({onScrollCapture:T,onWheelCapture:T,onTouchMoveCapture:O}),document.addEventListener("wheel",_,nonPassive),document.addEventListener("touchmove",_,nonPassive),document.addEventListener("touchstart",g,nonPassive),function(){lockStack=lockStack.filter(function(f){return f!==S}),document.removeEventListener("wheel",_,nonPassive),document.removeEventListener("touchmove",_,nonPassive),document.removeEventListener("touchstart",g,nonPassive)}},[]);var w=o.removeScrollBar,M=o.inert;return reactExports.createElement(reactExports.Fragment,null,M?reactExports.createElement(S,{styles:generateStyle(y)}):null,w?reactExports.createElement(RemoveScrollBar,{gapMode:o.gapMode}):null)}function getOutermostShadowParent(o){for(var u=null;o!==null;)o instanceof ShadowRoot&&(u=o.host,o=o.host),o=o.parentNode;return u}const SideCar=exportSidecar(effectCar,RemoveScrollSideCar);var ReactRemoveScroll=reactExports.forwardRef(function(o,u){return reactExports.createElement(RemoveScroll,__assign({},o,{ref:u,sideCar:SideCar}))});ReactRemoveScroll.classNames=RemoveScroll.classNames;var OPEN_KEYS=[" ","Enter","ArrowUp","ArrowDown"],SELECTION_KEYS=[" ","Enter"],SELECT_NAME="Select",[Collection,useCollection,createCollectionScope]=createCollection(SELECT_NAME),[createSelectContext,createSelectScope]=createContextScope(SELECT_NAME,[createCollectionScope,createPopperScope]),usePopperScope=createPopperScope(),[SelectProvider,useSelectContext]=createSelectContext(SELECT_NAME),[SelectNativeOptionsProvider,useSelectNativeOptionsContext]=createSelectContext(SELECT_NAME),Select$1=o=>{const{__scopeSelect:u,children:a,open:c,defaultOpen:y,onOpenChange:S,value:R,defaultValue:m,onValueChange:_,dir:A,name:g,autoComplete:T,disabled:O,required:w,form:M}=o,f=usePopperScope(u),[i,l]=reactExports.useState(null),[p,v]=reactExports.useState(null),[b,s]=reactExports.useState(!1),h=useDirection(A),[E,x]=useControllableState({prop:c,defaultProp:y??!1,onChange:S,caller:SELECT_NAME}),[D,z]=useControllableState({prop:R,defaultProp:m,onChange:_,caller:SELECT_NAME}),P=reactExports.useRef(null),G=i?M||!!i.closest("form"):!0,[B,K]=reactExports.useState(new Set),k=Array.from(B).map(U=>U.props.value).join(";");return jsxRuntimeExports.jsx(Root2$1,{...f,children:jsxRuntimeExports.jsxs(SelectProvider,{required:w,scope:u,trigger:i,onTriggerChange:l,valueNode:p,onValueNodeChange:v,valueNodeHasChildren:b,onValueNodeHasChildrenChange:s,contentId:useId(),value:D,onValueChange:z,open:E,onOpenChange:x,dir:h,triggerPointerDownPosRef:P,disabled:O,children:[jsxRuntimeExports.jsx(Collection.Provider,{scope:u,children:jsxRuntimeExports.jsx(SelectNativeOptionsProvider,{scope:o.__scopeSelect,onNativeOptionAdd:reactExports.useCallback(U=>{K(W=>new Set(W).add(U))},[]),onNativeOptionRemove:reactExports.useCallback(U=>{K(W=>{const F=new Set(W);return F.delete(U),F})},[]),children:a})}),G?jsxRuntimeExports.jsxs(SelectBubbleInput,{"aria-hidden":!0,required:w,tabIndex:-1,name:g,autoComplete:T,value:D,onChange:U=>z(U.target.value),disabled:O,form:M,children:[D===void 0?jsxRuntimeExports.jsx("option",{value:""}):null,Array.from(B)]},k):null]})})};Select$1.displayName=SELECT_NAME;var TRIGGER_NAME="SelectTrigger",SelectTrigger$1=reactExports.forwardRef((o,u)=>{const{__scopeSelect:a,disabled:c=!1,...y}=o,S=usePopperScope(a),R=useSelectContext(TRIGGER_NAME,a),m=R.disabled||c,_=useComposedRefs(u,R.onTriggerChange),A=useCollection(a),g=reactExports.useRef("touch"),[T,O,w]=useTypeaheadSearch(f=>{const i=A().filter(v=>!v.disabled),l=i.find(v=>v.value===R.value),p=findNextItem(i,f,l);p!==void 0&&R.onValueChange(p.value)}),M=f=>{m||(R.onOpenChange(!0),w()),f&&(R.triggerPointerDownPosRef.current={x:Math.round(f.pageX),y:Math.round(f.pageY)})};return jsxRuntimeExports.jsx(Anchor,{asChild:!0,...S,children:jsxRuntimeExports.jsx(Primitive.button,{type:"button",role:"combobox","aria-controls":R.contentId,"aria-expanded":R.open,"aria-required":R.required,"aria-autocomplete":"none",dir:R.dir,"data-state":R.open?"open":"closed",disabled:m,"data-disabled":m?"":void 0,"data-placeholder":shouldShowPlaceholder(R.value)?"":void 0,...y,ref:_,onClick:composeEventHandlers(y.onClick,f=>{f.currentTarget.focus(),g.current!=="mouse"&&M(f)}),onPointerDown:composeEventHandlers(y.onPointerDown,f=>{g.current=f.pointerType;const i=f.target;i.hasPointerCapture(f.pointerId)&&i.releasePointerCapture(f.pointerId),f.button===0&&f.ctrlKey===!1&&f.pointerType==="mouse"&&(M(f),f.preventDefault())}),onKeyDown:composeEventHandlers(y.onKeyDown,f=>{const i=T.current!=="";!(f.ctrlKey||f.altKey||f.metaKey)&&f.key.length===1&&O(f.key),!(i&&f.key===" ")&&OPEN_KEYS.includes(f.key)&&(M(),f.preventDefault())})})})});SelectTrigger$1.displayName=TRIGGER_NAME;var VALUE_NAME="SelectValue",SelectValue$1=reactExports.forwardRef((o,u)=>{const{__scopeSelect:a,className:c,style:y,children:S,placeholder:R="",...m}=o,_=useSelectContext(VALUE_NAME,a),{onValueNodeHasChildrenChange:A}=_,g=S!==void 0,T=useComposedRefs(u,_.onValueNodeChange);return useLayoutEffect2(()=>{A(g)},[A,g]),jsxRuntimeExports.jsx(Primitive.span,{...m,ref:T,style:{pointerEvents:"none"},children:shouldShowPlaceholder(_.value)?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:R}):S})});SelectValue$1.displayName=VALUE_NAME;var ICON_NAME="SelectIcon",SelectIcon=reactExports.forwardRef((o,u)=>{const{__scopeSelect:a,children:c,...y}=o;return jsxRuntimeExports.jsx(Primitive.span,{"aria-hidden":!0,...y,ref:u,children:c||""})});SelectIcon.displayName=ICON_NAME;var PORTAL_NAME="SelectPortal",SelectPortal=o=>jsxRuntimeExports.jsx(Portal$1,{asChild:!0,...o});SelectPortal.displayName=PORTAL_NAME;var CONTENT_NAME="SelectContent",SelectContent$1=reactExports.forwardRef((o,u)=>{const a=useSelectContext(CONTENT_NAME,o.__scopeSelect),[c,y]=reactExports.useState();if(useLayoutEffect2(()=>{y(new DocumentFragment)},[]),!a.open){const S=c;return S?reactDomExports.createPortal(jsxRuntimeExports.jsx(SelectContentProvider,{scope:o.__scopeSelect,children:jsxRuntimeExports.jsx(Collection.Slot,{scope:o.__scopeSelect,children:jsxRuntimeExports.jsx("div",{children:o.children})})}),S):null}return jsxRuntimeExports.jsx(SelectContentImpl,{...o,ref:u})});SelectContent$1.displayName=CONTENT_NAME;var CONTENT_MARGIN=10,[SelectContentProvider,useSelectContentContext]=createSelectContext(CONTENT_NAME),CONTENT_IMPL_NAME="SelectContentImpl",Slot=createSlot("SelectContent.RemoveScroll"),SelectContentImpl=reactExports.forwardRef((o,u)=>{const{__scopeSelect:a,position:c="item-aligned",onCloseAutoFocus:y,onEscapeKeyDown:S,onPointerDownOutside:R,side:m,sideOffset:_,align:A,alignOffset:g,arrowPadding:T,collisionBoundary:O,collisionPadding:w,sticky:M,hideWhenDetached:f,avoidCollisions:i,...l}=o,p=useSelectContext(CONTENT_NAME,a),[v,b]=reactExports.useState(null),[s,h]=reactExports.useState(null),E=useComposedRefs(u,ue=>b(ue)),[x,D]=reactExports.useState(null),[z,P]=reactExports.useState(null),G=useCollection(a),[B,K]=reactExports.useState(!1),k=reactExports.useRef(!1);reactExports.useEffect(()=>{if(v)return hideOthers(v)},[v]),useFocusGuards();const U=reactExports.useCallback(ue=>{const[ce,...pe]=G().map(je=>je.ref.current),[De]=pe.slice(-1),we=document.activeElement;for(const je of ue)if(je===we||(je==null||je.scrollIntoView({block:"nearest"}),je===ce&&s&&(s.scrollTop=0),je===De&&s&&(s.scrollTop=s.scrollHeight),je==null||je.focus(),document.activeElement!==we))return},[G,s]),W=reactExports.useCallback(()=>U([x,v]),[U,x,v]);reactExports.useEffect(()=>{B&&W()},[B,W]);const{onOpenChange:F,triggerPointerDownPosRef:Y}=p;reactExports.useEffect(()=>{if(v){let ue={x:0,y:0};const ce=De=>{var we,je;ue={x:Math.abs(Math.round(De.pageX)-(((we=Y.current)==null?void 0:we.x)??0)),y:Math.abs(Math.round(De.pageY)-(((je=Y.current)==null?void 0:je.y)??0))}},pe=De=>{ue.x<=10&&ue.y<=10?De.preventDefault():v.contains(De.target)||F(!1),document.removeEventListener("pointermove",ce),Y.current=null};return Y.current!==null&&(document.addEventListener("pointermove",ce),document.addEventListener("pointerup",pe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ce),document.removeEventListener("pointerup",pe,{capture:!0})}}},[v,F,Y]),reactExports.useEffect(()=>{const ue=()=>F(!1);return window.addEventListener("blur",ue),window.addEventListener("resize",ue),()=>{window.removeEventListener("blur",ue),window.removeEventListener("resize",ue)}},[F]);const[j,H]=useTypeaheadSearch(ue=>{const ce=G().filter(we=>!we.disabled),pe=ce.find(we=>we.ref.current===document.activeElement),De=findNextItem(ce,ue,pe);De&&setTimeout(()=>De.ref.current.focus())}),Z=reactExports.useCallback((ue,ce,pe)=>{const De=!k.current&&!pe;(p.value!==void 0&&p.value===ce||De)&&(D(ue),De&&(k.current=!0))},[p.value]),ne=reactExports.useCallback(()=>v==null?void 0:v.focus(),[v]),se=reactExports.useCallback((ue,ce,pe)=>{const De=!k.current&&!pe;(p.value!==void 0&&p.value===ce||De)&&P(ue)},[p.value]),me=c==="popper"?SelectPopperPosition:SelectItemAlignedPosition,de=me===SelectPopperPosition?{side:m,sideOffset:_,align:A,alignOffset:g,arrowPadding:T,collisionBoundary:O,collisionPadding:w,sticky:M,hideWhenDetached:f,avoidCollisions:i}:{};return jsxRuntimeExports.jsx(SelectContentProvider,{scope:a,content:v,viewport:s,onViewportChange:h,itemRefCallback:Z,selectedItem:x,onItemLeave:ne,itemTextRefCallback:se,focusSelectedItem:W,selectedItemText:z,position:c,isPositioned:B,searchRef:j,children:jsxRuntimeExports.jsx(ReactRemoveScroll,{as:Slot,allowPinchZoom:!0,children:jsxRuntimeExports.jsx(FocusScope,{asChild:!0,trapped:p.open,onMountAutoFocus:ue=>{ue.preventDefault()},onUnmountAutoFocus:composeEventHandlers(y,ue=>{var ce;(ce=p.trigger)==null||ce.focus({preventScroll:!0}),ue.preventDefault()}),children:jsxRuntimeExports.jsx(DismissableLayer,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:S,onPointerDownOutside:R,onFocusOutside:ue=>ue.preventDefault(),onDismiss:()=>p.onOpenChange(!1),children:jsxRuntimeExports.jsx(me,{role:"listbox",id:p.contentId,"data-state":p.open?"open":"closed",dir:p.dir,onContextMenu:ue=>ue.preventDefault(),...l,...de,onPlaced:()=>K(!0),ref:E,style:{display:"flex",flexDirection:"column",outline:"none",...l.style},onKeyDown:composeEventHandlers(l.onKeyDown,ue=>{const ce=ue.ctrlKey||ue.altKey||ue.metaKey;if(ue.key==="Tab"&&ue.preventDefault(),!ce&&ue.key.length===1&&H(ue.key),["ArrowUp","ArrowDown","Home","End"].includes(ue.key)){let De=G().filter(we=>!we.disabled).map(we=>we.ref.current);if(["ArrowUp","End"].includes(ue.key)&&(De=De.slice().reverse()),["ArrowUp","ArrowDown"].includes(ue.key)){const we=ue.target,je=De.indexOf(we);De=De.slice(je+1)}setTimeout(()=>U(De)),ue.preventDefault()}})})})})})})});SelectContentImpl.displayName=CONTENT_IMPL_NAME;var ITEM_ALIGNED_POSITION_NAME="SelectItemAlignedPosition",SelectItemAlignedPosition=reactExports.forwardRef((o,u)=>{const{__scopeSelect:a,onPlaced:c,...y}=o,S=useSelectContext(CONTENT_NAME,a),R=useSelectContentContext(CONTENT_NAME,a),[m,_]=reactExports.useState(null),[A,g]=reactExports.useState(null),T=useComposedRefs(u,E=>g(E)),O=useCollection(a),w=reactExports.useRef(!1),M=reactExports.useRef(!0),{viewport:f,selectedItem:i,selectedItemText:l,focusSelectedItem:p}=R,v=reactExports.useCallback(()=>{if(S.trigger&&S.valueNode&&m&&A&&f&&i&&l){const E=S.trigger.getBoundingClientRect(),x=A.getBoundingClientRect(),D=S.valueNode.getBoundingClientRect(),z=l.getBoundingClientRect();if(S.dir!=="rtl"){const we=z.left-x.left,je=D.left-we,ye=E.left-je,he=E.width+ye,Ce=Math.max(he,x.width),ke=window.innerWidth-CONTENT_MARGIN,Xe=clamp$1(je,[CONTENT_MARGIN,Math.max(CONTENT_MARGIN,ke-Ce)]);m.style.minWidth=he+"px",m.style.left=Xe+"px"}else{const we=x.right-z.right,je=window.innerWidth-D.right-we,ye=window.innerWidth-E.right-je,he=E.width+ye,Ce=Math.max(he,x.width),ke=window.innerWidth-CONTENT_MARGIN,Xe=clamp$1(je,[CONTENT_MARGIN,Math.max(CONTENT_MARGIN,ke-Ce)]);m.style.minWidth=he+"px",m.style.right=Xe+"px"}const P=O(),G=window.innerHeight-CONTENT_MARGIN*2,B=f.scrollHeight,K=window.getComputedStyle(A),k=parseInt(K.borderTopWidth,10),U=parseInt(K.paddingTop,10),W=parseInt(K.borderBottomWidth,10),F=parseInt(K.paddingBottom,10),Y=k+U+B+F+W,j=Math.min(i.offsetHeight*5,Y),H=window.getComputedStyle(f),Z=parseInt(H.paddingTop,10),ne=parseInt(H.paddingBottom,10),se=E.top+E.height/2-CONTENT_MARGIN,me=G-se,de=i.offsetHeight/2,ue=i.offsetTop+de,ce=k+U+ue,pe=Y-ce;if(ce<=se){const we=P.length>0&&i===P[P.length-1].ref.current;m.style.bottom="0px";const je=A.clientHeight-f.offsetTop-f.offsetHeight,ye=Math.max(me,de+(we?ne:0)+je+W),he=ce+ye;m.style.height=he+"px"}else{const we=P.length>0&&i===P[0].ref.current;m.style.top="0px";const ye=Math.max(se,k+f.offsetTop+(we?Z:0)+de)+pe;m.style.height=ye+"px",f.scrollTop=ce-se+f.offsetTop}m.style.margin=`${CONTENT_MARGIN}px 0`,m.style.minHeight=j+"px",m.style.maxHeight=G+"px",c==null||c(),requestAnimationFrame(()=>w.current=!0)}},[O,S.trigger,S.valueNode,m,A,f,i,l,S.dir,c]);useLayoutEffect2(()=>v(),[v]);const[b,s]=reactExports.useState();useLayoutEffect2(()=>{A&&s(window.getComputedStyle(A).zIndex)},[A]);const h=reactExports.useCallback(E=>{E&&M.current===!0&&(v(),p==null||p(),M.current=!1)},[v,p]);return jsxRuntimeExports.jsx(SelectViewportProvider,{scope:a,contentWrapper:m,shouldExpandOnScrollRef:w,onScrollButtonChange:h,children:jsxRuntimeExports.jsx("div",{ref:_,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:b},children:jsxRuntimeExports.jsx(Primitive.div,{...y,ref:T,style:{boxSizing:"border-box",maxHeight:"100%",...y.style}})})})});SelectItemAlignedPosition.displayName=ITEM_ALIGNED_POSITION_NAME;var POPPER_POSITION_NAME="SelectPopperPosition",SelectPopperPosition=reactExports.forwardRef((o,u)=>{const{__scopeSelect:a,align:c="start",collisionPadding:y=CONTENT_MARGIN,...S}=o,R=usePopperScope(a);return jsxRuntimeExports.jsx(Content,{...R,...S,ref:u,align:c,collisionPadding:y,style:{boxSizing:"border-box",...S.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});SelectPopperPosition.displayName=POPPER_POSITION_NAME;var[SelectViewportProvider,useSelectViewportContext]=createSelectContext(CONTENT_NAME,{}),VIEWPORT_NAME$1="SelectViewport",SelectViewport=reactExports.forwardRef((o,u)=>{const{__scopeSelect:a,nonce:c,...y}=o,S=useSelectContentContext(VIEWPORT_NAME$1,a),R=useSelectViewportContext(VIEWPORT_NAME$1,a),m=useComposedRefs(u,S.onViewportChange),_=reactExports.useRef(0);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:c}),jsxRuntimeExports.jsx(Collection.Slot,{scope:a,children:jsxRuntimeExports.jsx(Primitive.div,{"data-radix-select-viewport":"",role:"presentation",...y,ref:m,style:{position:"relative",flex:1,overflow:"hidden auto",...y.style},onScroll:composeEventHandlers(y.onScroll,A=>{const g=A.currentTarget,{contentWrapper:T,shouldExpandOnScrollRef:O}=R;if(O!=null&&O.current&&T){const w=Math.abs(_.current-g.scrollTop);if(w>0){const M=window.innerHeight-CONTENT_MARGIN*2,f=parseFloat(T.style.minHeight),i=parseFloat(T.style.height),l=Math.max(f,i);if(l<M){const p=l+w,v=Math.min(M,p),b=p-v;T.style.height=v+"px",T.style.bottom==="0px"&&(g.scrollTop=b>0?b:0,T.style.justifyContent="flex-end")}}}_.current=g.scrollTop})})})]})});SelectViewport.displayName=VIEWPORT_NAME$1;var GROUP_NAME="SelectGroup",[SelectGroupContextProvider,useSelectGroupContext]=createSelectContext(GROUP_NAME),SelectGroup=reactExports.forwardRef((o,u)=>{const{__scopeSelect:a,...c}=o,y=useId();return jsxRuntimeExports.jsx(SelectGroupContextProvider,{scope:a,id:y,children:jsxRuntimeExports.jsx(Primitive.div,{role:"group","aria-labelledby":y,...c,ref:u})})});SelectGroup.displayName=GROUP_NAME;var LABEL_NAME="SelectLabel",SelectLabel=reactExports.forwardRef((o,u)=>{const{__scopeSelect:a,...c}=o,y=useSelectGroupContext(LABEL_NAME,a);return jsxRuntimeExports.jsx(Primitive.div,{id:y.id,...c,ref:u})});SelectLabel.displayName=LABEL_NAME;var ITEM_NAME="SelectItem",[SelectItemContextProvider,useSelectItemContext]=createSelectContext(ITEM_NAME),SelectItem$1=reactExports.forwardRef((o,u)=>{const{__scopeSelect:a,value:c,disabled:y=!1,textValue:S,...R}=o,m=useSelectContext(ITEM_NAME,a),_=useSelectContentContext(ITEM_NAME,a),A=m.value===c,[g,T]=reactExports.useState(S??""),[O,w]=reactExports.useState(!1),M=useComposedRefs(u,p=>{var v;return(v=_.itemRefCallback)==null?void 0:v.call(_,p,c,y)}),f=useId(),i=reactExports.useRef("touch"),l=()=>{y||(m.onValueChange(c),m.onOpenChange(!1))};if(c==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return jsxRuntimeExports.jsx(SelectItemContextProvider,{scope:a,value:c,disabled:y,textId:f,isSelected:A,onItemTextChange:reactExports.useCallback(p=>{T(v=>v||((p==null?void 0:p.textContent)??"").trim())},[]),children:jsxRuntimeExports.jsx(Collection.ItemSlot,{scope:a,value:c,disabled:y,textValue:g,children:jsxRuntimeExports.jsx(Primitive.div,{role:"option","aria-labelledby":f,"data-highlighted":O?"":void 0,"aria-selected":A&&O,"data-state":A?"checked":"unchecked","aria-disabled":y||void 0,"data-disabled":y?"":void 0,tabIndex:y?void 0:-1,...R,ref:M,onFocus:composeEventHandlers(R.onFocus,()=>w(!0)),onBlur:composeEventHandlers(R.onBlur,()=>w(!1)),onClick:composeEventHandlers(R.onClick,()=>{i.current!=="mouse"&&l()}),onPointerUp:composeEventHandlers(R.onPointerUp,()=>{i.current==="mouse"&&l()}),onPointerDown:composeEventHandlers(R.onPointerDown,p=>{i.current=p.pointerType}),onPointerMove:composeEventHandlers(R.onPointerMove,p=>{var v;i.current=p.pointerType,y?(v=_.onItemLeave)==null||v.call(_):i.current==="mouse"&&p.currentTarget.focus({preventScroll:!0})}),onPointerLeave:composeEventHandlers(R.onPointerLeave,p=>{var v;p.currentTarget===document.activeElement&&((v=_.onItemLeave)==null||v.call(_))}),onKeyDown:composeEventHandlers(R.onKeyDown,p=>{var b;((b=_.searchRef)==null?void 0:b.current)!==""&&p.key===" "||(SELECTION_KEYS.includes(p.key)&&l(),p.key===" "&&p.preventDefault())})})})})});SelectItem$1.displayName=ITEM_NAME;var ITEM_TEXT_NAME="SelectItemText",SelectItemText=reactExports.forwardRef((o,u)=>{const{__scopeSelect:a,className:c,style:y,...S}=o,R=useSelectContext(ITEM_TEXT_NAME,a),m=useSelectContentContext(ITEM_TEXT_NAME,a),_=useSelectItemContext(ITEM_TEXT_NAME,a),A=useSelectNativeOptionsContext(ITEM_TEXT_NAME,a),[g,T]=reactExports.useState(null),O=useComposedRefs(u,l=>T(l),_.onItemTextChange,l=>{var p;return(p=m.itemTextRefCallback)==null?void 0:p.call(m,l,_.value,_.disabled)}),w=g==null?void 0:g.textContent,M=reactExports.useMemo(()=>jsxRuntimeExports.jsx("option",{value:_.value,disabled:_.disabled,children:w},_.value),[_.disabled,_.value,w]),{onNativeOptionAdd:f,onNativeOptionRemove:i}=A;return useLayoutEffect2(()=>(f(M),()=>i(M)),[f,i,M]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Primitive.span,{id:_.textId,...S,ref:O}),_.isSelected&&R.valueNode&&!R.valueNodeHasChildren?reactDomExports.createPortal(S.children,R.valueNode):null]})});SelectItemText.displayName=ITEM_TEXT_NAME;var ITEM_INDICATOR_NAME="SelectItemIndicator",SelectItemIndicator=reactExports.forwardRef((o,u)=>{const{__scopeSelect:a,...c}=o;return useSelectItemContext(ITEM_INDICATOR_NAME,a).isSelected?jsxRuntimeExports.jsx(Primitive.span,{"aria-hidden":!0,...c,ref:u}):null});SelectItemIndicator.displayName=ITEM_INDICATOR_NAME;var SCROLL_UP_BUTTON_NAME="SelectScrollUpButton",SelectScrollUpButton$1=reactExports.forwardRef((o,u)=>{const a=useSelectContentContext(SCROLL_UP_BUTTON_NAME,o.__scopeSelect),c=useSelectViewportContext(SCROLL_UP_BUTTON_NAME,o.__scopeSelect),[y,S]=reactExports.useState(!1),R=useComposedRefs(u,c.onScrollButtonChange);return useLayoutEffect2(()=>{if(a.viewport&&a.isPositioned){let m=function(){const A=_.scrollTop>0;S(A)};const _=a.viewport;return m(),_.addEventListener("scroll",m),()=>_.removeEventListener("scroll",m)}},[a.viewport,a.isPositioned]),y?jsxRuntimeExports.jsx(SelectScrollButtonImpl,{...o,ref:R,onAutoScroll:()=>{const{viewport:m,selectedItem:_}=a;m&&_&&(m.scrollTop=m.scrollTop-_.offsetHeight)}}):null});SelectScrollUpButton$1.displayName=SCROLL_UP_BUTTON_NAME;var SCROLL_DOWN_BUTTON_NAME="SelectScrollDownButton",SelectScrollDownButton$1=reactExports.forwardRef((o,u)=>{const a=useSelectContentContext(SCROLL_DOWN_BUTTON_NAME,o.__scopeSelect),c=useSelectViewportContext(SCROLL_DOWN_BUTTON_NAME,o.__scopeSelect),[y,S]=reactExports.useState(!1),R=useComposedRefs(u,c.onScrollButtonChange);return useLayoutEffect2(()=>{if(a.viewport&&a.isPositioned){let m=function(){const A=_.scrollHeight-_.clientHeight,g=Math.ceil(_.scrollTop)<A;S(g)};const _=a.viewport;return m(),_.addEventListener("scroll",m),()=>_.removeEventListener("scroll",m)}},[a.viewport,a.isPositioned]),y?jsxRuntimeExports.jsx(SelectScrollButtonImpl,{...o,ref:R,onAutoScroll:()=>{const{viewport:m,selectedItem:_}=a;m&&_&&(m.scrollTop=m.scrollTop+_.offsetHeight)}}):null});SelectScrollDownButton$1.displayName=SCROLL_DOWN_BUTTON_NAME;var SelectScrollButtonImpl=reactExports.forwardRef((o,u)=>{const{__scopeSelect:a,onAutoScroll:c,...y}=o,S=useSelectContentContext("SelectScrollButton",a),R=reactExports.useRef(null),m=useCollection(a),_=reactExports.useCallback(()=>{R.current!==null&&(window.clearInterval(R.current),R.current=null)},[]);return reactExports.useEffect(()=>()=>_(),[_]),useLayoutEffect2(()=>{var g;const A=m().find(T=>T.ref.current===document.activeElement);(g=A==null?void 0:A.ref.current)==null||g.scrollIntoView({block:"nearest"})},[m]),jsxRuntimeExports.jsx(Primitive.div,{"aria-hidden":!0,...y,ref:u,style:{flexShrink:0,...y.style},onPointerDown:composeEventHandlers(y.onPointerDown,()=>{R.current===null&&(R.current=window.setInterval(c,50))}),onPointerMove:composeEventHandlers(y.onPointerMove,()=>{var A;(A=S.onItemLeave)==null||A.call(S),R.current===null&&(R.current=window.setInterval(c,50))}),onPointerLeave:composeEventHandlers(y.onPointerLeave,()=>{_()})})}),SEPARATOR_NAME="SelectSeparator",SelectSeparator=reactExports.forwardRef((o,u)=>{const{__scopeSelect:a,...c}=o;return jsxRuntimeExports.jsx(Primitive.div,{"aria-hidden":!0,...c,ref:u})});SelectSeparator.displayName=SEPARATOR_NAME;var ARROW_NAME="SelectArrow",SelectArrow=reactExports.forwardRef((o,u)=>{const{__scopeSelect:a,...c}=o,y=usePopperScope(a),S=useSelectContext(ARROW_NAME,a),R=useSelectContentContext(ARROW_NAME,a);return S.open&&R.position==="popper"?jsxRuntimeExports.jsx(Arrow,{...y,...c,ref:u}):null});SelectArrow.displayName=ARROW_NAME;var BUBBLE_INPUT_NAME="SelectBubbleInput",SelectBubbleInput=reactExports.forwardRef(({__scopeSelect:o,value:u,...a},c)=>{const y=reactExports.useRef(null),S=useComposedRefs(c,y),R=usePrevious(u);return reactExports.useEffect(()=>{const m=y.current;if(!m)return;const _=window.HTMLSelectElement.prototype,g=Object.getOwnPropertyDescriptor(_,"value").set;if(R!==u&&g){const T=new Event("change",{bubbles:!0});g.call(m,u),m.dispatchEvent(T)}},[R,u]),jsxRuntimeExports.jsx(Primitive.select,{...a,style:{...VISUALLY_HIDDEN_STYLES,...a.style},ref:S,defaultValue:u})});SelectBubbleInput.displayName=BUBBLE_INPUT_NAME;function shouldShowPlaceholder(o){return o===""||o===void 0}function useTypeaheadSearch(o){const u=useCallbackRef$1(o),a=reactExports.useRef(""),c=reactExports.useRef(0),y=reactExports.useCallback(R=>{const m=a.current+R;u(m),function _(A){a.current=A,window.clearTimeout(c.current),A!==""&&(c.current=window.setTimeout(()=>_(""),1e3))}(m)},[u]),S=reactExports.useCallback(()=>{a.current="",window.clearTimeout(c.current)},[]);return reactExports.useEffect(()=>()=>window.clearTimeout(c.current),[]),[a,y,S]}function findNextItem(o,u,a){const y=u.length>1&&Array.from(u).every(A=>A===u[0])?u[0]:u,S=a?o.indexOf(a):-1;let R=wrapArray(o,Math.max(S,0));y.length===1&&(R=R.filter(A=>A!==a));const _=R.find(A=>A.textValue.toLowerCase().startsWith(y.toLowerCase()));return _!==a?_:void 0}function wrapArray(o,u){return o.map((a,c)=>o[(u+c)%o.length])}var Root2=Select$1,Trigger=SelectTrigger$1,Value=SelectValue$1,Icon=SelectIcon,Portal=SelectPortal,Content2=SelectContent$1,Viewport$1=SelectViewport,Item=SelectItem$1,ItemText=SelectItemText,ItemIndicator=SelectItemIndicator,ScrollUpButton=SelectScrollUpButton$1,ScrollDownButton=SelectScrollDownButton$1;function Select({...o}){return jsxRuntimeExports.jsx(Root2,{"data-slot":"select",...o})}function SelectValue({...o}){return jsxRuntimeExports.jsx(Value,{"data-slot":"select-value",...o})}function SelectTrigger({className:o,size:u="default",children:a,...c}){return jsxRuntimeExports.jsxs(Trigger,{"data-slot":"select-trigger","data-size":u,className:cn("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",o),...c,children:[a,jsxRuntimeExports.jsx(Icon,{asChild:!0,children:jsxRuntimeExports.jsx(ChevronDown,{className:"size-4 opacity-50"})})]})}function SelectContent({className:o,children:u,position:a="popper",...c}){return jsxRuntimeExports.jsx(Portal,{children:jsxRuntimeExports.jsxs(Content2,{"data-slot":"select-content",className:cn("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",a==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",o),position:a,...c,children:[jsxRuntimeExports.jsx(SelectScrollUpButton,{}),jsxRuntimeExports.jsx(Viewport$1,{className:cn("p-1",a==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:u}),jsxRuntimeExports.jsx(SelectScrollDownButton,{})]})})}function SelectItem({className:o,children:u,...a}){return jsxRuntimeExports.jsxs(Item,{"data-slot":"select-item",className:cn("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",o),...a,children:[jsxRuntimeExports.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:jsxRuntimeExports.jsx(ItemIndicator,{children:jsxRuntimeExports.jsx(Check,{className:"size-4"})})}),jsxRuntimeExports.jsx(ItemText,{children:u})]})}function SelectScrollUpButton({className:o,...u}){return jsxRuntimeExports.jsx(ScrollUpButton,{"data-slot":"select-scroll-up-button",className:cn("flex cursor-default items-center justify-center py-1",o),...u,children:jsxRuntimeExports.jsx(ChevronUp,{className:"size-4"})})}function SelectScrollDownButton({className:o,...u}){return jsxRuntimeExports.jsx(ScrollDownButton,{"data-slot":"select-scroll-down-button",className:cn("flex cursor-default items-center justify-center py-1",o),...u,children:jsxRuntimeExports.jsx(ChevronDown,{className:"size-4"})})}function Input({className:o,type:u,...a}){return jsxRuntimeExports.jsx("input",{type:u,"data-slot":"input",className:cn("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",o),...a})}function useCanvasRecorder(){const o=reactExports.useRef(null),u=reactExports.useRef(void 0),[a,c]=reactExports.useState(!1),[y,S]=reactExports.useState(null),R=reactExports.useCallback(async A=>{const g=o.current;if(!g){console.error("Canvas not found");return}const T=g.captureStream(60),O=new MediaRecorder(T,{mimeType:"video/mp4;codecs=avc1.42E01E"});u.current=O;const w=[];O.ondataavailable=M=>{M.data.size>0&&w.push(M.data)},O.start(),c(!0),setTimeout(()=>O.stop(),A*1e3),O.onstop=()=>{const M=new Blob(w,{type:O.mimeType});S(URL.createObjectURL(M)),T.getTracks().forEach(f=>f.stop()),c(!1)}},[]),m=reactExports.useCallback(()=>{var A;(A=u.current)==null||A.stop()},[]),_=reactExports.useCallback(()=>{S(null),c(!1)},[]);return{canvasRef:o,recording:a,videoUrl:y,start:R,stop:m,reset:_}}const MolViewer=({fileName:o,pdbText:u})=>{const[a,c]=reactExports.useState(!1),[y,S]=reactExports.useState("vy"),[R,m]=reactExports.useState(1),[_,A]=reactExports.useState(!1),g=reactExports.useRef(null),{canvasRef:T,recording:O,reset:w,start:M,videoUrl:f}=useCanvasRecorder(),i=reactExports.useCallback(b=>{if(!b)return;const h=("$3Dmol"in window?window.$3Dmol:null).createViewer(b,{canvas:T.current,antialias:!0});h.zoomTo(),h.addModel(u,"pdb"),h.setStyle({cartoon:{colorscheme:{prop:"b",gradient:"roygb",min:50,max:90}}}),h.zoomTo(),h.render(),g.current=h},[T,u]),l=(b,s)=>{var h,E;(h=g.current)==null||h.translate(b,s),(E=g.current)==null||E.render()},p=(b,s)=>{var h,E;(h=g.current)==null||h.rotate(b,s),(E=g.current)==null||E.render()},v=b=>{var s,h;(s=g.current)==null||s.zoom(b),(h=g.current)==null||h.render()};return reactExports.useEffect(()=>{const b=s=>{s.key==="ArrowUp"?l(0,20):s.key==="ArrowDown"?l(0,-20):s.key==="ArrowLeft"?l(-20,0):s.key==="ArrowRight"?l(20,0):s.key==="z"?v(1.1):s.key==="x"?v(.9):s.key==="r"?p(10,"x"):s.key==="t"&&p(-10,"x")};return window.addEventListener("keydown",b),()=>{window.removeEventListener("keydown",b)}},[]),reactExports.useEffect(()=>{const b=g.current;b&&(a?b.spin(y,R):b.spin(!1))},[y,a,R]),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{ref:i,className:"mx-auto relative w-[1024x] h-[768px]",children:jsxRuntimeExports.jsx("canvas",{ref:T,className:"border"})}),jsxRuntimeExports.jsxs("div",{className:"flex gap-4 mt-4 justify-center items-end",children:[jsxRuntimeExports.jsxs(Button,{variant:"outline",onClick:()=>c(b=>!b),children:[a?jsxRuntimeExports.jsx(SquareCheck,{}):jsxRuntimeExports.jsx(Square,{}),"Spin"]}),jsxRuntimeExports.jsxs(Select,{name:"axis",value:y,onValueChange:S,children:[jsxRuntimeExports.jsx(SelectTrigger,{children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"Axis"})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"vx",children:"VX"}),jsxRuntimeExports.jsx(SelectItem,{value:"vy",children:"VY"}),jsxRuntimeExports.jsx(SelectItem,{value:"vz",children:"VZ"})]})]}),jsxRuntimeExports.jsx("div",{className:"flex gap-1 items-center",children:jsxRuntimeExports.jsx(Input,{name:"speed",type:"number",value:R,onChange:b=>m(Math.max(1,b.target.valueAsNumber)),className:"w-20 appearance-none"})}),jsxRuntimeExports.jsx(Button,{variant:f?"destructive":"outline",onClick:()=>{f?(w(),A(!1)):M(5)},disabled:!f&&!a,children:f?"Clear":O?jsxRuntimeExports.jsx(LoaderCircle,{className:"animate-spin"}):"Record 5s"})]}),f&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Button,{variant:"link",children:jsxRuntimeExports.jsx("a",{href:f,download:o+".mp4",children:"Download"})}),jsxRuntimeExports.jsx("video",{src:f,controls:!0,className:"ml-auto mr-auto",onCanPlay:()=>A(!0),style:{display:_?"block":"none"}})]})]})},ViewerPage=({})=>{const o=useAtomValue(activeFileIdAtom),u=useAtomValue(filesDataAtom),a=useSetAtom(tabIdAtom),c=u.find(y=>y.id===o);return c?jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold",children:c.name}),jsxRuntimeExports.jsxs(Button,{variant:"outline",onClick:()=>a("upload"),className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Upload,{className:"h-4 w-4"}),"Upload Another"]})]}),jsxRuntimeExports.jsx(Card,{className:"overflow-hidden",children:jsxRuntimeExports.jsx(CardContent,{className:"p-0",children:jsxRuntimeExports.jsx(MolViewer,{fileName:c.name,pdbText:c.content})})})]}):jsxRuntimeExports.jsx("div",{className:"text-center text-gray-500",children:"No file selected"})};function useStateMachine(o,u){return reactExports.useReducer((a,c)=>u[a][c]??a,o)}var SCROLL_AREA_NAME="ScrollArea",[createScrollAreaContext,createScrollAreaScope]=createContextScope(SCROLL_AREA_NAME),[ScrollAreaProvider,useScrollAreaContext]=createScrollAreaContext(SCROLL_AREA_NAME),ScrollArea$1=reactExports.forwardRef((o,u)=>{const{__scopeScrollArea:a,type:c="hover",dir:y,scrollHideDelay:S=600,...R}=o,[m,_]=reactExports.useState(null),[A,g]=reactExports.useState(null),[T,O]=reactExports.useState(null),[w,M]=reactExports.useState(null),[f,i]=reactExports.useState(null),[l,p]=reactExports.useState(0),[v,b]=reactExports.useState(0),[s,h]=reactExports.useState(!1),[E,x]=reactExports.useState(!1),D=useComposedRefs(u,P=>_(P)),z=useDirection(y);return jsxRuntimeExports.jsx(ScrollAreaProvider,{scope:a,type:c,dir:z,scrollHideDelay:S,scrollArea:m,viewport:A,onViewportChange:g,content:T,onContentChange:O,scrollbarX:w,onScrollbarXChange:M,scrollbarXEnabled:s,onScrollbarXEnabledChange:h,scrollbarY:f,onScrollbarYChange:i,scrollbarYEnabled:E,onScrollbarYEnabledChange:x,onCornerWidthChange:p,onCornerHeightChange:b,children:jsxRuntimeExports.jsx(Primitive.div,{dir:z,...R,ref:D,style:{position:"relative","--radix-scroll-area-corner-width":l+"px","--radix-scroll-area-corner-height":v+"px",...o.style}})})});ScrollArea$1.displayName=SCROLL_AREA_NAME;var VIEWPORT_NAME="ScrollAreaViewport",ScrollAreaViewport=reactExports.forwardRef((o,u)=>{const{__scopeScrollArea:a,children:c,nonce:y,...S}=o,R=useScrollAreaContext(VIEWPORT_NAME,a),m=reactExports.useRef(null),_=useComposedRefs(u,m,R.onViewportChange);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:y}),jsxRuntimeExports.jsx(Primitive.div,{"data-radix-scroll-area-viewport":"",...S,ref:_,style:{overflowX:R.scrollbarXEnabled?"scroll":"hidden",overflowY:R.scrollbarYEnabled?"scroll":"hidden",...o.style},children:jsxRuntimeExports.jsx("div",{ref:R.onContentChange,style:{minWidth:"100%",display:"table"},children:c})})]})});ScrollAreaViewport.displayName=VIEWPORT_NAME;var SCROLLBAR_NAME="ScrollAreaScrollbar",ScrollAreaScrollbar=reactExports.forwardRef((o,u)=>{const{forceMount:a,...c}=o,y=useScrollAreaContext(SCROLLBAR_NAME,o.__scopeScrollArea),{onScrollbarXEnabledChange:S,onScrollbarYEnabledChange:R}=y,m=o.orientation==="horizontal";return reactExports.useEffect(()=>(m?S(!0):R(!0),()=>{m?S(!1):R(!1)}),[m,S,R]),y.type==="hover"?jsxRuntimeExports.jsx(ScrollAreaScrollbarHover,{...c,ref:u,forceMount:a}):y.type==="scroll"?jsxRuntimeExports.jsx(ScrollAreaScrollbarScroll,{...c,ref:u,forceMount:a}):y.type==="auto"?jsxRuntimeExports.jsx(ScrollAreaScrollbarAuto,{...c,ref:u,forceMount:a}):y.type==="always"?jsxRuntimeExports.jsx(ScrollAreaScrollbarVisible,{...c,ref:u}):null});ScrollAreaScrollbar.displayName=SCROLLBAR_NAME;var ScrollAreaScrollbarHover=reactExports.forwardRef((o,u)=>{const{forceMount:a,...c}=o,y=useScrollAreaContext(SCROLLBAR_NAME,o.__scopeScrollArea),[S,R]=reactExports.useState(!1);return reactExports.useEffect(()=>{const m=y.scrollArea;let _=0;if(m){const A=()=>{window.clearTimeout(_),R(!0)},g=()=>{_=window.setTimeout(()=>R(!1),y.scrollHideDelay)};return m.addEventListener("pointerenter",A),m.addEventListener("pointerleave",g),()=>{window.clearTimeout(_),m.removeEventListener("pointerenter",A),m.removeEventListener("pointerleave",g)}}},[y.scrollArea,y.scrollHideDelay]),jsxRuntimeExports.jsx(Presence,{present:a||S,children:jsxRuntimeExports.jsx(ScrollAreaScrollbarAuto,{"data-state":S?"visible":"hidden",...c,ref:u})})}),ScrollAreaScrollbarScroll=reactExports.forwardRef((o,u)=>{const{forceMount:a,...c}=o,y=useScrollAreaContext(SCROLLBAR_NAME,o.__scopeScrollArea),S=o.orientation==="horizontal",R=useDebounceCallback(()=>_("SCROLL_END"),100),[m,_]=useStateMachine("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return reactExports.useEffect(()=>{if(m==="idle"){const A=window.setTimeout(()=>_("HIDE"),y.scrollHideDelay);return()=>window.clearTimeout(A)}},[m,y.scrollHideDelay,_]),reactExports.useEffect(()=>{const A=y.viewport,g=S?"scrollLeft":"scrollTop";if(A){let T=A[g];const O=()=>{const w=A[g];T!==w&&(_("SCROLL"),R()),T=w};return A.addEventListener("scroll",O),()=>A.removeEventListener("scroll",O)}},[y.viewport,S,_,R]),jsxRuntimeExports.jsx(Presence,{present:a||m!=="hidden",children:jsxRuntimeExports.jsx(ScrollAreaScrollbarVisible,{"data-state":m==="hidden"?"hidden":"visible",...c,ref:u,onPointerEnter:composeEventHandlers(o.onPointerEnter,()=>_("POINTER_ENTER")),onPointerLeave:composeEventHandlers(o.onPointerLeave,()=>_("POINTER_LEAVE"))})})}),ScrollAreaScrollbarAuto=reactExports.forwardRef((o,u)=>{const a=useScrollAreaContext(SCROLLBAR_NAME,o.__scopeScrollArea),{forceMount:c,...y}=o,[S,R]=reactExports.useState(!1),m=o.orientation==="horizontal",_=useDebounceCallback(()=>{if(a.viewport){const A=a.viewport.offsetWidth<a.viewport.scrollWidth,g=a.viewport.offsetHeight<a.viewport.scrollHeight;R(m?A:g)}},10);return useResizeObserver(a.viewport,_),useResizeObserver(a.content,_),jsxRuntimeExports.jsx(Presence,{present:c||S,children:jsxRuntimeExports.jsx(ScrollAreaScrollbarVisible,{"data-state":S?"visible":"hidden",...y,ref:u})})}),ScrollAreaScrollbarVisible=reactExports.forwardRef((o,u)=>{const{orientation:a="vertical",...c}=o,y=useScrollAreaContext(SCROLLBAR_NAME,o.__scopeScrollArea),S=reactExports.useRef(null),R=reactExports.useRef(0),[m,_]=reactExports.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),A=getThumbRatio(m.viewport,m.content),g={...c,sizes:m,onSizesChange:_,hasThumb:A>0&&A<1,onThumbChange:O=>S.current=O,onThumbPointerUp:()=>R.current=0,onThumbPointerDown:O=>R.current=O};function T(O,w){return getScrollPositionFromPointer(O,R.current,m,w)}return a==="horizontal"?jsxRuntimeExports.jsx(ScrollAreaScrollbarX,{...g,ref:u,onThumbPositionChange:()=>{if(y.viewport&&S.current){const O=y.viewport.scrollLeft,w=getThumbOffsetFromScroll(O,m,y.dir);S.current.style.transform=`translate3d(${w}px, 0, 0)`}},onWheelScroll:O=>{y.viewport&&(y.viewport.scrollLeft=O)},onDragScroll:O=>{y.viewport&&(y.viewport.scrollLeft=T(O,y.dir))}}):a==="vertical"?jsxRuntimeExports.jsx(ScrollAreaScrollbarY,{...g,ref:u,onThumbPositionChange:()=>{if(y.viewport&&S.current){const O=y.viewport.scrollTop,w=getThumbOffsetFromScroll(O,m);S.current.style.transform=`translate3d(0, ${w}px, 0)`}},onWheelScroll:O=>{y.viewport&&(y.viewport.scrollTop=O)},onDragScroll:O=>{y.viewport&&(y.viewport.scrollTop=T(O))}}):null}),ScrollAreaScrollbarX=reactExports.forwardRef((o,u)=>{const{sizes:a,onSizesChange:c,...y}=o,S=useScrollAreaContext(SCROLLBAR_NAME,o.__scopeScrollArea),[R,m]=reactExports.useState(),_=reactExports.useRef(null),A=useComposedRefs(u,_,S.onScrollbarXChange);return reactExports.useEffect(()=>{_.current&&m(getComputedStyle(_.current))},[_]),jsxRuntimeExports.jsx(ScrollAreaScrollbarImpl,{"data-orientation":"horizontal",...y,ref:A,sizes:a,style:{bottom:0,left:S.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:S.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":getThumbSize(a)+"px",...o.style},onThumbPointerDown:g=>o.onThumbPointerDown(g.x),onDragScroll:g=>o.onDragScroll(g.x),onWheelScroll:(g,T)=>{if(S.viewport){const O=S.viewport.scrollLeft+g.deltaX;o.onWheelScroll(O),isScrollingWithinScrollbarBounds(O,T)&&g.preventDefault()}},onResize:()=>{_.current&&S.viewport&&R&&c({content:S.viewport.scrollWidth,viewport:S.viewport.offsetWidth,scrollbar:{size:_.current.clientWidth,paddingStart:toInt(R.paddingLeft),paddingEnd:toInt(R.paddingRight)}})}})}),ScrollAreaScrollbarY=reactExports.forwardRef((o,u)=>{const{sizes:a,onSizesChange:c,...y}=o,S=useScrollAreaContext(SCROLLBAR_NAME,o.__scopeScrollArea),[R,m]=reactExports.useState(),_=reactExports.useRef(null),A=useComposedRefs(u,_,S.onScrollbarYChange);return reactExports.useEffect(()=>{_.current&&m(getComputedStyle(_.current))},[_]),jsxRuntimeExports.jsx(ScrollAreaScrollbarImpl,{"data-orientation":"vertical",...y,ref:A,sizes:a,style:{top:0,right:S.dir==="ltr"?0:void 0,left:S.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":getThumbSize(a)+"px",...o.style},onThumbPointerDown:g=>o.onThumbPointerDown(g.y),onDragScroll:g=>o.onDragScroll(g.y),onWheelScroll:(g,T)=>{if(S.viewport){const O=S.viewport.scrollTop+g.deltaY;o.onWheelScroll(O),isScrollingWithinScrollbarBounds(O,T)&&g.preventDefault()}},onResize:()=>{_.current&&S.viewport&&R&&c({content:S.viewport.scrollHeight,viewport:S.viewport.offsetHeight,scrollbar:{size:_.current.clientHeight,paddingStart:toInt(R.paddingTop),paddingEnd:toInt(R.paddingBottom)}})}})}),[ScrollbarProvider,useScrollbarContext]=createScrollAreaContext(SCROLLBAR_NAME),ScrollAreaScrollbarImpl=reactExports.forwardRef((o,u)=>{const{__scopeScrollArea:a,sizes:c,hasThumb:y,onThumbChange:S,onThumbPointerUp:R,onThumbPointerDown:m,onThumbPositionChange:_,onDragScroll:A,onWheelScroll:g,onResize:T,...O}=o,w=useScrollAreaContext(SCROLLBAR_NAME,a),[M,f]=reactExports.useState(null),i=useComposedRefs(u,D=>f(D)),l=reactExports.useRef(null),p=reactExports.useRef(""),v=w.viewport,b=c.content-c.viewport,s=useCallbackRef$1(g),h=useCallbackRef$1(_),E=useDebounceCallback(T,10);function x(D){if(l.current){const z=D.clientX-l.current.left,P=D.clientY-l.current.top;A({x:z,y:P})}}return reactExports.useEffect(()=>{const D=z=>{const P=z.target;(M==null?void 0:M.contains(P))&&s(z,b)};return document.addEventListener("wheel",D,{passive:!1}),()=>document.removeEventListener("wheel",D,{passive:!1})},[v,M,b,s]),reactExports.useEffect(h,[c,h]),useResizeObserver(M,E),useResizeObserver(w.content,E),jsxRuntimeExports.jsx(ScrollbarProvider,{scope:a,scrollbar:M,hasThumb:y,onThumbChange:useCallbackRef$1(S),onThumbPointerUp:useCallbackRef$1(R),onThumbPositionChange:h,onThumbPointerDown:useCallbackRef$1(m),children:jsxRuntimeExports.jsx(Primitive.div,{...O,ref:i,style:{position:"absolute",...O.style},onPointerDown:composeEventHandlers(o.onPointerDown,D=>{D.button===0&&(D.target.setPointerCapture(D.pointerId),l.current=M.getBoundingClientRect(),p.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",w.viewport&&(w.viewport.style.scrollBehavior="auto"),x(D))}),onPointerMove:composeEventHandlers(o.onPointerMove,x),onPointerUp:composeEventHandlers(o.onPointerUp,D=>{const z=D.target;z.hasPointerCapture(D.pointerId)&&z.releasePointerCapture(D.pointerId),document.body.style.webkitUserSelect=p.current,w.viewport&&(w.viewport.style.scrollBehavior=""),l.current=null})})})}),THUMB_NAME="ScrollAreaThumb",ScrollAreaThumb=reactExports.forwardRef((o,u)=>{const{forceMount:a,...c}=o,y=useScrollbarContext(THUMB_NAME,o.__scopeScrollArea);return jsxRuntimeExports.jsx(Presence,{present:a||y.hasThumb,children:jsxRuntimeExports.jsx(ScrollAreaThumbImpl,{ref:u,...c})})}),ScrollAreaThumbImpl=reactExports.forwardRef((o,u)=>{const{__scopeScrollArea:a,style:c,...y}=o,S=useScrollAreaContext(THUMB_NAME,a),R=useScrollbarContext(THUMB_NAME,a),{onThumbPositionChange:m}=R,_=useComposedRefs(u,T=>R.onThumbChange(T)),A=reactExports.useRef(void 0),g=useDebounceCallback(()=>{A.current&&(A.current(),A.current=void 0)},100);return reactExports.useEffect(()=>{const T=S.viewport;if(T){const O=()=>{if(g(),!A.current){const w=addUnlinkedScrollListener(T,m);A.current=w,m()}};return m(),T.addEventListener("scroll",O),()=>T.removeEventListener("scroll",O)}},[S.viewport,g,m]),jsxRuntimeExports.jsx(Primitive.div,{"data-state":R.hasThumb?"visible":"hidden",...y,ref:_,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...c},onPointerDownCapture:composeEventHandlers(o.onPointerDownCapture,T=>{const w=T.target.getBoundingClientRect(),M=T.clientX-w.left,f=T.clientY-w.top;R.onThumbPointerDown({x:M,y:f})}),onPointerUp:composeEventHandlers(o.onPointerUp,R.onThumbPointerUp)})});ScrollAreaThumb.displayName=THUMB_NAME;var CORNER_NAME="ScrollAreaCorner",ScrollAreaCorner=reactExports.forwardRef((o,u)=>{const a=useScrollAreaContext(CORNER_NAME,o.__scopeScrollArea),c=!!(a.scrollbarX&&a.scrollbarY);return a.type!=="scroll"&&c?jsxRuntimeExports.jsx(ScrollAreaCornerImpl,{...o,ref:u}):null});ScrollAreaCorner.displayName=CORNER_NAME;var ScrollAreaCornerImpl=reactExports.forwardRef((o,u)=>{const{__scopeScrollArea:a,...c}=o,y=useScrollAreaContext(CORNER_NAME,a),[S,R]=reactExports.useState(0),[m,_]=reactExports.useState(0),A=!!(S&&m);return useResizeObserver(y.scrollbarX,()=>{var T;const g=((T=y.scrollbarX)==null?void 0:T.offsetHeight)||0;y.onCornerHeightChange(g),_(g)}),useResizeObserver(y.scrollbarY,()=>{var T;const g=((T=y.scrollbarY)==null?void 0:T.offsetWidth)||0;y.onCornerWidthChange(g),R(g)}),A?jsxRuntimeExports.jsx(Primitive.div,{...c,ref:u,style:{width:S,height:m,position:"absolute",right:y.dir==="ltr"?0:void 0,left:y.dir==="rtl"?0:void 0,bottom:0,...o.style}}):null});function toInt(o){return o?parseInt(o,10):0}function getThumbRatio(o,u){const a=o/u;return isNaN(a)?0:a}function getThumbSize(o){const u=getThumbRatio(o.viewport,o.content),a=o.scrollbar.paddingStart+o.scrollbar.paddingEnd,c=(o.scrollbar.size-a)*u;return Math.max(c,18)}function getScrollPositionFromPointer(o,u,a,c="ltr"){const y=getThumbSize(a),S=y/2,R=u||S,m=y-R,_=a.scrollbar.paddingStart+R,A=a.scrollbar.size-a.scrollbar.paddingEnd-m,g=a.content-a.viewport,T=c==="ltr"?[0,g]:[g*-1,0];return linearScale([_,A],T)(o)}function getThumbOffsetFromScroll(o,u,a="ltr"){const c=getThumbSize(u),y=u.scrollbar.paddingStart+u.scrollbar.paddingEnd,S=u.scrollbar.size-y,R=u.content-u.viewport,m=S-c,_=a==="ltr"?[0,R]:[R*-1,0],A=clamp$1(o,_);return linearScale([0,R],[0,m])(A)}function linearScale(o,u){return a=>{if(o[0]===o[1]||u[0]===u[1])return u[0];const c=(u[1]-u[0])/(o[1]-o[0]);return u[0]+c*(a-o[0])}}function isScrollingWithinScrollbarBounds(o,u){return o>0&&o<u}var addUnlinkedScrollListener=(o,u=()=>{})=>{let a={left:o.scrollLeft,top:o.scrollTop},c=0;return function y(){const S={left:o.scrollLeft,top:o.scrollTop},R=a.left!==S.left,m=a.top!==S.top;(R||m)&&u(),a=S,c=window.requestAnimationFrame(y)}(),()=>window.cancelAnimationFrame(c)};function useDebounceCallback(o,u){const a=useCallbackRef$1(o),c=reactExports.useRef(0);return reactExports.useEffect(()=>()=>window.clearTimeout(c.current),[]),reactExports.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(a,u)},[a,u])}function useResizeObserver(o,u){const a=useCallbackRef$1(u);useLayoutEffect2(()=>{let c=0;if(o){const y=new ResizeObserver(()=>{cancelAnimationFrame(c),c=window.requestAnimationFrame(a)});return y.observe(o),()=>{window.cancelAnimationFrame(c),y.unobserve(o)}}},[o,a])}var Root=ScrollArea$1,Viewport=ScrollAreaViewport,Corner=ScrollAreaCorner;function ScrollArea({className:o,children:u,...a}){return jsxRuntimeExports.jsxs(Root,{"data-slot":"scroll-area",className:cn("relative",o),...a,children:[jsxRuntimeExports.jsx(Viewport,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:u}),jsxRuntimeExports.jsx(ScrollBar,{}),jsxRuntimeExports.jsx(Corner,{})]})}function ScrollBar({className:o,orientation:u="vertical",...a}){return jsxRuntimeExports.jsx(ScrollAreaScrollbar,{"data-slot":"scroll-area-scrollbar",orientation:u,className:cn("flex touch-none p-px transition-colors select-none",u==="vertical"&&"h-full w-2.5 border-l border-l-transparent",u==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",o),...a,children:jsxRuntimeExports.jsx(ScrollAreaThumb,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}const HistoryList=({history:o,onSelectFile:u,onDeleteFile:a,onClearHistory:c,onRenameFile:y})=>{const S=M=>M<1024?M+" B":M<1048576?(M/1024).toFixed(1)+" KB":(M/1048576).toFixed(1)+" MB",R=M=>{const f=new Date(M);return f.toLocaleDateString()+" "+f.toLocaleTimeString()},[m,_]=reactExports.useState(null),[A,g]=reactExports.useState(""),T=(M,f)=>{_(M),g(f)},O=()=>{_(null),g("")},w=M=>{A.trim()&&A!==M.name&&y(M,A),_(null),g("")};return o.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-10",children:[jsxRuntimeExports.jsx(Clock,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium",children:"No Upload History"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Your uploaded PDB files will appear here"})]}):jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium",children:"Upload History"}),jsxRuntimeExports.jsxs(Button,{variant:"destructive",size:"sm",onClick:c,className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Trash2,{className:"h-4 w-4"}),"Clear History"]})]}),jsxRuntimeExports.jsx(ScrollArea,{className:"max-h-[75vh] rounded-md border",children:jsxRuntimeExports.jsx("div",{className:"p-4 space-y-4",children:o.sort((M,f)=>new Date(f.storedAt).getTime()-new Date(M.storedAt).getTime()).map((M,f)=>jsxRuntimeExports.jsxs("div",{className:"flex items-center p-3 rounded-lg border hover:bg-accent transition-colors group",children:[jsxRuntimeExports.jsx("div",{className:"mr-4 p-2 rounded-full bg-primary/10",children:jsxRuntimeExports.jsx(FileText,{className:"h-6 w-6 text-primary"})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[m===f?jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Input,{value:A,onChange:i=>g(i.target.value),className:"h-8",autoFocus:!0,onKeyDown:i=>{i.key==="Enter"&&!i.nativeEvent.isComposing&&w(M),i.key==="Escape"&&O()}}),jsxRuntimeExports.jsx(Button,{size:"icon",variant:"ghost",onClick:()=>w(M),className:"h-8 w-8",children:jsxRuntimeExports.jsx(Check,{className:"h-4 w-4"})}),jsxRuntimeExports.jsx(Button,{size:"icon",variant:"ghost",onClick:O,className:"h-8 w-8",children:jsxRuntimeExports.jsx(X,{className:"h-4 w-4"})})]}):jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("p",{className:"font-medium truncate cursor-pointer",onClick:()=>u(M),children:M.name}),jsxRuntimeExports.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[jsxRuntimeExports.jsx(Button,{size:"icon",variant:"ghost",onClick:i=>{i.stopPropagation(),T(f,M.name)},className:"h-8 w-8",children:jsxRuntimeExports.jsx(Pencil,{className:"h-4 w-4"})}),jsxRuntimeExports.jsx(Button,{size:"icon",variant:"ghost",onClick:i=>{i.stopPropagation(),a(M)},className:"h-8 w-8 text-destructive",children:jsxRuntimeExports.jsx(Trash2,{className:"h-4 w-4"})})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex text-xs text-muted-foreground mt-1",children:[jsxRuntimeExports.jsx("span",{className:"mr-4",children:S(M.size)}),jsxRuntimeExports.jsx("span",{children:R(M.storedAt)})]})]})]},M.name+f))})})]})},HistoryPage=({})=>{const o=useSetAtom(tabIdAtom),u=useSetAtom(activeFileIdAtom),[a,c]=useAtom(filesDataAtom),y=_=>{u(_.id),o(TabId.viewer)},S=(_,A)=>{c(g=>g.map(T=>T.id===_.id?{...T,name:A}:T))},R=_=>{c(A=>A.filter(g=>g.id!==_.id))},m=()=>{c([])};return jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsx(HistoryList,{history:a,onSelectFile:y,onClearHistory:m,onDeleteFile:R,onRenameFile:S})})})};var _3Dmol$1={exports:{}};/*!
 * 3dmol v2.4.2
 * JavaScript/TypeScript molecular visualization library
 * Author: David Koes and contributors
 */var _3Dmol=_3Dmol$1.exports,hasRequired_3Dmol;function require_3Dmol(){return hasRequired_3Dmol||(hasRequired_3Dmol=1,function(module,exports){(function(u,a){module.exports=a()})(_3Dmol,()=>(()=>{var __webpack_modules__={"./node_modules/iobuffer/lib-esm/IOBuffer.js":(o,u,a)=>{a.r(u),a.d(u,{IOBuffer:()=>m});var c=a("./node_modules/iobuffer/lib-esm/text.browser.js");const y=1024*8,S=(()=>{const _=new Uint8Array(4),A=new Uint32Array(_.buffer);return!((A[0]=1)&_[0])})(),R={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class m{constructor(A=y,g={}){let T=!1;typeof A=="number"?A=new ArrayBuffer(A):(T=!0,this.lastWrittenByte=A.byteLength);const O=g.offset?g.offset>>>0:0,w=A.byteLength-O;let M=O;(ArrayBuffer.isView(A)||A instanceof m)&&(A.byteLength!==A.buffer.byteLength&&(M=A.byteOffset+O),A=A.buffer),T?this.lastWrittenByte=w:this.lastWrittenByte=0,this.buffer=A,this.length=w,this.byteLength=w,this.byteOffset=M,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,M,w),this._mark=0,this._marks=[]}available(A=1){return this.offset+A<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(A=1){return this.offset+=A,this}back(A=1){return this.offset-=A,this}seek(A){return this.offset=A,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const A=this._marks.pop();if(A===void 0)throw new Error("Mark stack empty");return this.seek(A),this}rewind(){return this.offset=0,this}ensureAvailable(A=1){if(!this.available(A)){const T=(this.offset+A)*2,O=new Uint8Array(T);O.set(new Uint8Array(this.buffer)),this.buffer=O.buffer,this.length=this.byteLength=T,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(A=1){return this.readArray(A,"uint8")}readArray(A,g){const T=R[g].BYTES_PER_ELEMENT*A,O=this.byteOffset+this.offset,w=this.buffer.slice(O,O+T);if(this.littleEndian===S&&g!=="uint8"&&g!=="int8"){const f=new Uint8Array(this.buffer.slice(O,O+T));f.reverse();const i=new R[g](f.buffer);return this.offset+=T,i.reverse(),i}const M=new R[g](w);return this.offset+=T,M}readInt16(){const A=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,A}readUint16(){const A=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,A}readInt32(){const A=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,A}readUint32(){const A=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,A}readFloat32(){const A=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,A}readFloat64(){const A=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,A}readBigInt64(){const A=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,A}readBigUint64(){const A=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,A}readChar(){return String.fromCharCode(this.readInt8())}readChars(A=1){let g="";for(let T=0;T<A;T++)g+=this.readChar();return g}readUtf8(A=1){return(0,c.decode)(this.readBytes(A))}decodeText(A=1,g="utf-8"){return(0,c.decode)(this.readBytes(A),g)}writeBoolean(A){return this.writeUint8(A?255:0),this}writeInt8(A){return this.ensureAvailable(1),this._data.setInt8(this.offset++,A),this._updateLastWrittenByte(),this}writeUint8(A){return this.ensureAvailable(1),this._data.setUint8(this.offset++,A),this._updateLastWrittenByte(),this}writeByte(A){return this.writeUint8(A)}writeBytes(A){this.ensureAvailable(A.length);for(let g=0;g<A.length;g++)this._data.setUint8(this.offset++,A[g]);return this._updateLastWrittenByte(),this}writeInt16(A){return this.ensureAvailable(2),this._data.setInt16(this.offset,A,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(A){return this.ensureAvailable(2),this._data.setUint16(this.offset,A,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(A){return this.ensureAvailable(4),this._data.setInt32(this.offset,A,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(A){return this.ensureAvailable(4),this._data.setUint32(this.offset,A,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(A){return this.ensureAvailable(4),this._data.setFloat32(this.offset,A,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(A){return this.ensureAvailable(8),this._data.setFloat64(this.offset,A,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(A){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,A,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(A){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,A,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(A){return this.writeUint8(A.charCodeAt(0))}writeChars(A){for(let g=0;g<A.length;g++)this.writeUint8(A.charCodeAt(g));return this}writeUtf8(A){return this.writeBytes((0,c.encode)(A))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}},"./node_modules/iobuffer/lib-esm/text-encoding-polyfill.js":function(){(function(o){if(o.TextEncoder&&o.TextDecoder)return!1;function u(c="utf-8"){if(c!=="utf-8")throw new RangeError(`Failed to construct 'TextEncoder': The encoding label provided ('${c}') is invalid.`)}Object.defineProperty(u.prototype,"encoding",{value:"utf-8"}),u.prototype.encode=function(c,y={stream:!1}){if(y.stream)throw new Error("Failed to encode: the 'stream' option is unsupported.");let S=0;const R=c.length;let m=0,_=Math.max(32,R+(R>>1)+7),A=new Uint8Array(_>>3<<3);for(;S<R;){let g=c.charCodeAt(S++);if(g>=55296&&g<=56319){if(S<R){const T=c.charCodeAt(S);(T&64512)===56320&&(++S,g=((g&1023)<<10)+(T&1023)+65536)}if(g>=55296&&g<=56319)continue}if(m+4>A.length){_+=8,_*=1+S/c.length*2,_=_>>3<<3;const T=new Uint8Array(_);T.set(A),A=T}if((g&4294967168)===0){A[m++]=g;continue}else if((g&4294965248)===0)A[m++]=g>>6&31|192;else if((g&4294901760)===0)A[m++]=g>>12&15|224,A[m++]=g>>6&63|128;else if((g&4292870144)===0)A[m++]=g>>18&7|240,A[m++]=g>>12&63|128,A[m++]=g>>6&63|128;else continue;A[m++]=g&63|128}return A.slice(0,m)};function a(c="utf-8",y={fatal:!1}){if(c!=="utf-8")throw new RangeError(`Failed to construct 'TextDecoder': The encoding label provided ('${c}') is invalid.`);if(y.fatal)throw new Error("Failed to construct 'TextDecoder': the 'fatal' option is unsupported.")}Object.defineProperty(a.prototype,"encoding",{value:"utf-8"}),Object.defineProperty(a.prototype,"fatal",{value:!1}),Object.defineProperty(a.prototype,"ignoreBOM",{value:!1}),a.prototype.decode=function(c,y={stream:!1}){if(y.stream)throw new Error("Failed to decode: the 'stream' option is unsupported.");const S=new Uint8Array(c);let R=0;const m=S.length,_=[];for(;R<m;){const A=S[R++];if(A===0)break;if((A&128)===0)_.push(A);else if((A&224)===192){const g=S[R++]&63;_.push((A&31)<<6|g)}else if((A&240)===224){const g=S[R++]&63,T=S[R++]&63;_.push((A&31)<<12|g<<6|T)}else if((A&248)===240){const g=S[R++]&63,T=S[R++]&63,O=S[R++]&63;let w=(A&7)<<18|g<<12|T<<6|O;w>65535&&(w-=65536,_.push(w>>>10&1023|55296),w=56320|w&1023),_.push(w)}}return String.fromCharCode.apply(null,_)},o.TextEncoder=u,o.TextDecoder=a})(typeof window<"u"?window:typeof self<"u"?self:this)},"./node_modules/iobuffer/lib-esm/text.browser.js":(o,u,a)=>{a.r(u),a.d(u,{decode:()=>c,encode:()=>S}),a("./node_modules/iobuffer/lib-esm/text-encoding-polyfill.js");function c(R,m="utf8"){return new TextDecoder(m).decode(R)}const y=new TextEncoder;function S(R){return y.encode(R)}},"./node_modules/netcdfjs/lib-esm/data.js":(o,u,a)=>{a.r(u),a.d(u,{nonRecord:()=>y,record:()=>S});var c=a("./node_modules/netcdfjs/lib-esm/types.js");function y(R,m){const _=(0,c.str2num)(m.type),A=m.size/(0,c.num2bytes)(_),g=new Array(A);for(let T=0;T<A;T++)g[T]=(0,c.readType)(R,_,1);return g}function S(R,m,_){const A=(0,c.str2num)(m.type),g=m.size?m.size/(0,c.num2bytes)(A):1,T=_.length,O=new Array(T),w=_.recordStep;if(w)for(let M=0;M<T;M++){const f=R.offset;O[M]=(0,c.readType)(R,A,g),R.seek(f+w)}else throw new Error("recordDimension.recordStep is undefined");return O}},"./node_modules/netcdfjs/lib-esm/header.js":(o,u,a)=>{a.r(u),a.d(u,{header:()=>g});var c=a("./node_modules/netcdfjs/lib-esm/types.js"),y=a("./node_modules/netcdfjs/lib-esm/utils.js");const S=0,R=10,m=11,_=12,A=0;function g(M,f){const i={version:f},l={length:M.readUint32()},p=T(M);Array.isArray(p)||(l.id=p.recordId,l.name=p.recordName,i.dimensions=p.dimensions),i.globalAttributes=O(M);const v=w(M,l==null?void 0:l.id,f);return Array.isArray(v)||(i.variables=v.variables,l.recordStep=v.recordStep),i.recordDimension=l,i}function T(M){const f={};let i,l;const p=M.readUint32();let v;if(p===S)return(0,y.notNetcdf)(M.readUint32()!==S,"wrong empty tag for list of dimensions"),[];{(0,y.notNetcdf)(p!==R,"wrong tag for list of dimensions");const b=M.readUint32();v=new Array(b);for(let s=0;s<b;s++){const h=(0,y.readName)(M),E=M.readUint32();E===A&&(i=s,l=h),v[s]={name:h,size:E}}}return i!==void 0&&(f.recordId=i),l!==void 0&&(f.recordName=l),f.dimensions=v,f}function O(M){const f=M.readUint32();let i;if(f===S)return(0,y.notNetcdf)(M.readUint32()!==S,"wrong empty tag for list of attributes"),[];{(0,y.notNetcdf)(f!==_,"wrong tag for list of attributes");const l=M.readUint32();i=new Array(l);for(let p=0;p<l;p++){const v=(0,y.readName)(M),b=M.readUint32();(0,y.notNetcdf)(b<1||b>6,`non valid type ${b}`);const s=M.readUint32(),h=(0,c.readType)(M,b,s);(0,y.padding)(M),i[p]={name:v,type:(0,c.num2str)(b),value:h}}}return i}function w(M,f,i){const l=M.readUint32();let p=0,v;if(l===S)return(0,y.notNetcdf)(M.readUint32()!==S,"wrong empty tag for list of variables"),[];{(0,y.notNetcdf)(l!==m,"wrong tag for list of variables");const b=M.readUint32();v=new Array(b);for(let s=0;s<b;s++){const h=(0,y.readName)(M),E=M.readUint32(),x=new Array(E);for(let K=0;K<E;K++)x[K]=M.readUint32();const D=O(M),z=M.readUint32();(0,y.notNetcdf)(z<1&&z>6,`non valid type ${z}`);const P=M.readUint32();let G=M.readUint32();i===2&&((0,y.notNetcdf)(G>0,"offsets larger than 4GB not supported"),G=M.readUint32());let B=!1;typeof f<"u"&&x[0]===f&&(p+=P,B=!0),v[s]={name:h,dimensions:x,attributes:D,type:(0,c.num2str)(z),size:P,offset:G,record:B}}}return{variables:v,recordStep:p}}},"./node_modules/netcdfjs/lib-esm/index.js":(o,u,a)=>{a.r(u),a.d(u,{NetCDFReader:()=>c.NetCDFReader});var c=a("./node_modules/netcdfjs/lib-esm/parser.js")},"./node_modules/netcdfjs/lib-esm/parser.js":(o,u,a)=>{a.r(u),a.d(u,{NetCDFReader:()=>_});var c=a("./node_modules/iobuffer/lib-esm/IOBuffer.js"),y=a("./node_modules/netcdfjs/lib-esm/data.js"),S=a("./node_modules/netcdfjs/lib-esm/header.js"),R=a("./node_modules/netcdfjs/lib-esm/toString.js"),m=a("./node_modules/netcdfjs/lib-esm/utils.js");class _{constructor(g){this.toString=R.toString;const T=new c.IOBuffer(g);T.setBigEndian(),(0,m.notNetcdf)(T.readChars(3)!=="CDF","should start with CDF");const O=T.readByte();(0,m.notNetcdf)(O>2,"unknown version"),this.header=(0,S.header)(T,O),this.buffer=T}get version(){return this.header.version===1?"classic format":"64-bit offset format"}get recordDimension(){return this.header.recordDimension}get dimensions(){return this.header.dimensions}get globalAttributes(){return this.header.globalAttributes}getAttribute(g){const T=this.globalAttributes.find(O=>O.name===g);return T?T.value:null}getDataVariableAsString(g){const T=this.getDataVariable(g);return T?T.join(""):null}get variables(){return this.header.variables}getDataVariable(g){let T;if(typeof g=="string"?T=this.header.variables.find(O=>O.name===g):T=g,T===void 0)throw new Error("Not a valid NetCDF v3.x file: variable not found");return this.buffer.seek(T.offset),T.record?(0,y.record)(this.buffer,T,this.header.recordDimension):(0,y.nonRecord)(this.buffer,T)}dataVariableExists(g){return this.header.variables.find(O=>O.name===g)!==void 0}attributeExists(g){return this.globalAttributes.find(O=>O.name===g)!==void 0}}},"./node_modules/netcdfjs/lib-esm/toString.js":(o,u,a)=>{a.r(u),a.d(u,{toString:()=>c});function c(){const y=[];y.push("DIMENSIONS");for(const R of this.dimensions)y.push(`  ${R.name.padEnd(30)} = size: ${R.size}`);y.push(""),y.push("GLOBAL ATTRIBUTES");for(const R of this.globalAttributes)y.push(`  ${R.name.padEnd(30)} = ${R.value}`);const S=JSON.parse(JSON.stringify(this.variables));y.push(""),y.push("VARIABLES:");for(const R of S){R.value=this.getDataVariable(R);let m=JSON.stringify(R.value);m.length>50&&(m=m.substring(0,50)),isNaN(R.value.length)||(m+=` (length: ${R.value.length})`),y.push(`  ${R.name.padEnd(30)} = ${m}`)}return y.join(`
`)}},"./node_modules/netcdfjs/lib-esm/types.js":(o,u,a)=>{a.r(u),a.d(u,{num2bytes:()=>S,num2str:()=>y,readType:()=>_,str2num:()=>R});const c={BYTE:1,CHAR:2,SHORT:3,INT:4,FLOAT:5,DOUBLE:6};function y(g){switch(Number(g)){case c.BYTE:return"byte";case c.CHAR:return"char";case c.SHORT:return"short";case c.INT:return"int";case c.FLOAT:return"float";case c.DOUBLE:return"double";default:return"undefined"}}function S(g){switch(Number(g)){case c.BYTE:return 1;case c.CHAR:return 1;case c.SHORT:return 2;case c.INT:return 4;case c.FLOAT:return 4;case c.DOUBLE:return 8;default:return-1}}function R(g){switch(String(g)){case"byte":return c.BYTE;case"char":return c.CHAR;case"short":return c.SHORT;case"int":return c.INT;case"float":return c.FLOAT;case"double":return c.DOUBLE;default:return-1}}function m(g,T){if(g!==1){const O=new Array(g);for(let w=0;w<g;w++)O[w]=T();return O}else return T()}function _(g,T,O){switch(T){case c.BYTE:return Array.from(g.readBytes(O));case c.CHAR:return A(g.readChars(O));case c.SHORT:return m(O,g.readInt16.bind(g));case c.INT:return m(O,g.readInt32.bind(g));case c.FLOAT:return m(O,g.readFloat32.bind(g));case c.DOUBLE:return m(O,g.readFloat64.bind(g));default:throw new Error(`non valid type ${T}`)}}function A(g){return g.charCodeAt(g.length-1)===0?g.substring(0,g.length-1):g}},"./node_modules/netcdfjs/lib-esm/utils.js":(o,u,a)=>{a.r(u),a.d(u,{notNetcdf:()=>c,padding:()=>y,readName:()=>S});function c(R,m){if(R)throw new TypeError(`Not a valid NetCDF v3.x file: ${m}`)}function y(R){R.offset%4!==0&&R.skip(4-R.offset%4)}function S(R){const m=R.readUint32(),_=R.readChars(m);return y(R),_}},"./src/WebGL/shaders/lib/basic/basic.frag":(o,u,a)=>{a.r(u),a.d(u,{default:()=>c});const c=`uniform mat4 viewMatrix;
uniform float opacity;
uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
varying vec3 vColor;
//DEFINEFRAGCOLOR
void main() {
    gl_FragColor = vec4( vColor, opacity );
    float depth = gl_FragCoord.z / gl_FragCoord.w;
    float fogFactor = smoothstep( fogNear, fogFar, depth );
    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
}`},"./src/WebGL/shaders/lib/basic/basic.vert":(o,u,a)=>{a.r(u),a.d(u,{default:()=>c});const c=`uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;

attribute vec3 position;
attribute vec3 color;

varying vec3 vColor;

void main() {

    vColor = color;
    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
    gl_Position = projectionMatrix * mvPosition;

}`},"./src/WebGL/shaders/lib/blur/blur.frag":(o,u,a)=>{a.r(u),a.d(u,{default:()=>c});const c=`const float INV_TOTAL_SAMPLES_FACTOR = 1.0 / 9.0;
uniform highp sampler2D inTex;
varying highp vec2 vTexCoords;
    
void main() {
 
 vec2 texelSize = 1.0 / vec2(textureSize(inTex,0));
 float blurred_visibility_factor = 0.0f;
 for (int t = -1; t <= 1; ++t) {
  for (int s = -1; s <= 1; ++s) {
   vec2 offset = vec2(float(s), float(t)) * texelSize;
   blurred_visibility_factor += texture2D(inTex, vTexCoords + offset).r;
  }
 }
    
 gl_FragDepthEXT = blurred_visibility_factor * INV_TOTAL_SAMPLES_FACTOR;
 
}`},"./src/WebGL/shaders/lib/blur/blur.vert":(o,u,a)=>{a.r(u),a.d(u,{default:()=>c});const c=`attribute vec2 vertexPosition;
varying highp vec2 vTexCoords;
const vec2 scale = vec2(0.5, 0.5);

void main() {
   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range
   gl_Position = vec4(vertexPosition, 0.0, 1.0);
}
        `},"./src/WebGL/shaders/lib/instanced/instanced.frag":(o,u,a)=>{a.r(u),a.d(u,{default:()=>c});const c=`uniform mat4 viewMatrix;
uniform float opacity;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
#ifdef SHADED
uniform highp sampler2D shading;
#endif
varying vec3 vLightFront;
varying vec3 vColor;
//DEFINEFRAGCOLOR

void main() {

    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );

    #ifndef WIREFRAME
    gl_FragColor.xyz *= vLightFront;
    #endif

#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    vColor *= shadowFactor;
#endif
    gl_FragColor = gl_FragColor * vec4( vColor, opacity );
    float depth = gl_FragCoord.z / gl_FragCoord.w;

    float fogFactor = smoothstep( fogNear, fogFar, depth );

    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );

}


`},"./src/WebGL/shaders/lib/instanced/instanced.vert":(o,u,a)=>{a.r(u),a.d(u,{default:()=>c});const c=`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 offset;
attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;
attribute float radius;

varying vec3 vColor;
varying vec3 vLightFront;

void main() {

    vColor = color;

    vec3 objectNormal = normal;
    vec3 transformedNormal = normalMatrix * objectNormal;
    vec4 mvPosition = modelViewMatrix * vec4( position * radius + offset, 1.0 );

    vLightFront = vec3( 0.0 );

    transformedNormal = normalize( transformedNormal );

    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vec3 dirVector = normalize( lDirection.xyz );
    float dotProduct = dot( transformedNormal, dirVector );
    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );

    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;

    gl_Position = projectionMatrix * mvPosition;
}

`},"./src/WebGL/shaders/lib/lambert/lambert.frag":(o,u,a)=>{a.r(u),a.d(u,{default:()=>c});const c=`uniform mat4 viewMatrix;
uniform float opacity;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
#ifdef SHADED
uniform highp sampler2D shading;
#endif
varying vec3 vLightFront;
varying vec3 vColor;
//DEFINEFRAGCOLOR

void main() {

    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );

    #ifndef WIREFRAME
    gl_FragColor.xyz *= vLightFront;
    #endif
#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    vColor *= shadowFactor;
#endif
    gl_FragColor = gl_FragColor * vec4( vColor, opacity );
    float depth = gl_FragCoord.z / gl_FragCoord.w;

    float fogFactor = smoothstep( fogNear, fogFar, depth );

    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );

}`},"./src/WebGL/shaders/lib/lambert/lambert.vert":(o,u,a)=>{a.r(u),a.d(u,{default:()=>c});const c=`
uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec3 vColor;
varying vec3 vLightFront;

void main() {

    vColor = color;

    vec3 objectNormal = normal;
    vec3 transformedNormal = normalMatrix * objectNormal;
    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );

    vLightFront = vec3( 0.0 );

    transformedNormal = normalize( transformedNormal );

    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vec3 dirVector = normalize( lDirection.xyz );
    float dotProduct = dot( transformedNormal, dirVector );
    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );

    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;

    gl_Position = projectionMatrix * mvPosition;
}`},"./src/WebGL/shaders/lib/lambertdouble/lambertdouble.frag":(o,u,a)=>{a.r(u),a.d(u,{default:()=>c});const c=`
#ifdef SHADED
uniform highp sampler2D shading;
#endif

uniform mat4 viewMatrix;
uniform float opacity;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;

varying vec3 vLightFront;
varying vec3 vLightBack;

varying vec3 vColor;


//DEFINEFRAGCOLOR

void main() {

    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );

    #ifndef WIREFRAME
    if ( gl_FrontFacing )
       gl_FragColor.xyz *= vLightFront;
    else
       gl_FragColor.xyz *= vLightBack;
    #endif

    vec3 color = vColor;
#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    color *= shadowFactor;
#endif
    gl_FragColor = gl_FragColor * vec4( color, opacity );
    float depth = gl_FragCoord.z / gl_FragCoord.w;

    float fogFactor = smoothstep( fogNear, fogFar, depth );

    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );

}


`},"./src/WebGL/shaders/lib/lambertdouble/lambertdouble.vert":(o,u,a)=>{a.r(u),a.d(u,{default:()=>c});const c=`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec3 vColor;
varying vec3 vLightFront;
varying vec3 vLightBack;

void main() {

    vColor = color;

    vec3 objectNormal = normal;
    vec3 transformedNormal = normalMatrix * objectNormal;
    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );

    vLightFront = vec3( 0.0 );
    vLightBack = vec3( 0.0 );

    transformedNormal = normalize( transformedNormal );

    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vec3 dirVector = normalize( lDirection.xyz );
    float dotProduct = dot( transformedNormal, dirVector );
    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );
    vec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );

    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;
    vLightBack += directionalLightColor[ 0 ] * directionalLightWeightingBack;

    gl_Position = projectionMatrix * mvPosition;
}

`},"./src/WebGL/shaders/lib/outline/outline.frag":(o,u,a)=>{a.r(u),a.d(u,{default:()=>c});const c=`

uniform float opacity;
uniform vec3 outlineColor;
uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
//DEFINEFRAGCOLOR

void main() {
    gl_FragColor = vec4( outlineColor, 1 );

    float depth = gl_FragCoord.z / gl_FragCoord.w;
    float fogFactor = smoothstep( fogNear, fogFar, depth );
    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );    
}


`},"./src/WebGL/shaders/lib/outline/outline.vert":(o,u,a)=>{a.r(u),a.d(u,{default:()=>c});const c=`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform float outlineWidth;
uniform float outlinePushback;
uniform float vWidth;
uniform float vHeight;
uniform float outlineMaxPixels;

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

void main() {

    vec4 norm = modelViewMatrix*vec4(normalize(normal),0.0);
    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
    mvPosition.xy += norm.xy*outlineWidth;
    vec4 outpos = projectionMatrix * mvPosition;

    if(outlineMaxPixels > 0.0) {
        vec4 unadjusted = projectionMatrix*modelViewMatrix * vec4( position, 1.0 );
        float w = outpos.w;
        //normalize homogeneous coords
        unadjusted /= unadjusted.w;
        outpos /= outpos.w;
        vec2 diff = outpos.xy-unadjusted.xy;
        //put into pixels
        diff.x *= vWidth;
        diff.y *= vHeight;
        if ( length(diff) > outlineMaxPixels) {
            vec2 ndiff = normalize(diff)*outlineMaxPixels;
            ndiff.x /= vWidth;
            ndiff.y /= vHeight;
            outpos.xy = unadjusted.xy;
            outpos.xy += ndiff;
        }
        outpos *= w; //if I don't do this things blow up
    }
    gl_Position = outpos;
    mvPosition.z -= outlinePushback; //go backwards in model space
    vec4 pushpos = projectionMatrix*mvPosition; //project to get z in projection space, I'm probably missing some simple math to do the same thing..
    gl_Position.z = gl_Position.w*pushpos.z/pushpos.w;
}

`},"./src/WebGL/shaders/lib/screen/screen.frag":(o,u,a)=>{a.r(u),a.d(u,{default:()=>c});const c=`uniform sampler2D colormap;
varying highp vec2 vTexCoords;
uniform vec2 dimensions;
//DEFINEFRAGCOLOR
void main (void) {
   gl_FragColor = texture2D(colormap, vTexCoords);

   //gl_FragColor.g = gl_FragColor.b =  gl_FragColor.r; //debug shading 
}
        `},"./src/WebGL/shaders/lib/screen/screen.vert":(o,u,a)=>{a.r(u),a.d(u,{default:()=>c});const c=`attribute vec2 vertexPosition;
varying highp vec2 vTexCoords;
const vec2 scale = vec2(0.5, 0.5);

void main() {
   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range
   gl_Position = vec4(vertexPosition, 0.0, 1.0);
}
        `},"./src/WebGL/shaders/lib/screenaa/screenaa.frag":(o,u,a)=>{a.r(u),a.d(u,{default:()=>c});const c=`uniform highp sampler2D colormap;
varying highp vec2 vTexCoords;


// Basic FXAA implementation based on the code on geeks3d.com 
#define FXAA_REDUCE_MIN (1.0/ 128.0)
#define FXAA_REDUCE_MUL (1.0 / 8.0)
#define FXAA_SPAN_MAX 8.0


vec4 applyFXAA(vec2 fragCoord, highp sampler2D tex)
{
    vec4 color;
    ivec2 dim = textureSize(tex,0);
    vec2 dimensions = vec2(float(dim.x),float(dim.y));
    vec2 inverseVP = vec2(1.0 / dimensions.x, 1.0 / dimensions.y);
    vec4 rgbNW = texture2D(tex, fragCoord + vec2(-1.0, -1.0) * inverseVP);
    vec4 rgbNE = texture2D(tex, fragCoord + vec2(1.0, -1.0) * inverseVP);
    vec4 rgbSW = texture2D(tex, fragCoord + vec2(-1.0, 1.0) * inverseVP);
    vec4 rgbSE = texture2D(tex, fragCoord + vec2(1.0, 1.0) * inverseVP);
    vec4 rgbM  = texture2D(tex, fragCoord );
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW.xyz, luma);
    float lumaNE = dot(rgbNE.xyz, luma);
    float lumaSW = dot(rgbSW.xyz, luma);
    float lumaSE = dot(rgbSE.xyz, luma);
    float lumaM  = dot(rgbM.xyz,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                        (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
            max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
            dir * rcpDirMin)) * inverseVP;

    vec4 rgbA = 0.5 * (
        texture2D(tex, fragCoord + dir * (1.0 / 3.0 - 0.5)) +
        texture2D(tex, fragCoord  + dir * (2.0 / 3.0 - 0.5)));
    vec4 rgbB = rgbA * 0.5 + 0.25 * (
        texture2D(tex, fragCoord  + dir * -0.5) +
        texture2D(tex, fragCoord  + dir * 0.5));

    float lumaB = dot(rgbB.xyz, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = rgbA;
    else
        color = rgbB;

    return color;
}


//DEFINEFRAGCOLOR
void main (void) {
    ivec2 dim = textureSize(colormap,0);

  gl_FragColor = applyFXAA(vTexCoords, colormap);
}
        `},"./src/WebGL/shaders/lib/screenaa/screenaa.vert":(o,u,a)=>{a.r(u),a.d(u,{default:()=>c});const c=`attribute vec2 vertexPosition;
varying highp vec2 vTexCoords;
const vec2 scale = vec2(0.5, 0.5);

void main() {
   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range
   gl_Position = vec4(vertexPosition, 0.0, 1.0);
}
        `},"./src/WebGL/shaders/lib/sphereimposter/sphereimposter.frag":(o,u,a)=>{a.r(u),a.d(u,{default:()=>c});const c=`
uniform mat4 viewMatrix;
uniform float opacity;
uniform mat4 projectionMatrix;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
uniform float uDepth;
uniform vec3 directionalLightColor[ 1 ];

varying vec3 vColor;
varying vec2 mapping;
varying float rval;
varying vec3 vLight;
varying vec3 center;

#ifdef SHADED
uniform highp sampler2D shading;
#endif

//DEFINEFRAGCOLOR

void main() {
    float lensqr = dot(mapping,mapping);
    float rsqr = rval*rval;
    if(lensqr > rsqr)
       discard;
    float z = sqrt(rsqr-lensqr);
    vec3 cameraPos = center+ vec3(mapping.x,mapping.y,z);
    vec4 clipPos = projectionMatrix * vec4(cameraPos, 1.0);
    float ndcDepth = clipPos.z / clipPos.w;
    gl_FragDepthEXT = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
    vec3 norm = normalize(vec3(mapping.x,mapping.y,z));
    float dotProduct = dot( norm, vLight );
    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );
    vec3 vLight = directionalLightColor[ 0 ] * directionalLightWeighting;
    vec3 color = vLight*vColor;
#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    color *= shadowFactor;
#endif    
    gl_FragColor = vec4(color, opacity*opacity );
    float fogFactor = smoothstep( fogNear, fogFar, gl_FragDepthEXT/gl_FragCoord.w );
    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
}

`},"./src/WebGL/shaders/lib/sphereimposter/sphereimposter.vert":(o,u,a)=>{a.r(u),a.d(u,{default:()=>c});const c=`uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec2 mapping;
varying vec3 vColor;
varying float rval;
varying vec3 vLight;
varying vec3 center;

void main() {

    vColor = color;
    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
    center = mvPosition.xyz;
    vec4 projPosition = projectionMatrix * mvPosition;
    vec4 adjust = projectionMatrix* vec4(normal,0.0); adjust.z = 0.0; adjust.w = 0.0;
    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vLight = normalize( lDirection.xyz );
    mapping = normal.xy;
    rval = abs(normal.x);
    gl_Position = projPosition+adjust;

}
`},"./src/WebGL/shaders/lib/sphereimposteroutline/sphereimposteroutline.frag":(o,u,a)=>{a.r(u),a.d(u,{default:()=>c});const c=`

uniform float opacity;
uniform vec3 outlineColor;
uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;
uniform mat4 projectionMatrix;
varying vec2 mapping;
varying float rval;
varying vec3 center;

uniform float outlinePushback;

//DEFINEFRAGCOLOR

void main() {
    float lensqr = dot(mapping,mapping);
    float rsqr = rval*rval;
    if(lensqr > rsqr)
       discard;
    float z = sqrt(rsqr-lensqr);
    vec3 cameraPos = center+ vec3(mapping.x,mapping.y,z-outlinePushback);
    vec4 clipPos = projectionMatrix * vec4(cameraPos, 1.0);
    float ndcDepth = clipPos.z / clipPos.w;
    gl_FragDepthEXT = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
    gl_FragColor = vec4(outlineColor, 1 );
}


`},"./src/WebGL/shaders/lib/sphereimposteroutline/sphereimposteroutline.vert":(o,u,a)=>{a.r(u),a.d(u,{default:()=>c});const c=`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform float outlineWidth;
uniform float outlinePushback;
uniform float outlineMaxPixels;
uniform float vWidth;
uniform float vHeight;

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;

varying vec2 mapping;
varying float rval;
varying vec3 center;

void main() {

    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
    center = mvPosition.xyz;
    vec4 projPosition = projectionMatrix * mvPosition;
    vec2 norm = normal.xy + vec2(sign(normal.x)*outlineWidth,sign(normal.y)*outlineWidth);

    vec4 adjust = projectionMatrix* vec4(norm,normal.z,1.0); 
    mapping = norm.xy;
    rval = abs(norm.x);
    gl_Position = projPosition+vec4(adjust.xy,0.0,0.0);

    if(outlineMaxPixels > 0.0) {
        vec4 unadjusted = projectionMatrix*vec4(center.x+normal.x, center.y,center.z,1.0); 
        vec4 ccoord = projectionMatrix*vec4(center.xyz,1.0);
        adjust = projectionMatrix* vec4(center.x+norm.x,center.y,center.z,1.0); 
        //subtract center 
        unadjusted.xyz -= ccoord.xyz;
        adjust.xyz -= ccoord.xyz;
        unadjusted /= unadjusted.w;
        adjust /= adjust.w;
        float diff = abs(adjust.x-unadjusted.x);
        diff *= vWidth;
        if(diff > outlineMaxPixels) {
            
            float fixlen = abs(unadjusted.x) + outlineMaxPixels/vWidth;
            //adjsut reval by ratio of lengths
            rval *= fixlen/abs(adjust.x);
        }

    }
}

`},"./src/WebGL/shaders/lib/sprite/sprite.frag":(o,u,a)=>{a.r(u),a.d(u,{default:()=>c});const c=`

uniform vec3 color;
uniform sampler2D map;
uniform float opacity;

uniform int fogType;
uniform vec3 fogColor;
uniform float fogDensity;
uniform float fogNear;
uniform float fogFar;
uniform float alphaTest;

varying vec2 vUV;
//DEFINEFRAGCOLOR

void main() {

    vec4 texture = texture2D(map, vUV);

    if (texture.a <= alphaTest) discard;

    gl_FragColor = vec4(color * texture.xyz, texture.a * opacity);

    if (fogType > 0) {

        float depth = gl_FragCoord.z / gl_FragCoord.w;
        float fogFactor = 0.0;

        if (fogType == 1) {
            fogFactor = smoothstep(fogNear, fogFar, depth);
        }

        else {
            const float LOG2 = 1.442695;
            float fogFactor = exp2(- fogDensity * fogDensity * depth * depth * LOG2);
            fogFactor = 1.0 - clamp(fogFactor, 0.0, 1.0);
        }

        gl_FragColor = mix(gl_FragColor, vec4(fogColor, gl_FragColor.w), fogFactor);

    }
}

`},"./src/WebGL/shaders/lib/sprite/sprite.vert":(o,u,a)=>{a.r(u),a.d(u,{default:()=>c});const c=`

uniform int useScreenCoordinates;
uniform vec3 screenPosition;
uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform float rotation;
uniform vec2 scale;
uniform vec2 alignment;
uniform vec2 uvOffset;
uniform vec2 uvScale;

attribute vec2 position;
attribute vec2 uv;

varying vec2 vUV;

void main() {

    vUV = uvOffset + uv * uvScale;

    vec2 alignedPosition = position + alignment;

    vec2 rotatedPosition;
    rotatedPosition.x = ( cos(rotation) * alignedPosition.x - sin(rotation) * alignedPosition.y ) * scale.x;
    rotatedPosition.y = ( sin(rotation) * alignedPosition.x + cos(rotation) * alignedPosition.y ) * scale.y;

    vec4 finalPosition;

    if(useScreenCoordinates != 0) {
        finalPosition = vec4(screenPosition.xy + rotatedPosition, screenPosition.z, 1.0);
    }

    else {
        finalPosition = projectionMatrix * modelViewMatrix * vec4(0.0, 0.0, 0.0, 1.0); finalPosition /= finalPosition.w;
        finalPosition.xy += rotatedPosition; 
    }

    gl_Position = finalPosition;

}

`},"./src/WebGL/shaders/lib/ssao/ssao.frag":(o,u,a)=>{a.r(u),a.d(u,{default:()=>c});const c=`uniform sampler2D depthmap;
varying highp vec2 vTexCoords;
uniform float vWidth;
uniform float vHeight;
uniform float total_strength;
uniform float radius;
uniform mat4 projinv;
uniform mat4 projectionMatrix;

//code for pseudorandom vector from chatgpt
float hash(vec3 p) {
    p = fract(p * vec3(0.1031, 0.1030, 0.0973));
    p += dot(p, p.yzx + 33.33);
    return fract((p.x + p.y) * p.z);
}

// Generate a pseudorandom vec3 from a seed vec3
vec3 pseudorandomVec3(vec3 seed) {
    vec3 randomVec;
    randomVec.x = hash(seed);
    randomVec.y = hash(seed + vec3(1.0, 0.0, 17.1));
    randomVec.z = hash(seed + vec3(0.0, 13.23, 0.0));
    return randomVec;
}

void main(void)
{   
   const float base = 0.2;
   const float area = 0.75;
   const int cycles = 1;

   const int samples = 64;
   vec3 sample_sphere[64] = vec3[](
      vec3(0.091258,-0.510164,0.000000),
      vec3(-0.204347,-0.872967,0.187199),
      vec3(0.009690,-0.263696,-0.110414),
      vec3(0.175208,-0.563987,0.228527),
      vec3(-0.001824,-0.003113,-0.000323),
      vec3(0.411134,-0.719869,-0.261530),
      vec3(-0.074272,-0.377368,0.276290),
      vec3(-0.147773,-0.381587,-0.284529),
      vec3(0.173317,-0.199635,0.063295),
      vec3(-0.186452,-0.199460,0.076965),
      vec3(0.143985,-0.308160,-0.307687),
      vec3(0.053194,-0.148286,0.169589),
      vec3(-0.547656,-0.486476,-0.317378),
      vec3(0.020804,-0.015092,-0.004574),
      vec3(-0.038006,-0.043165,0.054059),
      vec3(-0.094795,-0.443908,-0.731525),
      vec3(0.547552,-0.396466,0.461477),
      vec3(-0.176886,-0.089989,0.007315),
      vec3(0.074401,-0.048840,-0.074039),
      vec3(-0.008240,-0.075697,0.178197),
      vec3(-0.307880,-0.185053,-0.368943),
      vec3(0.309520,-0.108483,0.041646),
      vec3(-0.773478,-0.292946,0.538166),
      vec3(0.184487,-0.231594,-0.820065),
      vec3(0.207318,-0.100531,0.361797),
      vec3(-0.173306,-0.037737,-0.055289),
      vec3(0.548102,-0.105342,-0.253237),
      vec3(-0.119342,-0.043907,0.285162),
      vec3(-0.270247,-0.087861,-0.751357),
      vec3(0.449312,-0.039777,0.236146),
      vec3(-0.743773,-0.036095,0.196056),
      vec3(0.148819,-0.004300,-0.231448),
      vec3(0.008773,0.000809,0.051047),
      vec3(-0.461467,0.027390,-0.357386),
      vec3(0.169626,0.013338,-0.014053),
      vec3(-0.043786,0.007095,0.047331),
      vec3(0.004821,0.140371,-0.988260),
      vec3(0.092402,0.023994,0.101860),
      vec3(-0.295335,0.061530,-0.027372),
      vec3(0.024903,0.007537,-0.018901),
      vec3(-0.081463,0.125402,0.447794),
      vec3(-0.397119,0.231805,-0.631062),
      vec3(0.163853,0.059014,0.044905),
      vec3(-0.495220,0.214357,0.254139),
      vec3(0.306123,0.373687,-0.825715),
      vec3(0.021665,0.026737,0.053220),
      vec3(-0.208231,0.117129,-0.098685),
      vec3(0.139749,0.080968,-0.043086),
      vec3(-0.153599,0.182814,0.262090),
      vec3(-0.159673,0.496777,-0.743568),
      vec3(0.134797,0.117152,0.095753),
      vec3(-0.155626,0.120533,0.019395),
      vec3(0.042311,0.054462,-0.049709),
      vec3(0.001257,0.031288,0.034468),
      vec3(-0.002271,0.003199,-0.002304),
      vec3(0.662104,0.717307,0.033854),
      vec3(-0.373100,0.576021,0.308274),
      vec3(0.024233,0.231316,-0.173688),
      vec3(0.161311,0.420217,0.234273),
      vec3(-0.045248,0.078031,-0.010411),
      vec3(0.167453,0.376942,-0.094872),
      vec3(-0.056194,0.433247,0.173218),
      vec3(-0.016224,0.123149,-0.035569),
      vec3(0.067127,0.407641,0.028479)
   );

   float depth = texture2D(depthmap, vTexCoords).r;
   if(depth == 1.0) {
      discard;
   }

   vec4 screen_position = vec4(vTexCoords, depth,1.0);
   vec4 pos = projinv*screen_position;
   pos /= pos.w;
   vec3 position = pos.xyz;

   //approximate the normal from the depth map; I find this simpler
   //than trying to recompute the exact normal within every possible object shader

   //pixel offset positions in screen space
   ivec2 dim = textureSize(depthmap,0);
   vec2 offset1 = vec2(0.0,1.0/float(dim.y));
   vec2 offset2 = vec2(1.0/float(dim.x),0.0);
   float depth1 = texture2D(depthmap, vTexCoords + offset1).r;
   float depth2 = texture2D(depthmap, vTexCoords + offset2).r;
   
   vec3 p1 = vec3(screen_position.xy+offset1, depth1 - depth);
   vec3 p2 = vec3(screen_position.xy+offset2, depth2 - depth);

   //convert to model space
   vec4 pos1 = projinv*vec4(p1,1);
   pos1 /= pos1.w;
   vec4 pos2 = projinv*vec4(p2,1);
   pos2 /= pos2.w;

   vec3 normal = normalize(cross(pos1.xyz-position, pos2.xyz-position)); //model normal, important we normalize in model space

   //pseudo random number

   float occlusion = 0.0;
   for(int c = 0; c < cycles; c++) {
   vec3 random = normalize(pseudorandomVec3(position+float(c)));
   for(int i=0; i < samples; i++) {

      vec3 ray = radius * reflect(sample_sphere[i],random);
      vec3 hemi_ray = position + sign(dot(ray,normal)) * ray; //model space
      vec4 hemi_screen = projectionMatrix*vec4(hemi_ray,1.0);
      hemi_screen /= hemi_screen.w;
      
      float occ_depth = texture2D(depthmap, clamp(hemi_screen.xy,0.0,1.0)).r;
      float difference = hemi_screen.z - occ_depth;
      
      occlusion += step(0.0, difference) * (1.0-smoothstep(0.0, area, difference));
   }
   }
   float ao = 1.0 - total_strength * occlusion * (1.0 / float(cycles*samples));
   gl_FragDepthEXT = clamp(ao+base,0.0,1.0);

}`},"./src/WebGL/shaders/lib/ssao/ssao.vert":(o,u,a)=>{a.r(u),a.d(u,{default:()=>c});const c=`attribute vec2 vertexPosition;
varying highp vec2 vTexCoords;
const vec2 scale = vec2(0.5, 0.5);

void main() {
   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range
   gl_Position = vec4(vertexPosition, 0.0, 1.0);
}
        `},"./src/WebGL/shaders/lib/stickimposter/stickimposter.partial.frag":(o,u,a)=>{a.r(u),a.d(u,{default:()=>c});const c=`    float dotProduct = dot( norm, vLight );
    vec3 light = vec3( max( dotProduct, 0.0 ) );
    color *= light;
#ifdef SHADED
    ivec2 dim = textureSize(shading,0);
    float shadowFactor = texture2D(shading,vec2(gl_FragCoord.x/float(dim.x),gl_FragCoord.y/float(dim.y))).r;
    color *= shadowFactor;
#endif    
    gl_FragColor = vec4(color, opacity*opacity );
    float fogFactor = smoothstep( fogNear, fogFar, depth );
    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );
}`},"./src/WebGL/shaders/lib/stickimposter/stickimposter.vert":(o,u,a)=>{a.r(u),a.d(u,{default:()=>c});const c=`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];

attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;
attribute float radius;

varying vec3 vColor;
varying vec3 vLight;
varying vec3 cposition;
varying vec3 p1;
varying vec3 p2;
varying float r;

void main() {

    vColor = color; vColor.z = abs(vColor.z); //z indicates which vertex and so would vary
    r = abs(radius);
    vec4 to = modelViewMatrix*vec4(normal, 1.0); //normal is other point of cylinder
    vec4 pt = modelViewMatrix*vec4(position, 1.0);
    vec4 mvPosition = pt;
    p1 = pt.xyz; p2 = to.xyz;
    vec3 norm = to.xyz-pt.xyz;
    float mult = 1.1; //slop to account for perspective of sphere
    if(length(p1) > length(p2)) { //billboard at level of closest point
       mvPosition = to;
    }
    vec3 n = normalize(mvPosition.xyz);
    bool isperspective = (projectionMatrix[3][3] == 0.0);
//intersect with the plane defined by the camera looking at the billboard point
    if(color.z >= 0.0) { //p1
       if(isperspective) { //perspective
         vec3 pnorm = normalize(p1);
         float t = dot(mvPosition.xyz-p1,n)/dot(pnorm,n);
         mvPosition.xyz = p1+t*pnorm; 
       } else { //orthographic
         mvPosition.xyz = p1;
       }
    } else {
      if(isperspective) { //perspective
         vec3 pnorm = normalize(p2);
         float t = dot(mvPosition.xyz-p2,n)/dot(pnorm,n);
         mvPosition.xyz = p2+t*pnorm;
       } else { //orthographic
         mvPosition.xyz = p2;
       } 
       mult *= -1.0;
    }

    if(isperspective) { //perspective
      vec3 cr = normalize(cross(mvPosition.xyz,norm))*radius;
      vec3 doublecr = normalize(cross(mvPosition.xyz,cr))*radius;
      mvPosition.xyz +=  mult*(cr + doublecr).xyz;
    } else {
      vec3 cr = normalize(cross(vec3(0.0,0.0,-1.0),norm))*radius;
      vec3 doublecr = normalize(cross(vec3(0.0,0.0,-1.0),cr))*radius;
      mvPosition.xyz +=  mult*(cr + doublecr).xyz;     
    }

    cposition = mvPosition.xyz;
    gl_Position = projectionMatrix * mvPosition;
    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );
    vLight = normalize( lDirection.xyz )*directionalLightColor[0]; //not really sure this is right, but color is always white so..
}

`},"./src/WebGL/shaders/lib/stickimposter/stickimposterFragmentShader.partial.frag":(o,u,a)=>{a.r(u),a.d(u,{default:()=>c});const c=`uniform float opacity;
uniform mat4 projectionMatrix;

uniform vec3 fogColor;
uniform float fogNear;
uniform float fogFar;

varying vec3 vLight;
varying vec3 vColor;
varying vec3 cposition;
varying vec3 p1;
varying vec3 p2;
varying float r;

#ifdef SHADED
uniform highp sampler2D shading;
#endif

//DEFINEFRAGCOLOR

//cylinder-ray intersection testing taken from http://mrl.nyu.edu/~dzorin/cg05/lecture12.pdf
//also useful: http://stackoverflow.com/questions/9595300/cylinder-impostor-in-glsl
//with a bit more care (caps) this could be a general cylinder imposter (see also outline)
void main() {
    vec3 color = abs(vColor);
    vec3 pos = cposition;
    vec3 p = pos; //ray point
    vec3 v = vec3(0.0,0.0,-1.0); //ray normal - orthographic
    if(projectionMatrix[3][3] == 0.0) v = normalize(pos); //ray normal - perspective
    vec3 pa = p1; //cyl start
    vec3 va = normalize(p2-p1); //cyl norm
    vec3 tmp1 = v-(dot(v,va)*va);
    vec3 deltap = p-pa;
    float A = dot(tmp1,tmp1);
    if(A == 0.0) discard;
    vec3 tmp2 = deltap-(dot(deltap,va)*va);
    float B = 2.0*dot(tmp1, tmp2);
    float C = dot(tmp2,tmp2)-r*r;
//quadratic equation!
    float det = (B*B) - (4.0*A*C);
    if(det < 0.0) discard;
    float sqrtDet = sqrt(det);
    float posT = (-B+sqrtDet)/(2.0*A);
    float negT = (-B-sqrtDet)/(2.0*A);
    float intersectionT = min(posT,negT);
    vec3 qi = p+v*intersectionT;
    float dotp1 = dot(va,qi-p1);
    float dotp2 = dot(va,qi-p2);
    vec3 norm;
    if( dotp1 < 0.0 || dotp2 > 0.0) { //(p-c)^2 + 2(p-c)vt +v^2+t^2 - r^2 = 0
       vec3 cp;
       if( dotp1 < 0.0) {  
//        if(vColor.x < 0.0 ) discard; //color sign bit indicates if we should cap or not
        cp = p1;
       } else {
//          if(vColor.y < 0.0 ) discard;
          cp = p2;
       }
       vec3 diff = p-cp;
       A = dot(v,v);
       B = dot(diff,v)*2.0;
       C = dot(diff,diff)-r*r;
       det = (B*B) - (4.0*C);
       if(det < 0.0) discard;
       sqrtDet = sqrt(det);
       posT = (-B+sqrtDet)/(2.0);
       negT = (-B-sqrtDet)/(2.0);
       float t = min(posT,negT);
       qi = p+v*t; 
       norm = normalize(qi-cp); 
    } else {
       norm = normalize(qi-(dotp1*va + p1));
    }
    vec4 clipPos = projectionMatrix * vec4(qi, 1.0);
    float ndcDepth = clipPos.z / clipPos.w;
    float depth = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
    gl_FragDepthEXT = depth;`},"./src/WebGL/shaders/lib/stickimposteroutline/stickimposteroutline.vert":(o,u,a)=>{a.r(u),a.d(u,{default:()=>c});const c=`

uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;
uniform mat3 normalMatrix;
uniform vec3 directionalLightColor[ 1 ];
uniform vec3 directionalLightDirection[ 1 ];
uniform vec3 outlineColor;
uniform float outlineWidth;
uniform float outlinePushback;
uniform float outlineMaxPixels;
uniform float vWidth;
uniform mat4 projinv;


attribute vec3 position;
attribute vec3 normal;
attribute vec3 color;
attribute float radius;

varying vec3 vColor;
varying vec3 vLight;
varying vec3 cposition;
varying vec3 p1;
varying vec3 p2;
varying float r;

void main() {

    vColor = outlineColor;
    float rad = radius+sign(radius)*outlineWidth;
    r = abs(rad);

    vec4 to = modelViewMatrix*vec4(normal, 1.0); //normal is other point of cylinder
    vec4 pt = modelViewMatrix*vec4(position, 1.0);
//pushback
    float scale = 1.0;
    if(projectionMatrix[3][3] != 0.0) { //orthographic
        to.z -= outlinePushback;
        pt.z -= outlinePushback;
    } else { //perspective
        vec4 midbefore = pt;
        if(length(to.xyz) < length(pt)) {
            midbefore = to;
        }
        vec4 midafter = midbefore;
        midafter.xyz += normalize(midbefore.xyz)*outlinePushback;

        to.xyz += normalize(to.xyz)*outlinePushback;
        pt.xyz += normalize(pt.xyz)*outlinePushback;

        //figure out a scaling factor for radius to account for perspective setback
        vec4 midbeforer = vec4(midbefore.x+rad,midbefore.y, midbefore.z, midbefore.w);
        vec4 midafterr = vec4(midafter.x+rad,midafter.y, midafter.z, midafter.w);

        vec4 mb = projectionMatrix*midbefore;
        vec4 mbr = projectionMatrix*midbeforer;
        vec4 ma = projectionMatrix*midafter;
        vec4 mar = projectionMatrix*midafterr;
        mb /= mb.w;
        mbr /= mbr.w;
        ma /= ma.w;
        mar /= mar.w;
        scale = abs((mbr.x-mb.x)/(mar.x-ma.x));
        rad *= scale;
        r = abs(rad);
    }
    vec4 mvPosition = pt;
    p1 = pt.xyz; p2 = to.xyz;
    vec3 norm = to.xyz-pt.xyz;
    float mult = 1.1; //slop to account for perspective of sphere
    if(length(p1) > length(p2)) { //billboard at level of closest point
       mvPosition = to;
    }

    vec3 n = normalize(mvPosition.xyz);
//intersect with the plane defined by the camera looking at the billboard point
    if(color.z >= 0.0) { //p1
       vec3 pnorm = normalize(p1);
       float t = dot(mvPosition.xyz-p1,n)/dot(pnorm,n);
       mvPosition.xyz = p1+t*pnorm;
    } else {
       vec3 pnorm = normalize(p2);
       float t = dot(mvPosition.xyz-p2,n)/dot(pnorm,n);
       mvPosition.xyz = p2+t*pnorm;
       mult *= -1.0;
    }

    if(outlineMaxPixels > 0.0) {
        vec4 cpos = mvPosition;
        vec4 unadjusted = projectionMatrix*vec4(cpos.x+abs(scale*radius), cpos.y,cpos.z,cpos.w); 
        vec4 ccoord = projectionMatrix*cpos;
        vec4 adjust = projectionMatrix*vec4(cpos.x+r,cpos.y,cpos.z,cpos.w); 
        unadjusted /= unadjusted.w;
        adjust /= adjust.w;
        unadjusted.xyz -= ccoord.xyz/ccoord.w;
        adjust.xyz -= ccoord.xyz/ccoord.w;
        float diff = abs(adjust.x-unadjusted.x);
        diff *= vWidth; //this should now be in pixels
        if(diff > outlineMaxPixels) {
            float fixlen = abs(unadjusted.x) + outlineMaxPixels/vWidth; 
            vec4 pcoord = ccoord;
            pcoord.x += fixlen*pcoord.w;
            vec4 altc = projinv*pcoord;
            r= abs(altc.x-cpos.x);
        }
    }

    vec3 cr = normalize(cross(mvPosition.xyz,norm))*rad;
    vec3 doublecr = normalize(cross(mvPosition.xyz,cr))*rad;
    mvPosition.xy +=  mult*(cr + doublecr).xy;
    cposition = mvPosition.xyz;
    gl_Position = projectionMatrix * mvPosition;
    vLight = vec3(1.0,1.0,1.0);
}

`},"./src/WebGL/shaders/lib/volumetric/volumetric.frag":(o,u,a)=>{a.r(u),a.d(u,{default:()=>c});const c=`
uniform highp sampler3D data;
uniform highp sampler2D colormap;
uniform highp sampler2D depthmap;


uniform mat4 textmat;
uniform mat4 projinv;
uniform mat4 projectionMatrix;

uniform float step;
uniform float subsamples;
uniform float maxdepth;
uniform float transfermin;
uniform float transfermax;
in  vec4 mvPosition;
out vec4 color;
void main(void) {

   vec4 pos = mvPosition;
   bool seengood = false;
   float i = 0.0;
   color = vec4(1,1,1,0);
   float increment = 1.0/subsamples;
   float maxsteps = (maxdepth*subsamples/step);
//there's probably a better way to do this..
//calculate farthest possible point in model coordinates
   vec4 maxpos = vec4(pos.x,pos.y,pos.z-maxdepth,1.0);
// convert to projection
   maxpos = projectionMatrix*maxpos;
   vec4 startp = projectionMatrix*pos;
// homogonize
   maxpos /= maxpos.w;
   startp /= startp.w;
//take x,y from start and z from max
   maxpos = vec4(startp.x,startp.y,maxpos.z,1.0);
//convert back to model space
   maxpos = projinv*maxpos;
   maxpos /= maxpos.w;
   float incr = step/subsamples;
//get depth from depthmap
//startp is apparently [-1,1]
   vec2 tpos = startp.xy/2.0+0.5;
   float depth = texture(depthmap, tpos).r;
//compute vector between start and end
   vec4 direction = maxpos-pos;
   for( i = 0.0; i <= maxsteps; i++) {
      vec4 pt = (pos+(i/maxsteps)*direction);
      vec4 ppt = projectionMatrix*pt;
      float ptdepth = ppt.z/ppt.w;
      ptdepth = ((gl_DepthRange.diff * ptdepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;
      if(ptdepth > depth) break;
      pt = textmat*pt;
//       pt /= pt.w;
      if(pt.x >= -0.01 && pt.y >= -0.01 && pt.z >= -0.01 && pt.x <= 1.01 && pt.y <= 1.01 && pt.z <= 1.01) {
         seengood = true;
      } else if(seengood) {
         break;
      }
      if( pt.x < -0.01 || pt.x > 1.01 || pt.y < -0.01 || pt.y > 1.01 || pt.z < -0.01 || pt.z > 1.01  ){
          color.a = 0.0;
          continue;
      }
      else {
         float val = texture(data, pt.zyx).r;
         if(isinf(val)) continue; //masked out
         float cval = (val-transfermin)/(transfermax-transfermin); //scale to texture 0-1 range
         vec4 val_color = texture(colormap, vec2(cval,0.5));
         color.rgb = color.rgb*color.a + (1.0-color.a)*val_color.a*val_color.rgb;
         color.a += (1.0 - color.a) * val_color.a; 
         if(color.a > 0.0) color.rgb /= color.a;
//          color = vec4(pt.x, pt.y, pt.z, 1.0);
      }
//       color = vec4(pt.x, pt.y, pt.z, 0.0)
    }
}

        `},"./src/WebGL/shaders/lib/volumetric/volumetric.vert":(o,u,a)=>{a.r(u),a.d(u,{default:()=>c});const c=`uniform mat4 modelViewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;

in vec3 position;
out vec4 mvPosition;
void main() {

    mvPosition = modelViewMatrix * vec4( position, 1.0 );
    gl_Position = projectionMatrix*mvPosition;
}
`},"./src/GLDraw.ts":(o,u,a)=>{a.r(u),a.d(u,{CAP:()=>y,GLDraw:()=>S});var c=a("./src/WebGL/math/index.ts"),y;(function(R){R[R.NONE=0]="NONE",R[R.FLAT=1]="FLAT",R[R.ROUND=2]="ROUND"})(y||(y={}));var S;(function(R){function m(f,i,l){var p=Math.hypot(f,i),v,b,s,h,E;p<1e-4?(b=0,s=1):(b=-f/p,s=i/p),i=-b*f+s*i,v=Math.hypot(i,l),v<1e-4?(h=0,E=1):(h=l/v,E=i/v);var x=new Float32Array(9);return x[0]=s,x[1]=b,x[2]=0,x[3]=-b*E,x[4]=s*E,x[5]=h,x[6]=b*h,x[7]=-s*h,x[8]=E,x}class _{constructor(){this.cache={};let i=[],l=4,p=Math.pow(2,l),v=2,b=Math.pow(2,v),s=p/b,h;for(i[0]=new c.Vector3(-1,0,0),i[s]=new c.Vector3(0,0,1),i[s*2]=new c.Vector3(1,0,0),i[s*3]=new c.Vector3(0,0,-1),v=3;v<=l;v++){for(b=Math.pow(2,v-1),s=p/b,h=0;h<b-1;h++)i[s/2+h*s]=i[h*s].clone().add(i[(h+1)*s]).normalize();h=b-1,i[s/2+h*s]=i[h*s].clone().add(i[0]).normalize()}this.basisVectors=i}getVerticesForRadius(i,l,p){if(typeof this.cache<"u"&&this.cache[i]!==void 0&&this.cache[i][l+p]!==void 0)return this.cache[i][l+p];for(var v=this.basisVectors.length,b=[],s=[],h,E=0;E<v;E++)b.push(this.basisVectors[E].clone().multiplyScalar(i)),b.push(this.basisVectors[E].clone().multiplyScalar(i)),h=this.basisVectors[E].clone().normalize(),s.push(h),s.push(h);var x=[],D=10,z=v,P=0,G=Math.PI*2,B=0,K=Math.PI,k,U,W=!1,F=!1;for(U=0;U<=D;U++){W=U===0||U===D,F=U===D/2;var Y=[],j=[];for(k=0;k<=z;k++){if(F){var H=k<z?2*k:0;j.push(H+1),Y.push(H);continue}var Z=k/z,ne=U/D;if(!W||k===0)if(k<z){var se=new c.Vector3;se.x=-i*Math.cos(P+Z*G)*Math.sin(B+ne*K),l==1?se.y=0:se.y=i*Math.cos(B+ne*K),se.z=i*Math.sin(P+Z*G)*Math.sin(B+ne*K),Math.abs(se.x)<1e-5&&(se.x=0),Math.abs(se.y)<1e-5&&(se.y=0),Math.abs(se.z)<1e-5&&(se.z=0),l==y.FLAT?(h=new c.Vector3(0,Math.cos(B+ne*K),0),h.normalize()):(h=new c.Vector3(se.x,se.y,se.z),h.normalize()),b.push(se),s.push(h),Y.push(b.length-1)}else Y.push(b.length-z);else W&&Y.push(b.length-1)}F&&x.push(j),x.push(Y)}var me={vertices:b,normals:s,verticesRows:x,w:z,h:D};return i in this.cache||(this.cache[i]={}),this.cache[i][l+p]=me,me}}var A=new _;function g(f,i,l,p,v,b=0,s=0){if(!i||!l)return;let h=function(Pe){if(typeof Pe=="string"){let ft=Pe;return ft.toLowerCase()=="flat"?y.FLAT:ft.toLowerCase()=="round"?y.ROUND:y.NONE}else return Pe};b=h(b),s=h(s);var E=s||b;v=v||{r:0,g:0,b:0};var x=m(l.x-i.x,l.y-i.y,l.z-i.z),D=A.getVerticesForRadius(p,s,"to"),z=D.w,P=D.h,G=E?P*z+2:2*z,B=f.updateGeoGroup(G),K=D.vertices,k=D.normals,U=D.verticesRows,W=U[P/2],F=U[P/2+1],Y=B.vertices,j,H,Z,ne,se,me,de=B.vertexArray,ue=B.normalArray,ce=B.colorArray,pe=B.faceArray;for(Z=0;Z<z;++Z){var De=2*Z;ne=x[0]*K[De].x+x[3]*K[De].y+x[6]*K[De].z,se=x[1]*K[De].x+x[4]*K[De].y+x[7]*K[De].z,me=x[5]*K[De].y+x[8]*K[De].z,j=3*(Y+De),H=B.faceidx,de[j]=ne+i.x,de[j+1]=se+i.y,de[j+2]=me+i.z,de[j+3]=ne+l.x,de[j+4]=se+l.y,de[j+5]=me+l.z,ue[j]=ne,ue[j+3]=ne,ue[j+1]=se,ue[j+4]=se,ue[j+2]=me,ue[j+5]=me,ce[j]=v.r,ce[j+3]=v.r,ce[j+1]=v.g,ce[j+4]=v.g,ce[j+2]=v.b,ce[j+5]=v.b,pe[H]=F[Z]+Y,pe[H+1]=F[Z+1]+Y,pe[H+2]=W[Z]+Y,pe[H+3]=W[Z]+Y,pe[H+4]=F[Z+1]+Y,pe[H+5]=W[Z+1]+Y,B.faceidx+=6}if(E){var we=s?0:P/2,je=b?P+1:P/2+1,ye,he,Ce,ke,Xe,nt,at,rt,et,Je,$e,We,ut,ot,J,re,le,Re,xe,Ye,Ge,q,_e,Oe,Ke,be,Ue,ee,He,st,V,Te;for(se=we;se<je;se++)if(se!==P/2){var Se=se<=P/2?l:i,te=A.getVerticesForRadius(p,s,"to"),ve=A.getVerticesForRadius(p,b,"from");for(Se===l?(K=te.vertices,k=te.normals,U=te.verticesRows):Se==i&&(K=ve.vertices,k=ve.normals,U=ve.verticesRows),ne=0;ne<z;ne++)H=B.faceidx,ye=U[se][ne+1],He=(ye+Y)*3,he=U[se][ne],st=(he+Y)*3,Ce=U[se+1][ne],V=(Ce+Y)*3,ke=U[se+1][ne+1],Te=(ke+Y)*3,Xe=x[0]*K[ye].x+x[3]*K[ye].y+x[6]*K[ye].z,nt=x[0]*K[he].x+x[3]*K[he].y+x[6]*K[he].z,at=x[0]*K[Ce].x+x[3]*K[Ce].y+x[6]*K[Ce].z,rt=x[0]*K[ke].x+x[3]*K[ke].y+x[6]*K[ke].z,et=x[1]*K[ye].x+x[4]*K[ye].y+x[7]*K[ye].z,Je=x[1]*K[he].x+x[4]*K[he].y+x[7]*K[he].z,$e=x[1]*K[Ce].x+x[4]*K[Ce].y+x[7]*K[Ce].z,We=x[1]*K[ke].x+x[4]*K[ke].y+x[7]*K[ke].z,ut=x[5]*K[ye].y+x[8]*K[ye].z,ot=x[5]*K[he].y+x[8]*K[he].z,J=x[5]*K[Ce].y+x[8]*K[Ce].z,re=x[5]*K[ke].y+x[8]*K[ke].z,de[He]=Xe+Se.x,de[st]=nt+Se.x,de[V]=at+Se.x,de[Te]=rt+Se.x,de[He+1]=et+Se.y,de[st+1]=Je+Se.y,de[V+1]=$e+Se.y,de[Te+1]=We+Se.y,de[He+2]=ut+Se.z,de[st+2]=ot+Se.z,de[V+2]=J+Se.z,de[Te+2]=re+Se.z,ce[He]=v.r,ce[st]=v.r,ce[V]=v.r,ce[Te]=v.r,ce[He+1]=v.g,ce[st+1]=v.g,ce[V+1]=v.g,ce[Te+1]=v.g,ce[He+2]=v.b,ce[st+2]=v.b,ce[V+2]=v.b,ce[Te+2]=v.b,le=x[0]*k[ye].x+x[3]*k[ye].y+x[6]*k[ye].z,Re=x[0]*k[he].x+x[3]*k[he].y+x[6]*k[he].z,xe=x[0]*k[Ce].x+x[3]*k[Ce].y+x[6]*k[Ce].z,Ye=x[0]*k[ke].x+x[3]*k[ke].y+x[6]*k[ke].z,Ge=x[1]*k[ye].x+x[4]*k[ye].y+x[7]*k[ye].z,q=x[1]*k[he].x+x[4]*k[he].y+x[7]*k[he].z,_e=x[1]*k[Ce].x+x[4]*k[Ce].y+x[7]*k[Ce].z,Oe=x[1]*k[ke].x+x[4]*k[ke].y+x[7]*k[ke].z,Ke=x[5]*k[ye].y+x[8]*k[ye].z,be=x[5]*k[he].y+x[8]*k[he].z,Ue=x[5]*k[Ce].y+x[8]*k[Ce].z,ee=x[5]*k[ke].y+x[8]*k[ke].z,se===0?(ue[He]=le,ue[V]=xe,ue[Te]=Ye,ue[He+1]=Ge,ue[V+1]=_e,ue[Te+1]=Oe,ue[He+2]=Ke,ue[V+2]=Ue,ue[Te+2]=ee,pe[H]=ye+Y,pe[H+1]=Ce+Y,pe[H+2]=ke+Y,B.faceidx+=3):se===je-1?(ue[He]=le,ue[st]=Re,ue[V]=xe,ue[He+1]=Ge,ue[st+1]=q,ue[V+1]=_e,ue[He+2]=Ke,ue[st+2]=be,ue[V+2]=Ue,pe[H]=ye+Y,pe[H+1]=he+Y,pe[H+2]=Ce+Y,B.faceidx+=3):(ue[He]=le,ue[st]=Re,ue[Te]=Ye,ue[He+1]=Ge,ue[st+1]=q,ue[Te+1]=Oe,ue[He+2]=Ke,ue[st+2]=be,ue[Te+2]=ee,ue[st]=Re,ue[V]=xe,ue[Te]=Ye,ue[st+1]=q,ue[V+1]=_e,ue[Te+1]=Oe,ue[st+2]=be,ue[V+2]=Ue,ue[Te+2]=ee,pe[H]=ye+Y,pe[H+1]=he+Y,pe[H+2]=ke+Y,pe[H+3]=he+Y,pe[H+4]=Ce+Y,pe[H+5]=ke+Y,B.faceidx+=6)}}B.vertices+=G}R.drawCylinder=g;function T(f,i,l,p,v){if(!i||!l)return;v=v||{r:0,g:0,b:0};let b=new c.Vector3(l.x-i.x,l.y-i.y,l.z-i.z);var s=m(b.x,b.y,b.z);b=b.normalize();var h=A.basisVectors.length,E=A.basisVectors,x=h+2,D=f.updateGeoGroup(x),z=D.vertices,P,G,B,K,k,U,W=D.vertexArray,F=D.normalArray,Y=D.colorArray,j=D.faceArray;for(P=z*3,W[P]=i.x,W[P+1]=i.y,W[P+2]=i.z,F[P]=-b.x,F[P+1]=-b.y,F[P+2]=-b.z,Y[P]=v.r,Y[P+1]=v.g,Y[P+2]=v.b,W[P+3]=l.x,W[P+4]=l.y,W[P+5]=l.z,F[P+3]=b.x,F[P+4]=b.y,F[P+5]=b.z,Y[P+3]=v.r,Y[P+4]=v.g,Y[P+5]=v.b,P+=6,B=0;B<h;++B){var H=E[B].clone();H.multiplyScalar(p),K=s[0]*H.x+s[3]*H.y+s[6]*H.z,k=s[1]*H.x+s[4]*H.y+s[7]*H.z,U=s[5]*H.y+s[8]*H.z,W[P]=K+i.x,W[P+1]=k+i.y,W[P+2]=U+i.z,F[P]=K,F[P+1]=k,F[P+2]=U,Y[P]=v.r,Y[P+1]=v.g,Y[P+2]=v.b,P+=3}for(D.vertices+=h+2,G=D.faceidx,B=0;B<h;B++){var Z=z+2+B,ne=z+2+(B+1)%h;j[G]=Z,j[G+1]=ne,j[G+2]=z,G+=3,j[G]=Z,j[G+1]=ne,j[G+2]=z+1,G+=3}D.faceidx+=6*h}R.drawCone=T;class O{constructor(){this.cache=new Map}getVerticesForRadius(i,l){l=l||2,this.cache.has(l)||this.cache.set(l,new Map);let p=this.cache.get(l);if(p.has(i))return p.get(i);var v={vertices:[],verticesRows:[],normals:[]},b=16*l,s=10*l;i<1&&(b=10*l,s=8*l);var h=0,E=Math.PI*2,x=0,D=Math.PI,z,P;for(P=0;P<=s;P++){let B=[];for(z=0;z<=b;z++){let K=z/b,k=P/s,U=-i*Math.cos(h+K*E)*Math.sin(x+k*D),W=i*Math.cos(x+k*D),F=i*Math.sin(h+K*E)*Math.sin(x+k*D);var G=new c.Vector3(U,W,F);G.normalize(),v.vertices.push({x:U,y:W,z:F}),v.normals.push(G),B.push(v.vertices.length-1)}v.verticesRows.push(B)}return p.set(i,v),v}}var w=new O;function M(f,i,l,p,v){var b=w.getVerticesForRadius(l,v),s=b.vertices,h=b.normals,E=f.updateGeoGroup(s.length),x=E.vertices,D=E.vertexArray,z=E.colorArray,P=E.faceArray,G=E.lineArray,B=E.normalArray;for(let U=0,W=s.length;U<W;++U){let F=3*(x+U),Y=s[U];D[F]=Y.x+i.x,D[F+1]=Y.y+i.y,D[F+2]=Y.z+i.z,z[F]=p.r,z[F+1]=p.g,z[F+2]=p.b}E.vertices+=s.length;let K=b.verticesRows,k=K.length-1;for(let U=0;U<k;U++){let W=K[U].length-1;for(let F=0;F<W;F++){let Y=E.faceidx,j=E.lineidx,H=K[U][F+1]+x,Z=H*3,ne=K[U][F]+x,se=ne*3,me=K[U+1][F]+x,de=me*3,ue=K[U+1][F+1]+x,ce=ue*3,pe=h[H-x],De=h[ne-x],we=h[me-x],je=h[ue-x];Math.abs(s[H-x].y)===l?(B[Z]=pe.x,B[de]=we.x,B[ce]=je.x,B[Z+1]=pe.y,B[de+1]=we.y,B[ce+1]=je.y,B[Z+2]=pe.z,B[de+2]=we.z,B[ce+2]=je.z,P[Y]=H,P[Y+1]=me,P[Y+2]=ue,G[j]=H,G[j+1]=me,G[j+2]=H,G[j+3]=ue,G[j+4]=me,G[j+5]=ue,E.faceidx+=3,E.lineidx+=6):Math.abs(s[me-x].y)===l?(B[Z]=pe.x,B[se]=De.x,B[de]=we.x,B[Z+1]=pe.y,B[se+1]=De.y,B[de+1]=we.y,B[Z+2]=pe.z,B[se+2]=De.z,B[de+2]=we.z,P[Y]=H,P[Y+1]=ne,P[Y+2]=me,G[j]=H,G[j+1]=ne,G[j+2]=H,G[j+3]=me,G[j+4]=ne,G[j+5]=me,E.faceidx+=3,E.lineidx+=6):(B[Z]=pe.x,B[se]=De.x,B[ce]=je.x,B[Z+1]=pe.y,B[se+1]=De.y,B[ce+1]=je.y,B[Z+2]=pe.z,B[se+2]=De.z,B[ce+2]=je.z,B[se]=De.x,B[de]=we.x,B[ce]=je.x,B[se+1]=De.y,B[de+1]=we.y,B[ce+1]=je.y,B[se+2]=De.z,B[de+2]=we.z,B[ce+2]=je.z,P[Y]=H,P[Y+1]=ne,P[Y+2]=ue,P[Y+3]=ne,P[Y+4]=me,P[Y+5]=ue,G[j]=H,G[j+1]=ne,G[j+2]=H,G[j+3]=ue,G[j+4]=ne,G[j+5]=me,G[j+6]=me,G[j+7]=ue,E.faceidx+=6,E.lineidx+=8)}}}R.drawSphere=M})(S||(S={}))},"./src/GLModel.ts":(o,u,a)=>{a.r(u),a.d(u,{GLModel:()=>M});var c=a("./src/WebGL/index.ts"),y=a("./src/WebGL/shapes/index.ts"),S=a("./src/WebGL/math/index.ts"),R=a("./src/colors.ts"),m=a("./src/GLDraw.ts"),_=a("./src/glcartoon.ts"),A=a("./src/utilities.ts"),g=a("./src/Gradient.ts"),T=a("./src/parsers/index.ts"),O=a("./node_modules/netcdfjs/lib-esm/index.js"),w=a("./src/parsers/utils/assignBonds.ts");class M{static sameObj(i,l){return i&&l?JSON.stringify(i)==JSON.stringify(l):i==l}constructor(i,l){this.atoms=[],this.frames=[],this.box=null,this.atomdfs=null,this.id=0,this.hidden=!1,this.molObj=null,this.renderedMolObj=null,this.lastColors=null,this.modelData={},this.modelDatas=null,this.idMatrix=new S.Matrix4,this.dontDuplicateAtoms=!0,this.defaultColor=R.elementColors.defaultColor,this.defaultStickRadius=.25,this.options=l||{},this.ElementColors=this.options.defaultcolors?this.options.defaultcolors:R.elementColors.defaultColors,this.defaultSphereRadius=this.options.defaultSphereRadius?this.options.defaultSphereRadius:1.5,this.defaultCartoonQuality=this.options.cartoonQuality?this.options.cartoonQuality:10,this.id=i}getRadiusFromStyle(i,l){var p=this.defaultSphereRadius;if(typeof l.radius<"u")p=l.radius;else if(M.vdwRadii[i.elem])p=M.vdwRadii[i.elem];else if(i.elem.length>1){let v=i.elem;v=v[0].toUpperCase()+v[1].toLowerCase(),M.vdwRadii[v]&&(p=M.vdwRadii[v])}return typeof l.scale<"u"&&(p*=l.scale),p}drawAtomCross(i,l){if(i.style.cross){var p=i.style.cross;if(!p.hidden){var v=p.linewidth||M.defaultlineWidth;l[v]||(l[v]=new c.Geometry);var b=l[v].updateGeoGroup(6),s=this.getRadiusFromStyle(i,p),h=[[s,0,0],[-s,0,0],[0,s,0],[0,-s,0],[0,0,s],[0,0,-s]],E=i.clickable||i.hoverable;E&&i.intersectionShape===void 0&&(i.intersectionShape={sphere:[],cylinder:[],line:[]});for(var x=(0,A.getColorFromStyle)(i,p),D=b.vertexArray,z=b.colorArray,P=0;P<6;P++){var G=b.vertices*3;if(b.vertices++,D[G]=i.x+h[P][0],D[G+1]=i.y+h[P][1],D[G+2]=i.z+h[P][2],z[G]=x.r,z[G+1]=x.g,z[G+2]=x.b,E){var B=new S.Vector3(h[P][0],h[P][1],h[P][2]);B.multiplyScalar(.1),B.set(B.x+i.x,B.y+i.y,B.z+i.z),i.intersectionShape.line.push(B)}}}}}getGoodCross(i,l,p,v){for(var b=null,s=-1,h=0,E=i.bonds.length;h<E;h++)if(i.bonds[h]!=l.index){let D=i.bonds[h],z=this.atoms[D],G=new S.Vector3(z.x,z.y,z.z).clone();G.sub(p);let B=G.clone();B.cross(v);var x=B.lengthSq();if(x>s&&(s=x,b=B,s>.1))return b}return b}getSideBondV(i,l,p){var v,b,s,h,E,x=new S.Vector3(i.x,i.y,i.z),D=new S.Vector3(l.x,l.y,l.z),z=D.clone(),P=null;if(z.sub(x),i.bonds.length===1)l.bonds.length===1?(P=z.clone(),Math.abs(P.x)>1e-4?P.y+=1:P.x+=1):(v=(p+1)%l.bonds.length,b=l.bonds[v],s=this.atoms[b],s.index==i.index&&(v=(v+1)%l.bonds.length,b=l.bonds[v],s=this.atoms[b]),h=new S.Vector3(s.x,s.y,s.z),E=h.clone(),E.sub(x),P=E.clone(),P.cross(z));else if(P=this.getGoodCross(i,l,x,z),P.lengthSq()<.01){var G=this.getGoodCross(l,i,x,z);G!=null&&(P=G)}return P.lengthSq()<.01&&(P=z.clone(),Math.abs(P.x)>1e-4?P.y+=1:P.x+=1),P.cross(z),P.normalize(),P}addLine(i,l,p,v,b,s){i[p]=v.x,i[p+1]=v.y,i[p+2]=v.z,l[p]=s.r,l[p+1]=s.g,l[p+2]=s.b,i[p+3]=b.x,i[p+4]=b.y,i[p+5]=b.z,l[p+3]=s.r,l[p+4]=s.g,l[p+5]=s.b}drawBondLines(i,l,p){if(i.style.line){var v=i.style.line;if(!v.hidden){var b,s,h,E,x=v.linewidth||M.defaultlineWidth;p[x]||(p[x]=new c.Geometry);for(var D=p[x].updateGeoGroup(6*i.bonds.length),z=D.vertexArray,P=D.colorArray,G=0;G<i.bonds.length;G++){var B=i.bonds[G],K=l[B];if(K.style.line&&!(i.index>=K.index)){var k=new S.Vector3(i.x,i.y,i.z),U=new S.Vector3(K.x,K.y,K.z),W=k.clone().add(U).multiplyScalar(.5),F=!1,Y=i.clickable||i.hoverable,j=K.clickable||K.hoverable;(Y||j)&&(Y&&(i.intersectionShape===void 0&&(i.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),i.intersectionShape.line.push(k),i.intersectionShape.line.push(W)),j&&(K.intersectionShape===void 0&&(K.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),K.intersectionShape.line.push(W),K.intersectionShape.line.push(U)));var H=(0,A.getColorFromStyle)(i,i.style.line),Z=(0,A.getColorFromStyle)(K,K.style.line);if(i.bondStyles&&i.bondStyles[G]){var ne=i.bondStyles[G];if(!ne.iswire)continue;ne.singleBond&&(F=!0),typeof ne.color1<"u"&&(H=R.CC.color(ne.color1)),typeof ne.color2<"u"&&(Z=R.CC.color(ne.color2))}var se=D.vertices*3,me,de;if(i.bondOrder[G]>1&&i.bondOrder[G]<4&&!F){var ue=this.getSideBondV(i,K,G),ce=U.clone();ce.sub(k),i.bondOrder[G]==2?(ue.multiplyScalar(.1),b=k.clone(),b.add(ue),s=k.clone(),s.sub(ue),h=b.clone(),h.add(ce),E=s.clone(),E.add(ce),H==Z?(D.vertices+=4,this.addLine(z,P,se,b,h,H),this.addLine(z,P,se+6,s,E,H)):(D.vertices+=8,ce.multiplyScalar(.5),me=b.clone(),me.add(ce),de=s.clone(),de.add(ce),this.addLine(z,P,se,b,me,H),this.addLine(z,P,se+6,me,h,Z),this.addLine(z,P,se+12,s,de,H),this.addLine(z,P,se+18,de,E,Z))):i.bondOrder[G]==3&&(ue.multiplyScalar(.1),b=k.clone(),b.add(ue),s=k.clone(),s.sub(ue),h=b.clone(),h.add(ce),E=s.clone(),E.add(ce),H==Z?(D.vertices+=6,this.addLine(z,P,se,k,U,H),this.addLine(z,P,se+6,b,h,H),this.addLine(z,P,se+12,s,E,H)):(D.vertices+=12,ce.multiplyScalar(.5),me=b.clone(),me.add(ce),de=s.clone(),de.add(ce),this.addLine(z,P,se,k,W,H),this.addLine(z,P,se+6,W,U,Z),this.addLine(z,P,se+12,b,me,H),this.addLine(z,P,se+18,me,h,Z),this.addLine(z,P,se+24,s,de,H),this.addLine(z,P,se+30,de,E,Z)))}else H==Z?(D.vertices+=2,this.addLine(z,P,se,k,U,H)):(D.vertices+=4,this.addLine(z,P,se,k,W,H),this.addLine(z,P,se+6,W,U,Z))}}}}}drawAtomSphere(i,l){if(i.style.sphere){var p=i.style.sphere;if(!p.hidden){var v=(0,A.getColorFromStyle)(i,p),b=this.getRadiusFromStyle(i,p);if((i.clickable===!0||i.hoverable)&&i.intersectionShape!==void 0){var s=new S.Vector3(i.x,i.y,i.z);i.intersectionShape.sphere.push(new y.Sphere(s,b))}m.GLDraw.drawSphere(l,i,b,v)}}}drawAtomClickSphere(i){if(i.style.clicksphere){var l=i.style.clicksphere;if(!l.hidden){var p=this.getRadiusFromStyle(i,l);if((i.clickable===!0||i.hoverable)&&i.intersectionShape!==void 0){var v=new S.Vector3(i.x,i.y,i.z);i.intersectionShape.sphere.push(new y.Sphere(v,p))}}}}drawAtomInstanced(i,l){if(i.style.sphere){var p=i.style.sphere;if(!p.hidden){var v=this.getRadiusFromStyle(i,p),b=(0,A.getColorFromStyle)(i,p),s=l.updateGeoGroup(1),h=s.vertices,E=h*3,x=s.vertexArray,D=s.colorArray,z=s.radiusArray;if(x[E]=i.x,x[E+1]=i.y,x[E+2]=i.z,D[E]=b.r,D[E+1]=b.g,D[E+2]=b.b,z[h]=v,(i.clickable===!0||i.hoverable)&&i.intersectionShape!==void 0){var P=new S.Vector3(i.x,i.y,i.z);i.intersectionShape.sphere.push(new y.Sphere(P,v))}s.vertices+=1}}}drawSphereImposter(i,l,p,v){var b=i.updateGeoGroup(4),s,h=b.vertices,E=h*3,x=b.vertexArray,D=b.colorArray;for(s=0;s<4;s++)x[E+3*s]=l.x,x[E+3*s+1]=l.y,x[E+3*s+2]=l.z;var z=b.normalArray;for(s=0;s<4;s++)D[E+3*s]=v.r,D[E+3*s+1]=v.g,D[E+3*s+2]=v.b;z[E+0]=-p,z[E+1]=p,z[E+2]=0,z[E+3]=-p,z[E+4]=-p,z[E+5]=0,z[E+6]=p,z[E+7]=-p,z[E+8]=0,z[E+9]=p,z[E+10]=p,z[E+11]=0,b.vertices+=4;var P=b.faceArray,G=b.faceidx;P[G+0]=h,P[G+1]=h+1,P[G+2]=h+2,P[G+3]=h+2,P[G+4]=h+3,P[G+5]=h,b.faceidx+=6}drawAtomImposter(i,l){if(i.style.sphere){var p=i.style.sphere;if(!p.hidden){var v=this.getRadiusFromStyle(i,p),b=(0,A.getColorFromStyle)(i,p);if((i.clickable===!0||i.hoverable)&&i.intersectionShape!==void 0){var s=new S.Vector3(i.x,i.y,i.z);i.intersectionShape.sphere.push(new y.Sphere(s,v))}this.drawSphereImposter(l,i,v,b)}}}calculateDashes(i,l,p,v,b){var s=Math.sqrt(Math.pow(i.x-l.x,2)+Math.pow(i.y-l.y,2)+Math.pow(i.z-l.z,2));p=Math.max(p,0),b=Math.max(b,0)+2*p,v=Math.max(v,.001),v+b>s&&(v=s,b=0);var h=Math.floor((s-v)/(v+b))+1,E=h*v;b=(s-E)/h;for(var x,D=new S.Vector3(i.x,i.y,i.z),z=new S.Vector3((l.x-i.x)/(s/b),(l.y-i.y)/(s/b),(l.z-i.z)/(s/b)),P=new S.Vector3((l.x-i.x)/(s/v),(l.y-i.y)/(s/v),(l.z-i.z)/(s/v)),G=[],B=0;B<h;B++)x=new S.Vector3(D.x+P.x,D.y+P.y,D.z+P.z),G.push({from:D,to:x}),D=new S.Vector3(x.x+z.x,x.y+z.y,x.z+z.z);return G}static drawStickImposter(i,l,p,v,b,s=0,h=0){for(var E=i.updateGeoGroup(4),x=E.vertices,D=x*3,z=E.vertexArray,P=E.colorArray,G=E.radiusArray,B=E.normalArray,K=b.r,k=b.g,U=b.b,W=function(Z){var ne=-Z;return ne==0&&(ne=-1e-4),ne},F=D,Y=0;Y<4;Y++)z[F]=l.x,B[F]=p.x,P[F]=K,F++,z[F]=l.y,B[F]=p.y,P[F]=k,F++,z[F]=l.z,B[F]=p.z,Y<2?P[F]=U:P[F]=W(U),F++;E.vertices+=4,G[x]=-v,G[x+1]=v,G[x+2]=-v,G[x+3]=v;var j=E.faceArray,H=E.faceidx;j[H+0]=x,j[H+1]=x+1,j[H+2]=x+2,j[H+3]=x+2,j[H+4]=x+3,j[H+5]=x,E.faceidx+=6}drawBondSticks(i,l,p){var v,b;if(i.style.stick){var s=i.style.stick;if(!s.hidden){var h=s.radius||this.defaultStickRadius,E=s.doubleBondScaling||.4,x=s.tripleBondScaling||.25,D=((v=s.dashedBondConfig)===null||v===void 0?void 0:v.dashLength)||.1,z=((b=s.dashedBondConfig)===null||b===void 0?void 0:b.gapLength)||.25,P=h,G=s.singleBonds||!1,B=s.dashedBonds||!1,K=0,k=0,U,W,F,Y,j,H,Z,ne,se,me,de,ue=(0,A.getColorFromStyle)(i,s),ce,pe,De;!i.capDrawn&&i.bonds.length<4&&(K=2);var we=_e=>{var Oe=p.imposter?M.drawStickImposter:m.GLDraw.drawCylinder;return!B&&_e>=1?Oe:(Ke,be,Ue,ee,He,st=0,V=0,Te=.1,Se=.25)=>{var te=this.calculateDashes(be,Ue,ee,Te,Se);te.forEach(ve=>{Oe(Ke,ve.from,ve.to,ee,He,st,V)})}};for(F=0;F<i.bonds.length;F++){var je=we(i.bondOrder[F]),ye=i.bonds[F],he=l[ye];if(ce=pe=De=null,i.index<he.index){var Ce=he.style;if(!Ce.stick||Ce.stick.hidden)continue;var ke=(0,A.getColorFromStyle)(he,Ce.stick);if(P=h,Y=G,i.bondStyles&&i.bondStyles[F]){if(j=i.bondStyles[F],j.iswire)continue;j.radius&&(P=j.radius),j.singleBond&&(Y=!0),typeof j.color1<"u"&&(ue=R.CC.color(j.color1)),typeof j.color2<"u"&&(ke=R.CC.color(j.color2))}var Xe=new S.Vector3(i.x,i.y,i.z),nt=new S.Vector3(he.x,he.y,he.z);if(i.bondOrder[F]<=1||Y||i.bondOrder[F]>3){if(i.bondOrder[F]<1&&(P*=i.bondOrder[F]),!he.capDrawn&&he.bonds.length<4&&(k=2),ue!=ke?(ce=new S.Vector3().addVectors(Xe,nt).multiplyScalar(.5),je(p,Xe,ce,P,ue,K,0,D,z),je(p,ce,nt,P,ke,0,k,D,z)):je(p,Xe,nt,P,ue,K,k,D,z),U=i.clickable||i.hoverable,W=he.clickable||he.hoverable,U||W){if(ce||(ce=new S.Vector3().addVectors(Xe,nt).multiplyScalar(.5)),U){var at=new y.Cylinder(Xe,ce,P),rt=new y.Sphere(Xe,P);i.intersectionShape.cylinder.push(at),i.intersectionShape.sphere.push(rt)}if(W){var et=new y.Cylinder(nt,ce,P),Je=new y.Sphere(nt,P);he.intersectionShape.cylinder.push(et),he.intersectionShape.sphere.push(Je)}}}else if(i.bondOrder[F]>1){var $e=0,We=0;P!=h&&($e=2,We=2);var ut=nt.clone(),ot=null;ut.sub(Xe);var J,re,le,Re,xe;ot=this.getSideBondV(i,he,F),i.bondOrder[F]==2?(J=P*E,ot.multiplyScalar(J*1.5),re=Xe.clone(),re.add(ot),le=Xe.clone(),le.sub(ot),Re=re.clone(),Re.add(ut),xe=le.clone(),xe.add(ut),ue!=ke?(ce=new S.Vector3().addVectors(re,Re).multiplyScalar(.5),pe=new S.Vector3().addVectors(le,xe).multiplyScalar(.5),je(p,re,ce,J,ue,$e,0),je(p,ce,Re,J,ke,0,We),je(p,le,pe,J,ue,$e,0),je(p,pe,xe,J,ke,0,We)):(je(p,re,Re,J,ue,$e,We),je(p,le,xe,J,ue,$e,We)),U=i.clickable||i.hoverable,W=he.clickable||he.hoverable,(U||W)&&(ce||(ce=new S.Vector3().addVectors(re,Re).multiplyScalar(.5)),pe||(pe=new S.Vector3().addVectors(le,xe).multiplyScalar(.5)),U&&(H=new y.Cylinder(re,ce,J),Z=new y.Cylinder(le,pe,J),i.intersectionShape.cylinder.push(H),i.intersectionShape.cylinder.push(Z)),W&&(se=new y.Cylinder(Re,ce,J),me=new y.Cylinder(xe,pe,J),he.intersectionShape.cylinder.push(se),he.intersectionShape.cylinder.push(me)))):i.bondOrder[F]==3&&(J=P*x,ot.cross(ut),ot.normalize(),ot.multiplyScalar(J*3),re=Xe.clone(),re.add(ot),le=Xe.clone(),le.sub(ot),Re=re.clone(),Re.add(ut),xe=le.clone(),xe.add(ut),ue!=ke?(ce=new S.Vector3().addVectors(re,Re).multiplyScalar(.5),pe=new S.Vector3().addVectors(le,xe).multiplyScalar(.5),De=new S.Vector3().addVectors(Xe,nt).multiplyScalar(.5),je(p,re,ce,J,ue,$e,0),je(p,ce,Re,J,ke,0,We),je(p,Xe,De,J,ue,K,0),je(p,De,nt,J,ke,0,k),je(p,le,pe,J,ue,$e,0),je(p,pe,xe,J,ke,0,We)):(je(p,re,Re,J,ue,$e,We),je(p,Xe,nt,J,ue,K,k),je(p,le,xe,J,ue,$e,We)),U=i.clickable||i.hoverable,W=he.clickable||he.hoverable,(U||W)&&(ce||(ce=new S.Vector3().addVectors(re,Re).multiplyScalar(.5)),pe||(pe=new S.Vector3().addVectors(le,xe).multiplyScalar(.5)),De||(De=new S.Vector3().addVectors(Xe,nt).multiplyScalar(.5)),U&&(H=new y.Cylinder(re.clone(),ce.clone(),J),Z=new y.Cylinder(le.clone(),pe.clone(),J),ne=new y.Cylinder(Xe.clone(),De.clone(),J),i.intersectionShape.cylinder.push(H),i.intersectionShape.cylinder.push(Z),i.intersectionShape.cylinder.push(ne)),W&&(se=new y.Cylinder(Re.clone(),ce.clone(),J),me=new y.Cylinder(xe.clone(),pe.clone(),J),de=new y.Cylinder(nt.clone(),De.clone(),J),he.intersectionShape.cylinder.push(se),he.intersectionShape.cylinder.push(me),he.intersectionShape.cylinder.push(de))))}}}var Ye=!1,Ge=0,q=!1;for(F=0;F<i.bonds.length;F++)Y=G,i.bondStyles&&i.bondStyles[F]&&(j=i.bondStyles[F],j.singleBond&&(Y=!0),j.radius&&j.radius!=h&&(q=!0)),(Y||i.bondOrder[F]==1)&&Ge++;q?Ge>0&&(Ye=!0):Ge==0&&(i.bonds.length>0||s.showNonBonded)&&(Ye=!0),Ye&&(P=h,p.imposter?this.drawSphereImposter(p.sphereGeometry,i,P,ue):m.GLDraw.drawSphere(p,i,P,ue))}}}createMolObj(i,l){l=l||{};var p=new c.Object3D,v=[],b={},s={},h=this.drawAtomSphere,E=null,x=null;l.supportsImposters?(h=this.drawAtomImposter,E=new c.Geometry(!0),E.imposter=!0,x=new c.Geometry(!0,!0),x.imposter=!0,x.sphereGeometry=new c.Geometry(!0),x.sphereGeometry.imposter=!0,x.drawnCaps={}):l.supportsAIA?(h=this.drawAtomInstanced,E=new c.Geometry(!1,!0,!0),E.instanced=!0,x=new c.Geometry(!0)):(E=new c.Geometry(!0),x=new c.Geometry(!0));var D,z,P,G,B={},K=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(D=0,P=i.length;D<P;D++){var k=i[D];if(k&&k.style){(k.clickable||k.hoverable)&&k.intersectionShape===void 0&&(k.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),G={line:void 0,cross:void 0,stick:void 0,sphere:void 0};for(z in G)k.style[z]?k.style[z].opacity?G[z]=parseFloat(k.style[z].opacity):G[z]=1:G[z]=void 0,B[z]?G[z]!=null&&B[z]!=G[z]&&(console.log("Warning: "+z+" opacity is ambiguous"),B[z]=1):B[z]=G[z];h.call(this,k,E),this.drawAtomClickSphere(k),this.drawAtomCross(k,s),this.drawBondLines(k,i,b),this.drawBondSticks(k,i,x),typeof k.style.cartoon<"u"&&!k.style.cartoon.hidden&&(k.style.cartoon.color==="spectrum"&&typeof k.resi=="number"&&!k.hetflag&&(k.resi<K[0]&&(K[0]=k.resi),k.resi>K[1]&&(K[1]=k.resi)),v.push(k))}}if(v.length>0&&(0,_.drawCartoon)(p,v,K,this.defaultCartoonQuality),E&&E.vertices>0){E.initTypedArrays();var U=null,W=null;E.imposter?U=new c.SphereImposterMaterial({ambient:0,vertexColors:!0,reflectivity:0}):E.instanced?(W=new c.Geometry(!0),m.GLDraw.drawSphere(W,{x:0,y:0,z:0},1,new R.Color(.5,.5,.5)),W.initTypedArrays(),U=new c.InstancedMaterial({sphereMaterial:new c.MeshLambertMaterial({ambient:0,vertexColors:!0,reflectivity:0}),sphere:W})):U=new c.MeshLambertMaterial({ambient:0,vertexColors:!0,reflectivity:0}),B.sphere<1&&B.sphere>=0&&(U.transparent=!0,U.opacity=B.sphere),W=new c.Mesh(E,U),p.add(W)}if(x.vertices>0){var F=null,Y=null,j=x.sphereGeometry;(!j||typeof j.vertices>"u"||j.vertices==0)&&(j=null),x.initTypedArrays(),j&&j.initTypedArrays();var H={ambient:0,vertexColors:!0,reflectivity:0};x.imposter?(F=new c.StickImposterMaterial(H),Y=new c.SphereImposterMaterial(H)):(F=new c.MeshLambertMaterial(H),Y=new c.MeshLambertMaterial(H),F.wireframe&&(x.setUpWireframe(),j&&j.setUpWireframe())),B.stick<1&&B.stick>=0&&(F.transparent=!0,F.opacity=B.stick,Y.transparent=!0,Y.opacity=B.stick);var Z=new c.Mesh(x,F);if(p.add(Z),j){var ne=new c.Mesh(j,Y);p.add(ne)}}var se;for(D in b)if(b.hasOwnProperty(D)){se=D;var me=new c.LineBasicMaterial({linewidth:se,vertexColors:!0});B.line<1&&B.line>=0&&(me.transparent=!0,me.opacity=B.line),b[D].initTypedArrays();var de=new c.Line(b[D],me,c.LineStyle.LinePieces);p.add(de)}for(D in s)if(s.hasOwnProperty(D)){se=D;var ue=new c.LineBasicMaterial({linewidth:se,vertexColors:!0});B.cross<1&&B.cross>=0&&(ue.transparent=!0,ue.opacity=B.cross),s[D].initTypedArrays();var ce=new c.Line(s[D],ue,c.LineStyle.LinePieces);p.add(ce)}if(this.dontDuplicateAtoms&&this.modelData.symmetries&&this.modelData.symmetries.length>0){var pe=new c.Object3D,De;for(De=0;De<this.modelData.symmetries.length;De++){var we=new c.Object3D;we=p.clone(),we.matrix.copy(this.modelData.symmetries[De]),we.matrixAutoUpdate=!1,pe.add(we)}return pe}return p}getInternalState(){return{atoms:this.atoms,frames:this.frames}}setInternalState(i){this.atoms=i.atoms,this.frames=i.frames,this.molObj=null}getCrystData(){if(this.modelData.cryst){if(!this.modelData.cryst.matrix){const i=this.modelData.cryst;this.modelData.cryst.matrix=(0,S.conversionMatrix3)(i.a,i.b,i.c,i.alpha,i.beta,i.gamma)}return this.modelData.cryst}else return null}setCrystData(i,l,p,v,b,s){i=i||1,l=l||1,p=p||1,v=v||90,b=b||90,s=s||90;const h=(0,S.conversionMatrix3)(i,l,p,v,b,s);this.modelData.cryst={a:i,b:l,c:p,alpha:v,beta:b,gamma:s,matrix:h}}setCrystMatrix(i){i=i||new S.Matrix3(1,0,0,0,1,0,0,0,1),this.modelData.cryst={matrix:i}}getSymmetries(){return typeof this.modelData.symmetries>"u"&&(this.modelData.symmetries=[this.idMatrix]),this.modelData.symmetries}setSymmetries(i){typeof i>"u"?this.modelData.symmetries=[this.idMatrix]:this.modelData.symmetries=i}getID(){return this.id}getNumFrames(){return this.frames.numFrames!=null?this.frames.numFrames:this.frames.length}adjustCoord(i,l,p,v){var b=l-i;return b<-p?l+v:b>p?l-v:l}adjustCoordinatesToBox(){if(this.box&&this.atomdfs)for(var i=this.box[0],l=this.box[1],p=this.box[2],v=i*.9,b=l*.9,s=p*.9,h=0;h<this.atomdfs.length;h++)for(var E=this.atomdfs[h],x=1;x<E.length;x++){var D=this.atoms[E[x][0]],z=this.atoms[E[x][1]];D.x=this.adjustCoord(z.x,D.x,v,i),D.y=this.adjustCoord(z.y,D.y,b,l),D.z=this.adjustCoord(z.z,D.z,s,p)}}setFrame(i,l){var p=this.getNumFrames();let v=this;return new Promise(function(b,s){if(p==0&&b(),(i<0||i>=p)&&(i=p-1),v.frames.url!=null){var h=v.frames.url;(0,A.getbin)(h+"/traj/frame/"+i+"/"+v.frames.path,void 0,"POST",void 0).then(function(E){for(var x=new Float32Array(E,44),D=0,z=0;z<v.atoms.length;z++)v.atoms[z].x=x[D++],v.atoms[z].y=x[D++],v.atoms[z].z=x[D++];v.box&&v.atomdfs&&v.adjustCoordinatesToBox(),b()}).catch(s)}else v.atoms=v.frames[i],b();v.molObj=null,v.modelDatas&&i<v.modelDatas.length&&(v.modelData=v.modelDatas[i],v.unitCellObjects&&l&&(l.removeUnitCell(v),l.addUnitCell(v)))})}addFrame(i){this.frames.push(i)}vibrate(i=10,l=1,p=!1,v,b){var s=0,h=i;p&&(s=-i,h=i),this.frames!==void 0&&this.frames.origIndex!==void 0?this.setFrame(this.frames.origIndex):this.setFrame(0),s<h&&(this.frames=[]),p&&(this.frames.origIndex=i);for(var E=s;E<h;E++){var x=[],D=this.frames.length;if(E==0&&!b){this.frames.push(this.atoms);continue}for(var z=0;z<this.atoms.length;z++){var P=(0,A.getAtomProperty)(this.atoms[z],"dx"),G=(0,A.getAtomProperty)(this.atoms[z],"dy"),B=(0,A.getAtomProperty)(this.atoms[z],"dz"),K=new S.Vector3(P,G,B),k=new S.Vector3(this.atoms[z].x,this.atoms[z].y,this.atoms[z].z),U=E*l/i;K.multiplyScalar(U),k.add(K);var W={};for(var F in this.atoms[z])W[F]=this.atoms[z][F];if(W.x=k.x,W.y=k.y,W.z=k.z,x.push(W),v&&b){var Y=(0,A.extend)({},b),j=new S.Vector3(P,G,B);if(j.multiplyScalar(l),j.add(k),Y.start=k,Y.end=j,Y.frame=D,!Y.color){var H=W.style.sphere;H||(H=W.style.stick),H||(H=W.style.line),Y.color=(0,A.getColorFromStyle)(W,H)}v.addArrow(Y)}}this.frames.push(x)}}setAtomDefaults(i){for(let l=0;l<i.length;l++){let p=i[l];p&&(p.style=p.style||(0,A.deepCopy)(M.defaultAtomStyle),p.color=p.color||this.ElementColors[p.elem]||this.defaultColor,p.model=this.id,(p.clickable||p.hoverable)&&(p.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}))}}addMolData(i,l,p={}){var v=M.parseMolData(i,l,p);this.dontDuplicateAtoms=!p.duplicateAssemblyAtoms;var b=v.modelData;if(b&&(Array.isArray(b)?(this.modelData=b[0],p.frames&&(this.modelDatas=b)):this.modelData=b),v.box?this.box=v.box:this.box=null,this.frames.length==0){for(let h=0;h<v.length;h++)v[h].length!=0&&this.frames.push(v[h]);this.frames[0]&&(this.atoms=this.frames[0])}else if(p.frames)for(let h=0;h<v.length;h++)this.frames.push(v[h]);else for(var s=0;s<v.length;s++)this.addAtoms(v[s]);for(let h=0;h<this.frames.length;h++)this.setAtomDefaults(this.frames[h]);p.vibrate&&p.vibrate.frames&&p.vibrate.amplitude&&this.vibrate(p.vibrate.frames,p.vibrate.amplitude),p.style&&this.setStyle({},p.style)}setDontDuplicateAtoms(i){this.dontDuplicateAtoms=i}setModelData(i){this.modelData=i}propertyMatches(i,l){if(i==l)return!0;if(typeof l=="string"&&typeof i=="number"){var p=l.match(/(-?\d+)\s*-\s*(-?\d+)/);if(p){var v=parseInt(p[1]),b=parseInt(p[2]);if(p&&i>=v&&i<=b)return!0}}return!1}static deepCopyAndCache(i,l){if(typeof i!="object"||i==null||i.__cache_created)return i;const p={};for(const v in i){const b=i[v];if(Array.isArray(b)){p[v]=[];for(let s=0;s<b.length;s++)p[v].push(M.deepCopyAndCache(b[s],l))}else typeof b=="object"&&v!="properties"&&v!="model"?p[v]=M.deepCopyAndCache(b,l):p[v]=b;if(v=="and"||v=="or"){const s=[];for(const h of p[v]){const E=new Set;for(const x of l.selectedAtoms(h))E.add(x.index);s.push(E)}if(v=="and"){const h=function(x,D){const z=new Set;for(const P of D)x.has(P)&&z.add(P);return z};let E=new Set(s[0]);for(const x of s.splice(1))E=h(E,x);p[v].__cached_results=E}else if(v=="or"){const h=new Set;for(const E of s)for(const x of E)h.add(x);p[v].__cached_results=h}}}return p.__cache_created=!0,p}atomIsSelected(i,l){if(typeof l>"u")return!0;var p=!!l.invert,v=!0;for(var b in l)if(b=="and"||b=="or"||b=="not"){if(b=="not"){if(this.atomIsSelected(i,l[b])){v=!1;break}}else if(l[b].__cached_results===void 0&&(l=M.deepCopyAndCache(l,this)),v=l[b].__cached_results.has(i.index),!v)break}else if(b==="predicate"){if(!l.predicate(i)){v=!1;break}}else if(b=="properties"&&i[b]){for(var s in l.properties)if(!s.startsWith("__cache")){if(typeof i.properties[s]>"u"){v=!1;break}if(i.properties[s]!=l.properties[s]){v=!1;break}}}else if(l.hasOwnProperty(b)&&!M.ignoredKeys.has(b)&&!b.startsWith("__cache")){if(typeof i[b]>"u"){v=!1;break}var h=!1;if(b==="bonds"){var E=l[b];if(E!=i.bonds.length){v=!1;break}}else if(Array.isArray(l[b])){var x=l[b],D=i[b];for(let z=0;z<x.length;z++)if(this.propertyMatches(D,x[z])){h=!0;break}if(!h){v=!1;break}}else{let z=l[b];if(!this.propertyMatches(i[b],z)){v=!1;break}}}return p?!v:v}static squaredDistance(i,l){var p=l.x-i.x,v=l.y-i.y,b=l.z-i.z;return p*p+v*v+b*b}expandAtomList(i,l){if(l<=0)return i;for(var p=(0,A.getExtent)(i,void 0),v=[[],[],[]],b=0;b<3;b++)v[0][b]=p[0][b]-l,v[1][b]=p[1][b]+l,v[2][b]=p[2][b];var s=[];for(let D=0;D<this.atoms.length;D++){var h=this.atoms[D].x,E=this.atoms[D].y,x=this.atoms[D].z;h>=v[0][0]&&h<=v[1][0]&&E>=v[0][1]&&E<=v[1][1]&&x>=v[0][2]&&x<=v[1][2]&&(h>=p[0][0]&&h<=p[1][0]&&E>=p[0][1]&&E<=p[1][1]&&x>=p[0][2]&&x<=p[1][2]||s.push(this.atoms[D]))}return s}static getFloat(i){return typeof i=="number"?i:parseFloat(i)}selectedAtoms(i,l){var p=[];i=M.deepCopyAndCache(i||{},this),l||(l=this.atoms);for(var v=l.length,b=0;b<v;b++){var s=l[b];s&&this.atomIsSelected(s,i)&&p.push(s)}if(i.hasOwnProperty("expand")){const W=M.getFloat(i.expand);let F=this.expandAtomList(p,W),Y=p.length;const j=W*W;for(let H=0;H<F.length;H++)for(let Z=0;Z<Y;Z++){var h=M.squaredDistance(F[H],p[Z]);h<j&&h>0&&p.push(F[H])}}if(i.hasOwnProperty("within")&&i.within.hasOwnProperty("sel")&&i.within.hasOwnProperty("distance")){var E=this.selectedAtoms(i.within.sel,this.atoms),x={};const W=M.getFloat(i.within.distance),F=W*W;for(let Y=0;Y<E.length;Y++)for(let j=0;j<p.length;j++){let H=M.squaredDistance(E[Y],p[j]);H<F&&H>0&&(x[j]=1)}var D=[];if(i.within.invert)for(let Y=0;Y<p.length;Y++)x[Y]||D.push(p[Y]);else for(let Y in x)D.push(p[Y]);p=D}if(i.hasOwnProperty("byres")){var z={},P=[],G=[];for(let W=0;W<p.length;W++){let F=p[W];var B=F.chain,K=F.resi;if(z[B]===void 0&&(z[B]={}),F.hasOwnProperty("resi")&&z[B][K]===void 0){for(z[B][K]=!0,G.push(F);G.length>0;)if(F=G.pop(),B=F.chain,K=F.resi,P[F.index]===void 0){P[F.index]=!0;for(var k=0;k<F.bonds.length;k++){var U=this.atoms[F.bonds[k]];P[U.index]===void 0&&U.hasOwnProperty("resi")&&U.chain==B&&U.resi==K&&(G.push(U),p.push(U))}}}}}return p}addAtoms(i){this.molObj=null;var l=this.atoms.length,p=[],v;for(v=0;v<i.length;v++)typeof i[v].index>"u"&&(i[v].index=v),typeof i[v].serial>"u"&&(i[v].serial=v),p[i[v].index]=l+v;for(v=0;v<i.length;v++){var b=i[v],s=p[b.index],h=(0,A.extend)({},b);h.index=s,h.bonds=[],h.bondOrder=[],h.model=this.id,h.style=h.style||(0,A.deepCopy)(M.defaultAtomStyle),typeof h.color>"u"&&(h.color=this.ElementColors[h.elem]||this.defaultColor);for(var E=b.bonds?b.bonds.length:0,x=0;x<E;x++){var D=p[b.bonds[x]];typeof D<"u"&&(h.bonds.push(D),h.bondOrder.push(b.bondOrder?b.bondOrder[x]:1))}this.atoms.push(h)}}assignBonds(){(0,w.assignBonds)(this.atoms,{assignBonds:!0})}removeAtoms(i){this.molObj=null;var l=[],p;for(p=0;p<i.length;p++)l[i[p].index]=!0;var v=[];for(p=0;p<this.atoms.length;p++){var b=this.atoms[p];l[b.index]||v.push(b)}this.atoms=[],this.addAtoms(v)}setStyle(i,l,p){typeof l>"u"&&typeof p>"u"&&(l=i,i={}),i=i,typeof l=="string"&&(l=(0,A.specStringToObject)(l));var v=!1,b=this,s=function(E){var x=b.selectedAtoms(i,E);for(let D=0;D<E.length;D++)E[D]&&(E[D].capDrawn=!1);for(let D=0;D<x.length;D++){v=!0,(x[D].clickable||x[D].hoverable)&&(x[D].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),p||(x[D].style={});for(let z in l)l.hasOwnProperty(z)&&(x[D].style[z]=x[D].style[z]||{},Object.assign(x[D].style[z],l[z]))}};if(i.frame!==void 0&&i.frame<this.frames.length){let E=i.frame;E<0&&(E=this.frames.length+E),s(this.frames[E])}else{s(this.atoms);for(var h=0;h<this.frames.length;h++)this.frames[h]!==this.atoms&&s(this.frames[h])}v&&(this.molObj=null)}setClickable(i,l,p){if(l=!!l,p=(0,A.makeFunction)(p),p===null){console.log("Callback is not a function");return}var v=this.selectedAtoms(i,this.atoms),b=v.length;for(let s=0;s<b;s++)v[s].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},v[s].clickable=l,p&&(v[s].callback=p);b>0&&(this.molObj=null)}setHoverable(i,l,p,v){if(l=!!l,p=(0,A.makeFunction)(p),v=(0,A.makeFunction)(v),p===null){console.log("Hover_callback is not a function");return}if(v===null){console.log("Unhover_callback is not a function");return}var b=this.selectedAtoms(i,this.atoms),s=b.length;for(let h=0;h<s;h++)b[h].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},b[h].hoverable=l,p&&(b[h].hover_callback=p),v&&(b[h].unhover_callback=v);s>0&&(this.molObj=null)}enableContextMenu(i,l){l=!!l;var p,v=this.selectedAtoms(i,this.atoms),b=v.length;for(p=0;p<b;p++)v[p].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},v[p].contextMenuEnabled=l;b>0&&(this.molObj=null)}setColorByElement(i,l){if(!(this.molObj!==null&&M.sameObj(l,this.lastColors))){this.lastColors=l;var p=this.selectedAtoms(i,p);p.length>0&&(this.molObj=null);for(var v=0;v<p.length;v++){var b=p[v];typeof l[b.elem]<"u"&&(b.color=l[b.elem])}}}setColorByProperty(i,l,p,v){var b,s,h=this.selectedAtoms(i,h);for(this.lastColors=null,h.length>0&&(this.molObj=null),typeof p=="string"&&typeof g.Gradient.builtinGradients[p]<"u"&&(p=new g.Gradient.builtinGradients[p]),p=p,v||(v=p.range()),v||(v=(0,A.getPropertyRange)(h,l)),b=0;b<h.length;b++){s=h[b];var E=(0,A.getAtomProperty)(s,l);E!=null&&(s.color=p.valueToHex(parseFloat(s.properties[l]),v))}}setColorByFunction(i,l){var p=this.selectedAtoms(i,p);if(typeof l=="function"){this.lastColors=null,p.length>0&&(this.molObj=null);for(let v=0;v<p.length;v++){let b=p[v];b.color=l(b)}}}toCDObject(i=!1){var l={a:[],b:[]};i&&(l.s=[]);for(let v=0;v<this.atoms.length;v++){let b={},s=this.atoms[v];if(b.x=s.x,b.y=s.y,b.z=s.z,s.elem!="C"&&(b.l=s.elem),i){for(var p=0;p<l.s.length&&JSON.stringify(s.style)!==JSON.stringify(l.s[p]);)p++;p===l.s.length&&l.s.push(s.style),p!==0&&(b.s=p)}l.a.push(b);for(let h=0;h<s.bonds.length;h++){let E=v,x=s.bonds[h];if(E>=x)continue;let D={b:E,e:x},z=s.bondOrder[h];z!=1&&(D.o=z),l.b.push(D)}}return l}globj(i,l){(this.molObj===null||l.regen)&&(this.molObj=this.createMolObj(this.atoms,l),this.renderedMolObj&&(i.remove(this.renderedMolObj),this.renderedMolObj=null),this.renderedMolObj=this.molObj.clone(),this.hidden&&(this.renderedMolObj.setVisible(!1),this.molObj.setVisible(!1)),i.add(this.renderedMolObj))}exportVRML(){var i=this.createMolObj(this.atoms,{supportsImposters:!1,supportsAIA:!1});return i.vrml()}removegl(i){this.renderedMolObj&&(this.renderedMolObj.geometry!==void 0&&this.renderedMolObj.geometry.dispose(),this.renderedMolObj.material!==void 0&&this.renderedMolObj.material.dispose(),i.remove(this.renderedMolObj),this.renderedMolObj=null),this.molObj=null}hide(){this.hidden=!0,this.renderedMolObj&&this.renderedMolObj.setVisible(!1),this.molObj&&this.molObj.setVisible(!1)}show(){this.hidden=!1,this.renderedMolObj&&this.renderedMolObj.setVisible(!0),this.molObj&&this.molObj.setVisible(!0)}addPropertyLabels(i,l,p,v){for(var b=this.selectedAtoms(l,b),s=(0,A.deepCopy)(v),h=0;h<b.length;h++){var E=b[h],x=null;typeof E[i]<"u"?x=String(E[i]):typeof E.properties[i]<"u"&&(x=String(E.properties[i])),x!=null&&(s.position=E,p.addLabel(x,s))}}addResLabels(i,l,p,v=!1){var b=[],s=function(E,x){for(var D=E.selectedAtoms(i,D),z={},P=0;P<D.length;P++){var G=D[P],B=G.chain,K=G.resn,k=G.resi,U=K+""+k;z[B]||(z[B]={}),z[B][U]||(z[B][U]=[]),z[B][U].push(G)}var W=(0,A.deepCopy)(p);for(let Y in z)if(z.hasOwnProperty(Y)){var F=z[Y];for(let j in F)if(F.hasOwnProperty(j)){let H=F[j],Z=new S.Vector3(0,0,0);for(let se=0;se<H.length;se++){let me=H[se];Z.x+=me.x,Z.y+=me.y,Z.z+=me.z}Z.divideScalar(H.length),W.position=Z,W.frame=x;let ne=l.addLabel(j,W,void 0,!0);b.push(ne)}}};if(v){var h=this.getNumFrames();let E=this.atoms;for(let x=0;x<h;x++)this.frames[x]&&(this.atoms=this.frames[x],s(this,x));this.atoms=E}else s(this);return b}setupDFS(){this.atomdfs=[];var i=this,l=new Int8Array(this.atoms.length);l.fill(0);for(var p=function(h,E,x){x.push([h,E]);var D=i.atoms[h];l[h]=1;for(var z=0;z<D.bonds.length;z++){var P=D.bonds[z];i.atoms[P]&&!l[P]&&p(P,h,x)}},v=0;v<this.atoms.length;v++){var b=this.atoms[v];if(b&&!l[v]){var s=[];p(v,-1,s),this.atomdfs.push(s)}}}setCoordinatesFromURL(i,l){this.frames=[];var p=this;return this.box&&this.setupDFS(),i.startsWith("http")||(i="http://"+i),(0,A.get)(i+"/traj/numframes/"+l,function(v){if(!isNaN(parseInt(v)))return p.frames.push(p.atoms),p.frames.numFrames=v,p.frames.url=i,p.frames.path=l,p.setFrame(0)})}setCoordinates(i,l){if(l=l||"",!i)return[];if(/\.gz$/.test(l)){l=l.replace(/\.gz$/,"");try{i=(0,A.inflateString)(i)}catch(z){console.log(z)}}var p={mdcrd:"",inpcrd:"",pdb:"",netcdf:"",array:""};if(p.hasOwnProperty(l)){this.frames=[];for(var v=this.atoms.length,b=M.parseCrd(i,l),s=0;s<b.length;){for(var h=[],E=0;E<v;E++){var x={};for(var D in this.atoms[E])x[D]=this.atoms[E][D];h[E]=x,h[E].x=b[s++],h[E].y=b[s++],h[E].z=b[s++]}this.frames.push(h)}return this.atoms=this.frames[0],this.frames}return[]}addAtomSpecs(i){}static parseCrd(i,l){var p=[],v=0;if(l=="pdb")for(var b=i.indexOf(`
ATOM`);b!=-1;){for(;i.slice(b,b+5)==`
ATOM`||i.slice(b,b+7)==`
HETATM`;)p[v++]=parseFloat(i.slice(b+31,b+39)),p[v++]=parseFloat(i.slice(b+39,b+47)),p[v++]=parseFloat(i.slice(b+47,b+55)),b=i.indexOf(`
`,b+54),i.slice(b,b+4)==`
TER`&&(b=i.indexOf(`
`,b+5));b=i.indexOf(`
ATOM`,b)}else if(l=="netcdf"){var s=new O.NetCDFReader(i);p=[].concat.apply([],s.getDataVariable("coordinates"))}else{if(l=="array"||Array.isArray(i))return i.flat(2);{let h=i.indexOf(`
`);l=="inpcrd"&&(h=i.indexOf(`
`,h+1)),i=i.slice(h+1),p=i.match(/\S+/g).map(parseFloat)}}return p}static parseMolData(i,l="",p){if(!i)return[];if(/\.gz$/.test(l)){l=l.replace(/\.gz$/,"");try{l.match(/bcif/i)?i=(0,A.inflateString)(i,!1):i=(0,A.inflateString)(i)}catch(s){console.log(s)}}typeof T.Parsers[l]>"u"&&(l=l.split(".").pop(),typeof T.Parsers[l]>"u"&&(console.log("Unknown format: "+l),i instanceof Uint8Array?l="bcif":i.match(/^@<TRIPOS>MOLECULE/gm)?l="mol2":i.match(/^data_/gm)&&i.match(/^loop_/gm)?l="cif":i.match(/^HETATM/gm)||i.match(/^ATOM/gm)?l="pdb":i.match(/ITEM: TIMESTEP/gm)?l="lammpstrj":i.match(/^.*\n.*\n.\s*(\d+)\s+(\d+)/gm)?l="sdf":i.match(/^%VERSION\s+VERSION_STAMP/gm)?l="prmtop":l="xyz",console.log("Best guess: "+l)));var v=T.Parsers[l],b=v(i,p);return b}}M.defaultAtomStyle={line:{}},M.defaultlineWidth=1,M.vdwRadii={H:1.2,He:1.4,Li:1.82,Be:1.53,B:1.92,C:1.7,N:1.55,O:1.52,F:1.47,Ne:1.54,Na:2.27,Mg:1.73,Al:1.84,Si:2.1,P:1.8,S:1.8,Cl:1.75,Ar:1.88,K:2.75,Ca:2.31,Ni:1.63,Cu:1.4,Zn:1.39,Ga:1.87,Ge:2.11,As:1.85,Se:1.9,Br:1.85,Kr:2.02,Rb:3.03,Sr:2.49,Pd:1.63,Ag:1.72,Cd:1.58,In:1.93,Sn:2.17,Sb:2.06,Te:2.06,I:1.98,Xe:2.16,Cs:3.43,Ba:2.68,Pt:1.75,Au:1.66,Hg:1.55,Tl:1.96,Pb:2.02,Bi:2.07,Po:1.97,At:2.02,Rn:2.2,Fr:3.48,Ra:2.83,U:1.86},M.ignoredKeys=new Set(["props","invert","model","frame","byres","expand","within","and","or","not"])},"./src/GLShape.ts":(o,u,a)=>{a.r(u),a.d(u,{GLShape:()=>O,splitMesh:()=>w});var c=a("./src/WebGL/index.ts"),y=a("./src/WebGL/shapes/index.ts"),S=a("./src/WebGL/math/index.ts"),R=a("./src/colors.ts"),m=a("./src/ProteinSurface4.ts"),_=a("./src/VolumeData.ts"),A=a("./src/GLDraw.ts"),g=a("./src/glcartoon.ts"),T=a("./src/utilities.ts");class O{static finalizeGeo(f){var i=f.updateGeoGroup(0);i.vertices>0&&i.truncateArrayBuffers(!0,!0)}static updateColor(f,i){i=i||R.CC.color(i),f.colorsNeedUpdate=!0;var l,p,v;i.constructor!==Array&&(l=i.r,p=i.g,v=i.b);for(let b in f.geometryGroups){let s=f.geometryGroups[b],h=s.colorArray;for(let E=0,x=s.vertices;E<x;++E){if(i.constructor===Array){let D=i[E];l=D.r,p=D.g,v=D.b}h[E*3]=l,h[E*3+1]=p,h[E*3+2]=v}}}static drawArrow(f,i,l){var p=l.start,v=l.end,b=l.radius,s=l.radiusRatio,h=l.mid,E=l.midpos;if(!(p&&v))return;var x=i.updateGeoGroup(51),D=new S.Vector3(v.x,v.y,v.z).sub(p);if(E){let be=D.length();E>0?h=E/be:h=(be+E)/be}D.multiplyScalar(h);var z=new S.Vector3(p.x,p.y,p.z).add(D),P=D.clone().negate();let G=new S.Vector3(p.x,p.y,p.z);f.intersectionShape.cylinder.push(new y.Cylinder(G,z.clone(),b)),f.intersectionShape.sphere.push(new y.Sphere(G,b));var B=[];B[0]=D.clone(),Math.abs(B[0].x)>1e-4?B[0].y+=1:B[0].x+=1,B[0].cross(D),B[0].normalize(),B[4]=B[0].clone(),B[4].crossVectors(B[0],D),B[4].normalize(),B[8]=B[0].clone().negate(),B[12]=B[4].clone().negate(),B[2]=B[0].clone().add(B[4]).normalize(),B[6]=B[4].clone().add(B[8]).normalize(),B[10]=B[8].clone().add(B[12]).normalize(),B[14]=B[12].clone().add(B[0]).normalize(),B[1]=B[0].clone().add(B[2]).normalize(),B[3]=B[2].clone().add(B[4]).normalize(),B[5]=B[4].clone().add(B[6]).normalize(),B[7]=B[6].clone().add(B[8]).normalize(),B[9]=B[8].clone().add(B[10]).normalize(),B[11]=B[10].clone().add(B[12]).normalize(),B[13]=B[12].clone().add(B[14]).normalize(),B[15]=B[14].clone().add(B[0]).normalize();var K=x.vertices,k=x.vertexArray,U=x.faceArray,W=x.normalArray,F=x.lineArray,Y,j,H;for(j=0,H=B.length;j<H;++j){Y=3*(K+3*j);var Z=B[j].clone().multiplyScalar(b).add(p),ne=B[j].clone().multiplyScalar(b).add(z),se=B[j].clone().multiplyScalar(b*s).add(z);if(k[Y]=Z.x,k[Y+1]=Z.y,k[Y+2]=Z.z,k[Y+3]=ne.x,k[Y+4]=ne.y,k[Y+5]=ne.z,k[Y+6]=se.x,k[Y+7]=se.y,k[Y+8]=se.z,j>0){var me=k[Y-3],de=k[Y-2],ue=k[Y-1],ce=new S.Vector3(me,de,ue),pe=new S.Vector3(v.x,v.y,v.z),De=z.clone(),we=new S.Vector3(se.x,se.y,se.z);f.intersectionShape.triangle.push(new y.Triangle(we,pe,ce)),f.intersectionShape.triangle.push(new y.Triangle(ce.clone(),De,we.clone()))}}x.vertices+=48,Y=x.vertices*3,k[Y]=p.x,k[Y+1]=p.y,k[Y+2]=p.z,k[Y+3]=z.x,k[Y+4]=z.y,k[Y+5]=z.z,k[Y+6]=v.x,k[Y+7]=v.y,k[Y+8]=v.z,x.vertices+=3;var je,ye,he,Ce,ke,Xe,nt,at,rt,et,Je,$e,We,ut,ot,J,re,le,Re,xe=x.vertices-3,Ye=x.vertices-2,Ge=x.vertices-1,q=xe*3,_e=Ye*3,Oe=Ge*3;for(j=0,H=B.length-1;j<H;++j){var Ke=K+3*j;Y=Ke*3,ye=x.faceidx,he=x.lineidx,Ce=Ke,et=Ce*3,ke=Ke+1,Je=ke*3,Xe=Ke+2,$e=Xe*3,nt=Ke+4,We=nt*3,at=Ke+5,ut=at*3,rt=Ke+3,ot=rt*3,J=re=B[j],le=Re=B[j+1],W[et]=J.x,W[Je]=re.x,W[ot]=Re.x,W[et+1]=J.y,W[Je+1]=re.y,W[ot+1]=Re.y,W[et+2]=J.z,W[Je+2]=re.z,W[ot+2]=Re.z,W[Je]=re.x,W[We]=le.x,W[ot]=Re.x,W[Je+1]=re.y,W[We+1]=le.y,W[ot+1]=Re.y,W[Je+2]=re.z,W[We+2]=le.z,W[ot+2]=Re.z,W[$e]=re.x,W[ut]=le.x,W[$e+1]=re.y,W[ut+1]=le.y,W[$e+2]=re.z,W[ut+2]=le.z,U[ye]=Ce,U[ye+1]=ke,U[ye+2]=rt,U[ye+3]=ke,U[ye+4]=nt,U[ye+5]=rt,U[ye+6]=Ce,U[ye+7]=rt,U[ye+8]=xe,U[ye+9]=Xe,U[ye+10]=Ye,U[ye+11]=at,U[ye+12]=Xe,U[ye+13]=Ge,U[ye+14]=at,F[he]=Ce,F[he+1]=ke,F[he+2]=Ce,F[he+3]=rt,F[he+4]=nt,F[he+5]=rt,F[he+6]=Ce,F[he+7]=rt,F[he+8]=Xe,F[he+9]=ke,F[he+10]=Xe,F[he+11]=at,F[he+12]=nt,F[he+13]=at,F[he+14]=Xe,F[he+15]=Ge,F[he+16]=Xe,F[he+17]=at,F[he+18]=Ge,F[he+19]=at,x.faceidx+=15,x.lineidx+=20}je=[K+45,K+46,K+1,K,K+47,K+2],ye=x.faceidx,he=x.lineidx,Ce=je[0],et=Ce*3,ke=je[1],Je=ke*3,Xe=je[4],$e=Xe*3,nt=je[2],We=nt*3,at=je[5],ut=at*3,rt=je[3],ot=rt*3,J=re=B[15],le=Re=B[0],W[et]=J.x,W[Je]=re.x,W[ot]=Re.x,W[et+1]=J.y,W[Je+1]=re.y,W[ot+1]=Re.y,W[et+2]=J.z,W[Je+2]=re.z,W[ot+2]=Re.z,W[Je]=re.x,W[We]=le.x,W[ot]=Re.x,W[Je+1]=re.y,W[We+1]=le.y,W[ot+1]=Re.y,W[Je+2]=re.z,W[We+2]=le.z,W[ot+2]=Re.z,W[$e]=re.x,W[ut]=le.x,W[$e+1]=re.y,W[ut+1]=le.y,W[$e+2]=re.z,W[ut+2]=le.z,D.normalize(),P.normalize(),W[q]=P.x,W[_e]=W[Oe]=D.x,W[q+1]=P.y,W[_e+1]=W[Oe+1]=D.y,W[q+2]=P.z,W[_e+2]=W[Oe+2]=D.z,U[ye]=Ce,U[ye+1]=ke,U[ye+2]=rt,U[ye+3]=ke,U[ye+4]=nt,U[ye+5]=rt,U[ye+6]=Ce,U[ye+7]=rt,U[ye+8]=xe,U[ye+9]=Xe,U[ye+10]=Ye,U[ye+11]=at,U[ye+12]=Xe,U[ye+13]=Ge,U[ye+14]=at,F[he]=Ce,F[he+1]=ke,F[he+2]=Ce,F[he+3]=rt,F[he+4]=nt,F[he+5]=rt,F[he+6]=Ce,F[he+7]=rt,F[he+8]=Xe,F[he+9]=ke,F[he+10]=Xe,F[he+11]=at,F[he+12]=nt,F[he+13]=at,F[he+14]=Xe,F[he+15]=Ge,F[he+16]=Xe,F[he+17]=at,F[he+18]=Ge,F[he+19]=at,x.faceidx+=15,x.lineidx+=20}static updateBoundingFromPoints(f,i,l,p){f.center.set(0,0,0);let v=1/0,b=1/0,s=1/0,h=-1/0,E=-1/0,x=-1/0;f.box&&(v=f.box.min.x,h=f.box.max.x,b=f.box.min.y,E=f.box.max.y,s=f.box.min.z,x=f.box.max.z);for(let G=0,B=p;G<B;G++){var D=l[G*3],z=l[G*3+1],P=l[G*3+2];D<v&&(v=D),z<b&&(b=z),P<s&&(s=P),D>h&&(h=D),z>E&&(E=z),P>x&&(x=P)}f.center.set((h+v)/2,(E+b)/2,(x+s)/2),f.radius=f.center.distanceTo({x:h,y:E,z:x}),f.box={min:{x:v,y:b,z:s},max:{x:h,y:E,z:x}}}static addCustomGeo(f,i,l,p,v){var b=i.addGeoGroup(),s=l.vertexArr,h=l.normalArr,E=l.faceArr;b.vertices=s.length,b.faceidx=E.length;var x,D,z,P,G,B,K,k,U,W=b.vertexArray,F=b.colorArray;for(p.constructor!==Array&&(k=p.r,U=p.g,P=p.b),B=0,K=b.vertices;B<K;++B)x=B*3,D=s[B],W[x]=D.x,W[x+1]=D.y,W[x+2]=D.z,p.constructor===Array&&(G=p[B],k=G.r,U=G.g,P=G.b),F[x]=k,F[x+1]=U,F[x+2]=P;if(v)for(B=0,K=b.faceidx/3;B<K;++B){x=B*3,z=E[x],P=E[x+1],G=E[x+2];var Y=new S.Vector3,j=new S.Vector3,H=new S.Vector3;f.intersectionShape.triangle.push(new y.Triangle(Y.copy(s[z]),j.copy(s[P]),H.copy(s[G])))}if(v){var Z=new S.Vector3(0,0,0),ne=0;for(let de=0;de<i.geometryGroups.length;de++)Z.add(i.geometryGroups[de].getCentroid()),ne++;Z.divideScalar(ne),O.updateBoundingFromPoints(f.boundingSphere,{centroid:Z},W,b.vertices)}if(b.faceArray=new Uint16Array(E),b.truncateArrayBuffers(!0,!0),h.length<b.vertices)b.setNormals();else{var se=b.normalArray=new Float32Array(b.vertices*3),me;for(B=0,K=b.vertices;B<K;++B)x=B*3,me=h[B],se[x]=me.x,se[x+1]=me.y,se[x+2]=me.z}b.setLineIndices(),b.lineidx=b.lineArray.length}static updateFromStyle(f,i){typeof i.color<"u"?(f.color=i.color||new R.Color,i.color instanceof R.Color||(f.color=R.CC.color(i.color))):f.color=R.CC.color(0),f.wireframe=!!i.wireframe,f.opacity=i.alpha?(0,S.clamp)(i.alpha,0,1):1,typeof i.opacity<"u"&&(f.opacity=(0,S.clamp)(i.opacity,0,1)),f.side=i.side!==void 0?i.side:c.DoubleSide,f.linewidth=typeof i.linewidth>"u"?1:i.linewidth,f.clickable=!!i.clickable,f.callback=(0,T.makeFunction)(i.callback),f.hoverable=!!i.hoverable,f.hover_callback=(0,T.makeFunction)(i.hover_callback),f.unhover_callback=(0,T.makeFunction)(i.unhover_callback),f.contextMenuEnabled=!!i.contextMenuEnabled,f.hidden=i.hidden,f.frame=i.frame}constructor(f){this.color=16777215,this.hidden=!1,this.wireframe=!1,this.opacity=1,this.linewidth=1,this.clickable=!1,this.hoverable=!1,this.contextMenuEnabled=!1,this.side=c.DoubleSide,this.stylespec=f||{},this.boundingSphere=new y.Sphere,this.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},O.updateFromStyle(this,this.stylespec),this.components=[],this.shapeObj=null,this.renderedShapeObj=null,this.geo=new c.Geometry(!0),this.linegeo=new c.Geometry(!0)}updateStyle(f){for(var i in f)this.stylespec[i]=f[i];if(O.updateFromStyle(this,this.stylespec),f.voldata&&f.volscheme){(0,T.adjustVolumeStyle)(f);const l=f.volscheme,p=f.voldata,v=R.CC,b=l.range()||[-1,1];this.geo.setColors(function(s,h,E){let x=p.getVal(s,h,E);return v.color(l.valueToHex(x,b))}),delete this.color}}addCustom(f){f.vertexArr=f.vertexArr||[],f.faceArr=f.faceArr||[],f.normalArr=f.normalArr||[],O.drawCustom(this,this.geo,f)}addSphere(f){f.center||(f.center=new S.Vector3(0,0,0)),f.radius=f.radius?(0,S.clamp)(f.radius,0,1/0):1.5,f.color=R.CC.color(f.color),this.intersectionShape.sphere.push(new y.Sphere(f.center,f.radius)),A.GLDraw.drawSphere(this.geo,f.center,f.radius,f.color,f.quality),this.components.push({centroid:new S.Vector3(f.center.x,f.center.y,f.center.z)});var i=this.geo.updateGeoGroup(0);O.updateBoundingFromPoints(this.boundingSphere,this.components,i.vertexArray,i.vertices)}addBox(f){var i=f.dimensions||{w:1,h:1,d:1},l;typeof i.w=="number"?l={x:i.w,y:0,z:0}:l=i.w;var p;typeof i.h=="number"?p={x:0,y:i.h,z:0}:p=i.h;var v;typeof i.d=="number"?v={x:0,y:0,z:i.d}:v=i.d;var b=f.corner;b==null&&(f.center!==void 0?b={x:f.center.x-.5*(l.x+p.x+v.x),y:f.center.y-.5*(l.y+p.y+v.y),z:f.center.z-.5*(l.z+p.z+v.z)}:b={x:0,y:0,z:0});var s=[{x:b.x,y:b.y,z:b.z},{x:b.x+l.x,y:b.y+l.y,z:b.z+l.z},{x:b.x+p.x,y:b.y+p.y,z:b.z+p.z},{x:b.x+l.x+p.x,y:b.y+l.y+p.y,z:b.z+l.z+p.z},{x:b.x+v.x,y:b.y+v.y,z:b.z+v.z},{x:b.x+l.x+v.x,y:b.y+l.y+v.y,z:b.z+l.z+v.z},{x:b.x+p.x+v.x,y:b.y+p.y+v.y,z:b.z+p.z+v.z},{x:b.x+l.x+p.x+v.x,y:b.y+l.y+p.y+v.y,z:b.z+l.z+p.z+v.z}],h=[],E=[];h.splice(h.length,0,s[0],s[1],s[2],s[3]),E.splice(E.length,0,0,2,1,1,2,3);var x=4;h.splice(h.length,0,s[2],s[3],s[6],s[7]),E.splice(E.length,0,x+0,x+2,x+1,x+1,x+2,x+3),x+=4,h.splice(h.length,0,s[4],s[5],s[0],s[1]),E.splice(E.length,0,x+0,x+2,x+1,x+1,x+2,x+3),x+=4,h.splice(h.length,0,s[6],s[7],s[4],s[5]),E.splice(E.length,0,x+0,x+2,x+1,x+1,x+2,x+3),x+=4,h.splice(h.length,0,s[3],s[1],s[7],s[5]),E.splice(E.length,0,x+0,x+2,x+1,x+1,x+2,x+3),x+=4,h.splice(h.length,0,s[2],s[6],s[0],s[4]),E.splice(E.length,0,x+0,x+2,x+1,x+1,x+2,x+3),x+=4;var D=(0,T.extend)({},f);D.vertexArr=h,D.faceArr=E,D.normalArr=[],O.drawCustom(this,this.geo,D);var z=new S.Vector3;this.components.push({centroid:z.addVectors(s[0],s[7]).multiplyScalar(.5)});var P=this.geo.updateGeoGroup(0);O.updateBoundingFromPoints(this.boundingSphere,this.components,P.vertexArray,P.vertices)}addCylinder(f){var i,l;f.start?i=new S.Vector3(f.start.x||0,f.start.y||0,f.start.z||0):i=new S.Vector3(0,0,0),f.end?(l=new S.Vector3(f.end.x,f.end.y||0,f.end.z||0),typeof l.x>"u"&&(l.x=3)):l=new S.Vector3(0,0,0);var p=f.radius||.1,v=R.CC.color(f.color);this.intersectionShape.cylinder.push(new y.Cylinder(i,l,p)),A.GLDraw.drawCylinder(this.geo,i,l,p,v,f.fromCap,f.toCap);var b=new S.Vector3;this.components.push({centroid:b.addVectors(i,l).multiplyScalar(.5)});var s=this.geo.updateGeoGroup(0);O.updateBoundingFromPoints(this.boundingSphere,this.components,s.vertexArray,s.vertices)}addDashedCylinder(f){f.dashLength=f.dashLength||.25,f.gapLength=f.gapLength||.25;var i;f.start?i=new S.Vector3(f.start.x||0,f.start.y||0,f.start.z||0):i=new S.Vector3(0,0,0);var l;f.end?(l=new S.Vector3(f.end.x,f.end.y||0,f.end.z||0),typeof l.x>"u"&&(l.x=3)):l=new S.Vector3(3,0,0);for(var p=f.radius||.1,v=R.CC.color(f.color),b=Math.sqrt(Math.pow(i.x-l.x,2)+Math.pow(i.y-l.y,2)+Math.pow(i.z-l.z,2)),s=b/(f.gapLength+f.dashLength),h=new S.Vector3(f.start.x||0,f.start.y||0,f.start.z||0),E=new S.Vector3(f.end.x,f.end.y||0,f.end.z||0),x=new S.Vector3((l.x-i.x)/(b/f.gapLength),(l.y-i.y)/(b/f.gapLength),(l.z-i.z)/(b/f.gapLength)),D=new S.Vector3((l.x-i.x)/(b/f.dashLength),(l.y-i.y)/(b/f.dashLength),(l.z-i.z)/(b/f.dashLength)),z=0;z<s;z++)E=new S.Vector3(h.x+D.x,h.y+D.y,h.z+D.z),this.intersectionShape.cylinder.push(new y.Cylinder(h,E,p)),A.GLDraw.drawCylinder(this.geo,h,E,p,v,f.fromCap,f.toCap),h=new S.Vector3(E.x+x.x,E.y+x.y,E.z+x.z);var P=new S.Vector3;this.components.push({centroid:P.addVectors(i,l).multiplyScalar(.5)});var G=this.geo.updateGeoGroup(0);O.updateBoundingFromPoints(this.boundingSphere,this.components,G.vertexArray,G.vertices)}addCurve(f){f.points=f.points||[],f.smooth=f.smooth||10,typeof f.fromCap>"u"&&(f.fromCap=2),typeof f.toCap>"u"&&(f.toCap=2);var i=(0,g.subdivide_spline)(f.points,f.smooth);if(i.length<3){console.log("Too few points in addCurve");return}var l=f.radius||.1,p=R.CC.color(f.color),v=0,b=i.length-1,s=i[0].distanceTo(i[1]),h=Math.ceil(2*l/s);if(f.toArrow){b-=h;let z={start:i[b],end:i[i.length-1],radius:l,color:p,mid:1e-4};this.addArrow(z)}if(f.fromArrow){v+=h;let z={start:i[v],end:i[0],radius:l,color:p,mid:1e-4};this.addArrow(z)}for(var E=Math.ceil(i.length/2),x={radius:l,color:p,fromCap:2,toCap:2},D=v;D<b;D++)x.start=i[D],x.end=i[D+1],x.fromCap=2,x.toCap=2,D<E?(x.fromCap=2,x.toCap=0):D>E?(x.fromCap=0,x.toCap=2):(x.fromCap=2,x.toCap=2),this.addCylinder(x)}addLine(f){var i,l;f.start?i=new S.Vector3(f.start.x||0,f.start.y||0,f.start.z||0):i=new S.Vector3(0,0,0),f.end?(l=new S.Vector3(f.end.x,f.end.y||0,f.end.z||0),typeof l.x>"u"&&(l.x=3)):l=new S.Vector3(3,0,0);var p=this.geo.updateGeoGroup(2),v=p.vertices,b=v*3,s=p.vertexArray;s[b]=i.x,s[b+1]=i.y,s[b+2]=i.z,s[b+3]=l.x,s[b+4]=l.y,s[b+5]=l.z,p.vertices+=2;var h=p.lineArray,E=p.lineidx;h[E]=v,h[E+1]=v+1,p.lineidx+=2;var x=new S.Vector3;this.components.push({centroid:x.addVectors(i,l).multiplyScalar(.5)}),p=this.geo.updateGeoGroup(0),O.updateBoundingFromPoints(this.boundingSphere,this.components,p.vertexArray,p.vertices)}addArrow(f){if(f.start?f.start=new S.Vector3(f.start.x||0,f.start.y||0,f.start.z||0):f.start=new S.Vector3(0,0,0),f.dir instanceof S.Vector3&&typeof f.length=="number"){var i=f.dir.clone().multiplyScalar(f.length).add(f.start);f.end=i}else f.end?(f.end=new S.Vector3(f.end.x,f.end.y||0,f.end.z||0),typeof f.end.x>"u"&&(f.end.x=3)):f.end=new S.Vector3(3,0,0);f.radius=f.radius||.1,f.radiusRatio=f.radiusRatio||1.618034,f.mid=0<f.mid&&f.mid<1?f.mid:.618034,O.drawArrow(this,this.geo,f);var l=new S.Vector3;this.components.push({centroid:l.addVectors(f.start,f.end).multiplyScalar(.5)});var p=this.geo.updateGeoGroup(0);O.updateBoundingFromPoints(this.boundingSphere,this.components,p.vertexArray,p.vertices)}static distance_from(f,i){return Math.sqrt(Math.pow(f.x-i.x,2)+Math.pow(f.y-i.y,2)+Math.pow(f.z-i.z,2))}static inSelectedRegion(f,i,l){for(var p=0;p<i.length;p++)if(O.distance_from(i[p],f)<=l)return!0;return!1}addIsosurface(f,i,l,p){var v=i.isoval!==void 0&&typeof i.isoval=="number"?i.isoval:0,b=!!i.voxel,s=i.smoothness===void 0?1:i.smoothness,h=f.size.x,E=f.size.y,x=f.size.z,D=new Int16Array(h*E*x),z=f.data,P,G;for(P=0,G=D.length;P<G;++P)D[P]=-1;var B=new Uint8Array(h*E*x);for(P=0,G=z.length;P<G;++P){var K=v>=0?z[P]-v:v-z[P];K>0&&(B[P]|=O.ISDONE)}var k=[],U=[];m.MarchingCube.march(B,k,U,{fulltable:!0,voxel:b,unitCube:f.unit,origin:f.origin,matrix:f.matrix,nX:h,nY:E,nZ:x}),!b&&s>0&&m.MarchingCube.laplacianSmooth(s,k,U);var W=[],F=[],Y=[];if(i.selectedRegion&&i.coords===void 0&&(i.coords=i.selectedRegion),i.coords===void 0&&i.selection!==void 0&&(p?i.coords=p.selectedAtoms(i.selection):console.log("addIsosurface needs viewer is selection provided.")),i.coords!==void 0){var j=i.coords[0].x,H=i.coords[0].y,Z=i.coords[0].z,ne=i.coords[0].x,se=i.coords[0].y,me=i.coords[0].z;for(let he=0;he<i.coords.length;he++)i.coords[he].x>j?j=i.coords[he].x:i.coords[he].x<ne&&(ne=i.coords[he].x),i.coords[he].y>H?H=i.coords[he].y:i.coords[he].y<se&&(se=i.coords[he].y),i.coords[he].z>Z?Z=i.coords[he].z:i.coords[he].z<me&&(me=i.coords[he].z);var de=2;i.radius!==void 0&&(de=i.radius),i.selectedOffset!==void 0&&(de=i.selectedOffset),i.seldist!==void 0&&(de=i.seldist),ne-=de,j+=de,se-=de,H+=de,me-=de,Z+=de;for(let he=0;he<k.length;he++)k[he].x>ne&&k[he].x<j&&k[he].y>se&&k[he].y<H&&k[he].z>me&&k[he].z<Z&&O.inSelectedRegion(k[he],i.coords,de)?(W.push(F.length),F.push(k[he])):W.push(-1);for(let he=0;he+2<U.length;he+=3)W[U[he]]!==-1&&W[U[he+1]]!==-1&&W[U[he+2]]!==-1&&(Y.push(U[he]-(U[he]-W[U[he]])),Y.push(U[he+1]-(U[he+1]-W[U[he+1]])),Y.push(U[he+2]-(U[he+2]-W[U[he+2]])));k=F,U=Y}O.drawCustom(this,this.geo,{vertexArr:k,faceArr:U,normalArr:[],clickable:i.clickable,hoverable:i.hoverable}),this.updateStyle(i);var ue=new S.Vector3(f.origin.x,f.origin.y,f.origin.z),ce=new S.Vector3(f.size.x*f.unit.x,f.size.y*f.unit.y,f.size.z*f.unit.z),pe=new S.Vector3(0,0,0),De=ue.clone(),we=ue.clone().add(ce);for(let he=0;he<k.length;he++)pe.add(k[he]),De.max(k[he]),we.min(k[he]);pe.divideScalar(k.length);var je=pe.distanceTo(we),ye=pe.distanceTo(De);this.boundingSphere.center=pe,this.boundingSphere.radius=Math.max(je,ye),typeof l=="function"&&l()}addVolumetricData(f,i,l){f=new _.VolumeData(f,i),this.addIsosurface(f,l)}finalize(){return O.finalizeGeo(this.geo),this.geo.initTypedArrays(),this.geo}globj(f){if(this.renderedShapeObj&&(f.remove(this.renderedShapeObj),this.renderedShapeObj=null),!this.hidden){O.finalizeGeo(this.geo),this.geo.initTypedArrays(),this.wireframe&&this.geo.setUpWireframe(),typeof this.color<"u"&&O.updateColor(this.geo,this.color),this.shapeObj=new c.Object3D;var i=null;this.side==c.DoubleSide?i=new c.MeshDoubleLambertMaterial({wireframe:this.wireframe,side:this.side,transparent:this.opacity<1,opacity:this.opacity,wireframeLinewidth:this.linewidth,vertexColors:c.Coloring.VertexColors}):i=new c.MeshLambertMaterial({wireframe:this.wireframe,side:this.side,transparent:this.opacity<1,opacity:this.opacity,wireframeLinewidth:this.linewidth,vertexColors:c.Coloring.VertexColors});var l=new c.Mesh(this.geo,i);if(this.shapeObj.add(l),this.linegeo&&this.linegeo.vertices>0){var p=new c.LineBasicMaterial({linewidth:this.linewidth,color:this.color}),v=new c.Line(this.linegeo,p,c.LineStyle.LinePieces);this.shapeObj.add(v)}this.renderedShapeObj=this.shapeObj.clone(),f.add(this.renderedShapeObj)}}removegl(f){this.renderedShapeObj&&(this.renderedShapeObj.geometry!==void 0&&this.renderedShapeObj.geometry.dispose(),this.renderedShapeObj.material!==void 0&&this.renderedShapeObj.material.dispose(),f.remove(this.renderedShapeObj),this.renderedShapeObj=null),this.shapeObj=null}get position(){return this.boundingSphere.center}get x(){return this.boundingSphere.center.x}get y(){return this.boundingSphere.center.y}get z(){return this.boundingSphere.center.z}}O.ISDONE=2,O.drawCustom=function(M,f,i){var l=i,p=l.vertexArr,v=l.faceArr;(p.length===0||v.length===0)&&console.warn("Error adding custom shape component: No vertices and/or face indices supplied!");var b=i.color;typeof b>"u"&&(b=M.color),b=R.CC.color(b);for(var s=w(l),h=0,E=s.length;h<E;h++)O.addCustomGeo(M,f,s[h],s[h].colorArr?s[h].colorArr:b,i.clickable)};function w(M){var f=64e3;if(M.vertexArr.length<f)return[M];var i=[{vertexArr:[],normalArr:[],faceArr:[]}];M.colorArr&&(i.colorArr=[]);var l=[],p=[],v=0,b=M.faceArr;for(let h=0,E=b.length;h<E;h+=3){let x=i[v];for(let D=0;D<3;D++){var s=b[h+D];l[s]!==v&&(l[s]=v,p[s]=x.vertexArr.length,x.vertexArr.push(M.vertexArr[s]),M.normalArr&&M.normalArr[s]&&x.normalArr.push(M.normalArr[s]),M.colorArr&&M.colorArr[s]&&x.colorArr.push(M.colorArr[s])),x.faceArr.push(p[s])}x.vertexArr.length>=f&&(i.push({vertexArr:[],normalArr:[],faceArr:[]}),M.colorArr&&(i.colorArr=[]),v++)}return i}},"./src/GLViewer.ts":(o,u,a)=>{a.r(u),a.d(u,{CONTEXTS_PER_VIEWPORT:()=>f,GLViewer:()=>i,createStereoViewer:()=>v,createViewer:()=>l,createViewerGrid:()=>p});var c=a("./src/WebGL/index.ts"),y=a("./src/WebGL/math/index.ts"),S=a("./src/colors.ts"),R=a("./src/utilities.ts"),m=a("./src/Gradient.ts"),_=a("./src/GLModel.ts"),A=a("./src/Label.ts"),g=a("./src/GLShape.ts"),T=a("./src/VolumeData.ts"),O=a("./src/ProteinSurface4.ts"),w=a("./src/VolumetricRender.ts"),M=a("./node_modules/upng-js/UPNG.js");const f=16;class i{getWidth(){let s=this.container,h=s.offsetWidth;if(h==0&&s.style.display==="none"){let E=s.style.position,x=s.style.visibility;s.style.display="block",s.style.visibility="hidden",s.style.position="absolute",h=s.offsetWidth,s.style.display="none",s.style.visibility=x,s.style.position=E}return h}getHeight(){let s=this.container,h=s.offsetHeight;if(h==0&&s.style.display==="none"){let E=s.style.position,x=s.style.visibility;s.style.display="block",s.style.visibility="hidden",s.style.position="absolute",h=s.offsetHeight,s.style.display="none",s.style.visibility=x,s.style.position=E}return h}setupRenderer(){this.renderer=new c.Renderer({antialias:this.config.antialias,preserveDrawingBuffer:!0,premultipliedAlpha:!1,id:this.config.id,row:this.config.row,col:this.config.col,rows:this.config.rows,cols:this.config.cols,canvas:this.config.canvas,containerWidth:this.WIDTH,containerHeight:this.HEIGHT,ambientOcclusion:this.config.ambientOcclusion,outline:this.config.outline}),this.renderer.domElement.style.width="100%",this.renderer.domElement.style.height="100%",this.renderer.domElement.style.padding="0",this.renderer.domElement.style.position="absolute",this.renderer.domElement.style.top="0px",this.renderer.domElement.style.left="0px",this.renderer.domElement.style.zIndex="0"}initializeScene(){this.scene=new c.Scene,this.scene.fog=new c.Fog(this.bgColor,100,200),this.modelGroup=new c.Object3D,this.rotationGroup=new c.Object3D,this.rotationGroup.useQuaternion=!0,this.rotationGroup.quaternion=new y.Quaternion(0,0,0,1),this.rotationGroup.add(this.modelGroup),this.scene.add(this.rotationGroup);var s=new c.Light(16777215);s.position=new y.Vector3(.2,.2,1).normalize(),s.intensity=1,this.scene.add(s)}_handleLostContext(s){const h=function(E){const x=E.getBoundingClientRect();return!(x.right<0||x.bottom<0||x.top>(window.innerHeight||document.documentElement.clientHeight)||x.left>(window.innerWidth||document.documentElement.clientWidth))};if(h(this.container)){let E=0;for(let x of document.getElementsByTagName("canvas"))if(h(x)&&x._3dmol_viewer!=null&&(x._3dmol_viewer.resize(),E+=1,E>=f))break}}initContainer(s){this.container=s,this.WIDTH=this.getWidth(),this.HEIGHT=this.getHeight(),this.ASPECT=this.renderer.getAspect(this.WIDTH,this.HEIGHT),this.renderer.setSize(this.WIDTH,this.HEIGHT),this.container.append(this.renderer.domElement),this.glDOM=this.renderer.domElement,this.glDOM._3dmol_viewer=this,this.glDOM.addEventListener("webglcontextlost",this._handleLostContext.bind(this)),this.nomouse||(this.glDOM.addEventListener("mousedown",this._handleMouseDown.bind(this),{passive:!1}),this.glDOM.addEventListener("touchstart",this._handleMouseDown.bind(this),{passive:!1}),this.glDOM.addEventListener("wheel",this._handleMouseScroll.bind(this),{passive:!1}),this.glDOM.addEventListener("mousemove",this._handleMouseMove.bind(this),{passive:!1}),this.glDOM.addEventListener("touchmove",this._handleMouseMove.bind(this),{passive:!1}),this.glDOM.addEventListener("contextmenu",this._handleContextMenu.bind(this),{passive:!1}))}decAnim(){this.animated--,this.animated<0&&(this.animated=0)}incAnim(){this.animated++}nextSurfID(){var s=0;for(let E in this.surfaces)if(this.surfaces.hasOwnProperty(E)){var h=parseInt(E);isNaN(h)||h>s&&(s=h)}return s+1}setSlabAndFog(){let s=this.camera.position.z-this.rotationGroup.position.z;s<1&&(s=1),this.camera.near=s+this.slabNear,!this.camera.ortho&&this.camera.near<1&&(this.camera.near=1),this.camera.far=s+this.slabFar,this.camera.near+1>this.camera.far&&(this.camera.far=this.camera.near+1),this.camera.fov=this.fov,this.camera.right=s*Math.tan(Math.PI/180*this.fov),this.camera.left=-this.camera.right,this.camera.top=this.camera.right/this.ASPECT,this.camera.bottom=-this.camera.top,this.camera.updateProjectionMatrix(),this.scene.fog.near=this.camera.near+this.fogStart*(this.camera.far-this.camera.near),this.scene.fog.far=this.camera.far,this.config.disableFog&&(this.scene.fog.near=this.scene.fog.far)}show(s){if(this.renderer.setViewport(),!!this.scene&&(this.setSlabAndFog(),this.renderer.render(this.scene,this.camera),this.viewChangeCallback&&this.viewChangeCallback(this._viewer.getView()),!s&&this.linkedViewers.length>0))for(var h=this._viewer.getView(),E=0;E<this.linkedViewers.length;E++){var x=this.linkedViewers[E];x.setView(h,!0)}}updateClickables(){this.clickables.splice(0,this.clickables.length),this.hoverables.splice(0,this.hoverables.length),this.contextMenuEnabledObjects.splice(0,this.contextMenuEnabledObjects.length);for(let s=0,h=this.models.length;s<h;s++){let E=this.models[s];if(E){let x=E.selectedAtoms({clickable:!0}),D=E.selectedAtoms({hoverable:!0}),z=E.selectedAtoms({contextMenuEnabled:!0});for(let P=0;P<D.length;P++)this.hoverables.push(D[P]);for(let P=0;P<x.length;P++)this.clickables.push(x[P]);for(let P=0;P<z.length;P++)this.contextMenuEnabledObjects.push(z[P])}}for(let s=0,h=this.shapes.length;s<h;s++){let E=this.shapes[s];E&&E.clickable&&this.clickables.push(E),E&&E.hoverable&&this.hoverables.push(E),E&&E.contextMenuEnabled&&this.contextMenuEnabledObjects.push(E)}}handleClickSelection(s,h,E){let x=this.targetedObjects(s,h,this.clickables);if(x.length){var D=x[0].clickable;D.callback!==void 0&&(typeof D.callback!="function"&&(D.callback=(0,R.makeFunction)(D.callback)),typeof D.callback=="function"&&(this.mouseButton===3&&this.contextMenuEnabledObjects.includes(D)&&this.userContextMenuHandler||D.callback(D,this._viewer,E,this.container,x)))}}canvasOffset(){let s=this.glDOM,h=s.getBoundingClientRect(),E=s.ownerDocument,x=E.documentElement,D=E.defaultView;return{top:h.top+D.pageYOffset-x.clientTop,left:h.left+D.pageXOffset-x.clientLeft}}setHover(s,h,E){this.current_hover!=s&&(this.current_hover&&(typeof this.current_hover.unhover_callback!="function"&&(this.current_hover.unhover_callback=(0,R.makeFunction)(this.current_hover.unhover_callback)),this.current_hover.unhover_callback(this.current_hover,this._viewer,h,this.container,E)),this.current_hover=s,s&&s.hover_callback!==void 0&&(typeof s.hover_callback!="function"&&(s.hover_callback=(0,R.makeFunction)(s.hover_callback)),typeof s.hover_callback=="function"&&s.hover_callback(s,this._viewer,h,this.container,E)))}handleHoverSelection(s,h,E){if(this.hoverables.length==0)return;let x=this.targetedObjects(s,h,this.hoverables);if(x.length){var D=x[0].clickable;this.setHover(D,E,x),this.current_hover=D}else this.setHover(null)}handleHoverContinue(s,h){let E=this.targetedObjects(s,h,this.hoverables);(E.length==0||E[0]===void 0)&&this.setHover(null),E[0]!==void 0&&E[0].clickable!==this.current_hover&&this.setHover(null)}closeEnoughForClick(s,{allowTolerance:h=s.targetTouches,tolerance:E=5}={}){const x=this.getX(s),D=this.getY(s);if(h){const z=Math.abs(x-this.mouseStartX),P=Math.abs(D-this.mouseStartY);return z<=E&&P<=E}else return x===this.mouseStartX&&D===this.mouseStartY}calcTouchDistance(s){var h=s.targetTouches[0].pageX-s.targetTouches[1].pageX,E=s.targetTouches[0].pageY-s.targetTouches[1].pageY;return Math.hypot(h,E)}getX(s){var h=s.pageX;return h==null&&(h=s.pageX),s.targetTouches&&s.targetTouches[0]?h=s.targetTouches[0].pageX:s.changedTouches&&s.changedTouches[0]&&(h=s.changedTouches[0].pageX),h}getY(s){var h=s.pageY;return h==null&&(h=s.pageY),s.targetTouches&&s.targetTouches[0]?h=s.targetTouches[0].pageY:s.changedTouches&&s.changedTouches[0]&&(h=s.changedTouches[0].pageY),h}isInViewer(s,h){if(this.viewers!=null){var E=this.WIDTH/this.cols,x=this.HEIGHT/this.rows,D=this.canvasOffset(),z=s-D.left,P=h-D.top,G=this.rows-Math.floor(P/x)-1,B=Math.floor(z/E);if(G!=this.row||B!=this.col)return!1}return!0}adjustZoomToLimits(s){if(this.config.lowerZoomLimit&&this.config.lowerZoomLimit>0){let h=this.CAMERA_Z-this.config.lowerZoomLimit;s>h&&(s=h)}if(this.config.upperZoomLimit&&this.config.upperZoomLimit>0){let h=this.CAMERA_Z-this.config.upperZoomLimit;s<h&&(s=h)}return s>this.CAMERA_Z-1&&(s=this.CAMERA_Z-1),s}static slerp(s,h,E){if(E==1)return h.clone();if(E==0)return s.clone();let x=s.x*h.x+s.y*h.y+s.z*h.z+s.w*h.w;if(x>.9995){let k=new y.Quaternion(s.x+E*(h.x-s.x),s.y+E*(h.y-s.y),s.z+E*(h.z-s.z),s.w+E*(h.w-s.w));return k.normalize(),k}x<0&&(h=h.clone().multiplyScalar(-1),x=-x),x>1?x=1:x<-1&&(x=-1);var D=Math.acos(x),z=D*E,P=h.clone();P.sub(s.clone().multiplyScalar(x)),P.normalize();var G=Math.cos(z),B=Math.sin(z),K=new y.Quaternion(s.x*G+P.x*B,s.y*G+P.y*B,s.z*G+P.z*B,s.w*G+P.w*B);return K.normalize(),K}constructor(s,h={}){if(this.nomouse=!1,this.glDOM=null,this.models=[],this.surfaces={},this.shapes=[],this.labels=[],this.clickables=[],this.hoverables=[],this.contextMenuEnabledObjects=[],this.current_hover=null,this.hoverDuration=500,this.longTouchDuration=1e3,this.viewer_frame=0,this.viewChangeCallback=null,this.stateChangeCallback=null,this.NEAR=1,this.FAR=800,this.CAMERA_Z=150,this.fov=20,this.linkedViewers=[],this.renderer=null,this.control_all=!1,this.scene=null,this.rotationGroup=null,this.modelGroup=null,this.fogStart=.4,this.slabNear=-50,this.slabFar=50,this.cq=new y.Quaternion(0,0,0,1),this.dq=new y.Quaternion(0,0,0,1),this.animated=0,this.animationTimers=new Set,this.isDragging=!1,this.mouseStartX=0,this.mouseStartY=0,this.touchDistanceStart=0,this.touchHold=!1,this.currentModelPos=0,this.cz=0,this.cslabNear=0,this.cslabFar=0,this.userContextMenuHandler=null,this.config=h,this.callback=this.config.callback,this.defaultcolors=this.config.defaultcolors,this.defaultcolors||(this.defaultcolors=S.elementColors.defaultColors),this.nomouse=!!this.config.nomouse,this.bgColor=0,this.config.backgroundColor=this.config.backgroundColor||"#ffffff",typeof this.config.backgroundColor<"u"&&(this.bgColor=S.CC.color(this.config.backgroundColor).getHex()),this.config.backgroundAlpha=this.config.backgroundAlpha==null?1:this.config.backgroundAlpha,this.camerax=0,typeof this.config.camerax<"u"&&(this.camerax=typeof this.config.camerax=="string"?parseFloat(this.config.camerax):this.config.camerax),this._viewer=this,this.container=s,this.config.hoverDuration!=null&&(this.hoverDuration=this.config.hoverDuration),this.config.antialias===void 0&&(this.config.antialias=!0),this.config.cartoonQuality===void 0&&(this.config.cartoonQuality=10),this.WIDTH=this.getWidth(),this.HEIGHT=this.getHeight(),this.setupRenderer(),this.row=this.config.row==null?0:this.config.row,this.col=this.config.col==null?0:this.config.col,this.cols=this.config.cols,this.rows=this.config.rows,this.viewers=this.config.viewers,this.control_all=this.config.control_all,this.ASPECT=this.renderer.getAspect(this.WIDTH,this.HEIGHT),this.camera=new c.Camera(this.fov,this.ASPECT,this.NEAR,this.FAR,this.config.orthographic),this.camera.position=new y.Vector3(this.camerax,0,this.CAMERA_Z),this.lookingAt=new y.Vector3,this.camera.lookAt(this.lookingAt),this.raycaster=new c.Raycaster(new y.Vector3(0,0,0),new y.Vector3(0,0,0)),this.projector=new c.Projector,this.initializeScene(),this.renderer.setClearColorHex(this.bgColor,this.config.backgroundAlpha),this.scene.fog.color=S.CC.color(this.bgColor),document.body.addEventListener("mouseup",this._handleMouseUp.bind(this)),document.body.addEventListener("touchend",this._handleMouseUp.bind(this)),this.initContainer(this.container),this.config.style&&this.setViewStyle(this.config),window.addEventListener("resize",this.resize.bind(this)),typeof window.ResizeObserver<"u"&&(this.divwatcher=new window.ResizeObserver(this.resize.bind(this)),this.divwatcher.observe(this.container)),typeof window.IntersectionObserver<"u"){let E=(x,D)=>{x.forEach(z=>{z.isIntersecting&&this.resize()})};this.intwatcher=new window.IntersectionObserver(E),this.intwatcher.observe(this.container)}try{typeof this.callback=="function"&&this.callback(this)}catch(E){console.log("error with glviewer callback: "+E)}}targetedObjects(s,h,E){var x={x:s,y:h,z:-1};return Array.isArray(E)||(E=this.selectedAtoms(E)),E.length==0?[]:(this.raycaster.setFromCamera(x,this.camera),this.raycaster.intersectObjects(this.modelGroup,E))}modelToScreen(s){let h=!1;Array.isArray(s)||(s=[s],h=!0);let E=this.renderer.getXRatio(),x=this.renderer.getYRatio(),D=this.col,z=this.row,P=D*(this.WIDTH/E),G=(x-z-1)*(this.HEIGHT/x),B=[],K=this.canvasOffset();return s.forEach(k=>{let U=new y.Vector3(k.x,k.y,k.z);U.applyMatrix4(this.modelGroup.matrixWorld),this.projector.projectVector(U,this.camera);let W=this.WIDTH/E*(U.x+1)/2+K.left+P,F=-(this.HEIGHT/x)*(U.y-1)/2+K.top+G;B.push({x:W,y:F})}),h&&(B=B[0]),B}screenOffsetToModel(s,h,E){var x=s/this.WIDTH,D=h/this.HEIGHT,z=E===void 0?this.rotationGroup.position.z:E,P=this.rotationGroup.quaternion,G=new y.Vector3(0,0,z);return this.projector.projectVector(G,this.camera),G.x+=x*2,G.y-=D*2,this.projector.unprojectVector(G,this.camera),G.z=0,G.applyQuaternion(P),G}screenToModelDistance(s,h){let E=this.canvasOffset(),x=new y.Vector3(h.x,h.y,h.z);x.applyMatrix4(this.modelGroup.matrixWorld);let D=x.clone();this.projector.projectVector(x,this.camera);let z=new y.Vector3((s.x-E.left)*2/this.WIDTH-1,(s.y-E.top)*2/-this.HEIGHT+1,x.z);return this.projector.unprojectVector(z,this.camera),z.distanceTo(D)}setViewChangeCallback(s){(typeof s=="function"||s==null)&&(this.viewChangeCallback=s)}setStateChangeCallback(s){(typeof s=="function"||s==null)&&(this.stateChangeCallback=s)}getConfig(){return this.config}setConfig(s){this.config=s,s.ambientOcclusion&&this.renderer.enableAmbientOcclusion(s.ambientOcclusion)}getInternalState(){var s={models:[],surfaces:[],shapes:[],labels:[]};for(let h=0;h<this.models.length;h++)this.models[h]&&(s.models[h]=this.models[h].getInternalState());return s}setInternalState(s){this.clear();var h=s.models;for(let E=0;E<h.length;E++)h[E]&&(this.models[E]=new _.GLModel(E),this.models[E].setInternalState(h[E]));this.render()}setZoomLimits(s,h){typeof s<"u"&&(this.config.lowerZoomLimit=s),h&&(this.config.upperZoomLimit=h),this.rotationGroup.position.z=this.adjustZoomToLimits(this.rotationGroup.position.z),this.show()}setCameraParameters(s){s.fov!==void 0&&(this.fov=s.fov,this.camera.fov=this.fov),s.z!==void 0&&(this.CAMERA_Z=s.z,this.camera.z=this.CAMERA_Z),s.orthographic!==void 0&&(this.camera.ortho=s.orthographic),this.setSlabAndFog()}_handleMouseDown(s){if(s.preventDefault(),!this.scene)return;var h=this.getX(s),E=this.getY(s);if(h===void 0)return;this.isDragging=!0,this.mouseButton=s.which,this.mouseStartX=h,this.mouseStartY=E,this.touchHold=!0,this.touchDistanceStart=0,s.targetTouches&&s.targetTouches.length==2&&(this.touchDistanceStart=this.calcTouchDistance(s)),this.cq=this.rotationGroup.quaternion.clone(),this.cz=this.rotationGroup.position.z,this.currentModelPos=this.modelGroup.position.clone(),this.cslabNear=this.slabNear,this.cslabFar=this.slabFar;let x=this;s.targetTouches&&s.targetTouches.length===1&&(this.longTouchTimeout=setTimeout(function(){if(x.touchHold==!0){x.glDOM=x.renderer.domElement;const D=s.targetTouches[0],z=new PointerEvent("contextmenu",Object.assign(Object.assign({},s),{pageX:D.pageX,pageY:D.pageY,screenX:D.screenX,screenY:D.screenY,clientX:D.clientX,clientY:D.clientY}));x.glDOM.dispatchEvent(z)}},this.longTouchDuration))}_handleMouseUp(s){if(this.touchHold=!1,this.isDragging&&this.scene){var h=this.getX(s),E=this.getY(s);if(this.closeEnoughForClick(s)&&this.isInViewer(h,E)){let x=this.mouseXY(h,E);this.handleClickSelection(x.x,x.y,s)}}this.isDragging=!1}_handleMouseScroll(s){if(s.preventDefault(),!!this.scene){var h=this.getX(s),E=this.getY(s);if(h!==void 0&&!(!this.control_all&&!this.isInViewer(h,E))){var x=(this.CAMERA_Z-this.rotationGroup.position.z)*.85,D=1;if(s.ctrlKey&&(D=-1),s.detail)this.rotationGroup.position.z+=D*x*s.detail/10;else if(s.wheelDelta){let z=s.wheelDelta*600/(s.wheelDelta+600);this.rotationGroup.position.z-=D*x*z/400}this.rotationGroup.position.z=this.adjustZoomToLimits(this.rotationGroup.position.z),this.show()}}}pngURI(){return this.getCanvas().toDataURL("image/png")}apngURI(s){let h=this;return s=s||1,new Promise(function(E){let x=0,D=h.viewChangeCallback,z=[],P=[],G=Date.now();h.viewChangeCallback=function(){P.push(Date.now()-G),G=Date.now(),z.push(new Promise(B=>{h.getCanvas().toBlob(function(K){K.arrayBuffer().then(B)},"image/png")})),x+=1,x==s&&(h.viewChangeCallback=D,Promise.all(z).then(B=>{let K=[];for(let j=0;j<B.length;j++){let H=(0,M.decode)(B[j]);K.push((0,M.toRGBA8)(H)[0])}let k=h.getCanvas().width,U=h.getCanvas().height,W=(0,M.encode)(K,k,U,0,P),F=new Blob([W],{type:"image/png"}),Y=new FileReader;Y.onload=function(j){E(j.target.result)},Y.readAsDataURL(F)}))}})}getCanvas(){return this.glDOM}getRenderer(){return this.renderer}setHoverDuration(s){this.hoverDuration=s}mouseXY(s,h){let E=this.canvasOffset(),x=this.renderer.getXRatio(),D=this.renderer.getYRatio(),z=this.col,P=this.row,G=z*(this.WIDTH/x),B=(D-P-1)*(this.HEIGHT/D),K=(s-E.left-G)/(this.WIDTH/x)*2-1,k=-((h-E.top-B)/(this.HEIGHT/D))*2+1;return{x:K,y:k}}_handleMouseMove(s){clearTimeout(this.hoverTimeout),s.preventDefault();let h=this.getX(s),E=this.getY(s);if(h===void 0)return;let x=this.renderer.getXRatio(),D=this.renderer.getYRatio(),z=this.mouseXY(h,E),P=this;this.current_hover!==null&&this.handleHoverContinue(z.x,z.y);var G=0;if(!(!this.control_all&&!this.isInViewer(h,E))&&this.scene&&(this.hoverables.length>0&&(this.hoverTimeout=setTimeout(function(){P.handleHoverSelection(z.x,z.y,s)},this.hoverDuration)),!!this.isDragging)){s.targetTouches&&(s.targetTouches.length>1||s.targetTouches.length===1&&!this.closeEnoughForClick(s))&&clearTimeout(this.longTouchTimeout);var B=(h-this.mouseStartX)/this.WIDTH,K=(E-this.mouseStartY)/this.HEIGHT;if(this.touchDistanceStart!=0&&s.targetTouches&&s.targetTouches.length==2){var k=this.calcTouchDistance(s);G=2,K=(k-this.touchDistanceStart)*2/(this.WIDTH+this.HEIGHT)}else s.targetTouches&&s.targetTouches.length==3&&(G=1);B*=x,K*=D;var U=Math.hypot(B,K),W;if(G==3||this.mouseButton==3&&s.ctrlKey)this.slabNear=this.cslabNear+B*100,this.slabFar=this.cslabFar-K*100;else if(G==2||this.mouseButton==3||s.shiftKey)W=(this.CAMERA_Z-this.rotationGroup.position.z)*.85,W<80&&(W=80),this.rotationGroup.position.z=this.cz+K*W,this.rotationGroup.position.z=this.adjustZoomToLimits(this.rotationGroup.position.z);else if(G==1||this.mouseButton==2||s.ctrlKey){var F=this.screenOffsetToModel(x*(h-this.mouseStartX),D*(E-this.mouseStartY));this.modelGroup.position.addVectors(this.currentModelPos,F)}else if((G===0||this.mouseButton==1)&&U!==0){var Y=Math.sin(U*Math.PI)/U;this.dq.x=Math.cos(U*Math.PI),this.dq.y=0,this.dq.z=Y*B,this.dq.w=-Y*K,this.rotationGroup.quaternion.set(1,0,0,0),this.rotationGroup.quaternion.multiply(this.dq),this.rotationGroup.quaternion.multiply(this.cq)}this.show()}}_handleContextMenu(s){if(s.preventDefault(),this.closeEnoughForClick(s)){var x=this.mouseStartX,D=this.mouseStartY,E=this.canvasOffset();let z=this.mouseXY(x,D),P=z.x,G=z.y,B=this.targetedObjects(P,G,this.contextMenuEnabledObjects);var h=null;B.length&&(h=B[0].clickable);var E=this.canvasOffset(),x=this.mouseStartX-E.left,D=this.mouseStartY-E.top;this.userContextMenuHandler&&(this.userContextMenuHandler(h,x,D,B,s),this.isDragging=!1)}}setContainer(s){let h=(0,R.getElement)(s)||this.container;return this.initContainer(h),this}setBackgroundColor(s,h){(typeof h>"u"||h<0||h>1)&&(h=1);var E=S.CC.color(s);return this.scene.fog.color=E,this.bgColor=E.getHex(),this.renderer.setClearColorHex(E.getHex(),h),this.show(),this}setProjection(s){this.camera.ortho=s==="orthographic",this.setSlabAndFog()}setViewStyle(s){if(s=s||{},s.style=s.style||"",s.style.includes("outline")?this.renderer.enableOutline(s):this.renderer.disableOutline(),s.style.includes("ambientOcclusion")){var h={};s.strength&&(h.strength=s.strength),s.radius&&(h.radius=s.radius),this.renderer.enableAmbientOcclusion(h)}else this.renderer.disableAmbientOcclusion();return this}updateSize(){this.renderer.setSize(this.WIDTH,this.HEIGHT),this.ASPECT=this.renderer.getAspect(this.WIDTH,this.HEIGHT),this.renderer.setSize(this.WIDTH,this.HEIGHT),this.camera.aspect=this.ASPECT,this.camera.updateProjectionMatrix()}setWidth(s){return this.WIDTH=s||this.WIDTH,this.updateSize(),this}setHeight(s){return this.HEIGHT=s||this.HEIGHT,this.updateSize(),this}resize(){this.WIDTH=this.getWidth(),this.HEIGHT=this.getHeight();let s=!1;if(this.renderer.isLost()&&this.WIDTH>0&&this.HEIGHT>0){let h=!1,E=this.container.querySelector("canvas");E&&E!=this.renderer.getCanvas()?this.config.canvas=E:(E.remove(),this.config&&this.config.canvas!=null&&(delete this.config.canvas,h=!0)),this.setupRenderer(),this.initContainer(this.container),this.renderer.setClearColorHex(this.bgColor,this.config.backgroundAlpha),s=!0,h&&(this.config.canvas=this.renderer.getCanvas())}if(this.WIDTH==0||this.HEIGHT==0?this.animated&&this._viewer.pauseAnimate():this.animated&&this._viewer.resumeAnimate(),this.updateSize(),s){let h=this.renderer.supportedExtensions();if(h.regen=!0,this.viewers)for(let E=0,x=this.viewers.length;E<x;E++)for(let D=0,z=this.viewers[E].length;D<z;D++)this.viewers[E][D].render(null,h);this._viewer.render(null,h)}else this.show();return this}getModel(s){return s===void 0?this.models.length==0?null:this.models[this.models.length-1]:s instanceof _.GLModel?s:s in this.models?this.models[s]:this.models.length==0?null:this.models[this.models.length-1]}spin(s,h=1,E=!1){if(clearInterval(this.spinInterval),typeof s>"u"&&(s="y"),typeof s=="boolean")if(s)s="y";else return;Array.isArray(s)&&(s={x:s[0],y:s[1],z:s[2]});var x=this;this.spinInterval=setInterval(function(){!x.getCanvas().isConnected&&x.renderer.isLost()&&clearInterval(x.spinInterval),(!E||x.container.checkVisibility&&x.container.checkVisibility())&&x.rotate(1*h,s)},25)}animateMotion(s,h,E,x,D,z){var P=20,G=Math.ceil(s/P);G<1&&(G=1),this.incAnim();var B={mpos:this.modelGroup.position.clone(),rz:this.rotationGroup.position.z,rot:this.rotationGroup.quaternion.clone(),cam:this.lookingAt.clone()};if(h){let U=new Array(G);for(let j=0;j<G;j++){let H=(j+1)/G,Z={mpos:B.mpos,rz:B.rz,rot:B.rot};Z.mpos=E.clone().sub(B.mpos).multiplyScalar(H).add(B.mpos),Z.rz=B.rz+H*(x-B.rz),Z.rot=i.slerp(B.rot,D,H),Z.cam=z.clone().sub(B.cam).multiplyScalar(H).add(B.cam),U[j]=Z}let W=0,F=this,Y=function(){var j=U[W];W+=1,F.modelGroup.position=j.mpos,F.rotationGroup.position.z=j.rz,F.rotationGroup.quaternion=j.rot,F.camera.lookAt(j.cam),W<U.length?setTimeout(Y,P):F.decAnim(),F.show()};setTimeout(Y,P)}else{var K={};let U=1/G;if(E&&(K.mpos=E.clone().sub(B.mpos).multiplyScalar(U)),typeof x<"u"&&x!=null&&(K.rz=U*(x-B.rz)),D){var k=i.slerp(B.rot,D,U);K.rot=B.rot.clone().inverse().multiply(k)}z&&(K.cam=z.clone().sub(B.cam).multiplyScalar(U));let W=0,F=this,Y=function(){W+=1,K.mpos&&F.modelGroup.position.add(K.mpos),K.rz&&(F.rotationGroup.position.z+=K.rz),K.rot&&F.rotationGroup.quaternion.multiply(K.rot),K.cam&&(F.lookingAt.add(K.cam),F.camera.lookAt(F.lookingAt)),W<G?setTimeout(Y,P):F.decAnim(),F.show()};setTimeout(Y,P)}}rotate(s,h="y",E=0,x=!1){if(h=="x"?h={x:1,y:0,z:0}:h=="y"?h={x:0,y:1,z:0}:h=="z"&&(h={x:0,y:0,z:1}),h=="vx"?h={vx:1,vy:0,vz:0}:h=="vy"?h={vx:0,vy:1,vz:0}:h=="vz"&&(h={vx:0,vy:0,vz:1}),typeof h.vx<"u"){var D=new y.Vector3(h.vx,h.vy,h.vz);D.applyQuaternion(this.rotationGroup.quaternion),h={x:D.x,y:D.y,z:D.z}}var z=function(K){var k=Math.sin(K/2),U=Math.cos(K/2),W=0,F=0,Y=0;return W=h.x*k,F=h.y*k,Y=h.z*k,new y.Quaternion(W,F,Y,U).normalize()},P=Math.PI*s/180,G=z(P);if(E){var B=new y.Quaternion().copy(this.rotationGroup.quaternion).multiply(G);this.animateMotion(E,x,this.modelGroup.position,this.rotationGroup.position.z,B,this.lookingAt)}else this.rotationGroup.quaternion.multiply(G),this.show();return this}surfacesFinished(){for(var s in this.surfaces)if(!this.surfaces[s][0].done)return!1;return!0}getView(){if(!this.modelGroup)return[0,0,0,0,0,0,0,1];var s=this.modelGroup.position,h=this.rotationGroup.quaternion;return[s.x,s.y,s.z,this.rotationGroup.position.z,h.x,h.y,h.z,h.w]}setView(s,h){return s===void 0||!(s instanceof Array||s.length!==8)?this:!this.modelGroup||!this.rotationGroup?this:(this.modelGroup.position.x=s[0],this.modelGroup.position.y=s[1],this.modelGroup.position.z=s[2],this.rotationGroup.position.z=s[3],this.rotationGroup.quaternion.x=s[4],this.rotationGroup.quaternion.y=s[5],this.rotationGroup.quaternion.z=s[6],this.rotationGroup.quaternion.w=s[7],typeof s[8]<"u"&&(this.rotationGroup.position.x=s[8],this.rotationGroup.position.y=s[9]),this.show(h),this)}render(s,h){this.renderer.setViewport(),this.updateClickables();var E=this.getView();this.stateChangeCallback&&this.stateChangeCallback(this.getInternalState());var x,D;for(h||(h=this.renderer.supportedExtensions()),x=0;x<this.models.length;x++)this.models[x]&&this.models[x].globj(this.modelGroup,h);for(x=0;x<this.shapes.length;x++)this.shapes[x]&&(typeof this.shapes[x].frame>"u"||this.viewer_frame<0||this.shapes[x].frame<0||this.shapes[x].frame==this.viewer_frame?this.shapes[x].globj(this.modelGroup,h):this.shapes[x].removegl(this.modelGroup));for(x=0;x<this.labels.length;x++)h.regen&&(this.labels[x].dispose(),this.modelGroup.remove(this.labels[x].sprite),this.labels[x].setContext(),this.modelGroup.add(this.labels[x].sprite)),this.labels[x]&&typeof this.labels[x].frame<"u"&&this.labels[x].frame>=0&&(this.modelGroup.remove(this.labels[x].sprite),(this.viewer_frame<0||this.labels[x].frame==this.viewer_frame)&&this.modelGroup.add(this.labels[x].sprite));for(x in this.surfaces)if(this.surfaces.hasOwnProperty(x)){var z=this.surfaces[x];for(D=0;D<z.length;D++)if(z.hasOwnProperty(D)){var P=z[D].geo;if(!z[D].finished||h.regen){P.verticesNeedUpdate=!0,P.elementsNeedUpdate=!0,P.normalsNeedUpdate=!0,P.colorsNeedUpdate=!0,P.buffersNeedUpdate=!0,z[D].mat.needsUpdate=!0,z[D].done&&(z[D].finished=!0),z[D].lastGL&&this.modelGroup.remove(z[D].lastGL);var G=null;if(z[D].mat instanceof c.LineBasicMaterial?G=new c.Line(P,z[D].mat):G=new c.Mesh(P,z[D].mat),z[D].mat.transparent&&z[D].mat.opacity==0?G.visible=!1:G.visible=!0,z[D].symmetries.length>1||z[D].symmetries.length==1&&!z[D].symmetries[D].isIdentity()){var B,K=new c.Object3D;for(B=0;B<z[D].symmetries.length;B++){var k=G.clone();k.matrix=z[D].symmetries[B],k.matrixAutoUpdate=!1,K.add(k)}z[D].lastGL=K,this.modelGroup.add(K)}else z[D].lastGL=G,this.modelGroup.add(G)}}}return this.setView(E),typeof s=="function"&&s(this),this}getModelList(s){let h=[];if(typeof s>"u"||typeof s.model>"u")for(let x=0;x<this.models.length;x++)this.models[x]&&h.push(this.models[x]);else{let x=s.model;Array.isArray(x)||(x=[x]);for(let D=0;D<x.length;D++)if(typeof x[D]=="number"){var E=x[D];E<0&&(E+=this.models.length),h.push(this.models[E])}else h.push(x[D])}return h}getAtomsFromSel(s){var h=[];typeof s>"u"&&(s={});var E=this.getModelList(s);for(let x=0;x<E.length;x++)h=h.concat(E[x].selectedAtoms(s));return h}atomIsSelected(s,h){typeof h>"u"&&(h={});for(var E=this.getModelList(h),x=0;x<E.length;x++)if(E[x].atomIsSelected(s,h))return!0;return!1}selectedAtoms(s){return this.getAtomsFromSel(s)}getUniqueValues(s,h){typeof h>"u"&&(h={});var E=this.getAtomsFromSel(h),x={};for(var D in E)if(E[D].hasOwnProperty(s)){var z=E[D][s];x[z]=!0}return Object.keys(x)}pdbData(s){for(var h=this.getAtomsFromSel(s),E="",x=0,D=h.length;x<D;++x)E+=h[x].pdbline+`
`;return E}zoom(s=2,h=0,E=!1){var x=(this.CAMERA_Z-this.rotationGroup.position.z)/s,D=this.CAMERA_Z-x;return h>0?this.animateMotion(h,E,this.modelGroup.position,this.adjustZoomToLimits(D),this.rotationGroup.quaternion,this.lookingAt):(this.rotationGroup.position.z=this.adjustZoomToLimits(D),this.show()),this}translate(s,h,E=0,x=!1){var D=s/this.WIDTH,z=h/this.HEIGHT,P=new y.Vector3(0,0,-this.CAMERA_Z);this.projector.projectVector(P,this.camera),P.x-=D,P.y-=z,this.projector.unprojectVector(P,this.camera),P.z=0;var G=this.lookingAt.clone().add(P);return E>0?this.animateMotion(E,x,this.modelGroup.position,this.rotationGroup.position.z,this.rotationGroup.quaternion,G):(this.lookingAt=G,this.camera.lookAt(this.lookingAt),this.show()),this}translateScene(s,h,E=0,x=!1){var D=this.screenOffsetToModel(s,h),z=this.modelGroup.position.clone().add(D);return E>0?this.animateMotion(E,x,this.modelGroup.position,this.rotationGroup.position.z,this.rotationGroup.quaternion,this.lookingAt):(this.modelGroup.position=z,this.show()),this}fitSlab(s){s=s||{};var h=this.getAtomsFromSel(s),E=(0,R.getExtent)(h),x=E[1][0]-E[0][0],D=E[1][1]-E[0][1],z=E[1][2]-E[0][2],P=Math.hypot(x,D,z);return P<5&&(P=5),this.slabNear=-P/1.9,this.slabFar=P/2,this}center(s={},h=0,E=!1){var x,D,z=this.getAtomsFromSel(s),P=(0,R.getExtent)(z);(0,R.isEmptyObject)(s)?(this.shapes.forEach(H=>{if(H&&H.boundingSphere&&H.boundingSphere.center){var Z=H.boundingSphere.center,ne=H.boundingSphere.radius;ne>0?(z.push(new y.Vector3(Z.x+ne,Z.y,Z.z)),z.push(new y.Vector3(Z.x-ne,Z.y,Z.z)),z.push(new y.Vector3(Z.x,Z.y+ne,Z.z)),z.push(new y.Vector3(Z.x,Z.y-ne,Z.z)),z.push(new y.Vector3(Z.x,Z.y,Z.z+ne)),z.push(new y.Vector3(Z.x,Z.y,Z.z-ne))):z.push(Z)}}),P=(0,R.getExtent)(z),x=z,D=P):(x=this.getAtomsFromSel({}),D=(0,R.getExtent)(x));var G=new y.Vector3(P[2][0],P[2][1],P[2][2]),B=D[1][0]-D[0][0],K=D[1][1]-D[0][1],k=D[1][2]-D[0][2],U=Math.hypot(B,K,k);U<5&&(U=5),this.slabNear=-U/1.9,this.slabFar=U/2,B=P[1][0]-P[0][0],K=P[1][1]-P[0][1],k=P[1][2]-P[0][2],U=Math.hypot(B,K,k),U<5&&(U=5);for(var W=25,F=0;F<z.length;F++)if(z[F]){var Y=G.distanceToSquared(z[F]);Y>W&&(W=Y)}U=Math.sqrt(W)*2;var j=G.clone().multiplyScalar(-1);return h>0?this.animateMotion(h,E,j,this.rotationGroup.position.z,this.rotationGroup.quaternion,this.lookingAt):(this.modelGroup.position=j,this.show()),this}zoomTo(s={},h=0,E=!1){let x=this.getAtomsFromSel(s),D=(0,R.getExtent)(x),z=D;if((0,R.isEmptyObject)(s)){let Z=x&&x.length;if(this.shapes.forEach(ne=>{if(ne&&ne.boundingSphere){if(ne.boundingSphere.box){let de=ne.boundingSphere.box;x.push(new y.Vector3(de.min.x,de.min.y,de.min.z)),x.push(new y.Vector3(de.max.x,de.max.y,de.max.z))}else if(ne.boundingSphere.center){var se=ne.boundingSphere.center,me=ne.boundingSphere.radius;me>0?(x.push(new y.Vector3(se.x+me,se.y,se.z)),x.push(new y.Vector3(se.x-me,se.y,se.z)),x.push(new y.Vector3(se.x,se.y+me,se.z)),x.push(new y.Vector3(se.x,se.y-me,se.z)),x.push(new y.Vector3(se.x,se.y,se.z+me)),x.push(new y.Vector3(se.x,se.y,se.z-me))):x.push(se)}}}),z=(0,R.getExtent)(x),!Z)for(let ne=0;ne<3;ne++)D[2][ne]=(z[0][ne]+z[1][ne])/2}else{let Z=this.getAtomsFromSel({});z=(0,R.getExtent)(Z)}var P=new y.Vector3(D[2][0],D[2][1],D[2][2]),G=z[1][0]-z[0][0],B=z[1][1]-z[0][1],K=z[1][2]-z[0][2],k=Math.hypot(G,B,K);k<5&&(k=5),this.slabNear=-k/1.9,this.slabFar=k/2,Object.keys(s).length===0&&(this.slabNear=Math.min(-k*2,-50),this.slabFar=Math.max(k*2,50));var U=this.config.minimumZoomToDistance||5;G=D[1][0]-D[0][0],B=D[1][1]-D[0][1],K=D[1][2]-D[0][2],k=Math.hypot(G,B,K),k<U&&(k=U);for(var W=U*U,F=0;F<x.length;F++)if(x[F]){var Y=P.distanceToSquared(x[F]);Y>W&&(W=Y)}k=Math.sqrt(W)*2;var j=P.clone().multiplyScalar(-1),H=-(k*.5/Math.tan(Math.PI/180*this.camera.fov/2)-this.CAMERA_Z);return H=this.adjustZoomToLimits(H),h>0?this.animateMotion(h,E,j,H,this.rotationGroup.quaternion,this.lookingAt):(this.modelGroup.position=j,this.rotationGroup.position.z=H,this.show()),this}setSlab(s,h){this.slabNear=s,this.slabFar=h}getSlab(){return{near:this.slabNear,far:this.slabFar}}addLabel(s,h={},E,x=!1){if(E){var D=(0,R.getExtent)(this.getAtomsFromSel(E));h.position={x:D[2][0],y:D[2][1],z:D[2][2]}}var z=new A.Label(s,h);return z.setContext(),this.modelGroup.add(z.sprite),this.labels.push(z),x||this.show(),z}addResLabels(s,h,E=!1){let x=this.labels.length;return this.applyToModels("addResLabels",s,this,h,E),this.show(),this.labels.slice(x)}addPropertyLabels(s,h,E){return this.applyToModels("addPropertyLabels",s,h,this,E),this.show(),this}removeLabel(s){for(var h=0;h<this.labels.length;h++)if(this.labels[h]==s){this.labels.splice(h,1),s.dispose(),this.modelGroup.remove(s.sprite);break}return this.show(),this}removeAllLabels(){for(var s=0;s<this.labels.length;s++)this.labels[s]&&this.labels[s].sprite&&this.modelGroup.remove(this.labels[s].sprite);return this.labels.splice(0,this.labels.length),this.show(),this}hideAllLabels(){for(var s=0;s<this.labels.length;s++)this.labels[s]&&this.labels[s].hide();return this.show(),this}showAllLabels(){for(var s=0;s<this.labels.length;s++)this.labels[s]&&this.labels[s].show();return this.show(),this}setLabelStyle(s,h){return this.modelGroup.remove(s.sprite),s.dispose(),s.stylespec=h,s.setContext(),this.modelGroup.add(s.sprite),this.show(),s}setLabelText(s,h){return this.modelGroup.remove(s.sprite),s.dispose(),s.text=h,s.setContext(),this.modelGroup.add(s.sprite),this.show(),s}addShape(s){s=s||{};var h=new g.GLShape(s);return h.shapePosition=this.shapes.length,this.shapes.push(h),h}removeShape(s){if(!s)return this;for(s.removegl(this.modelGroup),delete this.shapes[s.shapePosition];this.shapes.length>0&&typeof this.shapes[this.shapes.length-1]>"u";)this.shapes.pop();return this}removeAllShapes(){for(var s=0;s<this.shapes.length;s++){var h=this.shapes[s];h&&h.removegl(this.modelGroup)}return this.shapes.splice(0,this.shapes.length),this}getSelectionCenter(s){if(s.hasOwnProperty("x")&&s.hasOwnProperty("y")&&s.hasOwnProperty("z"))return s;var h=this.getAtomsFromSel(s);if(h.length==0)return{x:0,y:0,z:0};var E=(0,R.getExtent)(h);return{x:E[0][0]+(E[1][0]-E[0][0])/2,y:E[0][1]+(E[1][1]-E[0][1])/2,z:E[0][2]+(E[1][2]-E[0][2])/2}}addSphere(s){s=s||{},s.center=this.getSelectionCenter(s.center);var h=new g.GLShape(s);return h.shapePosition=this.shapes.length,h.addSphere(s),this.shapes.push(h),h.finalize(),h}addBox(s={}){s.corner!=null&&(s.corner=this.getSelectionCenter(s.corner)),s.center!=null&&(s.center=this.getSelectionCenter(s.center));var h=new g.GLShape(s);return h.shapePosition=this.shapes.length,h.addBox(s),this.shapes.push(h),h.finalize(),h}addArrow(s={}){s.start=this.getSelectionCenter(s.start),s.end=this.getSelectionCenter(s.end);var h=new g.GLShape(s);return h.shapePosition=this.shapes.length,h.addArrow(s),this.shapes.push(h),h.finalize(),h}addCylinder(s={}){s.start=this.getSelectionCenter(s.start),s.end=this.getSelectionCenter(s.end);var h=new g.GLShape(s);return h.shapePosition=this.shapes.length,s.dashed?h.addDashedCylinder(s):h.addCylinder(s),this.shapes.push(h),h.finalize(),h}addCurve(s={}){var h=new g.GLShape(s);return h.shapePosition=this.shapes.length,h.addCurve(s),this.shapes.push(h),h.finalize(),h}addLine(s={}){s.start=this.getSelectionCenter(s.start),s.end=this.getSelectionCenter(s.end),s.wireframe=!0;var h=new g.GLShape(s);return h.shapePosition=this.shapes.length,s.dashed?h=this.addLineDashed(s,h):h.addLine(s),this.shapes.push(h),h.finalize(),h}addUnitCell(s,h){s=this.getModel(s),h=h||{alabel:"a",blabel:"b",clabel:"c"},h.box=h.box||{},h.astyle=h.astyle||{color:"red",radius:.1,midpos:-1},h.bstyle=h.bstyle||{color:"green",radius:.1,midpos:-1},h.cstyle=h.cstyle||{color:"blue",radius:.1,midpos:-1},h.alabelstyle=h.alabelstyle||{fontColor:"red",showBackground:!1,alignment:"center",inFront:!1},h.blabelstyle=h.blabelstyle||{fontColor:"green",showBackground:!1,alignment:"center",inFront:!1},h.clabelstyle=h.clabelstyle||{fontColor:"blue",showBackground:!1,alignment:"center",inFront:!1},s.unitCellObjects&&this.removeUnitCell(s),s.unitCellObjects={shapes:[],labels:[]};var E=s.getCrystData(),x=null;if(E){if(E.matrix)x=E.matrix;else{var D=E.a,z=E.b,P=E.c,G=E.alpha,B=E.beta,K=E.gamma;G=G*Math.PI/180,B=B*Math.PI/180,K=K*Math.PI/180;var k,U,W;k=Math.cos(B),U=(Math.cos(G)-Math.cos(B)*Math.cos(K))/Math.sin(K),W=Math.sqrt(Math.max(0,1-k*k-U*U)),x=new y.Matrix3(D,z*Math.cos(K),P*k,0,z*Math.sin(K),P*U,0,0,P*W)}var F=[new y.Vector3(0,0,0),new y.Vector3(1,0,0),new y.Vector3(0,1,0),new y.Vector3(0,0,1),new y.Vector3(1,1,0),new y.Vector3(0,1,1),new y.Vector3(1,0,1),new y.Vector3(1,1,1)];if(E.matrix4)for(let j=0;j<F.length;j++)E.size&&F[j].multiplyVectors(F[j],E.size),F[j]=F[j].applyMatrix4(E.matrix4);else for(let j=0;j<F.length;j++)F[j]=F[j].applyMatrix3(x);if(h.box&&!h.box.hidden){h.box.wireframe=!0;var Y=new g.GLShape(h.box);Y.shapePosition=this.shapes.length,Y.addLine({start:F[0],end:F[1]}),Y.addLine({start:F[0],end:F[2]}),Y.addLine({start:F[1],end:F[4]}),Y.addLine({start:F[2],end:F[4]}),Y.addLine({start:F[0],end:F[3]}),Y.addLine({start:F[3],end:F[5]}),Y.addLine({start:F[2],end:F[5]}),Y.addLine({start:F[1],end:F[6]}),Y.addLine({start:F[4],end:F[7]}),Y.addLine({start:F[6],end:F[7]}),Y.addLine({start:F[3],end:F[6]}),Y.addLine({start:F[5],end:F[7]}),this.shapes.push(Y),s.unitCellObjects.shapes.push(Y),Y.finalize()}if(!h.astyle.hidden){h.astyle.start=F[0],h.astyle.end=F[1];let j=this.addArrow(h.astyle);s.unitCellObjects.shapes.push(j)}if(!h.bstyle.hidden){h.bstyle.start=F[0],h.bstyle.end=F[2];let j=this.addArrow(h.bstyle);s.unitCellObjects.shapes.push(j)}if(!h.cstyle.hidden){h.cstyle.start=F[0],h.cstyle.end=F[3];let j=this.addArrow(h.cstyle);s.unitCellObjects.shapes.push(j)}if(h.alabel){h.alabelstyle.position=F[1];let j=this.addLabel(h.alabel,h.alabelstyle);s.unitCellObjects.labels.push(j)}if(h.blabel){h.blabelstyle.position=F[2];let j=this.addLabel(h.blabel,h.blabelstyle);s.unitCellObjects.labels.push(j)}if(h.clabel){h.clabelstyle.position=F[3];let j=this.addLabel(h.clabel,h.clabelstyle);s.unitCellObjects.labels.push(j)}}}removeUnitCell(s){if(s=this.getModel(s),s.unitCellObjects){let h=this;s.unitCellObjects.shapes.forEach(function(E){h.removeShape(E)}),s.unitCellObjects.labels.forEach(function(E){h.removeLabel(E)})}delete s.unitCellObjects}replicateUnitCell(s=3,h=s,E=h,x,D,z){x=this.getModel(x);let P=x.getCrystData();if(P){const G=x.selectedAtoms({}),B=P.matrix;let K=function(U){return U%2==0?-U/2:Math.ceil(U/2)};s<=1&&h<=1&&E<=1&&(z=!0,s=h=E=3);let k=function(U,W,F){return!1};if(z){const U=new y.Matrix3().getInverse3(B);k=function(W,F,Y){let j=new y.Vector3(W,F,Y).applyMatrix3(U);return!(j.x>-1e-4&&j.x<1.0001&&j.y>-1e-4&&j.y<1.0001&&j.z>-1e-4&&j.z<1.0001)}}for(let U=0;U<s;U++)for(let W=0;W<h;W++)for(let F=0;F<E;F++){if(U==0&&W==0&&F==0)continue;let Y=new y.Vector3(K(U),K(W),K(F));Y.applyMatrix3(B);let j=[];for(let H=0;H<G.length;H++){let Z=G[H].x+Y.x,ne=G[H].y+Y.y,se=G[H].z+Y.z;if(k(Z,ne,se))continue;let me={};for(let de in G[H])me[de]=G[H][de];me.x=Z,me.y=ne,me.z=se,j.push(me)}x.addAtoms(j)}D&&x.assignBonds()}}addLineDashed(s,h){s.dashLength=s.dashLength||.5,s.gapLength=s.gapLength||.5;var E;s.start?E=new y.Vector3(s.start.x||0,s.start.y||0,s.start.z||0):E=new y.Vector3(0,0,0);var x;s.end?x=new y.Vector3(s.end.x,s.end.y||0,s.end.z||0):x=new y.Vector3(0,0,0);var D=new y.Vector3,z=new y.Vector3,P=new y.Vector3,G,B,K,k=E.clone(),U=0;for(D.subVectors(x,E),G=D.length(),D.normalize(),z=D.clone(),P=D.clone(),z.multiplyScalar(s.dashLength),P.multiplyScalar(s.gapLength),B=z.length(),K=P.length();U<G;){if(U+B>G){s.start=E,s.end=x,h.addLine(s);break}k.addVectors(E,z),s.start=E,s.end=k,h.addLine(s),E=k.clone(),U+=B,k.addVectors(E,P),E=k.clone(),U+=K}return h.finalize(),h}addCustom(s){s=s||{};var h=new g.GLShape(s);return h.shapePosition=this.shapes.length,h.addCustom(s),this.shapes.push(h),h.finalize(),h}addVolumetricData(s,h,E={}){var x=new T.VolumeData(s,h);return E.hasOwnProperty("transferfn")?this.addVolumetricRender(x,E):this.addIsosurface(x,E)}addIsosurface(s,h={},E){var x=new g.GLShape(h);return x.shapePosition=this.shapes.length,x.addIsosurface(s,h,E,this),this.shapes.push(x),x}addVolumetricRender(s,h){h=h||{};var E=new w.GLVolumetricRender(s,h,this);return E.shapePosition=this.shapes.length,this.shapes.push(E),E}hasVolumetricRender(){return this.renderer.supportsVolumetric()}enableFog(s){s?this.scene.fog=new c.Fog(this.bgColor,100,200):(this.config.disableFog=!0,this.show())}setFrame(s){this.viewer_frame=s;let h=this;return new Promise(function(E){var x=h.models.map(function(D){return D.setFrame(s,h)});Promise.all(x).then(function(){E()})})}getFrame(){return this.viewer_frame}getNumFrames(){var s=0;for(let h=0;h<this.models.length;h++)this.models[h].getNumFrames()>s&&(s=this.models[h].getNumFrames());for(let h=0;h<this.shapes.length;h++)this.shapes[h].frame&&this.shapes[h].frame>=s&&(s=this.shapes[h].frame+1);for(let h=0;h<this.labels.length;h++)this.labels[h].frame&&this.labels[h].frame>=s&&(s=this.labels[h].frame+1);return s}animate(s){this.incAnim();var h=100,E="forward",x=1/0;s=s||{},s.interval&&(h=s.interval),s.loop&&(E=s.loop),s.reps&&(x=s.reps);var D=this.getNumFrames(),z=this,P=0;s.startFrame&&(P=s.startFrame%D);var G=1;s.step&&(G=s.step,x/=G);var B=0,K=D*x,k=new Date,U,W,F=function(Y){k=new Date,Y=="forward"?z.setFrame(P).then(function(){P=(P+G)%D,U()}):Y=="backward"?z.setFrame(D-1-P).then(function(){P=(P+G)%D,U()}):z.setFrame(P).then(function(){P+=G,G*=P%(D-1)==0?-1:1,U()})};return U=function(){if(z.render(),!z.getCanvas().isConnected)z.stopAnimate();else if(++B>=K||!z.isAnimated())W.cancel(),z.animationTimers.delete(W),z.decAnim();else{var Y=h-(new Date().getTime()-k.getTime());Y=Y>0?Y:0,z.animationTimers.delete(W),W=new R.PausableTimer(F,Y,E),z.animationTimers.add(W)}},W=new R.PausableTimer(F,0,E),this.animationTimers.add(W),this}stopAnimate(){return this.animated=0,this.animationTimers.forEach(function(s){s.cancel()}),this.animationTimers=new Set,this}pauseAnimate(){return this.animationTimers.forEach(function(s){s.pause()}),this}resumeAnimate(){return this.animationTimers.forEach(function(s){s.resume()}),this}isAnimated(){return this.animated>0}getModelOpt(s){return s&&!s.defaultcolors?(s.defaultcolors=this.defaultcolors,s.cartoonQuality=s.cartoonQuality||this.config.cartoonQuality):typeof s>"u"&&(s={defaultcolors:this.defaultcolors,cartoonQuality:this.config.cartoonQuality}),s}addModel(s,h="",E){E=this.getModelOpt(E);var x=new _.GLModel(this.models.length,E);return x.addMolData(s,h,E),this.models.push(x),x}addModels(s,h,E){E=this.getModelOpt(E),E.multimodel=!0,E.frames=!0;for(var x=_.GLModel.parseMolData(s,h,E),D=0;D<x.length;D++){var z=new _.GLModel(this.models.length,E);z.setAtomDefaults(x[D]),z.addFrame(x[D]),z.setFrame(0),x.modelData&&z.setModelData(x.modelData[D]),z.setDontDuplicateAtoms(!E.duplicateAssemblyAtoms),this.models.push(z)}return this.models}addModelsAsFrames(s,h,E){E=this.getModelOpt(E),E.multimodel=!0,E.frames=!0;var x=new _.GLModel(this.models.length,E);return x.addMolData(s,h,E),this.models.push(x),x}addAsOneMolecule(s,h,E){E=this.getModelOpt(E),E.multimodel=!0,E.onemol=!0;var x=new _.GLModel(this.models.length,E);return x.addMolData(s,h,E),this.models.push(x),x}removeModel(s){if(s=this.getModel(s),!!s){for(s.removegl(this.modelGroup),delete this.models[s.getID()];this.models.length>0&&typeof this.models[this.models.length-1]>"u";)this.models.pop();return this}}removeAllModels(){for(var s=0;s<this.models.length;s++){var h=this.models[s];h&&h.removegl(this.modelGroup)}return this.models.splice(0,this.models.length),this}exportJSON(s,h){var E={};return h===void 0?E.m=this.models.map(function(x){return x.toCDObject(s)}):E.m=[this.models[h].toCDObject()],JSON.stringify(E)}exportVRML(){var s=this.modelGroup;this.applyToModels("removegl",this.modelGroup),this.modelGroup=new c.Object3D,this.render(null,{supportsImposters:!1,supportsAIA:!1,regen:!0});var h=`#VRML V2.0 utf8
`+this.modelGroup.vrml()+`
`;return this.applyToModels("removegl",this.modelGroup),this.modelGroup=s,h}createModelFrom(s,h=!1){for(var E=new _.GLModel(this.models.length,this.defaultcolors),x=0;x<this.models.length;x++)if(this.models[x]){var D=this.models[x].selectedAtoms(s);E.addAtoms(D),h&&this.models[x].removeAtoms(D)}return this.models.push(E),E}applyToModels(s,h,E,x,D,z,P){for(var G=this.getModelList(h),B=0;B<G.length;B++)G[B][s](h,E,x,D,z,P)}setStyle(s,h){return typeof h>"u"&&(h=s,s={}),this.applyToModels("setStyle",s,h,!1),this}addStyle(s,h){return typeof h>"u"&&(h=s,s={}),this.applyToModels("setStyle",s,h,!0),this}setClickable(s,h,E){return this.applyToModels("setClickable",s,h,E),this}setHoverable(s,h,E,x){return this.applyToModels("setHoverable",s,h,E,x),this}enableContextMenu(s,h){return this.applyToModels("enableContextMenu",s,h),this}vibrate(s,h,E,x){return this.applyToModels("vibrate",s,h,E,this,x),this}setColorByProperty(s,h,E,x){return this.applyToModels("setColorByProperty",s,h,E,x),this}setColorByElement(s,h){return this.applyToModels("setColorByElement",s,h),this}static getAtomsWithin(s,h){var E=[];for(let D=0;D<s.length;D++){var x=s[D];typeof x>"u"||x.x<h[0][0]||x.x>h[1][0]||x.y<h[0][1]||x.y>h[1][1]||x.z<h[0][2]||x.z>h[1][2]||E.push(x)}return E}static volume(s){var h=s[1][0]-s[0][0],E=s[1][1]-s[0][1],x=s[1][2]-s[0][2];return h*E*x}carveUpExtent(s,h,E){let x=[],D={};for(let k=0,U=h.length;k<U;k++)D[h[k].index]=k;let z=function(k){let U=[];for(let W=0,F=k.length;W<F;W++)k[W].index in D&&U.push(D[k[W].index]);return U},P=function(k){let U=[];return U[0]=[k[0][0],k[0][1],k[0][2]],U[1]=[k[1][0],k[1][1],k[1][2]],U},G=function(k){if(i.volume(k)<i.maxVolume)return[k];var U=k[1][0]-k[0][0],W=k[1][1]-k[0][1],F=k[1][2]-k[0][2],Y;U>W&&U>F?Y=0:W>U&&W>F?Y=1:Y=2;var j=P(k),H=P(k),Z=(k[1][Y]-k[0][Y])/2+k[0][Y];j[1][Y]=Z,H[0][Y]=Z;var ne=G(j),se=G(H);return ne.concat(se)},B=G(s),K=6;for(let k=0,U=B.length;k<U;k++){let W=P(B[k]);W[0][0]-=K,W[0][1]-=K,W[0][2]-=K,W[1][0]+=K,W[1][1]+=K,W[1][2]+=K;let F=i.getAtomsWithin(h,W),Y=i.getAtomsWithin(E,B[k]);x.push({extent:B[k],atoms:z(F),toshow:z(Y)})}return x}static generateSurfaceMesh(s,h,E){var x=new c.Geometry(!0),D=x.updateGeoGroup(0),z=[];for(let ye=0,he=s.length;ye<he;ye++){var P=s[ye];P&&(typeof P.surfaceColor<"u"?z[ye]=P.surfaceColor:P.color&&(z[ye]=S.CC.color(P.color)))}var G=D.vertexArray,B=h.vertices;for(let ye=0,he=B.length;ye<he;ye++){let Ce=D.vertices*3;G[Ce]=B[ye].x,G[Ce+1]=B[ye].y,G[Ce+2]=B[ye].z,D.vertices++}var K=D.colorArray;let k=D.atomArray;if(E.voldata&&E.volscheme){var U=E.volscheme,W=E.voldata,F=U.range()||[-1,1];for(let ye=0,he=B.length;ye<he;ye++){let Ce=B[ye].atomid,ke=W.getVal(B[ye].x,B[ye].y,B[ye].z),Xe=S.CC.color(U.valueToHex(ke,F)),nt=ye*3;K[nt]=Xe.r,K[nt+1]=Xe.g,K[nt+2]=Xe.b,k[ye]=s[Ce]}}else if(z.length>0)for(let ye=0,he=B.length;ye<he;ye++){let Ce=B[ye].atomid,ke=ye*3;K[ke]=z[Ce].r,K[ke+1]=z[Ce].g,K[ke+2]=z[Ce].b,k[ye]=s[Ce]}var Y=h.faces;D.faceidx=Y.length,x.initTypedArrays();var j=D.vertexArray,H=D.normalArray,Z,ne,se,me;for(let ye=0,he=Y.length;ye<he;ye+=3){var de=Y[ye],ue=Y[ye+1],ce=Y[ye+2],pe=de*3,De=ue*3,we=ce*3;Z=new y.Vector3(j[pe],j[pe+1],j[pe+2]),ne=new y.Vector3(j[De],j[De+1],j[De+2]),se=new y.Vector3(j[we],j[we+1],j[we+2]),se.subVectors(se,ne),Z.subVectors(Z,ne),se.cross(Z),me=se,me.normalize(),H[pe]+=me.x,H[De]+=me.x,H[we]+=me.x,H[pe+1]+=me.y,H[De+1]+=me.y,H[we+1]+=me.y,H[pe+2]+=me.z,H[De+2]+=me.z,H[we+2]+=me.z}D.faceArray=new Uint16Array(Y);var je=new c.Mesh(x,E);return je}static generateMeshSyncHelper(s,h,E,x,D,z){var P=new O.ProteinSurface;return P.initparm(h,s!==1,z),P.fillvoxels(D,E),P.buildboundary(),(s==O.SurfaceType.SES||s==O.SurfaceType.MS)&&(P.fastdistancemap(),P.boundingatom(!1),P.fillvoxelswaals(D,E)),P.marchingcube(s),P.getFacesAndVertices(x)}static getMatWithStyle(s){let h=null;s.onesided?h=new c.MeshLambertMaterial:h=new c.MeshDoubleLambertMaterial,h.vertexColors=c.Coloring.VertexColors;for(var E in s)E==="color"||E==="map"||s.hasOwnProperty(E)&&(h[E]=s[E]);return s.opacity!==void 0&&(s.opacity===1?h.transparent=!1:h.transparent=!0),h}addMesh(s){var h={geo:s.geometry,mat:s.material,done:!0,finished:!1},E=this.nextSurfID();return this.surfaces[E]=[h],E}static shallowCopy(s){var h=[];let E=s.length;for(let x=0;x<E;x++)h[x]=(0,R.extend)({},s[x]);return h}addSurface(s,h={},E={},x,D,z){let P=this.nextSurfID(),G=null,B=this,K=O.SurfaceType.VDW;typeof s=="string"?i.surfaceTypeMap[s.toUpperCase()]!==void 0?K=i.surfaceTypeMap[s]:console.log("Surface type : "+s+" is not recognized"):typeof s=="number"&&(K=s);var k=null,U=null,W=i.shallowCopy(this.getAtomsFromSel(E));x?k=i.shallowCopy(this.getAtomsFromSel(x)):k=W,(0,R.adjustVolumeStyle)(h);var F=!1,Y;for(Y=0;Y<this.models.length;Y++)if(this.models[Y]){var j=this.models[Y].getSymmetries();if(j.length>1||j.length==1&&!j[0].isIdentity()){F=!0;break}}var H=function(ce,pe,De){D?U=i.shallowCopy(B.getAtomsFromSel(D)):U=De;var we,je=(0,R.getExtent)(De,!0);if(h.map&&h.map.prop){var ye=h.map.prop;let We=(0,m.getGradient)(h.map.scheme||h.map.gradient||new m.Gradient.RWB),ut=We.range();ut||(ut=(0,R.getPropertyRange)(De,ye)),h.colorscheme={prop:ye,gradient:We}}for(let We=0,ut=pe.length;We<ut;We++)we=pe[We],we.surfaceColor=(0,R.getColorFromStyle)(we,h);var he=i.volume(je),Ce=B.carveUpExtent(je,pe,De);if(U&&U.length&&U.length>0){var ke=(0,R.getExtent)(U,!0),Xe=function(We,ut){var ot=function(le,Re){var xe=le.extent,Ye=xe[1][0]-xe[0][0],Ge=xe[1][1]-xe[0][1],q=xe[1][2]-xe[0][2],_e=Ye-Re[2][0];_e*=_e;var Oe=Ge-Re[2][1];Oe*=Oe;var Ke=q-Re[2][2];return Ke*=Ke,_e+Oe+Ke},J=ot(We,ke),re=ot(ut,ke);return J-re};Ce.sort(Xe)}var nt=[];for(let We=0,ut=pe.length;We<ut;We++)we=pe[We],nt[We]={x:we.x,y:we.y,z:we.z,serial:We,elem:we.elem};var at=!!O.syncSurface;if(at){var rt=function(ut){return new Promise(function(ot){for(var J=i.generateMeshSyncHelper(K,Ce[ut].extent,Ce[ut].atoms,Ce[ut].toshow,nt,he),re=(0,g.splitMesh)({vertexArr:J.vertices,faceArr:J.faces}),le=0,Re=re.length;le<Re;le++){J={vertices:re[le].vertexArr,faces:re[le].faceArr};var xe=i.generateSurfaceMesh(pe,J,G);(0,R.mergeGeos)(ce.geo,xe)}B.render(),ot()})},et=[];for(let We=0;We<Ce.length;We++)et.push(rt(We));return Promise.all(et).then(function(){return ce.done=!0,Promise.resolve(P)})}else{var Je=[];K<0&&(K=0);for(let We=0,ut=i.numWorkers;We<ut;We++){var $e=new Worker($3Dmol.SurfaceWorker);Je.push($e),$e.postMessage({type:-1,atoms:nt,volume:he})}return new Promise(function(We,ut){var ot=0,J=function(){!Je||!Je.length||Je.forEach(function(xe){xe&&xe.terminate&&xe.terminate()})},re=function(xe){for(var Ye=(0,g.splitMesh)({vertexArr:xe.data.vertices,faceArr:xe.data.faces}),Ge=0,q=Ye.length;Ge<q;Ge++){var _e={vertices:Ye[Ge].vertexArr,faces:Ye[Ge].faceArr},Oe=i.generateSurfaceMesh(pe,_e,G);(0,R.mergeGeos)(ce.geo,Oe)}B.render(),ot++,ot==Ce.length&&(ce.done=!0,J(),We(P))},le=function(xe){J(),console.log(xe.message+" ("+xe.filename+":"+xe.lineno+")"),ut(xe)};for(let xe=0;xe<Ce.length;xe++){var Re=Je[xe%Je.length];Re.onmessage=re,Re.onerror=le,Re.postMessage({type:K,expandedExtent:Ce[xe].extent,extendedAtoms:Ce[xe].atoms,atomsToShow:Ce[xe].toshow})}})}};h=h||{},G=i.getMatWithStyle(h);var Z=[];Z.style=h,Z.atomsel=E,Z.allsel=x,Z.focus=D;var ne=null;if(F){var se={},me={};for(Y=0;Y<this.models.length;Y++)se[Y]=[],me[Y]=[];for(Y=0;Y<k.length;Y++)se[k[Y].model].push(k[Y]);for(Y=0;Y<W.length;Y++)me[W[Y].model].push(W[Y]);var de=[];for(Y=0;Y<this.models.length;Y++)me[Y].length>0&&(Z.push({geo:new c.Geometry(!0),mat:G,done:!1,finished:!1,symmetries:this.models[Y].getSymmetries()}),de.push(H(Z[Z.length-1],se[Y],me[Y])));ne=Promise.all(de)}else Z.push({geo:new c.Geometry(!0),mat:G,done:!1,finished:!1,symmetries:[new y.Matrix4]}),ne=H(Z[Z.length-1],k,W);return this.surfaces[P]=Z,ne.surfid=P,z&&typeof z=="function"?(ne.then(function(ue){z(ue)}),P):ne}setSurfaceMaterialStyle(s,h){if((0,R.adjustVolumeStyle)(h),this.surfaces[s]){var E=this.surfaces[s];for(let D=0;D<E.length;D++){var x=E[D].mat=i.getMatWithStyle(h);if(E[D].mat.side=c.FrontSide,h.color){E[D].mat.color=S.CC.color(h.color),E[D].geo.colorsNeedUpdate=!0;const z=S.CC.color(h.color);E[D].geo.setColor(z)}else if(x.voldata&&x.volscheme){const z=x.volscheme,P=x.voldata,G=S.CC,B=z.range()||[-1,1];E[D].geo.setColors(function(K,k,U){let W=P.getVal(K,k,U);return G.color(z.valueToHex(W,B))})}else{E[D].geo.colorsNeedUpdate=!0;for(let z of E[D].geo.geometryGroups)for(let P=0;P<z.vertices;P++){let G=(0,R.getColorFromStyle)(z.atomArray[P],h),B=3*P;z.colorArray[B]=G.r,z.colorArray[B+1]=G.g,z.colorArray[B+2]=G.b}}E[D].finished=!1}}return this}getSurface(s){return this.surfaces[s]}removeSurface(s){for(var h=this.surfaces[s],E=0;E<h.length;E++)h[E]&&h[E].lastGL&&(h[E].geo!==void 0&&h[E].geo.dispose(),h[E].mat!==void 0&&h[E].mat.dispose(),this.modelGroup.remove(h[E].lastGL));return delete this.surfaces[s],this.show(),this}removeAllSurfaces(){for(var s in this.surfaces)if(this.surfaces.hasOwnProperty(s)){for(var h=this.surfaces[s],E=0;E<h.length;E++)h[E]&&h[E].lastGL&&(h[E].geo!==void 0&&h[E].geo.dispose(),h[E].mat!==void 0&&h[E].mat.dispose(),this.modelGroup.remove(h[E].lastGL));delete this.surfaces[s]}return this.show(),this}jmolMoveTo(){var s=this.modelGroup.position,h="center { "+-s.x+" "+-s.y+" "+-s.z+" }; ",E=this.rotationGroup.quaternion;return h+="moveto .5 quaternion { "+E.x+" "+E.y+" "+E.z+" "+E.w+" };",h}clear(){return this.removeAllSurfaces(),this.removeAllModels(),this.removeAllLabels(),this.removeAllShapes(),this.show(),this}mapAtomProperties(s,h){h=h||{};var E=this.getAtomsFromSel(h);if(typeof s=="function")for(let z=0,P=E.length;z<P;z++){let G=E[z];s(G)}else for(let z=0,P=E.length;z<P;z++){var x=E[z];for(let G=0,B=s.length;G<B;G++){let K=s[G];if(K.props)for(var D in K.props)K.props.hasOwnProperty(D)&&this.atomIsSelected(x,K)&&(x.properties||(x.properties={}),x.properties[D]=K.props[D])}}return this}linkViewer(s){return this.linkedViewers.push(s),this}getPerceivedDistance(){return this.CAMERA_Z-this.rotationGroup.position.z}setPerceivedDistance(s){this.rotationGroup.position.z=this.CAMERA_Z-s}setAutoEyeSeparation(s,h){var E=this.getPerceivedDistance();return h||(h=5),s||this.camera.position.x>0?this.camera.position.x=E*Math.tan(Math.PI/180*h):this.camera.position.x=-E*Math.tan(Math.PI/180*h),this.camera.lookAt(new y.Vector3(0,0,this.rotationGroup.position.z)),this.camera.position.x}setDefaultCartoonQuality(s){this.config.cartoonQuality=s}}i.numWorkers=4,i.maxVolume=64e3,i.surfaceTypeMap={VDW:O.SurfaceType.VDW,MS:O.SurfaceType.MS,SAS:O.SurfaceType.SAS,SES:O.SurfaceType.SES};function l(b,s){if(b=(0,R.getElement)(b),!!b){s=s||{};try{var h=new i(b,s);return h}catch(E){throw"error creating viewer: "+E}}}function p(b,s={},h={}){if(b=(0,R.getElement)(b),!!b){var E=[],x=document.createElement("canvas");h.rows=s.rows,h.cols=s.cols,h.control_all=s.control_all!=null?s.control_all:!1,b.appendChild(x);try{for(var D=0;D<s.rows;D++){for(var z=[],P=0;P<s.cols;P++){h.row=D,h.col=P,h.canvas=x,h.viewers=E,h.control_all=s.control_all;var G=l(b,(0,R.extend)({},h));z.push(G)}E.unshift(z)}}catch(B){throw"error creating viewer grid: "+B}return E}}function v(b){var s=this;if(b=(0,R.getElement)(b),!!b){var h=p(b,{rows:1,cols:2,control_all:!0});this.glviewer1=h[0][0],this.glviewer2=h[0][1],this.glviewer1.setAutoEyeSeparation(!1),this.glviewer2.setAutoEyeSeparation(!0),this.glviewer1.linkViewer(this.glviewer2),this.glviewer2.linkViewer(this.glviewer1);for(var E=Object.getOwnPropertyNames(this.glviewer1.__proto__).filter(function(D){return typeof s.glviewer1[D]=="function"}),x=0;x<E.length;x++)this[E[x]]=function(D){return function(){var z=this.glviewer1[D].apply(this.glviewer1,arguments),P=this.glviewer2[D].apply(this.glviewer2,arguments);return[z,P]}}(E[x]);this.setCoordinates=function(D,z,P){for(var G=0;G<D.length;G++)D[G].setCoordinates(z,P)},this.surfacesFinished=function(){return this.glviewer1.surfacesFinished()&&this.glviewer2.surfacesFinished()},this.isAnimated=function(){return this.glviewer1.isAnimated()||this.glviewer2.isAnimated()},this.render=function(D){this.glviewer1.render(),this.glviewer2.render(),D&&D(this)},this.getCanvas=function(){return this.glviewer1.getCanvas()}}}},"./src/Gradient.ts":(o,u,a)=>{a.r(u),a.d(u,{CustomLinear:()=>g,Gradient:()=>O,GradientType:()=>y,ROYGB:()=>_,RWB:()=>m,Sinebow:()=>A,builtinGradients:()=>T,getGradient:()=>R,normalizeValue:()=>S});var c=a("./src/colors.ts");class y{}function S(w,M,f){return M>=w?(f<w&&(f=w),f>M&&(f=M),{lo:w,hi:M,val:f}):(f>w&&(f=w),f<M&&(f=M),f=w-f+M,{lo:M,hi:w,val:f})}function R(w){if(w instanceof y)return w;if(w.gradient!==void 0&&T[w.gradient]){let M=w.min===void 0?-1:w.min,f=w.max===void 0?1:w.max;return w.mid===void 0?w.colors===void 0?new T[w.gradient](M,f):new T[w.gradient](M,f,w.colors):new T[w.gradient](M,f,w.mid)}else if(typeof w.gradient=="string"&&w.gradient.startsWith("linear_")){let M=w.gradient.split("_");M.shift();let f=w.min===void 0?-1:w.min,i=w.max===void 0?1:w.max;return new g(f,i,M)}return w}class m extends y{constructor(M,f,i){super(),this.gradient="RWB",this.mult=1,this.mid=i,this.min=M,this.max=f,typeof f>"u"&&Array.isArray(M)&&M.length>=2?(this.max=M[1],this.min=M[0]):M&&f&&!Array.isArray(M)&&(this.min=M,this.max=f)}range(){return typeof this.min<"u"&&typeof this.max<"u"?[this.min,this.max]:null}valueToHex(M,f){var i,l;if(M=this.mult*M,f?(i=f[0],l=f[1]):(i=this.min,l=this.max),M===void 0)return 16777215;var p=S(i,l,M);i=p.lo,l=p.hi,M=p.val;var v=(l+i)/2;f&&typeof f[2]<"u"?v=f[2]:typeof this.mid<"u"?v=this.mid:v=(i+l)/2;var b,s;return M<v?(b=Math.floor(255*Math.sqrt((M-i)/(v-i))),s=16711680+256*b+b,s):M>v?(b=Math.floor(255*Math.sqrt(1-(M-v)/(l-v))),s=65536*b+256*b+255,s):16777215}}class _ extends y{constructor(M,f){super(),this.gradient="ROYGB",this.mult=1,this.min=M,this.max=f,typeof f>"u"&&Array.isArray(M)&&M.length>=2?(this.max=M[1],this.min=M[0]):M&&f&&!Array.isArray(M)&&(this.min=M,this.max=f)}valueToHex(M,f){var i,l;if(M=this.mult*M,f?(i=f[0],l=f[1]):(i=this.min,l=this.max),typeof M>"u")return 16777215;var p=S(i,l,M);i=p.lo,l=p.hi,M=p.val;var v=(i+l)/2,b=(i+v)/2,s=(v+l)/2,h,E;return M<b?(h=Math.floor(255*Math.sqrt((M-i)/(b-i))),E=16711680+256*h+0,E):M<v?(h=Math.floor(255*Math.sqrt(1-(M-b)/(v-b))),E=65536*h+65280+0,E):M<s?(h=Math.floor(255*Math.sqrt((M-v)/(s-v))),E=65280+1*h,E):(h=Math.floor(255*Math.sqrt(1-(M-s)/(l-s))),E=0+256*h+255,E)}range(){return typeof this.min<"u"&&typeof this.max<"u"?[this.min,this.max]:null}}class A extends y{constructor(M,f){super(),this.gradient="Sinebow",this.mult=1,this.min=M,this.max=f,typeof f>"u"&&Array.isArray(M)&&M.length>=2&&(this.max=M[1],this.min=M[0]),f<M&&(this.mult=-1,this.min*=-1,this.max*=-1)}valueToHex(M,f){var i,l;if(M=this.mult*M,f?(i=f[0],l=f[1]):(i=this.min,l=this.max),typeof M>"u")return 16777215;var p=O.normalizeValue(i,l,M);i=p.lo,l=p.hi,M=p.val;var v=(M-i)/(l-i),b=5*v/6+.5,s=Math.sin(Math.PI*b);s*=s*255;var h=Math.sin(Math.PI*(b+1/3));h*=h*255;var E=Math.sin(Math.PI*(b+2/3));return E*=E*255,65536*Math.floor(s)+256*Math.floor(E)+1*Math.floor(h)}range(){return typeof this.min<"u"&&typeof this.max<"u"?[this.min,this.max]:null}}class g extends y{constructor(M,f,i){super(),this.gradient="linear",this.colors=new Array;var l;if(Array.isArray(M)&&M.length>=2?(this.max=M[1],this.min=M[0],l=f):(this.min=M,this.max=f,l=i),l)for(let p of l)this.colors.push(c.CC.color(p));else this.colors.push(c.CC.color(0))}range(){return typeof this.min<"u"&&typeof this.max<"u"?[this.min,this.max]:null}valueToHex(M,f){var i,l;if(f?(i=f[0],l=f[1]):(i=this.min,l=this.max),M===void 0)return 16777215;var p=S(i,l,M);i=p.lo,l=p.hi,M=p.val;let v=this.colors.length,b=(l-i)/v,s=Math.min(Math.floor((M-i)/b),v-1),h=Math.min(s+1,v-1),E=(M-i-s*b)/b,x=this.colors[s],D=this.colors[h];return new c.Color(x.r+E*(D.r-x.r),x.g+E*(D.g-x.g),x.b+E*(D.b-x.b)).getHex()}}const T={rwb:m,RWB:m,roygb:_,ROYGB:_,sinebow:A,linear:g};class O extends y{valueToHex(M,f){return 0}range(){return null}}O.RWB=m,O.ROYGB=_,O.Sinebow=A,O.CustomLinear=g,O.builtinGradients=T,O.normalizeValue=S,O.getGradient=R},"./src/Label.ts":(o,u,a)=>{a.r(u),a.d(u,{Label:()=>A,LabelCount:()=>R});var c=a("./src/WebGL/index.ts"),y=a("./src/Gradient.ts"),S=a("./src/colors.ts");let R=0;function m(g,T,O,w,M,f,i){g.beginPath(),g.moveTo(T+f,O),g.lineTo(T+w-f,O),g.quadraticCurveTo(T+w,O,T+w,O+f),g.lineTo(T+w,O+M-f),g.quadraticCurveTo(T+w,O+M,T+w-f,O+M),g.lineTo(T+f,O+M),g.quadraticCurveTo(T,O+M,T,O+M-f),g.lineTo(T,O+f),g.quadraticCurveTo(T,O,T+f,O),g.closePath(),g.fill(),i&&g.stroke()}function _(g,T,O){var w=O;return typeof g<"u"&&(g instanceof S.Color?w=g.scaled():(w=S.CC.color(g),typeof w.scaled<"u"&&(w=w.scaled()))),typeof T<"u"&&(w.a=parseFloat(T)),w}class A{constructor(T,O){this.id=R++,this.stylespec=O||{},this.canvas=document.createElement("canvas"),this.canvas.width=134,this.canvas.height=35,this.context=this.canvas.getContext("2d"),this.sprite=new c.Sprite,this.text=T,this.frame=this.stylespec.frame}getStyle(){return this.stylespec}hide(){this.sprite&&(this.sprite.visible=!1)}show(){this.sprite&&(this.sprite.visible=!0)}setContext(){var T=this.stylespec,O=typeof T.useScreen>"u"?!1:T.useScreen,w=T.showBackground;(w==="0"||w==="false")&&(w=!1),typeof w>"u"&&(w=!0);var M=T.font?T.font:"sans-serif",f=parseInt(T.fontSize)?parseInt(T.fontSize):18,i=_(T.fontColor,T.fontOpacity,{r:255,g:255,b:255,a:1}),l=T.padding?T.padding:4,p=T.borderThickness?T.borderThickness:0,v=_(T.backgroundColor,T.backgroundOpacity,{r:0,g:0,b:0,a:1}),b=_(T.borderColor,T.borderOpacity,v),s=T.position?T.position:{x:-10,y:1,z:1},h=T.inFront!==void 0?T.inFront:!0;(h==="false"||h==="0")&&(h=!1);var E=T.alignment||c.SpriteAlignment.topLeft;typeof E=="string"&&E in c.SpriteAlignment&&(E=c.SpriteAlignment[E]);var x="";T.bold&&(x="bold "),this.context.font=x+f+"px  "+M;var D=this.context.measureText(this.text),z=D.width;w||(p=0);var P=z+2.5*p+2*l,G=f*1.25+2*p+2*l;if(T.backgroundImage){var B=T.backgroundImage,K=T.backgroundWidth?T.backgroundWidth:B.width,k=T.backgroundHeight?T.backgroundHeight:B.height;K>P&&(P=K),k>G&&(G=k)}if(this.canvas.width=P,this.canvas.height=G,this.context.clearRect(0,0,this.canvas.width,this.canvas.height),x="",T.bold&&(x="bold "),this.context.font=x+f+"px  "+M,this.context.fillStyle="rgba("+v.r+","+v.g+","+v.b+","+v.a+")",this.context.strokeStyle="rgba("+b.r+","+b.g+","+b.b+","+b.a+")",T.backgroundGradient){let W=this.context.createLinearGradient(0,G/2,P,G/2),F=y.Gradient.getGradient(T.backgroundGradient),Y=F.range(),j=-1,H=1;Y&&(j=Y[0],H=Y[1]);let Z=H-j;for(let ne=0;ne<1.01;ne+=.1){let se=_(F.valueToHex(j+Z*ne)),me="rgba("+se.r+","+se.g+","+se.b+","+se.a+")";W.addColorStop(ne,me)}this.context.fillStyle=W}this.context.lineWidth=p,w&&m(this.context,p,p,P-2*p,G-2*p,6,p>0),T.backgroundImage&&this.context.drawImage(B,0,0,P,G),this.context.fillStyle="rgba("+i.r+","+i.g+","+i.b+","+i.a+")",this.context.fillText(this.text,p+l,f+p+l,z);var U=new c.Texture(this.canvas);U.needsUpdate=!0,this.sprite.material=new c.SpriteMaterial({map:U,useScreenCoordinates:O,alignment:E,depthTest:!h,screenOffset:T.screenOffset||null}),this.sprite.scale.set(1,1,1),this.sprite.position.set(s.x,s.y,s.z)}dispose(){this.sprite.material.map!==void 0&&this.sprite.material.map.dispose(),this.sprite.material!==void 0&&this.sprite.material.dispose()}}},"./src/ProteinSurface4.ts":(o,u,a)=>{a.r(u),a.d(u,{MarchingCube:()=>_,MarchingCubeInitializer:()=>m,PointGrid:()=>A,ProteinSurface:()=>g,SurfaceType:()=>y,setSyncSurface:()=>R,syncSurface:()=>S});var c=a("./src/WebGL/math/index.ts"),y;(function(T){T[T.VDW=1]="VDW",T[T.MS=2]="MS",T[T.SAS=3]="SAS",T[T.SES=4]="SES"})(y||(y={}));var S=!1;function R(T){S=T}(window.navigator.userAgent.indexOf("MSIE ")>=0||window.navigator.userAgent.indexOf("Trident/")>=0)&&(S=!0);class m{constructor(){this.ISDONE=2,this.edgeTable=new Uint32Array([0,0,0,0,0,0,0,2816,0,0,0,1792,0,3328,3584,3840,0,0,0,138,0,21,0,134,0,0,0,652,0,2067,3865,3600,0,0,0,42,0,0,0,294,0,0,21,28,0,3875,1049,3360,0,168,162,170,0,645,2475,2210,0,687,293,172,4010,3747,3497,3232,0,0,0,0,0,69,0,900,0,0,0,1792,138,131,1608,1920,0,81,0,2074,84,85,84,86,0,81,0,3676,330,1105,1881,1616,0,0,0,42,0,69,0,502,0,0,21,3580,138,2035,1273,1520,2816,104,2337,106,840,581,367,102,2816,3695,3429,3180,1898,1635,1385,1120,0,0,0,0,0,0,0,3910,0,0,69,588,42,2083,41,2880,0,0,0,1722,0,2293,4095,3830,0,255,757,764,2538,2291,3065,2800,0,0,81,338,0,3925,1119,3414,84,855,85,340,2130,2899,89,2384,1792,712,194,1162,4036,3781,3535,3270,708,719,197,204,3018,2755,2505,2240,0,0,0,0,168,420,168,1958,162,162,676,2988,170,163,680,928,3328,3096,3328,3642,52,53,1855,1590,2340,2111,2869,2620,298,51,825,560,3584,3584,3090,3482,1668,1941,1183,1430,146,2975,2069,2460,154,915,153,400,3840,3592,3329,3082,1796,1541,1295,1030,2818,2575,2309,2060,778,515,265,0]),this.triTable=[[],[],[],[],[],[],[],[11,9,8],[],[],[],[8,10,9],[],[10,8,11],[9,11,10],[8,10,9,8,11,10],[],[],[],[1,7,3],[],[4,2,0],[],[2,1,7],[],[],[],[2,7,3,2,9,7],[],[1,4,11,1,0,4],[3,8,0,11,9,4,11,10,9],[4,11,9,11,10,9],[],[],[],[5,3,1],[],[],[],[2,5,8,2,1,5],[],[],[2,4,0],[3,2,4],[],[0,9,1,8,10,5,8,11,10],[3,4,0,3,10,4],[5,8,10,8,11,10],[],[3,5,7],[7,1,5],[1,7,3,1,5,7],[],[9,2,0,9,7,2],[0,3,8,1,7,11,1,5,7],[11,1,7,1,5,7],[],[9,1,0,5,3,2,5,7,3],[8,2,5,8,0,2],[2,5,3,5,7,3],[3,9,1,3,8,9,7,11,10,7,10,5],[9,1,0,10,7,11,10,5,7],[3,8,0,7,10,5,7,11,10],[11,5,7,11,10,5],[],[],[],[],[],[0,6,2],[],[7,2,9,7,9,8],[],[],[],[8,10,9],[7,1,3],[7,1,0],[6,9,3,6,10,9],[7,10,8,10,9,8],[],[6,0,4],[],[11,1,4,11,3,1],[2,4,6],[2,0,4,2,4,6],[2,4,6],[1,4,2,4,6,2],[],[6,0,4],[],[2,11,3,6,9,4,6,10,9],[8,6,1,8,1,3],[10,0,6,0,4,6],[8,0,3,9,6,10,9,4,6],[10,4,6,10,9,4],[],[],[],[5,3,1],[],[0,6,2],[],[7,4,8,5,2,1,5,6,2],[],[],[2,4,0],[7,4,8,2,11,3,10,5,6],[7,1,3],[5,6,10,0,9,1,8,7,4],[5,6,10,7,0,3,7,4,0],[10,5,6,4,8,7],[9,11,8],[3,5,6],[0,5,11,0,11,8],[6,3,5,3,1,5],[3,9,6,3,8,9],[9,6,0,6,2,0],[0,3,8,2,5,6,2,1,5],[1,6,2,1,5,6],[9,11,8],[1,0,9,6,10,5,11,3,2],[6,10,5,2,8,0,2,11,8],[3,2,11,10,5,6],[10,5,6,9,3,8,9,1,3],[0,9,1,5,6,10],[8,0,3,10,5,6],[10,5,6],[],[],[],[],[],[],[],[1,10,2,9,11,6,9,8,11],[],[],[6,0,2],[3,6,9,3,2,6],[3,5,1],[0,5,1,0,11,5],[0,3,5],[6,9,11,9,8,11],[],[],[],[4,5,9,7,1,10,7,3,1],[],[11,6,7,2,4,5,2,0,4],[11,6,7,8,0,3,1,10,2,9,4,5],[6,7,11,1,10,2,9,4,5],[],[4,1,0,4,5,1,6,7,3,6,3,2],[9,4,5,0,6,7,0,2,6],[4,5,9,6,3,2,6,7,3],[6,7,11,5,3,8,5,1,3],[6,7,11,4,1,0,4,5,1],[4,5,9,3,8,0,11,6,7],[9,4,5,7,11,6],[],[],[0,6,4],[8,6,4,8,1,6],[],[0,10,2,0,9,10,4,8,11,4,11,6],[10,2,1,6,0,3,6,4,0],[10,2,1,11,4,8,11,6,4],[4,2,6],[1,0,9,2,4,8,2,6,4],[2,4,0,2,6,4],[8,2,4,2,6,4],[11,4,1,11,6,4],[0,9,1,4,11,6,4,8,11],[3,6,0,6,4,0],[8,6,4,8,11,6],[10,8,9],[6,3,9,6,7,3],[6,7,1],[10,7,1,7,3,1],[7,11,6,8,10,2,8,9,10],[11,6,7,10,0,9,10,2,0],[2,1,10,7,11,6,8,0,3],[1,10,2,6,7,11],[7,2,6,7,9,2],[1,0,9,3,6,7,3,2,6],[7,0,6,0,2,6],[2,7,3,2,6,7],[7,11,6,3,9,1,3,8,9],[9,1,0,11,6,7],[0,3,8,11,6,7],[11,6,7],[],[],[],[],[5,3,7],[8,5,2,8,7,5],[5,3,7],[1,10,2,5,8,7,5,9,8],[1,7,5],[1,7,5],[9,2,7,9,7,5],[11,3,2,8,5,9,8,7,5],[1,3,7,1,7,5],[0,7,1,7,5,1],[9,3,5,3,7,5],[9,7,5,9,8,7],[8,10,11],[3,4,10,3,10,11],[8,10,11],[5,9,4,1,11,3,1,10,11],[2,4,5],[5,2,4,2,0,4],[0,3,8,5,9,4,10,2,1],[2,1,10,9,4,5],[2,8,5,2,11,8],[3,2,11,1,4,5,1,0,4],[9,4,5,8,2,11,8,0,2],[11,3,2,9,4,5],[8,5,3,5,1,3],[5,0,4,5,1,0],[3,8,0,4,5,9],[9,4,5],[11,9,10],[11,9,10],[1,11,4,1,10,11],[8,7,4,11,1,10,11,3,1],[2,7,9,2,9,10],[4,8,7,0,10,2,0,9,10],[2,1,10,0,7,4,0,3,7],[10,2,1,8,7,4],[1,7,4],[3,2,11,4,8,7,9,1,0],[11,4,2,4,0,2],[2,11,3,7,4,8],[4,1,7,1,3,7],[1,0,9,8,7,4],[3,4,0,3,7,4],[8,7,4],[8,9,10,8,10,11],[3,9,11,9,10,11],[0,10,8,10,11,8],[10,3,1,10,11,3],[2,8,10,8,9,10],[9,2,0,9,10,2],[8,0,3,1,10,2],[10,2,1],[1,11,9,11,8,9],[11,3,2,0,9,1],[11,0,2,11,8,0],[11,3,2],[8,1,3,8,9,1],[9,1,0],[8,0,3],[]],this.edgeTable2=[0,265,515,778,2060,2309,2575,2822,1030,1295,1541,1804,3082,3331,3593,3840,400,153,915,666,2460,2197,2975,2710,1430,1183,1941,1692,3482,3219,3993,3728,560,825,51,314,2620,2869,2111,2358,1590,1855,1077,1340,3642,3891,3129,3376,928,681,419,170,2988,2725,2479,2214,1958,1711,1445,1196,4010,3747,3497,3232,2240,2505,2755,3018,204,453,719,966,3270,3535,3781,4044,1226,1475,1737,1984,2384,2137,2899,2650,348,85,863,598,3414,3167,3925,3676,1370,1107,1881,1616,2800,3065,2291,2554,764,1013,255,502,3830,4095,3317,3580,1786,2035,1273,1520,2912,2665,2403,2154,876,613,367,102,3942,3695,3429,3180,1898,1635,1385,1120,1120,1385,1635,1898,3180,3429,3695,3942,102,367,613,876,2154,2403,2665,2912,1520,1273,2035,1786,3580,3317,4095,3830,502,255,1013,764,2554,2291,3065,2800,1616,1881,1107,1370,3676,3925,3167,3414,598,863,85,348,2650,2899,2137,2384,1984,1737,1475,1226,4044,3781,3535,3270,966,719,453,204,3018,2755,2505,2240,3232,3497,3747,4010,1196,1445,1711,1958,2214,2479,2725,2988,170,419,681,928,3376,3129,3891,3642,1340,1077,1855,1590,2358,2111,2869,2620,314,51,825,560,3728,3993,3219,3482,1692,1941,1183,1430,2710,2975,2197,2460,666,915,153,400,3840,3593,3331,3082,1804,1541,1295,1030,2822,2575,2309,2060,778,515,265,0],this.triTable2=[[],[8,3,0],[9,0,1],[8,3,1,8,1,9],[11,2,3],[11,2,0,11,0,8],[11,2,3,0,1,9],[2,1,11,1,9,11,11,9,8],[10,1,2],[8,3,0,1,2,10],[9,0,2,9,2,10],[3,2,8,2,10,8,8,10,9],[10,1,3,10,3,11],[1,0,10,0,8,10,10,8,11],[0,3,9,3,11,9,9,11,10],[8,10,9,8,11,10],[8,4,7],[3,0,4,3,4,7],[1,9,0,8,4,7],[9,4,1,4,7,1,1,7,3],[2,3,11,7,8,4],[7,11,4,11,2,4,4,2,0],[3,11,2,4,7,8,9,0,1],[2,7,11,2,1,7,1,4,7,1,9,4],[10,1,2,8,4,7],[2,10,1,0,4,7,0,7,3],[4,7,8,0,2,10,0,10,9],[2,7,3,2,9,7,7,9,4,2,10,9],[8,4,7,11,10,1,11,1,3],[11,4,7,1,4,11,1,11,10,1,0,4],[3,8,0,7,11,4,11,9,4,11,10,9],[7,11,4,4,11,9,11,10,9],[9,5,4],[3,0,8,4,9,5],[5,4,0,5,0,1],[4,8,5,8,3,5,5,3,1],[11,2,3,9,5,4],[9,5,4,8,11,2,8,2,0],[3,11,2,1,5,4,1,4,0],[8,5,4,2,5,8,2,8,11,2,1,5],[2,10,1,9,5,4],[0,8,3,5,4,9,10,1,2],[10,5,2,5,4,2,2,4,0],[3,4,8,3,2,4,2,5,4,2,10,5],[5,4,9,1,3,11,1,11,10],[0,9,1,4,8,5,8,10,5,8,11,10],[3,4,0,3,10,4,4,10,5,3,11,10],[4,8,5,5,8,10,8,11,10],[9,5,7,9,7,8],[0,9,3,9,5,3,3,5,7],[8,0,7,0,1,7,7,1,5],[1,7,3,1,5,7],[11,2,3,8,9,5,8,5,7],[9,2,0,9,7,2,2,7,11,9,5,7],[0,3,8,2,1,11,1,7,11,1,5,7],[2,1,11,11,1,7,1,5,7],[1,2,10,5,7,8,5,8,9],[9,1,0,10,5,2,5,3,2,5,7,3],[5,2,10,8,2,5,8,5,7,8,0,2],[10,5,2,2,5,3,5,7,3],[3,9,1,3,8,9,7,11,10,7,10,5],[9,1,0,10,7,11,10,5,7],[3,8,0,7,10,5,7,11,10],[11,5,7,11,10,5],[11,7,6],[0,8,3,11,7,6],[9,0,1,11,7,6],[7,6,11,3,1,9,3,9,8],[2,3,7,2,7,6],[8,7,0,7,6,0,0,6,2],[1,9,0,3,7,6,3,6,2],[7,6,2,7,2,9,2,1,9,7,9,8],[1,2,10,6,11,7],[2,10,1,7,6,11,8,3,0],[11,7,6,10,9,0,10,0,2],[7,6,11,3,2,8,8,2,10,8,10,9],[6,10,7,10,1,7,7,1,3],[6,10,1,6,1,7,7,1,0,7,0,8],[9,0,3,6,9,3,6,10,9,6,3,7],[6,10,7,7,10,8,10,9,8],[8,4,6,8,6,11],[11,3,6,3,0,6,6,0,4],[0,1,9,4,6,11,4,11,8],[1,9,4,11,1,4,11,3,1,11,4,6],[3,8,2,8,4,2,2,4,6],[2,0,4,2,4,6],[1,9,0,3,8,2,2,8,4,2,4,6],[9,4,1,1,4,2,4,6,2],[10,1,2,11,8,4,11,4,6],[10,1,2,11,3,6,6,3,0,6,0,4],[0,2,10,0,10,9,4,11,8,4,6,11],[2,11,3,6,9,4,6,10,9],[8,4,6,8,6,1,6,10,1,8,1,3],[1,0,10,10,0,6,0,4,6],[8,0,3,9,6,10,9,4,6],[10,4,6,10,9,4],[9,5,4,7,6,11],[4,9,5,3,0,8,11,7,6],[6,11,7,4,0,1,4,1,5],[6,11,7,4,8,5,5,8,3,5,3,1],[4,9,5,6,2,3,6,3,7],[9,5,4,8,7,0,0,7,6,0,6,2],[4,0,1,4,1,5,6,3,7,6,2,3],[7,4,8,5,2,1,5,6,2],[6,11,7,1,2,10,9,5,4],[11,7,6,8,3,0,1,2,10,9,5,4],[11,7,6,10,5,2,2,5,4,2,4,0],[7,4,8,2,11,3,10,5,6],[4,9,5,6,10,7,7,10,1,7,1,3],[5,6,10,0,9,1,8,7,4],[5,6,10,7,0,3,7,4,0],[10,5,6,4,8,7],[5,6,9,6,11,9,9,11,8],[0,9,5,0,5,3,3,5,6,3,6,11],[0,1,5,0,5,11,5,6,11,0,11,8],[11,3,6,6,3,5,3,1,5],[9,5,6,3,9,6,3,8,9,3,6,2],[5,6,9,9,6,0,6,2,0],[0,3,8,2,5,6,2,1,5],[1,6,2,1,5,6],[1,2,10,5,6,9,9,6,11,9,11,8],[1,0,9,6,10,5,11,3,2],[6,10,5,2,8,0,2,11,8],[3,2,11,10,5,6],[10,5,6,9,3,8,9,1,3],[0,9,1,5,6,10],[8,0,3,10,5,6],[10,5,6],[10,6,5],[8,3,0,10,6,5],[0,1,9,5,10,6],[10,6,5,9,8,3,9,3,1],[3,11,2,10,6,5],[6,5,10,2,0,8,2,8,11],[1,9,0,6,5,10,11,2,3],[1,10,2,5,9,6,9,11,6,9,8,11],[1,2,6,1,6,5],[0,8,3,2,6,5,2,5,1],[5,9,6,9,0,6,6,0,2],[9,6,5,3,6,9,3,9,8,3,2,6],[11,6,3,6,5,3,3,5,1],[0,5,1,0,11,5,5,11,6,0,8,11],[0,5,9,0,3,5,3,6,5,3,11,6],[5,9,6,6,9,11,9,8,11],[10,6,5,4,7,8],[5,10,6,7,3,0,7,0,4],[5,10,6,0,1,9,8,4,7],[4,5,9,6,7,10,7,1,10,7,3,1],[7,8,4,2,3,11,10,6,5],[11,6,7,10,2,5,2,4,5,2,0,4],[11,6,7,8,0,3,1,10,2,9,4,5],[6,7,11,1,10,2,9,4,5],[7,8,4,5,1,2,5,2,6],[4,1,0,4,5,1,6,7,3,6,3,2],[9,4,5,8,0,7,0,6,7,0,2,6],[4,5,9,6,3,2,6,7,3],[6,7,11,4,5,8,5,3,8,5,1,3],[6,7,11,4,1,0,4,5,1],[4,5,9,3,8,0,11,6,7],[9,4,5,7,11,6],[10,6,4,10,4,9],[8,3,0,9,10,6,9,6,4],[1,10,0,10,6,0,0,6,4],[8,6,4,8,1,6,6,1,10,8,3,1],[2,3,11,6,4,9,6,9,10],[0,10,2,0,9,10,4,8,11,4,11,6],[10,2,1,11,6,3,6,0,3,6,4,0],[10,2,1,11,4,8,11,6,4],[9,1,4,1,2,4,4,2,6],[1,0,9,3,2,8,2,4,8,2,6,4],[2,4,0,2,6,4],[3,2,8,8,2,4,2,6,4],[1,4,9,11,4,1,11,1,3,11,6,4],[0,9,1,4,11,6,4,8,11],[11,6,3,3,6,0,6,4,0],[8,6,4,8,11,6],[6,7,10,7,8,10,10,8,9],[9,3,0,6,3,9,6,9,10,6,7,3],[6,1,10,6,7,1,7,0,1,7,8,0],[6,7,10,10,7,1,7,3,1],[7,11,6,3,8,2,8,10,2,8,9,10],[11,6,7,10,0,9,10,2,0],[2,1,10,7,11,6,8,0,3],[1,10,2,6,7,11],[7,2,6,7,9,2,2,9,1,7,8,9],[1,0,9,3,6,7,3,2,6],[8,0,7,7,0,6,0,2,6],[2,7,3,2,6,7],[7,11,6,3,9,1,3,8,9],[9,1,0,11,6,7],[0,3,8,11,6,7],[11,6,7],[11,7,5,11,5,10],[3,0,8,7,5,10,7,10,11],[9,0,1,10,11,7,10,7,5],[3,1,9,3,9,8,7,10,11,7,5,10],[10,2,5,2,3,5,5,3,7],[5,10,2,8,5,2,8,7,5,8,2,0],[9,0,1,10,2,5,5,2,3,5,3,7],[1,10,2,5,8,7,5,9,8],[2,11,1,11,7,1,1,7,5],[0,8,3,2,11,1,1,11,7,1,7,5],[9,0,2,9,2,7,2,11,7,9,7,5],[11,3,2,8,5,9,8,7,5],[1,3,7,1,7,5],[8,7,0,0,7,1,7,5,1],[0,3,9,9,3,5,3,7,5],[9,7,5,9,8,7],[4,5,8,5,10,8,8,10,11],[3,0,4,3,4,10,4,5,10,3,10,11],[0,1,9,4,5,8,8,5,10,8,10,11],[5,9,4,1,11,3,1,10,11],[3,8,4,3,4,2,2,4,5,2,5,10],[10,2,5,5,2,4,2,0,4],[0,3,8,5,9,4,10,2,1],[2,1,10,9,4,5],[8,4,5,2,8,5,2,11,8,2,5,1],[3,2,11,1,4,5,1,0,4],[9,4,5,8,2,11,8,0,2],[11,3,2,9,4,5],[4,5,8,8,5,3,5,1,3],[5,0,4,5,1,0],[3,8,0,4,5,9],[9,4,5],[7,4,11,4,9,11,11,9,10],[3,0,8,7,4,11,11,4,9,11,9,10],[11,7,4,1,11,4,1,10,11,1,4,0],[8,7,4,11,1,10,11,3,1],[2,3,7,2,7,9,7,4,9,2,9,10],[4,8,7,0,10,2,0,9,10],[2,1,10,0,7,4,0,3,7],[10,2,1,8,7,4],[2,11,7,2,7,1,1,7,4,1,4,9],[3,2,11,4,8,7,9,1,0],[7,4,11,11,4,2,4,0,2],[2,11,3,7,4,8],[9,1,4,4,1,7,1,3,7],[1,0,9,8,7,4],[3,4,0,3,7,4],[8,7,4],[8,9,10,8,10,11],[0,9,3,3,9,11,9,10,11],[1,10,0,0,10,8,10,11,8],[10,3,1,10,11,3],[3,8,2,2,8,10,8,9,10],[9,2,0,9,10,2],[8,0,3,1,10,2],[10,2,1],[2,11,1,1,11,9,11,8,9],[11,3,2,0,9,1],[11,0,2,11,8,0],[11,3,2],[8,1,3,8,9,1],[9,1,0],[8,0,3],[]]}march(O,w,M,f){let i=!!f.fulltable,l=f.hasOwnProperty("origin")&&f.origin.hasOwnProperty("x")?f.origin:{x:0,y:0,z:0},p=!!f.voxel,v=f.matrix,b=f.nX||0,s=f.nY||0,h=f.nZ||0,E=f.scale||1,x=null;f.unitCube?x=f.unitCube:x={x:E,y:E,z:E};let D=new Int32Array(b*s*h),z,P;for(z=0,P=D.length;z<P;++z)D[z]=-1;let G=function(U,W,F,Y,j,H){let Z={x:0,y:0,z:0},ne=!!(Y&1<<j),se=!!(Y&1<<H),me=j;if(!ne&&se&&(me=H),me&1&&F++,me&2&&W++,me&4&&U++,v){let ue=new c.Vector3(U,W,F);ue=ue.applyMatrix4(v),Z={x:ue.x,y:ue.y,z:ue.z}}else Z.x=l.x+x.x*U,Z.y=l.y+x.y*W,Z.z=l.z+x.z*F;let de=(s*U+W)*h+F;return p?(w.push(Z),w.length-1):(D[de]<0&&(D[de]=w.length,w.push(Z)),D[de])},B=new Int32Array(12),K=i?this.edgeTable2:this.edgeTable,k=i?this.triTable2:this.triTable;for(z=0;z<b-1;++z)for(let U=0;U<s-1;++U)for(let W=0;W<h-1;++W){let F=0;for(let H=0;H<8;++H){let Z=(s*(z+((H&4)>>2))+U+((H&2)>>1))*h+W+(H&1),ne=!!(O[Z]&this.ISDONE);F|=ne<<H}if(F===0||F===255)continue;let Y=K[F];if(Y===0)continue;let j=k[F];Y&1&&(B[0]=G(z,U,W,F,0,1)),Y&2&&(B[1]=G(z,U,W,F,1,3)),Y&4&&(B[2]=G(z,U,W,F,3,2)),Y&8&&(B[3]=G(z,U,W,F,2,0)),Y&16&&(B[4]=G(z,U,W,F,4,5)),Y&32&&(B[5]=G(z,U,W,F,5,7)),Y&64&&(B[6]=G(z,U,W,F,7,6)),Y&128&&(B[7]=G(z,U,W,F,6,4)),Y&256&&(B[8]=G(z,U,W,F,0,4)),Y&512&&(B[9]=G(z,U,W,F,1,5)),Y&1024&&(B[10]=G(z,U,W,F,3,7)),Y&2048&&(B[11]=G(z,U,W,F,2,6));for(let H=0;H<j.length;H+=3){let Z=B[j[H]],ne=B[j[H+1]],se=B[j[H+2]];p&&H>=3&&(w.push(w[Z]),Z=w.length-1,w.push(w[ne]),ne=w.length-1,w.push(w[se]),se=w.length-1),M.push(Z),M.push(ne),M.push(se)}}}laplacianSmooth(O,w,M){let f=new Array(w.length),i,l,p,v,b;for(i=0,l=w.length;i<l;i++)f[i]={x:0,y:0,z:0};let s=new Array(20),h;for(i=0;i<20;i++)s[i]=new Array(w.length);for(i=0,l=w.length;i<l;i++)s[0][i]=0;for(i=0,l=M.length/3;i<l;i++){let D=i*3,z=i*3+1,P=i*3+2;for(h=!0,p=0,v=s[0][M[D]];p<v;p++)if(M[z]==s[p+1][M[D]]){h=!1;break}for(h&&(s[0][M[D]]++,s[s[0][M[D]]][M[D]]=M[z]),h=!0,p=0,v=s[0][M[D]];p<v;p++)if(M[P]==s[p+1][M[D]]){h=!1;break}for(h&&(s[0][M[D]]++,s[s[0][M[D]]][M[D]]=M[P]),h=!0,p=0,v=s[0][M[z]];p<v;p++)if(M[D]==s[p+1][M[z]]){h=!1;break}for(h&&(s[0][M[z]]++,s[s[0][M[z]]][M[z]]=M[D]),h=!0,p=0,v=s[0][M[z]];p<v;p++)if(M[P]==s[p+1][M[z]]){h=!1;break}for(h&&(s[0][M[z]]++,s[s[0][M[z]]][M[z]]=M[P]),h=!0,p=0;p<s[0][M[P]];p++)if(M[D]==s[p+1][M[P]]){h=!1;break}for(h&&(s[0][M[P]]++,s[s[0][M[P]]][M[P]]=M[D]),h=!0,p=0,v=s[0][M[P]];p<v;p++)if(M[z]==s[p+1][M[P]]){h=!1;break}h&&(s[0][M[P]]++,s[s[0][M[P]]][M[P]]=M[z])}let E=1,x=.5;for(b=0;b<O;b++){for(i=0,l=w.length;i<l;i++)if(s[0][i]<3)f[i].x=w[i].x,f[i].y=w[i].y,f[i].z=w[i].z;else if(s[0][i]==3||s[0][i]==4){for(f[i].x=0,f[i].y=0,f[i].z=0,p=0,v=s[0][i];p<v;p++)f[i].x+=w[s[p+1][i]].x,f[i].y+=w[s[p+1][i]].y,f[i].z+=w[s[p+1][i]].z;f[i].x+=x*w[i].x,f[i].y+=x*w[i].y,f[i].z+=x*w[i].z,f[i].x/=x+s[0][i],f[i].y/=x+s[0][i],f[i].z/=x+s[0][i]}else{for(f[i].x=0,f[i].y=0,f[i].z=0,p=0,v=s[0][i];p<v;p++)f[i].x+=w[s[p+1][i]].x,f[i].y+=w[s[p+1][i]].y,f[i].z+=w[s[p+1][i]].z;f[i].x+=E*w[i].x,f[i].y+=E*w[i].y,f[i].z+=E*w[i].z,f[i].x/=E+s[0][i],f[i].y/=E+s[0][i],f[i].z/=E+s[0][i]}for(i=0,l=w.length;i<l;i++)w[i].x=f[i].x,w[i].y=f[i].y,w[i].z=f[i].z}}}let _=new m;class A{constructor(O,w,M){this.data=new Int32Array(O*w*M*3),this.width=w,this.height=M}set(O,w,M,f){let i=((O*this.width+w)*this.height+M)*3;this.data[i]=f.ix,this.data[i+1]=f.iy,this.data[i+2]=f.iz}get(O,w,M){let f=((O*this.width+w)*this.height+M)*3;return{ix:this.data[f],iy:this.data[f+1],iz:this.data[f+2]}}}class g{constructor(){this.INOUT=1,this.ISDONE=2,this.ISBOUND=4,this.ptranx=0,this.ptrany=0,this.ptranz=0,this.probeRadius=1.4,this.defaultScaleFactor=2,this.scaleFactor=this.defaultScaleFactor,this.pHeight=0,this.pWidth=0,this.pLength=0,this.cutRadius=0,this.vpBits=null,this.vpDistance=null,this.vpAtomID=null,this.pminx=0,this.pminy=0,this.pminz=0,this.pmaxx=0,this.pmaxy=0,this.pmaxz=0,this.depty={},this.widxz={},this.faces=[],this.verts=[],this.vdwRadii={H:1.2,Li:1.82,Na:2.27,K:2.75,C:1.7,N:1.55,O:1.52,F:1.47,P:1.8,S:1.8,CL:1.75,BR:1.85,SE:1.9,ZN:1.39,CU:1.4,NI:1.63,X:2},this.nb=[new Int32Array([1,0,0]),new Int32Array([-1,0,0]),new Int32Array([0,1,0]),new Int32Array([0,-1,0]),new Int32Array([0,0,1]),new Int32Array([0,0,-1]),new Int32Array([1,1,0]),new Int32Array([1,-1,0]),new Int32Array([-1,1,0]),new Int32Array([-1,-1,0]),new Int32Array([1,0,1]),new Int32Array([1,0,-1]),new Int32Array([-1,0,1]),new Int32Array([-1,0,-1]),new Int32Array([0,1,1]),new Int32Array([0,1,-1]),new Int32Array([0,-1,1]),new Int32Array([0,-1,-1]),new Int32Array([1,1,1]),new Int32Array([1,1,-1]),new Int32Array([1,-1,1]),new Int32Array([-1,1,1]),new Int32Array([1,-1,-1]),new Int32Array([-1,-1,1]),new Int32Array([-1,1,-1]),new Int32Array([-1,-1,-1])],g.MarchingCube||(g.MarchingCube=new m)}getVDWIndex(O){return!O.elem||typeof this.vdwRadii[O.elem]>"u"?"X":O.elem}getFacesAndVertices(O){let w={};for(let i=0,l=O.length;i<l;i++)w[O[i]]=!0;let M=this.verts;for(let i=0,l=M.length;i<l;i++)M[i].x=M[i].x/this.scaleFactor-this.ptranx,M[i].y=M[i].y/this.scaleFactor-this.ptrany,M[i].z=M[i].z/this.scaleFactor-this.ptranz;let f=[];for(let i=0,l=this.faces.length;i<l;i+=3){let p=this.faces[i],v=this.faces[i+1],b=this.faces[i+2],s=M[p].atomid,h=M[v].atomid,E=M[b].atomid,x=s;h<x&&(x=h),E<x&&(x=E),w[x]&&p!==v&&v!==b&&p!==b&&(f.push(p),f.push(v),f.push(b))}return this.vpBits=null,this.vpDistance=null,this.vpAtomID=null,{vertices:M,faces:f}}initparm(O,w,M){M>1e6&&(this.scaleFactor=this.defaultScaleFactor/2);let f=1/this.scaleFactor*5.5;this.pminx=O[0][0],this.pmaxx=O[1][0],this.pminy=O[0][1],this.pmaxy=O[1][1],this.pminz=O[0][2],this.pmaxz=O[1][2],w?(this.pminx-=this.probeRadius+f,this.pminy-=this.probeRadius+f,this.pminz-=this.probeRadius+f,this.pmaxx+=this.probeRadius+f,this.pmaxy+=this.probeRadius+f,this.pmaxz+=this.probeRadius+f):(this.pminx-=f,this.pminy-=f,this.pminz-=f,this.pmaxx+=f,this.pmaxy+=f,this.pmaxz+=f),this.pminx=Math.floor(this.pminx*this.scaleFactor)/this.scaleFactor,this.pminy=Math.floor(this.pminy*this.scaleFactor)/this.scaleFactor,this.pminz=Math.floor(this.pminz*this.scaleFactor)/this.scaleFactor,this.pmaxx=Math.ceil(this.pmaxx*this.scaleFactor)/this.scaleFactor,this.pmaxy=Math.ceil(this.pmaxy*this.scaleFactor)/this.scaleFactor,this.pmaxz=Math.ceil(this.pmaxz*this.scaleFactor)/this.scaleFactor,this.ptranx=-this.pminx,this.ptrany=-this.pminy,this.ptranz=-this.pminz,this.pLength=Math.ceil(this.scaleFactor*(this.pmaxx-this.pminx))+1,this.pWidth=Math.ceil(this.scaleFactor*(this.pmaxy-this.pminy))+1,this.pHeight=Math.ceil(this.scaleFactor*(this.pmaxz-this.pminz))+1,this.boundingatom(w),this.cutRadius=this.probeRadius*this.scaleFactor,this.vpBits=new Uint8Array(this.pLength*this.pWidth*this.pHeight),this.vpDistance=new Float64Array(this.pLength*this.pWidth*this.pHeight),this.vpAtomID=new Int32Array(this.pLength*this.pWidth*this.pHeight)}boundingatom(O){let w={};for(const M in this.vdwRadii){let f=this.vdwRadii[M];O?w[M]=(f+this.probeRadius)*this.scaleFactor+.5:w[M]=f*this.scaleFactor+.5;let i=w[M]*w[M];this.widxz[M]=Math.floor(w[M])+1,this.depty[M]=new Int32Array(this.widxz[M]*this.widxz[M]);let l=0;for(let p=0;p<this.widxz[M];p++)for(let v=0;v<this.widxz[M];v++){let b=p*p+v*v;if(b>i)this.depty[M][l]=-1;else{let s=Math.sqrt(i-b);this.depty[M][l]=Math.floor(s)}l++}}}fillvoxels(O,w){for(let M=0,f=this.vpBits.length;M<f;M++)this.vpBits[M]=0,this.vpDistance[M]=-1,this.vpAtomID[M]=-1;for(let M in w){let f=O[w[M]];f!==void 0&&this.fillAtom(f,O)}for(let M=0,f=this.vpBits.length;M<f;M++)this.vpBits[M]&this.INOUT&&(this.vpBits[M]|=this.ISDONE)}fillAtom(O,w){let M=Math.floor(.5+this.scaleFactor*(O.x+this.ptranx)),f=Math.floor(.5+this.scaleFactor*(O.y+this.ptrany)),i=Math.floor(.5+this.scaleFactor*(O.z+this.ptranz)),l=this.getVDWIndex(O),p=0,v=this.pWidth*this.pHeight;for(let b=0,s=this.widxz[l];b<s;b++)for(let h=0;h<s;h++){if(this.depty[l][p]!=-1){for(let E=-1;E<2;E++)for(let x=-1;x<2;x++)for(let D=-1;D<2;D++)if(E!==0&&x!==0&&D!==0){let z=E*b,P=D*h;for(let G=0;G<=this.depty[l][p];G++){let B=G*x,K=M+z,k=f+B,U=i+P;if(K<0||k<0||U<0||K>=this.pLength||k>=this.pWidth||U>=this.pHeight)continue;let W=K*v+k*this.pHeight+U;if(!(this.vpBits[W]&this.INOUT))this.vpBits[W]|=this.INOUT,this.vpAtomID[W]=O.serial;else{let F=w[this.vpAtomID[W]];if(F.serial!=O.serial){let Y=M+z-Math.floor(.5+this.scaleFactor*(F.x+this.ptranx)),j=f+B-Math.floor(.5+this.scaleFactor*(F.y+this.ptrany)),H=i+P-Math.floor(.5+this.scaleFactor*(F.z+this.ptranz));z*z+B*B+P*P<Y*Y+j*j+H*H&&(this.vpAtomID[W]=O.serial)}}}}}p++}}fillvoxelswaals(O,w){for(let M=0,f=this.vpBits.length;M<f;M++)this.vpBits[M]&=~this.ISDONE;for(let M in w){let f=O[w[M]];f!==void 0&&this.fillAtomWaals(f,O)}}fillAtomWaals(O,w){let M=0,f=Math.floor(.5+this.scaleFactor*(O.x+this.ptranx)),i=Math.floor(.5+this.scaleFactor*(O.y+this.ptrany)),l=Math.floor(.5+this.scaleFactor*(O.z+this.ptranz)),p=this.getVDWIndex(O),v=this.pWidth*this.pHeight;for(let b=0,s=this.widxz[p];b<s;b++)for(let h=0;h<s;h++){if(this.depty[p][M]!=-1){for(let E=-1;E<2;E++)for(let x=-1;x<2;x++)for(let D=-1;D<2;D++)if(E!==0&&x!==0&&D!==0){let z=E*b,P=D*h;for(let G=0;G<=this.depty[p][M];G++){let B=G*x,K=f+z,k=i+B,U=l+P;if(K<0||k<0||U<0||K>=this.pLength||k>=this.pWidth||U>=this.pHeight)continue;let W=K*v+k*this.pHeight+U;if(!(this.vpBits[W]&this.ISDONE))this.vpBits[W]|=this.ISDONE,this.vpAtomID[W]=O.serial;else{let F=w[this.vpAtomID[W]];if(F.serial!=O.serial){let Y=f+z-Math.floor(.5+this.scaleFactor*(F.x+this.ptranx)),j=i+B-Math.floor(.5+this.scaleFactor*(F.y+this.ptrany)),H=l+P-Math.floor(.5+this.scaleFactor*(F.z+this.ptranz));z*z+B*B+P*P<Y*Y+j*j+H*H&&(this.vpAtomID[W]=O.serial)}}}}}M++}}buildboundary(){let O=this.pWidth*this.pHeight;for(let w=0;w<this.pLength;w++)for(let M=0;M<this.pHeight;M++)for(let f=0;f<this.pWidth;f++){let i=w*O+f*this.pHeight+M;if(this.vpBits[i]&this.INOUT){let l=0;for(;l<26;){let p=w+this.nb[l][0],v=M+this.nb[l][2],b=f+this.nb[l][1];if(p>-1&&p<this.pLength&&b>-1&&b<this.pWidth&&v>-1&&v<this.pHeight&&!(this.vpBits[p*O+b*this.pHeight+v]&this.INOUT)){this.vpBits[i]|=this.ISBOUND;break}else l++}}}}fastdistancemap(){let O=new A(this.pLength,this.pWidth,this.pHeight),w=this.pWidth*this.pHeight,M=this.cutRadius*this.cutRadius,f=[],i=[],l;for(let b=0;b<this.pLength;b++)for(let s=0;s<this.pWidth;s++)for(let h=0;h<this.pHeight;h++)if(l=b*w+s*this.pHeight+h,this.vpBits[l]&=~this.ISDONE,this.vpBits[l]&this.INOUT&&this.vpBits[l]&this.ISBOUND){let E={ix:b,iy:s,iz:h};O.set(b,s,h,E),f.push(E),this.vpDistance[l]=0,this.vpBits[l]|=this.ISDONE,this.vpBits[l]&=~this.ISBOUND}do{i=this.fastoneshell(f,O),f=[];for(let b=0,s=i.length;b<s;b++)l=w*i[b].ix+this.pHeight*i[b].iy+i[b].iz,this.vpBits[l]&=~this.ISBOUND,this.vpDistance[l]<=1.0404*M&&f.push({ix:i[b].ix,iy:i[b].iy,iz:i[b].iz})}while(f.length!==0);f=[],i=[],O=null;let p=this.scaleFactor-.5;p<0&&(p=0);let v=M-.5/(.1+p);for(let b=0;b<this.pLength;b++)for(let s=0;s<this.pWidth;s++)for(let h=0;h<this.pHeight;h++)l=b*w+s*this.pHeight+h,this.vpBits[l]&=~this.ISBOUND,this.vpBits[l]&this.INOUT&&(!(this.vpBits[l]&this.ISDONE)||this.vpBits[l]&this.ISDONE&&this.vpDistance[l]>=v)&&(this.vpBits[l]|=this.ISBOUND)}fastoneshell(O,w){let M,f,i,l,p,v,b,s,h,E=[];if(O.length===0)return E;let x={ix:-1,iy:-1,iz:-1},D=this.pWidth*this.pHeight;for(let z=0,P=O.length;z<P;z++){M=O[z].ix,f=O[z].iy,i=O[z].iz,s=w.get(M,f,i);for(let G=0;G<6;G++)x.ix=M+this.nb[G][0],x.iy=f+this.nb[G][1],x.iz=i+this.nb[G][2],x.ix<this.pLength&&x.ix>-1&&x.iy<this.pWidth&&x.iy>-1&&x.iz<this.pHeight&&x.iz>-1&&(h=x.ix*D+this.pHeight*x.iy+x.iz,this.vpBits[h]&this.INOUT&&!(this.vpBits[h]&this.ISDONE)?(w.set(x.ix,x.iy,i+this.nb[G][2],s),l=x.ix-s.ix,p=x.iy-s.iy,v=x.iz-s.iz,b=l*l+p*p+v*v,this.vpDistance[h]=b,this.vpBits[h]|=this.ISDONE,this.vpBits[h]|=this.ISBOUND,E.push({ix:x.ix,iy:x.iy,iz:x.iz})):this.vpBits[h]&this.INOUT&&this.vpBits[h]&this.ISDONE&&(l=x.ix-s.ix,p=x.iy-s.iy,v=x.iz-s.iz,b=l*l+p*p+v*v,b<this.vpDistance[h]&&(w.set(x.ix,x.iy,x.iz,s),this.vpDistance[h]=b,this.vpBits[h]&this.ISBOUND||(this.vpBits[h]|=this.ISBOUND,E.push({ix:x.ix,iy:x.iy,iz:x.iz})))))}for(let z=0,P=O.length;z<P;z++){M=O[z].ix,f=O[z].iy,i=O[z].iz,s=w.get(M,f,i);for(let G=6;G<18;G++)x.ix=M+this.nb[G][0],x.iy=f+this.nb[G][1],x.iz=i+this.nb[G][2],x.ix<this.pLength&&x.ix>-1&&x.iy<this.pWidth&&x.iy>-1&&x.iz<this.pHeight&&x.iz>-1&&(h=x.ix*D+this.pHeight*x.iy+x.iz,this.vpBits[h]&this.INOUT&&!(this.vpBits[h]&this.ISDONE)?(w.set(x.ix,x.iy,i+this.nb[G][2],s),l=x.ix-s.ix,p=x.iy-s.iy,v=x.iz-s.iz,b=l*l+p*p+v*v,this.vpDistance[h]=b,this.vpBits[h]|=this.ISDONE,this.vpBits[h]|=this.ISBOUND,E.push({ix:x.ix,iy:x.iy,iz:x.iz})):this.vpBits[h]&this.INOUT&&this.vpBits[h]&this.ISDONE&&(l=x.ix-s.ix,p=x.iy-s.iy,v=x.iz-s.iz,b=l*l+p*p+v*v,b<this.vpDistance[h]&&(w.set(x.ix,x.iy,x.iz,s),this.vpDistance[h]=b,this.vpBits[h]&this.ISBOUND||(this.vpBits[h]|=this.ISBOUND,E.push({ix:x.ix,iy:x.iy,iz:x.iz})))))}for(let z=0,P=O.length;z<P;z++){M=O[z].ix,f=O[z].iy,i=O[z].iz,s=w.get(M,f,i);for(let G=18;G<26;G++)x.ix=M+this.nb[G][0],x.iy=f+this.nb[G][1],x.iz=i+this.nb[G][2],x.ix<this.pLength&&x.ix>-1&&x.iy<this.pWidth&&x.iy>-1&&x.iz<this.pHeight&&x.iz>-1&&(h=x.ix*D+this.pHeight*x.iy+x.iz,this.vpBits[h]&this.INOUT&&!(this.vpBits[h]&this.ISDONE)?(w.set(x.ix,x.iy,i+this.nb[G][2],s),l=x.ix-s.ix,p=x.iy-s.iy,v=x.iz-s.iz,b=l*l+p*p+v*v,this.vpDistance[h]=b,this.vpBits[h]|=this.ISDONE,this.vpBits[h]|=this.ISBOUND,E.push({ix:x.ix,iy:x.iy,iz:x.iz})):this.vpBits[h]&this.INOUT&&this.vpBits[h]&this.ISDONE&&(l=x.ix-s.ix,p=x.iy-s.iy,v=x.iz-s.iz,b=l*l+p*p+v*v,b<this.vpDistance[h]&&(w.set(x.ix,x.iy,x.iz,s),this.vpDistance[h]=b,this.vpBits[h]&this.ISBOUND||(this.vpBits[h]|=this.ISBOUND,E.push({ix:x.ix,iy:x.iy,iz:x.iz})))))}return E}marchingcubeinit(O){for(let w=0,M=this.vpBits.length;w<M;w++)O==1?this.vpBits[w]&=~this.ISBOUND:O==4?(this.vpBits[w]&=~this.ISDONE,this.vpBits[w]&this.ISBOUND&&(this.vpBits[w]|=this.ISDONE),this.vpBits[w]&=~this.ISBOUND):O==2?this.vpBits[w]&this.ISBOUND&&this.vpBits[w]&this.ISDONE?this.vpBits[w]&=~this.ISBOUND:this.vpBits[w]&this.ISBOUND&&!(this.vpBits[w]&this.ISDONE)&&(this.vpBits[w]|=this.ISDONE):O==3&&(this.vpBits[w]&=~this.ISBOUND)}marchingcube(O){this.marchingcubeinit(O),this.verts=[],this.faces=[],g.MarchingCube.march(this.vpBits,this.verts,this.faces,{smooth:1,nX:this.pLength,nY:this.pWidth,nZ:this.pHeight});let w=this.pWidth*this.pHeight;for(let M=0,f=this.verts.length;M<f;M++)this.verts[M].atomid=this.vpAtomID[this.verts[M].x*w+this.pHeight*this.verts[M].y+this.verts[M].z];g.MarchingCube.laplacianSmooth(1,this.verts,this.faces)}}g.MarchingCube=new m},"./src/VolumeData.ts":(o,u,a)=>{a.r(u),a.d(u,{VolumeData:()=>_});var c=a("./src/utilities.ts"),y=a("./src/WebGL/math/index.ts"),S=a("./src/parsers/VASP.ts"),R=a("./src/parsers/CUBE.ts"),m=a("./node_modules/pako/dist/pako.esm.mjs");class _{constructor(g,T,O){if(this.unit={x:1,y:1,z:1},this.origin={x:0,y:0,z:0},this.size={x:0,y:0,z:0},this.data=new Float32Array([]),this.matrix=null,this.inversematrix=null,this.isbinary=new Set(["ccp4","CCP4"]),this.getCoordinates=function(l){var p=l/(this.size.y*this.size.z),v=l%(this.size.y*this.size.z),b=l%this.size.z;return p*=this.unit.x,v*=this.unit.y,b*=this.unit.z,p+=this.origin.x,v+=this.origin.y,b+=this.origin.z,{x:p,y:v,z:b}},this.vasp=function(l){var p=l.replace(/^\s+/,"").split(/[\n\r]/),v=(0,S.VASP)(l)[0],b=v.length;if(b==0){console.warn("No good formating of CHG or CHGCAR file, not atomic information provided in the file."),this.data=[];return}var s=1.889725992,h=.036749309,E=parseFloat(p[1]),x;x=p[2].replace(/^\s+/,"").split(/\s+/);var D=new y.Vector3(parseFloat(x[0]),parseFloat(x[1]),parseFloat(x[2])).multiplyScalar(E*s);x=p[3].replace(/^\s+/,"").split(/\s+/);var z=new y.Vector3(parseFloat(x[0]),parseFloat(x[1]),parseFloat(x[2])).multiplyScalar(E*s);x=p[4].replace(/^\s+/,"").split(/\s+/);var P=new y.Vector3(parseFloat(x[0]),parseFloat(x[1]),parseFloat(x[2])).multiplyScalar(E*s),G=D.x*(z.y*P.z-P.y*z.z)-z.x*(D.y*P.z-P.y*D.z)+P.x*(D.y*z.z-z.y*D.z);G=Math.abs(G)/Math.pow(s,3);var B=1/G;p.splice(0,8+b+1);var K=p[0].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),k=Math.abs(parseFloat(K[0])),U=Math.abs(parseFloat(K[1])),W=Math.abs(parseFloat(K[2])),F=this.origin=new y.Vector3(0,0,0);this.size={x:k,y:U,z:W},this.unit=new y.Vector3(D.x,z.y,P.z),D=D.multiplyScalar(1/(s*k)),z=z.multiplyScalar(1/(s*U)),P=P.multiplyScalar(1/(s*W)),(D.y!=0||D.z!=0||z.x!=0||z.z!=0||P.x!=0||P.y!=0)&&(this.matrix=new y.Matrix4(D.x,z.x,P.x,0,D.y,z.y,P.y,0,D.z,z.z,P.z,0,0,0,0,1),this.matrix=this.matrix.multiplyMatrices(this.matrix,new y.Matrix4().makeTranslation(F.x,F.y,F.z)),this.origin=new y.Vector3(0,0,0),this.unit=new y.Vector3(1,1,1)),p.splice(0,1);var Y=p.join(" ");Y=Y.replace(/^\s+/,"");var j=Y.split(/[\s\r]+/);j.splice(k*U*W+1);for(var H=Float32Array.from(j,parseFloat),Z=0;Z<H.length;Z++)H[Z]=H[Z]*B*h;this.data=H},this.dx=function(l){var p=l.split(/[\n\r]+/),v,b=/gridpositions\s+counts\s+(\d+)\s+(\d+)\s+(\d+)/,s=/^origin\s+(\S+)\s+(\S+)\s+(\S+)/,h=/^delta\s+(\S+)\s+(\S+)\s+(\S+)/,E=/data follows/,x=0;for(x=0;x<p.length;x++){var D=p[x];if(v=b.exec(D)){var z=parseInt(v[1]),P=parseInt(v[2]),G=parseInt(v[3]);this.size={x:z,y:P,z:G}}else if(v=h.exec(D)){var B=parseFloat(v[1]);if((parseFloat(v[2])!=0||parseFloat(v[3])!=0)&&console.warn("Non-orthogonal delta matrix not currently supported in dx format"),x+=1,D=p[x],v=h.exec(D),v==null){console.error("Parse error in dx delta matrix");return}var K=parseFloat(v[2]);if((parseFloat(v[1])!=0||parseFloat(v[3])!=0)&&console.warn("Non-orthogonal delta matrix not currently supported in dx format"),x+=1,D=p[x],v=h.exec(D),v==null){console.error("Parse error in dx delta matrix");return}var k=parseFloat(v[3]);(parseFloat(v[1])!=0||parseFloat(v[2])!=0)&&console.warn("Non-orthogonal delta matrix not currently supported in dx format"),this.unit=new y.Vector3(B,K,k)}else if(v=s.exec(D)){var U=parseFloat(v[1]),W=parseFloat(v[2]),F=parseFloat(v[3]);this.origin=new y.Vector3(U,W,F)}else if(v=E.exec(D))break}if(x+=1,!this.size||!this.origin||!this.unit||!this.size){console.error("Error parsing dx format");return}var Y=p.splice(x).join(" "),j=Y.split(/[\s\r]+/);this.data=Float32Array.from(j,parseFloat)},T=T.toLowerCase(),/\.gz$/.test(T)){T=T.replace(/\.gz$/,"");try{this[T]&&this.isbinary.has(T)?(typeof g=="string"&&(g=(0,c.base64ToArray)(g)),g=(0,m.inflate)(g)):g=new TextDecoder("utf-8").decode((0,m.inflate)(g))}catch(l){console.error(l)}}if(this[T]&&(this.isbinary.has(T)&&typeof g=="string"&&(g=(0,c.base64ToArray)(g)),this[T](g)),O){if(O.negate)for(let l=0,p=this.data.length;l<p;l++)this.data[l]=-this.data[l];if(O.normalize){var w=0;for(let l=0,p=this.data.length;l<p;l++)w+=this.data[l];var M=w/this.data.length;w=0;for(let l=0,p=this.data.length;l<p;l++){var f=this.data[l]-M;w+=f*f}var i=w/this.data.length;for(let l=0,p=this.data.length;l<p;l++)this.data[l]=(this.data[l]-M)/i}}}getIndex(g,T,O){if(this.matrix){this.inversematrix==null&&(this.inversematrix=new y.Matrix4().getInverse(this.matrix));var w=new y.Vector3(g,T,O);w=w.applyMatrix4(this.inversematrix),g=w.x,T=w.y,O=w.z}else g-=this.origin.x,T-=this.origin.y,O-=this.origin.z,g/=this.unit.x,T/=this.unit.y,O/=this.unit.z;return g=Math.round(g),T=Math.round(T),O=Math.round(O),g<0||g>=this.size.x||T<0||T>=this.size.y||O<0||O>=this.size.z?-1:g*this.size.y*this.size.z+T*this.size.z+O}getVal(g,T,O){let w=this.getIndex(g,T,O);return w<0?0:this.data[w]}cube(g){var T=g.split(/\r?\n/);if(!(T.length<6)){var O=(0,R.CUBE)(g,{}).modelData[0].cryst,w=T[2].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),M=parseFloat(w[0]),f=Math.abs(M);this.origin=O.origin,this.size=O.size,this.unit=O.unit,this.matrix=O.matrix4;var i=6;M<0&&i++;var l=T.splice(f+i).join(" ");l=l.replace(/^\s+/,"");var p=l.split(/[\s\r]+/);this.data=Float32Array.from(p,parseFloat)}}ccp4(g){var T={};g=new Int8Array(g);var O=new Int32Array(g.buffer,0,56),w=new Float32Array(g.buffer,0,56),M=new DataView(g.buffer);if(T.MAP=String.fromCharCode(M.getUint8(208),M.getUint8(209),M.getUint8(210),M.getUint8(211)),T.MACHST=[M.getUint8(212),M.getUint8(213)],T.MACHST[0]===17&&T.MACHST[1]===17)for(var f=g.byteLength,i=0;i<f;i+=4)M.setFloat32(i,M.getFloat32(i),!0);T.NX=O[0],T.NY=O[1],T.NZ=O[2],T.MODE=O[3],T.NXSTART=O[4],T.NYSTART=O[5],T.NZSTART=O[6],T.MX=O[7],T.MY=O[8],T.MZ=O[9],T.xlen=w[10],T.ylen=w[11],T.zlen=w[12],T.alpha=w[13],T.beta=w[14],T.gamma=w[15],T.MAPC=O[16],T.MAPR=O[17],T.MAPS=O[18],T.DMIN=w[19],T.DMAX=w[20],T.DMEAN=w[21],T.ISPG=O[22],T.NSYMBT=O[23],T.LSKFLG=O[24],T.originX=w[49],T.originY=w[50],T.originZ=w[51],T.ARMS=w[54];var l=T,p=[l.xlen,0,0],v=[l.ylen*Math.cos(Math.PI/180*l.gamma),l.ylen*Math.sin(Math.PI/180*l.gamma),0],b=[l.zlen*Math.cos(Math.PI/180*l.beta),l.zlen*(Math.cos(Math.PI/180*l.alpha)-Math.cos(Math.PI/180*l.gamma)*Math.cos(Math.PI/180*l.beta))/Math.sin(Math.PI/180*l.gamma),0];b[2]=Math.sqrt(l.zlen*l.zlen*Math.sin(Math.PI/180*l.beta)*Math.sin(Math.PI/180*l.beta)-b[1]*b[1]);var s=[0,p,v,b],h=[0,l.MX,l.MY,l.MZ],E=[0,l.MAPC,l.MAPR,l.MAPS];this.matrix=new y.Matrix4,this.matrix.set(s[E[1]][0]/h[E[1]],s[E[2]][0]/h[E[2]],s[E[3]][0]/h[E[3]],0,s[E[1]][1]/h[E[1]],s[E[2]][1]/h[E[2]],s[E[3]][1]/h[E[3]],0,s[E[1]][2]/h[E[1]],s[E[2]][2]/h[E[2]],s[E[3]][2]/h[E[3]],0,0,0,0,1),this.matrix=this.matrix.multiplyMatrices(this.matrix,new y.Matrix4().makeTranslation(l.NXSTART+l.originX,l.NYSTART+l.originY,l.NZSTART+l.originZ)),this.origin=new y.Vector3(0,0,0),this.unit=new y.Vector3(1,1,1),this.size={x:T.NX,y:T.NY,z:T.NZ},this.dimensionorder=[T.MAPC,T.MAPR,T.MAPS];var x=new Float32Array(g.buffer,1024+T.NSYMBT),D=T.NX,z=T.NY,P=T.NZ;this.data=new Float32Array(D*z*P);for(let G=0;G<D;G++)for(let B=0;B<z;B++)for(let K=0;K<P;K++)this.data[(G*z+B)*P+K]=x[(K*z+B)*D+G]}}},"./src/VolumetricRender.ts":(o,u,a)=>{a.r(u),a.d(u,{GLVolumetricRender:()=>_});var c=a("./src/WebGL/shapes/index.ts"),y=a("./src/WebGL/math/index.ts"),S=a("./src/WebGL/index.ts"),R=a("./src/colors.ts"),m=a("./src/GLShape.ts");class _{static interpolateArray(g,T){function O(b,s,h){return b+(s-b)*h}var w=[],M=(g.length-1)/(T-1);w[0]=g[0];for(var f=1;f<T-1;f++){var i=f*M,l=Math.floor(i),p=Math.ceil(i),v=i-l;w[f]=O(g[l],g[p],v)}return w[T-1]=g[g.length-1],w}constructor(g,T,O){this.hidden=!1,this.boundingSphere=new c.Sphere,this.renderedShapeObj=null,this.shapeObj=null,this.subsamples=5,this.data=null,this.transferfunctionbuffer=[],this.min=0,this.max=0,T=T||{};var w=Object.assign([],T.transferfn);this.subsamples=T.subsamples||5;let M=256;w.forEach(function(z){z.value=parseFloat(z.value)}),w.sort(function(z,P){return z.value-P.value}),this.min=w[0].value,w.length==0&&w.push(w[0]),this.max=w[w.length-1].value;var f,i,l,p,v,b,s,h,E,x;for(let z=0;z<w.length-1;z++)if(l=R.CC.color(w[z].color),p=R.CC.color(w[z+1].color),E=w[z].opacity,x=w[z+1].opacity,f=Math.floor((w[z].value-this.min)*M/(this.max-this.min)),i=Math.floor((w[z+1].value-this.min)*M/(this.max-this.min)),f!=i){v=_.interpolateArray([l.r*255,p.r*255],i-f),b=_.interpolateArray([l.g*255,p.g*255],i-f),s=_.interpolateArray([l.b*255,p.b*255],i-f),h=_.interpolateArray([E*255,x*255],i-f);for(let P=0;P<v.length;P++)this.transferfunctionbuffer.push(v[P]),this.transferfunctionbuffer.push(b[P]),this.transferfunctionbuffer.push(s[P]),this.transferfunctionbuffer.push(h[P])}if(this.transferfunctionbuffer=new Uint8ClampedArray(this.transferfunctionbuffer),g.matrix){let z=new y.Vector3(0,0,0),P=new y.Vector3(g.size.x,g.size.y,g.size.z),G=new y.Vector3(1,1,1);z.applyMatrix4(g.matrix),P.applyMatrix4(g.matrix),G.applyMatrix4(g.matrix).sub(z),this.extent=[[z.x,z.y,z.z],[P.x,P.y,P.z]];for(let U=1;U<7;U++)P.x=U&1?g.size.x:0,P.y=U&2?g.size.y:0,P.z=U&4?g.size.z:0,P.applyMatrix4(g.matrix),this.extent[0][0]=Math.min(this.extent[0][0],P.x),this.extent[0][1]=Math.min(this.extent[0][1],P.y),this.extent[0][2]=Math.min(this.extent[0][2],P.z),this.extent[1][0]=Math.max(this.extent[1][0],P.x),this.extent[1][1]=Math.max(this.extent[1][1],P.y),this.extent[1][2]=Math.max(this.extent[1][2],P.z);let B=P.x-z.x,K=P.y-z.y,k=P.z-z.z;this.maxdepth=Math.sqrt(B*B+K*K+k*k),this.minunit=Math.min(Math.min(G.x,G.y),G.z),this.texmatrix=new y.Matrix4().identity().scale({x:g.size.x,y:g.size.y,z:g.size.z}),this.texmatrix=this.texmatrix.multiplyMatrices(g.matrix,this.texmatrix),this.texmatrix=this.texmatrix.getInverse(this.texmatrix)}else{this.texmatrix=new y.Matrix4().identity();let z=g.unit.x*g.size.x,P=g.unit.y*g.size.y,G=g.unit.z*g.size.z;this.texmatrix.makeTranslation(-g.origin.x/z,-g.origin.y/P,-g.origin.z/G),this.texmatrix.scale({x:1/z,y:1/P,z:1/G}),this.minunit=Math.min(Math.min(g.unit.x,g.unit.y),g.unit.z),this.extent=[[g.origin.x,g.origin.y,g.origin.z],[g.origin.x+z,g.origin.y+P,g.origin.z+G]],this.maxdepth=Math.sqrt(z*z+P*P+G*G)}var D=new m.GLShape({});if(D.addBox({corner:{x:this.extent[0][0],y:this.extent[0][1],z:this.extent[0][2]},dimensions:{w:this.extent[1][0]-this.extent[0][0],h:this.extent[1][1]-this.extent[0][1],d:this.extent[1][2]-this.extent[0][2]}}),this.geo=D.finalize(),this.boundingSphere.center=new y.Vector3((this.extent[0][0]+this.extent[1][0])/2,(this.extent[0][1]+this.extent[1][1])/2,(this.extent[0][2]+this.extent[1][2])/2),this.boundingSphere.radius=this.maxdepth/2,T.coords===void 0&&T.selection!==void 0&&(O?T.coords=O.selectedAtoms(T.selection):console.log("Need to provide viewer to volumetric renderer if selection specified.")),T.coords!==void 0&&T.seldist!==void 0){let z=new Uint8Array(g.data.length),P=T.seldist,G=P*P;for(let B=0,K=T.coords.length;B<K;B++){let k=T.coords[B],U=k.x-P,W=k.y-P,F=k.z-P,Y=k.x+P,j=k.y+P,H=k.z+P;if(g.getIndex(U,W,F)>=0||g.getIndex(Y,j,H)>=0)for(let Z=U;Z<Y;Z+=this.minunit)for(let ne=W;ne<j;ne+=this.minunit)for(let se=F;se<H;se+=this.minunit){let me=g.getIndex(Z,ne,se);me>=0&&!z[me]&&(Z-k.x)*(Z-k.x)+(ne-k.y)*(ne-k.y)+(se-k.z)*(se-k.z)<G&&(z[me]=1)}}for(let B=0,K=g.data.length;B<K;B++)z[B]==0&&(g.data[B]=1/0)}this.data=g}globj(g){if(this.renderedShapeObj&&(g.remove(this.renderedShapeObj),this.renderedShapeObj=null),!this.hidden){this.shapeObj=new S.Object3D;var T=null,O=new S.Texture(this.data,!0),w=new S.Texture(this.transferfunctionbuffer,!1);O.needsUpdate=!0,w.needsUpdate=!0,w.flipY=!1,T=new S.VolumetricMaterial({transferfn:w,transfermin:this.min,transfermax:this.max,map:O,extent:this.extent,maxdepth:this.maxdepth,texmatrix:this.texmatrix,unit:this.minunit,subsamples:this.subsamples});var M=new S.Mesh(this.geo,T);this.shapeObj.add(M),this.renderedShapeObj=this.shapeObj.clone(),g.add(this.renderedShapeObj)}}removegl(g){this.renderedShapeObj&&(this.renderedShapeObj.geometry!==void 0&&this.renderedShapeObj.geometry.dispose(),this.renderedShapeObj.material!==void 0&&this.renderedShapeObj.material.dispose(),g.remove(this.renderedShapeObj),this.renderedShapeObj=null),this.shapeObj=null}get position(){return this.boundingSphere.center}get x(){return this.boundingSphere.center.x}get y(){return this.boundingSphere.center.y}get z(){return this.boundingSphere.center.z}}},"./src/WebGL/Camera.ts":(o,u,a)=>{a.r(u),a.d(u,{Camera:()=>S});var c=a("./src/WebGL/core/index.ts"),y=a("./src/WebGL/math/index.ts");class S extends c.Object3D{constructor(m=50,_=1,A=.1,g=2e3,T=!1){super(),this.projectionMatrix=new y.Matrix4,this.projectionMatrixInverse=new y.Matrix4,this.matrixWorldInverse=new y.Matrix4,this.fov=m,this.aspect=_,this.near=A,this.far=g;var O=this.position.z;this.right=O*Math.tan(Math.PI/180*m),this.left=-this.right,this.top=this.right/this.aspect,this.bottom=-this.top,this.ortho=!!T,this.updateProjectionMatrix()}lookAt(m){this.matrix.lookAt(this.position,m,this.up),this.rotationAutoUpdate&&(this.useQuaternion===!1&&this.rotation instanceof y.Vector3?this.rotation.setEulerFromRotationMatrix(this.matrix,this.eulerOrder):console.error("Unimplemented math operation."))}updateProjectionMatrix(){this.ortho?this.projectionMatrix.makeOrthographic(this.left,this.right,this.top,this.bottom,this.near,this.far):this.projectionMatrix.makePerspective(this.fov,this.aspect,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)}}},"./src/WebGL/Fog.ts":(o,u,a)=>{a.r(u),a.d(u,{Fog:()=>y});var c=a("./src/colors.ts");class y{constructor(R,m=1,_=1e3){this.name="",this.color=new c.Color(R),this.near=m,this.far=_}clone(){return new y(this.color.getHex(),this.near,this.far)}}},"./src/WebGL/Renderer.ts":(o,u,a)=>{a.r(u),a.d(u,{Renderer:()=>f});var c=a("./src/WebGL/Camera.ts"),y=a("./src/WebGL/constants/Sides.ts"),S=a("./src/WebGL/constants/TextureConstants.ts"),R=a("./src/WebGL/core/index.ts"),m=a("./src/colors.ts"),_=a("./src/WebGL/materials/index.ts"),A=a("./src/WebGL/math/index.ts"),g=a("./src/WebGL/objects/index.ts"),T=a("./src/WebGL/shaders/index.ts"),O=a("./src/WebGL/SpritePlugin.ts"),w=null,M=null;class f{constructor(l){this.context=null,this.devicePixelRatio=1,this.sortObjects=!0,this.autoUpdateObjects=!0,this.autoUpdateScene=!0,this.info={memory:{programs:0,geometries:0,textures:0},render:{calls:0,vertices:0,faces:0,points:0}},this._offscreen=null,this._bitmap=null,this._programs=[],this._programs_counter=0,this._webglversion=1,this._currentProgram=null,this._currentMaterialId=-1,this._currentGeometryGroupHash=null,this._currentCamera=null,this._geometryGroupCounter=0,this._oldDoubleSided=-1,this._oldFlipSided=-1,this._oldDepthTest=-1,this._oldDepthWrite=-1,this._oldPolygonOffset=null,this._oldLineWidth=null,this._viewportWidth=0,this._viewportHeight=0,this._currentWidth=0,this._currentHeight=0,this._enabledAttributes={},this._vector3=new A.Vector3,this._worldInverse=new A.Matrix4,this._projInverse=new A.Matrix4,this._textureMatrix=new A.Matrix4,this._fullProjModelMatrix=new A.Matrix4,this._fullProjModelMatrixInv=new A.Matrix4,this._direction=new A.Vector3,this._lightsNeedUpdate=!0,this._lights={ambient:[0,0,0],directional:{length:0,colors:[],positions:[]},point:{length:0,colors:[],positions:[],distances:[]},spot:{length:0,colors:[],positions:[],distances:[],directions:[],anglesCos:[],exponents:[]},hemi:{length:0,skyColors:[],groundColors:[],positions:[]}},this.sprites=new O.SpritePlugin,this._screenshader=null,this._AOshader=null,this._blurshader=null,this._vertexattribpos=null,this._aovertexattribpos=null,this._blurvertexattribpos=null,this._screenQuadVBO=null,this._fb=null,this._targetTexture=null,this._depthTexture=null,this._shadingTexture=null,this._scratchTexture=null,this._AOstrength=1,this._AOradius=5,this.SHADE_TEXTURE=3,l=l||{},this.row=l.row,this.col=l.col,this.rows=l.rows,this.cols=l.cols,this._canvas=l.canvas!==void 0?l.canvas:document.createElement("canvas"),this._precision=l.precision!==void 0?l.precision:"highp",this._alpha=l.alpha!==void 0?l.alpha:!0,this._premultipliedAlpha=l.premultipliedAlpha!==void 0?l.premultipliedAlpha:!0,this._antialias=l.antialias!==void 0?l.antialias:!1,this._preserveDrawingBuffer=l.preserveDrawingBuffer!==void 0?l.preserveDrawingBuffer:!1,this._clearColor=l.clearColor!==void 0?new m.Color(l.clearColor):new m.Color(0),this._clearAlpha=l.clearAlpha!==void 0?l.clearAlpha:0,this._outlineMaterial=new _.MeshOutlineMaterial(l.outline),this._outlineSphereImposterMaterial=new _.SphereImposterOutlineMaterial(l.outline),this._outlineStickImposterMaterial=new _.StickImposterOutlineMaterial(l.outline),this._outlineEnabled=!!l.outline,this._AOEnabled=!!l.ambientOcclusion,l.ambientOcclusion&&typeof l.ambientOcclusion.strength<"u"&&(this._AOstrength=parseFloat(l.ambientOcclusion.strength)),this._AOstrength==0&&(this._AOEnabled=!1),l.ambientOcclusion&&typeof l.ambientOcclusion.radius<"u"&&(this._AOradius=parseFloat(l.ambientOcclusion.radius)),this.domElement=this._canvas,this._canvas.id=l.id,!(l.containerWidth==0||l.containerHeight==0)&&(this.initGL(),this.setDefaultGLState(),this.context=this._gl,this.isWebGL1()?this._extInstanced=this._gl.getExtension("ANGLE_instanced_arrays"):this._extInstanced={vertexAttribDivisorANGLE:this._gl.vertexAttribDivisor.bind(this._gl),drawElementsInstancedANGLE:this._gl.drawElementsInstanced.bind(this._gl)},this._extFragDepth=this._gl.getExtension("EXT_frag_depth"),this._extFloatLinear=this._gl.getExtension("OES_texture_float_linear"),this._extColorBufferFloat=this._gl.getExtension("EXT_color_buffer_float"),this.sprites.init(this))}supportedExtensions(){return{supportsAIA:!!this._extInstanced,supportsImposters:!!this._extFragDepth||!this.isWebGL1(),regen:!1}}getContext(){return this._gl}getCanvas(){return this._canvas}isLost(){return this._gl==null||this._gl.isContextLost()}getPrecision(){return this._precision}setClearColorHex(l,p){this._clearColor.setHex(l),this._clearAlpha=p,this.isLost()||this._gl.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearAlpha)}enableOutline(l){this._outlineMaterial=new _.MeshOutlineMaterial(l),this._outlineSphereImposterMaterial=new _.SphereImposterOutlineMaterial(l),this._outlineStickImposterMaterial=new _.StickImposterOutlineMaterial(l),this._outlineEnabled=!0}disableOutline(){this._outlineEnabled=!1}enableAmbientOcclusion(l){l&&(l.strength&&(this._AOstrength=l.strength),l.scale&&(this._AOradius=l.scale)),this._AOEnabled=this._AOstrength>0}disableAmbientOcclusion(){this._AOEnabled=!1}setViewport(){if(this._offscreen&&(this._offscreen.width=this._canvas.width,this._offscreen.height=this._canvas.height),this.rows!=null&&this.cols!=null&&this.row!=null&&this.col!=null){var l=this._canvas.width/this.cols,p=this._canvas.height/this.rows;this._viewportWidth=l,this._viewportHeight=p,this.isLost()||(this._gl.enable(this._gl.SCISSOR_TEST),this._gl.scissor(l*this.col,p*this.row,l,p),this._gl.viewport(l*this.col,p*this.row,l,p))}}setSize(l,p){if(this.devicePixelRatio=window.devicePixelRatio!==void 0?window.devicePixelRatio:1,this._antialias&&this.devicePixelRatio<2&&(this.devicePixelRatio*=2),this.rows!=null&&this.cols!=null&&this.row!=null&&this.col!=null){var v=l/this.cols,b=p/this.rows;this._canvas.width=l*this.devicePixelRatio,this._canvas.height=p*this.devicePixelRatio,this._viewportWidth=v*this.devicePixelRatio,this._viewportHeight=b*this.devicePixelRatio,this._canvas.style.width=l+"px",this._canvas.style.height=p+"px",this.setViewport()}else this._viewportWidth=this._canvas.width=l*this.devicePixelRatio,this._viewportHeight=this._canvas.height=p*this.devicePixelRatio,this._canvas.style.width=l+"px",this._canvas.style.height=p+"px",this.isLost()||this._gl.viewport(0,0,this._gl.drawingBufferWidth,this._gl.drawingBufferHeight);this.initFrameBuffer()}clear(l,p,v){var b=0;(l===void 0||l)&&(b|=this._gl.COLOR_BUFFER_BIT),(p===void 0||p)&&(b|=this._gl.DEPTH_BUFFER_BIT),(v===void 0||v)&&(b|=this._gl.STENCIL_BUFFER_BIT),this._gl.clear(b)}setMaterialFaces(l,p){var v=l.side===y.DoubleSide,b=l.side===y.BackSide;l.imposter||(b=p?!b:b),this._oldDoubleSided!==v&&(v?this._gl.disable(this._gl.CULL_FACE):this._gl.enable(this._gl.CULL_FACE),this._oldDoubleSided=v),this._oldFlipSided!==b&&(b?this._gl.frontFace(this._gl.CW):this._gl.frontFace(this._gl.CCW),this._oldFlipSided=b),this._gl.cullFace(this._gl.BACK)}setDepthTest(l){this._oldDepthTest!==l&&(l?this._gl.enable(this._gl.DEPTH_TEST):this._gl.disable(this._gl.DEPTH_TEST),this._oldDepthTest=l)}setDepthWrite(l){this._oldDepthWrite!==l&&(this._gl.depthMask(l),this._oldDepthWrite=l)}setBlending(l){l?(this._gl.enable(this._gl.BLEND),this._gl.blendEquationSeparate(this._gl.FUNC_ADD,this._gl.FUNC_ADD),this._gl.blendFuncSeparate(this._gl.SRC_ALPHA,this._gl.ONE_MINUS_SRC_ALPHA,this._gl.ONE,this._gl.ONE_MINUS_SRC_ALPHA)):this._gl.disable(this._gl.BLEND)}initMaterial(l,p,v,b){l.addEventListener("dispose",this.onMaterialDispose.bind(this));var s,h;if(h=l.shaderID,h){var E=T.ShaderLib[h];l.vertexShader=E.vertexShader,l.fragmentShader=E.fragmentShader,l.uniforms=T.ShaderUtils.clone(E.uniforms),l.shaded&&l.makeShaded(this.SHADE_TEXTURE)}s={wireframe:l.wireframe,fragdepth:l.imposter,volumetric:l.volumetric,shaded:l.shaded},l.program=this.buildProgram(l.fragmentShader,l.vertexShader,l.uniforms,s)}renderBuffer(l,p,v,b,s,h){if(b.visible){var E,x;if(E=this.setProgram(l,p,v,b,h,this),!!E){x=E.attributes;var D=!1,z=b.wireframe?1:0,P=s.id*16777215+E.id*2+z;P!==this._currentGeometryGroupHash&&(this._currentGeometryGroupHash=P,D=!0),D&&(this.disableAttributes(),x.position>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,s.__webglVertexBuffer),this.enableAttribute(x.position),this._gl.vertexAttribPointer(x.position,3,this._gl.FLOAT,!1,0,0)),x.color>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,s.__webglColorBuffer),this.enableAttribute(x.color),this._gl.vertexAttribPointer(x.color,3,this._gl.FLOAT,!1,0,0)),x.normal>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,s.__webglNormalBuffer),this.enableAttribute(x.normal),this._gl.vertexAttribPointer(x.normal,3,this._gl.FLOAT,!1,0,0)),x.offset>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,s.__webglOffsetBuffer),this.enableAttribute(x.offset),this._gl.vertexAttribPointer(x.offset,3,this._gl.FLOAT,!1,0,0)),x.radius>=0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,s.__webglRadiusBuffer),this.enableAttribute(x.radius),this._gl.vertexAttribPointer(x.radius,1,this._gl.FLOAT,!1,0,0)));var G,B;if(h instanceof g.Mesh){if(b.shaderID==="instanced"){var K=b.sphere.geometryGroups[0];D&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,s.__webglVertexBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,K.vertexArray,this._gl.STATIC_DRAW),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,s.__webglNormalBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,K.normalArray,this._gl.STATIC_DRAW),this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,s.__webglFaceBuffer),this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,K.faceArray,this._gl.STATIC_DRAW)),G=K.faceidx,this._extInstanced.vertexAttribDivisorANGLE(x.offset,1),this._extInstanced.vertexAttribDivisorANGLE(x.radius,1),this._extInstanced.vertexAttribDivisorANGLE(x.color,1),this._extInstanced.drawElementsInstancedANGLE(this._gl.TRIANGLES,G,this._gl.UNSIGNED_SHORT,0,s.radiusArray.length),this._extInstanced.vertexAttribDivisorANGLE(x.offset,0),this._extInstanced.vertexAttribDivisorANGLE(x.radius,0),this._extInstanced.vertexAttribDivisorANGLE(x.color,0)}else b.wireframe?(B=s.lineidx,this.setLineWidth(b.wireframeLinewidth),D&&this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,s.__webglLineBuffer),this._gl.drawElements(this._gl.LINES,B,this._gl.UNSIGNED_SHORT,0)):(G=s.faceidx,D&&this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,s.__webglFaceBuffer),this._gl.drawElements(this._gl.TRIANGLES,G,this._gl.UNSIGNED_SHORT,0));this.info.render.calls++,this.info.render.vertices+=G,this.info.render.faces+=G/3}else h instanceof g.Line&&(B=s.vertices,this.setLineWidth(b.linewidth),this._gl.drawArrays(this._gl.LINES,0,B),this.info.render.calls++)}}}clearShading(){this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._shadingTexture,0),this.clear(!1,!0,!1),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._depthTexture,0)}setShading(l,p,v){let b=l.__lights,s=l.fog,h=[];for(let D=0,z=l.__webglObjects.length;D<z;D++){let P=l.__webglObjects[D];P.render&&P[v]&&h.push(P)}if(h.length==0)return;this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._shadingTexture,0),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,null,0),this.renderObjects(l.__webglObjects,!0,v+"Depth",p,b,s,!1),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._scratchTexture,0),this.clear(!1,!0,!1),this._gl.useProgram(this._AOshader),this._currentProgram=this._AOshader,this.setDepthTest(-1),this.setDepthWrite(-1);let E=this._AOshader.uniforms;this._gl.uniform1f(E.total_strength,this._AOstrength),this._gl.uniform1f(E.radius,this._AOradius),this._fullProjModelMatrix=new A.Matrix4,this._fullProjModelMatrixInv=new A.Matrix4;let x=h[0].object;this._fullProjModelMatrix.multiplyMatrices(p.projectionMatrix,x._modelViewMatrix),this._fullProjModelMatrixInv.getInverse(this._fullProjModelMatrix),this._gl.uniformMatrix4fv(E.projectionMatrix,!1,this._fullProjModelMatrix.elements),this._gl.uniformMatrix4fv(E.projinv,!1,this._fullProjModelMatrixInv.elements),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._screenQuadVBO),this._gl.enableVertexAttribArray(this._aovertexattribpos),this._gl.vertexAttribPointer(this._aovertexattribpos,2,this._gl.FLOAT,!1,0,0),this._gl.activeTexture(this._gl.TEXTURE0),this._gl.bindTexture(this._gl.TEXTURE_2D,this._shadingTexture),this._gl.drawArrays(this._gl.TRIANGLES,0,6),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._shadingTexture,0),this.clear(!1,!0,!1),this._gl.useProgram(this._blurshader),this._currentProgram=this._blurshader,this.setDepthTest(-1),this.setDepthWrite(-1),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._screenQuadVBO),this._gl.enableVertexAttribArray(this._blurvertexattribpos),this._gl.vertexAttribPointer(this._blurvertexattribpos,2,this._gl.FLOAT,!1,0,0),this._gl.activeTexture(this._gl.TEXTURE0),this._gl.bindTexture(this._gl.TEXTURE_2D,this._scratchTexture),this._gl.drawArrays(this._gl.TRIANGLES,0,6),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,this._targetTexture,0),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._depthTexture,0)}render(l,p){if(!(p instanceof c.Camera)){console.error("Renderer.render: camera is not an instance of Camera.");return}var v,b,s,h,E,x=l.__lights,D=l.fog;if(this._currentMaterialId=-1,this._lightsNeedUpdate=!0,this.autoUpdateScene&&l.updateMatrixWorld(),p.parent===void 0&&p.updateMatrixWorld(),p.matrixWorldInverse.getInverse(p.matrixWorld),this.isLost())return;this.autoUpdateObjects&&this.initWebGLObjects(l),this.info.render.calls=0,this.info.render.vertices=0,this.info.render.faces=0,this.info.render.points=0,this._currentWidth=this._viewportWidth,this._currentHeight=this._viewportHeight,this.setViewport(),this.setFrameBuffer(),this._gl.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearAlpha),this.clear(!0,!0,!0),E=l.__webglObjects;let z=!1,P=this._AOEnabled;for(v=0,b=E.length;v<b;v++)s=E[v],h=s.object,s.render=!1,h.visible&&(this.setupMatrices(h,p),this.unrollBufferMaterial(s),s.render=!0,s.volumetric&&(z=!0),s.hasAO&&(P=!0));if(this.setBlending(!1),P&&this.setShading(l,p,"opaque"),this.renderObjects(l.__webglObjects,!0,"opaque",p,x,D,!1),P&&this.clearShading(),this.renderSprites(l,p,!1),this.renderObjects(l.__webglObjects,!0,"transparentDepth",p,x,D,!0),this.renderObjects(l.__webglObjects,!1,"transparent",p,x,D,!0),z&&this._fb&&(this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,null,0),this.renderObjects(l.__webglObjects,!1,"volumetric",p,x,D,!0)),this.renderFrameBuffertoScreen(),this.setDepthTest(!0),this.setDepthWrite(!0),this.renderSprites(l,p,!0),this._bitmap){const G=this._offscreen.transferToImageBitmap();this._bitmap.transferFromImageBitmap(G),G.close()}}setFrameBuffer(){if(this.isWebGL1()||!this._fb)return;let l=this._viewportWidth,p=this._viewportHeight;this._gl.enable(this._gl.SCISSOR_TEST),this._gl.scissor(0,0,l,p),this._gl.viewport(0,0,l,p),this._gl.bindTexture(this._gl.TEXTURE_2D,this._targetTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.RGBA,l,p,0,this._gl.RGBA,this._gl.UNSIGNED_BYTE,null),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.LINEAR),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.LINEAR),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.bindTexture(this._gl.TEXTURE_2D,this._depthTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.DEPTH_COMPONENT32F,l,p,0,this._gl.DEPTH_COMPONENT,this._gl.FLOAT,null),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._shadingTexture&&(this._gl.deleteTexture(this._shadingTexture),this._shadingTexture=this._gl.createTexture(),this._gl.bindTexture(this._gl.TEXTURE_2D,this._shadingTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.DEPTH_COMPONENT32F,l,p,0,this._gl.DEPTH_COMPONENT,this._gl.FLOAT,null),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.deleteTexture(this._scratchTexture),this._scratchTexture=this._gl.createTexture(),this._gl.bindTexture(this._gl.TEXTURE_2D,this._scratchTexture),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.DEPTH_COMPONENT32F,l,p,0,this._gl.DEPTH_COMPONENT,this._gl.FLOAT,null),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE)),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,this._fb),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,this._targetTexture,0),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._shadingTexture,0),this._gl.clearDepth(1),this._gl.clear(this._gl.DEPTH_BUFFER_BIT),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.DEPTH_ATTACHMENT,this._gl.TEXTURE_2D,this._depthTexture,0)}initFrameBuffer(){if(this.isWebGL1())return;let l=this._viewportWidth,p=this._viewportHeight;this._gl.enable(this._gl.SCISSOR_TEST),this._gl.scissor(0,0,l,p),this._gl.viewport(0,0,l,p),this._targetTexture=this._gl.createTexture(),this._depthTexture=this._gl.createTexture(),this._shadingTexture=this._gl.createTexture(),this._scratchTexture=this._gl.createTexture(),this._fb=this._gl.createFramebuffer();var v=this._antialias?T.ShaderLib.screenaa:T.ShaderLib.screen;this._screenshader=this.buildProgram(v.fragmentShader,v.vertexShader,v.uniforms,{}),this._vertexattribpos=this._gl.getAttribLocation(this._screenshader,"vertexPosition");var b=[1,1,-1,1,-1,-1,-1,-1,1,-1,1,1];this._screenQuadVBO=this._gl.createBuffer(),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._screenQuadVBO),this._gl.bufferData(this._gl.ARRAY_BUFFER,new Float32Array(b),this._gl.STATIC_DRAW);let s=T.ShaderLib.ssao;this._AOshader=this.buildProgram(s.fragmentShader,s.vertexShader,s.uniforms,{}),this._aovertexattribpos=this._gl.getAttribLocation(this._AOshader,"vertexPosition");let h=T.ShaderLib.blur;this._blurshader=this.buildProgram(h.fragmentShader,h.vertexShader,h.uniforms,{}),this._blurvertexattribpos=this._gl.getAttribLocation(this._blurshader,"vertexPosition")}renderFrameBuffertoScreen(){this.isWebGL1()||this._fb===null||(this.setViewport(),this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,null),this._gl.clear(this._gl.COLOR_BUFFER_BIT|this._gl.DEPTH_BUFFER_BIT),this._gl.frontFace(this._gl.CCW),this._gl.cullFace(this._gl.BACK),this._gl.useProgram(this._screenshader),this._currentProgram=this._screenshader,this.setDepthTest(-1),this.setDepthWrite(-1),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,this._screenQuadVBO),this._gl.enableVertexAttribArray(this._vertexattribpos),this._gl.vertexAttribPointer(this._vertexattribpos,2,this._gl.FLOAT,!1,0,0),this._gl.activeTexture(this._gl.TEXTURE0),this._gl.bindTexture(this._gl.TEXTURE_2D,this._targetTexture),this._gl.drawArrays(this._gl.TRIANGLES,0,6))}initWebGLObjects(l){if(l.__webglObjects||(l.__webglObjects=[],l.__webglObjectsImmediate=[],l.__webglSprites=[],l.__webglFlares=[]),l.__objectsAdded.length){for(;l.__objectsAdded.length;)this.addObject(l.__objectsAdded[0],l),l.__objectsAdded.splice(0,1);this._currentGeometryGroupHash=-1}for(;l.__objectsRemoved.length;)this.removeObject(l.__objectsRemoved[0],l),l.__objectsRemoved.splice(0,1);for(var p=0,v=l.__webglObjects.length;p<v;p++)this.updateObject(l.__webglObjects[p].object)}getYRatio(){return this.rows!==void 0&&this.row!==void 0?this.rows:1}getXRatio(){return this.cols!==void 0&&this.col!==void 0?this.cols:1}getAspect(l,p){(l==null||p==null)&&(l=this._canvas.width,p=this._canvas.height);var v=l/p;if(this.rows!=null&&this.cols!=null&&this.row!=null&&this.col!=null){var b=l/this.cols,s=p/this.rows;v=b/s}return v}setTexture(l,p,v){if(l.needsUpdate){l.__webglInit||(l.__webglInit=!0,l.addEventListener("dispose",this.onTextureDispose.bind(this)),l.__webglTexture=this._gl.createTexture(),this.info.memory.textures++),this._gl.activeTexture(this._gl.TEXTURE0+p);var b=v?this._gl.TEXTURE_3D:this._gl.TEXTURE_2D;this._gl.bindTexture(b,l.__webglTexture),this._gl.pixelStorei(this._gl.UNPACK_FLIP_Y_WEBGL,l.flipY),this._gl.pixelStorei(this._gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,l.premultiplyAlpha),this._gl.pixelStorei(this._gl.UNPACK_ALIGNMENT,l.unpackAlignment),this._gl.pixelStorei(this._gl.PACK_ALIGNMENT,l.unpackAlignment);var s=this.paramToGL(l.format),h=this.paramToGL(l.type);if(v)this.setTextureParameters(this._gl.TEXTURE_3D,l),this._gl.texImage3D(this._gl.TEXTURE_3D,0,this._gl.R32F,l.image.size.z,l.image.size.y,l.image.size.x,0,this._gl.RED,this._gl.FLOAT,l.image.data);else{var E=l.image,x=E.width,D=E.height;typeof x>"u"&&(x=E.length,s==this._gl.RGBA&&(x/=4),D=1),this.setTextureParameters(this._gl.TEXTURE_2D,l),this.isWebGL1()?this._gl.texImage2D(this._gl.TEXTURE_2D,0,s,s,h,l.image):this._gl.texImage2D(this._gl.TEXTURE_2D,0,s,x,D,0,s,h,l.image)}l.needsUpdate=!1,l.onUpdate&&l.onUpdate()}else this._gl.activeTexture(this._gl.TEXTURE0+p),v?this._gl.bindTexture(this._gl.TEXTURE_3D,l.__webglTexture):this._gl.bindTexture(this._gl.TEXTURE_2D,l.__webglTexture)}supportsVolumetric(){return!this.isWebGL1()}enableAttribute(l){this._enabledAttributes[l]||(this._gl.enableVertexAttribArray(l),this._enabledAttributes[l]=!0)}disableAttributes(){for(let l in this._enabledAttributes)this._enabledAttributes[l]&&(this._gl.disableVertexAttribArray(l),this._enabledAttributes[l]=!1)}setPolygonOffset(l,p,v){this._oldPolygonOffset!==l&&(l?this._gl.enable(this._gl.POLYGON_OFFSET_FILL):this._gl.disable(this._gl.POLYGON_OFFSET_FILL))}setLineWidth(l){l!==this._oldLineWidth&&(this._gl.lineWidth(l),this._oldLineWidth=l)}deallocateGeometry(l){if(l.__webglInit=void 0,l.__webglVertexBuffer!==void 0&&this._gl.deleteBuffer(l.__webglVertexBuffer),l.__webglColorBuffer!==void 0&&this._gl.deleteBuffer(l.__webglColorBuffer),l.geometryGroups!==void 0)for(var p=0,v=l.groups;p<v;p++){var b=l.geometryGroups[p];b.__webglVertexBuffer!==void 0&&this._gl.deleteBuffer(b.__webglVertexBuffer),b.__webglColorBuffer!==void 0&&this._gl.deleteBuffer(b.__webglColorBuffer),b.__webglNormalBuffer!==void 0&&this._gl.deleteBuffer(b.__webglNormalBuffer),b.__webglFaceBuffer!==void 0&&this._gl.deleteBuffer(b.__webglFaceBuffer),b.__webglLineBuffer!==void 0&&this._gl.deleteBuffer(b.__webglLineBuffer)}}deallocateMaterial(l){var p=l.program;if(p!==void 0){l.program=void 0;var v,b,s,h=!1;for(v=0,b=this._programs.length;v<b;v++)if(s=this._programs[v],s.program===p){s.usedTimes--,s.usedTimes===0&&(h=!0);break}if(h===!0){var E=[];for(v=0,b=this._programs.length;v<b;v++)s=this._programs[v],s.program!==p&&E.push(s);this._programs=E,this._gl.deleteProgram(p),this.info.memory.programs--}}}deallocateTexture(l){if(l.image&&l.image.__webglTextureCube)this._gl.deleteTexture(l.image.__webglTextureCube);else{if(!l.__webglInit)return;l.__webglInit=!1,this._gl.deleteTexture(l.__webglTexture)}}onGeometryDispose(l){var p=l.target;p.removeEventListener("dispose",this.onGeometryDispose),this.deallocateGeometry(p),this.info.memory.geometries--}onTextureDispose(l){var p=l.target;p.removeEventListener("dispose",this.onTextureDispose),this.deallocateTexture(p),this.info.memory.textures--}onMaterialDispose(l){var p=l.target;p.removeEventListener("dispose",this.onMaterialDispose),this.deallocateMaterial(p)}getShader(l,p){var v;return!this.isWebGL1()&&!p.startsWith("#version")&&(p=p.replace(/gl_FragDepthEXT/g,"gl_FragDepth"),l=="fragment"?p=p.replace(/varying/g,"in"):p=p.replace(/varying/g,"out"),p=p.replace(/attribute/g,"in"),p=p.replace(/texture2D/g,"texture"),p=p.replace(/\/\/DEFINEFRAGCOLOR/g,"out vec4 glFragColor;"),p=p.replace(/gl_FragColor/g,"glFragColor"),p=`#version 300 es
`+p),l==="fragment"?v=this._gl.createShader(this._gl.FRAGMENT_SHADER):l==="vertex"&&(v=this._gl.createShader(this._gl.VERTEX_SHADER)),v==null?null:(this._gl.shaderSource(v,p),this._gl.compileShader(v),this._gl.getShaderParameter(v,this._gl.COMPILE_STATUS)?v:(console.error(this._gl.getShaderInfoLog(v)),console.error("could not initialize shader"),null))}buildProgram(l,p,v,b){var s,h,E,x,D=[];D.push(l),D.push(p);for(s in b)D.push(s),D.push(b[s]);for(x=D.join(),s=0,h=this._programs.length;s<h;s++){var z=this._programs[s];if(z.code===x)return z.usedTimes++,z.program}if(this.isWebGL1()&&b.volumetric)throw new Error("Volumetric rendering requires webgl2 which is not supported by your hardware.");if(E=this._gl.createProgram(),E==null)return null;var P=this._precision,G="precision "+P+" float;",B=[b.volumetric?"#version 300 es":"",G].join(`
`),K=[b.volumetric?"#version 300 es":"",b.fragdepth&&this.isWebGL1()?"#extension GL_EXT_frag_depth: enable":"",b.shaded?"#define SHADED 1":"",b.wireframe?"#define WIREFRAME 1":"",G].join(`
`),k=this.getShader("fragment",K+l),U=this.getShader("vertex",B+p);U!=null&&this._gl.attachShader(E,U),k!=null&&this._gl.attachShader(E,k),this._gl.linkProgram(E),this._gl.getProgramParameter(E,this._gl.LINK_STATUS)||console.error("Could not initialize shader"),E.uniforms={},E.attributes={};var W,F,Y;W=["viewMatrix","modelViewMatrix","projectionMatrix","normalMatrix","vWidth","vHeight"];for(F in v)W.push(F);for(Y=0;Y<W.length;Y++){var j=W[Y];E.uniforms[j]=this._gl.getUniformLocation(E,j)}for(W=["position","normal","color","lineDistance","offset","radius"],Y=0;Y<W.length;Y++){var H=W[Y];E.attributes[H]=this._gl.getAttribLocation(E,H)}return E.id=this._programs_counter++,this._programs.push({program:E,code:x,usedTimes:1}),this.info.memory.programs=this._programs.length,E}setProgram(l,p,v,b,s,h){if(b.needsUpdate&&(b.program&&this.deallocateMaterial(b),this.initMaterial(b,p,v,s),b.needsUpdate=!1),b.program==null)return null;var E=!1,x=b.program,D=x.uniforms,z=b.uniforms;if(x!=this._currentProgram&&(this._gl.useProgram(x),this._currentProgram=x,E=!0),b.id!=this._currentMaterialId&&(this._currentMaterialId=b.id,E=!0),l!=this._currentCamera&&(this._currentCamera=l,E=!0),D.projectionMatrix&&this._gl.uniformMatrix4fv(D.projectionMatrix,!1,l.projectionMatrix.elements),D.modelViewMatrix&&this._gl.uniformMatrix4fv(D.modelViewMatrix,!1,s._modelViewMatrix.elements),D.normalMatrix&&this._gl.uniformMatrix3fv(D.normalMatrix,!1,s._normalMatrix.elements),D.projinv&&(this._projInverse.getInverse(l.projectionMatrix),this._gl.uniformMatrix4fv(D.projinv,!1,this._projInverse.elements)),D.viewMatrix&&this._gl.uniformMatrix4fv(D.viewMatrix,!1,l.matrixWorldInverse.elements),D.vWidth&&this._gl.uniform1f(D.vWidth,this._viewportWidth),D.vHeight&&this._gl.uniform1f(D.vHeight,this._viewportHeight),E){if(z.fogColor.value=v.color,z.fogNear.value=v.near,z.fogFar.value=v.far,b.shaderID.startsWith("lambert")||b.shaderID==="instanced"||b.shaderID.endsWith("imposter"))this._lightsNeedUpdate&&(this.setupLights(x,p),this._lightsNeedUpdate=!1),z.directionalLightColor.value=this._lights.directional.colors,z.directionalLightDirection.value=this._lights.directional.positions;else if(b.shaderID.endsWith("outline"))z.outlineColor.value=b.outlineColor,z.outlineWidth.value=b.outlineWidth,z.outlinePushback.value=b.outlinePushback,z.outlineMaxPixels.value=b.outlineMaxPixels*this.devicePixelRatio;else if(b.shaderID==="volumetric"){s._modelViewMatrix.getScale(this._direction),this._worldInverse.getInverse(s._modelViewMatrix),this._projInverse.getInverse(l.projectionMatrix),this._textureMatrix.multiplyMatrices(s.material.texmatrix,this._worldInverse),this._gl.uniformMatrix4fv(D.textmat,!1,this._textureMatrix.elements),this._gl.uniformMatrix4fv(D.projinv,!1,this._projInverse.elements);let P=Math.min(Math.min(this._direction.x,this._direction.y),this._direction.z);z.step.value=s.material.unit*P,z.maxdepth.value=s.material.maxdepth*P,z.transfermax.value=s.material.transfermax,z.transfermin.value=s.material.transfermin,z.subsamples.value=s.material.subsamples,h.setTexture(s.material.transferfn,4,!1),h.setTexture(s.material.map,3,!0),this._gl.activeTexture(this._gl.TEXTURE5),this._gl.bindTexture(this._gl.TEXTURE_2D,this._depthTexture)}z.opacity.value=b.opacity,this.loadMaterialUniforms(D,z)}return z.shading&&(z.shading.value==3?(this._gl.activeTexture(this._gl.TEXTURE0+this.SHADE_TEXTURE),this._gl.bindTexture(this._gl.TEXTURE_2D,this._shadingTexture)):console.error("Invalid shading textures.")),x}loadMaterialUniforms(l,p){var v,b,s,h;for(v in p)l[v]&&(b=p[v].type,s=p[v].value,h=l[v],b==="f"?this._gl.uniform1f(h,s):b==="i"?this._gl.uniform1i(h,s):b==="fv"?this._gl.uniform3fv(h,s):b==="c"?this._gl.uniform3f(h,s.r,s.g,s.b):b==="f4"&&this._gl.uniform4f(h,s[0],s[1],s[2],s[3]))}addObject(l,p){var v,b,s,h;if(!l.__webglInit&&(l.__webglInit=!0,l._modelViewMatrix=new A.Matrix4,l._normalMatrix=new A.Matrix3,l.geometry!==void 0&&l.geometry.__webglInit===void 0&&(l.geometry.__webglInit=!0,l.geometry.addEventListener("dispose",this.onGeometryDispose.bind(this))),l instanceof g.Mesh||l instanceof g.Line))for(s=l.geometry,v=0,b=s.geometryGroups.length;v<b;v++)h=s.geometryGroups[v],h.id=this._geometryGroupCounter++,h.__webglVertexBuffer||(l instanceof g.Mesh?(this.createMeshBuffers(h),s.elementsNeedUpdate=!0,s.normalsNeedUpdate=!0):l instanceof g.Line&&this.createLineBuffers(h),s.verticesNeedUpdate=!0,s.colorsNeedUpdate=!0);if(!l.__webglActive){if(l instanceof g.Mesh||l instanceof g.Line)for(s=l.geometry,v=0,b=s.geometryGroups.length;v<b;v++)h=s.geometryGroups[v],this.addBuffer(p.__webglObjects,h,l);else l instanceof g.Sprite&&p.__webglSprites.push(l);l.__webglActive=!0}}updateObject(l){var p=l.geometry,v;if(l instanceof g.Mesh||l instanceof g.Line){for(var b=0,s=p.geometryGroups.length;b<s;b++)v=p.geometryGroups[b],(p.verticesNeedUpdate||p.elementsNeedUpdate||p.colorsNeedUpdate||p.normalsNeedUpdate)&&this.setBuffers(v,this._gl.STATIC_DRAW);p.verticesNeedUpdate=!1,p.elementsNeedUpdate=!1,p.normalsNeedUpdate=!1,p.colorsNeedUpdate=!1,p.buffersNeedUpdate=!1}}removeObject(l,p){l instanceof g.Mesh||l instanceof g.Line?this.removeInstances(p.__webglObjects,l):l instanceof g.Sprite&&this.removeInstancesDirect(p.__webglSprites,l),l.__webglActive=!1}removeInstances(l,p){for(var v=l.length-1;v>=0;--v)l[v].object===p&&l.splice(v,1)}removeInstancesDirect(l,p){for(var v=l.length-1;v>=0;--v)l[v]===p&&l.splice(v,1)}unrollBufferMaterial(l){var p=l.object,v=p.material;if(v.volumetric)l.opaque=null,l.transparent=null,l.volumetric=v;else if(v.transparent){if(l.opaque=null,l.volumetric=null,l.transparent=v,!v.wireframe){let b=v.clone();b.opacity=0,l.transparentDepth=b}}else{if(l.opaque=v,l.transparent=null,l.volumetric=null,!v.wireframe){let b=v.clone();b.opacity=0,l.opaqueDepth=b}v.hasAO&&(l.hasAO=!0),(this._AOEnabled||l.hasAO)&&(l.opaqueShaded=v.clone(),l.opaqueShaded.shaded=!0)}}setBuffers(l,p){var v=l.vertexArray,b=l.colorArray;if(l.__webglOffsetBuffer!==void 0?(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,l.__webglOffsetBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,v,p)):(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,l.__webglVertexBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,v,p)),this._gl.bindBuffer(this._gl.ARRAY_BUFFER,l.__webglColorBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,b,p),l.normalArray&&l.__webglNormalBuffer!==void 0){var s=l.normalArray;this._gl.bindBuffer(this._gl.ARRAY_BUFFER,l.__webglNormalBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,s,p)}if(l.radiusArray&&l.__webglRadiusBuffer!==void 0&&(this._gl.bindBuffer(this._gl.ARRAY_BUFFER,l.__webglRadiusBuffer),this._gl.bufferData(this._gl.ARRAY_BUFFER,l.radiusArray,p)),l.faceArray&&l.__webglFaceBuffer!==void 0){var h=l.faceArray;this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,l.__webglFaceBuffer),this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,h,p)}if(l.lineArray&&l.__webglLineBuffer!==void 0){var E=l.lineArray;this._gl.bindBuffer(this._gl.ELEMENT_ARRAY_BUFFER,l.__webglLineBuffer),this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,E,p)}}createMeshBuffers(l){l.radiusArray&&(l.__webglRadiusBuffer=this._gl.createBuffer()),l.useOffset&&(l.__webglOffsetBuffer=this._gl.createBuffer()),l.__webglVertexBuffer=this._gl.createBuffer(),l.__webglNormalBuffer=this._gl.createBuffer(),l.__webglColorBuffer=this._gl.createBuffer(),l.__webglFaceBuffer=this._gl.createBuffer(),l.__webglLineBuffer=this._gl.createBuffer(),this.info.memory.geometries++}createLineBuffers(l){l.__webglVertexBuffer=this._gl.createBuffer(),l.__webglColorBuffer=this._gl.createBuffer(),this.info.memory.geometries++}addBuffer(l,p,v){l.push({buffer:p,object:v,opaque:null,transparent:null})}setupMatrices(l,p){l._modelViewMatrix.multiplyMatrices(p.matrixWorldInverse,l.matrixWorld),l._normalMatrix.getInverse(l._modelViewMatrix),l._normalMatrix.transpose()}filterFallback(l){return this._gl.LINEAR}setTextureParameters(l,p){l==this._gl.TEXTURE_2D?(this._gl.texParameteri(l,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(l,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(l,this._gl.TEXTURE_MAG_FILTER,this.filterFallback(p.magFilter)),this._gl.texParameteri(l,this._gl.TEXTURE_MIN_FILTER,this.filterFallback(p.minFilter))):(this._gl.texParameteri(l,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(l,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(l,this._gl.TEXTURE_WRAP_R,this._gl.CLAMP_TO_EDGE),this._extColorBufferFloat&&this._extFloatLinear?(this._gl.texParameteri(l,this._gl.TEXTURE_MAG_FILTER,this._gl.LINEAR),this._gl.texParameteri(l,this._gl.TEXTURE_MIN_FILTER,this._gl.LINEAR)):(this._gl.texParameteri(l,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.texParameteri(l,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST)))}paramToGL(l){return l===S.UnsignedByteType?this._gl.UNSIGNED_BYTE:l===S.RGBAFormat?this._gl.RGBA:l===S.NearestFilter?this._gl.NEAREST:0}setupLights(l,p){var v,b,s,h=0,E=0,x=0,D,z,P=this._lights,G=P.directional.colors,B=P.directional.positions,K=0,k=0;for(v=0,b=p.length;v<b;v++)if(s=p[v],D=s.color,z=s.intensity,s instanceof R.Light){if(this._direction.getPositionFromMatrix(s.matrixWorld),this._vector3.getPositionFromMatrix(s.target.matrixWorld),this._direction.sub(this._vector3),this._direction.normalize(),this._direction.x===0&&this._direction.y===0&&this._direction.z===0)continue;B[k]=this._direction.x,B[k+1]=this._direction.y,B[k+2]=this._direction.z,G[k]=D.r*z,G[k+1]=D.g*z,G[k+2]=D.b*z,k+=3,K++}P.ambient[0]=h,P.ambient[1]=E,P.ambient[2]=x,P.directional.length=K}initGL(){try{if(OffscreenCanvas&&!(this.rows!=null&&this.cols!=null&&this.row!=null&&this.col!=null))(M==null||M.isContextLost())&&(w=new OffscreenCanvas(this._canvas.width,this._canvas.height),M=w.getContext("webgl2",{alpha:!0,premultipliedAlpha:this._premultipliedAlpha,antialias:this._antialias,preserveDrawingBuffer:this._preserveDrawingBuffer})),this._offscreen=w,this._gl=M,this._bitmap=this._canvas.getContext("bitmaprenderer",{alpha:!0});else if(!(this._gl=this._canvas.getContext("webgl2",{alpha:this._alpha,premultipliedAlpha:this._premultipliedAlpha,antialias:this._antialias,preserveDrawingBuffer:this._preserveDrawingBuffer}))&&!(this._gl=this._canvas.getContext("experimental-webgl",{alpha:this._alpha,premultipliedAlpha:this._premultipliedAlpha,antialias:this._antialias,preserveDrawingBuffer:this._preserveDrawingBuffer}))&&!(this._gl=this._canvas.getContext("webgl",{alpha:this._alpha,premultipliedAlpha:this._premultipliedAlpha,antialias:this._antialias,preserveDrawingBuffer:this._preserveDrawingBuffer})))throw"Error creating WebGL context.";var l=this._gl.getParameter(this._gl.VERSION);this._webglversion=parseInt(l[6])}catch(p){console.error(p)}}isWebGL1(){return this._webglversion==1}setDefaultGLState(){this._gl.clearDepth(1),this._gl.clearStencil(0),this._gl.enable(this._gl.DEPTH_TEST),this._gl.depthFunc(this._gl.LEQUAL),this._gl.frontFace(this._gl.CCW),this._gl.cullFace(this._gl.BACK),this._gl.enable(this._gl.CULL_FACE),this._gl.enable(this._gl.BLEND),this._gl.blendEquation(this._gl.FUNC_ADD),this._gl.blendFunc(this._gl.SRC_ALPHA,this._gl.ONE_MINUS_SRC_ALPHA),this._gl.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearAlpha)}renderObjects(l,p,v,b,s,h,E){var x,D,z,P,G,B,K;p?(G=l.length-1,B=-1,K=-1):(G=0,B=l.length,K=1);for(var k=G;k!==B;k+=K)if(x=l[k],x.render){if(D=x.object,z=x.buffer,P=x[v],(x.hasAO||this._AOEnabled)&&x[v+"Shaded"]&&(P=x[v+"Shaded"]),!P)continue;this.setBlending(E),this.setDepthTest(P.depthTest),this.setDepthWrite(P.depthWrite),this.setPolygonOffset(P.polygonOffset,P.polygonOffsetFactor,P.polygonOffsetUnits);var U=D._modelViewMatrix.isReflected();if(this.setMaterialFaces(P,U),this.renderBuffer(b,s,h,P,z,D),(this._outlineEnabled||P.outline)&&!P.wireframe&&P.shaderID!=="basic"&&P.opacity!==0){let W=this._outlineMaterial;P.shaderID=="sphereimposter"?W=this._outlineSphereImposterMaterial:P.shaderID=="stickimposter"&&(W=this._outlineStickImposterMaterial),this.renderBuffer(b,s,h,W,z,D)}}}renderSprites(l,p,v){this._currentGeometryGroupHash=-1,this._currentProgram=null,this._currentCamera=null,this._oldDepthWrite=-1,this._oldDepthTest=-1,this._oldDoubleSided=-1,this._currentMaterialId=-1,this._oldFlipSided=-1,this._lightsNeedUpdate=!0,this.sprites.render(l,p,this._currentWidth,this._currentHeight,v),this._currentGeometryGroupHash=-1,this._currentProgram=null,this._currentCamera=null,this._oldDepthWrite=-1,this._oldDepthTest=-1,this._oldDoubleSided=-1,this._currentMaterialId=-1,this._oldFlipSided=-1}}},"./src/WebGL/SpritePlugin.ts":(o,u,a)=>{a.r(u),a.d(u,{SpritePlugin:()=>y});var c=a("./src/WebGL/shaders/index.ts");class y{constructor(){this.sprite={vertices:null,faces:null,vertexBuffer:null,elementBuffer:null,program:null,attributes:{},uniforms:null}}init(m){this.gl=m.context,this.renderer=m,this.precision=m.getPrecision(),this.sprite.vertices=new Float32Array(16),this.sprite.faces=new Uint16Array(6);var _=0;this.sprite.vertices[_++]=-1,this.sprite.vertices[_++]=-1,this.sprite.vertices[_++]=0,this.sprite.vertices[_++]=0,this.sprite.vertices[_++]=1,this.sprite.vertices[_++]=-1,this.sprite.vertices[_++]=1,this.sprite.vertices[_++]=0,this.sprite.vertices[_++]=1,this.sprite.vertices[_++]=1,this.sprite.vertices[_++]=1,this.sprite.vertices[_++]=1,this.sprite.vertices[_++]=-1,this.sprite.vertices[_++]=1,this.sprite.vertices[_++]=0,this.sprite.vertices[_++]=1,_=0,this.sprite.faces[_++]=0,this.sprite.faces[_++]=1,this.sprite.faces[_++]=2,this.sprite.faces[_++]=0,this.sprite.faces[_++]=2,this.sprite.faces[_++]=3,this.sprite.vertexBuffer=this.gl.createBuffer(),this.sprite.elementBuffer=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.sprite.vertexBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.sprite.vertices,this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.sprite.elementBuffer),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,this.sprite.faces,this.gl.STATIC_DRAW),this.sprite.program=this.createProgram(c.ShaderLib.sprite,this.precision||1),this.sprite.attributes={};const A={};this.sprite.attributes.position=this.gl.getAttribLocation(this.sprite.program,"position"),this.sprite.attributes.uv=this.gl.getAttribLocation(this.sprite.program,"uv"),A.uvOffset=this.gl.getUniformLocation(this.sprite.program,"uvOffset"),A.uvScale=this.gl.getUniformLocation(this.sprite.program,"uvScale"),A.rotation=this.gl.getUniformLocation(this.sprite.program,"rotation"),A.scale=this.gl.getUniformLocation(this.sprite.program,"scale"),A.alignment=this.gl.getUniformLocation(this.sprite.program,"alignment"),A.color=this.gl.getUniformLocation(this.sprite.program,"color"),A.map=this.gl.getUniformLocation(this.sprite.program,"map"),A.opacity=this.gl.getUniformLocation(this.sprite.program,"opacity"),A.useScreenCoordinates=this.gl.getUniformLocation(this.sprite.program,"useScreenCoordinates"),A.screenPosition=this.gl.getUniformLocation(this.sprite.program,"screenPosition"),A.modelViewMatrix=this.gl.getUniformLocation(this.sprite.program,"modelViewMatrix"),A.projectionMatrix=this.gl.getUniformLocation(this.sprite.program,"projectionMatrix"),A.fogType=this.gl.getUniformLocation(this.sprite.program,"fogType"),A.fogDensity=this.gl.getUniformLocation(this.sprite.program,"fogDensity"),A.fogNear=this.gl.getUniformLocation(this.sprite.program,"fogNear"),A.fogFar=this.gl.getUniformLocation(this.sprite.program,"fogFar"),A.fogColor=this.gl.getUniformLocation(this.sprite.program,"fogColor"),A.alphaTest=this.gl.getUniformLocation(this.sprite.program,"alphaTest"),this.sprite.uniforms=A}render(m,_,A,g,T){var O,w,M,f,i,l,p,v,b,s;if(!this.gl)throw new Error("WebGLRenderer not initialized");let h=[];(O=m==null?void 0:m.__webglSprites)===null||O===void 0||O.forEach(ne=>{(T&&ne.material.depthTest==!1||!T&&ne.material.depthTest)&&h.push(ne)});let E=h.length;if(!E)return;const x=this.sprite.attributes,D=this.sprite.uniforms;if(!D)throw new Error("Uniforms not defined");var z=A*.5,P=g*.5;this.gl.useProgram(this.sprite.program),this.gl.enableVertexAttribArray(x.position),this.gl.enableVertexAttribArray(x.uv),this.gl.disable(this.gl.CULL_FACE),this.gl.enable(this.gl.BLEND),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.sprite.vertexBuffer),this.gl.vertexAttribPointer(x.position,2,this.gl.FLOAT,!1,16,0),this.gl.vertexAttribPointer(x.uv,2,this.gl.FLOAT,!1,16,8),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.sprite.elementBuffer),this.gl.uniformMatrix4fv(D.projectionMatrix,!1,_.projectionMatrix.elements),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.uniform1i(D.map,0);var G=0,B=0,K=m.fog;K?(this.gl.uniform3f(D.fogColor,K.color.r,K.color.g,K.color.b),this.gl.uniform1f(D.fogNear,K.near),this.gl.uniform1f(D.fogFar,K.far),this.gl.uniform1i(D.fogType,1),G=1,B=1):(this.gl.uniform1i(D.fogType,0),G=0,B=0);var k;let U,W,F,Y,j=[];for(k=0;k<E;k++)U=h[k],W=U.material,W&&(W.depthTest==!1&&!T||!U.visible||W.opacity===0||(W.useScreenCoordinates?U.z=-U.position.z:(U._modelViewMatrix.multiplyMatrices(_.matrixWorldInverse,U.matrixWorld),U.z=-U._modelViewMatrix.elements[14])));for(h.sort(S),k=0;k<E;k++)if(U=h[k],W=U.material,!!W&&!(!U.visible||W.opacity===0)&&W.map&&W.map.image&&W.map.image.width){this.gl.uniform1f((D==null?void 0:D.alphaTest)||null,W.alphaTest);var H=W.map.image.width,Z=W.map.image.height;j[0]=H*this.renderer.devicePixelRatio/A,j[1]=Z*this.renderer.devicePixelRatio/g,W.useScreenCoordinates===!0?(this.gl.uniform1i(D.useScreenCoordinates,1),this.gl.uniform3f(D.screenPosition,(U.position.x*this.renderer.devicePixelRatio-z)/z,(P-U.position.y*this.renderer.devicePixelRatio)/P,Math.max(0,Math.min(1,U.position.z)))):(this.gl.uniform1i(D.useScreenCoordinates,0),this.gl.uniformMatrix4fv(D.modelViewMatrix,!1,U._modelViewMatrix.elements)),m.fog&&W.fog?Y=B:Y=0,G!==Y&&(this.gl.uniform1i(D.fogType,Y),G=Y),F=1/(W.scaleByViewport?g:1),j[0]*=F*U.scale.x,j[1]*=F*U.scale.y;let ne=(w=W==null?void 0:W.alignment)===null||w===void 0?void 0:w.x,se=(M=W==null?void 0:W.alignment)===null||M===void 0?void 0:M.y;W.screenOffset&&(ne=(ne||0)+2*W.screenOffset.x/H,se=(se||0)+2*W.screenOffset.y/Z),this.gl.uniform2f(D.uvScale,((f=W==null?void 0:W.uvScale)===null||f===void 0?void 0:f.x)||1,((i=W==null?void 0:W.uvScale)===null||i===void 0?void 0:i.y)||1),this.gl.uniform2f(D.uvOffset,((l=W==null?void 0:W.uvOffset)===null||l===void 0?void 0:l.x)||0,((p=W==null?void 0:W.uvOffset)===null||p===void 0?void 0:p.y)||0),this.gl.uniform2f(D.alignment,ne||0,se||0),this.gl.uniform1f(D.opacity,W.opacity),this.gl.uniform3f(D.color,((v=W==null?void 0:W.color)===null||v===void 0?void 0:v.r)||0,((b=W==null?void 0:W.color)===null||b===void 0?void 0:b.g)||0,((s=W==null?void 0:W.color)===null||s===void 0?void 0:s.b)||0),this.gl.uniform1f(D.rotation,U.rotation),this.gl.uniform2fv(D.scale,j),this.renderer.setDepthTest(W.depthTest),this.renderer.setDepthWrite(W.depthWrite),this.renderer.setTexture(W.map,0),this.gl.drawElements(this.gl.TRIANGLES,6,this.gl.UNSIGNED_SHORT,0)}this.gl.enable(this.gl.CULL_FACE)}createProgram(m,_){if(!this.gl)throw new Error("WebGL Rendering context not found");var A=this.gl.createProgram();if(!A)throw new Error("Error creating webgl program");var g=this.gl.createShader(this.gl.FRAGMENT_SHADER),T=this.gl.createShader(this.gl.VERTEX_SHADER);if(!g)throw new Error("Unable to create fragment shader SpritePlugin.createProgram");if(!T)throw new Error("Unable to create vertex shader SpritePlugin.createProgram");var O="precision "+_+` float;
`;if(this.gl.shaderSource(g,O+m.fragmentShader),this.gl.shaderSource(T,O+m.vertexShader),this.gl.compileShader(g),this.gl.compileShader(T),!this.gl.getShaderParameter(g,this.gl.COMPILE_STATUS)||!this.gl.getShaderParameter(T,this.gl.COMPILE_STATUS))throw new Error(`Error compiling shader: 
      ${this.gl.getShaderInfoLog(g)} 
      ${this.gl.getShaderInfoLog(T)}`);return this.gl.attachShader(A,g),this.gl.attachShader(A,T),this.gl.linkProgram(A),this.gl.getProgramParameter(A,this.gl.LINK_STATUS)||console.error("Could not initialize shader"),A}}function S(R,m){return R.z!==m.z?m.z-R.z:m.id-R.id}},"./src/WebGL/constants/Coloring.ts":(o,u,a)=>{a.r(u),a.d(u,{Coloring:()=>c});var c;(function(y){y[y.NoColors=0]="NoColors",y[y.FaceColors=1]="FaceColors",y[y.VertexColors=2]="VertexColors"})(c||(c={}))},"./src/WebGL/constants/Shading.ts":(o,u,a)=>{a.r(u),a.d(u,{Shading:()=>c});var c;(function(y){y[y.NoShading=0]="NoShading",y[y.FlatShading=1]="FlatShading",y[y.SmoothShading=2]="SmoothShading"})(c||(c={}))},"./src/WebGL/constants/Sides.ts":(o,u,a)=>{a.r(u),a.d(u,{BackSide:()=>y,DoubleSide:()=>S,FrontSide:()=>c});const c=0,y=1,S=2},"./src/WebGL/constants/SpriteAlignment.ts":(o,u,a)=>{a.r(u),a.d(u,{SpriteAlignment:()=>y});var c=a("./src/WebGL/math/index.ts");const y={topLeft:new c.Vector2(1,-1),topCenter:new c.Vector2(0,-1),topRight:new c.Vector2(-1,-1),centerLeft:new c.Vector2(1,0),center:new c.Vector2(0,0),centerRight:new c.Vector2(-1,0),bottomLeft:new c.Vector2(1,1),bottomCenter:new c.Vector2(0,1),bottomRight:new c.Vector2(-1,1)}},"./src/WebGL/constants/TextureConstants.ts":(o,u,a)=>{a.r(u),a.d(u,{ClampToEdgeWrapping:()=>c,FloatType:()=>_,LinearFilter:()=>y,LinearMipMapLinearFilter:()=>R,NearestFilter:()=>S,R32Format:()=>T,RFormat:()=>g,RGBAFormat:()=>A,UnsignedByteType:()=>m});const c=1001,y=1006,S=1007,R=1008,m=1009,_=1010,A=1021,g=1022,T=1023},"./src/WebGL/constants/TextureOperations.ts":(o,u,a)=>{a.r(u),a.d(u,{TextureOperations:()=>c});var c;(function(y){y[y.MultiplyOperation=0]="MultiplyOperation",y[y.MixOperation=1]="MixOperation",y[y.AddOperation=2]="AddOperation"})(c||(c={}))},"./src/WebGL/constants/index.ts":(o,u,a)=>{a.r(u),a.d(u,{BackSide:()=>y.BackSide,ClampToEdgeWrapping:()=>m.ClampToEdgeWrapping,Coloring:()=>c.Coloring,DoubleSide:()=>y.DoubleSide,FloatType:()=>m.FloatType,FrontSide:()=>y.FrontSide,LinearFilter:()=>m.LinearFilter,LinearMipMapLinearFilter:()=>m.LinearMipMapLinearFilter,NearestFilter:()=>m.NearestFilter,R32Format:()=>m.R32Format,RFormat:()=>m.RFormat,RGBAFormat:()=>m.RGBAFormat,Shading:()=>S.Shading,SpriteAlignment:()=>R.SpriteAlignment,TextureOperations:()=>_.TextureOperations,UnsignedByteType:()=>m.UnsignedByteType});var c=a("./src/WebGL/constants/Coloring.ts"),y=a("./src/WebGL/constants/Sides.ts"),S=a("./src/WebGL/constants/Shading.ts"),R=a("./src/WebGL/constants/SpriteAlignment.ts"),m=a("./src/WebGL/constants/TextureConstants.ts"),_=a("./src/WebGL/constants/TextureOperations.ts")},"./src/WebGL/core/EventDispatcher.ts":(o,u,a)=>{a.r(u),a.d(u,{EventDispatcher:()=>c});class c{constructor(){this.listeners={}}dispatchEvent(S){var R=this.listeners[S.type];if(R!==void 0){S.target=this;for(var m=0,_=R.length;m<_;m++)R[m].call(this,S)}}removeEventListener(S,R){if(!R)this.listeners[S]=[];else{var m=this.listeners[S].indexOf(R);m!==-1&&this.listeners[S].splice(m,1)}}addEventListener(S,R){this.listeners[S]===void 0&&(this.listeners[S]=[]),this.listeners[S].indexOf(R)===-1&&this.listeners[S].push(R)}}},"./src/WebGL/core/Geometry.ts":(o,u,a)=>{a.r(u),a.d(u,{Geometry:()=>A,GeometryGroup:()=>_,GeometryIDCount:()=>g});var c=a("./src/WebGL/materials/LineBasicMaterial.ts"),y=a("./src/WebGL/core/EventDispatcher.ts"),S=a("./src/WebGL/math/index.ts"),R=a("./src/colors.ts");const m=65535;class _{constructor(O=0){this.vertexArray=null,this.colorArray=null,this.normalArray=null,this.radiusArray=null,this.faceArray=null,this.lineArray=null,this.atomArray=Array(),this.vertices=0,this.faceidx=0,this.lineidx=0,this.__inittedArrays=!1,this.id=O}setColor(O){var w=this.vertexArray,M=this.colorArray;if(!w)throw new Error("vertex array not initialized");if(!M)throw new Error("color array not initialized");let f=R.CC.color(O);for(var i=0;i<w.length;i+=3)M[i]=f.r,M[i+1]=f.g,M[i+2]=f.b}setColors(O){var w=this.vertexArray,M=this.colorArray;if(!w)throw new Error("vertex array not initialized");if(!M)throw new Error("color array not initialized");if(w.length!=M.length){console.log("Cannot re-color geometry group due to mismatched lengths.");return}for(var f=0;f<w.length;f+=3){var i=O(w[f],w[f+1],w[f+2]);i instanceof R.Color||(i=R.CC.color(i)),M[f]=i.r,M[f+1]=i.g,M[f+2]=i.b}}getNumVertices(){return this.vertices}getVertices(){return this.vertexArray}getCentroid(){if(!this.vertexArray)throw new Error("vertex array not initialized");for(var O=new S.Vector3,w,M,f,i,l=0;l<this.vertices;++l)w=l*3,M=this.vertexArray[w],f=this.vertexArray[w+1],i=this.vertexArray[w+2],O.x+=M,O.y+=f,O.z+=i;return O.divideScalar(this.vertices),O}setNormals(){var O=this.faceArray,w=this.vertexArray,M=this.normalArray;if(!(!this.vertices||!this.faceidx)){if(!O)throw new Error("face array not initialized");if(!w)throw new Error("vertex array not initialized");if(!M)throw new Error("normal array not initialized");for(var f,i,l,p,v,b,s,h=0;h<O.length/3;++h)f=O[h*3]*3,i=O[h*3+1]*3,l=O[h*3+2]*3,p=new S.Vector3(w[f],w[f+1],w[f+2]),v=new S.Vector3(w[i],w[i+1],w[i+2]),b=new S.Vector3(w[l],w[l+1],w[l+2]),p.subVectors(p,v),b.subVectors(b,v),b.cross(p),s=b,s.normalize(),M[f]+=s.x,M[i]+=s.x,M[l]+=s.x,M[f+1]+=s.y,M[i+1]+=s.y,M[l+1]+=s.y,M[f+2]+=s.z,M[i+2]+=s.z,M[l+2]+=s.z}}setLineIndices(){if(this.faceidx&&!(this.lineArray&&this.lineArray.length==this.faceidx*2&&this.lineidx==this.faceidx*2)){var O=this.faceArray,w=this.lineArray=new Uint16Array(this.faceidx*2);if(this.lineidx=this.faceidx*2,!O)throw new Error("face array not initialized");for(var M=0;M<this.faceidx/3;++M){var f=M*3,i=f*2,l=O[f],p=O[f+1],v=O[f+2];w[i]=l,w[i+1]=p,w[i+2]=l,w[i+3]=v,w[i+4]=p,w[i+5]=v}}}vrml(O,w){var M,f,i,l,p,v,b,s,h,E,x,D,z,P,G,B,K,k,U="";if(U+=O+`Shape {
`+O+` appearance Appearance {
`+O+`  material Material {
`+O+"   diffuseColor "+((M=w==null?void 0:w.color)===null||M===void 0?void 0:M.r)+" "+((f=w==null?void 0:w.color)===null||f===void 0?void 0:f.g)+" "+((i=w==null?void 0:w.color)===null||i===void 0?void 0:i.b)+`
`,w.wireframe&&this.colorArray){let F=this.colorArray;U+=O+"    emissiveColor "+F[0]+" "+F[1]+" "+F[2]+`
`}w!=null&&w.transparent&&(U+=O+"   transparency "+(1-w.opacity)+`
`),U+=O+`  }
`,U+=O+` }
`;var W=O;if(O+=" ",w instanceof c.LineBasicMaterial||w.wireframe){U+=O+`geometry IndexedLineSet {
`+O+` colorPerVertex TRUE
`+O+` coord Coordinate {
`+O+`  point [
`;let F,Y,j;for(let H=0;H<this.vertices;++H){let Z=H*3;F=(l=this.vertexArray)===null||l===void 0?void 0:l[Z],Y=(p=this.vertexArray)===null||p===void 0?void 0:p[Z+1],j=(v=this.vertexArray)===null||v===void 0?void 0:v[Z+2],U+=O+"   "+F+" "+Y+" "+j+`,
`}if(U+=O+`  ]
`,U+=O+` }
`,this.colorArray&&!w.wireframe){U+=O+` color Color {
`+O+`  color [
`;for(let H=0;H<this.vertices;++H){let Z=H*3;F=this.colorArray[Z],Y=this.colorArray[Z+1],j=this.colorArray[Z+2],U+=O+"   "+F+" "+Y+" "+j+`,
`}U+=O+`  ]
`,U+=O+` }
`}if(U+=O+` coordIndex [
`,w.wireframe&&this.faceArray)for(let H=0;H<this.faceidx;H+=3)F=(b=this.faceArray)===null||b===void 0?void 0:b[H],Y=(s=this.faceArray)===null||s===void 0?void 0:s[H+1],j=(h=this.faceArray)===null||h===void 0?void 0:h[H+2],U+=O+"  "+F+", "+Y+", "+j+`, -1,
`;else for(let H=0;H<this.vertices-1;H+=2)U+=O+"  "+H+", "+(H+1)+`, -1,
`;U+=O+` ]
`,U+=O+`}
`}else{U+=O+`geometry IndexedFaceSet {
`+O+` colorPerVertex TRUE
`+O+` normalPerVertex TRUE
`+O+` solid FALSE
`,U+=O+` coord Coordinate {
`+O+`  point [
`;let F,Y,j;for(let H=0;H<this.vertices;++H){let Z=H*3;F=(E=this.vertexArray)===null||E===void 0?void 0:E[Z],Y=(x=this.vertexArray)===null||x===void 0?void 0:x[Z+1],j=(D=this.vertexArray)===null||D===void 0?void 0:D[Z+2],U+=O+"   "+F+" "+Y+" "+j+`,
`}U+=O+`  ]
`,U+=O+` }
`,U+=O+` normal Normal {
`+O+`  vector [
`;for(let H=0;H<this.vertices;++H){let Z=H*3;F=(z=this.normalArray)===null||z===void 0?void 0:z[Z],Y=(P=this.normalArray)===null||P===void 0?void 0:P[Z+1],j=(G=this.normalArray)===null||G===void 0?void 0:G[Z+2],U+=O+"   "+F+" "+Y+" "+j+`,
`}if(U+=O+`  ]
`,U+=O+` }
`,this.colorArray){U+=O+` color Color {
`+O+`  color [
`;for(let H=0;H<this.vertices;++H){let Z=H*3;F=this.colorArray[Z],Y=this.colorArray[Z+1],j=this.colorArray[Z+2],U+=O+"   "+F+" "+Y+" "+j+`,
`}U+=O+`  ]
`,U+=O+` }
`}U+=O+` coordIndex [
`;for(let H=0;H<this.faceidx;H+=3)F=(B=this.faceArray)===null||B===void 0?void 0:B[H],Y=(K=this.faceArray)===null||K===void 0?void 0:K[H+1],j=(k=this.faceArray)===null||k===void 0?void 0:k[H+2],U+=O+"  "+F+", "+Y+", "+j+`, -1,
`;U+=O+` ]
`,U+=O+`}
`}return U+=W+"}",U}truncateArrayBuffers(O=!0,w=!1){var M=this.vertexArray,f=this.colorArray,i=this.normalArray,l=this.faceArray,p=this.lineArray,v=this.radiusArray;this.vertexArray=(M==null?void 0:M.subarray(0,this.vertices*3))||null,this.colorArray=(f==null?void 0:f.subarray(0,this.vertices*3))||null,O?(this.normalArray=(i==null?void 0:i.subarray(0,this.vertices*3))||null,this.faceArray=(l==null?void 0:l.subarray(0,this.faceidx))||null,this.lineidx>0?this.lineArray=(p==null?void 0:p.subarray(0,this.lineidx))||null:this.lineArray=new Uint16Array(0)):(this.normalArray=new Float32Array(0),this.faceArray=new Uint16Array(0),this.lineArray=new Uint16Array(0)),v&&(this.radiusArray=v.subarray(0,this.vertices)),w&&(this.normalArray&&(this.normalArray=new Float32Array(this.normalArray)),this.faceArray&&(this.faceArray=new Uint16Array(this.faceArray)),this.lineArray&&(this.lineArray=new Uint16Array(this.lineArray)),this.vertexArray&&(this.vertexArray=new Float32Array(this.vertexArray)),this.colorArray&&(this.colorArray=new Float32Array(this.colorArray)),this.radiusArray&&(this.radiusArray=new Float32Array(this.radiusArray))),this.__inittedArrays=!0}}class A extends y.EventDispatcher{constructor(O=!1,w=!1,M=!1){super(),this.name="",this.hasTangents=!1,this.dynamic=!0,this.verticesNeedUpdate=!1,this.elementsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.buffersNeedUpdate=!1,this.imposter=!1,this.instanced=!1,this.geometryGroups=[],this.groups=0,this.id=g++,this.mesh=O,this.radii=w,this.offset=M}updateGeoGroup(O=0){var w,M=this.groups>0?this.geometryGroups[this.groups-1]:null;return(!M||M.vertices+O>(((w=M==null?void 0:M.vertexArray)===null||w===void 0?void 0:w.length)||0)/3)&&(M=this.addGeoGroup()),M}vrml(O,w){for(var M="",f=this.geometryGroups.length,i=0;i<f;i++){var l=this.geometryGroups[i];M+=l.vrml(O,w)+`,
`}return M}addGeoGroup(){var O=new _(this.geometryGroups.length);return this.geometryGroups.push(O),this.groups=this.geometryGroups.length,O.vertexArray=new Float32Array(m*3),O.colorArray=new Float32Array(m*3),this.mesh&&(O.normalArray=new Float32Array(m*3),O.faceArray=new Uint16Array(m*6),O.lineArray=new Uint16Array(m*6)),this.radii&&(O.radiusArray=new Float32Array(m)),O.useOffset=this.offset,O}setUpNormals(...O){for(var w=0;w<this.groups;w++){var M=this.geometryGroups[w];M.setNormals(...O)}}setColors(...O){for(var w=this.geometryGroups.length,M=0;M<w;M++){var f=this.geometryGroups[M];f.setColors(...O)}}setColor(...O){for(var w=this.geometryGroups.length,M=0;M<w;M++){var f=this.geometryGroups[M];f.setColor(...O)}}setUpWireframe(...O){for(var w=0;w<this.groups;w++){var M=this.geometryGroups[w];M.setLineIndices(...O)}}initTypedArrays(){for(var O=0;O<this.groups;O++){var w=this.geometryGroups[O];w.__inittedArrays!==!0&&w.truncateArrayBuffers(this.mesh,!1)}}dispose(){this.dispatchEvent({type:"dispose"})}get vertices(){for(var O=0,w=0;w<this.groups;w++)O+=this.geometryGroups[w].vertices;return O}}let g=0},"./src/WebGL/core/Object3D.ts":(o,u,a)=>{a.r(u),a.d(u,{Light:()=>_,Object3D:()=>R,Object3DIDCount:()=>S,Scene:()=>m});var c=a("./src/WebGL/math/index.ts"),y=a("./src/colors.ts");let S=0;class R{constructor(){this.id=S++,this.name="",this.children=[],this.position=new c.Vector3,this.rotation=new c.Vector3,this.matrix=new c.Matrix4,this.matrixWorld=new c.Matrix4,this.quaternion=new c.Quaternion,this.eulerOrder="XYZ",this.up=new c.Vector3(0,1,0),this.scale=new c.Vector3(1,1,1),this.matrixAutoUpdate=!0,this.matrixWorldNeedsUpdate=!0,this.rotationAutoUpdate=!0,this.useQuaternion=!1,this.visible=!0}lookAt(g){this.matrix.lookAt(g,this.position,this.up),this.rotationAutoUpdate&&(this.useQuaternion===!0?console.error("Unimplemented math operation."):this.rotation instanceof c.Vector3&&this.rotation.setEulerFromRotationMatrix(this.matrix,this.eulerOrder))}add(g){if(g===this){console.error("Can't add $3Dmol.Object3D to itself");return}g.parent=this,this.children.push(g);for(var T=this;T.parent!==void 0;)T=T.parent;T!==void 0&&T instanceof m&&T.__addObject(g)}remove(g){var T=this.children.indexOf(g);if(T!==-1){g.parent=void 0,this.children.splice(T,1);for(var O=this;O.parent!==void 0;)O=O.parent;O!==void 0&&O instanceof m&&O.__removeObject(g)}}vrml(g){g||(g=" ");var T=2*Math.atan2(this.quaternion.lengthxyz(),this.quaternion.w),O=0,w=0,M=0;if(T!=0){let l=Math.sin(T/2);O=this.quaternion.x/l,w=this.quaternion.y/l,M=this.quaternion.z/l}var f=g+`Transform {
`+g+" center "+this.position.x+" "+this.position.y+" "+this.position.z+`
`+g+" rotation "+O+" "+w+" "+M+" "+T+`
`+g+` children [
`;this.geometry&&(f+=this.geometry.vrml(g,this.material));for(var i=0;i<this.children.length;i++)f+=this.children[i].vrml(g+" ")+`,
`;return f+=` ]
`,f+="}",f}updateMatrix(){this.matrix.setPosition(this.position),this.useQuaternion===!1&&this.rotation instanceof c.Vector3?this.matrix.setRotationFromEuler(this.rotation,this.eulerOrder):this.matrix.setRotationFromQuaternion(this.quaternion),(this.scale.x!==1||this.scale.y!==1||this.scale.z!==1)&&this.matrix.scale(this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(g){this.matrixAutoUpdate===!0&&this.updateMatrix(),(this.matrixWorldNeedsUpdate===!0||g===!0)&&(this.parent===void 0?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1;for(var T=0;T<this.children.length;T++)this.children[T].updateMatrixWorld(!0)}clone(g){g===void 0&&(g=new R),g.name=this.name,g.up.copy(this.up),g.position.copy(this.position),g.rotation instanceof c.Vector3&&this.rotation instanceof c.Vector3?g.rotation.copy(this.rotation):g.rotation=this.rotation,g.eulerOrder=this.eulerOrder,g.scale.copy(this.scale),g.rotationAutoUpdate=this.rotationAutoUpdate,g.matrix.copy(this.matrix),g.matrixWorld.copy(this.matrixWorld),g.quaternion.copy(this.quaternion),g.matrixAutoUpdate=this.matrixAutoUpdate,g.matrixWorldNeedsUpdate=this.matrixWorldNeedsUpdate,g.useQuaternion=this.useQuaternion,g.visible=this.visible;for(var T=0;T<this.children.length;T++){var O=this.children[T];g.add(O.clone())}return g}setVisible(g){this.visible=g;for(var T=0;T<this.children.length;T++){var O=this.children[T];O.setVisible(g)}}}class m extends R{constructor(){super(...arguments),this.fog=null,this.overrideMaterial=null,this.matrixAutoUpdate=!1,this.__objects=[],this.__lights=[],this.__objectsAdded=[],this.__objectsRemoved=[]}__addObject(g){if(g instanceof _)this.__lights.indexOf(g)===-1&&this.__lights.push(g),g.target&&g.target.parent===void 0&&this.add(g.target);else if(this.__objects.indexOf(g)===-1){this.__objects.push(g),this.__objectsAdded.push(g);var T=this.__objectsRemoved.indexOf(g);T!==-1&&this.__objectsRemoved.splice(T,1)}for(var O=0;O<g.children.length;O++)this.__addObject(g.children[O])}__removeObject(g){var T;if(g instanceof _)T=this.__lights.indexOf(g),T!==-1&&this.__lights.splice(T,1);else if(T=this.__objects.indexOf(g),T!==-1){this.__objects.splice(T,1),this.__objectsRemoved.push(g);var O=this.__objectsAdded.indexOf(g);O!==-1&&this.__objectsAdded.splice(T,1)}for(var w=0;w<g.children.length;w++)this.__removeObject(g.children[w])}}class _ extends R{constructor(g,T=1){super(),this.position=new c.Vector3(0,1,0),this.target=new R,this.castShadow=!1,this.onlyShadow=!1,this.color=new y.Color(g),this.intensity=T}}},"./src/WebGL/core/Projector.ts":(o,u,a)=>{a.r(u),a.d(u,{Projector:()=>S});var c=a("./src/WebGL/math/index.ts");const y=new c.Matrix4;class S{static unprojectVector(m,_){return _.projectionMatrixInverse.getInverse(_.projectionMatrix),y.multiplyMatrices(_.matrixWorld,_.projectionMatrixInverse),m.applyProjection(y)}static projectVector(m,_){return _.matrixWorldInverse.getInverse(_.matrixWorld),y.multiplyMatrices(_.projectionMatrix,_.matrixWorldInverse),m.applyProjection(y)}projectVector(m,_){return S.projectVector(m,_)}unprojectVector(m,_){return S.unprojectVector(m,_)}}},"./src/WebGL/core/Raycaster.ts":(o,u,a)=>{a.r(u),a.d(u,{Raycaster:()=>m,intersectObject:()=>l});var c=a("./src/WebGL/math/index.ts"),y=a("./src/WebGL/shapes/index.ts");const S=(p,v)=>p.distance-v.distance,R=new c.Matrix4;class m{constructor(v,b,s,h){this.precision=1e-4,this.linePrecision=.2,this.ray=new c.Ray(v,b),this.ray.direction.lengthSq()>0&&this.ray.direction.normalize(),this.near=h||0,this.far=s||1/0}set(v,b){this.ray.set(v,b)}setFromCamera(v,b){b.ortho?(this.ray.origin.set(v.x,v.y,(b.near+b.far)/(b.near-b.far)).unproject(b),this.ray.direction.set(0,0,-1).transformDirection(b.matrixWorld)):(this.ray.origin.setFromMatrixPosition(b.matrixWorld),this.ray.direction.set(v.x,v.y,v.z),b.projectionMatrixInverse.getInverse(b.projectionMatrix),R.multiplyMatrices(b.matrixWorld,b.projectionMatrixInverse),this.ray.direction.applyProjection(R),this.ray.direction.sub(this.ray.origin).normalize())}intersectObjects(v,b){for(var s=[],h=0,E=b.length;h<E;h++)l(v,b[h],this,s);return s.sort(S),s}}const _=p=>Math.min(Math.max(p,-1),1);var A=new y.Sphere,g=new y.Cylinder,T=new y.Triangle,O=new c.Vector3,w=new c.Vector3,M=new c.Vector3,f=new c.Vector3,i=new c.Vector3;function l(p,v,b,s){if(i.getPositionFromMatrix(p.matrixWorld),v.intersectionShape===void 0)return s;var h=v.intersectionShape,E=b.linePrecision;E*=p.matrixWorld.getMaxScaleOnAxis();var x=E*E;if(v.boundingSphere!==void 0&&v.boundingSphere instanceof y.Sphere&&(A.copy(v.boundingSphere),A.applyMatrix4(p.matrixWorld),!b.ray.isIntersectionSphere(A)))return s;var D,z,P,G,B,K,k,U,W,F,Y,j,H,Z;for(D=0,z=h.triangle.length;D<z;D++)if(h.triangle[D]instanceof y.Triangle){if(T.copy(h.triangle[D]),T.applyMatrix4(p.matrixWorld),P=T.getNormal(),G=b.ray.direction.dot(P),G>=0||(O.subVectors(T.a,b.ray.origin),k=P.dot(O)/G,k<0))continue;w.copy(b.ray.direction).multiplyScalar(k).add(b.ray.origin),w.sub(T.a),M.copy(T.b).sub(T.a),f.copy(T.c).sub(T.a);var ne=M.dot(f),se=M.lengthSq(),me=f.lengthSq();if(j=(se*w.dot(f)-ne*w.dot(M))/(se*me-ne*ne),j<0||j>1||(Y=(w.dot(M)-j*ne)/se,Y<0||Y>1||Y+j>1))continue;s.push({clickable:v,distance:k})}for(D=0,z=h.cylinder.length;D<z;D++)if(h.cylinder[D]instanceof y.Cylinder){if(g.copy(h.cylinder[D]),g.applyMatrix4(p.matrixWorld),O.subVectors(g.c1,b.ray.origin),B=O.dot(g.direction),K=O.dot(b.ray.direction),G=_(b.ray.direction.dot(g.direction)),W=1-G*G,W===0)continue;H=(G*K-B)/W,Z=(K-G*B)/W,w.copy(g.direction).multiplyScalar(H).add(g.c1),M.copy(b.ray.direction).multiplyScalar(Z).add(b.ray.origin),U=f.subVectors(w,M).lengthSq();var de=g.radius*g.radius;if(U<=de){if(F=(G*B-K)*(G*B-K)-W*(O.lengthSq()-B*B-de),F<=0?j=k=Math.sqrt(U):j=k=(K-G*B-Math.sqrt(F))/W,Y=G*j-B,Y<0||Y*Y>g.lengthSq()||j<0)continue;s.push({clickable:v,distance:k})}}for(D=0,z=h.line.length;D<z;D+=2){w.copy(h.line[D]),w.applyMatrix4(p.matrixWorld),M.copy(h.line[D+1]),M.applyMatrix4(p.matrixWorld),f.subVectors(M,w);var ue=f.lengthSq();f.normalize(),O.subVectors(w,b.ray.origin);var ce=O.dot(f);K=O.dot(b.ray.direction),G=_(b.ray.direction.dot(f)),W=1-G*G,W!==0&&(H=(G*K-ce)/W,Z=(K-G*ce)/W,w.add(f.multiplyScalar(H)),M.copy(b.ray.direction).multiplyScalar(Z).add(b.ray.origin),U=f.subVectors(M,w).lengthSq(),U<x&&H*H<ue&&s.push({clickable:v,distance:Z}))}for(D=0,z=h.sphere.length;D<z;D++)if(h.sphere[D]instanceof y.Sphere&&(A.copy(h.sphere[D]),A.applyMatrix4(p.matrixWorld),b.ray.isIntersectionSphere(A))){w.subVectors(A.center,b.ray.origin);var pe=w.dot(b.ray.direction);if(F=pe*pe-(w.lengthSq()-A.radius*A.radius),pe<0)return s;F<=0?k=pe:k=pe-Math.sqrt(F),s.push({clickable:v,distance:k})}return s}},"./src/WebGL/core/Texture.ts":(o,u,a)=>{a.r(u),a.d(u,{Texture:()=>m,TextureIdCount:()=>_});var c=a("./src/WebGL/constants/TextureConstants.ts"),y=a("./src/WebGL/math/index.ts"),S=a("./src/WebGL/core/EventDispatcher.ts"),R=a("./src/WebGL/core/UVMapping.ts");class m extends S.EventDispatcher{constructor(g,T){super(),this.id=_++,this.name="",this.image=g,this.mapping=new R.UVMapping,this.wrapS=c.ClampToEdgeWrapping,this.wrapT=c.ClampToEdgeWrapping,this.anisotropy=1,T?(this.format=c.RFormat,this.type=c.FloatType,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.magFilter=c.NearestFilter,this.minFilter=c.NearestFilter):(this.format=c.RGBAFormat,this.type=c.UnsignedByteType,this.offset=new y.Vector2(0,0),this.repeat=new y.Vector2(1,1),this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.magFilter=c.LinearFilter,this.minFilter=c.LinearMipMapLinearFilter),this.needsUpdate=!1,this.onUpdate=null}clone(g=new m){return g.image=this.image,g.mapping=this.mapping,g.wrapS=this.wrapS,g.wrapT=this.wrapT,g.magFilter=this.magFilter,g.minFilter=this.minFilter,g.anisotropy=this.anisotropy,g.format=this.format,g.type=this.type,g.offset.copy(this.offset),g.repeat.copy(this.repeat),g.premultiplyAlpha=this.premultiplyAlpha,g.flipY=this.flipY,g.unpackAlignment=this.unpackAlignment,g}dispose(){this.dispatchEvent({type:"dispose"})}}let _=0},"./src/WebGL/core/UVMapping.ts":(o,u,a)=>{a.r(u),a.d(u,{UVMapping:()=>c});class c{}},"./src/WebGL/core/index.ts":(o,u,a)=>{a.r(u),a.d(u,{EventDispatcher:()=>c.EventDispatcher,Geometry:()=>y.Geometry,GeometryGroup:()=>y.GeometryGroup,GeometryIDCount:()=>y.GeometryIDCount,Light:()=>S.Light,Object3D:()=>S.Object3D,Object3DIDCount:()=>S.Object3DIDCount,Projector:()=>R.Projector,Raycaster:()=>m.Raycaster,Scene:()=>S.Scene,Texture:()=>_.Texture,TextureIdCount:()=>_.TextureIdCount,UVMapping:()=>A.UVMapping,intersectObject:()=>m.intersectObject});var c=a("./src/WebGL/core/EventDispatcher.ts"),y=a("./src/WebGL/core/Geometry.ts"),S=a("./src/WebGL/core/Object3D.ts"),R=a("./src/WebGL/core/Projector.ts"),m=a("./src/WebGL/core/Raycaster.ts"),_=a("./src/WebGL/core/Texture.ts"),A=a("./src/WebGL/core/UVMapping.ts")},"./src/WebGL/index.ts":(o,u,a)=>{a.r(u),a.d(u,{BackSide:()=>c.BackSide,Camera:()=>g.Camera,ClampToEdgeWrapping:()=>c.ClampToEdgeWrapping,Coloring:()=>c.Coloring,Cylinder:()=>A.Cylinder,DoubleSide:()=>c.DoubleSide,EventDispatcher:()=>y.EventDispatcher,FloatType:()=>c.FloatType,Fog:()=>T.Fog,FrontSide:()=>c.FrontSide,Geometry:()=>y.Geometry,GeometryGroup:()=>y.GeometryGroup,GeometryIDCount:()=>y.GeometryIDCount,ImposterMaterial:()=>S.ImposterMaterial,InstancedMaterial:()=>S.InstancedMaterial,Light:()=>y.Light,Line:()=>m.Line,LineBasicMaterial:()=>S.LineBasicMaterial,LineStyle:()=>m.LineStyle,LinearFilter:()=>c.LinearFilter,LinearMipMapLinearFilter:()=>c.LinearMipMapLinearFilter,Material:()=>S.Material,MaterialIdCount:()=>S.MaterialIdCount,Matrix3:()=>R.Matrix3,Matrix4:()=>R.Matrix4,Mesh:()=>m.Mesh,MeshDoubleLambertMaterial:()=>S.MeshDoubleLambertMaterial,MeshLambertMaterial:()=>S.MeshLambertMaterial,MeshOutlineMaterial:()=>S.MeshOutlineMaterial,NearestFilter:()=>c.NearestFilter,Object3D:()=>y.Object3D,Object3DIDCount:()=>y.Object3DIDCount,Projector:()=>y.Projector,Quaternion:()=>R.Quaternion,R32Format:()=>c.R32Format,RFormat:()=>c.RFormat,RGBAFormat:()=>c.RGBAFormat,Ray:()=>R.Ray,Raycaster:()=>y.Raycaster,Renderer:()=>O.Renderer,Scene:()=>y.Scene,ShaderLib:()=>_.ShaderLib,ShaderUtils:()=>_.ShaderUtils,Shading:()=>c.Shading,Sphere:()=>A.Sphere,SphereImposterMaterial:()=>S.SphereImposterMaterial,SphereImposterOutlineMaterial:()=>S.SphereImposterOutlineMaterial,Sprite:()=>m.Sprite,SpriteAlignment:()=>c.SpriteAlignment,SpriteMaterial:()=>S.SpriteMaterial,SpritePlugin:()=>w.SpritePlugin,StickImposterMaterial:()=>S.StickImposterMaterial,StickImposterOutlineMaterial:()=>S.StickImposterOutlineMaterial,Texture:()=>y.Texture,TextureIdCount:()=>y.TextureIdCount,TextureOperations:()=>c.TextureOperations,Triangle:()=>A.Triangle,UVMapping:()=>y.UVMapping,UnsignedByteType:()=>c.UnsignedByteType,Vector2:()=>R.Vector2,Vector3:()=>R.Vector3,VolumetricMaterial:()=>S.VolumetricMaterial,basic:()=>_.basic,clamp:()=>R.clamp,clone:()=>_.clone,conversionMatrix3:()=>R.conversionMatrix3,degToRad:()=>R.degToRad,instanced:()=>_.instanced,intersectObject:()=>y.intersectObject,lambert:()=>_.lambert,lambertdouble:()=>_.lambertdouble,outline:()=>_.outline,screen:()=>_.screen,screenaa:()=>_.screenaa,sphereimposter:()=>_.sphereimposter,sphereimposteroutline:()=>_.sphereimposteroutline,sprite:()=>_.sprite,stickimposter:()=>_.stickimposter,stickimposteroutline:()=>_.stickimposteroutline,volumetric:()=>_.volumetric});var c=a("./src/WebGL/constants/index.ts"),y=a("./src/WebGL/core/index.ts"),S=a("./src/WebGL/materials/index.ts"),R=a("./src/WebGL/math/index.ts"),m=a("./src/WebGL/objects/index.ts"),_=a("./src/WebGL/shaders/index.ts"),A=a("./src/WebGL/shapes/index.ts"),g=a("./src/WebGL/Camera.ts"),T=a("./src/WebGL/Fog.ts"),O=a("./src/WebGL/Renderer.ts"),w=a("./src/WebGL/SpritePlugin.ts")},"./src/WebGL/materials/ImposterMaterial.ts":(o,u,a)=>{a.r(u),a.d(u,{ImposterMaterial:()=>_});var c=a("./src/WebGL/constants/Coloring.ts"),y=a("./src/WebGL/constants/Shading.ts"),S=a("./src/colors.ts"),R=a("./src/WebGL/math/index.ts"),m=a("./src/WebGL/materials/Material.ts");class _ extends m.Material{constructor(g){super(),this.color=new S.Color(16777215),this.ambient=new S.Color(1048575),this.emissive=new S.Color(0),this.imposter=!0,this.wrapAround=!1,this.wrapRGB=new R.Vector3(1,1,1),this.map=void 0,this.lightMap=null,this.specularMap=null,this.envMap=null,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.shading=y.Shading.SmoothShading,this.shaderID=null,this.vertexColors=c.Coloring.NoColors,this.skinning=!1,this.setValues(g)}clone(g=new _){return super.clone.call(this,g),g.color.copy(this.color),g.ambient.copy(this.ambient),g.emissive.copy(this.emissive),g.wrapAround=this.wrapAround,g.wrapRGB.copy(this.wrapRGB),g.map=this.map,g.lightMap=this.lightMap,g.specularMap=this.specularMap,g.envMap=this.envMap,g.combine=this.combine,g.reflectivity=this.reflectivity,g.refractionRatio=this.refractionRatio,g.fog=this.fog,g.shading=this.shading,g.shaderID=this.shaderID,g.vertexColors=this.vertexColors,g.skinning=this.skinning,g.morphTargets=this.morphTargets,g.morphNormals=this.morphNormals,g}}},"./src/WebGL/materials/InstancedMaterial.ts":(o,u,a)=>{a.r(u),a.d(u,{InstancedMaterial:()=>_});var c=a("./src/WebGL/constants/Coloring.ts"),y=a("./src/WebGL/constants/Shading.ts"),S=a("./src/colors.ts"),R=a("./src/WebGL/math/index.ts"),m=a("./src/WebGL/materials/Material.ts");class _ extends m.Material{constructor(g){super(),this.color=new S.Color(16777215),this.ambient=new S.Color(1048575),this.emissive=new S.Color(0),this.wrapAround=!1,this.wrapRGB=new R.Vector3(1,1,1),this.map=void 0,this.lightMap=null,this.specularMap=null,this.envMap=null,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.shading=y.Shading.SmoothShading,this.shaderID="instanced",this.vertexColors=c.Coloring.NoColors,this.skinning=!1,this.sphere=null,this.setValues(g)}clone(g=new _){return super.clone.call(this,g),g.color.copy(this.color),g.ambient.copy(this.ambient),g.emissive.copy(this.emissive),g.wrapAround=this.wrapAround,g.wrapRGB.copy(this.wrapRGB),g.map=this.map,g.lightMap=this.lightMap,g.specularMap=this.specularMap,g.envMap=this.envMap,g.combine=this.combine,g.reflectivity=this.reflectivity,g.refractionRatio=this.refractionRatio,g.fog=this.fog,g.shading=this.shading,g.shaderID=this.shaderID,g.vertexColors=this.vertexColors,g.skinning=this.skinning,g.morphTargets=this.morphTargets,g.morphNormals=this.morphNormals,g.sphere=this.sphere,g}}},"./src/WebGL/materials/LineBasicMaterial.ts":(o,u,a)=>{a.r(u),a.d(u,{LineBasicMaterial:()=>S});var c=a("./src/colors.ts"),y=a("./src/WebGL/materials/Material.ts");class S extends y.Material{constructor(m){super(),this.color=new c.Color(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.vertexColors=!1,this.fog=!0,this.shaderID="basic",this.setValues(m)}clone(m=new S){return super.clone.call(this,m),m.color.copy(this.color),m}}},"./src/WebGL/materials/Material.ts":(o,u,a)=>{a.r(u),a.d(u,{Material:()=>m,MaterialIdCount:()=>_});var c=a("./src/WebGL/constants/Sides.ts"),y=a("./src/WebGL/core/index.ts"),S=a("./src/WebGL/math/index.ts"),R=a("./src/colors.ts");class m extends y.EventDispatcher{constructor(){super(...arguments),this.id=_++,this.name="",this.side=c.FrontSide,this.opacity=1,this.transparent=!1,this.depthTest=!0,this.depthWrite=!0,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.alphaTest=0,this.visible=!0,this.needsUpdate=!0,this.outline=!1,this.wireframe=!1,this.shaded=!1}setValues(g={}){if(g!==void 0)for(var T in g){var O=g[T];if(O===void 0){console.warn("$3Dmol.Material: '"+T+"' parameter is undefined.");continue}if(T in this){var w=this[T];w instanceof R.Color&&O instanceof R.Color?w.copy(O):w instanceof R.Color?w.set(O):w instanceof S.Vector3&&O instanceof S.Vector3?w.copy(O):this[T]=O}}}clone(g=new m){return g.name=this.name,g.side=this.side,g.opacity=this.opacity,g.transparent=this.transparent,g.depthTest=this.depthTest,g.depthWrite=this.depthWrite,g.polygonOffset=this.polygonOffset,g.polygonOffsetFactor=this.polygonOffsetFactor,g.polygonOffsetUnits=this.polygonOffsetUnits,g.alphaTest=this.alphaTest,g.overdraw=this.overdraw,g.visible=this.visible,g}makeShaded(g){this.shaded=!0,this.uniforms&&(this.uniforms.shading={type:"i",value:g},this.uniforms.vWidth={type:"f",value:1},this.uniforms.vHeight={type:"f",value:1})}dispose(){this.dispatchEvent({type:"dispose"})}}let _=0},"./src/WebGL/materials/MeshDoubleLambertMaterial.ts":(o,u,a)=>{a.r(u),a.d(u,{MeshDoubleLambertMaterial:()=>S});var c=a("./src/WebGL/constants/Sides.ts"),y=a("./src/WebGL/materials/MeshLambertMaterial.ts");class S extends y.MeshLambertMaterial{constructor(m){super(m),this.shaderID="lambertdouble",this.side=c.DoubleSide,this.outline=!1}clone(m=new S){return super.clone.call(this,m),m}}},"./src/WebGL/materials/MeshLambertMaterial.ts":(o,u,a)=>{a.r(u),a.d(u,{MeshLambertMaterial:()=>_});var c=a("./src/WebGL/constants/Coloring.ts"),y=a("./src/WebGL/constants/Shading.ts"),S=a("./src/WebGL/materials/Material.ts"),R=a("./src/colors.ts"),m=a("./src/WebGL/math/index.ts");class _ extends S.Material{constructor(g){super(),this.color=new R.Color(16777215),this.ambient=new R.Color(1048575),this.emissive=new R.Color(0),this.wrapAround=!1,this.wrapRGB=new m.Vector3(1,1,1),this.map=void 0,this.lightMap=null,this.specularMap=null,this.envMap=null,this.reflectivity=1,this.refractionRatio=.98,this.fog=!0,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.shading=y.Shading.SmoothShading,this.shaderID="lambert",this.vertexColors=c.Coloring.NoColors,this.skinning=!1,this.setValues(g)}clone(g=new _){return super.clone.call(this,g),g.color.copy(this.color),g.ambient.copy(this.ambient),g.emissive.copy(this.emissive),g.wrapAround=this.wrapAround,g.wrapRGB.copy(this.wrapRGB),g.map=this.map,g.lightMap=this.lightMap,g.specularMap=this.specularMap,g.envMap=this.envMap,g.combine=this.combine,g.reflectivity=this.reflectivity,g.refractionRatio=this.refractionRatio,g.fog=this.fog,g.shading=this.shading,g.shaderID=this.shaderID,g.vertexColors=this.vertexColors,g.skinning=this.skinning,g.morphTargets=this.morphTargets,g.morphNormals=this.morphNormals,g}}},"./src/WebGL/materials/MeshOutlineMaterial.ts":(o,u,a)=>{a.r(u),a.d(u,{MeshOutlineMaterial:()=>S});var c=a("./src/colors.ts"),y=a("./src/WebGL/materials/Material.ts");class S extends y.Material{constructor(m){super(),m=m||{},this.fog=!0,this.shaderID="outline",this.wireframe=!1,this.outlineColor=c.CC.color(m.color||new c.Color(0,0,0)),this.outlineWidth=m.width||.1,this.outlinePushback=m.pushback||1,this.outlineMaxPixels=m.maxpixels||0}clone(m=new S){return super.clone.call(this,m),m.fog=this.fog,m.shaderID=this.shaderID,m.wireframe=this.wireframe,m.outlineColor=this.outlineColor,m.outlineWidth=this.outlineWidth,m.outlinePushback=this.outlinePushback,m.outlineMaxPixels=this.outlineMaxPixels,m}}},"./src/WebGL/materials/SphereImposterMaterial.ts":(o,u,a)=>{a.r(u),a.d(u,{SphereImposterMaterial:()=>y});var c=a("./src/WebGL/materials/ImposterMaterial.ts");class y extends c.ImposterMaterial{constructor(R){super(R),this.shaderID="sphereimposter",this.setValues(R)}clone(R=new y){return super.clone.call(this,R),R}}},"./src/WebGL/materials/SphereImposterOutlineMaterial.ts":(o,u,a)=>{a.r(u),a.d(u,{SphereImposterOutlineMaterial:()=>S});var c=a("./src/colors.ts"),y=a("./src/WebGL/materials/ImposterMaterial.ts");class S extends y.ImposterMaterial{constructor(m){super(m),m=m||{},this.shaderID="sphereimposteroutline",this.outlineColor=c.CC.color(m.color||new c.Color(0,0,0)),this.outlineWidth=m.width||.1,this.outlinePushback=m.pushback||1,this.outlineMaxPixels=m.maxpixels||0,this.setValues(m)}clone(m=new S){return super.clone.call(this,m),m.outlineColor=this.outlineColor,m.outlineWidth=this.outlineWidth,m.outlinePushback=this.outlinePushback,m.outlineMaxPixels=this.outlineMaxPixels,m}}},"./src/WebGL/materials/SpriteMaterial.ts":(o,u,a)=>{a.r(u),a.d(u,{SpriteMaterial:()=>_});var c=a("./src/WebGL/constants/SpriteAlignment.ts"),y=a("./src/WebGL/core/Texture.ts"),S=a("./src/colors.ts"),R=a("./src/WebGL/math/index.ts"),m=a("./src/WebGL/materials/Material.ts");class _ extends m.Material{constructor(g){super(),this.color=new S.Color(16777215),this.map=new y.Texture,this.useScreenCoordinates=!0,this.fog=!1,this.uvOffset=new R.Vector2(0,0),this.uvScale=new R.Vector2(1,1),this.depthTest=!this.useScreenCoordinates,this.sizeAttenuation=!this.useScreenCoordinates,this.screenOffset=this.screenOffset,this.scaleByViewPort=!this.sizeAttenuation,this.alignment=c.SpriteAlignment.center.clone(),this.setValues(g),g=g||{},g.depthTest===void 0&&(this.depthTest=!this.useScreenCoordinates),g.sizeAttenuation===void 0&&(this.sizeAttenuation=!this.useScreenCoordinates),g.scaleByViewPort===void 0&&(this.scaleByViewPort=!this.sizeAttenuation)}clone(g=new _){return super.clone.call(this,g),g.color.copy(this.color),g.map=this.map,g.useScreenCoordinates=this.useScreenCoordinates,g.screenOffset=this.screenOffset,g.sizeAttenuation=this.sizeAttenuation,g.scaleByViewport=this.scaleByViewPort,g.alignment.copy(this.alignment),g.uvOffset.copy(this.uvOffset),g}}},"./src/WebGL/materials/StickImposterMaterial.ts":(o,u,a)=>{a.r(u),a.d(u,{StickImposterMaterial:()=>y});var c=a("./src/WebGL/materials/ImposterMaterial.ts");class y extends c.ImposterMaterial{constructor(R){super(R),this.shaderID="stickimposter",this.setValues(R)}clone(R=new y){return super.clone.call(this,R),R}}},"./src/WebGL/materials/StickImposterOutlineMaterial.ts":(o,u,a)=>{a.r(u),a.d(u,{StickImposterOutlineMaterial:()=>S});var c=a("./src/colors.ts"),y=a("./src/WebGL/materials/ImposterMaterial.ts");class S extends y.ImposterMaterial{constructor(m={}){super(m),this.shaderID="stickimposteroutline",this.outlineColor=new c.Color(0,0,0),this.outlineWidth=.1,this.outlinePushback=1,this.outlineMaxPixels=0,m.color&&(this.outlineColor=c.CC.color(m.color)),m.width&&(this.outlineWidth=m.width),m.pushback&&(this.outlinePushback=m.pushback),m.maxpixels&&(this.outlineMaxPixels=m.maxpixels),this.setValues(m)}clone(m=new S){return super.clone.call(this,m),m.outlineColor=this.outlineColor,m.outlineWidth=this.outlineWidth,m.outlinePushback=this.outlinePushback,m.outlineMaxPixels=this.outlineMaxPixels,m}}},"./src/WebGL/materials/VolumetricMaterial.ts":(o,u,a)=>{a.r(u),a.d(u,{VolumetricMaterial:()=>R});var c=a("./src/WebGL/constants/Sides.ts"),y=a("./src/colors.ts"),S=a("./src/WebGL/materials/Material.ts");class R extends S.Material{constructor(_){super(),this.transparent=!1,this.volumetric=!0,this.color=new y.Color(16777215),this.transferfn=null,this.map=void 0,this.extent=[],this.maxdepth=100,this.unit=0,this.texmatrix=null,this.transfermin=-1,this.transfermax=1,this.subsamples=5,this.shaderID="volumetric",this.side=c.FrontSide,this.setValues(_)}clone(_=new R){return super.clone.call(this,_),_.transparent=this.transparent,_.volumetric=this.volumetric,_.color=this.color,_.transferfn=this.transferfn,_.map=this.map,_.extent=this.extent,_.maxdepth=this.maxdepth,_.unit=this.unit,_.texmatrix=this.texmatrix,_.transfermin=this.transfermin,_.transfermax=this.transfermax,_.subsamples=this.subsamples,_.shaderID=this.shaderID,_.side=this.side,_}}},"./src/WebGL/materials/index.ts":(o,u,a)=>{a.r(u),a.d(u,{ImposterMaterial:()=>c.ImposterMaterial,InstancedMaterial:()=>y.InstancedMaterial,LineBasicMaterial:()=>S.LineBasicMaterial,Material:()=>R.Material,MaterialIdCount:()=>R.MaterialIdCount,MeshDoubleLambertMaterial:()=>m.MeshDoubleLambertMaterial,MeshLambertMaterial:()=>_.MeshLambertMaterial,MeshOutlineMaterial:()=>A.MeshOutlineMaterial,SphereImposterMaterial:()=>g.SphereImposterMaterial,SphereImposterOutlineMaterial:()=>T.SphereImposterOutlineMaterial,SpriteMaterial:()=>O.SpriteMaterial,StickImposterMaterial:()=>w.StickImposterMaterial,StickImposterOutlineMaterial:()=>M.StickImposterOutlineMaterial,VolumetricMaterial:()=>f.VolumetricMaterial});var c=a("./src/WebGL/materials/ImposterMaterial.ts"),y=a("./src/WebGL/materials/InstancedMaterial.ts"),S=a("./src/WebGL/materials/LineBasicMaterial.ts"),R=a("./src/WebGL/materials/Material.ts"),m=a("./src/WebGL/materials/MeshDoubleLambertMaterial.ts"),_=a("./src/WebGL/materials/MeshLambertMaterial.ts"),A=a("./src/WebGL/materials/MeshOutlineMaterial.ts"),g=a("./src/WebGL/materials/SphereImposterMaterial.ts"),T=a("./src/WebGL/materials/SphereImposterOutlineMaterial.ts"),O=a("./src/WebGL/materials/SpriteMaterial.ts"),w=a("./src/WebGL/materials/StickImposterMaterial.ts"),M=a("./src/WebGL/materials/StickImposterOutlineMaterial.ts"),f=a("./src/WebGL/materials/VolumetricMaterial.ts")},"./src/WebGL/math/Quaternion.ts":(o,u,a)=>{a.r(u),a.d(u,{Quaternion:()=>c});class c{constructor(S,R,m,_){this.x=S||0,this.y=R||0,this.z=m||0,this.w=_!==void 0?_:1}set(S,R,m,_){return this.x=S,this.y=R,this.z=m,this.w=_,this}copy(S){return this.x=S.x,this.y=S.y,this.z=S.z,this.w=S.w,this}conjugate(){return this.x*=-1,this.y*=-1,this.z*=-1,this}inverse(){return this.conjugate().normalize()}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}lengthxyz(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}normalize(){let S=this.length();return S===0?(this.x=0,this.y=0,this.z=0,this.w=1):(S=1/S,this.x*=S,this.y*=S,this.z*=S,this.w*=S),this}multiply(S){return this.multiplyQuaternions(this,S)}multiplyScalar(S){return this.x*=S,this.y*=S,this.z*=S,this.w*=S,this}multiplyQuaternions(S,R){const m=S.x,_=S.y,A=S.z,g=S.w,T=R.x,O=R.y,w=R.z,M=R.w;return this.x=m*M+g*T+_*w-A*O,this.y=_*M+g*O+A*T-m*w,this.z=A*M+g*w+m*O-_*T,this.w=g*M-m*T-_*O-A*w,this}sub(S){return this.x-=S.x,this.y-=S.y,this.z-=S.z,this.w-=S.w,this}clone(){return new c(this.x,this.y,this.z,this.w)}setFromEuler(S){const R=Math.cos(S.x/2),m=Math.cos(S.y/2),_=Math.cos(S.z/2),A=Math.sin(S.x/2),g=Math.sin(S.y/2),T=Math.sin(S.z/2);return this.x=A*m*_+R*g*T,this.y=R*g*_-A*m*T,this.z=R*m*T+A*g*_,this.w=R*m*_-A*g*T,this}}},"./src/WebGL/math/Vector2.ts":(o,u,a)=>{a.r(u),a.d(u,{Vector2:()=>c});class c{constructor(S,R){this.x=S||0,this.y=R||0}set(S,R){return this.x=S,this.y=R,this}subVectors(S,R){return this.x=S.x-R.x,this.y=S.y-R.y,this}copy(S){return this.x=S.x,this.y=S.y,this}clone(){return new c(this.x,this.y)}}},"./src/WebGL/math/index.ts":(o,u,a)=>{a.r(u),a.d(u,{Matrix3:()=>_.Matrix3,Matrix4:()=>_.Matrix4,Quaternion:()=>c.Quaternion,Ray:()=>_.Ray,Vector2:()=>y.Vector2,Vector3:()=>_.Vector3,clamp:()=>S.clamp,conversionMatrix3:()=>R.conversionMatrix3,degToRad:()=>m.degToRad});var c=a("./src/WebGL/math/Quaternion.ts"),y=a("./src/WebGL/math/Vector2.ts"),S=a("./src/WebGL/math/utils/clamp.ts"),R=a("./src/WebGL/math/utils/conversionMatrix3.ts"),m=a("./src/WebGL/math/utils/degToRad.ts"),_=a("./src/WebGL/math/math.ts")},"./src/WebGL/math/math.ts":(o,u,a)=>{a.r(u),a.d(u,{Matrix3:()=>O,Matrix4:()=>g,Ray:()=>w,Vector3:()=>T});var c=a("./src/WebGL/math/utils/degToRad.ts"),y=a("./src/WebGL/math/utils/clamp.ts"),S,R,m,_,A;class g{constructor(f=1,i=0,l=0,p=0,v=0,b=1,s=0,h=0,E=0,x=0,D=1,z=0,P=0,G=0,B=0,K=1){typeof f<"u"&&typeof f!="number"?this.elements=new Float32Array(f):(this.elements=new Float32Array(16),this.elements[0]=f,this.elements[4]=i,this.elements[8]=l,this.elements[12]=p,this.elements[1]=v,this.elements[5]=b,this.elements[9]=s,this.elements[13]=h,this.elements[2]=E,this.elements[6]=x,this.elements[10]=D,this.elements[14]=z,this.elements[3]=P,this.elements[7]=G,this.elements[11]=B,this.elements[15]=K)}makeScale(f,i,l){throw new Error("Method not implemented.")}set(f,i,l,p,v,b,s,h,E,x,D,z,P,G,B,K){const k=this.elements;return k[0]=f,k[4]=i,k[8]=l,k[12]=p,k[1]=v,k[5]=b,k[9]=s,k[13]=h,k[2]=E,k[6]=x,k[10]=D,k[14]=z,k[3]=P,k[7]=G,k[11]=B,k[15]=K,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}copy(f){const i=f.elements;return this.set(i[0],i[4],i[8],i[12],i[1],i[5],i[9],i[13],i[2],i[6],i[10],i[14],i[3],i[7],i[11],i[15]),this}matrix3FromTopLeft(){const f=this.elements;return new O(f[0],f[4],f[8],f[1],f[5],f[9],f[2],f[6],f[10])}setRotationFromEuler(f,i){const l=this.elements,{x:p,y:v,z:b}=f,s=Math.cos(p),h=Math.sin(p),E=Math.cos(v),x=Math.sin(v),D=Math.cos(b),z=Math.sin(b);if(i===void 0||i==="XYZ"){const P=s*D,G=s*z,B=h*D,K=h*z;l[0]=E*D,l[4]=-E*z,l[8]=x,l[1]=G+B*x,l[5]=P-K*x,l[9]=-h*E,l[2]=K-P*x,l[6]=B+G*x,l[10]=s*E}else console.error(`Error with matrix4 setRotationFromEuler. Order: ${i}`);return this}setRotationFromQuaternion(f){const i=this.elements,{x:l,y:p,z:v,w:b}=f,s=l+l,h=p+p,E=v+v,x=l*s,D=l*h,z=l*E,P=p*h,G=p*E,B=v*E,K=b*s,k=b*h,U=b*E;return i[0]=1-(P+B),i[4]=D-U,i[8]=z+k,i[1]=D+U,i[5]=1-(x+B),i[9]=G-K,i[2]=z-k,i[6]=G+K,i[10]=1-(x+P),this}multiplyMatrices(f,i){const l=f.elements,p=i.elements,v=this.elements,b=l[0],s=l[4],h=l[8],E=l[12],x=l[1],D=l[5],z=l[9],P=l[13],G=l[2],B=l[6],K=l[10],k=l[14],U=l[3],W=l[7],F=l[11],Y=l[15],j=p[0],H=p[4],Z=p[8],ne=p[12],se=p[1],me=p[5],de=p[9],ue=p[13],ce=p[2],pe=p[6],De=p[10],we=p[14],je=p[3],ye=p[7],he=p[11],Ce=p[15];return v[0]=b*j+s*se+h*ce+E*je,v[4]=b*H+s*me+h*pe+E*ye,v[8]=b*Z+s*de+h*De+E*he,v[12]=b*ne+s*ue+h*we+E*Ce,v[1]=x*j+D*se+z*ce+P*je,v[5]=x*H+D*me+z*pe+P*ye,v[9]=x*Z+D*de+z*De+P*he,v[13]=x*ne+D*ue+z*we+P*Ce,v[2]=G*j+B*se+K*ce+k*je,v[6]=G*H+B*me+K*pe+k*ye,v[10]=G*Z+B*de+K*De+k*he,v[14]=G*ne+B*ue+K*we+k*Ce,v[3]=U*j+W*se+F*ce+Y*je,v[7]=U*H+W*me+F*pe+Y*ye,v[11]=U*Z+W*de+F*De+Y*he,v[15]=U*ne+W*ue+F*we+Y*Ce,this}multiplyScalar(f){const i=this.elements;return i[0]*=f,i[4]*=f,i[8]*=f,i[12]*=f,i[1]*=f,i[5]*=f,i[9]*=f,i[13]*=f,i[2]*=f,i[6]*=f,i[10]*=f,i[14]*=f,i[3]*=f,i[7]*=f,i[11]*=f,i[15]*=f,this}makeTranslation(f,i,l){return this.set(1,0,0,f,0,1,0,i,0,0,1,l,0,0,0,1),this}snap(f){const i=Math.pow(10,4),l=this.elements;for(let p=0;p<16;p++){const v=Math.round(l[p]);v===Math.round(l[p]*i)/i&&(l[p]=v)}return this}transpose(){const f=this.elements;let i;return i=f[1],f[1]=f[4],f[4]=i,i=f[2],f[2]=f[8],f[8]=i,i=f[6],f[6]=f[9],f[9]=i,i=f[3],f[3]=f[12],f[12]=i,i=f[7],f[7]=f[13],f[13]=i,i=f[11],f[11]=f[14],f[14]=i,this}setPosition(f){const i=this.elements;return i[12]=f.x,i[13]=f.y,i[14]=f.z,this}translate(f){const i=this.elements;return i[12]+=f.x,i[13]+=f.y,i[14]+=f.z,this}getInverse(f,i){const l=this.elements,p=f.elements,v=p[0],b=p[4],s=p[8],h=p[12],E=p[1],x=p[5],D=p[9],z=p[13],P=p[2],G=p[6],B=p[10],K=p[14],k=p[3],U=p[7],W=p[11],F=p[15];l[0]=D*K*U-z*B*U+z*G*W-x*K*W-D*G*F+x*B*F,l[4]=h*B*U-s*K*U-h*G*W+b*K*W+s*G*F-b*B*F,l[8]=s*z*U-h*D*U+h*x*W-b*z*W-s*x*F+b*D*F,l[12]=h*D*G-s*z*G-h*x*B+b*z*B+s*x*K-b*D*K,l[1]=z*B*k-D*K*k-z*P*W+E*K*W+D*P*F-E*B*F,l[5]=s*K*k-h*B*k+h*P*W-v*K*W-s*P*F+v*B*F,l[9]=h*D*k-s*z*k-h*E*W+v*z*W+s*E*F-v*D*F,l[13]=s*z*P-h*D*P+h*E*B-v*z*B-s*E*K+v*D*K,l[2]=x*K*k-z*G*k+z*P*U-E*K*U-x*P*F+E*G*F,l[6]=h*G*k-b*K*k-h*P*U+v*K*U+b*P*F-v*G*F,l[10]=b*z*k-h*x*k+h*E*U-v*z*U-b*E*F+v*x*F,l[14]=h*x*P-b*z*P-h*E*G+v*z*G+b*E*K-v*x*K,l[3]=D*G*k-x*B*k-D*P*U+E*B*U+x*P*W-E*G*W,l[7]=b*B*k-s*G*k+s*P*U-v*B*U-b*P*W+v*G*W,l[11]=s*x*k-b*D*k-s*E*U+v*D*U+b*E*W-v*x*W,l[15]=b*D*P-s*x*P+s*E*G-v*D*G-b*E*B+v*x*B;const Y=v*l[0]+E*l[4]+P*l[8]+k*l[12];if(Y===0){const j="Matrix4.getInverse(): can't invert matrix, determinant is 0";if(i)throw new Error(j);return console.warn(j),this.identity(),this}return this.multiplyScalar(1/Y),this}isReflected(){const f=this.elements,i=f[0],l=f[4],p=f[8],v=f[1],b=f[5],s=f[9],h=f[2],E=f[6],x=f[10];return i*b*x+v*E*p+h*l*s-h*b*p-v*l*x-i*E*s<0}scale(f){const i=this.elements,{x:l}=f,{y:p}=f,{z:v}=f;return i[0]*=l,i[4]*=p,i[8]*=v,i[1]*=l,i[5]*=p,i[9]*=v,i[2]*=l,i[6]*=p,i[10]*=v,i[3]*=l,i[7]*=p,i[11]*=v,this}getMaxScaleOnAxis(){const f=this.elements,i=f[0]*f[0]+f[1]*f[1]+f[2]*f[2],l=f[4]*f[4]+f[5]*f[5]+f[6]*f[6],p=f[8]*f[8]+f[9]*f[9]+f[10]*f[10];return Math.sqrt(Math.max(i,Math.max(l,p)))}makeFrustum(f,i,l,p,v,b){const s=this.elements,h=2*v/(i-f),E=2*v/(p-l),x=(i+f)/(i-f),D=(p+l)/(p-l),z=-(b+v)/(b-v),P=-2*b*v/(b-v);return s[0]=h,s[4]=0,s[8]=x,s[12]=0,s[1]=0,s[5]=E,s[9]=D,s[13]=0,s[2]=0,s[6]=0,s[10]=z,s[14]=P,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this}makePerspective(f,i,l,p){const v=l*Math.tan((0,c.degToRad)(f*.5)),b=-v,s=b*i,h=v*i;return this.makeFrustum(s,h,b,v,l,p)}makeOrthographic(f,i,l,p,v,b){const s=this.elements,h=1/(i-f),E=1/(l-p),x=1/(b-v),D=(i+f)*h,z=(l+p)*E,P=(b+v)*x;return s[0]=2*h,s[4]=0,s[8]=0,s[12]=-D,s[1]=0,s[5]=2*E,s[9]=0,s[13]=-z,s[2]=0,s[6]=0,s[10]=-2*x,s[14]=-P,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this}isEqual(f){const i=f.elements,l=this.elements;return l[0]===i[0]&&l[4]===i[4]&&l[8]===i[8]&&l[12]===i[12]&&l[1]===i[1]&&l[5]===i[5]&&l[9]===i[9]&&l[13]===i[13]&&l[2]===i[2]&&l[6]===i[6]&&l[10]===i[10]&&l[14]===i[14]&&l[3]===i[3]&&l[7]===i[7]&&l[11]===i[11]&&l[15]===i[15]}clone(){const f=this.elements;return new g(f[0],f[4],f[8],f[12],f[1],f[5],f[9],f[13],f[2],f[6],f[10],f[14],f[3],f[7],f[11],f[15])}isIdentity(){const f=this.elements;return f[0]===1&&f[4]===0&&f[8]===0&&f[12]===0&&f[1]===0&&f[5]===1&&f[9]===0&&f[13]===0&&f[2]===0&&f[6]===0&&f[10]===1&&f[14]===0&&f[3]===0&&f[7]===0&&f[11]===0&&f[15]===1}isNearlyIdentity(f){return this.clone().snap(f).isIdentity()}getScale(f){const i=this.elements;return f=f||new T,m.set(i[0],i[1],i[2]),_.set(i[4],i[5],i[6]),A.set(i[8],i[9],i[10]),f.x=m.length(),f.y=_.length(),f.z=A.length(),f}lookAt(f,i,l){const p=this.elements;return A.subVectors(f,i).normalize(),A.length()===0&&(A.z=1),m.crossVectors(l,A).normalize(),m.length()===0&&(A.x+=1e-4,m.crossVectors(l,A).normalize()),_.crossVectors(A,m),p[0]=m.x,p[4]=_.x,p[8]=A.x,p[1]=m.y,p[5]=_.y,p[9]=A.y,p[2]=m.z,p[6]=_.z,p[10]=A.z,this}compose(f,i,l){const p=this.elements;return S.identity(),S.setRotationFromQuaternion(i),R.makeScale(l.x,l.y,l.z),this.multiplyMatrices(S,R),p[12]=f.x,p[13]=f.y,p[14]=f.z,this}}S=new g,R=new g;class T{constructor(f,i,l){this.x=f||0,this.y=i||0,this.z=l||0,this.atomid=void 0}set(f,i,l){return this.x=f,this.y=i,this.z=l,this}copy(f){return this.x=f.x,this.y=f.y,this.z=f.z,this}add(f){return this.x+=f.x,this.y+=f.y,this.z+=f.z,this}addVectors(f,i){return this.x=f.x+i.x,this.y=f.y+i.y,this.z=f.z+i.z,this}multiplyVectors(f,i){return this.x=f.x*i.x,this.y=f.y*i.y,this.z=f.z*i.z,this}sub(f){return this.x-=f.x,this.y-=f.y,this.z-=f.z,this}subVectors(f,i){return this.x=f.x-i.x,this.y=f.y-i.y,this.z=f.z-i.z,this}multiplyScalar(f){return this.x*=f,this.y*=f,this.z*=f,this}divideScalar(f){return f!==0?(this.x/=f,this.y/=f,this.z/=f):(this.x=0,this.y=0,this.z=0),this}max(f){return this.x=Math.max(this.x,f.x),this.y=Math.max(this.y,f.y),this.z=Math.max(this.z,f.z),this}min(f){return this.x=Math.min(this.x,f.x),this.y=Math.min(this.y,f.y),this.z=Math.min(this.z,f.z),this}distanceTo(f){return Math.sqrt(this.distanceToSquared(f))}distanceToSquared(f){const i=this.x-f.x,l=this.y-f.y,p=this.z-f.z;return i*i+l*l+p*p}applyMatrix3(f){const{x:i}=this,{y:l}=this,{z:p}=this,v=f.elements;return this.x=v[0]*i+v[3]*l+v[6]*p,this.y=v[1]*i+v[4]*l+v[7]*p,this.z=v[2]*i+v[5]*l+v[8]*p,this}applyMatrix4(f){const{x:i}=this,{y:l}=this,{z:p}=this,v=f.elements;return this.x=v[0]*i+v[4]*l+v[8]*p+v[12],this.y=v[1]*i+v[5]*l+v[9]*p+v[13],this.z=v[2]*i+v[6]*l+v[10]*p+v[14],this}applyProjection(f){const{x:i}=this,{y:l}=this,{z:p}=this,v=f.elements,b=v[3]*i+v[7]*l+v[11]*p+v[15];return this.x=(v[0]*i+v[4]*l+v[8]*p+v[12])/b,this.y=(v[1]*i+v[5]*l+v[9]*p+v[13])/b,this.z=(v[2]*i+v[6]*l+v[10]*p+v[14])/b,this}applyQuaternion(f){const{x:i}=this,{y:l}=this,{z:p}=this,v=f.x,b=f.y,s=f.z,h=f.w,E={};E.x=2*(l*s-p*b),E.y=2*(p*v-i*s),E.z=2*(i*b-l*v);const x={};return x.x=E.y*s-E.z*b,x.y=E.z*v-E.x*s,x.z=E.x*b-E.y*v,this.x=i+h*E.x+x.x,this.y=l+h*E.y+x.y,this.z=p+h*E.z+x.z,this}negate(){return this.multiplyScalar(-1)}dot(f){return this.x*f.x+this.y*f.y+this.z*f.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}normalize(){return this.divideScalar(this.length())}cross(f){const{x:i}=this,{y:l}=this,{z:p}=this;return this.x=l*f.z-p*f.y,this.y=p*f.x-i*f.z,this.z=i*f.y-l*f.x,this}crossVectors(f,i){return this.x=f.y*i.z-f.z*i.y,this.y=f.z*i.x-f.x*i.z,this.z=f.x*i.y-f.y*i.x,this}equals(f){return this.x==f.x&&this.y==f.y&&this.z==f.z}getPositionFromMatrix(f){return this.x=f.elements[12],this.y=f.elements[13],this.z=f.elements[14],this}setEulerFromRotationMatrix(f,i){const l=f.elements,p=l[0],v=l[4],b=l[8],s=l[5],h=l[9],E=l[6],x=l[10];return i===void 0||i==="XYZ"?(this.y=Math.asin((0,y.clamp)(b,-1,1)),Math.abs(b)<.99999?(this.x=Math.atan2(-h,x),this.z=Math.atan2(-v,p)):(this.x=Math.atan2(E,s),this.z=0)):console.error(`Error with vector's setEulerFromRotationMatrix: Unknown order: ${i}`),this}rotateAboutVector(f,i){f.normalize();const l=Math.cos(i),p=Math.sin(i),v=this.clone().multiplyScalar(l),b=f.clone().cross(this).multiplyScalar(p),s=f.clone().multiplyScalar(f.clone().dot(this)).multiplyScalar(1-l),h=v.add(b).add(s);return this.x=h.x,this.y=h.y,this.z=h.z,this}setFromMatrixPosition(f){const i=f.elements;return this.x=i[12],this.y=i[13],this.z=i[14],this}transformDirection(f){const{x:i}=this,{y:l}=this,{z:p}=this,v=f.elements;return this.x=v[0]*i+v[4]*l+v[8]*p,this.y=v[1]*i+v[5]*l+v[9]*p,this.z=v[2]*i+v[6]*l+v[10]*p,this.normalize()}clone(){return new T(this.x,this.y,this.z)}unproject(f){const i=S;return i.multiplyMatrices(f.matrixWorld,i.getInverse(f.projectionMatrix)),this.applyMatrix4(i)}}m=new T,_=new T,A=new T;class O{constructor(f=1,i=0,l=0,p=0,v=1,b=0,s=0,h=0,E=1){this.elements=new Float32Array(9),this.set(f,i,l,p,v,b,s,h,E)}set(f,i,l,p,v,b,s,h,E){const x=this.elements;return x[0]=f,x[3]=i,x[6]=l,x[1]=p,x[4]=v,x[7]=b,x[2]=s,x[5]=h,x[8]=E,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(f){const i=f.elements;this.set(i[0],i[3],i[6],i[1],i[4],i[7],i[2],i[5],i[8])}multiplyScalar(f){const i=this.elements;return i[0]*=f,i[3]*=f,i[6]*=f,i[1]*=f,i[4]*=f,i[7]*=f,i[2]*=f,i[5]*=f,i[8]*=f,this}getInverse3(f){const i=f.elements,l=this.elements;l[0]=i[4]*i[8]-i[5]*i[7],l[3]=i[6]*i[5]-i[3]*i[8],l[6]=i[3]*i[7]-i[6]*i[4],l[1]=i[7]*i[2]-i[1]*i[8],l[4]=i[0]*i[8]-i[6]*i[2],l[7]=i[1]*i[6]-i[0]*i[7],l[2]=i[1]*i[5]-i[2]*i[4],l[5]=i[2]*i[3]-i[0]*i[5],l[8]=i[0]*i[4]-i[1]*i[3];const p=i[0]*l[0]+i[3]*l[1]+i[6]*l[2];return this.multiplyScalar(1/p),this}getInverse(f,i){const l=f.elements,p=this.elements;p[0]=l[10]*l[5]-l[6]*l[9],p[1]=-l[10]*l[1]+l[2]*l[9],p[2]=l[6]*l[1]-l[2]*l[5],p[3]=-l[10]*l[4]+l[6]*l[8],p[4]=l[10]*l[0]-l[2]*l[8],p[5]=-l[6]*l[0]+l[2]*l[4],p[6]=l[9]*l[4]-l[5]*l[8],p[7]=-l[9]*l[0]+l[1]*l[8],p[8]=l[5]*l[0]-l[1]*l[4];const v=l[0]*p[0]+l[1]*p[3]+l[2]*p[6];if(v===0){const b="Matrix3.getInverse(): can't invert matrix, determinant is 0";if(i)throw new Error(b);return console.warn(b),this.identity(),this}return this.multiplyScalar(1/v),this}getDeterminant(){const f=this.elements;return f[0]*f[4]*f[8]+f[1]*f[5]*f[6]+f[2]*f[3]*f[7]-f[2]*f[4]*f[6]-f[1]*f[3]*f[8]-f[0]*f[5]*f[7]}transpose(){let f;const i=this.elements;return f=i[1],i[1]=i[3],i[3]=f,f=i[2],i[2]=i[6],i[6]=f,f=i[5],i[5]=i[7],i[7]=f,this}clone(){const f=this.elements;return new O(f[0],f[3],f[6],f[1],f[4],f[7],f[2],f[5],f[8])}getMatrix4(){const f=this.elements;return new g(f[0],f[3],f[6],0,f[1],f[4],f[7],0,f[2],f[5],f[8],0)}}class w{constructor(f,i){this.origin=f!==void 0?f:new T,this.direction=i!==void 0?i:new T}set(f,i){return this.origin.copy(f),this.direction.copy(i),this}copy(f){return this.origin.copy(f.origin),this.direction.copy(f.direction),this}at(f,i){return(i||new T).copy(this.direction).multiplyScalar(f).add(this.origin)}recast(f){const i=m;return this.origin.copy(this.at(f,i)),this}closestPointToPoint(f,i){const l=i||new T;l.subVectors(f,this.origin);const p=l.dot(this.direction);return l.copy(this.direction).multiplyScalar(p).add(this.origin)}distanceToPoint(f){const i=m,l=i.subVectors(f,this.origin).dot(this.direction);return i.copy(this.direction).multiplyScalar(l).add(this.origin),i.distanceTo(f)}isIntersectionCylinder(){}isIntersectionSphere(f){return this.distanceToPoint(f.center)<=f.radius}isIntersectionPlane(f){return f.normal.dot(this.direction)!==0||f.distanceToPoint(this.origin)===0}distanceToPlane(f){const i=f.normal.dot(this.direction);return i===0?f.distanceToPoint(this.origin)===0?0:void 0:-(this.origin.dot(f.normal)+f.constant)/i}intersectPlane(f,i){const l=this.distanceToPlane(f);if(l!==void 0)return this.at(l,i)}applyMatrix4(f){return this.direction.add(this.origin).applyMatrix4(f),this.origin.applyMatrix4(f),this.direction.sub(this.origin),this}clone(){return new w().copy(this)}}},"./src/WebGL/math/utils/clamp.ts":(o,u,a)=>{a.r(u),a.d(u,{clamp:()=>c});function c(y,S,R){return Math.min(Math.max(y,S),R)}},"./src/WebGL/math/utils/conversionMatrix3.ts":(o,u,a)=>{a.r(u),a.d(u,{conversionMatrix3:()=>y});var c=a("./src/WebGL/math/math.ts");function y(S,R,m,_,A,g){_=_*Math.PI/180,A=A*Math.PI/180,g=g*Math.PI/180;const T=l=>l*l,O=Math.cos(_),w=Math.cos(A),M=Math.cos(g),f=Math.sin(g);return new c.Matrix3(S,R*M,m*w,0,R*f,m*(O-w*M)/f,0,0,m*Math.sqrt(1-T(O)-T(w)-T(M)+2*O*w*M)/f)}},"./src/WebGL/math/utils/degToRad.ts":(o,u,a)=>{a.r(u),a.d(u,{degToRad:()=>y});const c=Math.PI/180;function y(S){return S*c}},"./src/WebGL/objects/Line.ts":(o,u,a)=>{a.r(u),a.d(u,{Line:()=>R,LineStyle:()=>S});var c=a("./src/WebGL/materials/index.ts"),y=a("./src/WebGL/core/index.ts"),S;(function(m){m[m.LineStrip=0]="LineStrip",m[m.LinePieces=1]="LinePieces"})(S||(S={}));class R extends y.Object3D{constructor(_,A=new c.LineBasicMaterial({color:Math.random()*16777215}),g=S.LineStrip){super(),this.geometry=_,this.material=A,this.type=g}clone(_=new R(this.geometry,this.material,this.type)){return super.clone.call(this,_),_}}},"./src/WebGL/objects/Mesh.ts":(o,u,a)=>{a.r(u),a.d(u,{Mesh:()=>y});var c=a("./src/WebGL/core/index.ts");class y extends c.Object3D{constructor(R,m){super(),this.geometry=R,this.material=m}clone(R){return R===void 0&&(R=new y(this.geometry,this.material)),super.clone.call(this,R),R}}},"./src/WebGL/objects/Sprite.ts":(o,u,a)=>{a.r(u),a.d(u,{Sprite:()=>S});var c=a("./src/WebGL/materials/index.ts"),y=a("./src/WebGL/core/index.ts");class S extends y.Object3D{constructor(m=new c.SpriteMaterial){super(),this.material=m,this.rotation3d=this.rotation,this.rotation=0}updateMatrix(){this.matrix.setPosition(this.position),this.rotation3d.set(0,0,this.rotation),this.matrix.setRotationFromEuler(this.rotation3d),(this.scale.x!==1||this.scale.y!==1)&&this.matrix.scale(this.scale),this.matrixWorldNeedsUpdate=!0}clone(m=new S(this.material)){return y.Object3D.prototype.clone.call(this,m),m}}},"./src/WebGL/objects/index.ts":(o,u,a)=>{a.r(u),a.d(u,{Line:()=>c.Line,LineStyle:()=>c.LineStyle,Mesh:()=>y.Mesh,Sprite:()=>S.Sprite});var c=a("./src/WebGL/objects/Line.ts"),y=a("./src/WebGL/objects/Mesh.ts"),S=a("./src/WebGL/objects/Sprite.ts")},"./src/WebGL/shaders/ShaderType.ts":(o,u,a)=>{a.r(u)},"./src/WebGL/shaders/index.ts":(o,u,a)=>{a.r(u),a.d(u,{ShaderLib:()=>c.ShaderLib,ShaderUtils:()=>y.ShaderUtils,basic:()=>c.basic,clone:()=>y.clone,instanced:()=>c.instanced,lambert:()=>c.lambert,lambertdouble:()=>c.lambertdouble,outline:()=>c.outline,screen:()=>c.screen,screenaa:()=>c.screenaa,sphereimposter:()=>c.sphereimposter,sphereimposteroutline:()=>c.sphereimposteroutline,sprite:()=>c.sprite,stickimposter:()=>c.stickimposter,stickimposteroutline:()=>c.stickimposteroutline,volumetric:()=>c.volumetric});var c=a("./src/WebGL/shaders/lib/index.ts"),y=a("./src/WebGL/shaders/utils/index.ts");a("./src/WebGL/shaders/ShaderType.ts")},"./src/WebGL/shaders/lib/basic/index.ts":(o,u,a)=>{a.r(u),a.d(u,{basic:()=>R});var c=a("./src/WebGL/shaders/lib/basic/uniforms.ts"),y=a("./src/WebGL/shaders/lib/basic/basic.frag"),S=a("./src/WebGL/shaders/lib/basic/basic.vert");const R={vertexShader:S.default.replace("#define GLSLIFY 1",""),fragmentShader:y.default.replace("#define GLSLIFY 1",""),uniforms:c.uniforms}},"./src/WebGL/shaders/lib/basic/uniforms.ts":(o,u,a)=>{a.r(u),a.d(u,{uniforms:()=>y});var c=a("./src/colors.ts");const y={opacity:{type:"f",value:1},fogColor:{type:"c",value:new c.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3}}},"./src/WebGL/shaders/lib/blur/index.ts":(o,u,a)=>{a.r(u),a.d(u,{blur:()=>R});var c=a("./src/WebGL/shaders/lib/blur/uniforms.ts"),y=a("./src/WebGL/shaders/lib/blur/blur.frag"),S=a("./src/WebGL/shaders/lib/blur/blur.vert");const R={fragmentShader:y.default,vertexShader:S.default,uniforms:c.uniforms}},"./src/WebGL/shaders/lib/blur/uniforms.ts":(o,u,a)=>{a.r(u),a.d(u,{uniforms:()=>c});const c={}},"./src/WebGL/shaders/lib/index.ts":(o,u,a)=>{a.r(u),a.d(u,{ShaderLib:()=>p,basic:()=>c.basic,instanced:()=>y.instanced,lambert:()=>S.lambert,lambertdouble:()=>R.lambertdouble,outline:()=>m.outline,screen:()=>_.screen,screenaa:()=>A.screenaa,sphereimposter:()=>g.sphereimposter,sphereimposteroutline:()=>T.sphereimposteroutline,sprite:()=>O.sprite,stickimposter:()=>w.stickimposter,stickimposteroutline:()=>M.stickimposteroutline,volumetric:()=>f.volumetric});var c=a("./src/WebGL/shaders/lib/basic/index.ts"),y=a("./src/WebGL/shaders/lib/instanced/index.ts"),S=a("./src/WebGL/shaders/lib/lambert/index.ts"),R=a("./src/WebGL/shaders/lib/lambertdouble/index.ts"),m=a("./src/WebGL/shaders/lib/outline/index.ts"),_=a("./src/WebGL/shaders/lib/screen/index.ts"),A=a("./src/WebGL/shaders/lib/screenaa/index.ts"),g=a("./src/WebGL/shaders/lib/sphereimposter/index.ts"),T=a("./src/WebGL/shaders/lib/sphereimposteroutline/index.ts"),O=a("./src/WebGL/shaders/lib/sprite/index.ts"),w=a("./src/WebGL/shaders/lib/stickimposter/index.ts"),M=a("./src/WebGL/shaders/lib/stickimposteroutline/index.ts"),f=a("./src/WebGL/shaders/lib/volumetric/index.ts"),i=a("./src/WebGL/shaders/lib/ssao/index.ts"),l=a("./src/WebGL/shaders/lib/blur/index.ts");const p={basic:c.basic,blur:l.blur,instanced:y.instanced,lambert:S.lambert,lambertdouble:R.lambertdouble,outline:m.outline,screen:_.screen,screenaa:A.screenaa,ssao:i.ssao,sphereimposter:g.sphereimposter,sphereimposteroutline:T.sphereimposteroutline,sprite:O.sprite,stickimposter:w.stickimposter,stickimposteroutline:M.stickimposteroutline,volumetric:f.volumetric}},"./src/WebGL/shaders/lib/instanced/index.ts":(o,u,a)=>{a.r(u),a.d(u,{instanced:()=>R});var c=a("./src/WebGL/shaders/lib/instanced/uniforms.ts"),y=a("./src/WebGL/shaders/lib/instanced/instanced.frag"),S=a("./src/WebGL/shaders/lib/instanced/instanced.vert");const R={fragmentShader:y.default.replace("#define GLSLIFY 1",""),vertexShader:S.default.replace("#define GLSLIFY 1",""),uniforms:c.uniforms}},"./src/WebGL/shaders/lib/instanced/uniforms.ts":(o,u,a)=>{a.r(u),a.d(u,{uniforms:()=>y});var c=a("./src/colors.ts");const y={opacity:{type:"f",value:1},fogColor:{type:"c",value:new c.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}},"./src/WebGL/shaders/lib/lambert/index.ts":(o,u,a)=>{a.r(u),a.d(u,{lambert:()=>R});var c=a("./src/WebGL/shaders/lib/lambert/uniforms.ts"),y=a("./src/WebGL/shaders/lib/lambert/lambert.frag"),S=a("./src/WebGL/shaders/lib/lambert/lambert.vert");const R={fragmentShader:y.default.replace("#define GLSLIFY 1",""),vertexShader:S.default.replace("#define GLSLIFY 1",""),uniforms:c.uniforms}},"./src/WebGL/shaders/lib/lambert/uniforms.ts":(o,u,a)=>{a.r(u),a.d(u,{uniforms:()=>y});var c=a("./src/colors.ts");const y={opacity:{type:"f",value:1},fogColor:{type:"c",value:new c.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}},"./src/WebGL/shaders/lib/lambertdouble/index.ts":(o,u,a)=>{a.r(u),a.d(u,{lambertdouble:()=>R});var c=a("./src/WebGL/shaders/lib/lambertdouble/uniforms.ts"),y=a("./src/WebGL/shaders/lib/lambertdouble/lambertdouble.frag"),S=a("./src/WebGL/shaders/lib/lambertdouble/lambertdouble.vert");const R={fragmentShader:y.default.replace("#define GLSLIFY 1",""),vertexShader:S.default.replace("#define GLSLIFY 1",""),uniforms:c.uniforms}},"./src/WebGL/shaders/lib/lambertdouble/uniforms.ts":(o,u,a)=>{a.r(u),a.d(u,{uniforms:()=>y});var c=a("./src/colors.ts");const y={opacity:{type:"f",value:1},fogColor:{type:"c",value:new c.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}},"./src/WebGL/shaders/lib/outline/index.ts":(o,u,a)=>{a.r(u),a.d(u,{outline:()=>R});var c=a("./src/WebGL/shaders/lib/outline/uniforms.ts"),y=a("./src/WebGL/shaders/lib/outline/outline.frag"),S=a("./src/WebGL/shaders/lib/outline/outline.vert");const R={fragmentShader:y.default.replace("#define GLSLIFY 1",""),vertexShader:S.default.replace("#define GLSLIFY 1",""),uniforms:c.uniforms}},"./src/WebGL/shaders/lib/outline/uniforms.ts":(o,u,a)=>{a.r(u),a.d(u,{uniforms:()=>y});var c=a("./src/colors.ts");const y={opacity:{type:"f",value:1},outlineColor:{type:"c",value:new c.Color(0,0,0)},fogColor:{type:"c",value:new c.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},outlineWidth:{type:"f",value:.1},outlinePushback:{type:"f",value:1},outlineMaxPixels:{type:"f",value:0}}},"./src/WebGL/shaders/lib/screen/index.ts":(o,u,a)=>{a.r(u),a.d(u,{screen:()=>R});var c=a("./src/WebGL/shaders/lib/screen/uniforms.ts"),y=a("./src/WebGL/shaders/lib/screen/screen.frag"),S=a("./src/WebGL/shaders/lib/screen/screen.vert");const R={fragmentShader:y.default.replace("#define GLSLIFY 1",""),vertexShader:S.default.replace("#define GLSLIFY 1",""),uniforms:c.uniforms}},"./src/WebGL/shaders/lib/screen/uniforms.ts":(o,u,a)=>{a.r(u),a.d(u,{uniforms:()=>c});const c={}},"./src/WebGL/shaders/lib/screenaa/index.ts":(o,u,a)=>{a.r(u),a.d(u,{screenaa:()=>R});var c=a("./src/WebGL/shaders/lib/screenaa/uniforms.ts"),y=a("./src/WebGL/shaders/lib/screenaa/screenaa.frag"),S=a("./src/WebGL/shaders/lib/screenaa/screenaa.vert");const R={fragmentShader:y.default.replace("#define GLSLIFY 1",""),vertexShader:S.default.replace("#define GLSLIFY 1",""),uniforms:c.uniforms}},"./src/WebGL/shaders/lib/screenaa/uniforms.ts":(o,u,a)=>{a.r(u),a.d(u,{uniforms:()=>c});const c={}},"./src/WebGL/shaders/lib/sphereimposter/index.ts":(o,u,a)=>{a.r(u),a.d(u,{sphereimposter:()=>R});var c=a("./src/WebGL/shaders/lib/sphereimposter/uniforms.ts"),y=a("./src/WebGL/shaders/lib/sphereimposter/sphereimposter.frag"),S=a("./src/WebGL/shaders/lib/sphereimposter/sphereimposter.vert");const R={vertexShader:S.default.replace("#define GLSLIFY 1",""),fragmentShader:y.default.replace("#define GLSLIFY 1",""),uniforms:c.uniforms}},"./src/WebGL/shaders/lib/sphereimposter/uniforms.ts":(o,u,a)=>{a.r(u),a.d(u,{uniforms:()=>y});var c=a("./src/colors.ts");const y={opacity:{type:"f",value:1},fogColor:{type:"c",value:new c.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}},"./src/WebGL/shaders/lib/sphereimposteroutline/index.ts":(o,u,a)=>{a.r(u),a.d(u,{sphereimposteroutline:()=>R});var c=a("./src/WebGL/shaders/lib/sphereimposteroutline/uniforms.ts"),y=a("./src/WebGL/shaders/lib/sphereimposteroutline/sphereimposteroutline.frag"),S=a("./src/WebGL/shaders/lib/sphereimposteroutline/sphereimposteroutline.vert");const R={fragmentShader:y.default.replace("#define GLSLIFY 1",""),vertexShader:S.default.replace("#define GLSLIFY 1",""),uniforms:c.uniforms}},"./src/WebGL/shaders/lib/sphereimposteroutline/uniforms.ts":(o,u,a)=>{a.r(u),a.d(u,{uniforms:()=>y});var c=a("./src/colors.ts");const y={opacity:{type:"f",value:1},outlineColor:{type:"c",value:new c.Color(0,0,0)},fogColor:{type:"c",value:new c.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},outlineWidth:{type:"f",value:.1},outlinePushback:{type:"f",value:1},outlineMaxPixels:{type:"f",value:0}}},"./src/WebGL/shaders/lib/sprite/index.ts":(o,u,a)=>{a.r(u),a.d(u,{sprite:()=>R});var c=a("./src/WebGL/shaders/lib/sprite/uniforms.ts"),y=a("./src/WebGL/shaders/lib/sprite/sprite.frag"),S=a("./src/WebGL/shaders/lib/sprite/sprite.vert");const R={fragmentShader:y.default.replace("#define GLSLIFY 1",""),vertexShader:S.default.replace("#define GLSLIFY 1",""),uniforms:c.uniforms}},"./src/WebGL/shaders/lib/sprite/uniforms.ts":(o,u,a)=>{a.r(u),a.d(u,{uniforms:()=>c});const c={}},"./src/WebGL/shaders/lib/ssao/index.ts":(o,u,a)=>{a.r(u),a.d(u,{ssao:()=>R});var c=a("./src/WebGL/shaders/lib/ssao/uniforms.ts"),y=a("./src/WebGL/shaders/lib/ssao/ssao.frag"),S=a("./src/WebGL/shaders/lib/ssao/ssao.vert");const R={fragmentShader:y.default,vertexShader:S.default,uniforms:c.uniforms}},"./src/WebGL/shaders/lib/ssao/uniforms.ts":(o,u,a)=>{a.r(u),a.d(u,{uniforms:()=>c});const c={total_strength:{type:"f",value:1},radius:{type:"f",value:5},projinv:{type:"mat4",value:[]}}},"./src/WebGL/shaders/lib/stickimposter/index.ts":(o,u,a)=>{a.r(u),a.d(u,{stickimposter:()=>_});var c=a("./src/WebGL/shaders/lib/stickimposter/uniforms.ts"),y=a("./src/WebGL/shaders/lib/stickimposter/stickimposterFragmentShader.partial.frag"),S=a("./src/WebGL/shaders/lib/stickimposter/stickimposter.partial.frag"),R=a("./src/WebGL/shaders/lib/stickimposter/stickimposter.vert");const _={fragmentShader:[y.default,S.default].join(`
`),vertexShader:R.default,uniforms:c.uniforms}},"./src/WebGL/shaders/lib/stickimposter/uniforms.ts":(o,u,a)=>{a.r(u),a.d(u,{uniforms:()=>y});var c=a("./src/colors.ts");const y={opacity:{type:"f",value:1},fogColor:{type:"c",value:new c.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}},"./src/WebGL/shaders/lib/stickimposteroutline/index.ts":(o,u,a)=>{a.r(u),a.d(u,{stickimposteroutline:()=>m});var c=a("./src/WebGL/shaders/lib/stickimposteroutline/uniforms.ts"),y=a("./src/WebGL/shaders/lib/stickimposter/stickimposterFragmentShader.partial.frag"),S=a("./src/WebGL/shaders/lib/stickimposteroutline/stickimposteroutline.vert");const m={fragmentShader:y.default+"gl_FragColor = vec4(color,1.0);}",vertexShader:S.default,uniforms:c.uniforms}},"./src/WebGL/shaders/lib/stickimposteroutline/uniforms.ts":(o,u,a)=>{a.r(u),a.d(u,{uniforms:()=>y});var c=a("./src/colors.ts");const y={opacity:{type:"f",value:1},fogColor:{type:"c",value:new c.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},outlineColor:{type:"c",value:new c.Color(0,0,0)},outlineWidth:{type:"f",value:.1},outlinePushback:{type:"f",value:1},outlineMaxPixels:{type:"f",value:0},projinv:{type:"mat4",value:[]}}},"./src/WebGL/shaders/lib/volumetric/index.ts":(o,u,a)=>{a.r(u),a.d(u,{volumetric:()=>R});var c=a("./src/WebGL/shaders/lib/volumetric/uniforms.ts"),y=a("./src/WebGL/shaders/lib/volumetric/volumetric.frag"),S=a("./src/WebGL/shaders/lib/volumetric/volumetric.vert");const R={fragmentShader:y.default.replace("#define GLSLIFY 1",""),vertexShader:S.default.replace("#define GLSLIFY 1",""),uniforms:c.uniforms}},"./src/WebGL/shaders/lib/volumetric/uniforms.ts":(o,u,a)=>{a.r(u),a.d(u,{uniforms:()=>y});var c=a("./src/colors.ts");const y={opacity:{type:"f",value:1},fogColor:{type:"c",value:new c.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},data:{type:"i",value:3},colormap:{type:"i",value:4},depthmap:{type:"i",value:5},step:{type:"f",value:1},maxdepth:{type:"f",value:100},subsamples:{type:"f",value:5},textmat:{type:"mat4",value:[]},projinv:{type:"mat4",value:[]},transfermin:{type:"f",value:-.2},transfermax:{type:"f",value:.2}}},"./src/WebGL/shaders/utils/clone.ts":(o,u,a)=>{a.r(u),a.d(u,{clone:()=>y});var c=a("./src/colors.ts");function y(S){let R={};for(const _ in S){R[_]={},R[_].type=S[_].type;var m=S[_].value;m instanceof c.Color?R[_].value=m.clone():typeof m=="number"?R[_].value=m:m instanceof Array?R[_].value=[]:console.error("Error copying shader uniforms from ShaderLib: unknown type for uniform")}return R}},"./src/WebGL/shaders/utils/index.ts":(o,u,a)=>{a.r(u),a.d(u,{ShaderUtils:()=>y,clone:()=>c.clone});var c=a("./src/WebGL/shaders/utils/clone.ts");const y={clone:c.clone}},"./src/WebGL/shapes/Cylinder.ts":(o,u,a)=>{a.r(u),a.d(u,{Cylinder:()=>S});var c=a("./src/WebGL/math/index.ts");let y=new c.Vector3;class S{constructor(m=new c.Vector3,_=new c.Vector3,A=0){this.c1=m,this.c2=_,this.radius=A,this.direction=new c.Vector3().subVectors(this.c2,this.c1).normalize()}copy(m){return this.c1.copy(m.c1),this.c2.copy(m.c2),this.direction.copy(m.direction),this.radius=m.radius,this}lengthSq(){return y.subVectors(this.c2,this.c1).lengthSq()}applyMatrix4(m){return this.direction.add(this.c1).applyMatrix4(m),this.c1.applyMatrix4(m),this.c2.applyMatrix4(m),this.direction.sub(this.c1).normalize(),this.radius=this.radius*m.getMaxScaleOnAxis(),this}}},"./src/WebGL/shapes/Sphere.ts":(o,u,a)=>{a.r(u),a.d(u,{Sphere:()=>y});var c=a("./src/WebGL/math/index.ts");class y{constructor(R={x:0,y:0,z:0},m=0){this.center=new c.Vector3(R.x,R.y,R.z),this.radius=m}set(R,m){return this.center.copy(R),this.radius=m,this}copy(R){return this.center.copy(R.center),this.radius=R.radius,this}applyMatrix4(R){return this.center.applyMatrix4(R),this.radius=this.radius*R.getMaxScaleOnAxis(),this}translate(R){return this.center.add(R),this}equals(R){return R.center.equals(this.center)&&R.radius===this.radius}clone(){return new y().copy(this)}}},"./src/WebGL/shapes/Triangle.ts":(o,u,a)=>{a.r(u),a.d(u,{Triangle:()=>S});var c=a("./src/WebGL/math/index.ts");const y=new c.Vector3;class S{constructor(m=new c.Vector3,_=new c.Vector3,A=new c.Vector3){this.a=m,this.b=_,this.c=A}copy(m){return this.a.copy(m.a),this.b.copy(m.b),this.c.copy(m.c),this}applyMatrix4(m){return this.a.applyMatrix4(m),this.b.applyMatrix4(m),this.c.applyMatrix4(m),this}getNormal(){var m=this.a.clone();return m.sub(this.b),y.subVectors(this.c,this.b),m.cross(y),m.normalize(),m}}},"./src/WebGL/shapes/index.ts":(o,u,a)=>{a.r(u),a.d(u,{Cylinder:()=>y.Cylinder,Sphere:()=>c.Sphere,Triangle:()=>S.Triangle});var c=a("./src/WebGL/shapes/Sphere.ts"),y=a("./src/WebGL/shapes/Cylinder.ts"),S=a("./src/WebGL/shapes/Triangle.ts")},"./src/autoload.ts":(o,u,a)=>{a.r(u),a.d(u,{autoinit:()=>m,autoload:()=>g,processing_autoinit:()=>_,viewers:()=>A});var c=a("./src/GLViewer.ts"),y=a("./src/ProteinSurface4.ts"),S=a("./src/utilities.ts"),R=a("./src/colors.ts"),m=!1,_=!1,A={};function g(T,O){var w,M,f;if(document.querySelector(".viewer_3Dmoljs")!=null&&(m=!0),m){_=!0,T=T??null;var i=0;document.querySelectorAll(".viewer_3Dmoljs").forEach(l=>{var p=[],v=[],b="";l.style.position=="static"&&(l.style.position="relative");var s=null;if(f=null,l.dataset.pdb)p.push("https://files.rcsb.org/view/"+l.dataset.pdb+".pdb"),v.push("pdb");else if(l.dataset.cid)v.push("sdf"),p.push("https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/"+l.dataset.cid+"/SDF?record_type=3d");else if(l.dataset.href||l.dataset.url){if(l.dataset.href?b=l.dataset.href:b=l.dataset.url,p.push(b),f=b.substring(b.lastIndexOf(".")+1),f=="gz"){let ye=b.substring(0,b.lastIndexOf(".")).lastIndexOf(".");f=b.substring(ye+1)}v.push(f);var h=b.substring(b.lastIndexOf("/")+1,b.lastIndexOf("."));h=="/"&&(h=b.substring(b.lastIndexOf("/")+1)),l.dataset[v[v.length-1]]=h}let E=l.dataset;for(w in E)w.substring(0,3)==="pdb"&&w!=="pdb"?(p.push("https://files.rcsb.org/view/"+E[w]+".pdb"),v.push("pdb")):w.substring(0,4)==="href"&&w!=="href"?(b=E[w],p.push(b),v.push(b.substring(b.lastIndexOf(".")+1))):w.substring(0,3)==="cid"&&w!=="cid"&&(p.push("https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/"+E[w]+"/SDF?record_type=3d"),v.push("sdf"));var x={};l.dataset.options&&(x=(0,S.specStringToObject)(l.dataset.options));var D=R.CC.color(l.dataset.backgroundcolor),z=l.dataset.backgroundalpha;z=z==null?1:parseFloat(z);var P={line:{}};l.dataset.style&&(P=(0,S.specStringToObject)(l.dataset.style));var G={};l.dataset.select&&(G=(0,S.specStringToObject)(l.dataset.select));var B=[],K=[],k=[],U={},W=null,F=l.dataset,Y=/style(.+)/,j=/surface(.*)/,H=/labelres(.*)/,Z=[];for(M in F)Object.prototype.hasOwnProperty.call(F,M)&&Z.push(M);for(Z.sort(),w=0;w<Z.length;w++){M=Z[w];var ne=Y.exec(M),se,me,de;ne&&(se="select"+ne[1],me=(0,S.specStringToObject)(F[se]),de=(0,S.specStringToObject)(F[M]),B.push([me,de])),ne=j.exec(M),ne&&(se="select"+ne[1],me=(0,S.specStringToObject)(F[se]),de=(0,S.specStringToObject)(F[M]),K.push([me,de])),ne=H.exec(M),ne&&(se="select"+ne[1],me=(0,S.specStringToObject)(F[se]),de=(0,S.specStringToObject)(F[M]),k.push([me,de])),M=="zoomto"&&(U=(0,S.specStringToObject)(F[M])),M=="spin"&&(W=(0,S.specStringToObject)(F[M]))}var ue=function(ye){for(ye.setStyle(G,P),s&&s.createSelectionAndStyle(G,P),w=0;w<B.length;w++){let he=B[w][0]||{},Ce=B[w][1]||{line:{}};ye.setStyle(he,Ce),s&&s.createSelectionAndStyle(G,P)}for(w=0;w<K.length;w++){let he=K[w][0]||{},Ce=K[w][1]||{};s?ye.addSurface(y.SurfaceType.VDW,Ce,he,he).then(Xe=>{s.loadSurface("VDW",he,Ce,Xe)}):ye.addSurface(y.SurfaceType.VDW,Ce,he,he)}for(w=0;w<k.length;w++){let he=k[w][0]||{},Ce=k[w][1]||{};ye.addResLabels(he,Ce)}ye.render(),ye.zoomTo(U),W&&ye.spin(W.axis,W.speed)};let ce=T;try{var pe=(0,S.specStringToObject)(l.dataset.config)||{};pe.backgroundColor===void 0&&(pe.backgroundColor=D),pe.backgroundAlpha===void 0&&(pe.backgroundAlpha=z),ce==null?ce=A[l.id||i++]=(0,c.createViewer)(l,pe):(ce.setBackgroundColor(D,z),ce.setConfig(pe),s&&s.initiateUI()),l.dataset.ui&&$3Dmol.StateManager&&(s=new $3Dmol.StateManager(ce))}catch(ye){console.log(ye),l.textContent="WebGL appears to be disabled."}if(p.length!=0){let ye=0,he=((Ce,ke)=>function(Xe){b=p[ye];var nt=Ce.dataset.type||Ce.dataset.datatype||v[ye];if(ke.addModel(Xe,nt,x),s){var at=Ce.dataset[v[ye]];s.setModelTitle(at)}ye+=1,ye<p.length?(0,S.get)(p[ye]).then(he):(ue(ke),Ce.dataset.callback&&(0,S.makeFunction)(Ce.dataset.callback)(ke),_=!1,O&&O(ke))})(l,ce);f&&f.endsWith("gz")?(0,S.getbin)(p[0]).then(he):(0,S.get)(p[0]).then(he)}else{if(l.dataset.element){var De="#"+l.dataset.element,we=document.querySelector(De),je=we?we.textContent:"";f=l.dataset.type||l.dataset.datatype,ce.addModel(je,f,x)}ue(ce),l.dataset.callback&&(0,S.makeFunction)(l.dataset.callback)(ce),_=!1,O&&O(ce)}})}}document.onreadystatechange=()=>{document.readyState==="complete"&&g()}},"./src/colors.ts":(o,u,a)=>{a.r(u),a.d(u,{CC:()=>y,Color:()=>c,builtinColorSchemes:()=>T,chains:()=>g,elementColors:()=>_,htmlColors:()=>S,residues:()=>A,ssColors:()=>R});class c{constructor(w,M,f){return this.r=0,this.g=0,this.b=0,arguments.length>1&&typeof w=="number"?(this.r=w||0,this.g=M||0,this.b=f||0,this):this.set(w||0)}set(w){return w instanceof c?w.clone():(typeof w=="number"?this.setHex(w):typeof w=="object"&&(this.r=(w==null?void 0:w.r)||0,this.g=(w==null?void 0:w.g)||0,this.b=(w==null?void 0:w.b)||0),this)}setHex(w){return w=Math.floor(w),this.r=(w>>16&255)/255,this.g=(w>>8&255)/255,this.b=(w&255)/255,this}getHex(){var w=Math.round(this.r*255),M=Math.round(this.g*255),f=Math.round(this.b*255);return w<<16|M<<8|f}clone(){return new c(this.r,this.g,this.b)}copy(w){return this.r=w.r,this.g=w.g,this.b=w.b,this}scaled(){var w={};return w.r=Math.round(this.r*255),w.g=Math.round(this.g*255),w.b=Math.round(this.b*255),w.a=1,w}}class y{static color(w){if(!w)return y.cache[0];if(w instanceof c)return w;if(typeof w=="number"&&typeof y.cache[w]<"u")return y.cache[w];if(w&&Array.isArray(w))return w.map(y.color);let M=y.getHex(w),f=new c(M);return y.cache[M]=f,f}static getHex(w){var M;if(Array.isArray(w))return w.map(y.getHex);if(typeof w=="string"){let f=w;if(!isNaN(parseInt(f)))return parseInt(f);if(f=f.trim(),f.length==4&&f[0]=="#"&&(f="#"+f[1]+f[1]+f[2]+f[2]+f[3]+f[3]),f.length==7&&f[0]=="#")return parseInt(f.substring(1),16);let i=y.rgbRegEx.exec(f);if(i){i[1]!=""&&console.log("WARNING: Opacity value in rgba ignored.  Specify separately as opacity attribute.");let l=0;for(let p=2;p<5;p++){l*=256;let v=i[p].endsWith("%")?255*parseFloat(i[p])/100:parseFloat(i[p]);l+=Math.round(v)}return l}return((M=window==null?void 0:window.$3Dmol)===null||M===void 0?void 0:M.htmlColors[w.toLowerCase()])||0}return w}}y.rgbRegEx=/rgb(a?)\(\s*([^ ,\)\t]+)\s*,\s*([^ ,\)\t]+)\s*,\s*([^ ,\)\t]+)/i,y.cache={0:new c(0)};const S={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgrey:11119017,darkgreen:25600,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,grey:8421504,green:32768,greenyellow:11403055,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgrey:13882323,lightgreen:9498256,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},R={pyMol:{h:16711680,s:16776960,c:65280},Jmol:{h:16711808,s:16762880,c:16777215}},m={H:16777215,He:16761035,HE:16761035,Li:11674146,LI:11674146,B:65280,C:13158600,N:9408511,O:15728640,F:14329120,Na:255,NA:255,Mg:2263842,MG:2263842,Al:8421520,AL:8421520,Si:14329120,SI:14329120,P:16753920,S:16762930,Cl:65280,CL:65280,Ca:8421520,CA:8421520,Ti:8421520,TI:8421520,Cr:8421520,CR:8421520,Mn:8421520,MN:8421520,Fe:16753920,FE:16753920,Ni:10824234,NI:10824234,Cu:10824234,CU:10824234,Zn:10824234,ZN:10824234,Br:10824234,BR:10824234,Ag:8421520,AG:8421520,I:10494192,Ba:16753920,BA:16753920,Au:14329120,AU:14329120},_={defaultColor:16716947,Jmol:{H:16777215,He:14286847,HE:14286847,Li:13402367,LI:13402367,Be:12779264,BE:12779264,B:16758197,C:9474192,N:3166456,O:16715021,F:9494608,Ne:11789301,NE:11789301,Na:11230450,NA:11230450,Mg:9109248,MG:9109248,Al:12560038,AL:12560038,Si:1578e4,SI:1578e4,P:16744448,S:16777008,Cl:2093087,CL:2093087,Ar:8442339,AR:8442339,K:9388244,Ca:4062976,CA:4062976,Sc:15132390,SC:15132390,Ti:12567239,TI:12567239,V:10921643,Cr:9083335,CR:9083335,Mn:10255047,MN:10255047,Fe:14706227,FE:14706227,Co:15765664,CO:15765664,Ni:5296208,NI:5296208,Cu:13140019,CU:13140019,Zn:8224944,ZN:8224944,Ga:12750735,GA:12750735,Ge:6721423,GE:6721423,As:12419299,AS:12419299,Se:16752896,SE:16752896,Br:10889513,BR:10889513,Kr:6076625,KR:6076625,Rb:7351984,RB:7351984,Sr:65280,SR:65280,Y:9764863,Zr:9756896,ZR:9756896,Nb:7586505,NB:7586505,Mo:5551541,MO:5551541,Tc:3907230,TC:3907230,Ru:2396047,RU:2396047,Rh:687500,RH:687500,Pd:27013,PD:27013,Ag:12632256,AG:12632256,Cd:16767375,CD:16767375,In:10909043,IN:10909043,Sn:6717568,SN:6717568,Sb:10380213,SB:10380213,Te:13924864,TE:13924864,I:9699476,Xe:4366e3,XE:4366e3,Cs:5707663,CS:5707663,Ba:51456,BA:51456,La:7394559,LA:7394559,Ce:16777159,CE:16777159,Pr:14286791,PR:14286791,Nd:13107143,ND:13107143,Pm:10747847,PM:10747847,Sm:9437127,SM:9437127,Eu:6422471,EU:6422471,Gd:4587463,GD:4587463,Tb:3211207,TB:3211207,Dy:2097095,DY:2097095,Ho:65436,HO:65436,Er:58997,ER:58997,Tm:54354,TM:54354,Yb:48952,YB:48952,Lu:43812,LU:43812,Hf:5096191,HF:5096191,Ta:5089023,TA:5089023,W:2200790,Re:2522539,RE:2522539,Os:2516630,OS:2516630,Ir:1528967,IR:1528967,Pt:13684960,PT:13684960,Au:16765219,AU:16765219,Hg:12105936,HG:12105936,Tl:10900557,TL:10900557,Pb:5724513,PB:5724513,Bi:10375093,BI:10375093,Po:11230208,PO:11230208,At:7688005,AT:7688005,Rn:4358806,RN:4358806,Fr:4325478,FR:4325478,Ra:32e3,RA:32e3,Ac:7384058,AC:7384058,Th:47871,TH:47871,Pa:41471,PA:41471,U:36863,Np:33023,NP:33023,Pu:27647,PU:27647,Am:5528818,AM:5528818,Cm:7888099,CM:7888099,Bk:9064419,BK:9064419,Cf:10565332,CF:10565332,Es:11739092,ES:11739092,Fm:11739066,FM:11739066,Md:11734438,MD:11734438,No:12389767,NO:12389767,Lr:13041766,LR:13041766,Rf:13369433,RF:13369433,Db:13697103,DB:13697103,Sg:14221381,SG:14221381,Bh:14680120,BH:14680120,Hs:15073326,HS:15073326,Mt:15400998,MT:15400998},rasmol:m,defaultColors:Object.assign({},m),greenCarbon:Object.assign(Object.assign({},m),{C:65280}),cyanCarbon:Object.assign(Object.assign({},m),{C:65535}),magentaCarbon:Object.assign(Object.assign({},m),{C:16711935}),yellowCarbon:Object.assign(Object.assign({},m),{C:16776960}),whiteCarbon:Object.assign(Object.assign({},m),{C:16777215}),orangeCarbon:Object.assign(Object.assign({},m),{C:16753920}),purpleCarbon:Object.assign(Object.assign({},m),{C:8388736}),blueCarbon:Object.assign(Object.assign({},m),{C:255})},A={amino:{ALA:13158600,ARG:1334015,ASN:56540,ASP:15075850,CYS:15132160,GLN:56540,GLU:15075850,GLY:15461355,HIS:8553170,ILE:1016335,LEU:1016335,LYS:1334015,MET:15132160,PHE:3289770,PRO:14456450,SER:16422400,THR:16422400,TRP:11819700,TYR:3289770,VAL:1016335,ASX:16738740,GLX:16738740},shapely:{ALA:9240460,ARG:124,ASN:16743536,ASP:10485826,CYS:16777072,GLN:16731212,GLU:6684672,GLY:16777215,HIS:7368959,ILE:19456,LEU:4546117,LYS:4671416,MET:12099650,PHE:5459026,PRO:5395026,SER:16740418,THR:12078080,TRP:5195264,TYR:9203788,VAL:16747775,ASX:16711935,GLX:16711935},nucleic:{A:10526975,G:16740464,I:8454143,C:16747595,T:10551200,U:16744576}},g={atom:{A:12636415,B:11599792,C:16761032,D:16777088,E:16761087,F:11596016,G:16765040,H:15761536,I:16113331,J:49151,K:13458524,L:6737322,M:10145074,N:15631086,O:52945,P:65407,Q:3978097,R:139,S:12433259,T:25600,U:8388608,V:8421376,W:8388736,X:32896,Y:12092939,Z:11674146},hetatm:{A:9478351,B:8441752,C:13602992,D:13619056,E:13603023,F:8437952,G:13607008,H:12603504,I:12955267,J:42959,K:11881548,L:5682578,M:9090346,N:12481214,O:46753,P:53103,Q:3447649,R:187,S:10854235,T:37888,U:11534336,V:11579392,W:11534512,X:45232,Y:15250963,Z:12726834}},T={ssPyMol:{prop:"ss",map:R.pyMol},ssJmol:{prop:"ss",map:R.Jmol},Jmol:{prop:"elem",map:_.Jmol},amino:{prop:"resn",map:A.amino},shapely:{prop:"resn",map:A.shapely},nucleic:{prop:"resn",map:A.nucleic},chain:{prop:"chain",map:g.atom},rasmol:{prop:"elem",map:_.rasmol},default:{prop:"elem",map:_.defaultColors},greenCarbon:{prop:"elem",map:_.greenCarbon},chainHetatm:{prop:"chain",map:g.hetatm},cyanCarbon:{prop:"elem",map:_.cyanCarbon},magentaCarbon:{prop:"elem",map:_.magentaCarbon},purpleCarbon:{prop:"elem",map:_.purpleCarbon},whiteCarbon:{prop:"elem",map:_.whiteCarbon},orangeCarbon:{prop:"elem",map:_.orangeCarbon},yellowCarbon:{prop:"elem",map:_.yellowCarbon},blueCarbon:{prop:"elem",map:_.blueCarbon}}},"./src/glcartoon.ts":(o,u,a)=>{a.r(u),a.d(u,{drawCartoon:()=>G,subdivide_spline:()=>g});var c=a("./src/WebGL/math/index.ts"),y=a("./src/WebGL/shapes/index.ts"),S=a("./src/WebGL/index.ts"),R=a("./src/Gradient.ts"),m=a("./src/colors.ts"),_=a("./src/GLDraw.ts"),A=a("./src/utilities.ts");function g(B,K){var k=[],U=B;U=[],U.push(B[0]);var W,F,Y,j,H,Z,ne,se,me;for(W=1,F=B.length-1;W<F;W++)if(H=B[W],Z=B[W+1],H.smoothen){var de=new c.Vector3((H.x+Z.x)/2,(H.y+Z.y)/2,(H.z+Z.z)/2);de.atom=H.atom,U.push(de)}else U.push(H);for(U.push(B[B.length-1]),W=-1,Y=U.length;W<=Y-3;W++)if(j=U[W===-1?0:W],H=U[W+1],Z=U[W+2],ne=U[W===Y-3?Y-1:W+3],se=new c.Vector3().subVectors(Z,j).multiplyScalar(.5),me=new c.Vector3().subVectors(ne,H).multiplyScalar(.5),!Z.skip)for(var ue=0;ue<K;ue++){var ce=1/K*ue,pe=H.x+ce*se.x+ce*ce*(-3*H.x+3*Z.x-2*se.x-me.x)+ce*ce*ce*(2*H.x-2*Z.x+se.x+me.x),De=H.y+ce*se.y+ce*ce*(-3*H.y+3*Z.y-2*se.y-me.y)+ce*ce*ce*(2*H.y-2*Z.y+se.y+me.y),we=H.z+ce*se.z+ce*ce*(-3*H.z+3*Z.z-2*se.z-me.z)+ce*ce*ce*(2*H.z-2*Z.z+se.z+me.z),je=new c.Vector3(pe,De,we);ue<K/2?je.atom=H.atom:je.atom=Z.atom,k.push(je)}return k.push(U[U.length-1]),k}const T=.5,O=1.3,w=.8,M=.4,f=.4;function i(B,K,k,U){for(var W,F,Y,j,H=0,Z=K.length;H<Z;H++){j=Math.round(H*(U.length-1)/Z),Y=m.CC.color(U[j]);var ne=B.updateGeoGroup(2),se=ne.vertexArray,me=ne.colorArray,de=ne.faceArray;W=ne.vertices,F=W*3,se[F]=K[H].x,se[F+1]=K[H].y,se[F+2]=K[H].z,se[F+3]=k[H].x,se[F+4]=k[H].y,se[F+5]=k[H].z;for(var ue=0;ue<6;++ue)me[F+3*ue]=Y.r,me[F+1+3*ue]=Y.g,me[F+2+3*ue]=Y.b;if(H>0){var ce=[W,W+1,W-1,W-2],pe=ne.faceidx;de[pe]=ce[0],de[pe+1]=ce[1],de[pe+2]=ce[3],de[pe+3]=ce[1],de[pe+4]=ce[2],de[pe+5]=ce[3],ne.faceidx+=6}ne.vertices+=2}}function l(B,K,k,U,W,F,Y){var j,H,Z,ne;if(Z=K.length,Z<2||K[0].length<2)return;for(j=0;j<Z;j++)K[j]=g(K[j],U);if(ne=K[0].length,!W)return i(B,K[0],K[Z-1],k);var se,me,de,ue,ce,pe,De=[],we=[],je=[];for(H=0;H<Z;H++)De.push(.25+1.5*Math.sqrt((Z-1)*H-Math.pow(H,2))/(Z-1)),we.push(.5),je.push(2*(Math.pow(H/Z,2)-H/Z)+.6);var ye=[];for(H=0;H<Z*2-1;H++)ye[H]=[H,H+1,H+1-2*Z,H-2*Z];ye[Z*2-1]=[H,H+1-2*Z,H+1-4*Z,H-2*Z];var he,Ce,ke,Xe,nt,at,rt,et,Je,$e;let We=B.updateGeoGroup();for(j=0;j<ne;j++){let re=B.groups,le=!1;We=B.updateGeoGroup(2*Z),re!=B.groups&&j>0&&(j=j-1,le=!0),at=Math.round(j*(k.length-1)/ne),nt=m.CC.color(k[at]),ce=de,pe=ue,de=[],ue=[],se=[],K[0][j].atom!==void 0&&(Xe=K[0][j].atom,Y==="oval"?me=De:Y==="rectangle"?me=we:Y==="parabola"&&(me=je)),me||(me=we);var ut,ot;for(H=0;H<Z;H++)j<ne-1?ut=K[H][j+1].clone().sub(K[H][j]):ut=K[H][j-1].clone().sub(K[H][j]).negate(),H<Z-1?ot=K[H+1][j].clone().sub(K[H][j]):ot=K[H-1][j].clone().sub(K[H][j]).negate(),se[H]=ot.cross(ut).normalize().multiplyScalar(W*me[H]);for(H=0;H<Z;H++)de[H]=K[H][j].clone().add(se[H].clone().negate());for(H=0;H<Z;H++)ue[H]=K[H][j].clone().add(se[H]);for(rt=We.vertexArray,et=We.colorArray,Je=We.faceArray,he=We.vertices,Ce=he*3,H=0;H<Z;H++)rt[Ce+3*H+0]=de[H].x,rt[Ce+3*H+1]=de[H].y,rt[Ce+3*H+2]=de[H].z;for(H=0;H<Z;H++)rt[Ce+3*H+0+3*Z]=ue[Z-1-H].x,rt[Ce+3*H+1+3*Z]=ue[Z-1-H].y,rt[Ce+3*H+2+3*Z]=ue[Z-1-H].z;for(H=0;H<2*Z;++H)et[Ce+3*H+0]=nt.r,et[Ce+3*H+1]=nt.g,et[Ce+3*H+2]=nt.b;if(j>0&&!le){for(H=0;H<Z*2;H++)$e=[he+ye[H][0],he+ye[H][1],he+ye[H][2],he+ye[H][3]],ke=We.faceidx,Je[ke]=$e[0],Je[ke+1]=$e[1],Je[ke+2]=$e[3],Je[ke+3]=$e[1],Je[ke+4]=$e[2],Je[ke+5]=$e[3],We.faceidx+=6;if(Xe.clickable||Xe.hoverable){var J=[];J.push(new y.Triangle(ce[0],de[0],de[Z-1])),J.push(new y.Triangle(ce[0],de[Z-1],ce[Z-1])),J.push(new y.Triangle(ce[Z-1],de[Z-1],ue[Z-1])),J.push(new y.Triangle(ce[Z-1],ue[Z-1],pe[Z-1])),J.push(new y.Triangle(ue[0],pe[0],pe[Z-1])),J.push(new y.Triangle(ue[Z-1],ue[0],pe[Z-1])),J.push(new y.Triangle(de[0],ce[0],pe[0])),J.push(new y.Triangle(ue[0],de[0],pe[0]));for(H in J)Xe.intersectionShape.triangle.push(J[H])}}We.vertices+=2*Z}for(rt=We.vertexArray,et=We.colorArray,Je=We.faceArray,he=We.vertices,Ce=he*3,ke=We.faceidx,j=0;j<Z-1;j++)$e=[j,j+1,2*Z-2-j,2*Z-1-j],ke=We.faceidx,Je[ke]=$e[0],Je[ke+1]=$e[1],Je[ke+2]=$e[3],Je[ke+3]=$e[1],Je[ke+4]=$e[2],Je[ke+5]=$e[3],We.faceidx+=6;for(j=0;j<Z-1;j++)$e=[he-1-j,he-2-j,he-2*Z+j+1,he-2*Z+j],ke=We.faceidx,Je[ke]=$e[0],Je[ke+1]=$e[1],Je[ke+2]=$e[3],Je[ke+3]=$e[1],Je[ke+4]=$e[2],Je[ke+5]=$e[3],We.faceidx+=6}function p(B,K,k,U,W,F){if(!(K.length<2)){var Y,j;if(Y=K[0],j=K[K.length-1],Y=g(Y,U),j=g(j,U),!W)return i(B,Y,j,k);var H=[],Z,ne,se,me,de,ue=[[0,2,-6,-8],[-4,-2,6,4],[7,-1,-5,3],[-3,5,1,-7]],ce,pe,De,we,je,ye,he,Ce,ke,Xe,nt,at,rt,et,Je,$e,We;for(Ce=0,ke=Y.length;Ce<ke;Ce++){if(je=Math.round(Ce*(k.length-1)/ke),we=m.CC.color(k[je]),H.push(ne=Y[Ce]),H.push(ne),H.push(se=j[Ce]),H.push(se),Ce<ke-1){var ut=Y[Ce+1].clone().sub(Y[Ce]),ot=j[Ce].clone().sub(Y[Ce]);Z=ot.cross(ut).normalize().multiplyScalar(W)}for(H.push(me=Y[Ce].clone().add(Z)),H.push(me),H.push(de=j[Ce].clone().add(Z)),H.push(de),ne.atom!==void 0&&(ye=ne.atom),et=B.updateGeoGroup(8),Je=et.vertexArray,$e=et.colorArray,We=et.faceArray,ce=et.vertices,pe=ce*3,Je[pe]=ne.x,Je[pe+1]=ne.y,Je[pe+2]=ne.z,Je[pe+3]=ne.x,Je[pe+4]=ne.y,Je[pe+5]=ne.z,Je[pe+6]=se.x,Je[pe+7]=se.y,Je[pe+8]=se.z,Je[pe+9]=se.x,Je[pe+10]=se.y,Je[pe+11]=se.z,Je[pe+12]=me.x,Je[pe+13]=me.y,Je[pe+14]=me.z,Je[pe+15]=me.x,Je[pe+16]=me.y,Je[pe+17]=me.z,Je[pe+18]=de.x,Je[pe+19]=de.y,Je[pe+20]=de.z,Je[pe+21]=de.x,Je[pe+22]=de.y,Je[pe+23]=de.z,Xe=0;Xe<8;++Xe)$e[pe+3*Xe]=we.r,$e[pe+1+3*Xe]=we.g,$e[pe+2+3*Xe]=we.b;if(Ce>0){var J=he!==void 0&&ye!==void 0&&he.serial!==ye.serial;for(Xe=0;Xe<4;Xe++){var re=[ce+ue[Xe][0],ce+ue[Xe][1],ce+ue[Xe][2],ce+ue[Xe][3]];if(De=et.faceidx,We[De]=re[0],We[De+1]=re[1],We[De+2]=re[3],We[De+3]=re[1],We[De+4]=re[2],We[De+5]=re[3],et.faceidx+=6,ye.clickable||he.clickable||ye.hoverable||he.hoverable){var le=H[re[3]].clone(),Re=H[re[0]].clone(),xe=H[re[2]].clone(),Ye=H[re[1]].clone();if(le.atom=H[re[3]].atom||null,xe.atom=H[re[2]].atom||null,Re.atom=H[re[0]].atom||null,Ye.atom=H[re[1]].atom||null,J){var Ge=le.clone().add(Re).multiplyScalar(.5),q=xe.clone().add(Ye).multiplyScalar(.5),_e=le.clone().add(Ye).multiplyScalar(.5);Xe%2===0?((he.clickable||he.hoverable)&&(nt=new y.Triangle(Ge,_e,le),at=new y.Triangle(q,xe,_e),rt=new y.Triangle(_e,xe,le),he.intersectionShape.triangle.push(nt),he.intersectionShape.triangle.push(at),he.intersectionShape.triangle.push(rt)),(ye.clickable||ye.hoverable)&&(nt=new y.Triangle(Re,Ye,_e),at=new y.Triangle(Ye,q,_e),rt=new y.Triangle(Re,_e,Ge),ye.intersectionShape.triangle.push(nt),ye.intersectionShape.triangle.push(at),ye.intersectionShape.triangle.push(rt))):((ye.clickable||ye.hoverable)&&(nt=new y.Triangle(Ge,_e,le),at=new y.Triangle(q,xe,_e),rt=new y.Triangle(_e,xe,le),ye.intersectionShape.triangle.push(nt),ye.intersectionShape.triangle.push(at),ye.intersectionShape.triangle.push(rt)),(he.clickable||he.hoverable)&&(nt=new y.Triangle(Re,Ye,_e),at=new y.Triangle(Ye,q,_e),rt=new y.Triangle(Re,_e,Ge),he.intersectionShape.triangle.push(nt),he.intersectionShape.triangle.push(at),he.intersectionShape.triangle.push(rt)))}else(ye.clickable||ye.hoverable)&&(nt=new y.Triangle(Re,Ye,le),at=new y.Triangle(Ye,xe,le),ye.intersectionShape.triangle.push(nt),ye.intersectionShape.triangle.push(at))}}}et.vertices+=8,he=ye}var Oe=H.length-8;for(et=B.updateGeoGroup(8),Je=et.vertexArray,$e=et.colorArray,We=et.faceArray,ce=et.vertices,pe=ce*3,De=et.faceidx,Ce=0;Ce<4;Ce++){H.push(H[Ce*2]),H.push(H[Oe+Ce*2]);var Ke=H[Ce*2],be=H[Oe+Ce*2];Je[pe+6*Ce]=Ke.x,Je[pe+1+6*Ce]=Ke.y,Je[pe+2+6*Ce]=Ke.z,Je[pe+3+6*Ce]=be.x,Je[pe+4+6*Ce]=be.y,Je[pe+5+6*Ce]=be.z,$e[pe+6*Ce]=we.r,$e[pe+1+6*Ce]=we.g,$e[pe+2+6*Ce]=we.b,$e[pe+3+6*Ce]=we.r,$e[pe+4+6*Ce]=we.g,$e[pe+5+6*Ce]=we.b}Oe+=8,nt=[ce,ce+2,ce+6,ce+4],at=[ce+1,ce+5,ce+7,ce+3],We[De]=nt[0],We[De+1]=nt[1],We[De+2]=nt[3],We[De+3]=nt[1],We[De+4]=nt[2],We[De+5]=nt[3],We[De+6]=at[0],We[De+7]=at[1],We[De+8]=at[3],We[De+9]=at[1],We[De+10]=at[2],We[De+11]=at[3],et.faceidx+=12,et.vertices+=8}}function v(B,K,k,U,W,F,Y){(!Y||Y==="default")&&(Y="rectangle"),Y==="edged"?p(B,K,k,U,W):(Y==="rectangle"||Y==="oval"||Y==="parabola")&&l(B,K,k,U,W,F,Y)}function b(B){return B&&B.elem==="C"&&B.atom==="CA"}function s(B,K){if(B&&K&&B.chain===K.chain){if(!B.hetflag&&!K.hetflag&&B.reschain===K.reschain&&(B.resi===K.resi||B.resi===K.resi-1))return!0;if(B.resi<K.resi){var k=B.x-K.x,U=B.y-K.y,W=B.z-K.z,F=k*k+U*U+W*W;if(B.atom=="CA"&&K.atom=="CA"&&F<16)return!0;if((B.atom=="P"||K.atom=="P")&&F<64)return!0}}return!1}function h(B,K,k,U,W){if(!(K==null||K.vertices==0)){W&&(K.initTypedArrays(),K.setUpNormals());var F=new S.MeshDoubleLambertMaterial;F.vertexColors=S.Coloring.FaceColors,typeof k=="number"&&k>=0&&k<1&&(F.transparent=!0,F.opacity=k),F.outline=U;var Y=new S.Mesh(K,F);B.add(Y)}}function E(B,K,k,U,W,F,Y,j,H){var Z,ne,se,me,de,ue;if(!(!U||!W||!Y)){var ce=W.sub(U);ce.normalize();var pe=j[H];for(ne=H+1;ne<j.length&&(pe=j[ne],pe.atom!=Y.atom);ne++);if(pe=pe?new c.Vector3(pe.x,pe.y,pe.z):new c.Vector3(0,0,0),pe.sub(U),Y.ss==="arrow start"){var De=pe.clone().multiplyScalar(.3).cross(W);U.add(De);var we=pe.clone().cross(ce).normalize();ce.rotateAboutVector(we,.43)}for(Y.style.cartoon.ribbon?Z=Y.style.cartoon.thickness||M:Y.style.cartoon.width?Z=Y.style.cartoon.width:Y.ss==="c"?Y.atom==="P"?Z=w:Z=T:Y.ss==="arrow start"?(Z=O,de=!0):Y.ss==="arrow end"||Y.ss==="h"&&Y.style.cartoon.tubes||Y.ss==="tube start"?Z=T:Z=O,F!=null&&ce.dot(F)<0&&ce.negate(),ce.multiplyScalar(Z),ne=0;ne<K;ne++)se=-1+ne*2/(K-1),me=new c.Vector3(U.x+se*ce.x,U.y+se*ce.y,U.z+se*ce.z),me.atom=Y,Y.ss==="s"&&(me.smoothen=!0),B[ne].push(me);if(de)for(ce.multiplyScalar(2),ne=0;ne<K;ne++)se=-1+ne*2/(K-1),me=new c.Vector3(U.x+se*ce.x,U.y+se*ce.y,U.z+se*ce.z),me.atom=Y,me.smoothen=!1,me.skip=!0,B[ne].push(me);return ue=Y.style.cartoon.style||"default",B.style?B.style!=ue&&(console.log("Warning: a cartoon chain's strand-style is ambiguous"),B.style="default"):B.style=ue,(Y.ss==="arrow start"||Y.ss==="arrow end")&&(Y.ss="s"),de}}const x={C:!0,CA:!0,O:!0,P:!0,OP2:!0,O2P:!0,"O5'":!0,"O3'":!0,"C5'":!0,"C2'":!0,"O5*":!0,"O3*":!0,"C5*":!0,"C2*":!0,N1:!0,N3:!0},D={DA:!0,DG:!0,A:!0,G:!0},z={DT:!0,DC:!0,U:!0,C:!0,T:!0},P={DA:!0,DG:!0,A:!0,G:!0,DT:!0,DC:!0,U:!0,C:!0,T:!0};function G(B,K,k,U=10){let W=U,F=U;var Y,j,H,Z,ne,se,me,de,ue,ce,pe,De,we,je,ye,he,Ce,ke,Xe=new S.Geometry(!0),nt=new S.Geometry(!0),at=[],rt=[],et=1,Je=!1,$e={};for(var We in R.Gradient.builtinGradients)R.Gradient.builtinGradients.hasOwnProperty(We)&&($e[We]=new R.Gradient.builtinGradients[We](k[1],k[0]));var ut=function(ee,He){return k&&He.color==="spectrum"?He.colorscheme in $e?$e[He.colorscheme].valueToHex(ee.resi):$e.sinebow.valueToHex(ee.resi):(0,A.getColorFromStyle)(ee,He).getHex()};for(de=0;de<W;de++)rt[de]=[];var ot=!1,J=!1,re=[];for(de in K){if(Z=K[de],Z.elem==="C"&&Z.atom==="CA"){var le=s(H,Z);le&&Z.ss==="s"?ot=!0:ot&&(H&&j&&H.style.cartoon.arrows&&j.style.cartoon.arrows&&(H.ss="arrow end",j.ss="arrow start"),ot=!1),le&&(H.ss==="h"||H.ss=="tube start")&&H.style.cartoon.tubes?!J&&H.ss!="tube start"&&Z.style.cartoon.tubes&&(Z.ss="tube start",J=!0):J&&(H.ss==="tube start"?H.ss="tube end":j&&j.style.cartoon.tubes&&(j.ss="tube end"),J=!1),j=H,H=Z}Z&&Z.atom in x&&re.push(Z)}J&&H.style.cartoon.tubes&&(H.ss="tube end",J=!1);var Re=function(ee){rt[0].length>0&&v(nt,rt,at,F,me,et,rt.style);var He=[],st=null;if(ee){for(de=0;de<W;de++)He[de]=rt[de][rt[de].length-1];st=at[at.length-1]}for(rt=[],de=0;de<W;de++)rt[de]=[];if(at=[],ee){for(de=0;de<W;de++)rt[de].push(He[de]);at.push(st)}h(B,nt,et,Je,!0),h(B,Xe,et,Je,!1),nt=new S.Geometry(!0),Xe=new S.Geometry(!0)};H=void 0;for(var xe=0;xe<re.length;xe++){Z=re[xe];var Ye=Z.resn.trim(),Ge=Ye in P;if(et=1,Y=Z.style.cartoon,H&&H.style.cartoon&&(et=H.style.cartoon.opacity),H&&H.style.cartoon&&H.style.cartoon.outline&&(Je=H.style.cartoon.outline),H&&H.style.cartoon&&(!Z.style.cartoon||H.style.cartoon.opacity!=Z.style.cartoon.opacity)&&Re(H.chain==Z.chain),Y.style==="trace"){if(!Z.hetflag){if(Z.elem==="C"&&Z.atom==="CA"||Ge&&Z.atom==="P"||Z.atom==="BB"){if(se=ut(Z,Y),(0,A.isNumeric)(Y.thickness)?me=Y.thickness:me=M,s(H,Z))if(se==ne){var q=m.CC.color(se);_.GLDraw.drawCylinder(Xe,H,Z,me,q,2,2)}else{var _e=new c.Vector3().addVectors(H,Z).multiplyScalar(.5),Oe=m.CC.color(ne),Ke=m.CC.color(se);_.GLDraw.drawCylinder(Xe,H,_e,me,Oe,2,0),_.GLDraw.drawCylinder(Xe,_e,Z,me,Ke,0,2)}if((Z.clickable===!0||Z.hoverable)&&Z.intersectionShape!==void 0){var be=new c.Vector3(Z.x,Z.y,Z.z);Z.intersectionShape.sphere.push(new y.Sphere(be,me))}H=Z,ne=se}}}else{if(b(Z)||Ge&&(Z.atom==="P"||Z.atom.indexOf("O5")==0)){if(ke)if(Z.ss==="tube end")ke=!1,Ce=new c.Vector3(Z.x,Z.y,Z.z),_.GLDraw.drawCylinder(Xe,he,Ce,2,m.CC.color(ne),1,1),Z.ss="h";else if(H.chain!=Z.chain||H.ss==="tube end")ke=!1,H.ss="h",Ce=new c.Vector3(H.x,H.y,H.z),_.GLDraw.drawCylinder(Xe,he,Ce,2,m.CC.color(ne),1,1);else continue;if(H&&(!s(H,Z)||H.ss==="tube start")){for(H.ss==="tube start"&&(ke=!0,he=new c.Vector3(H.x,H.y,H.z),H.ss="h"),ye&&(De?je=new c.Vector3().addVectors(H,De).multiplyScalar(.5):je=new c.Vector3(H.x,H.y,H.z),_.GLDraw.drawCylinder(Xe,je,ye,f,m.CC.color(ye.color),0,2),E(rt,W,!0,De,we,pe,H,re,xe),at.push(se),je=null,ye=null),rt[0].length>0&&v(nt,rt,at,F,me,et,rt.style),rt=[],de=0;de<W;de++)rt[de]=[];at=[]}if(H===void 0||H.rescode!=Z.rescode||H.resi!=Z.resi){if(ye&&H!=null){je=new c.Vector3().addVectors(H,Z).multiplyScalar(.5);var Ue=je.clone().sub(ye).multiplyScalar(.02);je.add(Ue),_.GLDraw.drawCylinder(Xe,je,ye,f,m.CC.color(ye.color),0,2),je=null,ye=null}se=ut(Z,Y),at.push(se),(0,A.isNumeric)(Y.thickness)?me=Y.thickness:me=M,H=Z,ue=new c.Vector3(H.x,H.y,H.z),ue.resi=H.resi,ne=se}(Z.clickable===!0||Z.hoverable===!0)&&(Z.intersectionShape===void 0||Z.intersectionShape.triangle===void 0)&&(Z.intersectionShape={sphere:null,cylinder:[],line:[],triangle:[]})}else H!=null&&(b(H)&&Z.atom==="O"||Ge&&H.atom==="P"&&(Z.atom==="OP2"||Z.atom==="O2P")||Ge&&H.atom.indexOf("O5")==0&&Z.atom.indexOf("C5")==0)?(ce=new c.Vector3(Z.x,Z.y,Z.z),ce.resi=Z.resi,(Z.atom==="OP2"||Z.atom==="O2P")&&(we=new c.Vector3(Z.x,Z.y,Z.z))):Ge&&Z.atom.indexOf("O3")==0?De=new c.Vector3(Z.x,Z.y,Z.z):(Z.atom==="N1"&&Ye in D||Z.atom==="N3"&&Ye in z)&&(ye=new c.Vector3(Z.x,Z.y,Z.z),ye.color=(0,A.getColorFromStyle)(Z,Y).getHex());ce&&ue&&ce.resi===ue.resi&&(E(rt,W,!0,ue,ce,pe,H,re,xe),pe=ce,ue=null,ce=null,at.push(se))}}ye&&(De?je=new c.Vector3().addVectors(H,De).multiplyScalar(.5):je=new c.Vector3(H.x,H.y,H.z),_.GLDraw.drawCylinder(Xe,je,ye,f,m.CC.color(ye.color),0,2),E(rt,W,!0,De,we,pe,H,re,xe),at.push(se)),Re(!1)}},"./src/index.ts":(o,u,a)=>{a.r(u),a.d(u,{CAP:()=>f.CAP,CC:()=>y.CC,CONTEXTS_PER_VIEWPORT:()=>p.CONTEXTS_PER_VIEWPORT,Color:()=>y.Color,CustomLinear:()=>c.CustomLinear,Cylinder:()=>A.Cylinder,GLDraw:()=>f.GLDraw,GLModel:()=>l.GLModel,GLShape:()=>M.GLShape,GLViewer:()=>p.GLViewer,GLVolumetricRender:()=>w.GLVolumetricRender,Gradient:()=>c.Gradient,GradientType:()=>c.GradientType,Label:()=>S.Label,LabelCount:()=>S.LabelCount,MarchingCube:()=>T.MarchingCube,MarchingCubeInitializer:()=>T.MarchingCubeInitializer,Matrix3:()=>_.Matrix3,Matrix4:()=>_.Matrix4,Parsers:()=>m.Parsers,PausableTimer:()=>g.PausableTimer,PointGrid:()=>T.PointGrid,ProteinSurface:()=>T.ProteinSurface,Quaternion:()=>_.Quaternion,ROYGB:()=>c.ROYGB,RWB:()=>c.RWB,Ray:()=>_.Ray,Sinebow:()=>c.Sinebow,Sphere:()=>A.Sphere,SurfaceType:()=>T.SurfaceType,Triangle:()=>A.Triangle,Vector2:()=>_.Vector2,Vector3:()=>_.Vector3,VolumeData:()=>O.VolumeData,adjustVolumeStyle:()=>g.adjustVolumeStyle,applyPartialCharges:()=>R.applyPartialCharges,autoinit:()=>v.autoinit,autoload:()=>v.autoload,base64ToArray:()=>g.base64ToArray,bondLength:()=>m.bondLength,builtinColorSchemes:()=>y.builtinColorSchemes,builtinGradients:()=>c.builtinGradients,chains:()=>y.chains,clamp:()=>_.clamp,conversionMatrix3:()=>_.conversionMatrix3,createStereoViewer:()=>p.createStereoViewer,createViewer:()=>p.createViewer,createViewerGrid:()=>p.createViewerGrid,deepCopy:()=>g.deepCopy,degToRad:()=>_.degToRad,download:()=>g.download,drawCartoon:()=>i.drawCartoon,elementColors:()=>y.elementColors,extend:()=>g.extend,get:()=>g.get,getAtomProperty:()=>g.getAtomProperty,getColorFromStyle:()=>g.getColorFromStyle,getElement:()=>g.getElement,getExtent:()=>g.getExtent,getGradient:()=>c.getGradient,getPropertyRange:()=>g.getPropertyRange,getbin:()=>g.getbin,htmlColors:()=>y.htmlColors,inflateString:()=>g.inflateString,isEmptyObject:()=>g.isEmptyObject,isNumeric:()=>g.isNumeric,makeFunction:()=>g.makeFunction,mergeGeos:()=>g.mergeGeos,normalizeValue:()=>c.normalizeValue,partialCharges:()=>R.partialCharges,processing_autoinit:()=>v.processing_autoinit,residues:()=>y.residues,setBondLength:()=>m.setBondLength,setSyncSurface:()=>T.setSyncSurface,specStringToObject:()=>g.specStringToObject,splitMesh:()=>M.splitMesh,ssColors:()=>y.ssColors,subdivide_spline:()=>i.subdivide_spline,syncSurface:()=>T.syncSurface,viewers:()=>v.viewers});var c=a("./src/Gradient.ts"),y=a("./src/colors.ts"),S=a("./src/Label.ts"),R=a("./src/partialCharges.ts"),m=a("./src/parsers/index.ts"),_=a("./src/WebGL/math/index.ts"),A=a("./src/WebGL/shapes/index.ts"),g=a("./src/utilities.ts"),T=a("./src/ProteinSurface4.ts"),O=a("./src/VolumeData.ts"),w=a("./src/VolumetricRender.ts"),M=a("./src/GLShape.ts"),f=a("./src/GLDraw.ts"),i=a("./src/glcartoon.ts"),l=a("./src/GLModel.ts"),p=a("./src/GLViewer.ts"),v=a("./src/autoload.ts");a("./src/specs.ts"),window&&(window.$3Dmol=u)},"./src/parsers/BCIF.ts":(o,u,a)=>{a.r(u),a.d(u,{BCIF:()=>M});var c=a("./src/utilities.ts"),y=a("./src/parsers/utils/computeSecondaryStructure.ts"),S=a("./src/parsers/utils/processSymmetries.ts"),R=a("./src/parsers/cifutils/category.ts"),m=a("./src/parsers/utils/assignPDBBonds.ts"),_=a("./src/WebGL/index.ts"),A=a("./src/parsers/utils/isEmpty.ts"),g=a("./src/vendor/mmtf.js");class T{constructor(i){if(this.C={},i){let l=i.getField("comp_id"),p=i.getField("atom_id_1"),v=i.getField("atom_id_2"),b=i.getField("value_order");for(let s=0;s<l.length;s++){let h=l[s],E=p[s],x=v[s],D=b[s],z=1;D=="doub"?z=2:D=="trip"&&(z=3),this.C[h]==null&&(this.C[h]={}),this.C[h][E]==null&&(this.C[h][E]={}),this.C[h][x]==null&&(this.C[h][x]={}),this.C[h][E][x]=z,this.C[h][x][E]=z}}}order(i,l,p){return this.C[i]!==void 0&&this.C[i][l]!==void 0&&this.C[i][l][p]!==void 0?this.C[i][l][p]:0}}class O{constructor(i){if(this.C=[],i){let l=i.getField("conn_type_id"),p=i.getField("ptnr1_label_asym_id"),v=i.getField("ptnr1_label_seq_id"),b=i.getField("ptnr1_label_comp_id"),s=i.getField("ptnr1_label_atom_id"),h=i.getField("ptnr2_label_asym_id"),E=i.getField("ptnr2_label_seq_id"),x=i.getField("ptnr2_label_comp_id"),D=i.getField("ptnr2_label_atom_id"),z=i.getField("pdbx_value_order");for(let P=0;P<l.length;P++)if(l[P]=="disulf"||l[P]=="covale"){let G=z?z[P]==""?1:parseInt(z[P]):1;this.C.push([[p[P],v[P],b[P],s[P]],[h[P],E[P],x[P],D[P]],G])}}}}class w{constructor(){this.R={}}add(i){this.R[i.lchain]==null&&(this.R[i.lchain]={}),this.R[i.lchain][i.lresi]==null&&(this.R[i.lchain][i.lresi]={}),this.R[i.lchain][i.lresi][i.lresn]==null&&(this.R[i.lchain][i.lresi][i.lresn]=[]),this.R[i.lchain][i.lresi][i.lresn].push(i),this.R[i.lchain][i.lresi][i.lresn][i.atom]=i}geta([i,l,p,v]){if(this.R[i]!==void 0&&this.R[i][l]!==void 0&&this.R[i][l][p]!==void 0)return this.R[i][l][p][v]}setBonds(i,l){for(let p in this.R)for(let v in this.R[p])for(let b in this.R[p][v]){let s=this.R[p][v][b];for(let h=0;h<s.length;h++)for(let E=h+1;E<s.length;E++){let x=s[h],D=s[E],z=i.order(b,x.atom,D.atom);x.altLoc!=D.altLoc&&x.altLoc!=""&&D.altLoc!=""&&(z=0),z>0&&(x.bonds.push(D.index),D.bonds.push(x.index),x.bondOrder.push(z),D.bondOrder.push(z))}}for(let p of l.C){let v=p[0],b=p[1],s=p[2],h=this.geta(v),E=this.geta(b);h!=null&&E!=null&&(h.bonds.push(E.index),E.bonds.push(h.index),h.bondOrder.push(s),E.bondOrder.push(s))}}}function M(f,i){var l=!i.keepH,p=i.altLoc?i.altLoc:"A",v=!i.noComputeSecondaryStructure;const b=!i.doAssembly,s=i.assignBonds===void 0?!0:i.assignBonds;if(typeof f=="string")try{f=(0,c.base64ToArray)(f)}catch{f=new TextEncoder().encode(f)}else f=new Uint8Array(f);var h=g.decodeMsgpack(f);h==31&&(f=(0,c.inflateString)(f,!1),h=g.decodeMsgpack(f));var E=[],x=E.modelData=[],D=h.dataBlocks.length;if(D==0)return E;i.multimodel||(D=1);for(let z=0;z<D;z++){let P=E.length;const G=[];x.push({symmetries:[]}),E.push([]);const B=h.dataBlocks[z],K=Object.create(null);for(const $e of B.categories)K[$e.name.substr(1)]=(0,R.Category)($e);let k={},U=K.struct_conf;if(U){let $e=U.getField("conf_type_id"),We=U.getField("beg_label_asym_id"),ut=U.getField("beg_label_seq_id"),ot=U.getField("end_label_seq_id");for(let J=0;J<$e.length;J++)if($e[J].startsWith("H")){let re=We[J],le=ut[J],Re=ot[J];re in k||(k[re]={}),k[re][le]="h1";for(let xe=le+1;xe<Re;xe++)k[re][xe]="h";k[re][Re]="h2"}}let W=K.struct_sheet_range;if(W){let $e=W.getField("id"),We=W.getField("beg_label_asym_id"),ut=W.getField("beg_label_seq_id"),ot=W.getField("end_label_seq_id");for(let J=0;J<$e.length;J++){let re=We[J],le=ut[J],Re=ot[J];re in k||(k[re]={}),k[re][le]="s1";for(let xe=le+1;xe<Re;xe++)k[re][xe]="s";k[re][Re]="s2"}}let F=K.pdbx_struct_oper_list,Y=F.getField("id");if(Y&&!b){let $e=F.getField("matrix[1][1]"),We=F.getField("matrix[1][2]"),ut=F.getField("matrix[1][3]"),ot=F.getField("matrix[2][1]"),J=F.getField("matrix[2][2]"),re=F.getField("matrix[2][3]"),le=F.getField("matrix[3][1]"),Re=F.getField("matrix[3][2]"),xe=F.getField("matrix[3][3]"),Ye=F.getField("vector[1]"),Ge=F.getField("vector[2]"),q=F.getField("vector[3]");for(let _e=0;_e<Y.length;_e++){const Oe=new _.Matrix4($e[_e],We[_e],ut[_e],Ye[_e],ot[_e],J[_e],re[_e],Ge[_e],le[_e],Re[_e],xe[_e],q[_e]);x[x.length-1].symmetries.push(Oe)}}let j=new T(K.chem_comp_bond),H=new w,Z=new O(K.struct_conn),ne=K.atom_site,se=ne.rowCount,me=ne.getField("group_PDB"),de=ne.getField("Cartn_x"),ue=ne.getField("Cartn_y"),ce=ne.getField("Cartn_z"),pe=ne.getField("auth_asym_id"),De=ne.getField("label_asym_id"),we=ne.getField("auth_seq_id"),je=ne.getField("label_seq_id"),ye=ne.getField("auth_comp_id"),he=ne.getField("label_comp_id"),Ce=ne.getField("auth_atom_id"),ke=ne.getField("label_atom_id"),Xe=ne.getField("type_symbol"),nt=ne.getField("B_iso_or_equiv"),at=ne.getField("id"),rt=ne.getField("label_alt_id"),et=ne.getField("pdbx_PDB_model_num"),Je=et?et[0]:0;for(let $e=0;$e<se;$e++){if(me!==void 0&&me[$e]==="TER")continue;if(et&&et[$e]!=Je)if(Je=et[$e],i.multimodel)i.onemol||(E.push([]),x.push(x[x.length-1]),Je=et[$e],H.setBonds(j,Z),H=new w);else break;const We={};We.x=de[$e],We.y=ue[$e],We.z=ce[$e],We.chain=pe?pe[$e]:De?De[$e]:void 0,We.lchain=De?De[$e]:void 0,We.resi=we?we[$e]:je?je[$e]:void 0,We.lresi=je?je[$e]:void 0,We.resn=ye?ye[$e].trim():he?he[$e].trim():void 0,We.lresn=he?he[$e].trim():void 0,We.atom=Ce?Ce[$e].replace(/"/gm,""):ke?ke[$e].replace(/"/gm,""):void 0,We.icode=rt?rt[$e]:void 0,We.altLoc=We.icode,We.hetflag=!me||me[$e]==="HETA"||me[$e]==="HETATM";let ut="X";Xe&&(ut=Xe[$e].replace(/\(?\+?\d+.*/,"")),We.elem=ut[0].toUpperCase()+ut.substring(1,2).toLowerCase(),nt&&(We.b=nt[$e]),!(l&&We.elem=="H")&&(We.altLoc!=""&&We.altLoc!=p&&p!="*"||(We.bonds=[],We.ss="c",We.serial=at[$e],We.model=Je,We.bondOrder=[],We.properties={},We.index=E[E.length-1].length,G[We.serial]=[E.length,We.index],E[E.length-1].push(We),H.add(We)))}if(H.setBonds(j,Z),!(0,A.isEmpty)(k))for(let $e=P;$e<E.length;$e++){let We=E[$e];for(let ut=0;ut<We.length;ut++){const ot=We[ut];if(ot!==void 0&&ot.lchain in k&&ot.lresi in k[ot.lchain]){const J=k[ot.lchain][ot.lresi];ot.ss=J[0],J.length>1&&(J[1]=="1"?ot.ssbegin=!0:J[1]=="2"&&(ot.ssend=!0))}}}i.multimodel&&z<D-1&&(i.onemol||(E.push([]),x.push({symmetries:[]})))}for(let z=0;z<E.length;z++)s&&!(i.duplicateAssemblyAtoms&&!i.dontConnectDuplicatedAtoms)&&(0,m.assignPDBBonds)(E[z],i),v&&(0,y.computeSecondaryStructure)(E[z],i.hbondCutoff),(0,S.processSymmetries)(x[z].symmetries,E[z],i,x[z].cryst),i.duplicateAssemblyAtoms&&!i.dontConnectDuplicatedAtoms&&s&&(0,m.assignPDBBonds)(E[z],i);return E}},"./src/parsers/CDJSON.ts":(o,u,a)=>{a.r(u),a.d(u,{CDJSON:()=>c});function c(y,S){var R=[[]];typeof y=="string"&&(y=JSON.parse(y));for(var m=y.m,_=m[0].a,A=m[0].b,g=m[0].s,T=S!==void 0&&S.parseStyle!==void 0?S.parseStyle:g!==void 0,O=R[R.length-1].length,w=0;w<_.length;w++){var M=_[w],f={};f.id=M.i,f.x=M.x,f.y=M.y,f.z=M.z||0,f.bonds=[],f.bondOrder=[];var i=M.l||"C";f.elem=i[0].toUpperCase()+i.substring(1).toLowerCase(),f.serial=R[R.length-1].length,T&&(f.style=g[M.s||0]),R[R.length-1].push(f)}for(let l=0;l<A.length;l++){let p=A[l],v=p.b+O,b=p.e+O,s=p.o||1,h=R[R.length-1][v],E=R[R.length-1][b];h.bonds.push(b),h.bondOrder.push(s),E.bonds.push(v),E.bondOrder.push(s)}return R}},"./src/parsers/CIF.ts":(o,u,a)=>{a.r(u),a.d(u,{CIF:()=>_});var c=a("./src/parsers/utils/computeSecondaryStructure.ts"),y=a("./src/parsers/utils/processSymmetries.ts"),S=a("./src/WebGL/index.ts"),R=a("./src/parsers/utils/assignPDBBonds.ts");const m=function(A,g,T,O){return new S.Vector3(g,T,O).applyMatrix3(A)};function _(A,g={}){const T=[],O=!g.doAssembly,w=T.modelData=[],M=g.assignBonds===void 0?!0:g.assignBonds;function f(s,h){const E=[];let x=0,D=0;for(;D<s.length;){for(;s.substring(D,D+h.length)!==h&&D<s.length;)if(s[D]==="'"){for(D++;D<s.length&&s[D]!=="'";)D++;for(;s.substring(D,D+h.length)!==h&&D<s.length;)D++}else if(s[D]==='"'){for(D++;D<s.length&&s[D]!=='"';)D++;D++}else D++;E.push(s.substring(x,D)),x=D=D+h.length}return E}const i=A.split(/\r?\n|\r/),l=[];let p=!1;for(let s=0;s<i.length;s++){var v=i[s].split("#")[0];if(p?v[0]===";"&&(p=!1):v[0]===";"&&(p=!0),p||v!==""){if(!p&&(v=v.trim(),v[0]==="_")){const h=v.split(/\s/)[0].indexOf(".");if(h>-1){let E=v.split("");E[h]="_",v=E.join(""),v=v.substring(0,h)+"_"+v.substring(h+1)}}l.push(v)}}let b=0;for(;b<l.length;){for(;!l[b].startsWith("data_")||l[b]==="data_global";)b++;b++;const s={};for(;b<l.length&&!l[b].startsWith("data_");)if(l[b][0]===void 0)b++;else if(l[b][0]==="_"){const D=l[b].split(/\s/)[0].toLowerCase(),z=s[D]=s[D]||[],P=l[b].substring(l[b].indexOf(D)+D.length);if(P==="")if(b++,l[b][0]===";"){let G=l[b].substring(1);for(b++;l[b]!==";";)G=G+`
`+l[b],b++;z.push(G)}else z.push(l[b]);else z.push(P.trim());b++}else if(l[b].substring(0,5)==="loop_"){b++;const D=[];for(;l[b]===""||l[b][0]==="_";){if(l[b]!==""){let P=l[b].split(/\s/)[0].toLowerCase(),G=s[P]=s[P]||[];D.push(G)}b++}let z=0;for(;b<l.length&&l[b][0]!=="_"&&!l[b].startsWith("loop_")&&!l[b].startsWith("data_");){let P=f(l[b]," ");for(let G=0;G<P.length;G++)P[G]!==""&&(D[z].push(P[G]),z=(z+1)%D.length);b++}}else b++;w.push({symmetries:[]}),T.push([]);const h=s._atom_site_id!==void 0?s._atom_site_id.length:s._atom_site_label.length;let E;if(s._cell_length_a!==void 0){const D=parseFloat(s._cell_length_a),z=parseFloat(s._cell_length_b),P=parseFloat(s._cell_length_c),G=parseFloat(s._cell_angle_alpha)||90,B=parseFloat(s._cell_angle_beta)||90,K=parseFloat(s._cell_angle_gamma)||90;E=(0,S.conversionMatrix3)(D,z,P,G,B,K),w[w.length-1].cryst={a:D,b:z,c:P,alpha:G,beta:B,gamma:K}}for(let D=0;D<h;D++){if(s._atom_site_group_pdb!==void 0&&s._atom_site_group_pdb[D]==="TER")continue;const z={};if(s._atom_site_cartn_x!==void 0)z.x=parseFloat(s._atom_site_cartn_x[D]),z.y=parseFloat(s._atom_site_cartn_y[D]),z.z=parseFloat(s._atom_site_cartn_z[D]);else{const G=m(E,parseFloat(s._atom_site_fract_x[D]),parseFloat(s._atom_site_fract_y[D]),parseFloat(s._atom_site_fract_z[D]));z.x=G.x,z.y=G.y,z.z=G.z}z.chain=s._atom_site_auth_asym_id?s._atom_site_auth_asym_id[D]:s._atom_site_label_asym_id?s._atom_site_label_asym_id[D]:void 0,z.resi=s._atom_site_auth_seq_id?parseInt(s._atom_site_auth_seq_id[D]):s._atom_site_label_seq_id?s._atom_site_label_seq_id[D]:void 0,z.resn=s._atom_site_auth_comp_id?s._atom_site_auth_comp_id[D].trim():s._atom_site_label_comp_id?s._atom_site_label_comp_id[D].trim():void 0,z.atom=s._atom_site_auth_atom_id?s._atom_site_auth_atom_id[D].replace(/"/gm,""):s._atom_site_label_atom_id?s._atom_site_label_atom_id[D].replace(/"/gm,""):void 0,z.hetflag=!s._atom_site_group_pdb||s._atom_site_group_pdb[D]==="HETA"||s._atom_site_group_pdb[D]==="HETATM",s._atom_site_b_iso_or_equiv&&(z.b=parseFloat(s._atom_site_b_iso_or_equiv[D]));let P="X";s._atom_site_type_symbol?P=s._atom_site_type_symbol[D].replace(/\(?\+?\d+.*/,""):s._atom_site_label&&(P=s._atom_site_label[D].split("_")[0].replace(/\(?\d+.*/,"")),z.elem=P[0].toUpperCase()+P.substring(1,2).toLowerCase(),z.bonds=[],z.ss="c",z.serial=D,z.bondOrder=[],z.properties={},T[T.length-1].push(z)}if(s._pdbx_struct_oper_list_id!==void 0&&!O)for(let D=0;D<s._pdbx_struct_oper_list_id.length;D++){const z=parseFloat(s["_pdbx_struct_oper_list_matrix[1][1]"][D]),P=parseFloat(s["_pdbx_struct_oper_list_matrix[1][2]"][D]),G=parseFloat(s["_pdbx_struct_oper_list_matrix[1][3]"][D]),B=parseFloat(s["_pdbx_struct_oper_list_vector[1]"][D]),K=parseFloat(s["_pdbx_struct_oper_list_matrix[2][1]"][D]),k=parseFloat(s["_pdbx_struct_oper_list_matrix[2][2]"][D]),U=parseFloat(s["_pdbx_struct_oper_list_matrix[2][3]"][D]),W=parseFloat(s["_pdbx_struct_oper_list_vector[2]"][D]),F=parseFloat(s["_pdbx_struct_oper_list_matrix[3][1]"][D]),Y=parseFloat(s["_pdbx_struct_oper_list_matrix[3][2]"][D]),j=parseFloat(s["_pdbx_struct_oper_list_matrix[3][3]"][D]),H=parseFloat(s["_pdbx_struct_oper_list_vector[3]"][D]),Z=new S.Matrix4(z,P,G,B,K,k,U,W,F,Y,j,H);w[w.length-1].symmetries.push(Z)}const x=function(D){const z=D.match("-");D=D.replace(/[-xyz]/g,"");const P=D.split("/");let G,B;return P[1]===void 0?B=1:B=parseInt(P[1]),P[0]===""?G=1:G=parseInt(P[0]),G/B*(z?-1:1)};if(s._symmetry_equiv_pos_as_xyz!==void 0&&!O)for(let D=0;D<s._symmetry_equiv_pos_as_xyz.length;D++){const P=s._symmetry_equiv_pos_as_xyz[D].replace(/["' ]/g,"").split(",").map(function(k){return k.replace(/-/g,"+-")});let G=new S.Matrix4(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1);for(let k=0;k<3;k++){const U=P[k].split("+");for(let W=0;W<U.length;W++){const F=U[W];if(F==="")continue;const Y=x(F);F.match("x")?G.elements[k+0]=Y:F.match("y")?G.elements[k+4]=Y:F.match("z")?G.elements[k+8]=Y:G.elements[k+12]=Y}}const B=E.getMatrix4(),K=new S.Matrix4().getInverse(B,!0);G=new S.Matrix4().multiplyMatrices(G,K),G=new S.Matrix4().multiplyMatrices(B,G),w[w.length-1].symmetries.push(G)}}for(let s=0;s<T.length;s++)M&&!(g.duplicateAssemblyAtoms&&!g.dontConnectDuplicatedAtoms)&&(0,R.assignPDBBonds)(T[s],g),(0,c.computeSecondaryStructure)(T[s],g.hbondCutoff),(0,y.processSymmetries)(w[s].symmetries,T[s],g,w[s].cryst),g.duplicateAssemblyAtoms&&!g.dontConnectDuplicatedAtoms&&M&&(0,R.assignPDBBonds)(T[s],g);return T}},"./src/parsers/CUBE.ts":(o,u,a)=>{a.r(u),a.d(u,{CUBE:()=>R});var c=a("./src/WebGL/index.ts"),y=a("./src/parsers/utils/assignBonds.ts"),S=a("./src/parsers/utils/anumToSymbol.ts");function R(m,_){_=_||{};const A=[[]];let g=m.split(/\r?\n/);const T=_.assignBonds===void 0?!0:_.assignBonds;if(g.length<6)return A;let O=g[2].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");const w=Math.abs(parseFloat(O[0]));let M={origin:void 0,size:void 0,unit:void 0,matrix4:void 0,matrix:void 0};const f=M.origin=new c.Vector3(parseFloat(O[1]),parseFloat(O[2]),parseFloat(O[3]));O=g[3].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),O=g[3].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");const i=O[0]>0?.529177:1;f.multiplyScalar(i);const l=Math.abs(O[0]),p=new c.Vector3(parseFloat(O[1]),parseFloat(O[2]),parseFloat(O[3])).multiplyScalar(i);O=g[4].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");const v=Math.abs(O[0]),b=new c.Vector3(parseFloat(O[1]),parseFloat(O[2]),parseFloat(O[3])).multiplyScalar(i);O=g[5].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");const s=Math.abs(O[0]),h=new c.Vector3(parseFloat(O[1]),parseFloat(O[2]),parseFloat(O[3])).multiplyScalar(i);if(M.size={x:l,y:v,z:s},M.unit=new c.Vector3(p.x,b.y,h.z),p.y!=0||p.z!=0||b.x!=0||b.z!=0||h.x!=0||h.y!=0){M.matrix4=new c.Matrix4(p.x,b.x,h.x,0,p.y,b.y,h.y,0,p.z,b.z,h.z,0,0,0,0,1);let B=new c.Matrix4().makeTranslation(f.x,f.y,f.z);M.matrix4=M.matrix4.multiplyMatrices(B,M.matrix4),M.matrix=M.matrix4.matrix3FromTopLeft(),M.origin=new c.Vector3(0,0,0),M.unit=new c.Vector3(1,1,1)}A.modelData=[{cryst:M}],g=g.splice(6,w);for(var E=A[A.length-1].length,x=E+g.length,D=E;D<x;++D){var z={};z.serial=D;var P=g[D-E],G=P.replace(/^\s+/,"").replace(/\s+/g," ").split(" ");z.elem=S.anumToSymbol[G[0]],z.x=parseFloat(G[2])*i,z.y=parseFloat(G[3])*i,z.z=parseFloat(G[4])*i,z.hetflag=!0,z.bonds=[],z.bondOrder=[],z.properties={},A[A.length-1].push(z)}if(T)for(let B=0;B<A.length;B++)(0,y.assignBonds)(A[B],_);return A}},"./src/parsers/GRO.ts":(o,u,a)=>{a.r(u),a.d(u,{GRO:()=>S});var c=a("./src/parsers/utils/assignPDBBonds.ts"),y=a("./src/parsers/utils/atomNameToElem.ts");function S(R,m){const _=[],A=R.split(/\r?\n|\r/);for(;A.length>0;){const g=parseInt(A[1]);if(A.length<3||isNaN(g)||g<=0||A.length<g+3)break;const O=[];_.push(O);let w=2;const M=O.length,f=M+g;for(let i=M;i<f;i++){const l=A[w++],p={};p.serial=i,p.atom=l.slice(10,15).trim(),p.elem=(0,y.atomNameToElem)(p.atom,!0),p.x=10*parseFloat(l.slice(20,28)),p.y=10*parseFloat(l.slice(28,36)),p.z=10*parseFloat(l.slice(36,44)),p.resi=parseInt(l.slice(0,5)),p.resn=l.slice(5,10).trim(),p.bonds=[],p.bondOrder=[],p.properties={},l.length>44&&(p.dx=10*parseFloat(l.slice(44,52)),p.dy=10*parseFloat(l.slice(52,60)),p.dz=10*parseFloat(l.slice(60,68))),O[i]=p}if(A.length<=w+3){const l=A[w++].trim().split(/\s+/);if(l.length===3){for(let p=0;p<3;p++)l[p]=(parseFloat(l[p])*10).toString();_.box=l}}A.splice(0,++w)}for(let g=0;g<_.length;g++)(0,c.assignPDBBonds)(_[g],m);return _}},"./src/parsers/LAMMPSTRJ.ts":(o,u,a)=>{a.r(u),a.d(u,{LAMMPSTRJ:()=>S});var c=a("./src/parsers/utils/assignBonds.ts");const y={id:"serial",type:"atom",element:"elem",q:"charge",radius:"radius",x:"x",xu:"x",xs:"x",xsu:"x",y:"y",yu:"y",ys:"y",ysu:"y",z:"z",zu:"z",zs:"z",zsu:"z"};function S(R,m){const _=[],A=R.split(/\r?\n|\r/);let g=0,T=0,O=0;for(;O<A.length-9;){for(var w=O;w<A.length;w++)if(A[w].match(/ITEM: NUMBER OF ATOMS/)&&(T=parseInt(A[w+1])),A[w].match(/ITEM: ATOMS/)){g=w+1;break}const M=A[g-1].replace("ITEM: ATOMS ","").split(" ");_.push([]);for(let f=g;f<g+T;f++){const i={},l={},p=A[f].split(" ");for(let v=0;v<p.length;v++){const b=y[M[v]];b!==void 0&&(b==="serial"?i[b]=parseInt(p[v]):b==="x"||b==="y"||b==="z"?i[b]=parseFloat(p[v]):b==="charge"||b==="radius"?l[b]=parseFloat(p[v]):i[b]=p[v]),i.properties=l,i.bonds=[],i.bondOrder=[]}_[_.length-1][f-g]=i}O=g+T-1}if(m.assignBonds)for(let M=0;M<_.length;M++)(0,c.assignBonds)(_[M],m);return _}},"./src/parsers/MMTF.ts":(o,u,a)=>{a.r(u),a.d(u,{MMTFparser:()=>T});var c=a("./src/utilities.ts"),y=a("./src/WebGL/index.ts"),S=a("./src/parsers/utils/computeSecondaryStructure.ts"),R=a("./src/parsers/utils/processSymmetries.ts"),m=a("./src/vendor/mmtf.js"),_=function(O){return String.fromCharCode.apply(null,O).replace(/\0/g,"")},A=function(O){return O==0||O==2||O==4?"h":O==3?"s":"c"};let g=new Set(["D-SACCHARIDE","D-SACCHARIDE 1,4 AND 1,4 LINKING","D-SACCHARIDE 1,4 AND 1,6 LINKING","L-SACCHARIDE","L-SACCHARIDE 1,4 AND 1,4 LINKING","L-SACCHARIDE 1,4 AND 1,6 LINKING","NON-POLYMER","OTHER","PEPTIDE-LIKE","SACCHARIDE"]);function T(O,w){var M=!w.keepH,f=w.altLoc?w.altLoc:"A",i=!!w.noSecondaryStructure,l=!w.noComputeSecondaryStructure,p=!w.doAssembly,v=w.assemblyIndex?w.assemblyIndex:0;typeof O=="string"?O=(0,c.base64ToArray)(O):O=new Uint8Array(O);var b=m.decode(O),s=[[]],h=s.modelData=[],E=0,x=0,D=0,z=b.secStructList,P=b.bFactorList,G=b.altLocList,B=b.occupancyList,K=b.bondAtomList,k=b.bondOrderList,U=b.numModels;if(U==0)return s;w.multimodel||(U=1);var W,F,Y,j,H,Z,ne=[];if(!p&&b.bioAssemblyList&&b.bioAssemblyList.length>0){var se=b.bioAssemblyList[v].transformList;for(W=0,Z=se.length;W<Z;W++){var me=new y.Matrix4(se[W].matrix);me.transpose(),ne.push(me)}}var de=null;if(b.unitCell){var ue=b.unitCell;de={a:ue[0],b:ue[1],c:ue[2],alpha:ue[3],beta:ue[4],gamma:ue[5]}}let ce=[];b.entityList.forEach(Se=>{Se.chainIndexList.forEach(te=>{ce[te]=Se.type=="polymer"})});var pe=0;for(H=0;H<U;H++){var De=b.chainsPerModel[H],we=s[s.length-1],je=[];for(h.push({symmetries:ne,cryst:de}),W=0;W<De;++W){var ye=b.groupsPerChain[E],he=_(b.chainIdList.subarray(E*4,E*4+4));b.chainNameList&&(he=_(b.chainNameList.subarray(E*4,E*4+4)));var Ce=x,ke="";for(F=0;F<ye;++F){var Xe=b.groupList[b.groupTypeList[x]],nt=Xe.atomNameList.length,at=0,rt=!1,et=!1;if(z){at=z[x];var Je=A(at);(x==0||Je!=ke)&&(rt=!0),ke=Je;var $e=x+1;($e>=z.length||A(z[$e]!=Je))&&(et=!0)}var We=b.groupIdList[x],ut=Xe.groupName;let Se=Xe.chemCompType;var ot=D;let te=g.has(Se)||!ce[E];for(Y=0;Y<nt;++Y){var J=Xe.elementList[Y];if(M&&J=="H"){D+=1;continue}var re="";P&&(re=P[D]);var le="";G&&G[D]&&(le=String.fromCharCode(G[D]));var Re="";if(B&&(Re=B[D]),le!=""&&le!=f&&f!="*"){D+=1;continue}var xe=b.atomIdList[D],Ye=Xe.atomNameList[Y],Ge=0;Xe.atomChargeList&&(Ge=Xe.atomChargeList[Y]);var q=b.xCoordList[D],_e=b.yCoordList[D],Oe=b.zCoordList[D];je[D]=we.length,we.push({resn:ut,x:q,y:_e,z:Oe,elem:J,hetflag:te,chain:he,resi:We,icode:le,rescode:We+(le!=" "?"^"+le:""),serial:xe,altLoc:le,index:D,atom:Ye,bonds:[],ss:A(at),ssbegin:rt,ssend:et,bondOrder:[],properties:{charge:Ge,occupancy:Re},b:re}),D+=1}var Ke=Xe.bondAtomList;for(Y=0,j=Xe.bondOrderList.length;Y<j;++Y){var be=ot+Ke[Y*2],Ue=ot+Ke[Y*2+1],ee=Xe.bondOrderList[Y],He=je[be],st=je[Ue],V=we[He],Te=we[st];V&&Te&&(V.bonds.push(st),V.bondOrder.push(ee),Te.bonds.push(He),Te.bondOrder.push(ee))}x+=1}for(x=Ce,F=0;F<ye;++F)x+=1;E+=1}if(K)for(let Se=pe,te=K.length;Se<te;Se+=2){let ve=K[Se],Pe=K[Se+1],ft=k?k[Se/2]:1;if(ve>=D){pe=Se;break}let lt=je[ve],it=je[Pe],vt=we[lt],ir=we[it];vt&&ir&&(vt.bonds.push(it),vt.bondOrder.push(ft),ir.bonds.push(lt),ir.bondOrder.push(ft))}w.multimodel&&(w.onemol||s.push([]))}if(!p)for(let Se=0;Se<s.length;Se++)(0,R.processSymmetries)(h[Se].symmetries,s[Se],w,h[Se].cryst);return l&&!i&&(0,S.computeSecondaryStructure)(s,w.hbondCutoff),s}},"./src/parsers/MOL2.ts":(o,u,a)=>{a.r(u),a.d(u,{MOL2:()=>y});let c={"C.1":"C",C1:"C","C.2":"C",C2:"C","C.3":"C",C3:"C","C.ar":"C",Car:"C","C.cat":"C",Ccat:"C","H.spc":"H",Hspc:"H","H.t3p":"H",Ht3p:"H","N.1":"N",N1:"N","N.2":"N",N2:"N","N.3":"N",N3:"N","N.4":"N",N4:"N","N.am":"N",Nam:"N","N.ar":"N",Nar:"N","N.p13":"N",Np13:"N","O.2":"O",O2:"O","O.3":"O",O3:"O","O.co2":"O",Oco2:"O","O.spc":"O",Ospc:"O","O.t3p":"O",Ot3p:"O","P.3":"P",P3:"P","S.2":"S",S2:"S","S.3":"S",S3:"S","S.o":"S",So:"S","S.o2":"S",So2:"S"};function y(S,R){var m=[[]],_=!1;typeof R.keepH<"u"&&(_=!R.keepH);var A=S.search(/@<TRIPOS>MOLECULE/),g=S.search(/@<TRIPOS>ATOM/);if(A==-1||g==-1)return m;for(var T=S.substring(A).split(/\r?\n|\r/);T.length>0;){var O=[],w=T[2].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),M=parseInt(w[0]),f=0;w.length>1&&(f=parseInt(w[1]));var i=4,l;for(l=3;l<T.length;l++)if(T[l]=="@<TRIPOS>ATOM"){i=l+1;break}var p=m[m.length-1].length,v=p+M,b;for(l=p;l<v;l++){b=T[i++],w=b.replace(/^\s+/,"").replace(/\s+/g," ").split(" ");var s={},h=w[5];if(c[h]!==void 0?h=c[h]:(h=h.split(".")[0],h=h[0].toUpperCase()+h.substring(1).toLowerCase()),s.atom=w[1],s.elem=h,!(s.elem=="H"&&_)){var E=m[m.length-1].length,x=parseInt(w[0]);s.serial=x,s.x=parseFloat(w[2]),s.y=parseFloat(w[3]),s.z=parseFloat(w[4]),s.atom=w[5];var D=parseFloat(w[8]);s.index=E,s.bonds=[],s.bondOrder=[],s.properties={charge:D,partialCharge:D},O[x]=E,m[m.length-1].push(s)}}for(var z=!1;i<T.length;)if(T[i++]=="@<TRIPOS>BOND"){z=!0;break}if(z&&f)for(l=0;l<f;l++){b=T[i++],w=b.replace(/^\s+/,"").replace(/\s+/g," ").split(" ");var P=parseInt(w[1]),G=m[m.length-1][O[P]],B=parseInt(w[2]),K=m[m.length-1][O[B]],k=parseInt(w[3]);isNaN(k)&&(k=1),G!==void 0&&K!==void 0&&(G.bonds.push(O[B]),G.bondOrder.push(k),K.bonds.push(O[P]),K.bondOrder.push(k))}if(R.multimodel){R.onemol||m.push([]),T.splice(0,i),S=T.join(`
`);continue}else break}return m}},"./src/parsers/PDB.ts":(o,u,a)=>{a.r(u),a.d(u,{PDB:()=>y});var c=a("./src/parsers/utils/getSinglePDB.ts");function y(S,R){R=R||{};var m=[],_={};m.modelData=[];for(var A=S.split(/\r?\n|\r/);A.length>0;){var g=(0,c.getSinglePDB)(A,R,_),T=g[0],O=g[1];if(A=g[2],T.length!=0){if(R.multimodel&&R.onemol&&m.length>0)for(var w=m[0].length,M=0;M<T.length;M++){var f=T[M];f.index=M;for(var i=0;i<f.bonds.length;i++)f.bonds[i]+=w;m[0].push(f)}else m.modelData.push(O),m.push(T);if(!R.multimodel)break}}return m}},"./src/parsers/PQR.ts":(o,u,a)=>{a.r(u),a.d(u,{PQR:()=>S});var c=a("./src/parsers/utils/assignPDBBonds.ts"),y=a("./src/parsers/utils/computeSecondaryStructure.ts");function S(R,m){var _=[[]],A=!m.noSecondaryStructure;_.modelData=[{symmetries:[]}];var g=[],T=R.split(/\r?\n|\r/),O;for(let z=0;z<T.length;z++){O=T[z].replace(/^\s*/,"");var w=O.substring(0,6);if(w.indexOf("END")==0)if(m.multimodel){m.onemol||_.push([]);continue}else break;else if(w=="ATOM  "||w=="HETATM"){var M;let P=parseInt(O.substring(6,11)),G=O.substring(12,16).replace(/ /g,""),B=O.substring(17,20).trim(),K=O.substring(21,22),k=parseInt(O.substring(22,26));var f=O.substring(30).trim().split(/\s+/),i=parseFloat(f[0]),l=parseFloat(f[1]),p=parseFloat(f[2]),v=parseFloat(f[3]),b=parseFloat(f[4]),s=G[0];G.length>1&&G[1].toUpperCase()!=G[1]&&(s=G.substring(0,2)),O[0]=="H"?M=!0:M=!1,g[P]=_[_.length-1].length,_[_.length-1].push({resn:B,x:i,y:l,z:p,elem:s,hetflag:M,chain:K,resi:k,serial:P,atom:G,bonds:[],ss:"c",bondOrder:[],properties:{charge:v,partialCharge:v,radius:b},pdbline:O})}else if(w=="CONECT"){var h=parseInt(O.substring(6,11)),E=_[_.length-1][g[h]];for(let P=0;P<4;P++){var x=parseInt(O.substring([11,16,21,26][P],[11,16,21,26][P]+5)),D=_[_.length-1][g[x]];E!==void 0&&D!==void 0&&(E.bonds.push(g[x]),E.bondOrder.push(1))}}}for(let z=0;z<_.length;z++)(0,c.assignPDBBonds)(_[z],m),A&&(0,y.computeSecondaryStructure)(_[z],m.hbondCutoff);return _}},"./src/parsers/PRMTOP.ts":(o,u,a)=>{a.r(u),a.d(u,{PRMTOP:()=>c});function c(y){var S=[],R,m=0,_=y.split(/\r?\n|\r/);if(_.length>0&&_[0].includes("VERSION")){var A=_.filter(function(i){return i.includes("POINTERS")||i.includes("ATOM_NAME")||i.includes("CHARGE")||i.includes("RADII")||i.includes("BONDS_INC_HYDROGEN")||i.includes("BONDS_WITHOUT_HYDROGEN")}),g=M("POINTERS");if(g==-1)return[];var T=f(g),O=parseInt(_[g+1].slice(0,T[1]));if(isNaN(O)||O<=0)return[];if(g=M("ATOM_NAME"),g==-1)return[];T=f(g);var w=T[0];for(let i=0;i<O/T[0];i++){i==parseInt(O/T[0])&&(w=O%T[0]);for(let l=0;l<w;l++){let p={},v={charge:"",radii:""};p.serial=m,p.x=0,p.y=0,p.z=0,p.atom=_[g+1].slice(T[1]*l,T[1]*(l+1)).trim(),p.elem=_[g+1].slice(T[1]*l,T[1]*l+1).trim(),p.properties=v,p.bonds=[],p.bondOrder=[],S.push(p),m++}g++}if(g=M("CHARGE"),g!=-1){T=f(g),m=0,w=T[0];for(let i=0;i<O/T[0];i++){i==parseInt(O/T[0])&&(w=O%T[0]);for(let l=0;l<w;l++)S[m].properties.charge=parseFloat(_[g+1].slice(T[1]*l,T[1]*(l+1))),m++;g++}}if(g=M("RADII"),g!=-1){T=f(g),m=0,w=T[0];for(let i=0;i<O/T[0];i++){i==parseInt(O/T[0])&&(w=O%T[0]);for(let l=0;l<w;l++)S[m].properties.radii=parseFloat(_[g+1].slice(T[1]*l,T[1]*(l+1))),m++;g++}}if(g=M("BONDS_WITHOUT_HYDROGEN"),g!=-1)for(T=f(g),m=0,w=T[0],g=g+1;!_[g].match(/^%FLAG/);){_[g+1].match(/^%FLAG/)&&(w=O%T[0]);for(let i=0;i<w;i++)m%3==0?R=parseInt(_[g].slice(T[1]*i,T[1]*(i+1))/3):m%3==1&&S[R].bonds.push(parseInt(_[g].slice(T[1]*i,T[1]*(i+1))/3)),m++;g++}if(g=M("BONDS_INC_HYDROGEN"),g!=-1)for(T=f(g),m=0,w=T[0],g=g+1;!_[g].match(/^%FLAG/);){_[g+1].match(/^%FLAG/)&&(w=O%T[0]);for(let i=0;i<w;i++)m%3==0?R=parseInt(_[g].slice(T[1]*i,T[1]*(i+1))/3):m%3==1&&S[R].bonds.push(parseInt(_[g].slice(T[1]*i,T[1]*(i+1))/3)),m++;g++}}else return[];function M(i){var l=_.indexOf(A.filter(function(p){return p.includes(i)})[0]);if(Number.isInteger(l)&&l>0){for(;!_[l].includes("FORMAT");)l++;return l}else return-1}function f(i){var l=_[i].match(/\((\d*)\S*/),p=_[i].match(/[a-zA-Z](\d*)\)\s*/);return p==null&&(p=_[i].match(/[a-zA-Z](\d*)\.\d*\)\s*/)),[l[1],p[1]]}return[S]}},"./src/parsers/SDF.ts":(o,u,a)=>{a.r(u),a.d(u,{SDF:()=>S});var c=function(R,m){var _=[[]],A=!1;for(typeof m.keepH<"u"&&(A=!m.keepH);R.length>0&&!(R.length<4);){var g=parseInt(R[3].substring(0,3));if(isNaN(g)||g<=0)break;var T=parseInt(R[3].substring(3,6)),O=4;if(R.length<4+g+T)break;var w=[],M=_[_.length-1].length,f=M+g,i,l;for(i=M;i<f;i++,O++){l=R[O];var p={},v=l.substring(31,34).replace(/ /g,"");p.atom=p.elem=v[0].toUpperCase()+v.substring(1).toLowerCase(),(p.elem!=="H"||!A)&&(p.serial=i,w[i]=_[_.length-1].length,p.x=parseFloat(l.substring(0,10)),p.y=parseFloat(l.substring(10,20)),p.z=parseFloat(l.substring(20,30)),p.hetflag=!0,p.bonds=[],p.bondOrder=[],p.properties={},p.index=_[_.length-1].length,_[_.length-1].push(p))}for(i=0;i<T;i++,O++){l=R[O];var b=w[parseInt(l.substring(0,3))-1+M],s=w[parseInt(l.substring(3,6))-1+M],h=parseFloat(l.substring(6));typeof b<"u"&&typeof s<"u"&&(_[_.length-1][b].bonds.push(s),_[_.length-1][b].bondOrder.push(h),_[_.length-1][s].bonds.push(b),_[_.length-1][s].bondOrder.push(h))}if(m.multimodel){for(m.onemol||_.push([]);R[O]!=="$$$$"&&O<R.length;)O++;R.splice(0,++O)}else break}return _},y=function(R,m){var _=[[]],A=!1;for(typeof m.keepH<"u"&&(A=!m.keepH);R.length>0&&!(R.length<8||!R[4].startsWith("M  V30 BEGIN CTAB")||!R[5].startsWith("M  V30 COUNTS")||R[5].length<14);){var g=R[5].substring(13).match(/\S+/g);if(g.length<2)break;var T=parseInt(g[0]);if(isNaN(T)||T<=0)break;var O=parseInt(g[1]),w=7;if(R.length<8+T+O)break;var M=[],f=_[_.length-1].length,i=f+T,l,p;for(l=f;l<i;l++,w++){p=R[w];var v=p.substring(6).match(/\S+/g);if(v.length>4){var b={},s=v[1].replace(/ /g,"");b.atom=b.elem=s[0].toUpperCase()+s.substring(1).toLowerCase(),(b.elem!=="H"||!A)&&(b.serial=l,M[l]=_[_.length-1].length,b.x=parseFloat(v[2]),b.y=parseFloat(v[3]),b.z=parseFloat(v[4]),b.hetflag=!0,b.bonds=[],b.bondOrder=[],b.properties={},b.index=_[_.length-1].length,_[_.length-1].push(b))}}if(R[w]==="M  V30 END ATOM")w++;else break;if(O!==0&&R[w]==="M  V30 BEGIN BOND")w++;else break;for(l=0;l<O;l++,w++){p=R[w];var h=p.substring(6).match(/\S+/g);if(h.length>3){var E=M[parseInt(h[2])-1+f],x=M[parseInt(h[3])-1+f],D=parseFloat(h[1]);typeof E<"u"&&typeof x<"u"&&(_[_.length-1][E].bonds.push(x),_[_.length-1][E].bondOrder.push(D),_[_.length-1][x].bonds.push(E),_[_.length-1][x].bondOrder.push(D))}}if(m.multimodel){for(m.onemol||_.push([]);R[w]!=="$$$$"&&w<R.length;)w++;R.splice(0,++w)}else break}return _};function S(R,m){var _="V2000",A=R.split(/\r?\n|\r/);return A.length>3&&A[3].length>38&&(_=A[3].substring(34,39)),_==="V2000"?c(A,m):_==="V3000"?y(A,m):[[""]]}},"./src/parsers/VASP.ts":(o,u,a)=>{a.r(u),a.d(u,{VASP:()=>S});var c=a("./src/WebGL/index.ts"),y=a("./src/parsers/utils/assignBonds.ts");function S(R,m={}){var _=[[]],A={};const g=m.assignBonds===void 0?!0:m.assignBonds;var T=R.replace(/^\s+/,"").split(/\r?\n/);if(T.length<3)return _;if(T[1].match(/\d+/))A.length=parseFloat(T[1]);else return console.log("Warning: second line of the vasp structure file must be a number"),_;if(A.length<0)return console.log("Warning: Vasp implementation for negative lattice lengths is not yet available"),_;A.xVec=new Float32Array(T[2].replace(/^\s+/,"").split(/\s+/)),A.yVec=new Float32Array(T[3].replace(/^\s+/,"").split(/\s+/)),A.zVec=new Float32Array(T[4].replace(/^\s+/,"").split(/\s+/));var O=new c.Matrix3(A.xVec[0],A.xVec[1],A.xVec[2],A.yVec[0],A.yVec[1],A.yVec[2],A.zVec[0],A.zVec[1],A.zVec[2]);O.multiplyScalar(A.length),_.modelData=[{symmetries:[],cryst:{matrix:O}}];var w=T[5].trim().split(/\s+/),M=new Int16Array(T[6].trim().split(/\s+/)),f=T[7].trim(),i=!1;if(f.match(/S/)&&(i=!0,f=T[8].trim()),f.toLowerCase()[0]=="c")f="cartesian";else if(f.toLowerCase()[0]=="d")f="direct";else return console.log("Warning: Unknown vasp mode in POSCAR file: mode must be either C(artesian) or D(irect)"),_;if(w.length!=M.length)return console.log("Warning: declaration of atomary species wrong:"),console.log(w),console.log(M),_;i?T.splice(0,9):T.splice(0,8);for(var l=0,p=0,v=w.length;p<v;p++){for(var b=w[p],s=0,h=M[p];s<h;s++){var E=new Float32Array(T[l+s].trim().split(/\s+/)),x={};x.elem=b,f=="cartesian"?(x.x=A.length*E[0],x.y=A.length*E[1],x.z=A.length*E[2]):(x.x=A.length*(E[0]*A.xVec[0]+E[1]*A.yVec[0]+E[2]*A.zVec[0]),x.y=A.length*(E[0]*A.xVec[1]+E[1]*A.yVec[1]+E[2]*A.zVec[1]),x.z=A.length*(E[0]*A.xVec[2]+E[1]*A.yVec[2]+E[2]*A.zVec[2])),x.bonds=[],x.bondOrder=[],_[0].push(x)}l+=M[p]}if(g)for(let D=0;D<_.length;D++)(0,y.assignBonds)(_[D],m);return _}},"./src/parsers/XYZ.ts":(o,u,a)=>{a.r(u),a.d(u,{XYZ:()=>S});var c=a("./src/WebGL/index.ts"),y=a("./src/parsers/utils/assignBonds.ts");function S(R,m){m=m||{};for(var _=[[]],A=m.assignBonds===void 0?!0:m.assignBonds,g=R.trimStart().split(/\r?\n|\r/);g.length>0&&!(g.length<3);){var T=parseInt(g[0]);if(isNaN(T)||T<=0||g.length<T+2)break;var O=/Lattice\s*=\s*["\{\}]([^"\{\}]+)["\{\}]\s*/gi,w=O.exec(g[1]);if(w!=null&&w.length>1){var M=new Float32Array(w[1].split(/\s+/)),f=new c.Matrix3(M[0],M[3],M[6],M[1],M[4],M[7],M[2],M[5],M[8]);_.modelData=[{cryst:{matrix:f}}]}for(var i=2,l=_[_.length-1].length,p=l+T,v=l;v<p;v++){var b=g[i++],s=b.trim().split(/\s+/),h={};h.serial=v;var E=s[0];h.atom=h.elem=E[0].toUpperCase()+E.substring(1,2).toLowerCase(),h.x=parseFloat(s[1]),h.y=parseFloat(s[2]),h.z=parseFloat(s[3]),h.hetflag=!0,h.bonds=[],h.bondOrder=[],h.properties={},_[_.length-1][v]=h,s.length>=7&&(h.dx=parseFloat(s[4]),h.dy=parseFloat(s[5]),h.dz=parseFloat(s[6]))}if(m.multimodel)_.push([]),g.splice(0,i);else break}if(A)for(let D=0;D<_.length;D++)(0,y.assignBonds)(_[D],m);if(m.onemol){var x=_;_=[],_.push(x[0]);for(let D=1;D<x.length;D++){let z=_[0].length;for(let P=0;P<x[D].length;P++){let G=x[D][P];for(let B=0;B<G.bonds.length;B++)G.bonds[B]=G.bonds[B]+z;G.index=_[0].length,G.serial=_[0].length,_[0].push(G)}}}return _}},"./src/parsers/cifutils/category.ts":(o,u,a)=>{a.r(u),a.d(u,{Category:()=>y});var c=a("./src/parsers/cifutils/decoder.ts");function y(S){const R=Object.create(null),m=Object.create(null);for(const _ of S.columns)R[_.name]=_;return{rowCount:S.rowCount,name:S.name.substring(1),fieldNames:S.columns.map(_=>_.name),getField(_){const A=R[_];if(A)return m[_]||(m[_]=(0,c.decode)(A.data)),m[_]}}}},"./src/parsers/cifutils/decoder.ts":(o,u,a)=>{a.r(u),a.d(u,{decode:()=>R});var c=a("./src/parsers/cifutils/encoding.ts");const y=new Uint16Array(new Uint8Array([18,52]).buffer)[0]===13330;function S(z,P){const G=new ArrayBuffer(z.length),B=new Uint8Array(G);for(let K=0,k=z.length;K<k;K+=P)for(let U=0;U<P;U++)B[K+P-U-1]=z[K+U];return G}function R(z){let P=z.data;for(let G=z.encoding.length-1;G>=0;G--)P=m(P,z.encoding[G]);return P}function m(z,P){switch(P.kind){case"ByteArray":switch(P.type){case c.Encoding.IntDataType.Uint8:return z;case c.Encoding.IntDataType.Int8:return g(z);case c.Encoding.IntDataType.Int16:return O(z);case c.Encoding.IntDataType.Uint16:return w(z);case c.Encoding.IntDataType.Int32:return M(z);case c.Encoding.IntDataType.Uint32:return f(z);case c.Encoding.FloatDataType.Float32:return i(z);case c.Encoding.FloatDataType.Float64:return l(z);default:throw new Error("unreachable")}case"FixedPoint":return p(z,P);case"IntervalQuantization":return v(z,P);case"RunLength":return b(z,P);case"Delta":return s(z,P);case"IntegerPacking":return x(z,P);case"StringArray":return D(z,P)}}function _(z,P){switch(z){case c.Encoding.IntDataType.Int8:return new Int8Array(P);case c.Encoding.IntDataType.Int16:return new Int16Array(P);case c.Encoding.IntDataType.Int32:return new Int32Array(P);case c.Encoding.IntDataType.Uint8:return new Uint8Array(P);case c.Encoding.IntDataType.Uint16:return new Uint16Array(P);case c.Encoding.IntDataType.Uint32:return new Uint32Array(P);default:return new Int32Array(P)}}function A(z,P){switch(z){case c.Encoding.FloatDataType.Float32:return new Float32Array(P);case c.Encoding.FloatDataType.Float64:return new Float64Array(P);default:return new Float64Array(P)}}function g(z){return new Int8Array(z.buffer,z.byteOffset)}function T(z,P,G){return(z.byteOffset!=0||z.byteLength!=z.buffer.byteLength)&&(z=new Uint8Array(z)),y?new G(z.buffer):new G(S(z,P))}function O(z){return T(z,2,Int16Array)}function w(z){return T(z,2,Uint16Array)}function M(z){return T(z,4,Int32Array)}function f(z){return T(z,4,Uint32Array)}function i(z){return T(z,4,Float32Array)}function l(z){return T(z,8,Float64Array)}function p(z,P){const G=z.length,B=A(P.srcType,G),K=1/P.factor;for(let k=0;k<G;k++)B[k]=K*z[k];return B}function v(z,P){const G=z.length,B=A(P.srcType,G),K=(P.max-P.min)/(P.numSteps-1),k=P.min;for(let U=0;U<G;U++)B[U]=k+K*z[U];return B}function b(z,P){const G=_(P.srcType,P.srcSize);let B=0;for(let K=0,k=z.length;K<k;K+=2){const U=z[K],W=z[K+1];for(let F=0;F<W;++F)G[B++]=U}return G}function s(z,P){const G=z.length,B=_(P.srcType,G);if(!G)return z;B[0]=z[0]+(P.origin|0);for(let K=1;K<G;++K)B[K]=z[K]+B[K-1];return B}function h(z,P){const G=P.byteCount===1?127:32767,B=-G-1,K=z.length,k=new Int32Array(P.srcSize);let U=0,W=0;for(;U<K;){let F=0,Y=z[U];for(;Y===G||Y===B;)F+=Y,U++,Y=z[U];F+=Y,k[W]=F,U++,W++}return k}function E(z,P){const G=P.byteCount===1?255:65535,B=z.length,K=new Int32Array(P.srcSize);let k=0,U=0;for(;k<B;){let W=0,F=z[k];for(;F===G;)W+=F,k++,F=z[k];W+=F,K[U]=W,k++,U++}return K}function x(z,P){return z.length===P.srcSize?z:P.isUnsigned?E(z,P):h(z,P)}function D(z,P){const G=R({encoding:P.offsetEncoding,data:P.offsets}),B=R({encoding:P.dataEncoding,data:z}),K=P.stringData,k=new Array(G.length);k[0]="";for(let F=1,Y=G.length;F<Y;F++)k[F]=K.substring(G[F-1],G[F]);let U=0;const W=new Array(B.length);for(let F=0,Y=B.length;F<Y;F++)W[U++]=k[B[F]+1];return W}},"./src/parsers/cifutils/encoding.ts":(o,u,a)=>{a.r(u),a.d(u,{Encoding:()=>y,VERSION:()=>c});const c="0.3.0";var y;(function(S){(function(_){_[_.Int8=1]="Int8",_[_.Int16=2]="Int16",_[_.Int32=3]="Int32",_[_.Uint8=4]="Uint8",_[_.Uint16=5]="Uint16",_[_.Uint32=6]="Uint32"})(S.IntDataType||(S.IntDataType={})),function(_){_[_.Float32=32]="Float32",_[_.Float64=33]="Float64"}(S.FloatDataType||(S.FloatDataType={}));function R(_){let A;return _ instanceof Int8Array?A=S.IntDataType.Int8:_ instanceof Int16Array?A=S.IntDataType.Int16:_ instanceof Int32Array?A=S.IntDataType.Int32:_ instanceof Uint8Array?A=S.IntDataType.Uint8:_ instanceof Uint16Array?A=S.IntDataType.Uint16:_ instanceof Uint32Array?A=S.IntDataType.Uint32:_ instanceof Float32Array?A=S.FloatDataType.Float32:_ instanceof Float64Array?A=S.FloatDataType.Float64:A=S.IntDataType.Int32,A}S.getDataType=R;function m(_){if(_ instanceof Int8Array||_ instanceof Int16Array||_ instanceof Int32Array)return!0;for(let A=0,g=_.length;A<g;A++)if(A<0)return!1;return!0}S.isSignedIntegerDataType=m})(y||(y={}))},"./src/parsers/index.ts":(o,u,a)=>{a.r(u),a.d(u,{Parsers:()=>p,bondLength:()=>l.bondLength,setBondLength:()=>l.setBondLength});var c=a("./src/parsers/VASP.ts"),y=a("./src/parsers/CUBE.ts"),S=a("./src/parsers/XYZ.ts"),R=a("./src/parsers/SDF.ts"),m=a("./src/parsers/CDJSON.ts"),_=a("./src/parsers/CIF.ts"),A=a("./src/parsers/MOL2.ts"),g=a("./src/parsers/PDB.ts"),T=a("./src/parsers/PQR.ts"),O=a("./src/parsers/MMTF.ts"),w=a("./src/parsers/PRMTOP.ts"),M=a("./src/parsers/GRO.ts"),f=a("./src/parsers/LAMMPSTRJ.ts"),i=a("./src/parsers/BCIF.ts"),l=a("./src/parsers/utils/bondLength.ts");const p={vasp:c.VASP,VASP:c.VASP,cube:y.CUBE,CUBE:y.CUBE,xyz:S.XYZ,XYZ:S.XYZ,sdf:R.SDF,SDF:R.SDF,json:m.CDJSON,cdjson:m.CDJSON,CDJSON:m.CDJSON,mcif:_.CIF,cif:_.CIF,CIF:_.CIF,mol2:A.MOL2,MOL2:A.MOL2,pdb:g.PDB,PDB:g.PDB,pdbqt:g.PDB,PDBQT:g.PDB,pqr:T.PQR,PQR:T.PQR,mmtf:O.MMTFparser,MMTF:O.MMTFparser,prmtop:w.PRMTOP,PRMTOP:w.PRMTOP,gro:M.GRO,GRO:M.GRO,lammpstrj:f.LAMMPSTRJ,LAMMPSTRJ:f.LAMMPSTRJ,bcif:i.BCIF,BCIF:i.BCIF}},"./src/parsers/utils/anumToSymbol.ts":(o,u,a)=>{a.r(u),a.d(u,{anumToSymbol:()=>c});const c={1:"H",2:"He",3:"Li",4:"Be",5:"B",6:"C",7:"N",8:"O",9:"F",10:"Ne",11:"Na",12:"Mg",13:"Al",14:"Si",15:"P",16:"S",17:"Cl",18:"Ar",19:"K",20:"Ca",21:"Sc",22:"Ti",23:"V",24:"Cr",25:"Mn",26:"Fe",27:"Co",28:"Ni",29:"Cu",30:"Zn",31:"Ga",32:"Ge",33:"As",34:"Se",35:"Br",36:"Kr",37:"Rb",38:"Sr",39:"Y",40:"Zr",41:"Nb",42:"Mo",43:"Tc",44:"Ru",45:"Rh",46:"Pd",47:"Ag",48:"Cd",49:"In",50:"Sn",51:"Sb",52:"Te",53:"I",54:"Xe",55:"Cs",56:"Ba",71:"Lu",72:"Hf",73:"Ta",74:"W",75:"Re",76:"Os",77:"Ir",78:"Pt",79:"Au",80:"Hg",81:"Tl",82:"Pb",83:"Bi",84:"Po",85:"At",86:"Rn",87:"Fr",88:"Ra",104:"Rf",105:"Db",106:"Sg",107:"Bh",108:"Hs",109:"Mt",110:"Ds",111:"Rg",112:"Cn",113:"Nh",114:"Fl",115:"Mc",116:"Lv",117:"Ts",118:"Og",57:"La",58:"Ce",59:"Pr",60:"Nd",61:"Pm",62:"Sm",63:"Eu",64:"Gd",65:"Tb",66:"Dy",67:"Ho",68:"Er",69:"Tm",70:"Yb",89:"Ac",90:"Th",91:"Pa",92:"U",93:"Np",94:"Pu",95:"Am",96:"Cm",97:"Bk",98:"Cf",99:"Es",100:"Fm",101:"Md",102:"No"}},"./src/parsers/utils/areConnected.ts":(o,u,a)=>{a.r(u),a.d(u,{areConnected:()=>S});var c=a("./src/parsers/utils/bondLength.ts");const y=new Set(["Na","K","Ca","Mg","Mn","Sr"]);function S(R,m,_){if(_&&_.unboundCations&&(y.has(R.elem)||y.has(m.elem)))return!1;let A=(0,c.bondLength)(R.elem)+(0,c.bondLength)(m.elem);A+=.25,A*=A;let g=R.x-m.x;if(g*=g,g>A)return!1;let T=R.y-m.y;if(T*=T,T>A)return!1;let O=R.z-m.z;if(O*=O,O>A)return!1;const w=g+T+O;return!(isNaN(w)||w<.5||w>A||R.altLoc!==m.altLoc&&R.altLoc.trim()!==""&&m.altLoc.trim()!=="")}},"./src/parsers/utils/assignBackboneHBonds.ts":(o,u,a)=>{a.r(u),a.d(u,{assignBackboneHBonds:()=>c});function c(y,S){const R=S||3.2,m=R*R,_=[];for(let A=0,g=y.length;A<g;A++){y[A].index=A;const T=y[A];!T.hetflag&&(T.atom==="N"||T.atom==="O")&&(_.push(T),T.hbondOther=null,T.hbondDistanceSq=Number.POSITIVE_INFINITY)}_.sort(function(A,g){return A.z-g.z});for(let A=0,g=_.length;A<g;A++){const T=_[A];for(let O=A+1;O<g;O++){const w=_[O],M=w.z-T.z;if(M>R)break;if(w.atom==T.atom)continue;const f=Math.abs(w.y-T.y);if(f>R)continue;const i=Math.abs(w.x-T.x);if(i>R)continue;const l=i*i+f*f+M*M;l>m||w.chain==T.chain&&Math.abs(w.resi-T.resi)<4||(l<T.hbondDistanceSq&&(T.hbondOther=w,T.hbondDistanceSq=l),l<w.hbondDistanceSq&&(w.hbondOther=T,w.hbondDistanceSq=l))}}}},"./src/parsers/utils/assignBonds.ts":(o,u,a)=>{a.r(u),a.d(u,{assignBonds:()=>R});var c=a("./src/parsers/utils/areConnected.ts");const y=[{x:0,y:0,z:1},{x:0,y:1,z:-1},{x:0,y:1,z:0},{x:0,y:1,z:1},{x:1,y:-1,z:-1},{x:1,y:-1,z:0},{x:1,y:-1,z:1},{x:1,y:0,z:-1},{x:1,y:0,z:0},{x:1,y:0,z:1},{x:1,y:1,z:-1},{x:1,y:1,z:0},{x:1,y:1,z:1}],S=4.95;function R(m,_){for(let T=0,O=m.length;T<O;T++)m[T].index||(m[T].index=T);const A={x:{y:{z:[]}}};for(let T=0;T<m.length;T++){const O=m[T],w=Math.floor(O.x/S),M=Math.floor(O.y/S),f=Math.floor(O.z/S);A[w]||(A[w]={}),A[w][M]||(A[w][M]={}),A[w][M][f]||(A[w][M][f]=[]),A[w][M][f].push(O)}function g(T,O){for(let w=0;w<T.length;w++){const M=T[w];for(let f=0;f<O.length;f++){const i=O[f];if((0,c.areConnected)(M,i,_)){const l=M.bonds.indexOf(i.index),p=i.bonds.indexOf(M.index);l===-1&&p===-1?(M.bonds.push(i.index),M.bondOrder.push(1),i.bonds.push(M.index),i.bondOrder.push(1)):l===-1?(M.bonds.push(i.index),M.bondOrder.push(i.bondOrder[p])):p===-1&&(i.bonds.push(M.index),i.bondOrder.push(M.bondOrder[l]))}}}}for(let T in A){const O=parseInt(T);for(let w in A[O]){const M=parseInt(w);for(let f in A[O][M]){const i=parseInt(f),l=A[O][M][i];for(let p=0;p<l.length;p++){const v=l[p];for(let b=p+1;b<l.length;b++){const s=l[b];(0,c.areConnected)(v,s,_)&&v.bonds.indexOf(s.index)==-1&&(v.bonds.push(s.index),v.bondOrder.push(1),s.bonds.push(v.index),s.bondOrder.push(1))}}for(let p=0;p<y.length;p++){const v=y[p];if(!A[O+v.x]||!A[O+v.x][M+v.y]||!A[O+v.x][M+v.y][i+v.z])continue;const b=A[O+v.x][M+v.y][i+v.z];g(l,b)}}}}}},"./src/parsers/utils/assignPDBBonds.ts":(o,u,a)=>{a.r(u),a.d(u,{assignPDBBonds:()=>R});var c=a("./src/parsers/utils/areConnected.ts"),y=a("./src/parsers/utils/assignBonds.ts"),S=a("./src/parsers/utils/standardResidues.ts");function R(m,_){const A=[],g=[];for(let M=0,f=m.length;M<f;M++){const i=m[M];i.index=M,i.hetflag||!S.standardResidues.has(i.resn)?g.push(i):A.push(i)}(0,y.assignBonds)(g,_),A.sort(function(M,f){return M.chain!==f.chain?M.chain<f.chain?-1:1:M.resi-f.resi});let T=-1,O=-1,w;for(let M=0,f=A.length;M<f;M++){const i=A[M];i.resi!==T&&(T=i.resi,w||O++,w=!1),i.reschain=O;for(let l=M+1;l<A.length;l++){const p=A[l];if(p.chain!==i.chain||p.resi-i.resi>1)break;(0,c.areConnected)(i,p,_)&&(i.bonds.indexOf(p.index)===-1&&(i.bonds.push(p.index),i.bondOrder.push(1),p.bonds.push(i.index),p.bondOrder.push(1)),i.resi!==p.resi&&(w=!0))}}}},"./src/parsers/utils/atomNameToElem.ts":(o,u,a)=>{a.r(u),a.d(u,{atomNameToElem:()=>y});var c=a("./src/parsers/utils/bondLength.ts");function y(S,R){let m=S.replace(/ /g,"");return m.length>0&&m[0]==="H"&&m!=="Hg"&&m!=="He"&&m!=="Hf"&&m!=="Hs"&&m!=="Ho"&&(m="H"),m.length>1&&(m=m[0].toUpperCase()+m.substring(1).toLowerCase(),c.bondTable[m]===void 0?m=m[0]:R&&(m==="Ca"||m==="Cd")&&(m="C")),m}},"./src/parsers/utils/bondLength.ts":(o,u,a)=>{a.r(u),a.d(u,{bondLength:()=>y,bondTable:()=>c,setBondLength:()=>S});let c={H:.37,He:.32,Li:1.34,Be:.9,B:.82,C:.77,N:.75,O:.73,F:.71,Ne:.69,Na:1.54,Mg:1.3,Al:1.18,Si:1.11,P:1.06,S:1.02,Cl:.99,Ar:.97,K:1.96,Ca:1.74,Sc:1.44,Ti:1.56,V:1.25,Mn:1.39,Fe:1.25,Co:1.26,Ni:1.21,Cu:1.38,Zn:1.31,Ga:1.26,Ge:1.22,Se:1.16,Br:1.14,Kr:1.1,Rb:2.11,Sr:1.92,Y:1.62,Zr:1.48,Nb:1.37,Mo:1.45,Tc:1.56,Ru:1.26,Rh:1.35,Pd:1.31,Ag:1.53,Cd:1.48,In:1.44,Sn:1.41,Sb:1.38,Te:1.35,I:1.33,Xe:1.3,Cs:2.25,Ba:1.98,Lu:1.6,Hf:1.5,Ta:1.38,W:1.46,Re:1.59,Os:1.44,Ir:1.37,Pt:1.28,Au:1.44,Hg:1.49,Tl:1.48,Pb:1.47,Bi:1.46,Rn:1.45};function y(R){return c[R]||1.6}function S(R,m){m<0&&(m=0),c[R]=m}},"./src/parsers/utils/computeSecondaryStructure.ts":(o,u,a)=>{a.r(u),a.d(u,{computeSecondaryStructure:()=>y});var c=a("./src/parsers/utils/assignBackboneHBonds.ts");function y(S,R){(0,c.assignBackboneHBonds)(S,R);const m={};let _,A,g,T,O,w;for(_=0,A=S.length;_<A;_++)if(O=S[_],m[O.chain]===void 0&&(m[O.chain]=[]),isFinite(O.hbondDistanceSq)){const M=O.hbondOther;m[M.chain]===void 0&&(m[M.chain]=[]),Math.abs(M.resi-O.resi)===4&&(m[O.chain][O.resi]="h")}for(g in m)for(T=1;T<m[g].length-1;T++){const M=m[g][T-1],f=m[g][T+1];w=m[g][T],M=="h"&&M==f&&w!=M&&(m[g][T]=M)}for(_=0,A=S.length;_<A;_++)O=S[_],isFinite(O.hbondDistanceSq)&&m[O.chain][O.resi]!="h"&&O.ss!=="h"&&(m[O.chain][O.resi]="maybesheet");for(let M=0,f=S.length;M<f;M++)if(O=S[M],isFinite(O.hbondDistanceSq)&&m[O.chain][O.resi]=="maybesheet"){let i=O.hbondOther,l=m[i.chain][i.resi];(l=="maybesheet"||l=="s")&&(m[O.chain][O.resi]="s",m[i.chain][i.resi]="s")}for(let M in m){for(let f=1;f<m[M].length-1;f++){const i=m[M][f-1],l=m[M][f+1];w=m[M][f],i=="s"&&i==l&&w!=i&&(m[M][f]=i)}for(let f=0;f<m[M].length;f++){const i=m[M][f];(i=="h"||i=="s")&&m[M][f-1]!=i&&m[M][f+1]!=i&&delete m[M][f]}}for(_=0,A=S.length;_<A;_++)O=S[_],w=m[O.chain][O.resi],delete O.hbondOther,delete O.hbondDistanceSq,!(w===void 0||w==="maybesheet")&&(O.ss=w,m[O.chain][O.resi-1]!=w&&(O.ssbegin=!0),m[O.chain][O.resi+1]!=w&&(O.ssend=!0))}},"./src/parsers/utils/getSinglePDB.ts":(o,u,a)=>{a.r(u),a.d(u,{getSinglePDB:()=>T});var c=a("./src/WebGL/index.ts"),y=a("./src/parsers/utils/atomNameToElem.ts"),S=a("./src/parsers/utils/bondLength.ts"),R=a("./src/parsers/utils/computeSecondaryStructure.ts"),m=a("./src/parsers/utils/isEmpty.ts"),_=a("./src/parsers/utils/processSymmetries.ts"),A=a("./src/parsers/utils/assignPDBBonds.ts"),g=a("./src/parsers/utils/validateBonds.ts");function T(O,w,M){const f=[],i=w.assignBonds===void 0?!0:w.assignBonds,l=!w.keepH,p=!!w.noSecondaryStructure,v=!w.noComputeSecondaryStructure,b=!w.doAssembly,s=w.altLoc?w.altLoc:"A",h={symmetries:[],cryst:void 0};let E,x=[];const D=[];let z;const P={};for(let G=0;G<O.length;G++){z=O[G].replace(/^\s*/,"");const B=z.substring(0,6);let K,k,U;if(B.indexOf("END")===0){if(x=O.slice(G+1),B==="END")for(const W in M)M.hasOwnProperty(W)&&delete M[W];break}else if(B==="ATOM  "||B==="HETATM"){let W,F,Y,j,H,Z,ne,se,me,de,ue,ce;if(ue=z.substring(16,17),ue!==" "&&ue!==s&&s!=="*"||(de=parseInt(z.substring(6,11)),E=z.substring(12,16).replace(/ /g,""),W=z.substring(17,20).replace(/ /g,""),F=z.substring(21,22),Y=parseInt(z.substring(22,26)),j=z.substring(26,27),H=parseFloat(z.substring(30,38)),Z=parseFloat(z.substring(38,46)),ne=parseFloat(z.substring(46,54)),ce=parseFloat(z.substring(60,68)),me=z.substring(76,78).replace(/ /g,""),me===""||S.bondTable[me]===void 0?me=(0,y.atomNameToElem)(z.substring(12,14),z[0]=="A"):me=me[0].toUpperCase()+me.substring(1).toLowerCase(),me==="H"&&l))continue;B[0]=="H"?se=!0:se=!1,D[de]=f.length,f.push({resn:W,x:H,y:Z,z:ne,elem:me,hetflag:se,altLoc:ue,chain:F,resi:Y,icode:j,rescode:Y+(j!==" "?"^"+j:""),serial:de,atom:E,bonds:[],ss:"c",bondOrder:[],properties:{},b:ce,pdbline:z})}else if(B==="SHEET "){K=z.substring(21,22),k=parseInt(z.substring(22,26)),U=parseInt(z.substring(33,37)),K in M||(M[K]={}),M[K][k]="s1";for(let W=k+1;W<U;W++)M[K][W]="s";M[K][U]="s2"}else if(B==="CONECT"){const W=parseInt(z.substring(6,11)),F=D[W],Y=f[F],j=[11,16,21,26];for(let H=0;H<4;H++){const Z=parseInt(z.substring(j[H],j[H]+5)),ne=D[Z];let se=F+":"+ne;const me=f[ne];if(Y!==void 0&&me!==void 0)if(!P[se])P[se]=1,(Y.bonds.length==0||Y.bonds[Y.bonds.length-1]!==ne)&&(Y.bonds.push(ne),Y.bondOrder.push(1));else{P[se]+=1;for(let de=0;de<Y.bonds.length;de++)if(Y.bonds[de]==ne){const ue=P[se];ue>=4?Y.bondOrder[de]=1:Y.bondOrder[de]=ue}}}}else if(B==="HELIX "){K=z.substring(19,20),k=parseInt(z.substring(21,25)),U=parseInt(z.substring(33,37)),K in M||(M[K]={}),M[K][k]="h1";for(let W=k+1;W<U;W++)M[K][W]="h";M[K][U]="h2"}else if(!b&&B==="REMARK"&&z.substring(13,18)==="BIOMT"){let W,F=new c.Matrix4;for(W=1;W<=3;W++)if(z=O[G].replace(/^\s*/,""),parseInt(z.substring(18,19))==W)F.elements[W-1]=parseFloat(z.substring(23,33)),F.elements[W-1+4]=parseFloat(z.substring(33,43)),F.elements[W-1+8]=parseFloat(z.substring(43,53)),F.elements[W-1+12]=parseFloat(z.substring(53)),G++;else for(;z.substring(13,18)==="BIOMT";)G++,z=O[G].replace(/^\s*/,"");F.elements[3]=0,F.elements[7]=0,F.elements[11]=0,F.elements[15]=1,h.symmetries.push(F),G--}else if(B==="CRYST1"){let W,F,Y,j,H,Z;W=parseFloat(z.substring(7,15)),F=parseFloat(z.substring(16,24)),Y=parseFloat(z.substring(25,33)),j=parseFloat(z.substring(34,40)),H=parseFloat(z.substring(41,47)),Z=parseFloat(z.substring(48,54)),h.cryst={a:W,b:F,c:Y,alpha:j,beta:H,gamma:Z}}else if(B==="ANISOU"){const W=parseInt(z.substring(6,11)),F=D[W],Y=f[F];if(Y){const j=z.substring(30).trim().split(/\s+/),H={u11:parseInt(j[0]),u22:parseInt(j[1]),u33:parseInt(j[2]),u12:parseInt(j[3]),u13:parseInt(j[4]),u23:parseInt(j[5])};Y.uMat=H}}}if((0,g.validateBonds)(f,D),i&&(0,A.assignPDBBonds)(f,w),b||(0,_.processSymmetries)(h.symmetries,f,w,h.cryst),v&&!p&&(0,R.computeSecondaryStructure)(f,w.hbondCutoff),!(0,m.isEmpty)(M))for(let G=0;G<f.length;G++){const B=f[G];if(B!==void 0&&B.chain in M&&B.resi in M[B.chain]){const K=M[B.chain][B.resi];B.ss=K[0],K.length>1&&(K[1]=="1"?B.ssbegin=!0:K[1]=="2"&&(B.ssend=!0))}}return[f,h,x]}},"./src/parsers/utils/isEmpty.ts":(o,u,a)=>{a.r(u),a.d(u,{isEmpty:()=>c});function c(y){for(const S in y)return!1;return!0}},"./src/parsers/utils/processSymmetries.ts":(o,u,a)=>{a.r(u),a.d(u,{processSymmetries:()=>y});var c=a("./src/WebGL/index.ts");function y(S,R,m,_){const A=!m.duplicateAssemblyAtoms,g=R.length;let T=g,O=-1,w=null,M=null;(m.normalizeAssembly||m.wrapAtoms)&&_&&(w=(0,c.conversionMatrix3)(_.a,_.b,_.c,_.alpha,_.beta,_.gamma),M=new c.Matrix3,M.getInverse3(w));let f=function(p){let v=p.clone().applyMatrix3(M);const b=[v.x,v.y,v.z],s=[0,0,0];for(let E=0;E<3;E++){for(;b[E]<-.001;)b[E]+=1,s[E]+=1;for(;b[E]>1.001;)b[E]-=1,s[E]-=1}const h=new c.Vector3(s[0],s[1],s[2]);return h.applyMatrix3(w),h};if(m.normalizeAssembly&&_)for(let p=0;p<S.length;p++){const v=new c.Vector3(0,0,0);for(let s=0;s<g;s++){const h=new c.Vector3(R[s].x,R[s].y,R[s].z);h.applyMatrix4(S[p]),v.add(h)}v.divideScalar(g);const b=f(v);S[p].isNearlyIdentity()&&b.lengthSq()>.001&&(O=p),S[p].translate(b)}if(A){if(S.length>1)for(let p=0;p<R.length;p++){var i=[];for(let v=0;v<S.length;v++)if(!S[v].isNearlyIdentity()){var l=new c.Vector3;l.set(R[p].x,R[p].y,R[p].z),l.applyMatrix4(S[v]),i.push(l)}R[p].symmetries=i}}else{for(let p=0;p<g;p++)R[p].sym=-1;for(let p=0;p<S.length;p++)if(!S[p].isNearlyIdentity()&&O!=p){let v=new c.Vector3;for(let b=0;b<g;b++){const s=[];for(let E=0;E<R[b].bonds.length;E++)s.push(R[b].bonds[E]+T);if(v.set(R[b].x,R[b].y,R[b].z),v.applyMatrix4(S[p]),m.wrapAtoms&&_){let E=f(v);v.add(E)}const h={};for(const E in R[b])h[E]=R[b][E];h.x=v.x,h.y=v.y,h.z=v.z,h.bonds=s,h.sym=p,h.index=R.length,R.push(h)}T=R.length}else for(let v=0;v<g;v++)R[v].sym=p;if(m.wrapAtoms&&_){let p=new c.Vector3;for(let v=0;v<g;v++){p.set(R[v].x,R[v].y,R[v].z);let b=f(p);p.add(b),R[v].x=p.x,R[v].y=p.y,R[v].z=p.z}}if(O>=0){const p=new c.Vector3;for(let v=0;v<g;v++)p.set(R[v].x,R[v].y,R[v].z),p.applyMatrix4(S[O]),R[v].x=p.x,R[v].y=p.y,R[v].z=p.z}S.length=0}}},"./src/parsers/utils/standardResidues.ts":(o,u,a)=>{a.r(u),a.d(u,{standardResidues:()=>c});const c=new Set(["ABU","ACD","ALA","ALB","ALI","ARG","AR0","ASN","ASP","ASX","BAS","CYS","CYH","CYX","CSS","CSH","GLN","GLU","GLX","GLY","HIS","HIE","HID","HIP","HYP","ILE","ILU","LEU","LYS","MET","PCA","PGA","PHE","PR0","PRO","PRZ","SER","THR","TRP","TYR","VAL","A","1MA","C","5MC","OMC","G","1MG","2MG","M2G","7MG","OMG","YG","I","T","U","+U","H2U","5MU","PSU","ACE","F0R","H2O","HOH","WAT"])},"./src/parsers/utils/validateBonds.ts":(o,u,a)=>{a.r(u),a.d(u,{validateBonds:()=>c});function c(y,S){for(let R=0,m=y.length;R<m;R++){const _=y[R];for(let A=0;A<_.bonds.length;A++){const g=_.bonds[A],T=y[g],O=S[_.serial];T&&O&&T.bonds.indexOf(O)<0&&(T.bonds.push(O),T.bondOrder.push(_.bondOrder[A]))}}}},"./src/partialCharges.ts":(o,u,a)=>{a.r(u),a.d(u,{applyPartialCharges:()=>y,partialCharges:()=>c});const c={"ALA:N":-.15,"ALA:CA":.1,"ALA:CB":0,"ALA:C":.6,"ALA:O":-.55,"ARG:N":-.15,"ARG:CA":.1,"ARG:CB":0,"ARG:CG":0,"ARG:CD":.1,"ARG:NE":-.1,"ARG:CZ":.5,"ARG:NH1":.25,"ARG:NH2":.25,"ARG:C":.6,"ARG:O":-.55,"ASN:N":-.15,"ASN:CA":.1,"ASN:CB":0,"ASN:CG":.55,"ASN:OD1":-.55,"ASN:ND2":0,"ASN:C":.6,"ASN:O":-.55,"ASP:N":-.15,"ASP:CA":.1,"ASP:CB":0,"ASP:CG":.14,"ASP:OD1":-.57,"ASP:OD2":-.57,"ASP:C":.6,"ASP:O":-.55,"CYS:N":-.15,"CYS:CA":.1,"CYS:CB":.19,"CYS:SG":-.19,"CYS:C":.6,"CYS:O":-.55,"GLN:N":-.15,"GLN:CA":.1,"GLN:CB":0,"GLN:CG":0,"GLN:CD":.55,"GLN:OE1":-.55,"GLN:NE2":0,"GLN:C":.6,"GLN:O":-.55,"GLU:N":-.15,"GLU:CA":.1,"GLU:CB":0,"GLU:CG":0,"GLU:CD":.14,"GLU:OE1":-.57,"GLU:OE2":-.57,"GLU:C":.6,"GLU:O":-.55,"GLY:N":-.15,"GLY:CA":.1,"GLY:C":.6,"GLY:O":-.55,"HIS:N":-.15,"HIS:CA":.1,"HIS:CB":0,"HIS:CG":.1,"HIS:ND1":-.1,"HIS:CD2":.1,"HIS:NE2":-.4,"HIS:CE1":.3,"HIS:C":.6,"HIS:O":-.55,"ILE:N":-.15,"ILE:CA":.1,"ILE:CB":0,"ILE:CG2":0,"ILE:CG1":0,"ILE:CD":0,"ILE:C":.6,"ILE:O":-.55,"LEU:N":-.15,"LEU:CA":.1,"LEU:CB":0,"LEU:CG":0,"LEU:CD1":0,"LEU:CD2":0,"LEU:C":.6,"LEU:O":-.55,"LYS:N":-.15,"LYS:CA":.1,"LYS:CB":0,"LYS:CG":0,"LYS:CD":0,"LYS:CE":.25,"LYS:NZ":.75,"LYS:C":.6,"LYS:O":-.55,"MET:N":-.15,"MET:CA":.1,"MET:CB":0,"MET:CG":.06,"MET:SD":-.12,"MET:CE":.06,"MET:C":.6,"MET:O":-.55,"PHE:N":-.15,"PHE:CA":.1,"PHE:CB":0,"PHE:CG":0,"PHE:CD1":0,"PHE:CD2":0,"PHE:CE1":0,"PHE:CE2":0,"PHE:CZ":0,"PHE:C":.6,"PHE:O":-.55,"PRO:N":-.25,"PRO:CD":.1,"PRO:CA":.1,"PRO:CB":0,"PRO:CG":0,"PRO:C":.6,"PRO:O":-.55,"SER:N":-.15,"SER:CA":.1,"SER:CB":.25,"SER:OG":-.25,"SER:C":.6,"SER:O":-.55,"THR:N":-.15,"THR:CA":.1,"THR:CB":.25,"THR:OG1":-.25,"THR:CG2":0,"THR:C":.6,"THR:O":-.55,"TRP:N":-.15,"TRP:CA":.1,"TRP:CB":0,"TRP:CG":-.03,"TRP:CD2":.1,"TRP:CE2":-.04,"TRP:CE3":-.03,"TRP:CD1":.06,"TRP:NE1":-.06,"TRP:CZ2":0,"TRP:CZ3":0,"TRP:CH2":0,"TRP:C":.6,"TRP:O":-.55,"TYR:N":-.15,"TYR:CA":.1,"TYR:CB":0,"TYR:CG":0,"TYR:CD1":0,"TYR:CE1":0,"TYR:CD2":0,"TYR:CE2":0,"TYR:CZ":.25,"TYR:OH":-.25,"TYR:C":.6,"TYR:O":-.55,"VAL:N":-.15,"VAL:CA":.1,"VAL:CB":0,"VAL:CG1":0,"VAL:CG2":0,"VAL:C":.6,"VAL:O":-.55};function y(S,R){if((!R||typeof S.partialCharge>"u")&&S.resn&&S.atom){var m=S.resn+":"+S.atom;S.properties.partialCharge=c[m]}}},"./src/specs.ts":(o,u,a)=>{a.r(u)},"./src/utilities.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{PausableTimer:()=>PausableTimer,adjustVolumeStyle:()=>adjustVolumeStyle,base64ToArray:()=>base64ToArray,deepCopy:()=>deepCopy,download:()=>download,extend:()=>extend,get:()=>get,getAtomProperty:()=>getAtomProperty,getColorFromStyle:()=>getColorFromStyle,getElement:()=>getElement,getExtent:()=>getExtent,getPropertyRange:()=>getPropertyRange,getbin:()=>getbin,inflateString:()=>inflateString,isEmptyObject:()=>isEmptyObject,isNumeric:()=>isNumeric,makeFunction:()=>makeFunction,mergeGeos:()=>mergeGeos,specStringToObject:()=>specStringToObject});var _Gradient__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/Gradient.ts"),_VolumeData__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/VolumeData.ts"),_colors__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/colors.ts"),pako__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/pako/dist/pako.esm.mjs");function extend(o,u){for(var a in u)u.hasOwnProperty(a)&&u[a]!==void 0&&(o[a]=u[a]);return o}function deepCopy(o){let u,a,c;if(o==null)return{};if(typeof o!="object"||o===null)return o;u=Array.isArray(o)?[]:{};for(c in o)a=o[c],u[c]=deepCopy(a);return u}function isNumeric(o){var u=typeof o;return(u==="number"||u==="string")&&!isNaN(o-parseFloat(o))}function isEmptyObject(o){var u;for(u in o)return!1;return!0}function makeFunction(callback){return callback&&typeof callback=="string"&&(callback=eval("("+callback+")")),callback&&typeof callback!="function"?(console.warn("Invalid callback provided."),()=>{}):callback}function adjustVolumeStyle(o){o&&(o.volformat&&!(o.voldata instanceof _VolumeData__WEBPACK_IMPORTED_MODULE_1__.VolumeData)&&(o.voldata=new _VolumeData__WEBPACK_IMPORTED_MODULE_1__.VolumeData(o.voldata,o.volformat)),o.volscheme&&(o.volscheme=_Gradient__WEBPACK_IMPORTED_MODULE_0__.Gradient.getGradient(o.volscheme)))}function getExtent(o,u){var a,c,y,S,R,m,_,A,g,T,O=!u;if(a=c=y=9999,S=R=m=-9999,_=A=g=T=0,o.length===0)return[[0,0,0],[0,0,0],[0,0,0]];for(var w=0;w<o.length;w++){var M=o[w];if(!(typeof M>"u"||!isFinite(M.x)||!isFinite(M.y)||!isFinite(M.z))&&(T++,_+=M.x,A+=M.y,g+=M.z,a=a<M.x?a:M.x,c=c<M.y?c:M.y,y=y<M.z?y:M.z,S=S>M.x?S:M.x,R=R>M.y?R:M.y,m=m>M.z?m:M.z,M.symmetries&&O))for(var f=0;f<M.symmetries.length;f++)T++,_+=M.symmetries[f].x,A+=M.symmetries[f].y,g+=M.symmetries[f].z,a=a<M.symmetries[f].x?a:M.symmetries[f].x,c=c<M.symmetries[f].y?c:M.symmetries[f].y,y=y<M.symmetries[f].z?y:M.symmetries[f].z,S=S>M.symmetries[f].x?S:M.symmetries[f].x,R=R>M.symmetries[f].y?R:M.symmetries[f].y,m=m>M.symmetries[f].z?m:M.symmetries[f].z}return[[a,c,y],[S,R,m],[_/T,A/T,g/T]]}function getPropertyRange(o,u){for(var a=Number.POSITIVE_INFINITY,c=Number.NEGATIVE_INFINITY,y=0,S=o.length;y<S;y++){var R=o[y],m=getAtomProperty(R,u);m!=null&&(m<a&&(a=m),m>c&&(c=m))}return!isFinite(a)&&!isFinite(c)?a=c=0:isFinite(a)?isFinite(c)||(c=a):a=c,[a,c]}class PausableTimer{constructor(u,a,c){this.total_time_run=0,this.fn=u,this.arg=c,this.countdown=a,this.start_time=new Date().getTime(),this.ident=setTimeout(u,a,c)}cancel(){clearTimeout(this.ident)}pause(){clearTimeout(this.ident),this.total_time_run=new Date().getTime()-this.start_time}resume(){this.ident=setTimeout(this.fn,Math.max(0,this.countdown-this.total_time_run),this.arg)}}function base64ToArray(o){for(var u=window.atob(o),a=u.length,c=new Uint8Array(a),y=0;y<a;y++)c[y]=u.charCodeAt(y);return c}function getAtomProperty(o,u){var a=null;return o.properties&&typeof o.properties[u]<"u"?a=o.properties[u]:typeof o[u]<"u"&&(a=o[u]),a}function mergeGeos(o,u){var a=u.geometry;a!==void 0&&o.geometryGroups.push(a.geometryGroups[0])}function specStringToObject(o){if(typeof o=="object")return o;if(typeof o>"u"||o==null)return o;try{return JSON.parse(o)}catch{}o=o.replace(/%7E/g,"~");var u=function(O){return isNumeric(O)?Math.floor(parseFloat(O))==parseInt(O)||O.indexOf(".")>=0?parseFloat(O):parseInt(O):O==="true"?!0:O==="false"?!1:O},a={};if(o==="all")return a;for(var c=o.split(";"),y=0;y<c.length;y++){var S=c[y].split(":"),R=S[0],m={},_=S[1];if(_)if(_=_.replace(/~/g,"="),_.indexOf("=")!==-1)for(var A=_.split(","),g=0;g<A.length;g++){var T=A[g].split("=",2);m[T[0]]=u(T[1])}else _.indexOf(",")!==-1?m=_.split(","):m=u(_);a[R]=m}return a}function checkStatus(o){if(!o.ok)throw new Error(`HTTP ${o.status} - ${o.statusText}`);return o}function get(o,u){var a=fetch(o).then(checkStatus).then(c=>c.text());return u?a.then(u):a}function getbin(o,u,a,c){var y;return a=="POST"?y=fetch(o,{method:"POST",body:c}).then(S=>checkStatus(S)).then(S=>S.arrayBuffer()):y=fetch(o).then(S=>checkStatus(S)).then(S=>S.arrayBuffer()),u?y.then(u):y}function download(o,u,a,c){var y="",S="",R="",m=null,_=u.addModel();if(o.indexOf(":")<0&&(o.length==4?o="pdb:"+o:isNaN(o)?o="url:"+o:o="cid:"+o),o.substring(0,5)=="mmtf:"&&(console.warn("WARNING: MMTF now deprecated.  Reverting to bcif."),o="bcif:"+o.slice(5)),o.substring(0,5)==="bcif:")o=o.substring(5).toUpperCase(),R="https://models.rcsb.org/"+o+".bcif.gz",a&&typeof a.noComputeSecondaryStructure>"u"&&(a.noComputeSecondaryStructure=!0),m=new Promise(function(g){getbin(R).then(function(T){_.addMolData(T,"bcif.gz",a),u.zoomTo(),u.render(),g(_)},function(){console.error("fetch of "+R+" failed.")})});else{if(o.substring(0,4)==="pdb:"){if(y="bcif",a&&a.format&&(y=a.format),a&&typeof a.noComputeSecondaryStructure>"u"&&(a.noComputeSecondaryStructure=!0),o=o.substring(4).toUpperCase(),!o.match(/^[1-9][A-Za-z0-9]{3}$/)){alert("Wrong PDB ID");return}y=="bcif"?R="https://models.rcsb.org/"+o.toUpperCase()+".bcif.gz":(S=a&&a.pdbUri?a.pdbUri:"https://files.rcsb.org/view/",R=S+o+"."+y)}else if(o.substring(0,4)=="cid:"){if(y="sdf",o=o.substring(4),!o.match(/^[0-9]+$/)){alert("Wrong Compound ID");return}R="https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/"+o+"/SDF?record_type=3d"}else o.substring(0,4)=="url:"&&(R=o.substring(4),y=R);var A=function(g){_.addMolData(g,y,a),u.zoomTo(),u.render()};m=new Promise(function(g){y=="bcif"?getbin(R).then(function(T){A(T),g(_)}).catch(function(){S=a&&a.pdbUri?a.pdbUri:"https://files.rcsb.org/view/",R=S+o+".pdb",y="pdb",console.warn("falling back to pdb format"),get(R).then(function(T){A(T),g(_)}).catch(function(T){A(""),g(_),console.error("fetch of "+R+" failed: "+T.statusText)})}):get(R).then(function(T){A(T),g(_)}).catch(function(T){A(""),g(_),console.error("fetch of "+R+" failed: "+T.statusText)})})}return c?(m.then(function(g){c(g)}),_):m}function getColorFromStyle(o,u){let a=u.colorscheme;if(typeof _colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[a]<"u")a=_colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[a];else if(typeof a=="string"&&a.endsWith("Carbon")){let R=a.substring(0,a.lastIndexOf("Carbon")).toLowerCase();if(typeof _colors__WEBPACK_IMPORTED_MODULE_2__.htmlColors[R]<"u"){let m=Object.assign({},_colors__WEBPACK_IMPORTED_MODULE_2__.elementColors.defaultColors);m.C=_colors__WEBPACK_IMPORTED_MODULE_2__.htmlColors[R],_colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[a]={prop:"elem",map:m},a=_colors__WEBPACK_IMPORTED_MODULE_2__.builtinColorSchemes[a]}}let c=o.color;if(typeof u.color<"u"&&u.color!="spectrum"&&(c=u.color),typeof a<"u"){let R,m;if(typeof _colors__WEBPACK_IMPORTED_MODULE_2__.elementColors[a]<"u")a=_colors__WEBPACK_IMPORTED_MODULE_2__.elementColors[a],typeof a[o[a.prop]]<"u"&&(c=a.map[o[a.prop]]);else if(typeof a[o[a.prop]]<"u")c=a.map[o[a.prop]];else if(typeof a.prop<"u"&&typeof a.gradient<"u"){R=a.prop;var y=a.gradient;y instanceof _Gradient__WEBPACK_IMPORTED_MODULE_0__.GradientType||(y=(0,_Gradient__WEBPACK_IMPORTED_MODULE_0__.getGradient)(a));let _=y.range()||[-1,1];m=getAtomProperty(o,R),m!=null&&(c=y.valueToHex(m,_))}else typeof a.prop<"u"&&typeof a.map<"u"?(R=a.prop,m=getAtomProperty(o,R),typeof a.map[m]<"u"&&(c=a.map[m])):typeof u.colorscheme[o.elem]<"u"?c=u.colorscheme[o.elem]:console.warn("Could not interpret colorscheme "+a)}else typeof u.colorfunc<"u"&&(c=u.colorfunc(o));return _colors__WEBPACK_IMPORTED_MODULE_2__.CC.color(c)}function getElement(o){let u=o;return typeof o=="string"?u=document.querySelector("#"+o):typeof o=="object"&&o.get&&(u=o.get(0)),u}function inflateString(o,u=!0){let a;return typeof o=="string"?a=new TextEncoder().encode(o):a=new Uint8Array(o),(0,pako__WEBPACK_IMPORTED_MODULE_3__.inflate)(a,{to:u?"string":null})}},"./node_modules/upng-js/UPNG.js":(o,u,a)=>{(function(){var c={},y;o.exports=c,y=a("./node_modules/upng-js/node_modules/pako/index.js"),function(S,R){S.toRGBA8=function(m){var _=m.width,A=m.height;if(m.tabs.acTL==null)return[S.toRGBA8.decodeImage(m.data,_,A,m).buffer];var g=[];m.frames[0].data==null&&(m.frames[0].data=m.data);for(var T,O=new Uint8Array(_*A*4),w=0;w<m.frames.length;w++){var M=m.frames[w],f=M.rect.x,i=M.rect.y,l=M.rect.width,p=M.rect.height,v=S.toRGBA8.decodeImage(M.data,l,p,m);if(w==0?T=v:M.blend==0?S._copyTile(v,l,p,T,_,A,f,i,0):M.blend==1&&S._copyTile(v,l,p,T,_,A,f,i,1),g.push(T.buffer),T=T.slice(0),M.dispose!=0){if(M.dispose==1)S._copyTile(O,l,p,T,_,A,f,i,0);else if(M.dispose==2){for(var b=w-1;m.frames[b].dispose==2;)b--;T=new Uint8Array(g[b]).slice(0)}}}return g},S.toRGBA8.decodeImage=function(m,_,A,g){var T=_*A,O=S.decode._getBPP(g),w=Math.ceil(_*O/8),M=new Uint8Array(T*4),f=new Uint32Array(M.buffer),i=g.ctype,l=g.depth,p=S._bin.readUshort;if(i==6){var v=T<<2;if(l==8)for(var b=0;b<v;b++)M[b]=m[b];if(l==16)for(var b=0;b<v;b++)M[b]=m[b<<1]}else if(i==2){var s=g.tabs.tRNS,h=-1,E=-1,x=-1;if(s&&(h=s[0],E=s[1],x=s[2]),l==8)for(var b=0;b<T;b++){var D=b<<2,z=b*3;M[D]=m[z],M[D+1]=m[z+1],M[D+2]=m[z+2],M[D+3]=255,h!=-1&&m[z]==h&&m[z+1]==E&&m[z+2]==x&&(M[D+3]=0)}if(l==16)for(var b=0;b<T;b++){var D=b<<2,z=b*6;M[D]=m[z],M[D+1]=m[z+2],M[D+2]=m[z+4],M[D+3]=255,h!=-1&&p(m,z)==h&&p(m,z+2)==E&&p(m,z+4)==x&&(M[D+3]=0)}}else if(i==3){var P=g.tabs.PLTE,G=g.tabs.tRNS,B=G?G.length:0;if(l==1)for(var K=0;K<A;K++)for(var k=K*w,U=K*_,b=0;b<_;b++){var D=U+b<<2,W=m[k+(b>>3)]>>7-((b&7)<<0)&1,F=3*W;M[D]=P[F],M[D+1]=P[F+1],M[D+2]=P[F+2],M[D+3]=W<B?G[W]:255}if(l==2)for(var K=0;K<A;K++)for(var k=K*w,U=K*_,b=0;b<_;b++){var D=U+b<<2,W=m[k+(b>>2)]>>6-((b&3)<<1)&3,F=3*W;M[D]=P[F],M[D+1]=P[F+1],M[D+2]=P[F+2],M[D+3]=W<B?G[W]:255}if(l==4)for(var K=0;K<A;K++)for(var k=K*w,U=K*_,b=0;b<_;b++){var D=U+b<<2,W=m[k+(b>>1)]>>4-((b&1)<<2)&15,F=3*W;M[D]=P[F],M[D+1]=P[F+1],M[D+2]=P[F+2],M[D+3]=W<B?G[W]:255}if(l==8)for(var b=0;b<T;b++){var D=b<<2,W=m[b],F=3*W;M[D]=P[F],M[D+1]=P[F+1],M[D+2]=P[F+2],M[D+3]=W<B?G[W]:255}}else if(i==4){if(l==8)for(var b=0;b<T;b++){var D=b<<2,Y=b<<1,j=m[Y];M[D]=j,M[D+1]=j,M[D+2]=j,M[D+3]=m[Y+1]}if(l==16)for(var b=0;b<T;b++){var D=b<<2,Y=b<<2,j=m[Y];M[D]=j,M[D+1]=j,M[D+2]=j,M[D+3]=m[Y+2]}}else if(i==0){var h=g.tabs.tRNS?g.tabs.tRNS:-1;if(l==1)for(var b=0;b<T;b++){var j=255*(m[b>>3]>>7-(b&7)&1),H=j==h*255?0:255;f[b]=H<<24|j<<16|j<<8|j}if(l==2)for(var b=0;b<T;b++){var j=85*(m[b>>2]>>6-((b&3)<<1)&3),H=j==h*85?0:255;f[b]=H<<24|j<<16|j<<8|j}if(l==4)for(var b=0;b<T;b++){var j=17*(m[b>>1]>>4-((b&1)<<2)&15),H=j==h*17?0:255;f[b]=H<<24|j<<16|j<<8|j}if(l==8)for(var b=0;b<T;b++){var j=m[b],H=j==h?0:255;f[b]=H<<24|j<<16|j<<8|j}if(l==16)for(var b=0;b<T;b++){var j=m[b<<1],H=p(m,b<<1)==h?0:255;f[b]=H<<24|j<<16|j<<8|j}}return M},S.decode=function(m){for(var _=new Uint8Array(m),A=8,g=S._bin,T=g.readUshort,O=g.readUint,w={tabs:{},frames:[]},M=new Uint8Array(_.length),f=0,i,l=0,p=[137,80,78,71,13,10,26,10],v=0;v<8;v++)if(_[v]!=p[v])throw"The input is not a PNG file!";for(;A<_.length;){var b=g.readUint(_,A);A+=4;var s=g.readASCII(_,A,4);if(A+=4,s=="IHDR")S.decode._IHDR(_,A,w);else if(s=="IDAT"){for(var v=0;v<b;v++)M[f+v]=_[A+v];f+=b}else if(s=="acTL")w.tabs[s]={num_frames:O(_,A),num_plays:O(_,A+4)},i=new Uint8Array(_.length);else if(s=="fcTL"){if(l!=0){var h=w.frames[w.frames.length-1];h.data=S.decode._decompress(w,i.slice(0,l),h.rect.width,h.rect.height),l=0}var E={x:O(_,A+12),y:O(_,A+16),width:O(_,A+4),height:O(_,A+8)},x=T(_,A+22);x=T(_,A+20)/(x==0?100:x);var D={rect:E,delay:Math.round(x*1e3),dispose:_[A+24],blend:_[A+25]};w.frames.push(D)}else if(s=="fdAT"){for(var v=0;v<b-4;v++)i[l+v]=_[A+v+4];l+=b-4}else if(s=="pHYs")w.tabs[s]=[g.readUint(_,A),g.readUint(_,A+4),_[A+8]];else if(s=="cHRM"){w.tabs[s]=[];for(var v=0;v<8;v++)w.tabs[s].push(g.readUint(_,A+v*4))}else if(s=="tEXt"){w.tabs[s]==null&&(w.tabs[s]={});var z=g.nextZero(_,A),P=g.readASCII(_,A,z-A),G=g.readASCII(_,z+1,A+b-z-1);w.tabs[s][P]=G}else if(s=="iTXt"){w.tabs[s]==null&&(w.tabs[s]={});var z=0,B=A;z=g.nextZero(_,B);var P=g.readASCII(_,B,z-B);B=z+1,_[B],_[B+1],B+=2,z=g.nextZero(_,B),g.readASCII(_,B,z-B),B=z+1,z=g.nextZero(_,B),g.readUTF8(_,B,z-B),B=z+1;var G=g.readUTF8(_,B,b-(B-A));w.tabs[s][P]=G}else if(s=="PLTE")w.tabs[s]=g.readBytes(_,A,b);else if(s=="hIST"){var K=w.tabs.PLTE.length/3;w.tabs[s]=[];for(var v=0;v<K;v++)w.tabs[s].push(T(_,A+v*2))}else if(s=="tRNS")w.ctype==3?w.tabs[s]=g.readBytes(_,A,b):w.ctype==0?w.tabs[s]=T(_,A):w.ctype==2&&(w.tabs[s]=[T(_,A),T(_,A+2),T(_,A+4)]);else if(s=="gAMA")w.tabs[s]=g.readUint(_,A)/1e5;else if(s=="sRGB")w.tabs[s]=_[A];else if(s=="bKGD")w.ctype==0||w.ctype==4?w.tabs[s]=[T(_,A)]:w.ctype==2||w.ctype==6?w.tabs[s]=[T(_,A),T(_,A+2),T(_,A+4)]:w.ctype==3&&(w.tabs[s]=_[A]);else if(s=="IEND"){if(l!=0){var h=w.frames[w.frames.length-1];h.data=S.decode._decompress(w,i.slice(0,l),h.rect.width,h.rect.height),l=0}w.data=S.decode._decompress(w,M,w.width,w.height);break}A+=b,g.readUint(_,A),A+=4}return delete w.compress,delete w.interlace,delete w.filter,w},S.decode._decompress=function(m,_,A,g){return m.compress==0&&(_=S.decode._inflate(_)),m.interlace==0?_=S.decode._filterZero(_,m,0,A,g):m.interlace==1&&(_=S.decode._readInterlace(_,m)),_},S.decode._inflate=function(m){return R.inflate(m)},S.decode._readInterlace=function(m,_){for(var A=_.width,g=_.height,T=S.decode._getBPP(_),O=T>>3,w=Math.ceil(A*T/8),M=new Uint8Array(g*w),f=0,i=[0,0,4,0,2,0,1],l=[0,4,0,2,0,1,0],p=[8,8,8,4,4,2,2],v=[8,8,4,4,2,2,1],b=0;b<7;){for(var s=p[b],h=v[b],E=0,x=0,D=i[b];D<g;)D+=s,x++;for(var z=l[b];z<A;)z+=h,E++;var P=Math.ceil(E*T/8);S.decode._filterZero(m,_,f,E,x);for(var G=0,B=i[b];B<g;){for(var K=l[b],k=f+G*P<<3;K<A;){if(T==1){var U=m[k>>3];U=U>>7-(k&7)&1,M[B*w+(K>>3)]|=U<<7-((K&3)<<0)}if(T==2){var U=m[k>>3];U=U>>6-(k&7)&3,M[B*w+(K>>2)]|=U<<6-((K&3)<<1)}if(T==4){var U=m[k>>3];U=U>>4-(k&7)&15,M[B*w+(K>>1)]|=U<<4-((K&1)<<2)}if(T>=8)for(var W=B*w+K*O,F=0;F<O;F++)M[W+F]=m[(k>>3)+F];k+=T,K+=h}G++,B+=s}E*x!=0&&(f+=x*(1+P)),b=b+1}return M},S.decode._getBPP=function(m){var _=[1,null,3,1,2,null,4][m.ctype];return _*m.depth},S.decode._filterZero=function(m,_,A,g,T){var O=S.decode._getBPP(_),w=Math.ceil(g*O/8),M=S.decode._paeth;O=Math.ceil(O/8);for(var f=0;f<T;f++){var i=A+f*w,l=i+f+1,p=m[l-1];if(p==0)for(var v=0;v<w;v++)m[i+v]=m[l+v];else if(p==1){for(var v=0;v<O;v++)m[i+v]=m[l+v];for(var v=O;v<w;v++)m[i+v]=m[l+v]+m[i+v-O]&255}else if(f==0){for(var v=0;v<O;v++)m[i+v]=m[l+v];if(p==2)for(var v=O;v<w;v++)m[i+v]=m[l+v]&255;if(p==3)for(var v=O;v<w;v++)m[i+v]=m[l+v]+(m[i+v-O]>>1)&255;if(p==4)for(var v=O;v<w;v++)m[i+v]=m[l+v]+M(m[i+v-O],0,0)&255}else{if(p==2)for(var v=0;v<w;v++)m[i+v]=m[l+v]+m[i+v-w]&255;if(p==3){for(var v=0;v<O;v++)m[i+v]=m[l+v]+(m[i+v-w]>>1)&255;for(var v=O;v<w;v++)m[i+v]=m[l+v]+(m[i+v-w]+m[i+v-O]>>1)&255}if(p==4){for(var v=0;v<O;v++)m[i+v]=m[l+v]+M(0,m[i+v-w],0)&255;for(var v=O;v<w;v++)m[i+v]=m[l+v]+M(m[i+v-O],m[i+v-w],m[i+v-O-w])&255}}}return m},S.decode._paeth=function(m,_,A){var g=m+_-A,T=Math.abs(g-m),O=Math.abs(g-_),w=Math.abs(g-A);return T<=O&&T<=w?m:O<=w?_:A},S.decode._IHDR=function(m,_,A){var g=S._bin;A.width=g.readUint(m,_),_+=4,A.height=g.readUint(m,_),_+=4,A.depth=m[_],_++,A.ctype=m[_],_++,A.compress=m[_],_++,A.filter=m[_],_++,A.interlace=m[_],_++},S._bin={nextZero:function(m,_){for(;m[_]!=0;)_++;return _},readUshort:function(m,_){return m[_]<<8|m[_+1]},writeUshort:function(m,_,A){m[_]=A>>8&255,m[_+1]=A&255},readUint:function(m,_){return m[_]*16777216+(m[_+1]<<16|m[_+2]<<8|m[_+3])},writeUint:function(m,_,A){m[_]=A>>24&255,m[_+1]=A>>16&255,m[_+2]=A>>8&255,m[_+3]=A&255},readASCII:function(m,_,A){for(var g="",T=0;T<A;T++)g+=String.fromCharCode(m[_+T]);return g},writeASCII:function(m,_,A){for(var g=0;g<A.length;g++)m[_+g]=A.charCodeAt(g)},readBytes:function(m,_,A){for(var g=[],T=0;T<A;T++)g.push(m[_+T]);return g},pad:function(m){return m.length<2?"0"+m:m},readUTF8:function(m,_,A){for(var g="",T,O=0;O<A;O++)g+="%"+S._bin.pad(m[_+O].toString(16));try{T=decodeURIComponent(g)}catch{return S._bin.readASCII(m,_,A)}return T}},S._copyTile=function(m,_,A,g,T,O,w,M,f){for(var i=Math.min(_,T),l=Math.min(A,O),p=0,v=0,b=0;b<l;b++)for(var s=0;s<i;s++)if(w>=0&&M>=0?(p=b*_+s<<2,v=(M+b)*T+w+s<<2):(p=(-M+b)*_-w+s<<2,v=b*T+s<<2),f==0)g[v]=m[p],g[v+1]=m[p+1],g[v+2]=m[p+2],g[v+3]=m[p+3];else if(f==1){var h=m[p+3]*.00392156862745098,E=m[p]*h,x=m[p+1]*h,D=m[p+2]*h,z=g[v+3]*(1/255),P=g[v]*z,G=g[v+1]*z,B=g[v+2]*z,K=1-h,k=h+z*K,U=k==0?0:1/k;g[v+3]=255*k,g[v+0]=(E+P*K)*U,g[v+1]=(x+G*K)*U,g[v+2]=(D+B*K)*U}else if(f==2){var h=m[p+3],E=m[p],x=m[p+1],D=m[p+2],z=g[v+3],P=g[v],G=g[v+1],B=g[v+2];h==z&&E==P&&x==G&&D==B?(g[v]=0,g[v+1]=0,g[v+2]=0,g[v+3]=0):(g[v]=E,g[v+1]=x,g[v+2]=D,g[v+3]=h)}else if(f==3){var h=m[p+3],E=m[p],x=m[p+1],D=m[p+2],z=g[v+3],P=g[v],G=g[v+1],B=g[v+2];if(h==z&&E==P&&x==G&&D==B)continue;if(h<220&&z>20)return!1}return!0},S.encode=function(m,_,A,g,T,O){g==null&&(g=0),O==null&&(O=!1);for(var w=new Uint8Array(m[0].byteLength*m.length+100),M=[137,80,78,71,13,10,26,10],f=0;f<8;f++)w[f]=M[f];var i=8,l=S._bin,p=S.crc.crc,v=l.writeUint,b=l.writeUshort,s=l.writeASCII,h=S.encode.compressPNG(m,_,A,g,O);v(w,i,13),i+=4,s(w,i,"IHDR"),i+=4,v(w,i,_),i+=4,v(w,i,A),i+=4,w[i]=h.depth,i++,w[i]=h.ctype,i++,w[i]=0,i++,w[i]=0,i++,w[i]=0,i++,v(w,i,p(w,i-17,17)),i+=4,v(w,i,1),i+=4,s(w,i,"sRGB"),i+=4,w[i]=1,i++,v(w,i,p(w,i-5,5)),i+=4;var E=m.length>1;if(E&&(v(w,i,8),i+=4,s(w,i,"acTL"),i+=4,v(w,i,m.length),i+=4,v(w,i,0),i+=4,v(w,i,p(w,i-12,12)),i+=4),h.ctype==3){var x=h.plte.length;v(w,i,x*3),i+=4,s(w,i,"PLTE"),i+=4;for(var f=0;f<x;f++){var D=f*3,z=h.plte[f],P=z&255,G=z>>8&255,B=z>>16&255;w[i+D+0]=P,w[i+D+1]=G,w[i+D+2]=B}if(i+=x*3,v(w,i,p(w,i-x*3-4,x*3+4)),i+=4,h.gotAlpha){v(w,i,x),i+=4,s(w,i,"tRNS"),i+=4;for(var f=0;f<x;f++)w[i+f]=h.plte[f]>>24&255;i+=x,v(w,i,p(w,i-x-4,x+4)),i+=4}}for(var K=0,k=0;k<h.frames.length;k++){var U=h.frames[k];E&&(v(w,i,26),i+=4,s(w,i,"fcTL"),i+=4,v(w,i,K++),i+=4,v(w,i,U.rect.width),i+=4,v(w,i,U.rect.height),i+=4,v(w,i,U.rect.x),i+=4,v(w,i,U.rect.y),i+=4,b(w,i,T[k]),i+=2,b(w,i,1e3),i+=2,w[i]=U.dispose,i++,w[i]=U.blend,i++,v(w,i,p(w,i-30,30)),i+=4);var W=U.cimg,x=W.length;v(w,i,x+(k==0?0:4)),i+=4;var F=i;s(w,i,k==0?"IDAT":"fdAT"),i+=4,k!=0&&(v(w,i,K++),i+=4);for(var f=0;f<x;f++)w[i+f]=W[f];i+=x,v(w,i,p(w,F,i-F)),i+=4}return v(w,i,0),i+=4,s(w,i,"IEND"),i+=4,v(w,i,p(w,i-4,4)),i+=4,w.buffer.slice(0,i)},S.encode.compressPNG=function(m,_,A,g,T){for(var O=S.encode.compress(m,_,A,g,!1,T),w=0;w<m.length;w++){var M=O.frames[w];M.rect.width;var f=M.rect.height,i=M.bpl,l=M.bpp,p=new Uint8Array(f*i+f);M.cimg=S.encode._filterZero(M.img,f,l,i,p)}return O},S.encode.compress=function(m,_,A,g,T,O){O==null&&(O=!1);for(var w=6,M=8,f=4,i=255,l=0;l<m.length;l++)for(var p=new Uint8Array(m[l]),v=p.length,b=0;b<v;b+=4)i&=p[b+3];var s=i!=255,h={},E=[];if(m.length!=0&&(h[0]=0,E.push(0),g!=0&&g--),g!=0){var x=S.quantize(m,g,T);m=x.bufs;for(var b=0;b<x.plte.length;b++){var D=x.plte[b].est.rgba;h[D]==null&&(h[D]=E.length,E.push(D))}}else for(var l=0;l<m.length;l++)for(var z=new Uint32Array(m[l]),v=z.length,b=0;b<v;b++){var D=z[b];if((b<_||D!=z[b-1]&&D!=z[b-_])&&h[D]==null&&(h[D]=E.length,E.push(D),E.length>=300))break}var P=s?T:!1,G=E.length;G<=256&&O==!1&&(G<=2?M=1:G<=4?M=2:G<=16?M=4:M=8,T&&(M=8),s=!0);for(var B=[],l=0;l<m.length;l++){var K=new Uint8Array(m[l]),k=new Uint32Array(K.buffer),U=0,W=0,F=_,Y=A,j=0;if(l!=0&&!P){for(var H=T||l==1||B[B.length-2].dispose==2?1:2,Z=0,ne=1e9,se=0;se<H;se++){for(var ye=new Uint8Array(m[l-1-se]),me=new Uint32Array(m[l-1-se]),de=_,ue=A,ce=-1,pe=-1,De=0;De<A;De++)for(var we=0;we<_;we++){var b=De*_+we;k[b]!=me[b]&&(we<de&&(de=we),we>ce&&(ce=we),De<ue&&(ue=De),De>pe&&(pe=De))}var je=ce==-1?1:(ce-de+1)*(pe-ue+1);je<ne&&(ne=je,Z=se,ce==-1?(U=W=0,F=Y=1):(U=de,W=ue,F=ce-de+1,Y=pe-ue+1))}var ye=new Uint8Array(m[l-1-Z]);Z==1&&(B[B.length-1].dispose=2);var he=new Uint8Array(F*Y*4);new Uint32Array(he.buffer),S._copyTile(ye,_,A,he,F,Y,-U,-W,0),S._copyTile(K,_,A,he,F,Y,-U,-W,3)?(S._copyTile(K,_,A,he,F,Y,-U,-W,2),j=1):(S._copyTile(K,_,A,he,F,Y,-U,-W,0),j=0),K=he,k=new Uint32Array(K.buffer)}var Ce=4*F;if(G<=256&&O==!1){Ce=Math.ceil(M*F/8);for(var he=new Uint8Array(Ce*Y),De=0;De<Y;De++){var b=De*Ce,ke=De*F;if(M==8)for(var we=0;we<F;we++)he[b+we]=h[k[ke+we]];else if(M==4)for(var we=0;we<F;we++)he[b+(we>>1)]|=h[k[ke+we]]<<4-(we&1)*4;else if(M==2)for(var we=0;we<F;we++)he[b+(we>>2)]|=h[k[ke+we]]<<6-(we&3)*2;else if(M==1)for(var we=0;we<F;we++)he[b+(we>>3)]|=h[k[ke+we]]<<7-(we&7)*1}K=he,w=3,f=1}else if(s==!1&&m.length==1){for(var he=new Uint8Array(F*Y*3),Xe=F*Y,b=0;b<Xe;b++){var nt=b*3,at=b*4;he[nt]=K[at],he[nt+1]=K[at+1],he[nt+2]=K[at+2]}K=he,w=2,f=3,Ce=3*F}B.push({rect:{x:U,y:W,width:F,height:Y},img:K,bpl:Ce,bpp:f,blend:j,dispose:P?1:0})}return{ctype:w,depth:M,plte:E,gotAlpha:s,frames:B}},S.encode._filterZero=function(m,_,A,g,T){for(var O=[],w=0;w<5;w++)if(!(_*g>5e5&&(w==2||w==3||w==4))){for(var M=0;M<_;M++)S.encode._filterLine(T,m,M,g,A,w);if(O.push(R.deflate(T)),A==1)break}for(var f,i=1e9,l=0;l<O.length;l++)O[l].length<i&&(f=l,i=O[l].length);return O[f]},S.encode._filterLine=function(m,_,A,g,T,O){var w=A*g,M=w+A,f=S.decode._paeth;if(m[M]=O,M++,O==0)for(var i=0;i<g;i++)m[M+i]=_[w+i];else if(O==1){for(var i=0;i<T;i++)m[M+i]=_[w+i];for(var i=T;i<g;i++)m[M+i]=_[w+i]-_[w+i-T]+256&255}else if(A==0){for(var i=0;i<T;i++)m[M+i]=_[w+i];if(O==2)for(var i=T;i<g;i++)m[M+i]=_[w+i];if(O==3)for(var i=T;i<g;i++)m[M+i]=_[w+i]-(_[w+i-T]>>1)+256&255;if(O==4)for(var i=T;i<g;i++)m[M+i]=_[w+i]-f(_[w+i-T],0,0)+256&255}else{if(O==2)for(var i=0;i<g;i++)m[M+i]=_[w+i]+256-_[w+i-g]&255;if(O==3){for(var i=0;i<T;i++)m[M+i]=_[w+i]+256-(_[w+i-g]>>1)&255;for(var i=T;i<g;i++)m[M+i]=_[w+i]+256-(_[w+i-g]+_[w+i-T]>>1)&255}if(O==4){for(var i=0;i<T;i++)m[M+i]=_[w+i]+256-f(0,_[w+i-g],0)&255;for(var i=T;i<g;i++)m[M+i]=_[w+i]+256-f(_[w+i-T],_[w+i-g],_[w+i-T-g])&255}}},S.crc={table:function(){for(var m=new Uint32Array(256),_=0;_<256;_++){for(var A=_,g=0;g<8;g++)A&1?A=3988292384^A>>>1:A=A>>>1;m[_]=A}return m}(),update:function(m,_,A,g){for(var T=0;T<g;T++)m=S.crc.table[(m^_[A+T])&255]^m>>>8;return m},crc:function(m,_,A){return S.crc.update(4294967295,m,_,A)^4294967295}},S.quantize=function(m,_,A){for(var g=[],T=0,O=0;O<m.length;O++)g.push(S.encode.alphaMul(new Uint8Array(m[O]),A)),T+=m[O].byteLength;for(var w=new Uint8Array(T),M=new Uint32Array(w.buffer),f=0,O=0;O<g.length;O++){for(var i=g[O],l=i.length,p=0;p<l;p++)w[f+p]=i[p];f+=l}var v={i0:0,i1:w.length,bst:null,est:null,tdst:0,left:null,right:null};v.bst=S.quantize.stats(w,v.i0,v.i1),v.est=S.quantize.estats(v.bst);for(var b=[v];b.length<_;){for(var s=0,h=0,O=0;O<b.length;O++)b[O].est.L>s&&(s=b[O].est.L,h=O);if(s<.001)break;var E=b[h],x=S.quantize.splitPixels(w,M,E.i0,E.i1,E.est.e,E.est.eMq255),D={i0:E.i0,i1:x,bst:null,est:null,tdst:0,left:null,right:null};D.bst=S.quantize.stats(w,D.i0,D.i1),D.est=S.quantize.estats(D.bst);var z={i0:x,i1:E.i1,bst:null,est:null,tdst:0,left:null,right:null};z.bst={R:[],m:[],N:E.bst.N-D.bst.N};for(var O=0;O<16;O++)z.bst.R[O]=E.bst.R[O]-D.bst.R[O];for(var O=0;O<4;O++)z.bst.m[O]=E.bst.m[O]-D.bst.m[O];z.est=S.quantize.estats(z.bst),E.left=D,E.right=z,b[h]=D,b.push(z)}b.sort(function(H,Z){return Z.bst.N-H.bst.N});for(var P=0;P<g.length;P++){for(var G=S.quantize.planeDst,B=new Uint8Array(g[P].buffer),K=new Uint32Array(g[P].buffer),k=B.length,O=0;O<k;O+=4){for(var U=B[O]*.00392156862745098,W=B[O+1]*(1/255),F=B[O+2]*(1/255),Y=B[O+3]*(1/255),j=v;j.left;)j=G(j.est,U,W,F,Y)<=0?j.left:j.right;K[O>>2]=j.est.rgba}g[P]=K.buffer}return{bufs:g,plte:b}},S.quantize.getNearest=function(m,_,A,g,T){if(m.left==null)return m.tdst=S.quantize.dist(m.est.q,_,A,g,T),m;var O=S.quantize.planeDst(m.est,_,A,g,T),w=m.left,M=m.right;O>0&&(w=m.right,M=m.left);var f=S.quantize.getNearest(w,_,A,g,T);if(f.tdst<=O*O)return f;var i=S.quantize.getNearest(M,_,A,g,T);return i.tdst<f.tdst?i:f},S.quantize.planeDst=function(m,_,A,g,T){var O=m.e;return O[0]*_+O[1]*A+O[2]*g+O[3]*T-m.eMq},S.quantize.dist=function(m,_,A,g,T){var O=_-m[0],w=A-m[1],M=g-m[2],f=T-m[3];return O*O+w*w+M*M+f*f},S.quantize.splitPixels=function(m,_,A,g,T,O){var w=S.quantize.vecDot;for(g-=4;A<g;){for(;w(m,A,T)<=O;)A+=4;for(;w(m,g,T)>O;)g-=4;if(A>=g)break;var M=_[A>>2];_[A>>2]=_[g>>2],_[g>>2]=M,A+=4,g-=4}for(;w(m,A,T)>O;)A-=4;return A+4},S.quantize.vecDot=function(m,_,A){return m[_]*A[0]+m[_+1]*A[1]+m[_+2]*A[2]+m[_+3]*A[3]},S.quantize.stats=function(m,_,A){for(var g=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],T=[0,0,0,0],O=A-_>>2,w=_;w<A;w+=4){var M=m[w]*.00392156862745098,f=m[w+1]*(1/255),i=m[w+2]*(1/255),l=m[w+3]*(1/255);T[0]+=M,T[1]+=f,T[2]+=i,T[3]+=l,g[0]+=M*M,g[1]+=M*f,g[2]+=M*i,g[3]+=M*l,g[5]+=f*f,g[6]+=f*i,g[7]+=f*l,g[10]+=i*i,g[11]+=i*l,g[15]+=l*l}return g[4]=g[1],g[8]=g[2],g[12]=g[3],g[9]=g[6],g[13]=g[7],g[14]=g[11],{R:g,m:T,N:O}},S.quantize.estats=function(m){var _=m.R,A=m.m,g=m.N,T=A[0],O=A[1],w=A[2],M=A[3],f=g==0?0:1/g,i=[_[0]-T*T*f,_[1]-T*O*f,_[2]-T*w*f,_[3]-T*M*f,_[4]-O*T*f,_[5]-O*O*f,_[6]-O*w*f,_[7]-O*M*f,_[8]-w*T*f,_[9]-w*O*f,_[10]-w*w*f,_[11]-w*M*f,_[12]-M*T*f,_[13]-M*O*f,_[14]-M*w*f,_[15]-M*M*f],l=i,p=S.M4,v=[.5,.5,.5,.5],b=0,s=0;if(g!=0)for(var h=0;h<10&&(v=p.multVec(l,v),s=Math.sqrt(p.dot(v,v)),v=p.sml(1/s,v),!(Math.abs(s-b)<1e-9));h++)b=s;var E=[T*f,O*f,w*f,M*f],x=p.dot(p.sml(255,E),v),D=E[3]<.001?0:1/E[3];return{Cov:i,q:E,e:v,L:b,eMq255:x,eMq:p.dot(v,E),rgba:(Math.round(255*E[3])<<24|Math.round(255*E[2]*D)<<16|Math.round(255*E[1]*D)<<8|Math.round(255*E[0]*D)<<0)>>>0}},S.M4={multVec:function(m,_){return[m[0]*_[0]+m[1]*_[1]+m[2]*_[2]+m[3]*_[3],m[4]*_[0]+m[5]*_[1]+m[6]*_[2]+m[7]*_[3],m[8]*_[0]+m[9]*_[1]+m[10]*_[2]+m[11]*_[3],m[12]*_[0]+m[13]*_[1]+m[14]*_[2]+m[15]*_[3]]},dot:function(m,_){return m[0]*_[0]+m[1]*_[1]+m[2]*_[2]+m[3]*_[3]},sml:function(m,_){return[m*_[0],m*_[1],m*_[2],m*_[3]]}},S.encode.alphaMul=function(m,_){for(var A=new Uint8Array(m.length),g=m.length>>2,T=0;T<g;T++){var O=T<<2,w=m[O+3];_&&(w=w<128?0:255);var M=w*(1/255);A[O+0]=m[O+0]*M,A[O+1]=m[O+1]*M,A[O+2]=m[O+2]*M,A[O+3]=w}return A}}(c,y)})()},"./node_modules/upng-js/node_modules/pako/index.js":(o,u,a)=>{var c=a("./node_modules/upng-js/node_modules/pako/lib/utils/common.js").assign,y=a("./node_modules/upng-js/node_modules/pako/lib/deflate.js"),S=a("./node_modules/upng-js/node_modules/pako/lib/inflate.js"),R=a("./node_modules/upng-js/node_modules/pako/lib/zlib/constants.js"),m={};c(m,y,S,R),o.exports=m},"./node_modules/upng-js/node_modules/pako/lib/deflate.js":(o,u,a)=>{var c=a("./node_modules/upng-js/node_modules/pako/lib/zlib/deflate.js"),y=a("./node_modules/upng-js/node_modules/pako/lib/utils/common.js"),S=a("./node_modules/upng-js/node_modules/pako/lib/utils/strings.js"),R=a("./node_modules/upng-js/node_modules/pako/lib/zlib/messages.js"),m=a("./node_modules/upng-js/node_modules/pako/lib/zlib/zstream.js"),_=Object.prototype.toString,A=0,g=4,T=0,O=1,w=2,M=-1,f=0,i=8;function l(s){if(!(this instanceof l))return new l(s);this.options=y.assign({level:M,method:i,chunkSize:16384,windowBits:15,memLevel:8,strategy:f,to:""},s||{});var h=this.options;h.raw&&h.windowBits>0?h.windowBits=-h.windowBits:h.gzip&&h.windowBits>0&&h.windowBits<16&&(h.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new m,this.strm.avail_out=0;var E=c.deflateInit2(this.strm,h.level,h.method,h.windowBits,h.memLevel,h.strategy);if(E!==T)throw new Error(R[E]);if(h.header&&c.deflateSetHeader(this.strm,h.header),h.dictionary){var x;if(typeof h.dictionary=="string"?x=S.string2buf(h.dictionary):_.call(h.dictionary)==="[object ArrayBuffer]"?x=new Uint8Array(h.dictionary):x=h.dictionary,E=c.deflateSetDictionary(this.strm,x),E!==T)throw new Error(R[E]);this._dict_set=!0}}l.prototype.push=function(s,h){var E=this.strm,x=this.options.chunkSize,D,z;if(this.ended)return!1;z=h===~~h?h:h===!0?g:A,typeof s=="string"?E.input=S.string2buf(s):_.call(s)==="[object ArrayBuffer]"?E.input=new Uint8Array(s):E.input=s,E.next_in=0,E.avail_in=E.input.length;do{if(E.avail_out===0&&(E.output=new y.Buf8(x),E.next_out=0,E.avail_out=x),D=c.deflate(E,z),D!==O&&D!==T)return this.onEnd(D),this.ended=!0,!1;(E.avail_out===0||E.avail_in===0&&(z===g||z===w))&&(this.options.to==="string"?this.onData(S.buf2binstring(y.shrinkBuf(E.output,E.next_out))):this.onData(y.shrinkBuf(E.output,E.next_out)))}while((E.avail_in>0||E.avail_out===0)&&D!==O);return z===g?(D=c.deflateEnd(this.strm),this.onEnd(D),this.ended=!0,D===T):(z===w&&(this.onEnd(T),E.avail_out=0),!0)},l.prototype.onData=function(s){this.chunks.push(s)},l.prototype.onEnd=function(s){s===T&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=y.flattenChunks(this.chunks)),this.chunks=[],this.err=s,this.msg=this.strm.msg};function p(s,h){var E=new l(h);if(E.push(s,!0),E.err)throw E.msg||R[E.err];return E.result}function v(s,h){return h=h||{},h.raw=!0,p(s,h)}function b(s,h){return h=h||{},h.gzip=!0,p(s,h)}u.Deflate=l,u.deflate=p,u.deflateRaw=v,u.gzip=b},"./node_modules/upng-js/node_modules/pako/lib/inflate.js":(o,u,a)=>{var c=a("./node_modules/upng-js/node_modules/pako/lib/zlib/inflate.js"),y=a("./node_modules/upng-js/node_modules/pako/lib/utils/common.js"),S=a("./node_modules/upng-js/node_modules/pako/lib/utils/strings.js"),R=a("./node_modules/upng-js/node_modules/pako/lib/zlib/constants.js"),m=a("./node_modules/upng-js/node_modules/pako/lib/zlib/messages.js"),_=a("./node_modules/upng-js/node_modules/pako/lib/zlib/zstream.js"),A=a("./node_modules/upng-js/node_modules/pako/lib/zlib/gzheader.js"),g=Object.prototype.toString;function T(M){if(!(this instanceof T))return new T(M);this.options=y.assign({chunkSize:16384,windowBits:0,to:""},M||{});var f=this.options;f.raw&&f.windowBits>=0&&f.windowBits<16&&(f.windowBits=-f.windowBits,f.windowBits===0&&(f.windowBits=-15)),f.windowBits>=0&&f.windowBits<16&&!(M&&M.windowBits)&&(f.windowBits+=32),f.windowBits>15&&f.windowBits<48&&(f.windowBits&15)===0&&(f.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new _,this.strm.avail_out=0;var i=c.inflateInit2(this.strm,f.windowBits);if(i!==R.Z_OK)throw new Error(m[i]);if(this.header=new A,c.inflateGetHeader(this.strm,this.header),f.dictionary&&(typeof f.dictionary=="string"?f.dictionary=S.string2buf(f.dictionary):g.call(f.dictionary)==="[object ArrayBuffer]"&&(f.dictionary=new Uint8Array(f.dictionary)),f.raw&&(i=c.inflateSetDictionary(this.strm,f.dictionary),i!==R.Z_OK)))throw new Error(m[i])}T.prototype.push=function(M,f){var i=this.strm,l=this.options.chunkSize,p=this.options.dictionary,v,b,s,h,E,x=!1;if(this.ended)return!1;b=f===~~f?f:f===!0?R.Z_FINISH:R.Z_NO_FLUSH,typeof M=="string"?i.input=S.binstring2buf(M):g.call(M)==="[object ArrayBuffer]"?i.input=new Uint8Array(M):i.input=M,i.next_in=0,i.avail_in=i.input.length;do{if(i.avail_out===0&&(i.output=new y.Buf8(l),i.next_out=0,i.avail_out=l),v=c.inflate(i,R.Z_NO_FLUSH),v===R.Z_NEED_DICT&&p&&(v=c.inflateSetDictionary(this.strm,p)),v===R.Z_BUF_ERROR&&x===!0&&(v=R.Z_OK,x=!1),v!==R.Z_STREAM_END&&v!==R.Z_OK)return this.onEnd(v),this.ended=!0,!1;i.next_out&&(i.avail_out===0||v===R.Z_STREAM_END||i.avail_in===0&&(b===R.Z_FINISH||b===R.Z_SYNC_FLUSH))&&(this.options.to==="string"?(s=S.utf8border(i.output,i.next_out),h=i.next_out-s,E=S.buf2string(i.output,s),i.next_out=h,i.avail_out=l-h,h&&y.arraySet(i.output,i.output,s,h,0),this.onData(E)):this.onData(y.shrinkBuf(i.output,i.next_out))),i.avail_in===0&&i.avail_out===0&&(x=!0)}while((i.avail_in>0||i.avail_out===0)&&v!==R.Z_STREAM_END);return v===R.Z_STREAM_END&&(b=R.Z_FINISH),b===R.Z_FINISH?(v=c.inflateEnd(this.strm),this.onEnd(v),this.ended=!0,v===R.Z_OK):(b===R.Z_SYNC_FLUSH&&(this.onEnd(R.Z_OK),i.avail_out=0),!0)},T.prototype.onData=function(M){this.chunks.push(M)},T.prototype.onEnd=function(M){M===R.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=y.flattenChunks(this.chunks)),this.chunks=[],this.err=M,this.msg=this.strm.msg};function O(M,f){var i=new T(f);if(i.push(M,!0),i.err)throw i.msg||m[i.err];return i.result}function w(M,f){return f=f||{},f.raw=!0,O(M,f)}u.Inflate=T,u.inflate=O,u.inflateRaw=w,u.ungzip=O},"./node_modules/upng-js/node_modules/pako/lib/utils/common.js":(o,u)=>{var a=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function c(R,m){return Object.prototype.hasOwnProperty.call(R,m)}u.assign=function(R){for(var m=Array.prototype.slice.call(arguments,1);m.length;){var _=m.shift();if(_){if(typeof _!="object")throw new TypeError(_+"must be non-object");for(var A in _)c(_,A)&&(R[A]=_[A])}}return R},u.shrinkBuf=function(R,m){return R.length===m?R:R.subarray?R.subarray(0,m):(R.length=m,R)};var y={arraySet:function(R,m,_,A,g){if(m.subarray&&R.subarray){R.set(m.subarray(_,_+A),g);return}for(var T=0;T<A;T++)R[g+T]=m[_+T]},flattenChunks:function(R){var m,_,A,g,T,O;for(A=0,m=0,_=R.length;m<_;m++)A+=R[m].length;for(O=new Uint8Array(A),g=0,m=0,_=R.length;m<_;m++)T=R[m],O.set(T,g),g+=T.length;return O}},S={arraySet:function(R,m,_,A,g){for(var T=0;T<A;T++)R[g+T]=m[_+T]},flattenChunks:function(R){return[].concat.apply([],R)}};u.setTyped=function(R){R?(u.Buf8=Uint8Array,u.Buf16=Uint16Array,u.Buf32=Int32Array,u.assign(u,y)):(u.Buf8=Array,u.Buf16=Array,u.Buf32=Array,u.assign(u,S))},u.setTyped(a)},"./node_modules/upng-js/node_modules/pako/lib/utils/strings.js":(o,u,a)=>{var c=a("./node_modules/upng-js/node_modules/pako/lib/utils/common.js"),y=!0,S=!0;try{String.fromCharCode.apply(null,[0])}catch{y=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{S=!1}for(var R=new c.Buf8(256),m=0;m<256;m++)R[m]=m>=252?6:m>=248?5:m>=240?4:m>=224?3:m>=192?2:1;R[254]=R[254]=1,u.string2buf=function(A){var g,T,O,w,M,f=A.length,i=0;for(w=0;w<f;w++)T=A.charCodeAt(w),(T&64512)===55296&&w+1<f&&(O=A.charCodeAt(w+1),(O&64512)===56320&&(T=65536+(T-55296<<10)+(O-56320),w++)),i+=T<128?1:T<2048?2:T<65536?3:4;for(g=new c.Buf8(i),M=0,w=0;M<i;w++)T=A.charCodeAt(w),(T&64512)===55296&&w+1<f&&(O=A.charCodeAt(w+1),(O&64512)===56320&&(T=65536+(T-55296<<10)+(O-56320),w++)),T<128?g[M++]=T:T<2048?(g[M++]=192|T>>>6,g[M++]=128|T&63):T<65536?(g[M++]=224|T>>>12,g[M++]=128|T>>>6&63,g[M++]=128|T&63):(g[M++]=240|T>>>18,g[M++]=128|T>>>12&63,g[M++]=128|T>>>6&63,g[M++]=128|T&63);return g};function _(A,g){if(g<65534&&(A.subarray&&S||!A.subarray&&y))return String.fromCharCode.apply(null,c.shrinkBuf(A,g));for(var T="",O=0;O<g;O++)T+=String.fromCharCode(A[O]);return T}u.buf2binstring=function(A){return _(A,A.length)},u.binstring2buf=function(A){for(var g=new c.Buf8(A.length),T=0,O=g.length;T<O;T++)g[T]=A.charCodeAt(T);return g},u.buf2string=function(A,g){var T,O,w,M,f=g||A.length,i=new Array(f*2);for(O=0,T=0;T<f;){if(w=A[T++],w<128){i[O++]=w;continue}if(M=R[w],M>4){i[O++]=65533,T+=M-1;continue}for(w&=M===2?31:M===3?15:7;M>1&&T<f;)w=w<<6|A[T++]&63,M--;if(M>1){i[O++]=65533;continue}w<65536?i[O++]=w:(w-=65536,i[O++]=55296|w>>10&1023,i[O++]=56320|w&1023)}return _(i,O)},u.utf8border=function(A,g){var T;for(g=g||A.length,g>A.length&&(g=A.length),T=g-1;T>=0&&(A[T]&192)===128;)T--;return T<0||T===0?g:T+R[A[T]]>g?T:g}},"./node_modules/upng-js/node_modules/pako/lib/zlib/adler32.js":o=>{function u(a,c,y,S){for(var R=a&65535|0,m=a>>>16&65535|0,_=0;y!==0;){_=y>2e3?2e3:y,y-=_;do R=R+c[S++]|0,m=m+R|0;while(--_);R%=65521,m%=65521}return R|m<<16|0}o.exports=u},"./node_modules/upng-js/node_modules/pako/lib/zlib/constants.js":o=>{o.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},"./node_modules/upng-js/node_modules/pako/lib/zlib/crc32.js":o=>{function u(){for(var y,S=[],R=0;R<256;R++){y=R;for(var m=0;m<8;m++)y=y&1?3988292384^y>>>1:y>>>1;S[R]=y}return S}var a=u();function c(y,S,R,m){var _=a,A=m+R;y^=-1;for(var g=m;g<A;g++)y=y>>>8^_[(y^S[g])&255];return y^-1}o.exports=c},"./node_modules/upng-js/node_modules/pako/lib/zlib/deflate.js":(o,u,a)=>{var c=a("./node_modules/upng-js/node_modules/pako/lib/utils/common.js"),y=a("./node_modules/upng-js/node_modules/pako/lib/zlib/trees.js"),S=a("./node_modules/upng-js/node_modules/pako/lib/zlib/adler32.js"),R=a("./node_modules/upng-js/node_modules/pako/lib/zlib/crc32.js"),m=a("./node_modules/upng-js/node_modules/pako/lib/zlib/messages.js"),_=0,A=1,g=3,T=4,O=5,w=0,M=1,f=-2,i=-3,l=-5,p=-1,v=1,b=2,s=3,h=4,E=0,x=2,D=8,z=9,P=15,G=8,B=29,K=256,k=K+1+B,U=30,W=19,F=2*k+1,Y=15,j=3,H=258,Z=H+j+1,ne=32,se=42,me=69,de=73,ue=91,ce=103,pe=113,De=666,we=1,je=2,ye=3,he=4,Ce=3;function ke(V,Te){return V.msg=m[Te],Te}function Xe(V){return(V<<1)-(V>4?9:0)}function nt(V){for(var Te=V.length;--Te>=0;)V[Te]=0}function at(V){var Te=V.state,Se=Te.pending;Se>V.avail_out&&(Se=V.avail_out),Se!==0&&(c.arraySet(V.output,Te.pending_buf,Te.pending_out,Se,V.next_out),V.next_out+=Se,Te.pending_out+=Se,V.total_out+=Se,V.avail_out-=Se,Te.pending-=Se,Te.pending===0&&(Te.pending_out=0))}function rt(V,Te){y._tr_flush_block(V,V.block_start>=0?V.block_start:-1,V.strstart-V.block_start,Te),V.block_start=V.strstart,at(V.strm)}function et(V,Te){V.pending_buf[V.pending++]=Te}function Je(V,Te){V.pending_buf[V.pending++]=Te>>>8&255,V.pending_buf[V.pending++]=Te&255}function $e(V,Te,Se,te){var ve=V.avail_in;return ve>te&&(ve=te),ve===0?0:(V.avail_in-=ve,c.arraySet(Te,V.input,V.next_in,ve,Se),V.state.wrap===1?V.adler=S(V.adler,Te,ve,Se):V.state.wrap===2&&(V.adler=R(V.adler,Te,ve,Se)),V.next_in+=ve,V.total_in+=ve,ve)}function We(V,Te){var Se=V.max_chain_length,te=V.strstart,ve,Pe,ft=V.prev_length,lt=V.nice_match,it=V.strstart>V.w_size-Z?V.strstart-(V.w_size-Z):0,vt=V.window,ir=V.w_mask,Tt=V.prev,Mt=V.strstart+H,wt=vt[te+ft-1],nr=vt[te+ft];V.prev_length>=V.good_match&&(Se>>=2),lt>V.lookahead&&(lt=V.lookahead);do if(ve=Te,!(vt[ve+ft]!==nr||vt[ve+ft-1]!==wt||vt[ve]!==vt[te]||vt[++ve]!==vt[te+1])){te+=2,ve++;do;while(vt[++te]===vt[++ve]&&vt[++te]===vt[++ve]&&vt[++te]===vt[++ve]&&vt[++te]===vt[++ve]&&vt[++te]===vt[++ve]&&vt[++te]===vt[++ve]&&vt[++te]===vt[++ve]&&vt[++te]===vt[++ve]&&te<Mt);if(Pe=H-(Mt-te),te=Mt-H,Pe>ft){if(V.match_start=Te,ft=Pe,Pe>=lt)break;wt=vt[te+ft-1],nr=vt[te+ft]}}while((Te=Tt[Te&ir])>it&&--Se!==0);return ft<=V.lookahead?ft:V.lookahead}function ut(V){var Te=V.w_size,Se,te,ve,Pe,ft;do{if(Pe=V.window_size-V.lookahead-V.strstart,V.strstart>=Te+(Te-Z)){c.arraySet(V.window,V.window,Te,Te,0),V.match_start-=Te,V.strstart-=Te,V.block_start-=Te,te=V.hash_size,Se=te;do ve=V.head[--Se],V.head[Se]=ve>=Te?ve-Te:0;while(--te);te=Te,Se=te;do ve=V.prev[--Se],V.prev[Se]=ve>=Te?ve-Te:0;while(--te);Pe+=Te}if(V.strm.avail_in===0)break;if(te=$e(V.strm,V.window,V.strstart+V.lookahead,Pe),V.lookahead+=te,V.lookahead+V.insert>=j)for(ft=V.strstart-V.insert,V.ins_h=V.window[ft],V.ins_h=(V.ins_h<<V.hash_shift^V.window[ft+1])&V.hash_mask;V.insert&&(V.ins_h=(V.ins_h<<V.hash_shift^V.window[ft+j-1])&V.hash_mask,V.prev[ft&V.w_mask]=V.head[V.ins_h],V.head[V.ins_h]=ft,ft++,V.insert--,!(V.lookahead+V.insert<j)););}while(V.lookahead<Z&&V.strm.avail_in!==0)}function ot(V,Te){var Se=65535;for(Se>V.pending_buf_size-5&&(Se=V.pending_buf_size-5);;){if(V.lookahead<=1){if(ut(V),V.lookahead===0&&Te===_)return we;if(V.lookahead===0)break}V.strstart+=V.lookahead,V.lookahead=0;var te=V.block_start+Se;if((V.strstart===0||V.strstart>=te)&&(V.lookahead=V.strstart-te,V.strstart=te,rt(V,!1),V.strm.avail_out===0)||V.strstart-V.block_start>=V.w_size-Z&&(rt(V,!1),V.strm.avail_out===0))return we}return V.insert=0,Te===T?(rt(V,!0),V.strm.avail_out===0?ye:he):(V.strstart>V.block_start&&(rt(V,!1),V.strm.avail_out===0),we)}function J(V,Te){for(var Se,te;;){if(V.lookahead<Z){if(ut(V),V.lookahead<Z&&Te===_)return we;if(V.lookahead===0)break}if(Se=0,V.lookahead>=j&&(V.ins_h=(V.ins_h<<V.hash_shift^V.window[V.strstart+j-1])&V.hash_mask,Se=V.prev[V.strstart&V.w_mask]=V.head[V.ins_h],V.head[V.ins_h]=V.strstart),Se!==0&&V.strstart-Se<=V.w_size-Z&&(V.match_length=We(V,Se)),V.match_length>=j)if(te=y._tr_tally(V,V.strstart-V.match_start,V.match_length-j),V.lookahead-=V.match_length,V.match_length<=V.max_lazy_match&&V.lookahead>=j){V.match_length--;do V.strstart++,V.ins_h=(V.ins_h<<V.hash_shift^V.window[V.strstart+j-1])&V.hash_mask,Se=V.prev[V.strstart&V.w_mask]=V.head[V.ins_h],V.head[V.ins_h]=V.strstart;while(--V.match_length!==0);V.strstart++}else V.strstart+=V.match_length,V.match_length=0,V.ins_h=V.window[V.strstart],V.ins_h=(V.ins_h<<V.hash_shift^V.window[V.strstart+1])&V.hash_mask;else te=y._tr_tally(V,0,V.window[V.strstart]),V.lookahead--,V.strstart++;if(te&&(rt(V,!1),V.strm.avail_out===0))return we}return V.insert=V.strstart<j-1?V.strstart:j-1,Te===T?(rt(V,!0),V.strm.avail_out===0?ye:he):V.last_lit&&(rt(V,!1),V.strm.avail_out===0)?we:je}function re(V,Te){for(var Se,te,ve;;){if(V.lookahead<Z){if(ut(V),V.lookahead<Z&&Te===_)return we;if(V.lookahead===0)break}if(Se=0,V.lookahead>=j&&(V.ins_h=(V.ins_h<<V.hash_shift^V.window[V.strstart+j-1])&V.hash_mask,Se=V.prev[V.strstart&V.w_mask]=V.head[V.ins_h],V.head[V.ins_h]=V.strstart),V.prev_length=V.match_length,V.prev_match=V.match_start,V.match_length=j-1,Se!==0&&V.prev_length<V.max_lazy_match&&V.strstart-Se<=V.w_size-Z&&(V.match_length=We(V,Se),V.match_length<=5&&(V.strategy===v||V.match_length===j&&V.strstart-V.match_start>4096)&&(V.match_length=j-1)),V.prev_length>=j&&V.match_length<=V.prev_length){ve=V.strstart+V.lookahead-j,te=y._tr_tally(V,V.strstart-1-V.prev_match,V.prev_length-j),V.lookahead-=V.prev_length-1,V.prev_length-=2;do++V.strstart<=ve&&(V.ins_h=(V.ins_h<<V.hash_shift^V.window[V.strstart+j-1])&V.hash_mask,Se=V.prev[V.strstart&V.w_mask]=V.head[V.ins_h],V.head[V.ins_h]=V.strstart);while(--V.prev_length!==0);if(V.match_available=0,V.match_length=j-1,V.strstart++,te&&(rt(V,!1),V.strm.avail_out===0))return we}else if(V.match_available){if(te=y._tr_tally(V,0,V.window[V.strstart-1]),te&&rt(V,!1),V.strstart++,V.lookahead--,V.strm.avail_out===0)return we}else V.match_available=1,V.strstart++,V.lookahead--}return V.match_available&&(te=y._tr_tally(V,0,V.window[V.strstart-1]),V.match_available=0),V.insert=V.strstart<j-1?V.strstart:j-1,Te===T?(rt(V,!0),V.strm.avail_out===0?ye:he):V.last_lit&&(rt(V,!1),V.strm.avail_out===0)?we:je}function le(V,Te){for(var Se,te,ve,Pe,ft=V.window;;){if(V.lookahead<=H){if(ut(V),V.lookahead<=H&&Te===_)return we;if(V.lookahead===0)break}if(V.match_length=0,V.lookahead>=j&&V.strstart>0&&(ve=V.strstart-1,te=ft[ve],te===ft[++ve]&&te===ft[++ve]&&te===ft[++ve])){Pe=V.strstart+H;do;while(te===ft[++ve]&&te===ft[++ve]&&te===ft[++ve]&&te===ft[++ve]&&te===ft[++ve]&&te===ft[++ve]&&te===ft[++ve]&&te===ft[++ve]&&ve<Pe);V.match_length=H-(Pe-ve),V.match_length>V.lookahead&&(V.match_length=V.lookahead)}if(V.match_length>=j?(Se=y._tr_tally(V,1,V.match_length-j),V.lookahead-=V.match_length,V.strstart+=V.match_length,V.match_length=0):(Se=y._tr_tally(V,0,V.window[V.strstart]),V.lookahead--,V.strstart++),Se&&(rt(V,!1),V.strm.avail_out===0))return we}return V.insert=0,Te===T?(rt(V,!0),V.strm.avail_out===0?ye:he):V.last_lit&&(rt(V,!1),V.strm.avail_out===0)?we:je}function Re(V,Te){for(var Se;;){if(V.lookahead===0&&(ut(V),V.lookahead===0)){if(Te===_)return we;break}if(V.match_length=0,Se=y._tr_tally(V,0,V.window[V.strstart]),V.lookahead--,V.strstart++,Se&&(rt(V,!1),V.strm.avail_out===0))return we}return V.insert=0,Te===T?(rt(V,!0),V.strm.avail_out===0?ye:he):V.last_lit&&(rt(V,!1),V.strm.avail_out===0)?we:je}function xe(V,Te,Se,te,ve){this.good_length=V,this.max_lazy=Te,this.nice_length=Se,this.max_chain=te,this.func=ve}var Ye;Ye=[new xe(0,0,0,0,ot),new xe(4,4,8,4,J),new xe(4,5,16,8,J),new xe(4,6,32,32,J),new xe(4,4,16,16,re),new xe(8,16,32,32,re),new xe(8,16,128,128,re),new xe(8,32,128,256,re),new xe(32,128,258,1024,re),new xe(32,258,258,4096,re)];function Ge(V){V.window_size=2*V.w_size,nt(V.head),V.max_lazy_match=Ye[V.level].max_lazy,V.good_match=Ye[V.level].good_length,V.nice_match=Ye[V.level].nice_length,V.max_chain_length=Ye[V.level].max_chain,V.strstart=0,V.block_start=0,V.lookahead=0,V.insert=0,V.match_length=V.prev_length=j-1,V.match_available=0,V.ins_h=0}function q(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=D,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new c.Buf16(F*2),this.dyn_dtree=new c.Buf16((2*U+1)*2),this.bl_tree=new c.Buf16((2*W+1)*2),nt(this.dyn_ltree),nt(this.dyn_dtree),nt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new c.Buf16(Y+1),this.heap=new c.Buf16(2*k+1),nt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new c.Buf16(2*k+1),nt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function _e(V){var Te;return!V||!V.state?ke(V,f):(V.total_in=V.total_out=0,V.data_type=x,Te=V.state,Te.pending=0,Te.pending_out=0,Te.wrap<0&&(Te.wrap=-Te.wrap),Te.status=Te.wrap?se:pe,V.adler=Te.wrap===2?0:1,Te.last_flush=_,y._tr_init(Te),w)}function Oe(V){var Te=_e(V);return Te===w&&Ge(V.state),Te}function Ke(V,Te){return!V||!V.state||V.state.wrap!==2?f:(V.state.gzhead=Te,w)}function be(V,Te,Se,te,ve,Pe){if(!V)return f;var ft=1;if(Te===p&&(Te=6),te<0?(ft=0,te=-te):te>15&&(ft=2,te-=16),ve<1||ve>z||Se!==D||te<8||te>15||Te<0||Te>9||Pe<0||Pe>h)return ke(V,f);te===8&&(te=9);var lt=new q;return V.state=lt,lt.strm=V,lt.wrap=ft,lt.gzhead=null,lt.w_bits=te,lt.w_size=1<<lt.w_bits,lt.w_mask=lt.w_size-1,lt.hash_bits=ve+7,lt.hash_size=1<<lt.hash_bits,lt.hash_mask=lt.hash_size-1,lt.hash_shift=~~((lt.hash_bits+j-1)/j),lt.window=new c.Buf8(lt.w_size*2),lt.head=new c.Buf16(lt.hash_size),lt.prev=new c.Buf16(lt.w_size),lt.lit_bufsize=1<<ve+6,lt.pending_buf_size=lt.lit_bufsize*4,lt.pending_buf=new c.Buf8(lt.pending_buf_size),lt.d_buf=1*lt.lit_bufsize,lt.l_buf=3*lt.lit_bufsize,lt.level=Te,lt.strategy=Pe,lt.method=Se,Oe(V)}function Ue(V,Te){return be(V,Te,D,P,G,E)}function ee(V,Te){var Se,te,ve,Pe;if(!V||!V.state||Te>O||Te<0)return V?ke(V,f):f;if(te=V.state,!V.output||!V.input&&V.avail_in!==0||te.status===De&&Te!==T)return ke(V,V.avail_out===0?l:f);if(te.strm=V,Se=te.last_flush,te.last_flush=Te,te.status===se)if(te.wrap===2)V.adler=0,et(te,31),et(te,139),et(te,8),te.gzhead?(et(te,(te.gzhead.text?1:0)+(te.gzhead.hcrc?2:0)+(te.gzhead.extra?4:0)+(te.gzhead.name?8:0)+(te.gzhead.comment?16:0)),et(te,te.gzhead.time&255),et(te,te.gzhead.time>>8&255),et(te,te.gzhead.time>>16&255),et(te,te.gzhead.time>>24&255),et(te,te.level===9?2:te.strategy>=b||te.level<2?4:0),et(te,te.gzhead.os&255),te.gzhead.extra&&te.gzhead.extra.length&&(et(te,te.gzhead.extra.length&255),et(te,te.gzhead.extra.length>>8&255)),te.gzhead.hcrc&&(V.adler=R(V.adler,te.pending_buf,te.pending,0)),te.gzindex=0,te.status=me):(et(te,0),et(te,0),et(te,0),et(te,0),et(te,0),et(te,te.level===9?2:te.strategy>=b||te.level<2?4:0),et(te,Ce),te.status=pe);else{var ft=D+(te.w_bits-8<<4)<<8,lt=-1;te.strategy>=b||te.level<2?lt=0:te.level<6?lt=1:te.level===6?lt=2:lt=3,ft|=lt<<6,te.strstart!==0&&(ft|=ne),ft+=31-ft%31,te.status=pe,Je(te,ft),te.strstart!==0&&(Je(te,V.adler>>>16),Je(te,V.adler&65535)),V.adler=1}if(te.status===me)if(te.gzhead.extra){for(ve=te.pending;te.gzindex<(te.gzhead.extra.length&65535)&&!(te.pending===te.pending_buf_size&&(te.gzhead.hcrc&&te.pending>ve&&(V.adler=R(V.adler,te.pending_buf,te.pending-ve,ve)),at(V),ve=te.pending,te.pending===te.pending_buf_size));)et(te,te.gzhead.extra[te.gzindex]&255),te.gzindex++;te.gzhead.hcrc&&te.pending>ve&&(V.adler=R(V.adler,te.pending_buf,te.pending-ve,ve)),te.gzindex===te.gzhead.extra.length&&(te.gzindex=0,te.status=de)}else te.status=de;if(te.status===de)if(te.gzhead.name){ve=te.pending;do{if(te.pending===te.pending_buf_size&&(te.gzhead.hcrc&&te.pending>ve&&(V.adler=R(V.adler,te.pending_buf,te.pending-ve,ve)),at(V),ve=te.pending,te.pending===te.pending_buf_size)){Pe=1;break}te.gzindex<te.gzhead.name.length?Pe=te.gzhead.name.charCodeAt(te.gzindex++)&255:Pe=0,et(te,Pe)}while(Pe!==0);te.gzhead.hcrc&&te.pending>ve&&(V.adler=R(V.adler,te.pending_buf,te.pending-ve,ve)),Pe===0&&(te.gzindex=0,te.status=ue)}else te.status=ue;if(te.status===ue)if(te.gzhead.comment){ve=te.pending;do{if(te.pending===te.pending_buf_size&&(te.gzhead.hcrc&&te.pending>ve&&(V.adler=R(V.adler,te.pending_buf,te.pending-ve,ve)),at(V),ve=te.pending,te.pending===te.pending_buf_size)){Pe=1;break}te.gzindex<te.gzhead.comment.length?Pe=te.gzhead.comment.charCodeAt(te.gzindex++)&255:Pe=0,et(te,Pe)}while(Pe!==0);te.gzhead.hcrc&&te.pending>ve&&(V.adler=R(V.adler,te.pending_buf,te.pending-ve,ve)),Pe===0&&(te.status=ce)}else te.status=ce;if(te.status===ce&&(te.gzhead.hcrc?(te.pending+2>te.pending_buf_size&&at(V),te.pending+2<=te.pending_buf_size&&(et(te,V.adler&255),et(te,V.adler>>8&255),V.adler=0,te.status=pe)):te.status=pe),te.pending!==0){if(at(V),V.avail_out===0)return te.last_flush=-1,w}else if(V.avail_in===0&&Xe(Te)<=Xe(Se)&&Te!==T)return ke(V,l);if(te.status===De&&V.avail_in!==0)return ke(V,l);if(V.avail_in!==0||te.lookahead!==0||Te!==_&&te.status!==De){var it=te.strategy===b?Re(te,Te):te.strategy===s?le(te,Te):Ye[te.level].func(te,Te);if((it===ye||it===he)&&(te.status=De),it===we||it===ye)return V.avail_out===0&&(te.last_flush=-1),w;if(it===je&&(Te===A?y._tr_align(te):Te!==O&&(y._tr_stored_block(te,0,0,!1),Te===g&&(nt(te.head),te.lookahead===0&&(te.strstart=0,te.block_start=0,te.insert=0))),at(V),V.avail_out===0))return te.last_flush=-1,w}return Te!==T?w:te.wrap<=0?M:(te.wrap===2?(et(te,V.adler&255),et(te,V.adler>>8&255),et(te,V.adler>>16&255),et(te,V.adler>>24&255),et(te,V.total_in&255),et(te,V.total_in>>8&255),et(te,V.total_in>>16&255),et(te,V.total_in>>24&255)):(Je(te,V.adler>>>16),Je(te,V.adler&65535)),at(V),te.wrap>0&&(te.wrap=-te.wrap),te.pending!==0?w:M)}function He(V){var Te;return!V||!V.state?f:(Te=V.state.status,Te!==se&&Te!==me&&Te!==de&&Te!==ue&&Te!==ce&&Te!==pe&&Te!==De?ke(V,f):(V.state=null,Te===pe?ke(V,i):w))}function st(V,Te){var Se=Te.length,te,ve,Pe,ft,lt,it,vt,ir;if(!V||!V.state||(te=V.state,ft=te.wrap,ft===2||ft===1&&te.status!==se||te.lookahead))return f;for(ft===1&&(V.adler=S(V.adler,Te,Se,0)),te.wrap=0,Se>=te.w_size&&(ft===0&&(nt(te.head),te.strstart=0,te.block_start=0,te.insert=0),ir=new c.Buf8(te.w_size),c.arraySet(ir,Te,Se-te.w_size,te.w_size,0),Te=ir,Se=te.w_size),lt=V.avail_in,it=V.next_in,vt=V.input,V.avail_in=Se,V.next_in=0,V.input=Te,ut(te);te.lookahead>=j;){ve=te.strstart,Pe=te.lookahead-(j-1);do te.ins_h=(te.ins_h<<te.hash_shift^te.window[ve+j-1])&te.hash_mask,te.prev[ve&te.w_mask]=te.head[te.ins_h],te.head[te.ins_h]=ve,ve++;while(--Pe);te.strstart=ve,te.lookahead=j-1,ut(te)}return te.strstart+=te.lookahead,te.block_start=te.strstart,te.insert=te.lookahead,te.lookahead=0,te.match_length=te.prev_length=j-1,te.match_available=0,V.next_in=it,V.input=vt,V.avail_in=lt,te.wrap=ft,w}u.deflateInit=Ue,u.deflateInit2=be,u.deflateReset=Oe,u.deflateResetKeep=_e,u.deflateSetHeader=Ke,u.deflate=ee,u.deflateEnd=He,u.deflateSetDictionary=st,u.deflateInfo="pako deflate (from Nodeca project)"},"./node_modules/upng-js/node_modules/pako/lib/zlib/gzheader.js":o=>{function u(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}o.exports=u},"./node_modules/upng-js/node_modules/pako/lib/zlib/inffast.js":o=>{var u=30,a=12;o.exports=function(y,S){var R,m,_,A,g,T,O,w,M,f,i,l,p,v,b,s,h,E,x,D,z,P,G,B,K;R=y.state,m=y.next_in,B=y.input,_=m+(y.avail_in-5),A=y.next_out,K=y.output,g=A-(S-y.avail_out),T=A+(y.avail_out-257),O=R.dmax,w=R.wsize,M=R.whave,f=R.wnext,i=R.window,l=R.hold,p=R.bits,v=R.lencode,b=R.distcode,s=(1<<R.lenbits)-1,h=(1<<R.distbits)-1;e:do{p<15&&(l+=B[m++]<<p,p+=8,l+=B[m++]<<p,p+=8),E=v[l&s];t:for(;;){if(x=E>>>24,l>>>=x,p-=x,x=E>>>16&255,x===0)K[A++]=E&65535;else if(x&16){D=E&65535,x&=15,x&&(p<x&&(l+=B[m++]<<p,p+=8),D+=l&(1<<x)-1,l>>>=x,p-=x),p<15&&(l+=B[m++]<<p,p+=8,l+=B[m++]<<p,p+=8),E=b[l&h];r:for(;;){if(x=E>>>24,l>>>=x,p-=x,x=E>>>16&255,x&16){if(z=E&65535,x&=15,p<x&&(l+=B[m++]<<p,p+=8,p<x&&(l+=B[m++]<<p,p+=8)),z+=l&(1<<x)-1,z>O){y.msg="invalid distance too far back",R.mode=u;break e}if(l>>>=x,p-=x,x=A-g,z>x){if(x=z-x,x>M&&R.sane){y.msg="invalid distance too far back",R.mode=u;break e}if(P=0,G=i,f===0){if(P+=w-x,x<D){D-=x;do K[A++]=i[P++];while(--x);P=A-z,G=K}}else if(f<x){if(P+=w+f-x,x-=f,x<D){D-=x;do K[A++]=i[P++];while(--x);if(P=0,f<D){x=f,D-=x;do K[A++]=i[P++];while(--x);P=A-z,G=K}}}else if(P+=f-x,x<D){D-=x;do K[A++]=i[P++];while(--x);P=A-z,G=K}for(;D>2;)K[A++]=G[P++],K[A++]=G[P++],K[A++]=G[P++],D-=3;D&&(K[A++]=G[P++],D>1&&(K[A++]=G[P++]))}else{P=A-z;do K[A++]=K[P++],K[A++]=K[P++],K[A++]=K[P++],D-=3;while(D>2);D&&(K[A++]=K[P++],D>1&&(K[A++]=K[P++]))}}else if((x&64)===0){E=b[(E&65535)+(l&(1<<x)-1)];continue r}else{y.msg="invalid distance code",R.mode=u;break e}break}}else if((x&64)===0){E=v[(E&65535)+(l&(1<<x)-1)];continue t}else if(x&32){R.mode=a;break e}else{y.msg="invalid literal/length code",R.mode=u;break e}break}}while(m<_&&A<T);D=p>>3,m-=D,p-=D<<3,l&=(1<<p)-1,y.next_in=m,y.next_out=A,y.avail_in=m<_?5+(_-m):5-(m-_),y.avail_out=A<T?257+(T-A):257-(A-T),R.hold=l,R.bits=p}},"./node_modules/upng-js/node_modules/pako/lib/zlib/inflate.js":(o,u,a)=>{var c=a("./node_modules/upng-js/node_modules/pako/lib/utils/common.js"),y=a("./node_modules/upng-js/node_modules/pako/lib/zlib/adler32.js"),S=a("./node_modules/upng-js/node_modules/pako/lib/zlib/crc32.js"),R=a("./node_modules/upng-js/node_modules/pako/lib/zlib/inffast.js"),m=a("./node_modules/upng-js/node_modules/pako/lib/zlib/inftrees.js"),_=0,A=1,g=2,T=4,O=5,w=6,M=0,f=1,i=2,l=-2,p=-3,v=-4,b=-5,s=8,h=1,E=2,x=3,D=4,z=5,P=6,G=7,B=8,K=9,k=10,U=11,W=12,F=13,Y=14,j=15,H=16,Z=17,ne=18,se=19,me=20,de=21,ue=22,ce=23,pe=24,De=25,we=26,je=27,ye=28,he=29,Ce=30,ke=31,Xe=32,nt=852,at=592,rt=15,et=rt;function Je(be){return(be>>>24&255)+(be>>>8&65280)+((be&65280)<<8)+((be&255)<<24)}function $e(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new c.Buf16(320),this.work=new c.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function We(be){var Ue;return!be||!be.state?l:(Ue=be.state,be.total_in=be.total_out=Ue.total=0,be.msg="",Ue.wrap&&(be.adler=Ue.wrap&1),Ue.mode=h,Ue.last=0,Ue.havedict=0,Ue.dmax=32768,Ue.head=null,Ue.hold=0,Ue.bits=0,Ue.lencode=Ue.lendyn=new c.Buf32(nt),Ue.distcode=Ue.distdyn=new c.Buf32(at),Ue.sane=1,Ue.back=-1,M)}function ut(be){var Ue;return!be||!be.state?l:(Ue=be.state,Ue.wsize=0,Ue.whave=0,Ue.wnext=0,We(be))}function ot(be,Ue){var ee,He;return!be||!be.state||(He=be.state,Ue<0?(ee=0,Ue=-Ue):(ee=(Ue>>4)+1,Ue<48&&(Ue&=15)),Ue&&(Ue<8||Ue>15))?l:(He.window!==null&&He.wbits!==Ue&&(He.window=null),He.wrap=ee,He.wbits=Ue,ut(be))}function J(be,Ue){var ee,He;return be?(He=new $e,be.state=He,He.window=null,ee=ot(be,Ue),ee!==M&&(be.state=null),ee):l}function re(be){return J(be,et)}var le=!0,Re,xe;function Ye(be){if(le){var Ue;for(Re=new c.Buf32(512),xe=new c.Buf32(32),Ue=0;Ue<144;)be.lens[Ue++]=8;for(;Ue<256;)be.lens[Ue++]=9;for(;Ue<280;)be.lens[Ue++]=7;for(;Ue<288;)be.lens[Ue++]=8;for(m(A,be.lens,0,288,Re,0,be.work,{bits:9}),Ue=0;Ue<32;)be.lens[Ue++]=5;m(g,be.lens,0,32,xe,0,be.work,{bits:5}),le=!1}be.lencode=Re,be.lenbits=9,be.distcode=xe,be.distbits=5}function Ge(be,Ue,ee,He){var st,V=be.state;return V.window===null&&(V.wsize=1<<V.wbits,V.wnext=0,V.whave=0,V.window=new c.Buf8(V.wsize)),He>=V.wsize?(c.arraySet(V.window,Ue,ee-V.wsize,V.wsize,0),V.wnext=0,V.whave=V.wsize):(st=V.wsize-V.wnext,st>He&&(st=He),c.arraySet(V.window,Ue,ee-He,st,V.wnext),He-=st,He?(c.arraySet(V.window,Ue,ee-He,He,0),V.wnext=He,V.whave=V.wsize):(V.wnext+=st,V.wnext===V.wsize&&(V.wnext=0),V.whave<V.wsize&&(V.whave+=st))),0}function q(be,Ue){var ee,He,st,V,Te,Se,te,ve,Pe,ft,lt,it,vt,ir,Tt=0,Mt,wt,nr,Ut,Hr,Ar,Ht,Kt,Ft=new c.Buf8(4),Gt,vr,Ti=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!be||!be.state||!be.output||!be.input&&be.avail_in!==0)return l;ee=be.state,ee.mode===W&&(ee.mode=F),Te=be.next_out,st=be.output,te=be.avail_out,V=be.next_in,He=be.input,Se=be.avail_in,ve=ee.hold,Pe=ee.bits,ft=Se,lt=te,Kt=M;e:for(;;)switch(ee.mode){case h:if(ee.wrap===0){ee.mode=F;break}for(;Pe<16;){if(Se===0)break e;Se--,ve+=He[V++]<<Pe,Pe+=8}if(ee.wrap&2&&ve===35615){ee.check=0,Ft[0]=ve&255,Ft[1]=ve>>>8&255,ee.check=S(ee.check,Ft,2,0),ve=0,Pe=0,ee.mode=E;break}if(ee.flags=0,ee.head&&(ee.head.done=!1),!(ee.wrap&1)||(((ve&255)<<8)+(ve>>8))%31){be.msg="incorrect header check",ee.mode=Ce;break}if((ve&15)!==s){be.msg="unknown compression method",ee.mode=Ce;break}if(ve>>>=4,Pe-=4,Ht=(ve&15)+8,ee.wbits===0)ee.wbits=Ht;else if(Ht>ee.wbits){be.msg="invalid window size",ee.mode=Ce;break}ee.dmax=1<<Ht,be.adler=ee.check=1,ee.mode=ve&512?k:W,ve=0,Pe=0;break;case E:for(;Pe<16;){if(Se===0)break e;Se--,ve+=He[V++]<<Pe,Pe+=8}if(ee.flags=ve,(ee.flags&255)!==s){be.msg="unknown compression method",ee.mode=Ce;break}if(ee.flags&57344){be.msg="unknown header flags set",ee.mode=Ce;break}ee.head&&(ee.head.text=ve>>8&1),ee.flags&512&&(Ft[0]=ve&255,Ft[1]=ve>>>8&255,ee.check=S(ee.check,Ft,2,0)),ve=0,Pe=0,ee.mode=x;case x:for(;Pe<32;){if(Se===0)break e;Se--,ve+=He[V++]<<Pe,Pe+=8}ee.head&&(ee.head.time=ve),ee.flags&512&&(Ft[0]=ve&255,Ft[1]=ve>>>8&255,Ft[2]=ve>>>16&255,Ft[3]=ve>>>24&255,ee.check=S(ee.check,Ft,4,0)),ve=0,Pe=0,ee.mode=D;case D:for(;Pe<16;){if(Se===0)break e;Se--,ve+=He[V++]<<Pe,Pe+=8}ee.head&&(ee.head.xflags=ve&255,ee.head.os=ve>>8),ee.flags&512&&(Ft[0]=ve&255,Ft[1]=ve>>>8&255,ee.check=S(ee.check,Ft,2,0)),ve=0,Pe=0,ee.mode=z;case z:if(ee.flags&1024){for(;Pe<16;){if(Se===0)break e;Se--,ve+=He[V++]<<Pe,Pe+=8}ee.length=ve,ee.head&&(ee.head.extra_len=ve),ee.flags&512&&(Ft[0]=ve&255,Ft[1]=ve>>>8&255,ee.check=S(ee.check,Ft,2,0)),ve=0,Pe=0}else ee.head&&(ee.head.extra=null);ee.mode=P;case P:if(ee.flags&1024&&(it=ee.length,it>Se&&(it=Se),it&&(ee.head&&(Ht=ee.head.extra_len-ee.length,ee.head.extra||(ee.head.extra=new Array(ee.head.extra_len)),c.arraySet(ee.head.extra,He,V,it,Ht)),ee.flags&512&&(ee.check=S(ee.check,He,it,V)),Se-=it,V+=it,ee.length-=it),ee.length))break e;ee.length=0,ee.mode=G;case G:if(ee.flags&2048){if(Se===0)break e;it=0;do Ht=He[V+it++],ee.head&&Ht&&ee.length<65536&&(ee.head.name+=String.fromCharCode(Ht));while(Ht&&it<Se);if(ee.flags&512&&(ee.check=S(ee.check,He,it,V)),Se-=it,V+=it,Ht)break e}else ee.head&&(ee.head.name=null);ee.length=0,ee.mode=B;case B:if(ee.flags&4096){if(Se===0)break e;it=0;do Ht=He[V+it++],ee.head&&Ht&&ee.length<65536&&(ee.head.comment+=String.fromCharCode(Ht));while(Ht&&it<Se);if(ee.flags&512&&(ee.check=S(ee.check,He,it,V)),Se-=it,V+=it,Ht)break e}else ee.head&&(ee.head.comment=null);ee.mode=K;case K:if(ee.flags&512){for(;Pe<16;){if(Se===0)break e;Se--,ve+=He[V++]<<Pe,Pe+=8}if(ve!==(ee.check&65535)){be.msg="header crc mismatch",ee.mode=Ce;break}ve=0,Pe=0}ee.head&&(ee.head.hcrc=ee.flags>>9&1,ee.head.done=!0),be.adler=ee.check=0,ee.mode=W;break;case k:for(;Pe<32;){if(Se===0)break e;Se--,ve+=He[V++]<<Pe,Pe+=8}be.adler=ee.check=Je(ve),ve=0,Pe=0,ee.mode=U;case U:if(ee.havedict===0)return be.next_out=Te,be.avail_out=te,be.next_in=V,be.avail_in=Se,ee.hold=ve,ee.bits=Pe,i;be.adler=ee.check=1,ee.mode=W;case W:if(Ue===O||Ue===w)break e;case F:if(ee.last){ve>>>=Pe&7,Pe-=Pe&7,ee.mode=je;break}for(;Pe<3;){if(Se===0)break e;Se--,ve+=He[V++]<<Pe,Pe+=8}switch(ee.last=ve&1,ve>>>=1,Pe-=1,ve&3){case 0:ee.mode=Y;break;case 1:if(Ye(ee),ee.mode=me,Ue===w){ve>>>=2,Pe-=2;break e}break;case 2:ee.mode=Z;break;case 3:be.msg="invalid block type",ee.mode=Ce}ve>>>=2,Pe-=2;break;case Y:for(ve>>>=Pe&7,Pe-=Pe&7;Pe<32;){if(Se===0)break e;Se--,ve+=He[V++]<<Pe,Pe+=8}if((ve&65535)!==(ve>>>16^65535)){be.msg="invalid stored block lengths",ee.mode=Ce;break}if(ee.length=ve&65535,ve=0,Pe=0,ee.mode=j,Ue===w)break e;case j:ee.mode=H;case H:if(it=ee.length,it){if(it>Se&&(it=Se),it>te&&(it=te),it===0)break e;c.arraySet(st,He,V,it,Te),Se-=it,V+=it,te-=it,Te+=it,ee.length-=it;break}ee.mode=W;break;case Z:for(;Pe<14;){if(Se===0)break e;Se--,ve+=He[V++]<<Pe,Pe+=8}if(ee.nlen=(ve&31)+257,ve>>>=5,Pe-=5,ee.ndist=(ve&31)+1,ve>>>=5,Pe-=5,ee.ncode=(ve&15)+4,ve>>>=4,Pe-=4,ee.nlen>286||ee.ndist>30){be.msg="too many length or distance symbols",ee.mode=Ce;break}ee.have=0,ee.mode=ne;case ne:for(;ee.have<ee.ncode;){for(;Pe<3;){if(Se===0)break e;Se--,ve+=He[V++]<<Pe,Pe+=8}ee.lens[Ti[ee.have++]]=ve&7,ve>>>=3,Pe-=3}for(;ee.have<19;)ee.lens[Ti[ee.have++]]=0;if(ee.lencode=ee.lendyn,ee.lenbits=7,Gt={bits:ee.lenbits},Kt=m(_,ee.lens,0,19,ee.lencode,0,ee.work,Gt),ee.lenbits=Gt.bits,Kt){be.msg="invalid code lengths set",ee.mode=Ce;break}ee.have=0,ee.mode=se;case se:for(;ee.have<ee.nlen+ee.ndist;){for(;Tt=ee.lencode[ve&(1<<ee.lenbits)-1],Mt=Tt>>>24,wt=Tt>>>16&255,nr=Tt&65535,!(Mt<=Pe);){if(Se===0)break e;Se--,ve+=He[V++]<<Pe,Pe+=8}if(nr<16)ve>>>=Mt,Pe-=Mt,ee.lens[ee.have++]=nr;else{if(nr===16){for(vr=Mt+2;Pe<vr;){if(Se===0)break e;Se--,ve+=He[V++]<<Pe,Pe+=8}if(ve>>>=Mt,Pe-=Mt,ee.have===0){be.msg="invalid bit length repeat",ee.mode=Ce;break}Ht=ee.lens[ee.have-1],it=3+(ve&3),ve>>>=2,Pe-=2}else if(nr===17){for(vr=Mt+3;Pe<vr;){if(Se===0)break e;Se--,ve+=He[V++]<<Pe,Pe+=8}ve>>>=Mt,Pe-=Mt,Ht=0,it=3+(ve&7),ve>>>=3,Pe-=3}else{for(vr=Mt+7;Pe<vr;){if(Se===0)break e;Se--,ve+=He[V++]<<Pe,Pe+=8}ve>>>=Mt,Pe-=Mt,Ht=0,it=11+(ve&127),ve>>>=7,Pe-=7}if(ee.have+it>ee.nlen+ee.ndist){be.msg="invalid bit length repeat",ee.mode=Ce;break}for(;it--;)ee.lens[ee.have++]=Ht}}if(ee.mode===Ce)break;if(ee.lens[256]===0){be.msg="invalid code -- missing end-of-block",ee.mode=Ce;break}if(ee.lenbits=9,Gt={bits:ee.lenbits},Kt=m(A,ee.lens,0,ee.nlen,ee.lencode,0,ee.work,Gt),ee.lenbits=Gt.bits,Kt){be.msg="invalid literal/lengths set",ee.mode=Ce;break}if(ee.distbits=6,ee.distcode=ee.distdyn,Gt={bits:ee.distbits},Kt=m(g,ee.lens,ee.nlen,ee.ndist,ee.distcode,0,ee.work,Gt),ee.distbits=Gt.bits,Kt){be.msg="invalid distances set",ee.mode=Ce;break}if(ee.mode=me,Ue===w)break e;case me:ee.mode=de;case de:if(Se>=6&&te>=258){be.next_out=Te,be.avail_out=te,be.next_in=V,be.avail_in=Se,ee.hold=ve,ee.bits=Pe,R(be,lt),Te=be.next_out,st=be.output,te=be.avail_out,V=be.next_in,He=be.input,Se=be.avail_in,ve=ee.hold,Pe=ee.bits,ee.mode===W&&(ee.back=-1);break}for(ee.back=0;Tt=ee.lencode[ve&(1<<ee.lenbits)-1],Mt=Tt>>>24,wt=Tt>>>16&255,nr=Tt&65535,!(Mt<=Pe);){if(Se===0)break e;Se--,ve+=He[V++]<<Pe,Pe+=8}if(wt&&(wt&240)===0){for(Ut=Mt,Hr=wt,Ar=nr;Tt=ee.lencode[Ar+((ve&(1<<Ut+Hr)-1)>>Ut)],Mt=Tt>>>24,wt=Tt>>>16&255,nr=Tt&65535,!(Ut+Mt<=Pe);){if(Se===0)break e;Se--,ve+=He[V++]<<Pe,Pe+=8}ve>>>=Ut,Pe-=Ut,ee.back+=Ut}if(ve>>>=Mt,Pe-=Mt,ee.back+=Mt,ee.length=nr,wt===0){ee.mode=we;break}if(wt&32){ee.back=-1,ee.mode=W;break}if(wt&64){be.msg="invalid literal/length code",ee.mode=Ce;break}ee.extra=wt&15,ee.mode=ue;case ue:if(ee.extra){for(vr=ee.extra;Pe<vr;){if(Se===0)break e;Se--,ve+=He[V++]<<Pe,Pe+=8}ee.length+=ve&(1<<ee.extra)-1,ve>>>=ee.extra,Pe-=ee.extra,ee.back+=ee.extra}ee.was=ee.length,ee.mode=ce;case ce:for(;Tt=ee.distcode[ve&(1<<ee.distbits)-1],Mt=Tt>>>24,wt=Tt>>>16&255,nr=Tt&65535,!(Mt<=Pe);){if(Se===0)break e;Se--,ve+=He[V++]<<Pe,Pe+=8}if((wt&240)===0){for(Ut=Mt,Hr=wt,Ar=nr;Tt=ee.distcode[Ar+((ve&(1<<Ut+Hr)-1)>>Ut)],Mt=Tt>>>24,wt=Tt>>>16&255,nr=Tt&65535,!(Ut+Mt<=Pe);){if(Se===0)break e;Se--,ve+=He[V++]<<Pe,Pe+=8}ve>>>=Ut,Pe-=Ut,ee.back+=Ut}if(ve>>>=Mt,Pe-=Mt,ee.back+=Mt,wt&64){be.msg="invalid distance code",ee.mode=Ce;break}ee.offset=nr,ee.extra=wt&15,ee.mode=pe;case pe:if(ee.extra){for(vr=ee.extra;Pe<vr;){if(Se===0)break e;Se--,ve+=He[V++]<<Pe,Pe+=8}ee.offset+=ve&(1<<ee.extra)-1,ve>>>=ee.extra,Pe-=ee.extra,ee.back+=ee.extra}if(ee.offset>ee.dmax){be.msg="invalid distance too far back",ee.mode=Ce;break}ee.mode=De;case De:if(te===0)break e;if(it=lt-te,ee.offset>it){if(it=ee.offset-it,it>ee.whave&&ee.sane){be.msg="invalid distance too far back",ee.mode=Ce;break}it>ee.wnext?(it-=ee.wnext,vt=ee.wsize-it):vt=ee.wnext-it,it>ee.length&&(it=ee.length),ir=ee.window}else ir=st,vt=Te-ee.offset,it=ee.length;it>te&&(it=te),te-=it,ee.length-=it;do st[Te++]=ir[vt++];while(--it);ee.length===0&&(ee.mode=de);break;case we:if(te===0)break e;st[Te++]=ee.length,te--,ee.mode=de;break;case je:if(ee.wrap){for(;Pe<32;){if(Se===0)break e;Se--,ve|=He[V++]<<Pe,Pe+=8}if(lt-=te,be.total_out+=lt,ee.total+=lt,lt&&(be.adler=ee.check=ee.flags?S(ee.check,st,lt,Te-lt):y(ee.check,st,lt,Te-lt)),lt=te,(ee.flags?ve:Je(ve))!==ee.check){be.msg="incorrect data check",ee.mode=Ce;break}ve=0,Pe=0}ee.mode=ye;case ye:if(ee.wrap&&ee.flags){for(;Pe<32;){if(Se===0)break e;Se--,ve+=He[V++]<<Pe,Pe+=8}if(ve!==(ee.total&4294967295)){be.msg="incorrect length check",ee.mode=Ce;break}ve=0,Pe=0}ee.mode=he;case he:Kt=f;break e;case Ce:Kt=p;break e;case ke:return v;case Xe:default:return l}return be.next_out=Te,be.avail_out=te,be.next_in=V,be.avail_in=Se,ee.hold=ve,ee.bits=Pe,(ee.wsize||lt!==be.avail_out&&ee.mode<Ce&&(ee.mode<je||Ue!==T))&&Ge(be,be.output,be.next_out,lt-be.avail_out),ft-=be.avail_in,lt-=be.avail_out,be.total_in+=ft,be.total_out+=lt,ee.total+=lt,ee.wrap&&lt&&(be.adler=ee.check=ee.flags?S(ee.check,st,lt,be.next_out-lt):y(ee.check,st,lt,be.next_out-lt)),be.data_type=ee.bits+(ee.last?64:0)+(ee.mode===W?128:0)+(ee.mode===me||ee.mode===j?256:0),(ft===0&&lt===0||Ue===T)&&Kt===M&&(Kt=b),Kt}function _e(be){if(!be||!be.state)return l;var Ue=be.state;return Ue.window&&(Ue.window=null),be.state=null,M}function Oe(be,Ue){var ee;return!be||!be.state||(ee=be.state,(ee.wrap&2)===0)?l:(ee.head=Ue,Ue.done=!1,M)}function Ke(be,Ue){var ee=Ue.length,He,st,V;return!be||!be.state||(He=be.state,He.wrap!==0&&He.mode!==U)?l:He.mode===U&&(st=1,st=y(st,Ue,ee,0),st!==He.check)?p:(V=Ge(be,Ue,ee,ee),V?(He.mode=ke,v):(He.havedict=1,M))}u.inflateReset=ut,u.inflateReset2=ot,u.inflateResetKeep=We,u.inflateInit=re,u.inflateInit2=J,u.inflate=q,u.inflateEnd=_e,u.inflateGetHeader=Oe,u.inflateSetDictionary=Ke,u.inflateInfo="pako inflate (from Nodeca project)"},"./node_modules/upng-js/node_modules/pako/lib/zlib/inftrees.js":(o,u,a)=>{var c=a("./node_modules/upng-js/node_modules/pako/lib/utils/common.js"),y=15,S=852,R=592,m=0,_=1,A=2,g=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],T=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],O=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],w=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];o.exports=function(f,i,l,p,v,b,s,h){var E=h.bits,x=0,D=0,z=0,P=0,G=0,B=0,K=0,k=0,U=0,W=0,F,Y,j,H,Z,ne=null,se=0,me,de=new c.Buf16(y+1),ue=new c.Buf16(y+1),ce=null,pe=0,De,we,je;for(x=0;x<=y;x++)de[x]=0;for(D=0;D<p;D++)de[i[l+D]]++;for(G=E,P=y;P>=1&&de[P]===0;P--);if(G>P&&(G=P),P===0)return v[b++]=20971520,v[b++]=20971520,h.bits=1,0;for(z=1;z<P&&de[z]===0;z++);for(G<z&&(G=z),k=1,x=1;x<=y;x++)if(k<<=1,k-=de[x],k<0)return-1;if(k>0&&(f===m||P!==1))return-1;for(ue[1]=0,x=1;x<y;x++)ue[x+1]=ue[x]+de[x];for(D=0;D<p;D++)i[l+D]!==0&&(s[ue[i[l+D]]++]=D);if(f===m?(ne=ce=s,me=19):f===_?(ne=g,se-=257,ce=T,pe-=257,me=256):(ne=O,ce=w,me=-1),W=0,D=0,x=z,Z=b,B=G,K=0,j=-1,U=1<<G,H=U-1,f===_&&U>S||f===A&&U>R)return 1;for(;;){De=x-K,s[D]<me?(we=0,je=s[D]):s[D]>me?(we=ce[pe+s[D]],je=ne[se+s[D]]):(we=96,je=0),F=1<<x-K,Y=1<<B,z=Y;do Y-=F,v[Z+(W>>K)+Y]=De<<24|we<<16|je|0;while(Y!==0);for(F=1<<x-1;W&F;)F>>=1;if(F!==0?(W&=F-1,W+=F):W=0,D++,--de[x]===0){if(x===P)break;x=i[l+s[D]]}if(x>G&&(W&H)!==j){for(K===0&&(K=G),Z+=z,B=x-K,k=1<<B;B+K<P&&(k-=de[B+K],!(k<=0));)B++,k<<=1;if(U+=1<<B,f===_&&U>S||f===A&&U>R)return 1;j=W&H,v[j]=G<<24|B<<16|Z-b|0}}return W!==0&&(v[Z+W]=x-K<<24|4194304|0),h.bits=G,0}},"./node_modules/upng-js/node_modules/pako/lib/zlib/messages.js":o=>{o.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},"./node_modules/upng-js/node_modules/pako/lib/zlib/trees.js":(o,u,a)=>{var c=a("./node_modules/upng-js/node_modules/pako/lib/utils/common.js"),y=4,S=0,R=1,m=2;function _(q){for(var _e=q.length;--_e>=0;)q[_e]=0}var A=0,g=1,T=2,O=3,w=258,M=29,f=256,i=f+1+M,l=30,p=19,v=2*i+1,b=15,s=16,h=7,E=256,x=16,D=17,z=18,P=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],G=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],B=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],K=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],k=512,U=new Array((i+2)*2);_(U);var W=new Array(l*2);_(W);var F=new Array(k);_(F);var Y=new Array(w-O+1);_(Y);var j=new Array(M);_(j);var H=new Array(l);_(H);function Z(q,_e,Oe,Ke,be){this.static_tree=q,this.extra_bits=_e,this.extra_base=Oe,this.elems=Ke,this.max_length=be,this.has_stree=q&&q.length}var ne,se,me;function de(q,_e){this.dyn_tree=q,this.max_code=0,this.stat_desc=_e}function ue(q){return q<256?F[q]:F[256+(q>>>7)]}function ce(q,_e){q.pending_buf[q.pending++]=_e&255,q.pending_buf[q.pending++]=_e>>>8&255}function pe(q,_e,Oe){q.bi_valid>s-Oe?(q.bi_buf|=_e<<q.bi_valid&65535,ce(q,q.bi_buf),q.bi_buf=_e>>s-q.bi_valid,q.bi_valid+=Oe-s):(q.bi_buf|=_e<<q.bi_valid&65535,q.bi_valid+=Oe)}function De(q,_e,Oe){pe(q,Oe[_e*2],Oe[_e*2+1])}function we(q,_e){var Oe=0;do Oe|=q&1,q>>>=1,Oe<<=1;while(--_e>0);return Oe>>>1}function je(q){q.bi_valid===16?(ce(q,q.bi_buf),q.bi_buf=0,q.bi_valid=0):q.bi_valid>=8&&(q.pending_buf[q.pending++]=q.bi_buf&255,q.bi_buf>>=8,q.bi_valid-=8)}function ye(q,_e){var Oe=_e.dyn_tree,Ke=_e.max_code,be=_e.stat_desc.static_tree,Ue=_e.stat_desc.has_stree,ee=_e.stat_desc.extra_bits,He=_e.stat_desc.extra_base,st=_e.stat_desc.max_length,V,Te,Se,te,ve,Pe,ft=0;for(te=0;te<=b;te++)q.bl_count[te]=0;for(Oe[q.heap[q.heap_max]*2+1]=0,V=q.heap_max+1;V<v;V++)Te=q.heap[V],te=Oe[Oe[Te*2+1]*2+1]+1,te>st&&(te=st,ft++),Oe[Te*2+1]=te,!(Te>Ke)&&(q.bl_count[te]++,ve=0,Te>=He&&(ve=ee[Te-He]),Pe=Oe[Te*2],q.opt_len+=Pe*(te+ve),Ue&&(q.static_len+=Pe*(be[Te*2+1]+ve)));if(ft!==0){do{for(te=st-1;q.bl_count[te]===0;)te--;q.bl_count[te]--,q.bl_count[te+1]+=2,q.bl_count[st]--,ft-=2}while(ft>0);for(te=st;te!==0;te--)for(Te=q.bl_count[te];Te!==0;)Se=q.heap[--V],!(Se>Ke)&&(Oe[Se*2+1]!==te&&(q.opt_len+=(te-Oe[Se*2+1])*Oe[Se*2],Oe[Se*2+1]=te),Te--)}}function he(q,_e,Oe){var Ke=new Array(b+1),be=0,Ue,ee;for(Ue=1;Ue<=b;Ue++)Ke[Ue]=be=be+Oe[Ue-1]<<1;for(ee=0;ee<=_e;ee++){var He=q[ee*2+1];He!==0&&(q[ee*2]=we(Ke[He]++,He))}}function Ce(){var q,_e,Oe,Ke,be,Ue=new Array(b+1);for(Oe=0,Ke=0;Ke<M-1;Ke++)for(j[Ke]=Oe,q=0;q<1<<P[Ke];q++)Y[Oe++]=Ke;for(Y[Oe-1]=Ke,be=0,Ke=0;Ke<16;Ke++)for(H[Ke]=be,q=0;q<1<<G[Ke];q++)F[be++]=Ke;for(be>>=7;Ke<l;Ke++)for(H[Ke]=be<<7,q=0;q<1<<G[Ke]-7;q++)F[256+be++]=Ke;for(_e=0;_e<=b;_e++)Ue[_e]=0;for(q=0;q<=143;)U[q*2+1]=8,q++,Ue[8]++;for(;q<=255;)U[q*2+1]=9,q++,Ue[9]++;for(;q<=279;)U[q*2+1]=7,q++,Ue[7]++;for(;q<=287;)U[q*2+1]=8,q++,Ue[8]++;for(he(U,i+1,Ue),q=0;q<l;q++)W[q*2+1]=5,W[q*2]=we(q,5);ne=new Z(U,P,f+1,i,b),se=new Z(W,G,0,l,b),me=new Z(new Array(0),B,0,p,h)}function ke(q){var _e;for(_e=0;_e<i;_e++)q.dyn_ltree[_e*2]=0;for(_e=0;_e<l;_e++)q.dyn_dtree[_e*2]=0;for(_e=0;_e<p;_e++)q.bl_tree[_e*2]=0;q.dyn_ltree[E*2]=1,q.opt_len=q.static_len=0,q.last_lit=q.matches=0}function Xe(q){q.bi_valid>8?ce(q,q.bi_buf):q.bi_valid>0&&(q.pending_buf[q.pending++]=q.bi_buf),q.bi_buf=0,q.bi_valid=0}function nt(q,_e,Oe,Ke){Xe(q),ce(q,Oe),ce(q,~Oe),c.arraySet(q.pending_buf,q.window,_e,Oe,q.pending),q.pending+=Oe}function at(q,_e,Oe,Ke){var be=_e*2,Ue=Oe*2;return q[be]<q[Ue]||q[be]===q[Ue]&&Ke[_e]<=Ke[Oe]}function rt(q,_e,Oe){for(var Ke=q.heap[Oe],be=Oe<<1;be<=q.heap_len&&(be<q.heap_len&&at(_e,q.heap[be+1],q.heap[be],q.depth)&&be++,!at(_e,Ke,q.heap[be],q.depth));)q.heap[Oe]=q.heap[be],Oe=be,be<<=1;q.heap[Oe]=Ke}function et(q,_e,Oe){var Ke,be,Ue=0,ee,He;if(q.last_lit!==0)do Ke=q.pending_buf[q.d_buf+Ue*2]<<8|q.pending_buf[q.d_buf+Ue*2+1],be=q.pending_buf[q.l_buf+Ue],Ue++,Ke===0?De(q,be,_e):(ee=Y[be],De(q,ee+f+1,_e),He=P[ee],He!==0&&(be-=j[ee],pe(q,be,He)),Ke--,ee=ue(Ke),De(q,ee,Oe),He=G[ee],He!==0&&(Ke-=H[ee],pe(q,Ke,He)));while(Ue<q.last_lit);De(q,E,_e)}function Je(q,_e){var Oe=_e.dyn_tree,Ke=_e.stat_desc.static_tree,be=_e.stat_desc.has_stree,Ue=_e.stat_desc.elems,ee,He,st=-1,V;for(q.heap_len=0,q.heap_max=v,ee=0;ee<Ue;ee++)Oe[ee*2]!==0?(q.heap[++q.heap_len]=st=ee,q.depth[ee]=0):Oe[ee*2+1]=0;for(;q.heap_len<2;)V=q.heap[++q.heap_len]=st<2?++st:0,Oe[V*2]=1,q.depth[V]=0,q.opt_len--,be&&(q.static_len-=Ke[V*2+1]);for(_e.max_code=st,ee=q.heap_len>>1;ee>=1;ee--)rt(q,Oe,ee);V=Ue;do ee=q.heap[1],q.heap[1]=q.heap[q.heap_len--],rt(q,Oe,1),He=q.heap[1],q.heap[--q.heap_max]=ee,q.heap[--q.heap_max]=He,Oe[V*2]=Oe[ee*2]+Oe[He*2],q.depth[V]=(q.depth[ee]>=q.depth[He]?q.depth[ee]:q.depth[He])+1,Oe[ee*2+1]=Oe[He*2+1]=V,q.heap[1]=V++,rt(q,Oe,1);while(q.heap_len>=2);q.heap[--q.heap_max]=q.heap[1],ye(q,_e),he(Oe,st,q.bl_count)}function $e(q,_e,Oe){var Ke,be=-1,Ue,ee=_e[0*2+1],He=0,st=7,V=4;for(ee===0&&(st=138,V=3),_e[(Oe+1)*2+1]=65535,Ke=0;Ke<=Oe;Ke++)Ue=ee,ee=_e[(Ke+1)*2+1],!(++He<st&&Ue===ee)&&(He<V?q.bl_tree[Ue*2]+=He:Ue!==0?(Ue!==be&&q.bl_tree[Ue*2]++,q.bl_tree[x*2]++):He<=10?q.bl_tree[D*2]++:q.bl_tree[z*2]++,He=0,be=Ue,ee===0?(st=138,V=3):Ue===ee?(st=6,V=3):(st=7,V=4))}function We(q,_e,Oe){var Ke,be=-1,Ue,ee=_e[0*2+1],He=0,st=7,V=4;for(ee===0&&(st=138,V=3),Ke=0;Ke<=Oe;Ke++)if(Ue=ee,ee=_e[(Ke+1)*2+1],!(++He<st&&Ue===ee)){if(He<V)do De(q,Ue,q.bl_tree);while(--He!==0);else Ue!==0?(Ue!==be&&(De(q,Ue,q.bl_tree),He--),De(q,x,q.bl_tree),pe(q,He-3,2)):He<=10?(De(q,D,q.bl_tree),pe(q,He-3,3)):(De(q,z,q.bl_tree),pe(q,He-11,7));He=0,be=Ue,ee===0?(st=138,V=3):Ue===ee?(st=6,V=3):(st=7,V=4)}}function ut(q){var _e;for($e(q,q.dyn_ltree,q.l_desc.max_code),$e(q,q.dyn_dtree,q.d_desc.max_code),Je(q,q.bl_desc),_e=p-1;_e>=3&&q.bl_tree[K[_e]*2+1]===0;_e--);return q.opt_len+=3*(_e+1)+5+5+4,_e}function ot(q,_e,Oe,Ke){var be;for(pe(q,_e-257,5),pe(q,Oe-1,5),pe(q,Ke-4,4),be=0;be<Ke;be++)pe(q,q.bl_tree[K[be]*2+1],3);We(q,q.dyn_ltree,_e-1),We(q,q.dyn_dtree,Oe-1)}function J(q){var _e=4093624447,Oe;for(Oe=0;Oe<=31;Oe++,_e>>>=1)if(_e&1&&q.dyn_ltree[Oe*2]!==0)return S;if(q.dyn_ltree[18]!==0||q.dyn_ltree[20]!==0||q.dyn_ltree[26]!==0)return R;for(Oe=32;Oe<f;Oe++)if(q.dyn_ltree[Oe*2]!==0)return R;return S}var re=!1;function le(q){re||(Ce(),re=!0),q.l_desc=new de(q.dyn_ltree,ne),q.d_desc=new de(q.dyn_dtree,se),q.bl_desc=new de(q.bl_tree,me),q.bi_buf=0,q.bi_valid=0,ke(q)}function Re(q,_e,Oe,Ke){pe(q,(A<<1)+(Ke?1:0),3),nt(q,_e,Oe)}function xe(q){pe(q,g<<1,3),De(q,E,U),je(q)}function Ye(q,_e,Oe,Ke){var be,Ue,ee=0;q.level>0?(q.strm.data_type===m&&(q.strm.data_type=J(q)),Je(q,q.l_desc),Je(q,q.d_desc),ee=ut(q),be=q.opt_len+3+7>>>3,Ue=q.static_len+3+7>>>3,Ue<=be&&(be=Ue)):be=Ue=Oe+5,Oe+4<=be&&_e!==-1?Re(q,_e,Oe,Ke):q.strategy===y||Ue===be?(pe(q,(g<<1)+(Ke?1:0),3),et(q,U,W)):(pe(q,(T<<1)+(Ke?1:0),3),ot(q,q.l_desc.max_code+1,q.d_desc.max_code+1,ee+1),et(q,q.dyn_ltree,q.dyn_dtree)),ke(q),Ke&&Xe(q)}function Ge(q,_e,Oe){return q.pending_buf[q.d_buf+q.last_lit*2]=_e>>>8&255,q.pending_buf[q.d_buf+q.last_lit*2+1]=_e&255,q.pending_buf[q.l_buf+q.last_lit]=Oe&255,q.last_lit++,_e===0?q.dyn_ltree[Oe*2]++:(q.matches++,_e--,q.dyn_ltree[(Y[Oe]+f+1)*2]++,q.dyn_dtree[ue(_e)*2]++),q.last_lit===q.lit_bufsize-1}u._tr_init=le,u._tr_stored_block=Re,u._tr_flush_block=Ye,u._tr_tally=Ge,u._tr_align=xe},"./node_modules/upng-js/node_modules/pako/lib/zlib/zstream.js":o=>{function u(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}o.exports=u},"./src/SurfaceWorker.js":()=>{$3Dmol.workerString=(function(){self.onmessage=function(o){var u=o.data,a=u.type;if(a<0)self.atomData=u.atoms,self.volume=u.volume,self.ps=new ProteinSurface;else{var c=self.ps;c.initparm(u.expandedExtent,a!=1,self.volume),c.fillvoxels(self.atomData,u.extendedAtoms),c.buildboundary(),(a===4||a===2)&&(c.fastdistancemap(),c.boundingatom(!1),c.fillvoxelswaals(self.atomData,u.extendedAtoms)),c.marchingcube(a);var y=c.getFacesAndVertices(u.atomsToShow);self.postMessage(y)}}}).toString().replace(/(^.*?\{|\}$)/g,""),$3Dmol.workerString+=`;
function _classCallCheck() {};`,$3Dmol.workerString+=`;
`+$3Dmol.Vector3.toString(),$3Dmol.workerString+=`;
`+$3Dmol.MarchingCubeInitializer.toString()+`;

`,$3Dmol.workerString+=`;
`+$3Dmol.PointGrid.toString()+`;
`,$3Dmol.workerString+=`;
var ProteinSurface = `+$3Dmol.ProteinSurface.toString()+`;
`,$3Dmol.SurfaceWorker=window.URL?window.URL.createObjectURL(new Blob([$3Dmol.workerString],{type:"text/javascript"})):void 0},"./src/exporter.js":o=>{typeof o.exports=="object"&&(o.exports=window.$3Dmol)},"./src/vendor/mmtf.js":function(o,u){(function(a,c){c(u)})(this,function(a){function c(J,re,le){for(var Re=(J.byteLength,0),xe=le.length;xe>Re;Re++){var Ye=le.charCodeAt(Re);if(128>Ye)J.setUint8(re++,Ye>>>0&127|0);else if(2048>Ye)J.setUint8(re++,Ye>>>6&31|192),J.setUint8(re++,Ye>>>0&63|128);else if(65536>Ye)J.setUint8(re++,Ye>>>12&15|224),J.setUint8(re++,Ye>>>6&63|128),J.setUint8(re++,Ye>>>0&63|128);else{if(!(1114112>Ye))throw new Error("bad codepoint "+Ye);J.setUint8(re++,Ye>>>18&7|240),J.setUint8(re++,Ye>>>12&63|128),J.setUint8(re++,Ye>>>6&63|128),J.setUint8(re++,Ye>>>0&63|128)}}}function y(J){for(var re=0,le=0,Re=J.length;Re>le;le++){var xe=J.charCodeAt(le);if(128>xe)re+=1;else if(2048>xe)re+=2;else if(65536>xe)re+=3;else{if(!(1114112>xe))throw new Error("bad codepoint "+xe);re+=4}}return re}function S(J,re,le){var Re=typeof J;if(Re==="string"){var xe=y(J);if(32>xe)return re.setUint8(le,160|xe),c(re,le+1,J),1+xe;if(256>xe)return re.setUint8(le,217),re.setUint8(le+1,xe),c(re,le+2,J),2+xe;if(65536>xe)return re.setUint8(le,218),re.setUint16(le+1,xe),c(re,le+3,J),3+xe;if(4294967296>xe)return re.setUint8(le,219),re.setUint32(le+1,xe),c(re,le+5,J),5+xe}if(J instanceof Uint8Array){var xe=J.byteLength,Ye=new Uint8Array(re.buffer);if(256>xe)return re.setUint8(le,196),re.setUint8(le+1,xe),Ye.set(J,le+2),2+xe;if(65536>xe)return re.setUint8(le,197),re.setUint16(le+1,xe),Ye.set(J,le+3),3+xe;if(4294967296>xe)return re.setUint8(le,198),re.setUint32(le+1,xe),Ye.set(J,le+5),5+xe}if(Re==="number"){if(!isFinite(J))throw new Error("Number not finite: "+J);if(Math.floor(J)!==J)return re.setUint8(le,203),re.setFloat64(le+1,J),9;if(J>=0){if(128>J)return re.setUint8(le,J),1;if(256>J)return re.setUint8(le,204),re.setUint8(le+1,J),2;if(65536>J)return re.setUint8(le,205),re.setUint16(le+1,J),3;if(4294967296>J)return re.setUint8(le,206),re.setUint32(le+1,J),5;throw new Error("Number too big 0x"+J.toString(16))}if(J>=-32)return re.setInt8(le,J),1;if(J>=-128)return re.setUint8(le,208),re.setInt8(le+1,J),2;if(J>=-32768)return re.setUint8(le,209),re.setInt16(le+1,J),3;if(J>=-2147483648)return re.setUint8(le,210),re.setInt32(le+1,J),5;throw new Error("Number too small -0x"+(-J).toString(16).substr(1))}if(J===null)return re.setUint8(le,192),1;if(Re==="boolean")return re.setUint8(le,J?195:194),1;if(Re==="object"){var xe,_e=0,Ge=Array.isArray(J);if(Ge)xe=J.length;else{var q=Object.keys(J);xe=q.length}var _e;if(16>xe?(re.setUint8(le,xe|(Ge?144:128)),_e=1):65536>xe?(re.setUint8(le,Ge?220:222),re.setUint16(le+1,xe),_e=3):4294967296>xe&&(re.setUint8(le,Ge?221:223),re.setUint32(le+1,xe),_e=5),Ge)for(var Oe=0;xe>Oe;Oe++)_e+=S(J[Oe],re,le+_e);else for(var Oe=0;xe>Oe;Oe++){var Ke=q[Oe];_e+=S(Ke,re,le+_e),_e+=S(J[Ke],re,le+_e)}return _e}throw new Error("Unknown type "+Re)}function R(J){var re=typeof J;if(re==="string"){var le=y(J);if(32>le)return 1+le;if(256>le)return 2+le;if(65536>le)return 3+le;if(4294967296>le)return 5+le}if(J instanceof Uint8Array){var le=J.byteLength;if(256>le)return 2+le;if(65536>le)return 3+le;if(4294967296>le)return 5+le}if(re==="number"){if(Math.floor(J)!==J)return 9;if(J>=0){if(128>J)return 1;if(256>J)return 2;if(65536>J)return 3;if(4294967296>J)return 5;throw new Error("Number too big 0x"+J.toString(16))}if(J>=-32)return 1;if(J>=-128)return 2;if(J>=-32768)return 3;if(J>=-2147483648)return 5;throw new Error("Number too small -0x"+J.toString(16).substr(1))}if(re==="boolean"||J===null)return 1;if(re==="object"){var le,Re=0;if(Array.isArray(J)){le=J.length;for(var xe=0;le>xe;xe++)Re+=R(J[xe])}else{var Ye=Object.keys(J);le=Ye.length;for(var xe=0;le>xe;xe++){var Ge=Ye[xe];Re+=R(Ge)+R(J[Ge])}}if(16>le)return 1+Re;if(65536>le)return 3+Re;if(4294967296>le)return 5+Re;throw new Error("Array or object too long 0x"+le.toString(16))}throw new Error("Unknown type "+re)}function m(J){var re=new ArrayBuffer(R(J)),le=new DataView(re);return S(J,le,0),new Uint8Array(re)}function _(J,re,le){return re?new J(re.buffer,re.byteOffset,re.byteLength/(le||1)):void 0}function A(J){return _(DataView,J)}function g(J){return _(Uint8Array,J)}function T(J){return _(Int8Array,J)}function O(J){return _(Int32Array,J,4)}function w(J){return _(Float32Array,J,4)}function M(J,re){var le=J.length/2;re||(re=new Int16Array(le));for(var Re=0,xe=0;le>Re;++Re,xe+=2)re[Re]=J[xe]<<8^J[xe+1]<<0;return re}function f(J,re){var le=J.length;re||(re=new Uint8Array(2*le));for(var Re=A(re),xe=0;le>xe;++xe)Re.setInt16(2*xe,J[xe]);return g(re)}function i(J,re){var le=J.length/4;re||(re=new Int32Array(le));for(var Re=0,xe=0;le>Re;++Re,xe+=4)re[Re]=J[xe]<<24^J[xe+1]<<16^J[xe+2]<<8^J[xe+3]<<0;return re}function l(J,re){var le=J.length;re||(re=new Uint8Array(4*le));for(var Re=A(re),xe=0;le>xe;++xe)Re.setInt32(4*xe,J[xe]);return g(re)}function p(J,re){var le=J.length;re||(re=new Float32Array(le/4));for(var Re=A(re),xe=A(J),Ye=0,Ge=0,q=le/4;q>Ye;++Ye,Ge+=4)Re.setFloat32(Ge,xe.getFloat32(Ge),!0);return re}function v(J,re,le){var Re=J.length,xe=1/re;le||(le=new Float32Array(Re));for(var Ye=0;Re>Ye;++Ye)le[Ye]=J[Ye]*xe;return le}function b(J,re,le){var Re=J.length;le||(le=new Int32Array(Re));for(var xe=0;Re>xe;++xe)le[xe]=Math.round(J[xe]*re);return le}function s(J,re){var le,Re;if(!re){var xe=0;for(le=0,Re=J.length;Re>le;le+=2)xe+=J[le+1];re=new J.constructor(xe)}var Ye=0;for(le=0,Re=J.length;Re>le;le+=2)for(var Ge=J[le],q=J[le+1],_e=0;q>_e;++_e)re[Ye]=Ge,++Ye;return re}function h(J){if(J.length===0)return new Int32Array;var re,le,Re=2;for(re=1,le=J.length;le>re;++re)J[re-1]!==J[re]&&(Re+=2);var xe=new Int32Array(Re),Ye=0,Ge=1;for(re=1,le=J.length;le>re;++re)J[re-1]!==J[re]?(xe[Ye]=J[re-1],xe[Ye+1]=Ge,Ge=1,Ye+=2):++Ge;return xe[Ye]=J[J.length-1],xe[Ye+1]=Ge,xe}function E(J,re){var le=J.length;re||(re=new J.constructor(le)),le&&(re[0]=J[0]);for(var Re=1;le>Re;++Re)re[Re]=J[Re]+re[Re-1];return re}function x(J,re){var le=J.length;re||(re=new J.constructor(le)),re[0]=J[0];for(var Re=1;le>Re;++Re)re[Re]=J[Re]-J[Re-1];return re}function D(J,re){var le,Re,xe=J instanceof Int8Array?127:32767,Ye=-xe-1,Ge=J.length;if(!re){var q=0;for(le=0;Ge>le;++le)J[le]<xe&&J[le]>Ye&&++q;re=new Int32Array(q)}for(le=0,Re=0;Ge>le;){for(var _e=0;J[le]===xe||J[le]===Ye;)_e+=J[le],++le;_e+=J[le],++le,re[Re]=_e,++Re}return re}function z(J,re){var le,Re=32767,xe=-32768,Ye=J.length,Ge=0;for(le=0;Ye>le;++le){var q=J[le];q===0?++Ge:q>0?(Ge+=Math.ceil(q/Re),q%Re===0&&(Ge+=1)):(Ge+=Math.ceil(q/xe),q%xe===0&&(Ge+=1))}var _e=new Int16Array(Ge),Oe=0;for(le=0;Ye>le;++le){var q=J[le];if(q>=0)for(;q>=Re;)_e[Oe]=Re,++Oe,q-=Re;else for(;xe>=q;)_e[Oe]=xe,++Oe,q-=xe;_e[Oe]=q,++Oe}return _e}function P(J,re){return E(s(J),re)}function G(J){return h(x(J))}function B(J,re,le){return v(s(J,O(le)),re,le)}function K(J,re){return h(b(J,re))}function k(J,re,le){return v(E(J,O(le)),re,le)}function U(J,re,le){return x(b(J,re),le)}function W(J,re,le){return v(D(J,O(le)),re,le)}function F(J,re,le){var Re=D(J,O(le));return k(Re,re,w(Re))}function Y(J,re,le){return z(U(J,re))}function j(Ye){var re=A(Ye),le=re.getInt32(0),Re=re.getInt32(4),xe=Ye.subarray(8,12),Ye=Ye.subarray(12);return[le,Ye,Re,xe]}function H(J,re,le,Re){var xe=new ArrayBuffer(12+Re.byteLength),Ye=new Uint8Array(xe),Ge=new DataView(xe);return Ge.setInt32(0,J),Ge.setInt32(4,re),le&&Ye.set(le,8),Ye.set(Re,12),Ye}function Z(J){var re=J.length,le=g(J);return H(2,re,void 0,le)}function ne(J){var re=J.length,le=l(J);return H(4,re,void 0,le)}function se(J,re){var le=J.length/re,Re=l([re]),xe=g(J);return H(5,le,Re,xe)}function me(J){var re=J.length,le=l(h(J));return H(6,re,void 0,le)}function de(J){var re=J.length,le=l(G(J));return H(8,re,void 0,le)}function ue(J,re){var le=J.length,Re=l([re]),xe=l(K(J,re));return H(9,le,Re,xe)}function ce(J,re){var le=J.length,Re=l([re]),xe=f(Y(J,re));return H(10,le,Re,xe)}function pe(J){var re={};return rt.forEach(function(le){J[le]!==void 0&&(re[le]=J[le])}),J.bondAtomList&&(re.bondAtomList=ne(J.bondAtomList)),J.bondOrderList&&(re.bondOrderList=Z(J.bondOrderList)),re.xCoordList=ce(J.xCoordList,1e3),re.yCoordList=ce(J.yCoordList,1e3),re.zCoordList=ce(J.zCoordList,1e3),J.bFactorList&&(re.bFactorList=ce(J.bFactorList,100)),J.atomIdList&&(re.atomIdList=de(J.atomIdList)),J.altLocList&&(re.altLocList=me(J.altLocList)),J.occupancyList&&(re.occupancyList=ue(J.occupancyList,100)),re.groupIdList=de(J.groupIdList),re.groupTypeList=ne(J.groupTypeList),J.secStructList&&(re.secStructList=Z(J.secStructList)),J.insCodeList&&(re.insCodeList=me(J.insCodeList)),J.sequenceIndexList&&(re.sequenceIndexList=de(J.sequenceIndexList)),re.chainIdList=se(J.chainIdList,4),J.chainNameList&&(re.chainNameList=se(J.chainNameList,4)),re}function De(J){function re(_e){for(var Oe={},Ke=0;_e>Ke;Ke++){var be=Ye();Oe[be]=Ye()}return Oe}function le(_e){var Oe=J.subarray(Ge,Ge+_e);return Ge+=_e,Oe}function Re(_e){var Oe=J.subarray(Ge,Ge+_e);Ge+=_e;var Ke=65535;if(_e>Ke){for(var be=[],Ue=0;Ue<Oe.length;Ue+=Ke)be.push(String.fromCharCode.apply(null,Oe.subarray(Ue,Ue+Ke)));return be.join("")}return String.fromCharCode.apply(null,Oe)}function xe(_e){for(var Oe=new Array(_e),Ke=0;_e>Ke;Ke++)Oe[Ke]=Ye();return Oe}function Ye(){var _e,Oe,Ke=J[Ge];if((128&Ke)===0)return Ge++,Ke;if((240&Ke)===128)return Oe=15&Ke,Ge++,re(Oe);if((240&Ke)===144)return Oe=15&Ke,Ge++,xe(Oe);if((224&Ke)===160)return Oe=31&Ke,Ge++,Re(Oe);if((224&Ke)===224)return _e=q.getInt8(Ge),Ge++,_e;switch(Ke){case 192:return Ge++,null;case 194:return Ge++,!1;case 195:return Ge++,!0;case 196:return Oe=q.getUint8(Ge+1),Ge+=2,le(Oe);case 197:return Oe=q.getUint16(Ge+1),Ge+=3,le(Oe);case 198:return Oe=q.getUint32(Ge+1),Ge+=5,le(Oe);case 202:return _e=q.getFloat32(Ge+1),Ge+=5,_e;case 203:return _e=q.getFloat64(Ge+1),Ge+=9,_e;case 204:return _e=J[Ge+1],Ge+=2,_e;case 205:return _e=q.getUint16(Ge+1),Ge+=3,_e;case 206:return _e=q.getUint32(Ge+1),Ge+=5,_e;case 208:return _e=q.getInt8(Ge+1),Ge+=2,_e;case 209:return _e=q.getInt16(Ge+1),Ge+=3,_e;case 210:return _e=q.getInt32(Ge+1),Ge+=5,_e;case 217:return Oe=q.getUint8(Ge+1),Ge+=2,Re(Oe);case 218:return Oe=q.getUint16(Ge+1),Ge+=3,Re(Oe);case 219:return Oe=q.getUint32(Ge+1),Ge+=5,Re(Oe);case 220:return Oe=q.getUint16(Ge+1),Ge+=3,xe(Oe);case 221:return Oe=q.getUint32(Ge+1),Ge+=5,xe(Oe);case 222:return Oe=q.getUint16(Ge+1),Ge+=3,re(Oe);case 223:return Oe=q.getUint32(Ge+1),Ge+=5,re(Oe)}throw new Error("Unknown type 0x"+Ke.toString(16))}var Ge=0,q=new DataView(J.buffer);return Ye()}function we(J,re,le,Re){switch(J){case 1:return p(re);case 2:return T(re);case 3:return M(re);case 4:return i(re);case 5:return g(re);case 6:return s(i(re),new Uint8Array(le));case 7:return s(i(re));case 8:return P(i(re));case 9:return B(i(re),i(Re)[0]);case 10:return F(M(re),i(Re)[0]);case 11:return v(M(re),i(Re)[0]);case 12:return W(M(re),i(Re)[0]);case 13:return W(T(re),i(Re)[0]);case 14:return D(M(re));case 15:return D(T(re))}}function je(J,re){re=re||{};var le=re.ignoreFields,Re={};return Je.forEach(function(xe){var Ye=le?le.indexOf(xe)!==-1:!1,Ge=J[xe];Ye||Ge===void 0||(Ge instanceof Uint8Array?Re[xe]=we.apply(null,j(Ge)):Re[xe]=Ge)}),Re}function ye(J){return String.fromCharCode.apply(null,J).replace(/\0/g,"")}function he(J,re,le){le=le||{};var Re,xe,Ye,Ge,q,_e,Oe=le.firstModelOnly,Ke=re.onModel,be=re.onChain,Ue=re.onGroup,ee=re.onAtom,He=re.onBond,st=0,V=0,Te=0,Se=0,te=0,ve=-1,Pe=J.chainNameList,ft=J.secStructList,lt=J.insCodeList,it=J.sequenceIndexList,vt=J.atomIdList,ir=J.bFactorList,Tt=J.altLocList,Mt=J.occupancyList,wt=J.bondAtomList,nr=J.bondOrderList;for(Re=0,xe=J.chainsPerModel.length;xe>Re&&!(Oe&&st>0);++Re){var Ut=J.chainsPerModel[st];for(Ke&&Ke({chainCount:Ut,modelIndex:st}),Ye=0;Ut>Ye;++Ye){var Hr=J.groupsPerChain[V];if(be){var Ar=ye(J.chainIdList.subarray(4*V,4*V+4)),Ht=null;Pe&&(Ht=ye(Pe.subarray(4*V,4*V+4))),be({groupCount:Hr,chainIndex:V,modelIndex:st,chainId:Ar,chainName:Ht})}for(Ge=0;Hr>Ge;++Ge){var Kt=J.groupList[J.groupTypeList[Te]],Ft=Kt.atomNameList.length;if(Ue){var Gt=null;ft&&(Gt=ft[Te]);var vr=null;J.insCodeList&&(vr=String.fromCharCode(lt[Te]));var Ti=null;it&&(Ti=it[Te]),Ue({atomCount:Ft,groupIndex:Te,chainIndex:V,modelIndex:st,groupId:J.groupIdList[Te],groupType:J.groupTypeList[Te],groupName:Kt.groupName,singleLetterCode:Kt.singleLetterCode,chemCompType:Kt.chemCompType,secStruct:Gt,insCode:vr,sequenceIndex:Ti})}for(q=0;Ft>q;++q){if(ee){var ei=null;vt&&(ei=vt[Se]);var Br=null;ir&&(Br=ir[Se]);var Ea=null;Tt&&(Ea=String.fromCharCode(Tt[Se]));var $n=null;Mt&&($n=Mt[Se]),ee({atomIndex:Se,groupIndex:Te,chainIndex:V,modelIndex:st,atomId:ei,element:Kt.elementList[q],atomName:Kt.atomNameList[q],formalCharge:Kt.formalChargeList[q],xCoord:J.xCoordList[Se],yCoord:J.yCoordList[Se],zCoord:J.zCoordList[Se],bFactor:Br,altLoc:Ea,occupancy:$n})}Se+=1}if(He){var Qn=Kt.bondAtomList;for(q=0,_e=Kt.bondOrderList.length;_e>q;++q)He({atomIndex1:Se-Ft+Qn[2*q],atomIndex2:Se-Ft+Qn[2*q+1],bondOrder:Kt.bondOrderList[q]})}Te+=1}V+=1}if(te=ve+1,ve=Se-1,He&&wt)for(q=0,_e=wt.length;_e>q;q+=2){var Aa=wt[q],ji=wt[q+1];(Aa>=te&&ve>=Aa||ji>=te&&ve>=ji)&&He({atomIndex1:Aa,atomIndex2:ji,bondOrder:nr?nr[q/2]:null})}st+=1}}function Ce(J){return m(pe(J))}function ke(J,re){J instanceof ArrayBuffer&&(J=new Uint8Array(J));var le;return le=J instanceof Uint8Array?De(J):J,je(le,re)}function Xe(J,re,le,Re){function xe(){try{var Ge=ke(Ye.response);le(Ge)}catch(q){Re(q)}}var Ye=new XMLHttpRequest;Ye.addEventListener("load",xe,!0),Ye.addEventListener("error",Re,!0),Ye.responseType="arraybuffer",Ye.open("GET",re+J.toUpperCase()),Ye.send()}function nt(J,re,le){Xe(J,ut,re,le)}function at(J,re,le){Xe(J,ot,re,le)}var rt=["mmtfVersion","mmtfProducer","unitCell","spaceGroup","structureId","title","depositionDate","releaseDate","experimentalMethods","resolution","rFree","rWork","bioAssemblyList","ncsOperatorList","entityList","groupList","numBonds","numAtoms","numGroups","numChains","numModels","groupsPerChain","chainsPerModel"],et=["xCoordList","yCoordList","zCoordList","groupIdList","groupTypeList","chainIdList","bFactorList","atomIdList","altLocList","occupancyList","secStructList","insCodeList","sequenceIndexList","chainNameList","bondAtomList","bondOrderList"],Je=rt.concat(et),$e="v1.0.1",We="//mmtf.rcsb.org/v1.0/",ut=We+"full/",ot=We+"reduced/";a.encode=Ce,a.decode=ke,a.traverse=he,a.fetch=nt,a.fetchReduced=at,a.version=$e,a.fetchUrl=ut,a.fetchReducedUrl=ot,a.encodeMsgpack=m,a.encodeMmtf=pe,a.decodeMsgpack=De,a.decodeMmtf=je})},"./node_modules/pako/dist/pako.esm.mjs":(o,u,a)=>{a.r(u),a.d(u,{Deflate:()=>Vl,Inflate:()=>Ni,constants:()=>zn,default:()=>kl,deflate:()=>js,deflateRaw:()=>Hl,gzip:()=>Gs,inflate:()=>ka,inflateRaw:()=>ga,ungzip:()=>Ws});/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const c=4,y=0,S=1,R=2;function m(C){let $=C.length;for(;--$>=0;)C[$]=0}const _=0,A=1,g=2,T=3,O=258,w=29,M=256,f=M+1+w,i=30,l=19,p=2*f+1,v=15,b=16,s=7,h=256,E=16,x=17,D=18,z=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),P=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),G=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),B=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),K=512,k=new Array((f+2)*2);m(k);const U=new Array(i*2);m(U);const W=new Array(K);m(W);const F=new Array(O-T+1);m(F);const Y=new Array(w);m(Y);const j=new Array(i);m(j);function H(C,$,N,ae,fe){this.static_tree=C,this.extra_bits=$,this.extra_base=N,this.elems=ae,this.max_length=fe,this.has_stree=C&&C.length}let Z,ne,se;function me(C,$){this.dyn_tree=C,this.max_code=0,this.stat_desc=$}const de=C=>C<256?W[C]:W[256+(C>>>7)],ue=(C,$)=>{C.pending_buf[C.pending++]=$&255,C.pending_buf[C.pending++]=$>>>8&255},ce=(C,$,N)=>{C.bi_valid>b-N?(C.bi_buf|=$<<C.bi_valid&65535,ue(C,C.bi_buf),C.bi_buf=$>>b-C.bi_valid,C.bi_valid+=N-b):(C.bi_buf|=$<<C.bi_valid&65535,C.bi_valid+=N)},pe=(C,$,N)=>{ce(C,N[$*2],N[$*2+1])},De=(C,$)=>{let N=0;do N|=C&1,C>>>=1,N<<=1;while(--$>0);return N>>>1},we=C=>{C.bi_valid===16?(ue(C,C.bi_buf),C.bi_buf=0,C.bi_valid=0):C.bi_valid>=8&&(C.pending_buf[C.pending++]=C.bi_buf&255,C.bi_buf>>=8,C.bi_valid-=8)},je=(C,$)=>{const N=$.dyn_tree,ae=$.max_code,fe=$.stat_desc.static_tree,oe=$.stat_desc.has_stree,Be=$.stat_desc.extra_bits,Me=$.stat_desc.extra_base,mt=$.stat_desc.max_length;let Ee,Ie,Rt,dt,tt,_t,er=0;for(dt=0;dt<=v;dt++)C.bl_count[dt]=0;for(N[C.heap[C.heap_max]*2+1]=0,Ee=C.heap_max+1;Ee<p;Ee++)Ie=C.heap[Ee],dt=N[N[Ie*2+1]*2+1]+1,dt>mt&&(dt=mt,er++),N[Ie*2+1]=dt,!(Ie>ae)&&(C.bl_count[dt]++,tt=0,Ie>=Me&&(tt=Be[Ie-Me]),_t=N[Ie*2],C.opt_len+=_t*(dt+tt),oe&&(C.static_len+=_t*(fe[Ie*2+1]+tt)));if(er!==0){do{for(dt=mt-1;C.bl_count[dt]===0;)dt--;C.bl_count[dt]--,C.bl_count[dt+1]+=2,C.bl_count[mt]--,er-=2}while(er>0);for(dt=mt;dt!==0;dt--)for(Ie=C.bl_count[dt];Ie!==0;)Rt=C.heap[--Ee],!(Rt>ae)&&(N[Rt*2+1]!==dt&&(C.opt_len+=(dt-N[Rt*2+1])*N[Rt*2],N[Rt*2+1]=dt),Ie--)}},ye=(C,$,N)=>{const ae=new Array(v+1);let fe=0,oe,Be;for(oe=1;oe<=v;oe++)fe=fe+N[oe-1]<<1,ae[oe]=fe;for(Be=0;Be<=$;Be++){let Me=C[Be*2+1];Me!==0&&(C[Be*2]=De(ae[Me]++,Me))}},he=()=>{let C,$,N,ae,fe;const oe=new Array(v+1);for(N=0,ae=0;ae<w-1;ae++)for(Y[ae]=N,C=0;C<1<<z[ae];C++)F[N++]=ae;for(F[N-1]=ae,fe=0,ae=0;ae<16;ae++)for(j[ae]=fe,C=0;C<1<<P[ae];C++)W[fe++]=ae;for(fe>>=7;ae<i;ae++)for(j[ae]=fe<<7,C=0;C<1<<P[ae]-7;C++)W[256+fe++]=ae;for($=0;$<=v;$++)oe[$]=0;for(C=0;C<=143;)k[C*2+1]=8,C++,oe[8]++;for(;C<=255;)k[C*2+1]=9,C++,oe[9]++;for(;C<=279;)k[C*2+1]=7,C++,oe[7]++;for(;C<=287;)k[C*2+1]=8,C++,oe[8]++;for(ye(k,f+1,oe),C=0;C<i;C++)U[C*2+1]=5,U[C*2]=De(C,5);Z=new H(k,z,M+1,f,v),ne=new H(U,P,0,i,v),se=new H(new Array(0),G,0,l,s)},Ce=C=>{let $;for($=0;$<f;$++)C.dyn_ltree[$*2]=0;for($=0;$<i;$++)C.dyn_dtree[$*2]=0;for($=0;$<l;$++)C.bl_tree[$*2]=0;C.dyn_ltree[h*2]=1,C.opt_len=C.static_len=0,C.sym_next=C.matches=0},ke=C=>{C.bi_valid>8?ue(C,C.bi_buf):C.bi_valid>0&&(C.pending_buf[C.pending++]=C.bi_buf),C.bi_buf=0,C.bi_valid=0},Xe=(C,$,N,ae)=>{const fe=$*2,oe=N*2;return C[fe]<C[oe]||C[fe]===C[oe]&&ae[$]<=ae[N]},nt=(C,$,N)=>{const ae=C.heap[N];let fe=N<<1;for(;fe<=C.heap_len&&(fe<C.heap_len&&Xe($,C.heap[fe+1],C.heap[fe],C.depth)&&fe++,!Xe($,ae,C.heap[fe],C.depth));)C.heap[N]=C.heap[fe],N=fe,fe<<=1;C.heap[N]=ae},at=(C,$,N)=>{let ae,fe,oe=0,Be,Me;if(C.sym_next!==0)do ae=C.pending_buf[C.sym_buf+oe++]&255,ae+=(C.pending_buf[C.sym_buf+oe++]&255)<<8,fe=C.pending_buf[C.sym_buf+oe++],ae===0?pe(C,fe,$):(Be=F[fe],pe(C,Be+M+1,$),Me=z[Be],Me!==0&&(fe-=Y[Be],ce(C,fe,Me)),ae--,Be=de(ae),pe(C,Be,N),Me=P[Be],Me!==0&&(ae-=j[Be],ce(C,ae,Me)));while(oe<C.sym_next);pe(C,h,$)},rt=(C,$)=>{const N=$.dyn_tree,ae=$.stat_desc.static_tree,fe=$.stat_desc.has_stree,oe=$.stat_desc.elems;let Be,Me,mt=-1,Ee;for(C.heap_len=0,C.heap_max=p,Be=0;Be<oe;Be++)N[Be*2]!==0?(C.heap[++C.heap_len]=mt=Be,C.depth[Be]=0):N[Be*2+1]=0;for(;C.heap_len<2;)Ee=C.heap[++C.heap_len]=mt<2?++mt:0,N[Ee*2]=1,C.depth[Ee]=0,C.opt_len--,fe&&(C.static_len-=ae[Ee*2+1]);for($.max_code=mt,Be=C.heap_len>>1;Be>=1;Be--)nt(C,N,Be);Ee=oe;do Be=C.heap[1],C.heap[1]=C.heap[C.heap_len--],nt(C,N,1),Me=C.heap[1],C.heap[--C.heap_max]=Be,C.heap[--C.heap_max]=Me,N[Ee*2]=N[Be*2]+N[Me*2],C.depth[Ee]=(C.depth[Be]>=C.depth[Me]?C.depth[Be]:C.depth[Me])+1,N[Be*2+1]=N[Me*2+1]=Ee,C.heap[1]=Ee++,nt(C,N,1);while(C.heap_len>=2);C.heap[--C.heap_max]=C.heap[1],je(C,$),ye(N,mt,C.bl_count)},et=(C,$,N)=>{let ae,fe=-1,oe,Be=$[0*2+1],Me=0,mt=7,Ee=4;for(Be===0&&(mt=138,Ee=3),$[(N+1)*2+1]=65535,ae=0;ae<=N;ae++)oe=Be,Be=$[(ae+1)*2+1],!(++Me<mt&&oe===Be)&&(Me<Ee?C.bl_tree[oe*2]+=Me:oe!==0?(oe!==fe&&C.bl_tree[oe*2]++,C.bl_tree[E*2]++):Me<=10?C.bl_tree[x*2]++:C.bl_tree[D*2]++,Me=0,fe=oe,Be===0?(mt=138,Ee=3):oe===Be?(mt=6,Ee=3):(mt=7,Ee=4))},Je=(C,$,N)=>{let ae,fe=-1,oe,Be=$[0*2+1],Me=0,mt=7,Ee=4;for(Be===0&&(mt=138,Ee=3),ae=0;ae<=N;ae++)if(oe=Be,Be=$[(ae+1)*2+1],!(++Me<mt&&oe===Be)){if(Me<Ee)do pe(C,oe,C.bl_tree);while(--Me!==0);else oe!==0?(oe!==fe&&(pe(C,oe,C.bl_tree),Me--),pe(C,E,C.bl_tree),ce(C,Me-3,2)):Me<=10?(pe(C,x,C.bl_tree),ce(C,Me-3,3)):(pe(C,D,C.bl_tree),ce(C,Me-11,7));Me=0,fe=oe,Be===0?(mt=138,Ee=3):oe===Be?(mt=6,Ee=3):(mt=7,Ee=4)}},$e=C=>{let $;for(et(C,C.dyn_ltree,C.l_desc.max_code),et(C,C.dyn_dtree,C.d_desc.max_code),rt(C,C.bl_desc),$=l-1;$>=3&&C.bl_tree[B[$]*2+1]===0;$--);return C.opt_len+=3*($+1)+5+5+4,$},We=(C,$,N,ae)=>{let fe;for(ce(C,$-257,5),ce(C,N-1,5),ce(C,ae-4,4),fe=0;fe<ae;fe++)ce(C,C.bl_tree[B[fe]*2+1],3);Je(C,C.dyn_ltree,$-1),Je(C,C.dyn_dtree,N-1)},ut=C=>{let $=4093624447,N;for(N=0;N<=31;N++,$>>>=1)if($&1&&C.dyn_ltree[N*2]!==0)return y;if(C.dyn_ltree[9*2]!==0||C.dyn_ltree[10*2]!==0||C.dyn_ltree[13*2]!==0)return S;for(N=32;N<M;N++)if(C.dyn_ltree[N*2]!==0)return S;return y};let ot=!1;const J=C=>{ot||(he(),ot=!0),C.l_desc=new me(C.dyn_ltree,Z),C.d_desc=new me(C.dyn_dtree,ne),C.bl_desc=new me(C.bl_tree,se),C.bi_buf=0,C.bi_valid=0,Ce(C)},re=(C,$,N,ae)=>{ce(C,(_<<1)+(ae?1:0),3),ke(C),ue(C,N),ue(C,~N),N&&C.pending_buf.set(C.window.subarray($,$+N),C.pending),C.pending+=N},le=C=>{ce(C,A<<1,3),pe(C,h,k),we(C)},Re=(C,$,N,ae)=>{let fe,oe,Be=0;C.level>0?(C.strm.data_type===R&&(C.strm.data_type=ut(C)),rt(C,C.l_desc),rt(C,C.d_desc),Be=$e(C),fe=C.opt_len+3+7>>>3,oe=C.static_len+3+7>>>3,oe<=fe&&(fe=oe)):fe=oe=N+5,N+4<=fe&&$!==-1?re(C,$,N,ae):C.strategy===c||oe===fe?(ce(C,(A<<1)+(ae?1:0),3),at(C,k,U)):(ce(C,(g<<1)+(ae?1:0),3),We(C,C.l_desc.max_code+1,C.d_desc.max_code+1,Be+1),at(C,C.dyn_ltree,C.dyn_dtree)),Ce(C),ae&&ke(C)},xe=(C,$,N)=>(C.pending_buf[C.sym_buf+C.sym_next++]=$,C.pending_buf[C.sym_buf+C.sym_next++]=$>>8,C.pending_buf[C.sym_buf+C.sym_next++]=N,$===0?C.dyn_ltree[N*2]++:(C.matches++,$--,C.dyn_ltree[(F[N]+M+1)*2]++,C.dyn_dtree[de($)*2]++),C.sym_next===C.sym_end);var Ye=J,Ge=re,q=Re,_e=xe,Oe=le,Ke={_tr_init:Ye,_tr_stored_block:Ge,_tr_flush_block:q,_tr_tally:_e,_tr_align:Oe},Ue=(C,$,N,ae)=>{let fe=C&65535|0,oe=C>>>16&65535|0,Be=0;for(;N!==0;){Be=N>2e3?2e3:N,N-=Be;do fe=fe+$[ae++]|0,oe=oe+fe|0;while(--Be);fe%=65521,oe%=65521}return fe|oe<<16|0};const ee=()=>{let C,$=[];for(var N=0;N<256;N++){C=N;for(var ae=0;ae<8;ae++)C=C&1?3988292384^C>>>1:C>>>1;$[N]=C}return $},He=new Uint32Array(ee());var V=(C,$,N,ae)=>{const fe=He,oe=ae+N;C^=-1;for(let Be=ae;Be<oe;Be++)C=C>>>8^fe[(C^$[Be])&255];return C^-1},Te={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Se={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:te,_tr_stored_block:ve,_tr_flush_block:Pe,_tr_tally:ft,_tr_align:lt}=Ke,{Z_NO_FLUSH:it,Z_PARTIAL_FLUSH:vt,Z_FULL_FLUSH:ir,Z_FINISH:Tt,Z_BLOCK:Mt,Z_OK:wt,Z_STREAM_END:nr,Z_STREAM_ERROR:Ut,Z_DATA_ERROR:Hr,Z_BUF_ERROR:Ar,Z_DEFAULT_COMPRESSION:Ht,Z_FILTERED:Kt,Z_HUFFMAN_ONLY:Ft,Z_RLE:Gt,Z_FIXED:vr,Z_DEFAULT_STRATEGY:Ti,Z_UNKNOWN:ei,Z_DEFLATED:Br}=Se,Ea=9,$n=15,Qn=8,gn=256+1+29,pi=30,cs=19,pl=2*gn+1,vn=15,Dt=3,ti=258,ri=ti+Dt+1,gl=32,mr=42,Sa=57,us=69,xn=73,wa=91,_n=103,Gi=113,xr=666,pr=1,Wi=2,gi=3,kr=4,vl=3,Mi=(C,$)=>(C.msg=Te[$],$),Vi=C=>C*2-(C>4?9:0),Ri=C=>{let $=C.length;for(;--$>=0;)C[$]=0},xl=C=>{let $,N,ae,fe=C.w_size;$=C.hash_size,ae=$;do N=C.head[--ae],C.head[ae]=N>=fe?N-fe:0;while(--$);$=fe,ae=$;do N=C.prev[--ae],C.prev[ae]=N>=fe?N-fe:0;while(--$)};let ii=(C,$,N)=>($<<C.hash_shift^N)&C.hash_mask;const Dr=C=>{const $=C.state;let N=$.pending;N>C.avail_out&&(N=C.avail_out),N!==0&&(C.output.set($.pending_buf.subarray($.pending_out,$.pending_out+N),C.next_out),C.next_out+=N,$.pending_out+=N,C.total_out+=N,C.avail_out-=N,$.pending-=N,$.pending===0&&($.pending_out=0))},Lr=(C,$)=>{Pe(C,C.block_start>=0?C.block_start:-1,C.strstart-C.block_start,$),C.block_start=C.strstart,Dr(C.strm)},It=(C,$)=>{C.pending_buf[C.pending++]=$},Hi=(C,$)=>{C.pending_buf[C.pending++]=$>>>8&255,C.pending_buf[C.pending++]=$&255},Jn=(C,$,N,ae)=>{let fe=C.avail_in;return fe>ae&&(fe=ae),fe===0?0:(C.avail_in-=fe,$.set(C.input.subarray(C.next_in,C.next_in+fe),N),C.state.wrap===1?C.adler=Ue(C.adler,$,fe,N):C.state.wrap===2&&(C.adler=V(C.adler,$,fe,N)),C.next_in+=fe,C.total_in+=fe,fe)},ki=(C,$)=>{let N=C.max_chain_length,ae=C.strstart,fe,oe,Be=C.prev_length,Me=C.nice_match;const mt=C.strstart>C.w_size-ri?C.strstart-(C.w_size-ri):0,Ee=C.window,Ie=C.w_mask,Rt=C.prev,dt=C.strstart+ti;let tt=Ee[ae+Be-1],_t=Ee[ae+Be];C.prev_length>=C.good_match&&(N>>=2),Me>C.lookahead&&(Me=C.lookahead);do if(fe=$,!(Ee[fe+Be]!==_t||Ee[fe+Be-1]!==tt||Ee[fe]!==Ee[ae]||Ee[++fe]!==Ee[ae+1])){ae+=2,fe++;do;while(Ee[++ae]===Ee[++fe]&&Ee[++ae]===Ee[++fe]&&Ee[++ae]===Ee[++fe]&&Ee[++ae]===Ee[++fe]&&Ee[++ae]===Ee[++fe]&&Ee[++ae]===Ee[++fe]&&Ee[++ae]===Ee[++fe]&&Ee[++ae]===Ee[++fe]&&ae<dt);if(oe=ti-(dt-ae),ae=dt-ti,oe>Be){if(C.match_start=$,Be=oe,oe>=Me)break;tt=Ee[ae+Be-1],_t=Ee[ae+Be]}}while(($=Rt[$&Ie])>mt&&--N!==0);return Be<=C.lookahead?Be:C.lookahead},Kr=C=>{const $=C.w_size;let N,ae,fe;do{if(ae=C.window_size-C.lookahead-C.strstart,C.strstart>=$+($-ri)&&(C.window.set(C.window.subarray($,$+$-ae),0),C.match_start-=$,C.strstart-=$,C.block_start-=$,C.insert>C.strstart&&(C.insert=C.strstart),xl(C),ae+=$),C.strm.avail_in===0)break;if(N=Jn(C.strm,C.window,C.strstart+C.lookahead,ae),C.lookahead+=N,C.lookahead+C.insert>=Dt)for(fe=C.strstart-C.insert,C.ins_h=C.window[fe],C.ins_h=ii(C,C.ins_h,C.window[fe+1]);C.insert&&(C.ins_h=ii(C,C.ins_h,C.window[fe+Dt-1]),C.prev[fe&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=fe,fe++,C.insert--,!(C.lookahead+C.insert<Dt)););}while(C.lookahead<ri&&C.strm.avail_in!==0)},fs=(C,$)=>{let N=C.pending_buf_size-5>C.w_size?C.w_size:C.pending_buf_size-5,ae,fe,oe,Be=0,Me=C.strm.avail_in;do{if(ae=65535,oe=C.bi_valid+42>>3,C.strm.avail_out<oe||(oe=C.strm.avail_out-oe,fe=C.strstart-C.block_start,ae>fe+C.strm.avail_in&&(ae=fe+C.strm.avail_in),ae>oe&&(ae=oe),ae<N&&(ae===0&&$!==Tt||$===it||ae!==fe+C.strm.avail_in)))break;Be=$===Tt&&ae===fe+C.strm.avail_in?1:0,ve(C,0,0,Be),C.pending_buf[C.pending-4]=ae,C.pending_buf[C.pending-3]=ae>>8,C.pending_buf[C.pending-2]=~ae,C.pending_buf[C.pending-1]=~ae>>8,Dr(C.strm),fe&&(fe>ae&&(fe=ae),C.strm.output.set(C.window.subarray(C.block_start,C.block_start+fe),C.strm.next_out),C.strm.next_out+=fe,C.strm.avail_out-=fe,C.strm.total_out+=fe,C.block_start+=fe,ae-=fe),ae&&(Jn(C.strm,C.strm.output,C.strm.next_out,ae),C.strm.next_out+=ae,C.strm.avail_out-=ae,C.strm.total_out+=ae)}while(Be===0);return Me-=C.strm.avail_in,Me&&(Me>=C.w_size?(C.matches=2,C.window.set(C.strm.input.subarray(C.strm.next_in-C.w_size,C.strm.next_in),0),C.strstart=C.w_size,C.insert=C.strstart):(C.window_size-C.strstart<=Me&&(C.strstart-=C.w_size,C.window.set(C.window.subarray(C.w_size,C.w_size+C.strstart),0),C.matches<2&&C.matches++,C.insert>C.strstart&&(C.insert=C.strstart)),C.window.set(C.strm.input.subarray(C.strm.next_in-Me,C.strm.next_in),C.strstart),C.strstart+=Me,C.insert+=Me>C.w_size-C.insert?C.w_size-C.insert:Me),C.block_start=C.strstart),C.high_water<C.strstart&&(C.high_water=C.strstart),Be?kr:$!==it&&$!==Tt&&C.strm.avail_in===0&&C.strstart===C.block_start?Wi:(oe=C.window_size-C.strstart,C.strm.avail_in>oe&&C.block_start>=C.w_size&&(C.block_start-=C.w_size,C.strstart-=C.w_size,C.window.set(C.window.subarray(C.w_size,C.w_size+C.strstart),0),C.matches<2&&C.matches++,oe+=C.w_size,C.insert>C.strstart&&(C.insert=C.strstart)),oe>C.strm.avail_in&&(oe=C.strm.avail_in),oe&&(Jn(C.strm,C.window,C.strstart,oe),C.strstart+=oe,C.insert+=oe>C.w_size-C.insert?C.w_size-C.insert:oe),C.high_water<C.strstart&&(C.high_water=C.strstart),oe=C.bi_valid+42>>3,oe=C.pending_buf_size-oe>65535?65535:C.pending_buf_size-oe,N=oe>C.w_size?C.w_size:oe,fe=C.strstart-C.block_start,(fe>=N||(fe||$===Tt)&&$!==it&&C.strm.avail_in===0&&fe<=oe)&&(ae=fe>oe?oe:fe,Be=$===Tt&&C.strm.avail_in===0&&ae===fe?1:0,ve(C,C.block_start,ae,Be),C.block_start+=ae,Dr(C.strm)),Be?gi:pr)},qn=(C,$)=>{let N,ae;for(;;){if(C.lookahead<ri){if(Kr(C),C.lookahead<ri&&$===it)return pr;if(C.lookahead===0)break}if(N=0,C.lookahead>=Dt&&(C.ins_h=ii(C,C.ins_h,C.window[C.strstart+Dt-1]),N=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart),N!==0&&C.strstart-N<=C.w_size-ri&&(C.match_length=ki(C,N)),C.match_length>=Dt)if(ae=ft(C,C.strstart-C.match_start,C.match_length-Dt),C.lookahead-=C.match_length,C.match_length<=C.max_lazy_match&&C.lookahead>=Dt){C.match_length--;do C.strstart++,C.ins_h=ii(C,C.ins_h,C.window[C.strstart+Dt-1]),N=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart;while(--C.match_length!==0);C.strstart++}else C.strstart+=C.match_length,C.match_length=0,C.ins_h=C.window[C.strstart],C.ins_h=ii(C,C.ins_h,C.window[C.strstart+1]);else ae=ft(C,0,C.window[C.strstart]),C.lookahead--,C.strstart++;if(ae&&(Lr(C,!1),C.strm.avail_out===0))return pr}return C.insert=C.strstart<Dt-1?C.strstart:Dt-1,$===Tt?(Lr(C,!0),C.strm.avail_out===0?gi:kr):C.sym_next&&(Lr(C,!1),C.strm.avail_out===0)?pr:Wi},Ki=(C,$)=>{let N,ae,fe;for(;;){if(C.lookahead<ri){if(Kr(C),C.lookahead<ri&&$===it)return pr;if(C.lookahead===0)break}if(N=0,C.lookahead>=Dt&&(C.ins_h=ii(C,C.ins_h,C.window[C.strstart+Dt-1]),N=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart),C.prev_length=C.match_length,C.prev_match=C.match_start,C.match_length=Dt-1,N!==0&&C.prev_length<C.max_lazy_match&&C.strstart-N<=C.w_size-ri&&(C.match_length=ki(C,N),C.match_length<=5&&(C.strategy===Kt||C.match_length===Dt&&C.strstart-C.match_start>4096)&&(C.match_length=Dt-1)),C.prev_length>=Dt&&C.match_length<=C.prev_length){fe=C.strstart+C.lookahead-Dt,ae=ft(C,C.strstart-1-C.prev_match,C.prev_length-Dt),C.lookahead-=C.prev_length-1,C.prev_length-=2;do++C.strstart<=fe&&(C.ins_h=ii(C,C.ins_h,C.window[C.strstart+Dt-1]),N=C.prev[C.strstart&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=C.strstart);while(--C.prev_length!==0);if(C.match_available=0,C.match_length=Dt-1,C.strstart++,ae&&(Lr(C,!1),C.strm.avail_out===0))return pr}else if(C.match_available){if(ae=ft(C,0,C.window[C.strstart-1]),ae&&Lr(C,!1),C.strstart++,C.lookahead--,C.strm.avail_out===0)return pr}else C.match_available=1,C.strstart++,C.lookahead--}return C.match_available&&(ae=ft(C,0,C.window[C.strstart-1]),C.match_available=0),C.insert=C.strstart<Dt-1?C.strstart:Dt-1,$===Tt?(Lr(C,!0),C.strm.avail_out===0?gi:kr):C.sym_next&&(Lr(C,!1),C.strm.avail_out===0)?pr:Wi},ea=(C,$)=>{let N,ae,fe,oe;const Be=C.window;for(;;){if(C.lookahead<=ti){if(Kr(C),C.lookahead<=ti&&$===it)return pr;if(C.lookahead===0)break}if(C.match_length=0,C.lookahead>=Dt&&C.strstart>0&&(fe=C.strstart-1,ae=Be[fe],ae===Be[++fe]&&ae===Be[++fe]&&ae===Be[++fe])){oe=C.strstart+ti;do;while(ae===Be[++fe]&&ae===Be[++fe]&&ae===Be[++fe]&&ae===Be[++fe]&&ae===Be[++fe]&&ae===Be[++fe]&&ae===Be[++fe]&&ae===Be[++fe]&&fe<oe);C.match_length=ti-(oe-fe),C.match_length>C.lookahead&&(C.match_length=C.lookahead)}if(C.match_length>=Dt?(N=ft(C,1,C.match_length-Dt),C.lookahead-=C.match_length,C.strstart+=C.match_length,C.match_length=0):(N=ft(C,0,C.window[C.strstart]),C.lookahead--,C.strstart++),N&&(Lr(C,!1),C.strm.avail_out===0))return pr}return C.insert=0,$===Tt?(Lr(C,!0),C.strm.avail_out===0?gi:kr):C.sym_next&&(Lr(C,!1),C.strm.avail_out===0)?pr:Wi},vi=(C,$)=>{let N;for(;;){if(C.lookahead===0&&(Kr(C),C.lookahead===0)){if($===it)return pr;break}if(C.match_length=0,N=ft(C,0,C.window[C.strstart]),C.lookahead--,C.strstart++,N&&(Lr(C,!1),C.strm.avail_out===0))return pr}return C.insert=0,$===Tt?(Lr(C,!0),C.strm.avail_out===0?gi:kr):C.sym_next&&(Lr(C,!1),C.strm.avail_out===0)?pr:Wi};function Ur(C,$,N,ae,fe){this.good_length=C,this.max_lazy=$,this.nice_length=N,this.max_chain=ae,this.func=fe}const xi=[new Ur(0,0,0,0,fs),new Ur(4,4,8,4,qn),new Ur(4,5,16,8,qn),new Ur(4,6,32,32,qn),new Ur(4,4,16,16,Ki),new Ur(8,16,32,32,Ki),new Ur(8,16,128,128,Ki),new Ur(8,32,128,256,Ki),new Ur(32,128,258,1024,Ki),new Ur(32,258,258,4096,Ki)],Oi=C=>{C.window_size=2*C.w_size,Ri(C.head),C.max_lazy_match=xi[C.level].max_lazy,C.good_match=xi[C.level].good_length,C.nice_match=xi[C.level].nice_length,C.max_chain_length=xi[C.level].max_chain,C.strstart=0,C.block_start=0,C.lookahead=0,C.insert=0,C.match_length=C.prev_length=Dt-1,C.match_available=0,C.ins_h=0};function ds(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Br,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(pl*2),this.dyn_dtree=new Uint16Array((2*pi+1)*2),this.bl_tree=new Uint16Array((2*cs+1)*2),Ri(this.dyn_ltree),Ri(this.dyn_dtree),Ri(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(vn+1),this.heap=new Uint16Array(2*gn+1),Ri(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*gn+1),Ri(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Di=C=>{if(!C)return 1;const $=C.state;return!$||$.strm!==C||$.status!==mr&&$.status!==Sa&&$.status!==us&&$.status!==xn&&$.status!==wa&&$.status!==_n&&$.status!==Gi&&$.status!==xr?1:0},hs=C=>{if(Di(C))return Mi(C,Ut);C.total_in=C.total_out=0,C.data_type=ei;const $=C.state;return $.pending=0,$.pending_out=0,$.wrap<0&&($.wrap=-$.wrap),$.status=$.wrap===2?Sa:$.wrap?mr:Gi,C.adler=$.wrap===2?0:1,$.last_flush=-2,te($),wt},ta=C=>{const $=hs(C);return $===wt&&Oi(C.state),$},Ca=(C,$)=>Di(C)||C.state.wrap!==2?Ut:(C.state.gzhead=$,wt),ms=(C,$,N,ae,fe,oe)=>{if(!C)return Ut;let Be=1;if($===Ht&&($=6),ae<0?(Be=0,ae=-ae):ae>15&&(Be=2,ae-=16),fe<1||fe>Ea||N!==Br||ae<8||ae>15||$<0||$>9||oe<0||oe>vr||ae===8&&Be!==1)return Mi(C,Ut);ae===8&&(ae=9);const Me=new ds;return C.state=Me,Me.strm=C,Me.status=mr,Me.wrap=Be,Me.gzhead=null,Me.w_bits=ae,Me.w_size=1<<Me.w_bits,Me.w_mask=Me.w_size-1,Me.hash_bits=fe+7,Me.hash_size=1<<Me.hash_bits,Me.hash_mask=Me.hash_size-1,Me.hash_shift=~~((Me.hash_bits+Dt-1)/Dt),Me.window=new Uint8Array(Me.w_size*2),Me.head=new Uint16Array(Me.hash_size),Me.prev=new Uint16Array(Me.w_size),Me.lit_bufsize=1<<fe+6,Me.pending_buf_size=Me.lit_bufsize*4,Me.pending_buf=new Uint8Array(Me.pending_buf_size),Me.sym_buf=Me.lit_bufsize,Me.sym_end=(Me.lit_bufsize-1)*3,Me.level=$,Me.strategy=oe,Me.method=N,ta(C)},Mr=(C,$)=>ms(C,$,Br,$n,Qn,Ti),Yi=(C,$)=>{if(Di(C)||$>Mt||$<0)return C?Mi(C,Ut):Ut;const N=C.state;if(!C.output||C.avail_in!==0&&!C.input||N.status===xr&&$!==Tt)return Mi(C,C.avail_out===0?Ar:Ut);const ae=N.last_flush;if(N.last_flush=$,N.pending!==0){if(Dr(C),C.avail_out===0)return N.last_flush=-1,wt}else if(C.avail_in===0&&Vi($)<=Vi(ae)&&$!==Tt)return Mi(C,Ar);if(N.status===xr&&C.avail_in!==0)return Mi(C,Ar);if(N.status===mr&&N.wrap===0&&(N.status=Gi),N.status===mr){let fe=Br+(N.w_bits-8<<4)<<8,oe=-1;if(N.strategy>=Ft||N.level<2?oe=0:N.level<6?oe=1:N.level===6?oe=2:oe=3,fe|=oe<<6,N.strstart!==0&&(fe|=gl),fe+=31-fe%31,Hi(N,fe),N.strstart!==0&&(Hi(N,C.adler>>>16),Hi(N,C.adler&65535)),C.adler=1,N.status=Gi,Dr(C),N.pending!==0)return N.last_flush=-1,wt}if(N.status===Sa){if(C.adler=0,It(N,31),It(N,139),It(N,8),N.gzhead)It(N,(N.gzhead.text?1:0)+(N.gzhead.hcrc?2:0)+(N.gzhead.extra?4:0)+(N.gzhead.name?8:0)+(N.gzhead.comment?16:0)),It(N,N.gzhead.time&255),It(N,N.gzhead.time>>8&255),It(N,N.gzhead.time>>16&255),It(N,N.gzhead.time>>24&255),It(N,N.level===9?2:N.strategy>=Ft||N.level<2?4:0),It(N,N.gzhead.os&255),N.gzhead.extra&&N.gzhead.extra.length&&(It(N,N.gzhead.extra.length&255),It(N,N.gzhead.extra.length>>8&255)),N.gzhead.hcrc&&(C.adler=V(C.adler,N.pending_buf,N.pending,0)),N.gzindex=0,N.status=us;else if(It(N,0),It(N,0),It(N,0),It(N,0),It(N,0),It(N,N.level===9?2:N.strategy>=Ft||N.level<2?4:0),It(N,vl),N.status=Gi,Dr(C),N.pending!==0)return N.last_flush=-1,wt}if(N.status===us){if(N.gzhead.extra){let fe=N.pending,oe=(N.gzhead.extra.length&65535)-N.gzindex;for(;N.pending+oe>N.pending_buf_size;){let Me=N.pending_buf_size-N.pending;if(N.pending_buf.set(N.gzhead.extra.subarray(N.gzindex,N.gzindex+Me),N.pending),N.pending=N.pending_buf_size,N.gzhead.hcrc&&N.pending>fe&&(C.adler=V(C.adler,N.pending_buf,N.pending-fe,fe)),N.gzindex+=Me,Dr(C),N.pending!==0)return N.last_flush=-1,wt;fe=0,oe-=Me}let Be=new Uint8Array(N.gzhead.extra);N.pending_buf.set(Be.subarray(N.gzindex,N.gzindex+oe),N.pending),N.pending+=oe,N.gzhead.hcrc&&N.pending>fe&&(C.adler=V(C.adler,N.pending_buf,N.pending-fe,fe)),N.gzindex=0}N.status=xn}if(N.status===xn){if(N.gzhead.name){let fe=N.pending,oe;do{if(N.pending===N.pending_buf_size){if(N.gzhead.hcrc&&N.pending>fe&&(C.adler=V(C.adler,N.pending_buf,N.pending-fe,fe)),Dr(C),N.pending!==0)return N.last_flush=-1,wt;fe=0}N.gzindex<N.gzhead.name.length?oe=N.gzhead.name.charCodeAt(N.gzindex++)&255:oe=0,It(N,oe)}while(oe!==0);N.gzhead.hcrc&&N.pending>fe&&(C.adler=V(C.adler,N.pending_buf,N.pending-fe,fe)),N.gzindex=0}N.status=wa}if(N.status===wa){if(N.gzhead.comment){let fe=N.pending,oe;do{if(N.pending===N.pending_buf_size){if(N.gzhead.hcrc&&N.pending>fe&&(C.adler=V(C.adler,N.pending_buf,N.pending-fe,fe)),Dr(C),N.pending!==0)return N.last_flush=-1,wt;fe=0}N.gzindex<N.gzhead.comment.length?oe=N.gzhead.comment.charCodeAt(N.gzindex++)&255:oe=0,It(N,oe)}while(oe!==0);N.gzhead.hcrc&&N.pending>fe&&(C.adler=V(C.adler,N.pending_buf,N.pending-fe,fe))}N.status=_n}if(N.status===_n){if(N.gzhead.hcrc){if(N.pending+2>N.pending_buf_size&&(Dr(C),N.pending!==0))return N.last_flush=-1,wt;It(N,C.adler&255),It(N,C.adler>>8&255),C.adler=0}if(N.status=Gi,Dr(C),N.pending!==0)return N.last_flush=-1,wt}if(C.avail_in!==0||N.lookahead!==0||$!==it&&N.status!==xr){let fe=N.level===0?fs(N,$):N.strategy===Ft?vi(N,$):N.strategy===Gt?ea(N,$):xi[N.level].func(N,$);if((fe===gi||fe===kr)&&(N.status=xr),fe===pr||fe===gi)return C.avail_out===0&&(N.last_flush=-1),wt;if(fe===Wi&&($===vt?lt(N):$!==Mt&&(ve(N,0,0,!1),$===ir&&(Ri(N.head),N.lookahead===0&&(N.strstart=0,N.block_start=0,N.insert=0))),Dr(C),C.avail_out===0))return N.last_flush=-1,wt}return $!==Tt?wt:N.wrap<=0?nr:(N.wrap===2?(It(N,C.adler&255),It(N,C.adler>>8&255),It(N,C.adler>>16&255),It(N,C.adler>>24&255),It(N,C.total_in&255),It(N,C.total_in>>8&255),It(N,C.total_in>>16&255),It(N,C.total_in>>24&255)):(Hi(N,C.adler>>>16),Hi(N,C.adler&65535)),Dr(C),N.wrap>0&&(N.wrap=-N.wrap),N.pending!==0?wt:nr)},Ta=C=>{if(Di(C))return Ut;const $=C.state.status;return C.state=null,$===Gi?Mi(C,Hr):wt},ra=(C,$)=>{let N=$.length;if(Di(C))return Ut;const ae=C.state,fe=ae.wrap;if(fe===2||fe===1&&ae.status!==mr||ae.lookahead)return Ut;if(fe===1&&(C.adler=Ue(C.adler,$,N,0)),ae.wrap=0,N>=ae.w_size){fe===0&&(Ri(ae.head),ae.strstart=0,ae.block_start=0,ae.insert=0);let mt=new Uint8Array(ae.w_size);mt.set($.subarray(N-ae.w_size,N),0),$=mt,N=ae.w_size}const oe=C.avail_in,Be=C.next_in,Me=C.input;for(C.avail_in=N,C.next_in=0,C.input=$,Kr(ae);ae.lookahead>=Dt;){let mt=ae.strstart,Ee=ae.lookahead-(Dt-1);do ae.ins_h=ii(ae,ae.ins_h,ae.window[mt+Dt-1]),ae.prev[mt&ae.w_mask]=ae.head[ae.ins_h],ae.head[ae.ins_h]=mt,mt++;while(--Ee);ae.strstart=mt,ae.lookahead=Dt-1,Kr(ae)}return ae.strstart+=ae.lookahead,ae.block_start=ae.strstart,ae.insert=ae.lookahead,ae.lookahead=0,ae.match_length=ae.prev_length=Dt-1,ae.match_available=0,C.next_in=Be,C.input=Me,C.avail_in=oe,ae.wrap=fe,wt};var Po=Mr,ps=ms,gs=ta,ia=hs,Ma=Ca,_l=Yi,No=Ta,Io=ra,Bo="pako deflate (from Nodeca project)",Xi={deflateInit:Po,deflateInit2:ps,deflateReset:gs,deflateResetKeep:ia,deflateSetHeader:Ma,deflate:_l,deflateEnd:No,deflateSetDictionary:Io,deflateInfo:Bo};const Uo=(C,$)=>Object.prototype.hasOwnProperty.call(C,$);var Fo=function(C){const $=Array.prototype.slice.call(arguments,1);for(;$.length;){const N=$.shift();if(N){if(typeof N!="object")throw new TypeError(N+"must be non-object");for(const ae in N)Uo(N,ae)&&(C[ae]=N[ae])}}return C},jo=C=>{let $=0;for(let ae=0,fe=C.length;ae<fe;ae++)$+=C[ae].length;const N=new Uint8Array($);for(let ae=0,fe=0,oe=C.length;ae<oe;ae++){let Be=C[ae];N.set(Be,fe),fe+=Be.length}return N},Ra={assign:Fo,flattenChunks:jo};let bl=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{bl=!1}const bn=new Uint8Array(256);for(let C=0;C<256;C++)bn[C]=C>=252?6:C>=248?5:C>=240?4:C>=224?3:C>=192?2:1;bn[254]=bn[254]=1;var Go=C=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(C);let $,N,ae,fe,oe,Be=C.length,Me=0;for(fe=0;fe<Be;fe++)N=C.charCodeAt(fe),(N&64512)===55296&&fe+1<Be&&(ae=C.charCodeAt(fe+1),(ae&64512)===56320&&(N=65536+(N-55296<<10)+(ae-56320),fe++)),Me+=N<128?1:N<2048?2:N<65536?3:4;for($=new Uint8Array(Me),oe=0,fe=0;oe<Me;fe++)N=C.charCodeAt(fe),(N&64512)===55296&&fe+1<Be&&(ae=C.charCodeAt(fe+1),(ae&64512)===56320&&(N=65536+(N-55296<<10)+(ae-56320),fe++)),N<128?$[oe++]=N:N<2048?($[oe++]=192|N>>>6,$[oe++]=128|N&63):N<65536?($[oe++]=224|N>>>12,$[oe++]=128|N>>>6&63,$[oe++]=128|N&63):($[oe++]=240|N>>>18,$[oe++]=128|N>>>12&63,$[oe++]=128|N>>>6&63,$[oe++]=128|N&63);return $};const Wo=(C,$)=>{if($<65534&&C.subarray&&bl)return String.fromCharCode.apply(null,C.length===$?C:C.subarray(0,$));let N="";for(let ae=0;ae<$;ae++)N+=String.fromCharCode(C[ae]);return N};var Vo=(C,$)=>{const N=$||C.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(C.subarray(0,$));let ae,fe;const oe=new Array(N*2);for(fe=0,ae=0;ae<N;){let Be=C[ae++];if(Be<128){oe[fe++]=Be;continue}let Me=bn[Be];if(Me>4){oe[fe++]=65533,ae+=Me-1;continue}for(Be&=Me===2?31:Me===3?15:7;Me>1&&ae<N;)Be=Be<<6|C[ae++]&63,Me--;if(Me>1){oe[fe++]=65533;continue}Be<65536?oe[fe++]=Be:(Be-=65536,oe[fe++]=55296|Be>>10&1023,oe[fe++]=56320|Be&1023)}return Wo(oe,fe)},Ho=(C,$)=>{$=$||C.length,$>C.length&&($=C.length);let N=$-1;for(;N>=0&&(C[N]&192)===128;)N--;return N<0||N===0?$:N+bn[C[N]]>$?N:$},Zi={string2buf:Go,buf2string:Vo,utf8border:Ho};function ko(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var yl=ko;const El=Object.prototype.toString,{Z_NO_FLUSH:Al,Z_SYNC_FLUSH:Ko,Z_FULL_FLUSH:Yo,Z_FINISH:Xo,Z_OK:Oa,Z_STREAM_END:Zo,Z_DEFAULT_COMPRESSION:$o,Z_DEFAULT_STRATEGY:Qo,Z_DEFLATED:Jo}=Se;function na(C){this.options=Ra.assign({level:$o,method:Jo,chunkSize:16384,windowBits:15,memLevel:8,strategy:Qo},C||{});let $=this.options;$.raw&&$.windowBits>0?$.windowBits=-$.windowBits:$.gzip&&$.windowBits>0&&$.windowBits<16&&($.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new yl,this.strm.avail_out=0;let N=Xi.deflateInit2(this.strm,$.level,$.method,$.windowBits,$.memLevel,$.strategy);if(N!==Oa)throw new Error(Te[N]);if($.header&&Xi.deflateSetHeader(this.strm,$.header),$.dictionary){let ae;if(typeof $.dictionary=="string"?ae=Zi.string2buf($.dictionary):El.call($.dictionary)==="[object ArrayBuffer]"?ae=new Uint8Array($.dictionary):ae=$.dictionary,N=Xi.deflateSetDictionary(this.strm,ae),N!==Oa)throw new Error(Te[N]);this._dict_set=!0}}na.prototype.push=function(C,$){const N=this.strm,ae=this.options.chunkSize;let fe,oe;if(this.ended)return!1;for($===~~$?oe=$:oe=$===!0?Xo:Al,typeof C=="string"?N.input=Zi.string2buf(C):El.call(C)==="[object ArrayBuffer]"?N.input=new Uint8Array(C):N.input=C,N.next_in=0,N.avail_in=N.input.length;;){if(N.avail_out===0&&(N.output=new Uint8Array(ae),N.next_out=0,N.avail_out=ae),(oe===Ko||oe===Yo)&&N.avail_out<=6){this.onData(N.output.subarray(0,N.next_out)),N.avail_out=0;continue}if(fe=Xi.deflate(N,oe),fe===Zo)return N.next_out>0&&this.onData(N.output.subarray(0,N.next_out)),fe=Xi.deflateEnd(this.strm),this.onEnd(fe),this.ended=!0,fe===Oa;if(N.avail_out===0){this.onData(N.output);continue}if(oe>0&&N.next_out>0){this.onData(N.output.subarray(0,N.next_out)),N.avail_out=0;continue}if(N.avail_in===0)break}return!0},na.prototype.onData=function(C){this.chunks.push(C)},na.prototype.onEnd=function(C){C===Oa&&(this.result=Ra.flattenChunks(this.chunks)),this.chunks=[],this.err=C,this.msg=this.strm.msg};function aa(C,$){const N=new na($);if(N.push(C,!0),N.err)throw N.msg||Te[N.err];return N.result}function sa(C,$){return $=$||{},$.raw=!0,aa(C,$)}function qo(C,$){return $=$||{},$.gzip=!0,aa(C,$)}var Sl=na,wl=aa,Cl=sa,Tl=qo,Ml={Deflate:Sl,deflate:wl,deflateRaw:Cl,gzip:Tl};const _i=16209,ec=16191;var tc=function($,N){let ae,fe,oe,Be,Me,mt,Ee,Ie,Rt,dt,tt,_t,er,Ot,St,Vt,Lt,ht,Bt,ur,bt,Xt,Ct,ct;const pt=$.state;ae=$.next_in,Ct=$.input,fe=ae+($.avail_in-5),oe=$.next_out,ct=$.output,Be=oe-(N-$.avail_out),Me=oe+($.avail_out-257),mt=pt.dmax,Ee=pt.wsize,Ie=pt.whave,Rt=pt.wnext,dt=pt.window,tt=pt.hold,_t=pt.bits,er=pt.lencode,Ot=pt.distcode,St=(1<<pt.lenbits)-1,Vt=(1<<pt.distbits)-1;e:do{_t<15&&(tt+=Ct[ae++]<<_t,_t+=8,tt+=Ct[ae++]<<_t,_t+=8),Lt=er[tt&St];t:for(;;){if(ht=Lt>>>24,tt>>>=ht,_t-=ht,ht=Lt>>>16&255,ht===0)ct[oe++]=Lt&65535;else if(ht&16){Bt=Lt&65535,ht&=15,ht&&(_t<ht&&(tt+=Ct[ae++]<<_t,_t+=8),Bt+=tt&(1<<ht)-1,tt>>>=ht,_t-=ht),_t<15&&(tt+=Ct[ae++]<<_t,_t+=8,tt+=Ct[ae++]<<_t,_t+=8),Lt=Ot[tt&Vt];r:for(;;){if(ht=Lt>>>24,tt>>>=ht,_t-=ht,ht=Lt>>>16&255,ht&16){if(ur=Lt&65535,ht&=15,_t<ht&&(tt+=Ct[ae++]<<_t,_t+=8,_t<ht&&(tt+=Ct[ae++]<<_t,_t+=8)),ur+=tt&(1<<ht)-1,ur>mt){$.msg="invalid distance too far back",pt.mode=_i;break e}if(tt>>>=ht,_t-=ht,ht=oe-Be,ur>ht){if(ht=ur-ht,ht>Ie&&pt.sane){$.msg="invalid distance too far back",pt.mode=_i;break e}if(bt=0,Xt=dt,Rt===0){if(bt+=Ee-ht,ht<Bt){Bt-=ht;do ct[oe++]=dt[bt++];while(--ht);bt=oe-ur,Xt=ct}}else if(Rt<ht){if(bt+=Ee+Rt-ht,ht-=Rt,ht<Bt){Bt-=ht;do ct[oe++]=dt[bt++];while(--ht);if(bt=0,Rt<Bt){ht=Rt,Bt-=ht;do ct[oe++]=dt[bt++];while(--ht);bt=oe-ur,Xt=ct}}}else if(bt+=Rt-ht,ht<Bt){Bt-=ht;do ct[oe++]=dt[bt++];while(--ht);bt=oe-ur,Xt=ct}for(;Bt>2;)ct[oe++]=Xt[bt++],ct[oe++]=Xt[bt++],ct[oe++]=Xt[bt++],Bt-=3;Bt&&(ct[oe++]=Xt[bt++],Bt>1&&(ct[oe++]=Xt[bt++]))}else{bt=oe-ur;do ct[oe++]=ct[bt++],ct[oe++]=ct[bt++],ct[oe++]=ct[bt++],Bt-=3;while(Bt>2);Bt&&(ct[oe++]=ct[bt++],Bt>1&&(ct[oe++]=ct[bt++]))}}else if((ht&64)===0){Lt=Ot[(Lt&65535)+(tt&(1<<ht)-1)];continue r}else{$.msg="invalid distance code",pt.mode=_i;break e}break}}else if((ht&64)===0){Lt=er[(Lt&65535)+(tt&(1<<ht)-1)];continue t}else if(ht&32){pt.mode=ec;break e}else{$.msg="invalid literal/length code",pt.mode=_i;break e}break}}while(ae<fe&&oe<Me);Bt=_t>>3,ae-=Bt,_t-=Bt<<3,tt&=(1<<_t)-1,$.next_in=ae,$.next_out=oe,$.avail_in=ae<fe?5+(fe-ae):5-(ae-fe),$.avail_out=oe<Me?257+(Me-oe):257-(oe-Me),pt.hold=tt,pt.bits=_t};const yn=15,vs=852,xs=592,En=0,$i=1,Rl=2,Da=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Ol=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Dl=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),_s=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var An=(C,$,N,ae,fe,oe,Be,Me)=>{const mt=Me.bits;let Ee=0,Ie=0,Rt=0,dt=0,tt=0,_t=0,er=0,Ot=0,St=0,Vt=0,Lt,ht,Bt,ur,bt,Xt=null,Ct;const ct=new Uint16Array(yn+1),pt=new Uint16Array(yn+1);let Qt=null,va,Si,fi;for(Ee=0;Ee<=yn;Ee++)ct[Ee]=0;for(Ie=0;Ie<ae;Ie++)ct[$[N+Ie]]++;for(tt=mt,dt=yn;dt>=1&&ct[dt]===0;dt--);if(tt>dt&&(tt=dt),dt===0)return fe[oe++]=1<<24|64<<16|0,fe[oe++]=1<<24|64<<16|0,Me.bits=1,0;for(Rt=1;Rt<dt&&ct[Rt]===0;Rt++);for(tt<Rt&&(tt=Rt),Ot=1,Ee=1;Ee<=yn;Ee++)if(Ot<<=1,Ot-=ct[Ee],Ot<0)return-1;if(Ot>0&&(C===En||dt!==1))return-1;for(pt[1]=0,Ee=1;Ee<yn;Ee++)pt[Ee+1]=pt[Ee]+ct[Ee];for(Ie=0;Ie<ae;Ie++)$[N+Ie]!==0&&(Be[pt[$[N+Ie]]++]=Ie);if(C===En?(Xt=Qt=Be,Ct=20):C===$i?(Xt=Da,Qt=Ol,Ct=257):(Xt=Dl,Qt=_s,Ct=0),Vt=0,Ie=0,Ee=Rt,bt=oe,_t=tt,er=0,Bt=-1,St=1<<tt,ur=St-1,C===$i&&St>vs||C===Rl&&St>xs)return 1;for(;;){va=Ee-er,Be[Ie]+1<Ct?(Si=0,fi=Be[Ie]):Be[Ie]>=Ct?(Si=Qt[Be[Ie]-Ct],fi=Xt[Be[Ie]-Ct]):(Si=96,fi=0),Lt=1<<Ee-er,ht=1<<_t,Rt=ht;do ht-=Lt,fe[bt+(Vt>>er)+ht]=va<<24|Si<<16|fi|0;while(ht!==0);for(Lt=1<<Ee-1;Vt&Lt;)Lt>>=1;if(Lt!==0?(Vt&=Lt-1,Vt+=Lt):Vt=0,Ie++,--ct[Ee]===0){if(Ee===dt)break;Ee=$[N+Be[Ie]]}if(Ee>tt&&(Vt&ur)!==Bt){for(er===0&&(er=tt),bt+=Rt,_t=Ee-er,Ot=1<<_t;_t+er<dt&&(Ot-=ct[_t+er],!(Ot<=0));)_t++,Ot<<=1;if(St+=1<<_t,C===$i&&St>vs||C===Rl&&St>xs)return 1;Bt=Vt&ur,fe[Bt]=tt<<24|_t<<16|bt-oe|0}}return Vt!==0&&(fe[bt+Vt]=Ee-er<<24|64<<16|0),Me.bits=tt,0};const zl=0,bs=1,Pl=2,{Z_FINISH:Nl,Z_BLOCK:rc,Z_TREES:La,Z_OK:Qi,Z_STREAM_END:zr,Z_NEED_DICT:la,Z_STREAM_ERROR:Pr,Z_DATA_ERROR:ys,Z_MEM_ERROR:Es,Z_BUF_ERROR:Il,Z_DEFLATED:za}=Se,Pa=16180,Ji=16181,Na=16182,Sn=16183,Ia=16184,As=16185,Li=16186,qi=16187,Ba=16188,Ss=16189,ni=16190,ai=16191,Ua=16192,ws=16193,Cs=16194,Bl=16195,Ul=16196,Ts=16197,Ms=16198,wn=16199,Rr=16200,Rs=16201,Nr=16202,Ir=16203,en=16204,Fa=16205,Cn=16206,oa=16207,ja=16208,Yt=16209,Os=16210,ca=16211,Tn=852,ic=592,Ds=15,si=C=>(C>>>24&255)+(C>>>8&65280)+((C&65280)<<8)+((C&255)<<24);function Fl(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const li=C=>{if(!C)return 1;const $=C.state;return!$||$.strm!==C||$.mode<Pa||$.mode>ca?1:0},zi=C=>{if(li(C))return Pr;const $=C.state;return C.total_in=C.total_out=$.total=0,C.msg="",$.wrap&&(C.adler=$.wrap&1),$.mode=Pa,$.last=0,$.havedict=0,$.flags=-1,$.dmax=32768,$.head=null,$.hold=0,$.bits=0,$.lencode=$.lendyn=new Int32Array(Tn),$.distcode=$.distdyn=new Int32Array(ic),$.sane=1,$.back=-1,Qi},Ga=C=>{if(li(C))return Pr;const $=C.state;return $.wsize=0,$.whave=0,$.wnext=0,zi(C)},Wa=(C,$)=>{let N;if(li(C))return Pr;const ae=C.state;return $<0?(N=0,$=-$):(N=($>>4)+5,$<48&&($&=15)),$&&($<8||$>15)?Pr:(ae.window!==null&&ae.wbits!==$&&(ae.window=null),ae.wrap=N,ae.wbits=$,Ga(C))},tn=(C,$)=>{if(!C)return Pr;const N=new Fl;C.state=N,N.strm=C,N.window=null,N.mode=Pa;const ae=Wa(C,$);return ae!==Qi&&(C.state=null),ae},Mn=C=>tn(C,Ds);let ua=!0,Rn,Or;const jr=C=>{if(ua){Rn=new Int32Array(512),Or=new Int32Array(32);let $=0;for(;$<144;)C.lens[$++]=8;for(;$<256;)C.lens[$++]=9;for(;$<280;)C.lens[$++]=7;for(;$<288;)C.lens[$++]=8;for(An(bs,C.lens,0,288,Rn,0,C.work,{bits:9}),$=0;$<32;)C.lens[$++]=5;An(Pl,C.lens,0,32,Or,0,C.work,{bits:5}),ua=!1}C.lencode=Rn,C.lenbits=9,C.distcode=Or,C.distbits=5},Pi=(C,$,N,ae)=>{let fe;const oe=C.state;return oe.window===null&&(oe.wsize=1<<oe.wbits,oe.wnext=0,oe.whave=0,oe.window=new Uint8Array(oe.wsize)),ae>=oe.wsize?(oe.window.set($.subarray(N-oe.wsize,N),0),oe.wnext=0,oe.whave=oe.wsize):(fe=oe.wsize-oe.wnext,fe>ae&&(fe=ae),oe.window.set($.subarray(N-ae,N-ae+fe),oe.wnext),ae-=fe,ae?(oe.window.set($.subarray(N-ae,N),0),oe.wnext=ae,oe.whave=oe.wsize):(oe.wnext+=fe,oe.wnext===oe.wsize&&(oe.wnext=0),oe.whave<oe.wsize&&(oe.whave+=fe))),0},bi=(C,$)=>{let N,ae,fe,oe,Be,Me,mt,Ee,Ie,Rt,dt,tt,_t,er,Ot=0,St,Vt,Lt,ht,Bt,ur,bt,Xt;const Ct=new Uint8Array(4);let ct,pt;const Qt=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(li(C)||!C.output||!C.input&&C.avail_in!==0)return Pr;N=C.state,N.mode===ai&&(N.mode=Ua),Be=C.next_out,fe=C.output,mt=C.avail_out,oe=C.next_in,ae=C.input,Me=C.avail_in,Ee=N.hold,Ie=N.bits,Rt=Me,dt=mt,Xt=Qi;e:for(;;)switch(N.mode){case Pa:if(N.wrap===0){N.mode=Ua;break}for(;Ie<16;){if(Me===0)break e;Me--,Ee+=ae[oe++]<<Ie,Ie+=8}if(N.wrap&2&&Ee===35615){N.wbits===0&&(N.wbits=15),N.check=0,Ct[0]=Ee&255,Ct[1]=Ee>>>8&255,N.check=V(N.check,Ct,2,0),Ee=0,Ie=0,N.mode=Ji;break}if(N.head&&(N.head.done=!1),!(N.wrap&1)||(((Ee&255)<<8)+(Ee>>8))%31){C.msg="incorrect header check",N.mode=Yt;break}if((Ee&15)!==za){C.msg="unknown compression method",N.mode=Yt;break}if(Ee>>>=4,Ie-=4,bt=(Ee&15)+8,N.wbits===0&&(N.wbits=bt),bt>15||bt>N.wbits){C.msg="invalid window size",N.mode=Yt;break}N.dmax=1<<N.wbits,N.flags=0,C.adler=N.check=1,N.mode=Ee&512?Ss:ai,Ee=0,Ie=0;break;case Ji:for(;Ie<16;){if(Me===0)break e;Me--,Ee+=ae[oe++]<<Ie,Ie+=8}if(N.flags=Ee,(N.flags&255)!==za){C.msg="unknown compression method",N.mode=Yt;break}if(N.flags&57344){C.msg="unknown header flags set",N.mode=Yt;break}N.head&&(N.head.text=Ee>>8&1),N.flags&512&&N.wrap&4&&(Ct[0]=Ee&255,Ct[1]=Ee>>>8&255,N.check=V(N.check,Ct,2,0)),Ee=0,Ie=0,N.mode=Na;case Na:for(;Ie<32;){if(Me===0)break e;Me--,Ee+=ae[oe++]<<Ie,Ie+=8}N.head&&(N.head.time=Ee),N.flags&512&&N.wrap&4&&(Ct[0]=Ee&255,Ct[1]=Ee>>>8&255,Ct[2]=Ee>>>16&255,Ct[3]=Ee>>>24&255,N.check=V(N.check,Ct,4,0)),Ee=0,Ie=0,N.mode=Sn;case Sn:for(;Ie<16;){if(Me===0)break e;Me--,Ee+=ae[oe++]<<Ie,Ie+=8}N.head&&(N.head.xflags=Ee&255,N.head.os=Ee>>8),N.flags&512&&N.wrap&4&&(Ct[0]=Ee&255,Ct[1]=Ee>>>8&255,N.check=V(N.check,Ct,2,0)),Ee=0,Ie=0,N.mode=Ia;case Ia:if(N.flags&1024){for(;Ie<16;){if(Me===0)break e;Me--,Ee+=ae[oe++]<<Ie,Ie+=8}N.length=Ee,N.head&&(N.head.extra_len=Ee),N.flags&512&&N.wrap&4&&(Ct[0]=Ee&255,Ct[1]=Ee>>>8&255,N.check=V(N.check,Ct,2,0)),Ee=0,Ie=0}else N.head&&(N.head.extra=null);N.mode=As;case As:if(N.flags&1024&&(tt=N.length,tt>Me&&(tt=Me),tt&&(N.head&&(bt=N.head.extra_len-N.length,N.head.extra||(N.head.extra=new Uint8Array(N.head.extra_len)),N.head.extra.set(ae.subarray(oe,oe+tt),bt)),N.flags&512&&N.wrap&4&&(N.check=V(N.check,ae,tt,oe)),Me-=tt,oe+=tt,N.length-=tt),N.length))break e;N.length=0,N.mode=Li;case Li:if(N.flags&2048){if(Me===0)break e;tt=0;do bt=ae[oe+tt++],N.head&&bt&&N.length<65536&&(N.head.name+=String.fromCharCode(bt));while(bt&&tt<Me);if(N.flags&512&&N.wrap&4&&(N.check=V(N.check,ae,tt,oe)),Me-=tt,oe+=tt,bt)break e}else N.head&&(N.head.name=null);N.length=0,N.mode=qi;case qi:if(N.flags&4096){if(Me===0)break e;tt=0;do bt=ae[oe+tt++],N.head&&bt&&N.length<65536&&(N.head.comment+=String.fromCharCode(bt));while(bt&&tt<Me);if(N.flags&512&&N.wrap&4&&(N.check=V(N.check,ae,tt,oe)),Me-=tt,oe+=tt,bt)break e}else N.head&&(N.head.comment=null);N.mode=Ba;case Ba:if(N.flags&512){for(;Ie<16;){if(Me===0)break e;Me--,Ee+=ae[oe++]<<Ie,Ie+=8}if(N.wrap&4&&Ee!==(N.check&65535)){C.msg="header crc mismatch",N.mode=Yt;break}Ee=0,Ie=0}N.head&&(N.head.hcrc=N.flags>>9&1,N.head.done=!0),C.adler=N.check=0,N.mode=ai;break;case Ss:for(;Ie<32;){if(Me===0)break e;Me--,Ee+=ae[oe++]<<Ie,Ie+=8}C.adler=N.check=si(Ee),Ee=0,Ie=0,N.mode=ni;case ni:if(N.havedict===0)return C.next_out=Be,C.avail_out=mt,C.next_in=oe,C.avail_in=Me,N.hold=Ee,N.bits=Ie,la;C.adler=N.check=1,N.mode=ai;case ai:if($===rc||$===La)break e;case Ua:if(N.last){Ee>>>=Ie&7,Ie-=Ie&7,N.mode=Cn;break}for(;Ie<3;){if(Me===0)break e;Me--,Ee+=ae[oe++]<<Ie,Ie+=8}switch(N.last=Ee&1,Ee>>>=1,Ie-=1,Ee&3){case 0:N.mode=ws;break;case 1:if(jr(N),N.mode=wn,$===La){Ee>>>=2,Ie-=2;break e}break;case 2:N.mode=Ul;break;case 3:C.msg="invalid block type",N.mode=Yt}Ee>>>=2,Ie-=2;break;case ws:for(Ee>>>=Ie&7,Ie-=Ie&7;Ie<32;){if(Me===0)break e;Me--,Ee+=ae[oe++]<<Ie,Ie+=8}if((Ee&65535)!==(Ee>>>16^65535)){C.msg="invalid stored block lengths",N.mode=Yt;break}if(N.length=Ee&65535,Ee=0,Ie=0,N.mode=Cs,$===La)break e;case Cs:N.mode=Bl;case Bl:if(tt=N.length,tt){if(tt>Me&&(tt=Me),tt>mt&&(tt=mt),tt===0)break e;fe.set(ae.subarray(oe,oe+tt),Be),Me-=tt,oe+=tt,mt-=tt,Be+=tt,N.length-=tt;break}N.mode=ai;break;case Ul:for(;Ie<14;){if(Me===0)break e;Me--,Ee+=ae[oe++]<<Ie,Ie+=8}if(N.nlen=(Ee&31)+257,Ee>>>=5,Ie-=5,N.ndist=(Ee&31)+1,Ee>>>=5,Ie-=5,N.ncode=(Ee&15)+4,Ee>>>=4,Ie-=4,N.nlen>286||N.ndist>30){C.msg="too many length or distance symbols",N.mode=Yt;break}N.have=0,N.mode=Ts;case Ts:for(;N.have<N.ncode;){for(;Ie<3;){if(Me===0)break e;Me--,Ee+=ae[oe++]<<Ie,Ie+=8}N.lens[Qt[N.have++]]=Ee&7,Ee>>>=3,Ie-=3}for(;N.have<19;)N.lens[Qt[N.have++]]=0;if(N.lencode=N.lendyn,N.lenbits=7,ct={bits:N.lenbits},Xt=An(zl,N.lens,0,19,N.lencode,0,N.work,ct),N.lenbits=ct.bits,Xt){C.msg="invalid code lengths set",N.mode=Yt;break}N.have=0,N.mode=Ms;case Ms:for(;N.have<N.nlen+N.ndist;){for(;Ot=N.lencode[Ee&(1<<N.lenbits)-1],St=Ot>>>24,Vt=Ot>>>16&255,Lt=Ot&65535,!(St<=Ie);){if(Me===0)break e;Me--,Ee+=ae[oe++]<<Ie,Ie+=8}if(Lt<16)Ee>>>=St,Ie-=St,N.lens[N.have++]=Lt;else{if(Lt===16){for(pt=St+2;Ie<pt;){if(Me===0)break e;Me--,Ee+=ae[oe++]<<Ie,Ie+=8}if(Ee>>>=St,Ie-=St,N.have===0){C.msg="invalid bit length repeat",N.mode=Yt;break}bt=N.lens[N.have-1],tt=3+(Ee&3),Ee>>>=2,Ie-=2}else if(Lt===17){for(pt=St+3;Ie<pt;){if(Me===0)break e;Me--,Ee+=ae[oe++]<<Ie,Ie+=8}Ee>>>=St,Ie-=St,bt=0,tt=3+(Ee&7),Ee>>>=3,Ie-=3}else{for(pt=St+7;Ie<pt;){if(Me===0)break e;Me--,Ee+=ae[oe++]<<Ie,Ie+=8}Ee>>>=St,Ie-=St,bt=0,tt=11+(Ee&127),Ee>>>=7,Ie-=7}if(N.have+tt>N.nlen+N.ndist){C.msg="invalid bit length repeat",N.mode=Yt;break}for(;tt--;)N.lens[N.have++]=bt}}if(N.mode===Yt)break;if(N.lens[256]===0){C.msg="invalid code -- missing end-of-block",N.mode=Yt;break}if(N.lenbits=9,ct={bits:N.lenbits},Xt=An(bs,N.lens,0,N.nlen,N.lencode,0,N.work,ct),N.lenbits=ct.bits,Xt){C.msg="invalid literal/lengths set",N.mode=Yt;break}if(N.distbits=6,N.distcode=N.distdyn,ct={bits:N.distbits},Xt=An(Pl,N.lens,N.nlen,N.ndist,N.distcode,0,N.work,ct),N.distbits=ct.bits,Xt){C.msg="invalid distances set",N.mode=Yt;break}if(N.mode=wn,$===La)break e;case wn:N.mode=Rr;case Rr:if(Me>=6&&mt>=258){C.next_out=Be,C.avail_out=mt,C.next_in=oe,C.avail_in=Me,N.hold=Ee,N.bits=Ie,tc(C,dt),Be=C.next_out,fe=C.output,mt=C.avail_out,oe=C.next_in,ae=C.input,Me=C.avail_in,Ee=N.hold,Ie=N.bits,N.mode===ai&&(N.back=-1);break}for(N.back=0;Ot=N.lencode[Ee&(1<<N.lenbits)-1],St=Ot>>>24,Vt=Ot>>>16&255,Lt=Ot&65535,!(St<=Ie);){if(Me===0)break e;Me--,Ee+=ae[oe++]<<Ie,Ie+=8}if(Vt&&(Vt&240)===0){for(ht=St,Bt=Vt,ur=Lt;Ot=N.lencode[ur+((Ee&(1<<ht+Bt)-1)>>ht)],St=Ot>>>24,Vt=Ot>>>16&255,Lt=Ot&65535,!(ht+St<=Ie);){if(Me===0)break e;Me--,Ee+=ae[oe++]<<Ie,Ie+=8}Ee>>>=ht,Ie-=ht,N.back+=ht}if(Ee>>>=St,Ie-=St,N.back+=St,N.length=Lt,Vt===0){N.mode=Fa;break}if(Vt&32){N.back=-1,N.mode=ai;break}if(Vt&64){C.msg="invalid literal/length code",N.mode=Yt;break}N.extra=Vt&15,N.mode=Rs;case Rs:if(N.extra){for(pt=N.extra;Ie<pt;){if(Me===0)break e;Me--,Ee+=ae[oe++]<<Ie,Ie+=8}N.length+=Ee&(1<<N.extra)-1,Ee>>>=N.extra,Ie-=N.extra,N.back+=N.extra}N.was=N.length,N.mode=Nr;case Nr:for(;Ot=N.distcode[Ee&(1<<N.distbits)-1],St=Ot>>>24,Vt=Ot>>>16&255,Lt=Ot&65535,!(St<=Ie);){if(Me===0)break e;Me--,Ee+=ae[oe++]<<Ie,Ie+=8}if((Vt&240)===0){for(ht=St,Bt=Vt,ur=Lt;Ot=N.distcode[ur+((Ee&(1<<ht+Bt)-1)>>ht)],St=Ot>>>24,Vt=Ot>>>16&255,Lt=Ot&65535,!(ht+St<=Ie);){if(Me===0)break e;Me--,Ee+=ae[oe++]<<Ie,Ie+=8}Ee>>>=ht,Ie-=ht,N.back+=ht}if(Ee>>>=St,Ie-=St,N.back+=St,Vt&64){C.msg="invalid distance code",N.mode=Yt;break}N.offset=Lt,N.extra=Vt&15,N.mode=Ir;case Ir:if(N.extra){for(pt=N.extra;Ie<pt;){if(Me===0)break e;Me--,Ee+=ae[oe++]<<Ie,Ie+=8}N.offset+=Ee&(1<<N.extra)-1,Ee>>>=N.extra,Ie-=N.extra,N.back+=N.extra}if(N.offset>N.dmax){C.msg="invalid distance too far back",N.mode=Yt;break}N.mode=en;case en:if(mt===0)break e;if(tt=dt-mt,N.offset>tt){if(tt=N.offset-tt,tt>N.whave&&N.sane){C.msg="invalid distance too far back",N.mode=Yt;break}tt>N.wnext?(tt-=N.wnext,_t=N.wsize-tt):_t=N.wnext-tt,tt>N.length&&(tt=N.length),er=N.window}else er=fe,_t=Be-N.offset,tt=N.length;tt>mt&&(tt=mt),mt-=tt,N.length-=tt;do fe[Be++]=er[_t++];while(--tt);N.length===0&&(N.mode=Rr);break;case Fa:if(mt===0)break e;fe[Be++]=N.length,mt--,N.mode=Rr;break;case Cn:if(N.wrap){for(;Ie<32;){if(Me===0)break e;Me--,Ee|=ae[oe++]<<Ie,Ie+=8}if(dt-=mt,C.total_out+=dt,N.total+=dt,N.wrap&4&&dt&&(C.adler=N.check=N.flags?V(N.check,fe,dt,Be-dt):Ue(N.check,fe,dt,Be-dt)),dt=mt,N.wrap&4&&(N.flags?Ee:si(Ee))!==N.check){C.msg="incorrect data check",N.mode=Yt;break}Ee=0,Ie=0}N.mode=oa;case oa:if(N.wrap&&N.flags){for(;Ie<32;){if(Me===0)break e;Me--,Ee+=ae[oe++]<<Ie,Ie+=8}if(N.wrap&4&&Ee!==(N.total&4294967295)){C.msg="incorrect length check",N.mode=Yt;break}Ee=0,Ie=0}N.mode=ja;case ja:Xt=zr;break e;case Yt:Xt=ys;break e;case Os:return Es;case ca:default:return Pr}return C.next_out=Be,C.avail_out=mt,C.next_in=oe,C.avail_in=Me,N.hold=Ee,N.bits=Ie,(N.wsize||dt!==C.avail_out&&N.mode<Yt&&(N.mode<Cn||$!==Nl))&&Pi(C,C.output,C.next_out,dt-C.avail_out),Rt-=C.avail_in,dt-=C.avail_out,C.total_in+=Rt,C.total_out+=dt,N.total+=dt,N.wrap&4&&dt&&(C.adler=N.check=N.flags?V(N.check,fe,dt,C.next_out-dt):Ue(N.check,fe,dt,C.next_out-dt)),C.data_type=N.bits+(N.last?64:0)+(N.mode===ai?128:0)+(N.mode===wn||N.mode===Cs?256:0),(Rt===0&&dt===0||$===Nl)&&Xt===Qi&&(Xt=Il),Xt},yi=C=>{if(li(C))return Pr;let $=C.state;return $.window&&($.window=null),C.state=null,Qi},rn=(C,$)=>{if(li(C))return Pr;const N=C.state;return(N.wrap&2)===0?Pr:(N.head=$,$.done=!1,Qi)},jl=(C,$)=>{const N=$.length;let ae,fe,oe;return li(C)||(ae=C.state,ae.wrap!==0&&ae.mode!==ni)?Pr:ae.mode===ni&&(fe=1,fe=Ue(fe,$,N,0),fe!==ae.check)?ys:(oe=Pi(C,$,N,N),oe?(ae.mode=Os,Es):(ae.havedict=1,Qi))};var Ls=Ga,zs=Wa,Sr=zi,ar=Mn,Wt=tn,nn=bi,oi=yi,Ps=rn,an=jl,Gl="pako inflate (from Nodeca project)",ci={inflateReset:Ls,inflateReset2:zs,inflateResetKeep:Sr,inflateInit:ar,inflateInit2:Wt,inflate:nn,inflateEnd:oi,inflateGetHeader:Ps,inflateSetDictionary:an,inflateInfo:Gl};function fa(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var da=fa;const Ns=Object.prototype.toString,{Z_NO_FLUSH:ha,Z_FINISH:Is,Z_OK:Yr,Z_STREAM_END:Xr,Z_NEED_DICT:ui,Z_STREAM_ERROR:Ei,Z_DATA_ERROR:Va,Z_MEM_ERROR:Bs}=Se;function Ai(C){this.options=Ra.assign({chunkSize:65536,windowBits:15,to:""},C||{});const $=this.options;$.raw&&$.windowBits>=0&&$.windowBits<16&&($.windowBits=-$.windowBits,$.windowBits===0&&($.windowBits=-15)),$.windowBits>=0&&$.windowBits<16&&!(C&&C.windowBits)&&($.windowBits+=32),$.windowBits>15&&$.windowBits<48&&($.windowBits&15)===0&&($.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new yl,this.strm.avail_out=0;let N=ci.inflateInit2(this.strm,$.windowBits);if(N!==Yr)throw new Error(Te[N]);if(this.header=new da,ci.inflateGetHeader(this.strm,this.header),$.dictionary&&(typeof $.dictionary=="string"?$.dictionary=Zi.string2buf($.dictionary):Ns.call($.dictionary)==="[object ArrayBuffer]"&&($.dictionary=new Uint8Array($.dictionary)),$.raw&&(N=ci.inflateSetDictionary(this.strm,$.dictionary),N!==Yr)))throw new Error(Te[N])}Ai.prototype.push=function(C,$){const N=this.strm,ae=this.options.chunkSize,fe=this.options.dictionary;let oe,Be,Me;if(this.ended)return!1;for($===~~$?Be=$:Be=$===!0?Is:ha,Ns.call(C)==="[object ArrayBuffer]"?N.input=new Uint8Array(C):N.input=C,N.next_in=0,N.avail_in=N.input.length;;){for(N.avail_out===0&&(N.output=new Uint8Array(ae),N.next_out=0,N.avail_out=ae),oe=ci.inflate(N,Be),oe===ui&&fe&&(oe=ci.inflateSetDictionary(N,fe),oe===Yr?oe=ci.inflate(N,Be):oe===Va&&(oe=ui));N.avail_in>0&&oe===Xr&&N.state.wrap>0&&C[N.next_in]!==0;)ci.inflateReset(N),oe=ci.inflate(N,Be);switch(oe){case Ei:case Va:case ui:case Bs:return this.onEnd(oe),this.ended=!0,!1}if(Me=N.avail_out,N.next_out&&(N.avail_out===0||oe===Xr))if(this.options.to==="string"){let mt=Zi.utf8border(N.output,N.next_out),Ee=N.next_out-mt,Ie=Zi.buf2string(N.output,mt);N.next_out=Ee,N.avail_out=ae-Ee,Ee&&N.output.set(N.output.subarray(mt,mt+Ee),0),this.onData(Ie)}else this.onData(N.output.length===N.next_out?N.output:N.output.subarray(0,N.next_out));if(!(oe===Yr&&Me===0)){if(oe===Xr)return oe=ci.inflateEnd(this.strm),this.onEnd(oe),this.ended=!0,!0;if(N.avail_in===0)break}}return!0},Ai.prototype.onData=function(C){this.chunks.push(C)},Ai.prototype.onEnd=function(C){C===Yr&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Ra.flattenChunks(this.chunks)),this.chunks=[],this.err=C,this.msg=this.strm.msg};function On(C,$){const N=new Ai($);if(N.push(C),N.err)throw N.msg||Te[N.err];return N.result}function sn(C,$){return $=$||{},$.raw=!0,On(C,$)}var _r=Ai,Ha=On,Wl=sn,nc=On,ac={Inflate:_r,inflate:Ha,inflateRaw:Wl,ungzip:nc};const{Deflate:sc,deflate:cr,deflateRaw:Us,gzip:ma}=Ml,{Inflate:pa,inflate:Fs,inflateRaw:Dn,ungzip:Ln}=ac;var Vl=sc,js=cr,Hl=Us,Gs=ma,Ni=pa,ka=Fs,ga=Dn,Ws=Ln,zn=Se,kl={Deflate:Vl,deflate:js,deflateRaw:Hl,gzip:Gs,Inflate:Ni,inflate:ka,inflateRaw:ga,ungzip:Ws,constants:zn}}},__webpack_module_cache__={};function __webpack_require__(o){var u=__webpack_module_cache__[o];if(u!==void 0)return u.exports;var a=__webpack_module_cache__[o]={exports:{}};return __webpack_modules__[o].call(a.exports,a,a.exports,__webpack_require__),a.exports}__webpack_require__.n=o=>{var u=o&&o.__esModule?()=>o.default:()=>o;return __webpack_require__.d(u,{a:u}),u},__webpack_require__.d=(o,u)=>{for(var a in u)__webpack_require__.o(u,a)&&!__webpack_require__.o(o,a)&&Object.defineProperty(o,a,{enumerable:!0,get:u[a]})},__webpack_require__.o=(o,u)=>Object.prototype.hasOwnProperty.call(o,u),__webpack_require__.r=o=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},__webpack_require__("./src/index.ts"),__webpack_require__("./src/SurfaceWorker.js");var __webpack_exports__=__webpack_require__("./src/exporter.js");return __webpack_exports__})())}(_3Dmol$1)),_3Dmol$1.exports}require_3Dmol();const STORAGE_KEY="uploadedFiles",TabId={upload:"upload",viewer:"viewer",history:"history"},tabIdAtom=atom(TabId.upload),activeFileIdAtom=atom(null),filesDataAtom=atomWithStorage(STORAGE_KEY,[]),App=()=>{const[o,u]=useAtom(tabIdAtom),a=useAtomValue(filesDataAtom);return jsxRuntimeExports.jsx("div",{className:"App",children:jsxRuntimeExports.jsxs(Tabs,{value:o,className:"w-full",onValueChange:c=>u(c),children:[jsxRuntimeExports.jsxs(TabsList,{className:"w-full h-full grid grid-cols-3",children:[jsxRuntimeExports.jsx(TabsTrigger,{value:TabId.upload,className:"flex-1 text-center py-2 text-lg",children:"Upload"}),jsxRuntimeExports.jsx(TabsTrigger,{value:TabId.viewer,className:"flex-1 text-center py-2 text-lg",children:"Viewer"}),jsxRuntimeExports.jsxs(TabsTrigger,{value:TabId.history,className:"flex-1 text-center py-2 text-lg",children:["History (",a.length,")"]})]}),jsxRuntimeExports.jsx(TabsContent,{value:TabId.upload,className:"mt-4 w-full",children:jsxRuntimeExports.jsx(UploadPage,{})}),jsxRuntimeExports.jsx(TabsContent,{value:TabId.viewer,className:"mt-4 w-full",children:jsxRuntimeExports.jsx(ViewerPage,{})}),jsxRuntimeExports.jsx(TabsContent,{value:TabId.history,className:"mt-4 w-full",children:jsxRuntimeExports.jsx(HistoryPage,{})})]})})};clientExports.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(reactExports.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));
